"use strict";(self.edgeChromiumWebpackChunks=self.edgeChromiumWebpackChunks||[]).push([["common"],{24:function(t,e,n){n.d(e,{J:function(){return r}});var i=n(89438);function r(t){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;e&&e.logLoadingError&&(0,i.e)().then(()=>{e.logLoadingError(t)})}},486:function(t,e,n){n.d(e,{B4:function(){return s},F8:function(){return c},L9:function(){return o},wx:function(){return a}});var i=n(6092),r=n(44369);const o="stn",s="aad";function a(){return(0,r.l)().useEnterpriseCompliance()}async function c(){return(0,i.rA)().AccountInfoPromise.then(t=>t&&t.tenant_id?t.oid?`Oid:${t.oid}@${t.tenant_id}`:`TID:${t.tenant_id}`:"")}},661:function(t,e,n){n.d(e,{C:function(){return o}});var i=n(93342),r=n(77246);class o extends i.Q{constructor(t,e){super(t,e,{isUserSignedIn:void 0,isFlyoutDisplayed:!1}),this._authPrivateApi=(0,r.S)()&&window&&window.chrome&&window.chrome.authPrivate,this.registerSignInEventChangedCallback()}updateSignInState(t){this.updateState("isUserSignedIn",t)}updateSignInFlyoutDisplayState(t){this.updateState("isFlyoutDisplayed",t)}registerSignInEventChangedCallback(){this._authPrivateApi&&this._authPrivateApi.onSignInStateChanged.addListener(t=>{const e=t;this.updateSignInState(!!e.account_id)})}}},669:function(t,e,n){n.d(e,{$z:function(){return x},Be:function(){return j},Dv:function(){return M},FU:function(){return z},H8:function(){return I},HM:function(){return W},Ie:function(){return S},JF:function(){return D},LT:function(){return E},Mw:function(){return L},NN:function(){return w},Qw:function(){return q},RH:function(){return k},Rj:function(){return O},Tv:function(){return N},UP:function(){return _},Wh:function(){return H},Ww:function(){return U},YA:function(){return C},YI:function(){return F},cZ:function(){return R},nN:function(){return P},p_:function(){return v},s2:function(){return T},tO:function(){return A},wQ:function(){return V},xk:function(){return y},yL:function(){return B}});var i=n(70056),r=n(83003),o=n(80004),s=n(51600),a=n(6092),c=n(12870),u=n(19548),d=n(77246),l=n(30817),h=n(30216),f=n(98216),p=n(50180),g=n(18750);const m=new Set;function w(t){if(!t)return;if(m.has(t))return;const e=document.createElement("link");e.rel="preload",e.as="image",e.href=t,document.head.appendChild(e),m.add(t)}function y(t){try{const e=new Date(t),n=(new Date).getTime()-e.getTime();return Math.ceil(n/864e5)>3}catch(t){return!0}}function v(t,e,n,i,r){if(!t)return{logoImage:"",name:void 0};const o=i??16;let c="";const u={width:o,height:o,enableDpiScaling:!1,quality:100,format:s.f5.PNG},d="zh-cn"===(0,a.rA)().CurrentMarket;!e&&t.logo&&t.logo.id?c=(0,s.XP)(t.logo.id,u):r&&!d?c=`${(0,a.rA)().StaticsUrl}latest/views/img/yt-16.png`:(t.logoUrl||t.logo&&t.logo.url)&&(c=(0,s.oQ)(t.logoUrl||t.logo.url,u));const l={logoImage:c,id:t.id,name:t.name,profileId:t.profileId};return n&&(l.immersiveCardSvgLogo=b(n,t.darkThemeSVGLogo),l.svgLogo=(0,g.ud)()?l.immersiveCardSvgLogo:b(n,t.lightThemeSVGLogo)),l}function b(t,e){if(!e)return e;const n=e.width&&e.height?t*e.width/e.height:void 0;return{url:e.url,height:t,width:n}}function S(t){if(t?.cardContent?.isPanoCard&&1==t?.cardContent?.panocardType)t.cardContent.images=[{url:t.cardContent?.panoCaption?.thumbnail?.url,title:t.cardContent?.panoCaption?.title,width:2e3,height:3e3}];else if(!(t&&t.cardContent&&t.cardContent.images&&t.cardContent.images.length&&t.cardContent.images[0]&&t.cardContent.images[0].url))return t?.cardContent?.isPanoCard&&2==t?.cardContent?.panocardType&&(t.cardContent.isPanoCard=!1,t.cardContent.panoCaption=null),null;return t.cardContent.images[0]}function C(t){return t&&t.images&&t.images.length&&t.images[0]&&t.images[0].url?t.images[0]:null}function k(t,e){const{type:n,cardContent:i}=t;return e&&n==r.pL.Article&&i&&i?.panoCaption?.publishers?.length&&i?.panoCaption?.eventId}function T(t,e){e?.preventDefault(),t&&t.panoCaption&&window.open(t.panoCaption.destinationUrl.toString(),"_blank"),e?.currentTarget&&(e.currentTarget.classList.add("clicked"),f.YT.sendActionEvent(e?.currentTarget))}function x(t,e){t.panoCaption.articleDestinationUrl&&(t&&t.panoCaption&&window.open(t.panoCaption.articleDestinationUrl.toString(),"_blank"),f.YT.sendActionEvent(e?.currentTarget))}function A(t,e){return"bing"===t?.toLowerCase()&&a.T3.IsChinaCompliance&&e}var $;function I(t,e){if(t?.placement?.isAdFeedbackEnabled&&(e|=h.J.enabled),!(e&&e&h.J.enabled))return h.J.none;let{actions:n=[]}=t.metadata||t;const i=t.cardContent?t.cardContent.badges:t.badges,r=t.metadata?t.metadata.reasons:t.reasons;(i&&i.some(t=>"followedPublisher"===t.type)||r&&r.some(t=>"followPublisher"===t.type))&&(n=[...n||[],$.followedPublisher]),r&&r.some(t=>"followTopic"===t.type)&&(n=[...n||[],$.followedTopic]);let o=h.J.enabled;return n.forEach(t=>{"save"===t&&(t="saved"),"liked"!==t&&"like"!==t||(t="showMore");const n=h.J[t];n&e&&(o|=n)}),o}function P(t,e,n){if(!t)return;if(!e)return t.cardActionsTooltips;const{cardActionsTooltips:r,showMoreV2:o,showFewerV2:s,undoShowMoreV2:a}=t,c=r&&(e.enableSaveButton||!o),u=(()=>{switch(n?.type){case i.ac.FOLLOWEDPUBLISHER:case i.ac.FOLLOWEDTOPIC:return t.followConfirmationText&&n.follow?.name&&(0,p.GP)(t.followConfirmationText,n.follow.name);case i.ac.LOCAL:return t.cardActionsTooltips?.whyAmISeeLocal;case i.ac.TRENDING:return t.cardActionsTooltips?.whyAmISeeTrending;case i.ac.EXPLORE:{const e=t.cardActionsTooltips?.whyAmISeeExplore;return e&&n?.follow?.name&&(0,p.GP)(e,n.follow.name)}}})()??r?.whyAmISee;return{...r,showMore:c?r.showMore:o,showFewer:c?r.showFewer:s,undoShowMore:c?r.undoShowMore:a,whyAmISee:u}}function R(t,e){if(t&&t.cardContent){const e=t.cardContent.destinationUrl;return t.type===r.pL.EventInfopaneShoppingAI&&(t.cardContent.isShoppingArticleCard=!0),e&&(t.cardContent.destinationUrl=M(e)),t}const n=t;let i;i=n.type===r.pL.Slideshow?"SlideshowPreview":n.type===r.pL.Video?"VideoPreview":n.type===r.pL.WebContent?"WebContentPreview":"ArticlePreview",n.cardContent={id:n.id,destinationUrl:M(n.url),type:i,title:n.title,aiComments:n.aiComments,abstract:n.abstract,customTransitionSpeed:n.customTransitionSpeed,provider:n.provider,locale:n.locale,images:n.images,publishedDateTime:n.publishedDateTime,colorSamples:n.colorSamples,badges:n.badges,topics:n.topics,videoFiles:n.externalVideoFiles||[],videoMetadata:n.videoMetadata||{},isLocalContent:n.isLocalContent};const o=n.type;return n.metadata||o===r.pL.AmplifyAd||o===r.pL.NativeAd||o===r.pL.CmsAd||o===r.pL.IntraNativeAd&&e||(n.metadata=function(t){if(t&&t.metadata)return t.metadata;const e=t;if(!e)return null;const n=e.type===r.pL.EventInfopaneShoppingAI?/[/?]/:"/",i=e.cardContent?.destinationUrl?.split(n);return{abstract:e.abstract,abstractLength:e.abstract?.length,titleLength:e.title?.length,category:e.category||i?.length>=5&&i[4],subCategory:i?.length>=6&&i[5],primaryImage:{height:e.images&&e.images[0]?.height,width:e.images&&e.images[0]?.width},locale:e.locale,feed:{id:e.feed?.id},kicker:[e.feed],actions:e.actions?.map(t=>$[t]||t),reactionStatus:e.reactionStatus,commentStatus:e.commentStatus,reactionSummary:e.reactionSummary,commentSummary:e.commentSummary,topComments:e.topComments,reasons:e.reasons,source:e.source,ref:e.ref,relatedCards:e.relatedCards,topics:e.topics,topQuestions:e.topQuestions,highlights:e.highlights,debugId:e.debugId,isFirstSectionCard:e.isFirstSectionCard,videoMetadata:e.videoMetadata}}(n)),n}function M(t){if(!t)return;const e=new URLSearchParams(window.location.search),n=new URL(t);if(F()){const t=e.get("ocid");if(t){const e=new URLSearchParams(n.search);e.set("ocid",t),n.search=`?${e.toString()}`}}const i=e.getAll("item");return i&&i.length?(i.forEach(t=>{const e=n.search?"&":"?";-1===n.search.indexOf(t)&&(n.search+=`${e}item=${t}`)}),n.toString()):n.toString()}function _(){return null!==u._3.getQueryParameterByName("edge",window.location.href)}function E(){return null!==u._3.getQueryParameterByName("launcher",window.location.href)}function F(){const t=window.location.href;return null!==u._3.getQueryParameterByName("disti",t)}function D(t){const{followText:e,followingText:n,followSuccessMessage:i,unfollowSuccessMessage:r,interestErrorMessage:o}=t;return{followText:e,followingText:n,followSuccessMessage:i,unfollowSuccessMessage:r,interestErrorMessage:o}}function O(t,e){const n=t===r.pL.WebContent,i=n&&Boolean(e);return{isVideo:i||t===r.pL.Video,isWebContent:n,isWebVideo:i}}function N(t){return t&&t.length&&t[0]&&t[0].url?t[0]:null}function L(t,e,n,i){const{attribution:r,title:o=t.title,url:a,focalRegion:c}=t.images?.[0]||t.cardContent.images?.[0]||{},u=[];let d;o&&u.push(o),r&&u.push(r),u.length&&(d=u.join(" - "));let l=90;const h=window?.navigator?.connection?.effectiveType;if(h){l={"slow-2g":20,"2g":40,"3g":60,"4g":80}[h]}else(_()||E()||F())&&(l=70);const{width:f,height:p}=e,g=(0,s.oQ)(a,{width:f,height:p,focalRegion:c,enableDpiScaling:!1,quality:l,devicePixelRatio:1,enableWebpFormat:i});return{imageWidth:f.toString(),imageHeight:p.toString(),source:g,altText:d,visualReadinessCallback:n}}function B(t,e,n,i){if(!t||!e?.name||!n?.contentProviderAttributionLabel||i&&!n?.contentTypeFormattingAriaLabel)return null;const r=U(n,i);return r?(0,p.GP)(n?.contentTypeFormattingAriaLabel,r,t,e.name):(0,p.GP)(n.contentProviderAttributionLabel,t,e.name)}function U(t,e){return e===r.pL.Slideshow?t?.galleryAriaLabel:e===r.pL.Video?t?.videoAriaLabel:e===r.pL.WebContent?t?.crawledContentLabel:void 0}function W(t,e){return t?.find(t=>t.isDarkMode)?.hexColor&&t?.find(t=>!t.isDarkMode)?.hexColor?t:(0,o.mt)(e)}function V(t,e,n){if(!t||!e||!n)return;const r=(0,i.lP)(e,n);return r&&(r.type,i._Y.OPINION,r.localizedLabel=t[r.type+"BadgeLabel"]),r}function H(t){return t.enableUltraCards}function z(t){return!!t&&("play"===t?.category&&"games"===t?.subCategory)}function j(t,e,n){try{if(!(e?.trackContentCardAge||"edgeChromium"===a.T3.AppType&&c.Rb.CurrentFlightSet?.has?.("rprefeedrefreshcont"))||!t||!(0,d.S)())return;const i=(0,l.ZF)();if(i.contentCardAges||(i.contentCardAges=[]),i.contentCardAges.length<4){const e=new Date(t),r=new Date,o=Math.floor((r.getTime()-e.getTime())/6e4);i.contentCardAges.push(o),"BreakingNewsNotification"===n&&(i.BreakingNewsAge=o)}}catch(t){}}function q(t,e,n){const i=e?.totalCount||0;return{upvotes:t?.subReactionSummaries?.find(t=>"upvote"===t.type)?.totalCount??0,downvotes:t?.subReactionSummaries?.find(t=>"downvote"===t.type)?.totalCount??0,comments:i,disabledComments:"disabled"===n}}!function(t){t.liked="like",t.unliked="unlike",t.saved="save",t.followedPublisher="followedPublisher",t.followedTopic="followedTopic"}($||($={}))},854:function(t,e,n){n.d(e,{Bi:function(){return _},FA:function(){return O},Rk:function(){return L},Sf:function(){return F},Sp:function(){return B},aC:function(){return E},d1:function(){return M},hh:function(){return U},jp:function(){return N},mk:function(){return P},qC:function(){return D},vp:function(){return R}});var i=n(13312),r=n(10610),o=n(43434),s=n(20205),a=n(49545),c=n(12870),u=n(1732),d=n(11367),l=n(52573),h=n(27942),f=n(88296),p=n(28006),g=n(84855),m=n(35849),w=n(6092),y=n(53384),v=n(77246),b=n(17720),S=n(38405),C=n(98216),k=n(77120),T=n(44383),x=n(73920),A=n(84970),$=n(99124),I=n(34713);const P=Symbol();function R(){const t=(0,m.zP)(p.h$),e=t?.getCurrentState(),n=e?.selectedFeedDisplaySetting;return"headingsonly"===n||"off"===n}async function M(){let t="",e="";const n=await(0,u.ei)(!0);return n?.promotion&&(t=n.promotion),n?.selection&&(e=n.selection),{anaheimLayoutPromotion:t,anaheimContentSelection:e}}async function _(){const[{anaheimLayoutPromotion:t,anaheimContentSelection:e},n,i,r,o,s,a]=await Promise.all([M(),E(),(0,u.KQ)(),(0,u.nX)(),(0,u.Rx)(),(0,u.e7)(),(0,u.sY)()]);return{anaheimLayoutPromotion:t,anaheimContentSelection:e,inEdgeFeatures:o,revertTimes:s,adminDisabled:a,backgroundImageIsSet:n,newProfFreTime:i,newDevFreTime:r,isAdb:c.Rb.EdgeNTPHeader?.isAdb}}async function E(){const t=await(0,u.WH)(),e=await r.K.getCurrentBackgroundMetadata(),n=e?.provider,i=!!t||"NoBackground"===n;return C.YT.addOrUpdateTmplProperty("backgroundImageIsSet",i?"1":"0"),"NoBackground"===n&&C.YT.addOrUpdateTmplProperty("backgroundImageIsOff","1"),i}function F(){const t=(0,m.zP)(p.h$);return t?.getCurrentState()}function D(){const t=(0,m.zP)(p.h$),e=t?.getCurrentState();let n=!!e?.enableWidgetsRegion;return n||(n=!!t?.shouldOverrideWidgetsQSP()),n}async function O(t,e,n,r){const a=(0,y.kP)(),c={experienceType:(0,u.xe)(a)?g.HPc:g.jCw,instanceSrc:"default"},l=await s.L.getConfig(c);let v=l?.properties?.riverSectionCardProviderConfig?.initialRequest;if(!v)return;const b=F(),k=(0,u.c9)(b.configData?.enabledFeatures||[]),T=(0,u.Eb)(k);e.auctionRidOverride&&(v.adRefreshVariant="",v.gdpr=!!window.__tcfapi,v.anaheimPageLayout=b.currentLayout,v.verticalName=w.T3?.HostPage?.verticalKey),n&&!w.T3.IsHeroNTP&&(v.widgetsOn=D(),e.useDedicatedWidgetsManager&&R()&&(v={...v,disableContent:!0})),r&&(v.copilotApiSupported=!0),Object.assign(v,t);const x=(0,f.TU)().currentColumnArrangement;if(x&&(v.column=x),(0,u.xe)(a)){const t={c1:i._4.C1,c2:i._4.C2,c3:i._4.C3,c4:i._4.C4,c5:i._4.C5},n=e.enableOneColumn||x!==h.j1.c1?x:h.j1.c2,r=(0,S.cP)(t[n],void 0,void 0,e);v={...v,...r}}if(v.pageConfiguration=t.pageConfiguration??C.YT.getPageMetadata()?.contract?.page?.config,!v.pageConfiguration&&b){const t=(0,m.zP)(p.h$),e=await t.getPrimaryAccountInfoAsync(!1);v.pageConfiguration=(0,o.UU)(b,"MSA"===e?.accountType)}return T&&(v.edgExpMask=T),v.skipRetry=e.enableSkipRetry,v.isRubyEligible=await(d.gR.getRubyEligibilityForClassicNTPUser?.()),v}async function N(t,e){const n=(0,y.kP)();if(["productivityHub","following"].includes(n))return;if((0,l.V)())return void C.YT.addOrUpdateTmplString("DisablePrerenderFeed:1");const i=F(),r=(0,x.FD)(e,i);if(e.useDedicatedWidgetsManager&&r);else if(R())return;let o;k.V_.enableEarlyMainFeedRequest=!0;const s=(0,T.km)();if(s)o=s,b.vv.set("__isSSRWpoFeedConsumed__",!0);else{const i=await(0,A.P)(),s=await O(t,e,r,i),a=new T.Oq({...(0,$.w)(e),initialRequest:{timeoutMs:s.timeoutInMs},feedCacheEnabled:e.feedCacheEnabled,feedCacheMaxAgeInMs:e.feedCacheMaxAgeInMs},!1);await T.Oq.ensureLock();try{o=await a.fetchFromWpoService(s,!0,null,!1,void 0,a.feedResponseCache)}catch(t){if(t instanceof T.fb&&(C.YT.addOrUpdateTmplProperty("wpofetchabort",t.silentExit?"silentexit":"continue"),t.silentExit))return;throw t}finally{T.Oq.releaseLock()}o&&(o.responseStatus=a.getResponseStatus(),w.T3.IsHeroNTP&&(o.isStatic=a.getIsStatic())),(0,u.xe)(n)&&(0,S.aI)(s,o)}(0,v.S)()&&((0,a.W)(o),d.gR.update1sCohort(o,e)),k.V_.storeEarlyWpoFeedData(o)}function L(){if((0,I.C6)()&&window.staleSSRFeed)return!0;const t=!("enterprise"===w.T3?.CurrentRequestTargetScope?.audienceMode);return!c.Rb?.IsPrerender||t}function B(t,e){return!(!0===t?.disableFeed||!t?.enableEarlyFeedSSR||"always"!==e&&"peek"!==e)}async function U(t){throw new Error("getHeaderHeightForSSRPrefetch should only be called on the server")}},930:function(t,e,n){n.d(e,{Cm:function(){return o},P:function(){return c},f1:function(){return s},iw:function(){return a},uE:function(){return i}});var i,r=n(18284);!function(t){t.pill="pill",t._1x_halfy="_1x_halfy",t._2x_halfy="_2x_halfy",t._1x_1y="_1x_1y",t._1x_2y="_1x_2y",t._1x_3y="_1x_3y",t._1x_4y="_1x_4y",t._1x_5y="_1x_5y",t._2x_1y="_2x_1y",t._2x_2y="_2x_2y",t._2x_3y="_2x_3y",t._2x_4y="_2x_4y",t._2x_6y="_2x_6y",t._3x_1y="_3x_1y",t._3x_2y="_3x_2y",t._3x_3y="_3x_3y",t._4x_1y="_4x_1y",t._4x_2y="_4x_2y",t._5x_1y="_5x_1y",t._5x_2y="_5x_2y",t._25u="0.25u",t._05u="0.5u",t._075u="0.75u",t._1u="1u",t._125u="1.25u",t._15u="1.5u",t._175u="1.75u",t._2c="_2x_2y",t._2u="_1x_4y",t._3u="_1x_6y"}(i||(i={}));const o=146,s=300,a=12,c=(0,r.A)(t=>Array(t).fill(o))},974:function(t,e,n){n.d(e,{$S:function(){return c},v:function(){return u},v3:function(){return a}});var i=n(11177);const r=12,o=32;let s;function a(){return s||((0,i.Zj)(r),s=[0,i.rY+o,i.sx+o,i.zN+o,i.YK+o,i.t9+o],(0,i.su)(),s)}const c=["CS-RESPONSIVE-","CX-RUBY-","CX-GEM-CARD","CREATOR-SPOTLIGHT-CARD","SHORTS-GROUPING","CASUAL-GAMES-ENTERTAINMENT-TAKEOVER"];const u=new Set(["RESPONSIVE-SD-CARD","CS-CONTENT-CARD","CS-RESPONSIVE-CARD","TrafficCard"])},1207:function(t,e,n){n.r(e),n.d(e,{BackgroundImageWC:function(){return ct},BackgroundImageWCInlineStyles:function(){return jt},BackgroundImageWCStyles:function(){return qt},BackgroundImageWCTemplate:function(){return Dt},EventName:function(){return Gt},ToolingInfo:function(){return Jt},cacheCMSWeeklyImages:function(){return rt},isErrorImageUrl:function(){return it}});var i=n(56911),r=n(65022),o=n(93468),s=n(59721);const a=s.P.Dialog.toString();var c=n(69913),u=n(84855),d=n(28006),l=n(71470),h=n(55593),f=n(37739),p=n(6092),g=n(13937),m=n(12870),w=n(28611),y=n(53978),v=n(94425),b=n(71967),S=n(19548),C=n(89980),k=n(11372),T=n(98216),x=n(23429),A=n(60815),$=n(38493),I=n(70487),P=n(87405),R=n(14588),M=n(34299),_=n(89151),E=n(18731),F=n(77246),D=n(27261),O=n(51600),N=n(10610),L=n(7187),B=n(1732),U=n(30066),W=n(35849),V=n(82238),H=n(16611);class z{constructor(t,e){if(this.dayNow=(new Date).getDay(),this.firstFrameHidden=!1,this.isEnergySaverMode=!1,this.isGalleryEnabled=!1,this.isPlaying=!1,this.isReducedMotionActive=!1,this.isTomorrowsVideoCached=!1,this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion)"),this.showVideo=!1,this.showToast=!1,this.storageKey="bkgdV",this.timeNow=(new Date).getTime(),this.batteryChargingChange=()=>{this.battery.charging&&(this.currentTrigger?this.playVideo("Battery"):this.playVideo("Timer"))},this.playVideo=async t=>{!this.config.isTest&&this.showVideo&&t&&"Button"===t&&(await this.batteryPromise,t!==this.currentTrigger&&"Button"!==t||this.battery&&!this.battery.charging&&"Button"!==t||this.isPlaying||this.isReducedMotionActive&&"Button"!==t?this.battery.charging||(this.currentTrigger="Battery"):(0,H.e1)().then(()=>{const t=1e3*this.config.pauseTime;this.videoTimer&&this.videoTimer.timer&&clearTimeout(this.videoTimer.timer),this.isGalleryEnabled&&this.isEnergySaverMode&&!this.isBandwidthAdequateForVideo()?this.pauseVideo("Network"):(this.videoTimer.remainingTime<=0&&(this.videoTimer.remainingTime=t),this.videoTimer.startTime=Date.now(),this.videoTimer.timer=n.g.setTimeout(()=>{(this.isGalleryEnabled||!this.battery.charging)&&(!this.isGalleryEnabled||this.isEnergySaverMode)?this.pauseVideo("Timer"):this.playVideo("Timer")},this.videoTimer.remainingTime),this.handleVideoPlay())}))},this.handleVideoPlay=()=>{this.isPlaying=!1,requestAnimationFrame(()=>{this.isReducedMotionActive=!1,this.backgroundImageWC.ref_video.play().then(()=>{this.isPlaying=!0}).catch(t=>{(0,o.c_)(t,r.QBS,"Failed to trigger play.","Timer: "+JSON.stringify(this.videoTimer)+". Current trigger: "+this.currentTrigger+". Show video: "+this.showVideo),this.isPlaying=!1}).finally(()=>{this.backgroundImageWC.updateProperties()})})},this.pauseVideo=t=>{if(this.isPlaying&&this.showVideo){this.currentTrigger=t,this.videoTimer&&this.videoTimer.timer&&(clearTimeout(this.videoTimer.timer),this.videoTimer.remainingTime-=Date.now()-this.videoTimer.startTime),this.isPlaying=!1,this.backgroundImageWC.updateProperties();try{this.backgroundImageWC.ref_video.pause()}catch(t){(0,o.c_)(t,r.gfd,"Failed to trigger pause.","Timer: "+JSON.stringify(this.videoTimer)+". Current trigger: "+this.currentTrigger+". Show video: "+this.showVideo)}}},this.reducedMotionChange=()=>{this.isReducedMotionActive=this.prefersReducedMotion.matches},this.showToastMessage=(t,e)=>{this.showToast=!0,this.toastMessage=t,e&&this.pauseVideo("Battery"),this.shouldSkipShowToast()?this.hideToastMessage():(this.backgroundImageWC.updateProperties(),n.g.setTimeout(()=>{this.hideToastMessage()},5e3))},this.hideToastMessage=()=>{this.showToast=!1,this.toastMessage=null,this.backgroundImageWC.updateProperties()},this.shouldSkipShowToast=()=>{const t="off"===this.backgroundImageWC.chromiumPageSettingsState?.selectedQuickLinksDisplaySetting;return"always"===this.backgroundImageWC.chromiumPageSettingsState.selectedFeedDisplaySetting&&t},this.config=t,this.backgroundImageWC=e,!(0,F.S)())return;if(this.topSitesLayoutDataConnector=(0,W.zP)(d.OJ),this.isGalleryEnabled=!e.config.disableBackgroundGallery&&N.K.getBackgroundGalleryEligibility(),this.isGalleryEnabled){this.backgroundDataConnector=(0,W.zP)(d.lm);const t=this.backgroundDataConnector.getCurrentState();this.isEnergySaverMode=!(0,L.isNullOrUndefined)(t)&&"energySaver"===t.selectedVideoSetting,R.Y.videoSettingsUpdated.registerObserver(t=>{const e=t&&t.params;if(!e||!e.length)return;const n=e[0];this.isEnergySaverMode="energySaver"===n})}this.videoTimer={remainingTime:-1,startTime:-1,timer:null},this.assignVideoSchedule();const i=window&&window.navigator;this.deviceLogicalProcessors=i?i.hardwareConcurrency:-1,this.deviceMemoryGB=i?i.deviceMemory:-1,this.batteryPromise=i.getBattery().then(t=>{this.battery=t}),(0,B.h_)()?this.showVideo=!1:(this.showVideo=this.shouldShowVideo(),this.showVideo&&this.setVideoAndMuseumCardProperties(),this.config.isTest||Promise.all([(0,_.uR)(),(0,V.Qc)()]).then(()=>{this.cacheNextVideo()}))}setVideoAndMuseumCardProperties(){this.defineResolution(),this.videoSource=this.getVideoURL(this.videoId),this.firstFrameSource=this.getFirstFrameURL(this.videoId),this.firstFrameId=this.getFirstFrameId(this.videoId);const t="video"+this.videoId;if(!this.videoSource||!this.firstFrameSource)return;const e=this.backgroundImageWC.config.localizedStrings?.video_querys?.[t];this.museumCard={credits:this.config.data[this.videoId].attribution,isDisplayed:!0,title:this.backgroundImageWC.config.localizedStrings?.video_titles?.[t],titleURL:e?(0,v.bI)(`https://www.bing.com/search?q=${e}&mkt={localeCode}&form=NTBGIM`):null}}assignBackgroundUsingIndex(t){window.isSSREnabled&&this.defineResolution(),this.videoId=Number(t),this.setVideoAndMuseumCardProperties()}getCurrentBackgroundVideoId(){return this.videoId}assignVideoSchedule(){const t=this.getVideoData();t&&t.schedule?(this.schedule=t.schedule,this.scheduleFixed=t.scheduleFixed,this.checkAndGenerateVideoSchedule(),this.reRandomizeSchedule(t)):this.generateVideoSchedule()}checkAndGenerateVideoSchedule(){for(let t=0;t<this.schedule.length;t++){const e=this.schedule[t];if(this.config.data[e]&&this.config.data[e].removeContent||e>-1&&!this.validateCurrentIndex(e,!0)){this.generateVideoSchedule();break}}}validateCurrentIndex(t,e=!1){const n=!(0,L.isNullOrUndefined)(t)&&t<this.config.data.length&&!!this.config.data[t];return!n&&e&&(0,o.vV)(r.Gi4,"Error validating video configuration index: "+t),n}cacheNextVideo(){const t=new Date;t.setDate(t.getDate()+1);const e=t.getDay(),n=this.getVideoData();if(!(n&&n.cachedVideoId===this.schedule[e]||N.K.getDailyRotationOnlySimpleImages()&&this.backgroundImageWC.config.simpleImages)&&this.schedule[e]>=0&&this.config.enableFeature){const t=this.schedule[e];this.eventsAbortController&&this.eventsAbortController.abort();try{const e=this.getVideoURL(t),i=this.getFirstFrameURL(t);if(!e||!i)return;this.eventsAbortController=new AbortController;const r=this.eventsAbortController.signal;fetch(e,{signal:r}),fetch(i,{signal:r}),this.isTomorrowsVideoCached=!0,this.storeVideoData({cachedVideoId:t,lastUpdatedTime:n?.lastUpdatedTime,schedule:n?.schedule,scheduleFixed:n?.scheduleFixed})}catch(e){(0,o.vV)(r.Ez4,"Video caching failed. Video url: "+this.getVideoURL(t)+" First frame url: "+this.getFirstFrameURL(t),"Error: "+e)}}}defineResolution(){const t=new E.bb,e=(0,E.KP)(t.data.innerHeight,"innerHeight"),n=(0,E.KP)(t.data.innerWidth,"innerWidth"),i=(0,D.mZ)()||1,r=(window.screen&&window.screen.height?window.screen.height:e+150)*i,o=(window.screen&&window.screen.width?window.screen.width:n)*i;this.currentResolution=r<=720||o<=1280?"720":720<r&&r<=1080||1280<o&&o<=1920?"1080":1080<r&&r<2e3||1920<o&&o<3e3?"1440":r>=2e3||o>=3e3?"2160":"1440",T.YT.addOrUpdateTmplProperty("bkgdRes",this.currentResolution)}error(){this.showVideo=!1}generateVideoSchedule(){const t=[];for(let e=0;e<this.config.data.length;e++)t[e]=!1;this.schedule=[-1,-1,-1,-1,-1,-1,-1],this.scheduleFixed=[-1,-1,-1,-1,-1,-1,-1];for(let e=0;e<this.config.videosPerWeek;e++){let n=Math.floor(Math.random()*this.config.data.length);if(t[n]||!this.config.data[n]||this.config.data[n].skipRotation||this.config.data[n].removeContent)do{n===this.config.data.length-1?n=0:n++}while(t[n]||!this.config.data[n]||this.config.data[n].skipRotation||this.config.data[n].removeContent);this.schedule[e]=n,t[n]=!0}(0,U.A)(this.schedule),this.scheduleFixed=this.schedule;const e=this.getVideoData();this.storeVideoData({cachedVideoId:e?.cachedVideoId?e.cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed})}getFirstFrameURL(t){return(0,O.XP)(this.getFirstFrameId(t),{width:0,height:0,enableDpiScaling:!1})}getFirstFrameId(t){if(!this.config.data[t])return null;let e=this.config.data[t].firstFrame[`i${this.currentResolution}`];return(0,F.S)()&&(e=this.isGalleryEnabled?this.isEnergySaverMode?this.config.data[t].firstFrame.i720:e:this.shouldReduceTo1080()?this.config.data[t].firstFrame.i1080:e),e}getVideoData(){try{return(0,C.Lg)().getObject(this.storageKey)}catch(t){return(0,o.vV)(r.d_w,"Local storage for video data failed."),null}}getVideoURL(t){if(!this.config.data[t])return null;let e=this.config.data[t].video[`v${this.currentResolution}`];return(0,F.S)()&&(e=this.isGalleryEnabled?this.isEnergySaverMode?this.config.data[t].video.v720:e:this.shouldReduceTo1080()?this.config.data[t].video.v1080:e),(0,O.He)(e)}removeVideoForToday(){const t=this.getVideoData();t&&t.schedule&&(t.schedule[this.dayNow]=-1,this.showVideo=!1,this.storeVideoData(t))}removeVideoFromLocalStorage(t){const e=this.getVideoData(),n=Number(t);let i=!1;if(e&&e.schedule){for(let t=0;t<e.schedule.length;t++)e.schedule[t]===n&&(e.schedule[t]=-1,i=t===this.dayNow);this.storeVideoData(e)}return i}reRandomizeSchedule(t){t.lastUpdatedTime<this.timeNow-6048e5&&this.generateVideoSchedule()}shouldShowVideo(){const t=N.K.getBackgroundSettingsPreferencesCache(),e=this.backgroundImageWC.dailyRotationEnabled(t);return!(!this.backgroundImageWC.ssrRotationMismatch||!e||"Video"!==this.backgroundImageWC.ssrBackgroundMetadata.provider)}shouldReduceTo1080(){const t=this.isBandwidthAdequateForVideo(),e=this.deviceMemoryGB>=4;return(!t||!e)&&(this.currentResolution="1080",!0)}isBandwidthAdequateForVideo(){return"4g"===window.navigator.connection.effectiveType}storeVideoData(t){try{(0,C.Lg)().setObject(this.storageKey,t)}catch(t){return void(0,o.vV)(r.cke,"Local storage for video data failed.")}}unloadVideo(){this.batteryPromise.then(()=>{this.battery.removeEventListener("chargingchange",this.batteryChargingChange)}),this.prefersReducedMotion.removeEventListener("change",this.reducedMotionChange)}videoLoaded(){this.firstFrameHidden=!0,this.backgroundImageWC.updateProperties();const t=this.getVideoData();t&&t.cachedVideoId<0&&T.YT.addOrUpdateTmplString("videoFirstLoad"),this.isReducedMotionActive=this.prefersReducedMotion.matches,!this.isReducedMotionActive&&this.deviceMemoryGB>=4&&(this.isPlaying=!1,this.playVideo("Timer")),this.batteryPromise.then(()=>{this.battery.addEventListener("chargingchange",this.batteryChargingChange)}),this.prefersReducedMotion.addEventListener("change",this.reducedMotionChange)}}var j=n(22011),q=n(18750),G=n(38754),J=n(27061),Q=n(42e3),K=n(27597),X=n(55457);class Y{constructor(t,e){this.showImageInRotation=!1,this.dayNow=(new Date).getDay(),this.darkModeQuery=window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)"),this.config=t,this.backgroundImageWC=e,(0,F.S)()&&(this.cmsSize=N.K.getCMSImageSize(),this.showImageInRotation=this.shouldShowImageInRotation(),this.showImageInRotation&&this.setImageAndMuseumCardProperties())}shouldShowImageInRotation(){if(this.backgroundImageWC.simpleSchedule){const t=this.backgroundImageWC.simpleSchedule,e=t&&t[this.dayNow];if(e>-1&&this.validateCurrentIndex(e)&&this.config?.data)return this.imageId=N.K.getDefaultBackground()?0:t[this.dayNow],!0}return!1}showAbstractImageRotation(t){this.backgroundImageWC.config.enableAbstractImages&&t&&(this.imageId=t+this.dayNow,this.imageSource=this.getNTPAbstractImageURL(this.dayNow))}showRubyImageRotation(t){if(this.backgroundImageWC.config.enableRubyImages&&t){const e=X.VR?.dataLight?.length||0,n=(new Date).getDate()||0;this.imageId=t+n%e,this.imageSource=this.getImageURL(this.imageId)}}getLocTitleKey(){return this.imageId<=this.cmsSize?`image${this.imageId}`:`simple${this.imageId}`}setImageAndMuseumCardProperties(){if(this.defineResolution(),this.imageSource=this.getImageURL(this.imageId),this.imageName=this.getImageName(this.imageId),!this.imageSource)return;const t=this.getLocTitleKey(),e=this.backgroundImageWC.config.localizedStrings?.cmsimage_querys?.[t];this.museumCard={credits:this.config?.data[this.imageId]?.attribution||"",isDisplayed:!0,title:this.backgroundImageWC.config.localizedStrings?.cmsimage_titles?.[t]||"",titleURL:e?(0,v.bI)(`https://www.bing.com/search?q=${e}&mkt={localeCode}&form=NTBGIM`):null}}assignBackgroundUsingIndex(t){this.imageId=Number(t),this.setImageAndMuseumCardProperties()}assignHeroBackground(){this.defineResolution();const t=S._3.getQueryParameterByName("assetId",(0,D.iA)()),e=Number(this.currentResolution);let n;n=isNaN(e)?{width:0,height:0,enableDpiScaling:!1}:{width:e/9*16,height:e,enableDpiScaling:!1},this.imageSource=(0,O.XP)(t,n)}assignHolidayBackground(t){this.defineResolution();const{enableEventGleamImage:e}=this.backgroundImageWC.config;this.imageSource=e?this.getEventImageURL(t):this.getHolidayImageURL(),this.imageSource&&(this.museumCard={credits:this.backgroundImageWC.config.holidayImage.attribution,isDisplayed:!0,title:null,titleURL:null})}getHolidayImageURL(){if(!this.backgroundImageWC.config.holidayImage)return null;const{holidayImage:t}=this.backgroundImageWC.config,e=this.darkModeQuery.matches?t.dark:t.light;return(0,O.XP)(e[`i${this.currentResolution}`],{width:0,height:0,enableDpiScaling:!1})}getEventImageURL(t){const e=t?{DarkGleamUrl:this.backgroundImageWC.ssrBackgroundMetadata.dark,LightGleamUrl:this.backgroundImageWC.ssrBackgroundMetadata.light}:this.backgroundImageWC.eventGleam;return e?this.darkModeQuery.matches?e.DarkGleamUrl:e.LightGleamUrl:null}getImageURL(t){return this.backgroundImageWC?.config?.enableRubyImages?(0,O.XP)(this.getImageName(t),{width:0,height:0,enableDpiScaling:!1,quality:100}):(0,O.XP)(this.getImageName(t),{width:0,height:0,enableDpiScaling:!1})}getImageName(t){if(!this.config?.data[t])return null;const e=this.config?.data[t].image[`i${this.currentResolution}`];return e}getNTPAbstractImageURL(t){const e=(this.darkModeQuery.matches?X.vb.dataDark:X.vb.dataLight)[t].image[`i${this.currentResolution}`];return e?(0,O.XP)(e,{width:0,height:0,enableDpiScaling:!1}):null}defineResolution(){const t=new E.bb,e=(0,E.KP)(t.data.innerHeight,"innerHeight"),n=(0,E.KP)(t.data.innerWidth,"innerWidth"),i=(0,D.mZ)()||1,r=(window.screen&&window.screen.height?window.screen.height:e+150)*i,o=(window.screen&&window.screen.width?window.screen.width:n)*i;this.backgroundImageWC?.config?.enableRubyImages?this.currentResolution=r>=2e3||o>=3e3?"2160":"1440":this.currentResolution=r<=720||o<=1280?"720":720<r&&r<=1080||1280<o&&o<=1920?"1080":1080<r&&r<2e3||1920<o&&o<3e3?"1440":r>=2e3||o>=3e3?"2160":"1440",T.YT.addOrUpdateTmplProperty("bkgdRes",this.currentResolution)}getCurrentResolution(){return this.currentResolution}validateCurrentIndex(t,e=!1){this.config&&this.backgroundImageWC?.config&&this.backgroundImageWC.config.simpleImages&&this.config?.data?.length!=this.backgroundImageWC.config.cmsImage?.data?.length&&(this.config.data=this.backgroundImageWC.config.cmsImage.data);const n=!(0,L.isNullOrUndefined)(t)&&t<this.config?.data.length&&!!this.config?.data[t];return this.backgroundImageWC?.config&&this.backgroundImageWC.config.noIrisBackgrounds&&!n?(N.K.setDefaultBackground(!0),e&&(0,o.vV)(r.Gi4,"Error validating CMS Image configuration index: "+t+". Using default background."),!0):(!n&&e&&(0,o.vV)(r.Gi4,"Error validating CMS Image configuration index: "+t),n)}}var Z=n(56085),tt=n(66600),et=n(54761),nt=n(69118);function it(t,e,n){return[(0,O.XP)(e,{width:0,height:0,enableDpiScaling:!1}),(0,O.XP)(n,{width:0,height:0,enableDpiScaling:!1})].includes(t)}function rt(t,e){if(!(0,F.S)())return;const n=t.map(t=>e.getImageURL(t));for(const t of n)if(t?.length>0){const e=new Image;e.src=t,e.setAttribute("fetchpriority","low")}}var ot=n(54030),st=n(87518);const at="vp"===(0,h.a)().get("reqsrc")||!!(0,h.a)().get("vptest");class ct extends j.U{constructor(){super(...arguments),this.eventLocalStorage=f.J.getInstance(),this.imageOverrideStyles="",this.isFeedDisplayAlwaysOn=!1,this.isFRE=p.T3.IsFrePage,this.isTestRunning=!1,this.isReducedMotionActive=!1,this.isTTVRFired=!1,this.isLoadComplete=!1,this.hasFeedDisplayChanged=!1,this.museumCreditsCardIsShown=!1,this.isBackgroundDefaultedToOff=!1,this.isChinaCompliance=(0,p.rA)().IsChinaCompliance,this.telemetryTags={},this.videoPlaying=!1,this.spaceHolderHeight=null,this.bgBlurSize="0px",this.shouldUpdateMuseumCardVisibility=!0,this.storageKey="bkgdV",this.timeNow=(new Date).getTime(),this.backgroundGalleryEligibility=!1,this.isDarkMode=!1,this.isBgGalleryopen=!1,this.imageEmptyChecked=!1,this.dayNow=(new Date).getDay(),this.holidayKey="holidayBkgd",this.darkModeQuery=window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)"),this.changedToThemeImage=!1,this.currentProviderChanged=(t,e)=>{switch(this.imageOverrideStyles="",this.isLoadComplete=!1,"NoBackground"===e?(0,g.Nf)("backgroundImage","hidden"):(0,g.Nf)("backgroundImage","displayed"),e){case"Video":if(this.checkAndCreateVideoProvider(),(0,F.S)()&&this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"Video"===this.galleryBackgroundSelectionMetadata.provider&&(this.videoProvider.showVideo=this.videoProvider.validateCurrentIndex(Number(this.galleryBackgroundSelectionMetadata.configIndex),!0),!this.videoProvider.showVideo)){N.K.clearCachedBackground().then(()=>{this.defineCurrentProviderAndSync()});break}this.videoProvider&&(this.videoProvider.showVideo||this.shouldOverrideWithPreviousRotation())?(window.addEventListener("blur",this.onWindowBlur,!1),window.addEventListener("focus",this.onWindowFocus,!1)):(0,F.S)()&&this.setProviderForRotation();break;case"CMSImage":if(this.checkAndCreateImageProvider(this.config.cmsImage),!(0,F.S)())return;this.holidayBackground&&this.config.holidayImage||this.imageProvider.showImageInRotation||this.imageProvider.validateCurrentIndex(Number(this.galleryBackgroundSelectionMetadata?.configIndex),!0)||N.K.clearCachedBackground().then(()=>{this.defineCurrentProviderAndSync()})}if("Video"!==this.currentProvider&&this.videoProvider&&(this.videoProvider.isPlaying=!1),"Video"===t)(0,F.S)()&&this.videoProvider?.unloadVideo(),window.removeEventListener("blur",this.onWindowBlur,!1),window.removeEventListener("focus",this.onWindowFocus,!1);this.updateProperties()},this.animationComplete=()=>{this.calcMuseumBottom()},this.calcMuseumBottom=()=>{if(!0!==this.museumCreditsCardIsShown)return;if(this.ref_museumCardContainer&&this.ref_museumCardContainer.classList.remove("museumCard_hide"),this.museumCreditsCardIsShown){this.ref_floatButtonGroup=this.ref_floatButtonGroup??document?.body?.querySelector?.("edge-chromium-page")?.shadowRoot?.querySelector?.("float-button-group");const t=this.ref_floatButtonGroup?.shadowRoot?.querySelector?.("div"),e=t?.getBoundingClientRect()?.bottom?window.innerHeight-t.getBoundingClientRect().bottom-18:0;return void(this.museumBottom=e>0?7+e:7)}null!==this.getHeaderSpaceHolderHeight()&&(this.museumBottom=40)},this.createTelemetryTags=()=>{(0,L.isNullOrUndefined)(this.telemetryObject)?(0,o.vV)(r.peh,"Telemetry object is undefined"):(this.telemetryTags.video=(0,ot.N)("BackgroundVideo").getMetadataTag(),this.backgroundGalleryEligibility&&(this.telemetryTags.backgroundGalleryButton=(0,st.l)("BackgroundGalleryButton",{headline:"Edit Background"},k.MS.Navigate,k.MJ.Interaction).getMetadataTag()),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}]),this.imageEditButtonTelemetryTag=(0,st.l)("ImageEditButtonButton",{headline:"Edit Background"},k.MS.More,k.MJ.Interaction).getMetadataTag(),this.turnOnHolidaySwitchButtonTelemetryTag=(0,st.l)("HolidaySwitchButton>TurnOn",{headline:"Turn On Holiday Switch Background"},k.MS.Follow,k.MJ.Interaction).getMetadataTag(),this.turnOffHolidaySwitchButtonTelemetryTag=(0,st.l)("HolidaySwitchButton>TurnOff",{headline:"Turn Off Holiday Switch Background"},k.MS.Unfollow,k.MJ.Interaction).getMetadataTag())},this.defineCurrentProvider=()=>{let t=this.chromiumPageSettingsState.currentBackgroundImageType;if(this.chromiumPageSettingsState.displayBackgroundImageType&&!this.backgroundSourceChanged&&(t=this.chromiumPageSettingsState.displayBackgroundImageType),this.holidayBackground=(0,F.S)()?this.getHolidayBkgdData():this.ssrBackgroundMetadata?.holiday,N.K.setDefaultBackground(!1),!(0,F.S)()&&"hero"!==t||this.shouldOverrideWithPreviousRotation()){if(this.holidayBackground&&this.config.holidayImage&&!this.config.enableEventGleamImage)return void(this.currentProvider="CMSImage");const e="off"===t;return this.holidayBackground&&this.config.enableEventGleamImage&&this.ssrBackgroundMetadata?.gleam&&"focused"!==this.chromiumPageSettingsState.currentLayout&&!e?void(this.currentProvider="CMSImage"):void(this.currentProvider=this.ssrBackgroundMetadata?.provider)}if(this.config.video?.isTest)return void(this.currentProvider="Video");if(this.config.simpleImages?.isTest)return void(this.currentProvider="CMSImage");this.backgroundGalleryEligibility&&(this.galleryBackgroundSelectionMetadata=N.K.getPreferenceByKeyFromFromPreferencesCache(X.mR.backgroundSelectionMetadata)),this.currentBackgroundMetadata=N.K.getCurrentBackgroundPreferenceCache();const e="off"===t;if(this.holidayBackground&&this.config.enableEventGleamImage&&this.eventGleam&&"focused"!==this.chromiumPageSettingsState.currentLayout&&!e)this.currentProvider="CMSImage";else if("bing"!==t&&"imageAndVideo"!==t||!this.isTestRunning)switch(t){case"bing":case"enterprise":case"imageAndVideo":case"iris":if("informational"==this.chromiumPageSettingsState.currentLayout&&(0,B.h_)()){this.currentProvider="NoBackground",window.dispatchEvent(new CustomEvent("LowEndDeviceBkgd",{detail:{isLowEndDevice:!0}}));break}if(window.dispatchEvent(new CustomEvent("LowEndDeviceBkgd",{detail:{isLowEndDevice:!1}})),this.isFRE&&this.config.disableGalleryFREAndLowEnd){this.currentProvider="FREBackground";break}if(this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata){if("CMSImage"===this.galleryBackgroundSelectionMetadata.provider){this.currentProvider="CMSImage";break}if("Video"===this.galleryBackgroundSelectionMetadata.provider){this.videoProvider&&!this.videoProvider.showVideo?this.setProviderForRotation():this.currentProvider="Video";break}if("BrowserLocal"===this.galleryBackgroundSelectionMetadata.provider&&this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage){this.currentProvider="BrowserLocal";break}}this.setProviderForRotation();break;case"custom":this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage?this.currentProvider="BrowserLocal":this.setProviderForRotation();break;case"off":this.currentProvider="NoBackground";break;case"theme":{const t=this.chromiumPageSettingsState.configData,e=t&&t.enabledFeatures&&t.enabledFeatures.includes("msAllowThemeInstallationFromChromeStore"),n=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.usingDefaultTheme,i=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.imageUrl,r=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.backgroundColorRgba?.length>3;e&&!n&&(i||r)?this.currentProvider="Theme":this.setProviderForRotation();break}case"hero":this.checkAndCreateImageProvider(),this.currentProvider="hero",this.imageProvider.assignHeroBackground(),this.imageSourceAgent=this.imageProvider.imageSource;break;default:this.setProviderForRotation()}else this.isFRE&&this.config.disableGalleryFREAndLowEnd?this.currentProvider="FREBackground":this.currentProvider="CMSImage"},this.defineCurrentProviderAndSync=()=>{this.defineCurrentProvider(),T.YT.addOrUpdateTmplProperty("bkgdProvider",this.currentProvider),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])},this.error=t=>{if(this.isTTVRFired||(this.isTTVRFired=!0,this.markVisuallyReady(),(0,F.S)()&&(0,H.e1)().then(()=>(0,Z.B)(60,m.Rb.IsPrerender))),(0,o.vV)(r.a7_,"Error fetching source","Source: "+t),it(t,this.config?.freImages?.informational,this.config?.freImages?.inspirational))this.imageOverrideStyles="display: none";else if("Video"===this.currentProvider)this.videoProvider.error(),this.defineCurrentProviderAndSync();else this.currentProvider="Error",this.updateProperties(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])},this.loadComplete=()=>{this.isTTVRFired||(this.isTTVRFired=!0,this.markVisuallyReady(),(0,F.S)()&&(0,H.e1)().then(()=>(0,Z.B)(60,m.Rb.IsPrerender)))},this.playVideo=()=>{this.videoPlaying||this.isBgGalleryopen||this.videoProvider.videoLoaded()},this.toggleMuseumCardOpen=()=>{const t=this.getStyleForElementKey(I.u.backgroundOuterHolder);this.museumCreditsCardIsShown?(window.removeEventListener("click",this.onClick_outsideMuseumCard),window.removeEventListener("keydown",this.onKeyDown_closeMuseumCard)):window.setTimeout(()=>{window.addEventListener("click",this.onClick_outsideMuseumCard),window.addEventListener("keydown",this.onKeyDown_closeMuseumCard)},100),this.museumCreditsCardIsShown?t.zIndex="":t.zIndex=a,this.museumCreditsCardIsShown=!this.museumCreditsCardIsShown,this.backgroundImageFixedWCStateSyncEventEmit([{key:"museumCreditsCardIsShown",value:this.museumCreditsCardIsShown}]),(0,w.YJ)(w.xV.museumCard,this.museumCreditsCardIsShown),this.calcMuseumBottom(),"Video"===this.currentProvider&&this.museumCreditsCardIsShown&&this.videoProvider.playVideo("Timer")},this.syncWithStateChange=()=>{const t=this.chromiumPageSettingsConnector.getCurrentState(),e=t?.selectedFeedDisplaySetting!==this.chromiumPageSettingsState?.selectedFeedDisplaySetting,n=t?.selectedQuickLinksDisplaySetting!==this.chromiumPageSettingsState?.selectedQuickLinksDisplaySetting;(e||n)&&(this.museumBottom=0,this.hasFeedDisplayChanged=e),this.config.enableEventGleamImage&&this.backgroundGalleryEligibility&&this.backgroundDataConnector&&this.backgroundDataConnector.updateEventGleam(this.eventGleam),this.chromiumPageSettingsState=t,this.isSSRBkgd&&!this.backgroundGalleryEligibility&&(this.ssrModifiedMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType),this.holidayBackground&&!this.config.enableEventGleamImage&&"focused"==this.chromiumPageSettingsState.currentLayout&&this.updateHolidayBackground(!1),this.defineCurrentProviderAndSync(),this.updateProperties(),this.calcMuseumBottom()},this.togglesChanged=()=>{this.noSSRMismatch=!0,N.K.setSSRBackgroundMetadata(void 0),this.syncWithStateChange()},this.updateProperties=()=>{if(this.isFeedDisplayAlwaysOn="always"===this.chromiumPageSettingsState?.selectedFeedDisplaySetting,this.isRuby)return this.rt(),this.isCurrentBackgroundMetadataLoaded=!0,void this.saveBackgroundPref(this.currentProvider);switch(this.currentProvider){case"BrowserLocal":this.updateProperties_customImage();break;case"FREBackground":this.updateProperties_fre();break;case"Event":this.updateProperties_event();break;case"NoBackground":this.updateProperties_noBackground();break;case"Theme":this.updateProperties_theme();break;case"Video":this.updateProperties_video();break;case"CMSImage":this.updateProperties_cmsImage();break;case"hero":break;default:this.updateProperties_error()}this.isCurrentBackgroundMetadataLoaded=!0,this.shouldOverrideWithPreviousRotation()?this.setCorrectRotationBackground():this.saveBackgroundPref(this.currentProvider)},this.updateProperties_customImage=()=>{this.imageSourceAgent=(0,F.S)()?this.chromiumPageSettingsState.customBackgroundImageInfo.resourceUrl:this.ssrBackgroundMetadata?.imageUrl,this.museumCard=null,this.imageOverrideStyles=""},this.updateProperties_error=()=>{if(!this.config?.freImages?.informational||!this.config?.freImages?.inspirational)return;const t=this.config.freImages.informational,e=this.config.freImages.inspirational;this.imageSourceAgent="always"===this.chromiumPageSettingsState?.selectedFeedDisplaySetting?(0,O.XP)(t,{width:0,height:0,enableDpiScaling:!1}):(0,O.XP)(e,{width:0,height:0,enableDpiScaling:!1}),this.museumCard=null,this.imageOverrideStyles=""},this.updateProperties_event=async()=>{const t=this.config.event.eventId,e=this.config.event.showImageIndefinitely?y.hR:void 0;let n,i;if(this.currentEventCreative=await this.eventLocalStorage.getCurrentCreativeId(t,u.F0b,this.config.event.creatives,e,this.config.event.cmsContent?.url,r.RnM),this.config.event?.cmsContent){if(n=this.eventLocalStorage.getCMSContent(t,u.F0b,this.config.event.creatives,r.RnM),!n)return this.config.event=null,void this.defineCurrentProviderAndSync();this.config.event.imageData.CMS.attribution=n.attribution,this.config.event.imageData.CMS.imageSource=n.imageSource,this.config.event.imageData.CMS.imageHref=n.imageHref}if(i="VpTest"===t?"Test image":this.config.event.cmsContent?n.title:this.strings.events[this.config.event.useCommonIdForLocString?this.config.event.eventId:this.currentEventCreative],this.imageSourceAgent=this.config.event.imageData[this.currentEventCreative].imageSource,this.museumCard={credits:this.config.event.imageData[this.currentEventCreative].attribution,isDisplayed:!0,title:i,titleURL:(0,v.bI)(this.config.event.imageData[this.currentEventCreative].imageHref)},this.imageOverrideStyles="",!this.telemetryObject)return void(0,o.vV)(r.peh,"Telemetry object is undefined on Iris update");this.telemetryTags.cardTitle=(0,st.g)("CopyrightLink",{headline:i,id:y.qd+this.config.event.eventId},k.MS.Navigate,{overrideDestinationUrl:this.config.event.imageData[this.currentEventCreative].imageHref}).getMetadataTag(),this.telemetryTags.dismissButton=(0,st.l)("DismissEvent",{headline:this.museumCard.title,id:y.qd+this.config.event.eventId},k.MS.Dislike).getMetadataTag(),this.telemetryTags.title_cardHidden=(0,st.l)("LikeBackground",{headline:"LikeBackground",id:y.qd+this.config.event.eventId},k.MS.Show).getMetadataTag(),this.telemetryTags.title_cardShown=(0,st.l)("ExitFullView",{headline:"ExitFullView",id:y.qd+this.config.event.eventId},k.MS.Close).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}]);const s=this.config.event.imageData[this.currentEventCreative].secondaryButton;s&&(this.secondaryButtonTelemetryTag=(0,st.g)("SecondaryButton",{headline:this.museumCard.title,id:y.qd+this.config.event.eventId},k.MS.Navigate,{overrideDestinationUrl:s.href}).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"secondaryButtonTelemetryTag",value:this.secondaryButtonTelemetryTag}]))},this.updateProperties_fre=()=>{const t=this.config.freImages?.informational,e=this.config.freImages?.inspirational,n="always"===this.chromiumPageSettingsState?.selectedFeedDisplaySetting?(0,O.XP)(t,{width:0,height:0,enableDpiScaling:!1}):(0,O.XP)(e,{width:0,height:0,enableDpiScaling:!1});this.imageSourceAgent=n,this.museumCard=null,this.imageOverrideStyles=""},this.updateProperties_noBackground=()=>{this.imageSourceAgent=null,this.museumCard=null,this.imageOverrideStyles="",this.loadComplete()},this.updateProperties_theme=()=>{if(this.ntpTheme=this.chromiumPageSettingsState.ntpTheme,this.museumCard=null,(0,F.S)()){if(this.imageSourceAgent=this.changedToThemeImage?(0,G.op)(this.ntpTheme.imageUrl,this.chromiumPageSettingsState):null,!this.imageSourceAgent){const t=`background-position: ${this.ntpTheme.imageHorizontalAlignment} ${this.ntpTheme.imageVerticalAlignment}; background-repeat: ${this.ntpTheme.imageTiling}; background-image: ${(0,G.$6)(this.ntpTheme.imageUrl,this.chromiumPageSettingsState)}; background-color: ${(0,G.Hu)(this.chromiumPageSettingsState)}`;this.isBgGalleryopen?window.requestAnimationFrame(()=>{this.ref_backgroundImage?.classList?.add("hidden"),window.requestAnimationFrame(()=>{window.setTimeout(()=>{this.imageOverrideStyles=t,this.ref_backgroundImage?.classList?.replace("hidden","visible")},500)})}):this.imageOverrideStyles=t}}else this.ssrBackgroundMetadata?.imageUrl&&"#"!=this.ssrBackgroundMetadata.imageUrl.charAt(0)?this.imageOverrideStyles=`background-image: ${this.ssrBackgroundMetadata.imageUrl};`:this.imageOverrideStyles=`background-color: ${this.ssrBackgroundMetadata.imageUrl}`;this.changedToThemeImage=!1,this.ntpTheme&&"repeat"===this.ntpTheme.imageTiling&&(this.imageOverrideStyles+="background-size: auto;"),this.loadComplete()},this.updateProperties_video=()=>{!(0,F.S)()||this.shouldOverrideWithPreviousRotation()?this.videoProvider&&this.videoProvider.assignBackgroundUsingIndex(this.ssrBackgroundMetadata.configIndex?.toString()):this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"Video"===this.galleryBackgroundSelectionMetadata.provider?this.videoProvider&&this.videoProvider.assignBackgroundUsingIndex(this.galleryBackgroundSelectionMetadata.configIndex):this.videoProvider&&this.videoProvider.setVideoAndMuseumCardProperties(),this.imageSourceAgent=this.videoProvider.firstFrameSource,this.museumCard={...this.videoProvider.museumCard},this.isReducedMotionActive=this.videoProvider.isReducedMotionActive,this.showToast=this.videoProvider.showToast,this.toastMessage=this.videoProvider.toastMessage,this.videoPlaying=this.videoProvider.isPlaying,this.backgroundImageFixedWCStateSyncEventEmit([{key:"videoPlaying",value:this.videoProvider.isPlaying}]),this.videoSource=this.videoProvider.videoSource,this.loadComplete(),this.telemetryObject?(0,F.S)()&&(this.setVideoSecondaryButtonTelemetry(),this.telemetryTags.title_cardHidden=(0,st.l)("LikeBackground",{headline:"LikeBackground",id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution},k.MS.Show).getMetadataTag(),this.telemetryTags.title_cardShown=(0,st.l)("ExitFullView",{headline:"ExitFullView",id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution},k.MS.Close).getMetadataTag(),this.museumCard.titleURL&&(this.telemetryTags.cardTitle=(0,st.g)("TitleLink",{headline:this.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution},k.MS.Navigate,{overrideDestinationUrl:this.museumCard.titleURL}).getMetadataTag()),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}])):(0,o.vV)(r.peh,"Telemetry object is undefined on Iris update")},this.rt=()=>{if("NoBackground"===this.currentProvider)return void this.ot();if(this.config?.disableRubyBackgrounds&&!N.K.getPreferenceByKeyFromFromPreferencesCache(X.mR.disableRubyBackground))return N.K.setBackgroundPreferenceByKey(X.mR.disableRubyBackground,!0),J.l.updateLayoutAndBackgroundImageType("off"),void this.ot();if(!this.imageProvider)return;if(!(0,F.S)()&&this.ssrBackgroundMetadata?.configIndex&&N.K.isRubyImage(this.ssrBackgroundMetadata?.configIndex?.toString(),this.isDarkMode)?this.imageProvider.assignBackgroundUsingIndex(this.ssrBackgroundMetadata?.configIndex?.toString()):this.dailyRotationEnabled()&&!at?this.imageProvider&&this.imageProvider.showRubyImageRotation(N.K.getRubyImageStartIndex()):this.backgroundGalleryEligibility&&"CMSImage"===this.galleryBackgroundSelectionMetadata?.provider&&this.galleryBackgroundSelectionMetadata?.configIndex&&N.K.isRubyImage(this.galleryBackgroundSelectionMetadata?.configIndex,this.isDarkMode)?this.imageProvider.assignBackgroundUsingIndex(this.galleryBackgroundSelectionMetadata?.configIndex):this.config?.enableDefaultRubyBkdg&&!at&&this.st(),this.shouldOverrideWithPreviousRotation()&&this.ssrBackgroundMetadata?.configIndex){const t=this.ssrBackgroundMetadata.configIndex.toString();this.imageProvider.assignBackgroundUsingIndex(t)}N.K.isRubyImage(this.imageProvider?.imageId?.toString(),this.isDarkMode)&&(this.imageSourceAgent=this.imageProvider?.imageSource)},this.updateProperties_cmsImage=()=>{if(this.holidayBackground&&this.config.holidayImage&&!this.config.enableEventGleamImage)this.imageProvider.assignHolidayBackground();else if(this.holidayBackground&&this.config.enableEventGleamImage&&this.eventGleam)this.imageProvider.assignHolidayBackground(),T.YT.addOrUpdateTmplProperty("evtBkg","1");else if((0,F.S)())this.config.enableAbstractImages&&this.dailyRotationEnabled()&&"always"==this.chromiumPageSettingsState?.selectedFeedDisplaySetting?this.imageProvider&&this.imageProvider.showAbstractImageRotation(N.K.getAbstractImageStartIndex()):this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"CMSImage"===this.galleryBackgroundSelectionMetadata.provider&&this.galleryBackgroundSelectionMetadata.configIndex&&Number(this.galleryBackgroundSelectionMetadata.configIndex)<this.config.cmsImage.data.length&&this.config.cmsImage.data[this.galleryBackgroundSelectionMetadata.configIndex]?(this.imageProvider.assignBackgroundUsingIndex(this.galleryBackgroundSelectionMetadata.configIndex),this.config.enableEventGleamImage&&T.YT.addOrUpdateTmplProperty("evtBkg","0")):this.config.simpleImages&&this.imageProvider&&this.imageProvider.shouldShowImageInRotation()&&this.imageProvider.setImageAndMuseumCardProperties();else{const t=this.ssrBackgroundMetadata?.gleam&&this.ssrBackgroundMetadata?.holiday;t?this.imageProvider.assignHolidayBackground(!0):this.imageProvider.assignBackgroundUsingIndex(this.ssrBackgroundMetadata?.configIndex.toString()),this.config.enableEventGleamImage&&T.YT.addOrUpdateTmplProperty("evtBkg",t?"1":"0")}if(this.imageSourceAgent=this.imageProvider.imageSource,this.museumCard={...this.imageProvider.museumCard},(0,F.S)()&&this.museumCard.titleURL){if(!this.telemetryObject)return void(0,o.vV)(r.peh,"Telemetry object is undefined on Iris update");this.telemetryTags.cardTitle=(0,st.g)("TitleLink",{headline:this.museumCard.title,id:String(this.imageProvider.imageId)},k.MS.Navigate,{overrideDestinationUrl:this.museumCard.titleURL}).getMetadataTag()}},this.st=()=>{const t=N.K.getRubyImageStartIndex()+6;N.K.isRubyImage(t.toString(),this.isDarkMode)&&this.imageProvider.assignBackgroundUsingIndex(t.toString())},this.ot=()=>{this.currentProvider="NoBackground",this.imageSourceAgent=null,this.museumCard=null,this.imageOverrideStyles="",this.loadComplete()},this.onClick_secondaryButton=()=>{"Video"===this.currentProvider?this.videoProvider?(this.videoProvider.isPlaying?this.videoProvider.pauseVideo("Button"):this.videoProvider.playVideo("Button"),this.setVideoSecondaryButtonTelemetry(!0)):(0,o.vV)(r.hdR,"Video provider not available. Attempted play/pause video"):"Event"===this.currentProvider&&window.open(this.config.event.imageData[this.currentEventCreative].secondaryButton.href)},this.onClick_outsideMuseumCard=t=>{const e=t.composedPath();this.ref_floatButtonGroup=this.ref_floatButtonGroup??document?.body?.querySelector?.("edge-chromium-page")?.shadowRoot?.querySelector?.("float-button-group"),e.includes(this.ref_museumCardContainer)||this.ref_floatButtonGroup&&e.includes(this.ref_floatButtonGroup)||(T.YT.sendActionEvent(this.ref_museumCardButton,k.EG.Click,k.MS.Close),this.toggleMuseumCardOpen())},this.onClick_openGalleryButton=()=>{this.backgroundDataConnector&&this.galleryBroadcastChannel&&(this.galleryBroadcastChannel.postMessage("galleryOpened"),this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0),this.toggleMuseumCardOpen())},this.onClick_imageEditButton=()=>{this.backgroundDataConnector&&this.galleryBroadcastChannel&&(this.galleryBroadcastChannel.postMessage("galleryOpened"),this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0))},this.onClick_pickMessageItem=t=>{(t||" "===t)&&window.chrome.edgeMarketingPagePrivate.sendNtpQuery("summarize the page",t,"https://www.msn.com/en-us/money/markets/biden-saved-the-economy-and-launched-a-new-age-of-prosperity-why-isn-t-he-getting-any-credit-opinion/ar-AA1eUYUo?ocid=entnewsntp&pc=U531&cvid=f91d7332657f4f8d849065750a18721c&ei=17")},this.onKeyDown_closeMuseumCard=t=>{"Escape"===t.code&&(T.YT.sendActionEvent(this.ref_museumCardButton,k.EG.Click,k.MS.Close),this.toggleMuseumCardOpen())},this.onFocusLeave_museumCardButton=()=>{this.museumCreditsCardIsShown&&this.ref_backgroundGalleryButton&&this.ref_backgroundGalleryButton.focus()},this.onFocusLeave_backgroundGalleryButton=()=>{this.museumCreditsCardIsShown&&this.ref_museumCardButton&&this.ref_museumCardButton.focus()},this.onResize=()=>{this.museumCard&&this.calcMuseumBottom(),this.backgroundGalleryEligibility&&this.checkMinimumWidthForGallery()},this.onScroll=(0,b.P)(()=>{this.museumCreditsCardIsShown&&this.toggleMuseumCardOpen();const t=0===window.scrollY;this.museumCard&&(t?(this.calcMuseumBottom(),this.shouldUpdateMuseumCardVisibility=!0):!t&&this.shouldUpdateMuseumCardVisibility&&(this.shouldUpdateMuseumCardVisibility=!1)),"Video"===this.currentProvider&&(t?this.videoProvider.playVideo("Scroll"):this.videoProvider.pauseVideo("Scroll"))},350),this.onWindowBlur=()=>{this.videoProvider.pauseVideo("Focus")},this.onWindowFocus=()=>{this.videoProvider.playVideo("Focus")},this.dailyRotationEnabled=t=>{if(!this.backgroundGalleryEligibility)return"imageAndVideo"===this.chromiumPageSettingsState?.currentBackgroundImageType||"bing"===this.chromiumPageSettingsState?.currentBackgroundImageType;const e=this.ssrBackgroundMetadata?this.ssrBackgroundMetadata.provider:this.currentProvider;return t?.changeBackgroundDaily||void 0===this.galleryBackgroundSelectionMetadata&&"CMSImage"===e},this.isPotentiallyMismatchedForRotation=t=>(this.backgroundGalleryEligibility,this.dailyRotationEnabled(t)),this.ut=()=>{if(!(0,F.S)()||!this.config?.cmsImage)return;const t=N.K.getRubyImageStartIndex();t&&t>=0&&(this.config.cmsImage.data=this.config.cmsImage.data.slice(0,t));const e=this.isDarkMode?X.VR.dataDark:X.VR.dataLight;N.K.setRubyImageStartIndex(this.config.cmsImage.data.length),this.config.cmsImage.data=this.config.cmsImage.data.concat(e),this.updateProperties()},this.themeChanged=()=>{x.L.enqueue(()=>{const t=this.isDarkMode;this.isDarkMode=(0,q.ud)(),t!==this.isDarkMode&&this.isRuby&&this.ut()})},this.handleImageEditEmitListener=()=>{this.onClick_imageEditButton()},this.handleSecondaryEmitListener=()=>{this.onClick_secondaryButton()},this.handleToggleEmitListener=()=>{this.toggleMuseumCardOpen()},this.handleEventToggleEmitListener=()=>{const t=this.getHolidayBkgdData();this.updateHolidayBackground(t,!0),this.defineCurrentProviderAndSync(),"CMSImage"===this.currentProvider&&this.updateProperties()},this.onGalleryApplied=()=>{this.backgroundSourceChanged=!0,this.defineCurrentProvider()},this.statesSyncInit=()=>{const t=[];["backgroundGalleryButtonEnabled","currentProvider","museumCreditsCardIsShown","secondaryButtonTelemetryTag","telemetryTags","videoPlaying"].forEach(e=>{t.push({key:e,value:this[e]})}),window.dispatchEvent(new CustomEvent("backgroundImageWCStatesSync",{detail:{states:t,init:!0}}))}}get isRuby(){return Boolean(this.config?.enableRubyImages)}set imageSourceAgent(t){if(!t&&!this.imageEmptyChecked&&!at)switch(this.currentProvider){case"NoBackground":case"Theme":break;default:this.imageEmptyChecked=!0,this.error("No image source")}if(void 0!==this.imageSource&&this.imageSource!==t&&(this.backgroundSourceChanged=!0),this.isBgGalleryopen){if(null===t)return void(this.imageSource=null);void 0===this.imageSource?this.imageSource=t:this.imageSource!==t&&window.requestAnimationFrame(()=>{this.ref_backgroundImage?.classList?.add("hidden"),window.requestAnimationFrame(()=>{window.setTimeout(()=>{null!==t&&(this.imageSource=t),this.ref_backgroundImage?.classList?.replace("hidden","visible")},500)})})}else this.imageSource!==t&&(this.imageSource=t)}afterHydration(){this.canRenderNonSsrElements=!0,this.loadComplete(),this.ref_video&&"Video"===this.currentProvider&&this.playVideo()}processExperienceInitializeError(){super.processExperienceInitializeError();const t="Fatal web component experience exception encountered in BackgroundImageWC.",e=new Error(t);(0,o.c_)(e,{...r.Q33,message:t,pb:{...r.Q33.pb,provider:this.currentProvider,videoInfo:{videoID:this?.videoProvider?.videoId,museumCard:this?.videoProvider?.museumCard},imageInfo:{imageSource:this?.imageProvider?.imageId,museumCard:this?.imageProvider?.museumCard}}},t)}async experienceConnected(){if((0,F.S)()?this.canRenderNonSsrElements=!this.isSSRRendered:this.canRenderNonSsrElements=!1,this.config.enableEventGleamImage&&(this.eventGleam=function(){try{const t=nt.h.getWpoTreatmentsWithType(et.Ar.eventGleam,!0),e=t[0]?.properties;if(t?.length>0&&e)return e}catch(t){const e="Error in getting wpo event gleam data";(0,o.vV)(r.rSI,e,`error:${t}`)}return null}()),this.chromiumPageSettingsConnector=(0,W.zP)(d.h$),this.isDarkMode=(0,q.ud)(),this.darkModeQuery.addEventListener("change",this.themeChanged),(0,L.isNullOrUndefined)(this.chromiumPageSettingsConnector)){if(at)return;const t=(0,L.isNullOrUndefined)(this.chromiumPageSettingsConnector);return(0,o.vV)(r.xnd,"Data connector missing: ChromiumSettings-"+t),void this.error("Data connectors missing")}if(this.config.disableGalleryFREAndLowEnd){let t=N.K.getBackgroundGalleryEligibility();void 0!==t||this.config.disableBackgroundGallery||p.T3.IsFrePage||(await N.K.initState(R.Y.backgroundDataStateLoaded.getActionSender((0,W.zP)(d.lm)),this.config),t=N.K.getBackgroundGalleryEligibility()),this.backgroundGalleryEligibility=!this.config.disableBackgroundGallery&&!this.isFRE&&N.K&&t}else{let t=N.K.getBackgroundGalleryEligibility();void 0!==t||this.config.disableBackgroundGallery||(await N.K.initState(R.Y.backgroundDataStateLoaded.getActionSender((0,W.zP)(d.lm)),this.config),t=N.K.getBackgroundGalleryEligibility()),this.backgroundGalleryEligibility=!this.config.disableBackgroundGallery&&N.K&&t}if(this.backgroundGalleryEligibility&&(this.checkMinimumWidthForGallery(),this.backgroundDataConnector=(0,W.zP)(d.lm),this.galleryBroadcastChannel=new BroadcastChannel(Q.a_)),this.backgroundGalleryEligibility&&(0,L.isNullOrUndefined)(this.backgroundDataConnector)){if(at)return;return(0,o.vV)(r.xnd,"Data connector missing: BackgroundData"),void this.error("Data connectors missing")}if(this.config.simpleImages){if(N.K.setSimpleImagesandCMSSize(!0,this.config.cmsImage.data.length),this.config.cmsImage.data=this.config.cmsImage.data.concat(this.config.simpleImages.data),(0,F.S)()){N.K.setDailyRotationOnlySimpleImages(!0);const t=this.getVideoData();t&&t.schedule||this.checkAndCreateVideoProvider(),this.checkAndGenerateSimpleImageOnlySchedule(),window.addEventListener("simpleImageBkgdToggle",this.togglesChanged)}this.checkAndCreateImageProvider(this.config.cmsImage)}if(this.config.enableAbstractImages){N.K.setAbstractImageStartIndex(this.config.cmsImage.data.length);const t=this.isDarkMode?X.vb.dataDark:X.vb.dataLight;this.config.cmsImage.data=this.config.cmsImage.data.concat(t),this.checkAndCreateImageProvider(this.config.cmsImage)}if(this.isRuby){N.K.setRubyImageStartIndex(this.config.cmsImage.data.length);const t=this.isDarkMode?X.VR.dataDark:X.VR.dataLight;this.config.cmsImage.data=this.config.cmsImage.data.concat(t),this.checkAndCreateImageProvider(this.config.cmsImage)}let t=!1;const e=N.K.getPreferenceByKeyFromFromPreferencesCache(X.mR.backgroundSelectionMetadata);if(e&&e.configIndex){const n=Number(e.configIndex)&&Number(e.configIndex)>=this.config.cmsImage.data.length;("Video"===e.provider&&this.config.video.data[e.configIndex]?.removeContent||"CMSImage"===e.provider&&this.config.cmsImage.data[e.configIndex]?.removeContent||n)&&(N.K.setBackgroundPreferenceByKey(X.mR.backgroundSelectionMetadata,void 0),N.K.setBackgroundPreferenceByKey(X.mR.changeBackgroundDaily,!0),N.K.updateLayoutBasedOnBackgroundType()),t="CMSImage"===e.provider||"Video"===e.provider}const n=N.K.getPreferenceByKeyFromFromPreferencesCache(X.mR.changeBackgroundDaily);if(T.YT.addOrUpdateTmplProperty("bkgdRotation",n?"1":"0"),e&&"Iris"===e.provider&&(N.K.setBackgroundPreferenceByKey(X.mR.backgroundSelectionMetadata,void 0),N.K.setBackgroundPreferenceByKey(X.mR.changeBackgroundDaily,!0),N.K.updateLayoutBasedOnBackgroundType()),this.config.enableEventGleamImage&&void 0===this.getHolidayBkgdData()&&(e&&!t||this.updateHolidayBackground(!0)),this.chromiumPageSettingsState=this.chromiumPageSettingsConnector.getCurrentState(),this.isTestRunning="1"===S._3.getQueryParameterByName("forceImageTest",(0,D.iA)()),!(0,F.S)())return this.ssrBackgroundMetadata={provider:m.Rb.EdgeNTPHeader.backgroundImage.provider,configIndex:m.Rb.EdgeNTPHeader.backgroundImage.configIndex,imageUrl:m.Rb.EdgeNTPHeader.backgroundImage.imageUrl,holiday:m.Rb.EdgeNTPHeader.backgroundImage.holiday,dark:m.Rb.EdgeNTPHeader.backgroundImage.dark,light:m.Rb.EdgeNTPHeader.backgroundImage.light,gleam:m.Rb.EdgeNTPHeader.backgroundImage.gleam},N.K.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),N.K.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata),void this.defineCurrentProviderAndSync();if(this.isSSRBkgd=window.isSSREnabled&&m.Rb&&m.Rb.CurrentFlightSet&&!m.Rb.CurrentFlightSet.has("prg-ssrheader-c"),this.isSSRBkgd){const t=this.backgroundGalleryEligibility&&await N.K.getBackgroundPreferences();this.galleryBackgroundSelectionMetadata=N.K.getPreferenceByKeyFromFromPreferencesCache(X.mR.backgroundSelectionMetadata),this.ssrBackgroundMetadata=await N.K.getCurrentBackgroundMetadata(),this.holidayBackground=this.getHolidayBkgdData(),this.holidayBackground&&this.ssrBackgroundMetadata&&!this.ssrBackgroundMetadata.holiday&&!this.ssrBackgroundMetadata.gleam&&this.updateHolidayBackground(!1),N.K.setCurrentBackgroundPreferenceCache(this.ssrBackgroundMetadata),this.isPotentiallyMismatchedForRotation(t)&&(this.data=this.getVideoData(),this.checkForSSRRotationMismatch(this.data))}if(this.defineCurrentProviderAndSync(),(0,F.S)()&&"CMSImage"===this.currentProvider&&!this.config.disableGalleryFREAndLowEnd&&this.scheduleFixed?.length>0&&rt(this.scheduleFixed?.filter(t=>-1!==t),this.imageProvider),this.config.holidayImage&&window.setTimeout(()=>{this.$emit("holidayBgChanged",this.holidayBackground)},0),!this.holidayBackground&&"hero"!==this.currentProvider&&this.isSSRBkgd&&void 0!==this.ssrBackgroundMetadata&&!this.isRuby&&void 0!==this.ssrBackgroundMetadata.provider&&this.ssrBackgroundMetadata.provider!==this.currentProvider){"true"===(0,h.a)().get("mock-ntp-header")||(0,o.vV)(r.ZuI,"SSR - Edge header mismatch.",void 0,{...r.ZuI.pb,customMessage:`key: backgroundImage, header: ${this.ssrBackgroundMetadata.provider}, state: ${this.currentProvider}, userSelected: ${this.ssrBackgroundMetadata.userSelected}`})}this.createTelemetryTags(),c.G.updateLayout.registerObserver(()=>{window.setTimeout(()=>{this.syncWithStateChange()},500)}),this.isRuby||(M.U?.updateNtpTheme?.registerObserver(()=>{this.changedToThemeImage="Theme"===this.currentProvider,this.syncWithStateChange()}),l.W?.layoutAnimationComplete?.registerObserver(()=>{this.animationComplete()})),this.backgroundGalleryEligibility&&(R.Y.updateGallerySelectedBackground.registerObserver(()=>{this.handleGalleryBackgroundSelection()}),R.Y.refreshBackgroundMetadata.registerObserver(()=>{this.handleBackgroundRefresh()}),(0,K.vQ)(d.lm,t=>{this.isBgGalleryopen=t.backgroundGalleryDisplayed})),this.isFeedDisplayAlwaysOn="always"===this.chromiumPageSettingsState?.selectedFeedDisplaySetting,window.addEventListener("resize",this.onResize),window.addEventListener("scroll",this.onScroll),window.addEventListener("backgroundImageWCEdit",this.handleImageEditEmitListener),window.addEventListener("backgroundImageWCSecondary",this.handleSecondaryEmitListener),window.addEventListener("backgroundImageWCToggle",this.handleToggleEmitListener),window.addEventListener("backgroundImageWCStatesSyncAsk",this.statesSyncInit),this.config.enableEventGleamImage&&window.addEventListener("eventToggle",this.handleEventToggleEmitListener),"hero"===this.chromiumPageSettingsState?.displayBackgroundImageType&&window.addEventListener("eventToggle",this.onGalleryApplied),window.setTimeout(()=>this.statesSyncInit(),0),this.addBackgroundImageDataRequestListener()}disconnectedCallback(){if(super.disconnectedCallback(),removeEventListener("resize",this.onResize),removeEventListener("scroll",this.onScroll),window.removeEventListener("backgroundImageWCEdit",this.handleImageEditEmitListener),window.removeEventListener("backgroundImageWCSecondary",this.handleSecondaryEmitListener),window.removeEventListener("backgroundImageWCToggle",this.handleToggleEmitListener),window.removeEventListener("backgroundImageWCStatesSyncAsk",this.statesSyncInit),this.config?.enableEventGleamImage&&window.removeEventListener("eventToggle",this.handleEventToggleEmitListener),"hero"===this.chromiumPageSettingsState?.displayBackgroundImageType&&window.removeEventListener("eventToggle",this.onGalleryApplied),this.config?.simpleImages&&window.removeEventListener("simpleImageBkgdToggle",this.togglesChanged),"Video"===this.currentProvider)window.removeEventListener("blur",this.onWindowBlur,!1),window.removeEventListener("focus",this.onWindowFocus,!1);this.darkModeQuery.removeEventListener("change",this.themeChanged)}getExperienceType(){return u.F0b}shadowDomPopulated(){this.syncWithStateChange(),(0,P.TW)(I.u.headerSpaceHolder).then(t=>{var e;(e=this.syncWithStateChange,new ResizeObserver(e)).observe(t),this.calcMuseumBottom()}),this.config.holidayImage&&window.setTimeout(()=>{this.$emit("holidayBgChanged",this.holidayBackground)},0)}checkAndGenerateSimpleImageOnlySchedule(){const t=this.getVideoData();t&&t.schedule&&(this.schedule=t.schedule,this.scheduleFixed=t.scheduleFixed,t.simpleSchedule?(this.simpleSchedule=t.simpleSchedule,this.checkSimpleImageBounds()):(this.simpleSchedule=[-1,-1,-1,-1,-1,-1,-1],this.generateImageSchedule()))}checkSimpleImageBounds(){const t=this.config.cmsImage.data.length,e=N.K.getCMSImageSize();for(let n=0;n<this.simpleSchedule.length;n++)if(this.simpleSchedule[n]<e||t-1<this.simpleSchedule[n]){const i=Math.floor(Math.random()*(t-e)+e);this.simpleSchedule[n]=i}this.storeVideoData({cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed,simpleSchedule:this.simpleSchedule})}generateImageSchedule(){const t=this.config.cmsImage.data.length,e=N.K.getCMSImageSize(),n=[];for(let t=0;t<this.config.cmsImage.data.length;t++)n[t]=!1;for(let i=0;i<this.simpleSchedule.length;i++){let r=Math.floor(Math.random()*(t-e)+e);if(n[r]||!this.config.cmsImage.data[r]||this.config.cmsImage.data[r].removeContent)do{r===this.config.cmsImage.data.length-1?r=e:r++}while(n[r]||!this.config.cmsImage.data[r]||this.config.cmsImage.data[r].removeContent);this.simpleSchedule[i]=r,n[r]=!0}this.storeVideoData({cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed,simpleSchedule:this.simpleSchedule})}getVideoData(){try{return(0,C.Lg)().getObject(this.storageKey)}catch(t){return(0,o.vV)(r.d_w,"Local storage for video data failed."),null}}storeVideoData(t){this.data=t;try{(0,C.Lg)().setObject(this.storageKey,t)}catch(t){return void(0,o.vV)(r.cke,"Local storage for video data failed.")}}getHolidayBkgdData(){try{return(this.config.holidayImage||this.config.enableEventGleamImage)&&(0,C.Lg)().getObject(this.holidayKey)}catch(t){return(0,o.vV)(r.d_w,"Local storage for holiday background failed."),!1}}storeHolidayBkgdData(t){try{(0,C.Lg)().setObject(this.holidayKey,t)}catch(t){return void(0,o.vV)(r.cke,"Local storage for holiday background failed.")}}storeUserToggleStatus(t){try{(0,C.Lg)().setObject(this.holidayKey+"User",t)}catch(t){return void(0,o.vV)(r.cke,"Local storage for holiday background triggered by user failed.")}}getHeaderSpaceHolderHeight(){const t=(0,P.pr)(I.u.headerSpaceHolder);return t?t.offsetHeight:this.spaceHolderHeight}checkMinimumWidthForGallery(){this.backgroundGalleryButtonEnabled=window.innerWidth>X.et,this.backgroundImageFixedWCStateSyncEventEmit([{key:"backgroundGalleryButtonEnabled",value:this.backgroundGalleryButtonEnabled}])}updateHolidayBackground(t,e){this.holidayBackground=t,this.storeHolidayBkgdData(this.holidayBackground),e&&this.storeUserToggleStatus(this.holidayBackground),this.$emit("holidayBgChanged",t)}setVideoSecondaryButtonTelemetry(t){!t||this.telemetryObject?this.videoProvider&&(this.secondaryButtonTelemetryTag=this.videoPlaying?(0,st.l)("Pause",{headline:this.videoProvider.museumCard?.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution},k.MS.Pause).getMetadataTag():(0,st.l)("Play",{headline:this.videoProvider.museumCard?.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution},k.MS.Play).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"secondaryButtonTelemetryTag",value:this.secondaryButtonTelemetryTag}])):(0,o.vV)(r.peh,"Telemetry object is undefined on Iris update")}saveBackgroundPref(t,e){if(!(0,F.S)()||"Error"===t||"Event"===t||"hero"===t)return;let n;const i="NoBackground"===this.currentProvider;if(this.config.enableEventGleamImage&&this.isSSRBkgd){const t=()=>{if(!this.eventGleam&&this.ssrBackgroundMetadata.gleam)return this.ssrBackgroundMetadata={...this.ssrBackgroundMetadata,dark:"",light:"",gleam:!1,holiday:!1},void this.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata);if(this.eventGleam&&!this.ssrBackgroundMetadata.gleam&&!i){const t=(0,C.Lg)().getObject(this.holidayKey+"User");n=void 0===t;let e=!1;const i=N.K.getPreferenceByKeyFromFromPreferencesCache(X.mR.backgroundSelectionMetadata);i&&i.configIndex&&(e="CMSImage"===i.provider||"Video"===i.provider),n&&!e&&(this.ssrBackgroundMetadata={...this.ssrBackgroundMetadata,dark:this.eventGleam.DarkGleamUrl,light:this.eventGleam.LightGleamUrl,gleam:!0,holiday:!0},this.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata),this.storeHolidayBkgdData(!0))}};window.addEventListener("beforeunload",t,{once:!0})}if(this.holidayBackground&&!i){if(!this.isSSRBkgd)return;return this.ssrBackgroundMetadata={provider:this.ssrBackgroundMetadata.provider,configIndex:this.ssrBackgroundMetadata.configIndex,imageUrl:this.ssrBackgroundMetadata.imageUrl,holiday:this.holidayBackground},this.config.enableEventGleamImage&&this.eventGleam&&(this.ssrBackgroundMetadata={...this.ssrBackgroundMetadata,dark:this.eventGleam.DarkGleamUrl,light:this.eventGleam.LightGleamUrl,gleam:!0}),void this.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata)}const r=this.backgroundGalleryEligibility&&void 0!==this.galleryBackgroundSelectionMetadata,o=this.ntpTheme?!this.ntpTheme.isNtpBackgroundDark:void 0;switch(t){case"Video":this.setCurrentBackgroundMetadata({provider:t,userSelected:r,configIndex:e||this.videoProvider.videoId,imageId:this.videoProvider.firstFrameId});break;case"BrowserLocal":this.setCurrentBackgroundMetadata({provider:t,userSelected:r,imageUrl:this.chromiumPageSettingsState.customBackgroundImageInfo.resourceUrl});break;case"Theme":this.setCurrentBackgroundMetadata({provider:t,userSelected:r,imageUrl:this.getThemeBackgroundInfo(this.ntpTheme),darkIcons:o});break;case"CMSImage":this.setCurrentBackgroundMetadata({provider:t,userSelected:r,configIndex:this.imageProvider.imageId,imageId:this.imageProvider.imageName});break;case"NoBackground":this.setCurrentBackgroundMetadata({provider:t,userSelected:!0});break;default:this.setCurrentBackgroundMetadata({provider:t})}N.K.getCurrentBackgroundMetadata()}handleGalleryBackgroundSelection(){const t=this.backgroundDataConnector.getCurrentState();if(!t)return;const e=this.currentProvider;this.galleryBackgroundSelectionMetadata=t.backgroundSelectionMetadata,this.changedToThemeImage="Theme"===this.galleryBackgroundSelectionMetadata?.provider,this.currentProvider=this.galleryBackgroundSelectionMetadata.provider,this.videoProvider&&"Video"===this.currentProvider&&(this.videoProvider.isPlaying=!1),this.config.holidayImage&&(this.holidayBackground=(0,F.S)()?this.getHolidayBkgdData():this.ssrBackgroundMetadata.holiday),e===this.currentProvider&&(this.isLoadComplete=!1,this.updateProperties()),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])}handleBackgroundRefresh(){this.defineCurrentProviderAndSync(),"Video"===this.currentProvider&&(this.videoProvider.setVideoAndMuseumCardProperties(),this.videoProvider.isPlaying=!1,this.isLoadComplete=!1),this.updateProperties()}addBackgroundImageDataRequestListener(){window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onBackgroundImageDataRequest&&window.chrome.ntpSettingsPrivate.onBackgroundImageDataRequest.addListener(()=>{this.sendNtpBackgroundImageData()})}getStyleForElementKey(t){return(0,P.pr)(t)?.style}checkInformataionalFlight(){return this.config.informationalFlightOnly&&"informational"==this.chromiumPageSettingsState.currentLayout}setProviderForRotation(){let t;try{t="true"===(0,C.Lg)().getItem("isBackgroundToggleOn")}catch(e){(0,o.vV)(r.m7c,"Local storage for isBackgroundToggleOn failed."),t=!0}this.isBackgroundDefaultedToOff&&this.config.disableDefaultBackground&&t&&(T.YT.addOrUpdateTmplProperty("bkgToggleOnAfterDefaultedOff","1"),this.isBackgroundDefaultedToOff=!1),this.config.disableDefaultBackground&&!t?(this.isBackgroundDefaultedToOff=!0,T.YT.addOrUpdateTmplProperty("bkgIsDefaultOff","1"),this.currentProvider="NoBackground",this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}]),J.l.updateLayoutAndBackgroundImageType("off",!1)):(this.currentProvider="CMSImage",this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}]))}getThemeBackgroundInfo(t){return t?t.backgroundColorRgba&&!t.imageUrl?(0,G.Hu)(this.chromiumPageSettingsState):t.imageUrl?t.imageUrl:void 0:""}checkAndCreateVideoProvider(){this.videoProvider||(this.videoProvider=new z(this.config.video,this))}checkAndCreateImageProvider(t){this.imageProvider||(this.imageProvider=new Y(t,this)),this.config.simpleImages&&this.checkAndGenerateSimpleImageOnlySchedule()}async setCurrentBackgroundMetadata(t){this.isCurrentBackgroundMetadataLoaded&&!(0,tt.A)(this.currentBackgroundMetadata,t)&&(this.currentBackgroundMetadata=t,N.K.setCurrentBackgroundMetadata(this.currentBackgroundMetadata))}async sendNtpBackgroundImageData(){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&this.config&&this.config.cmsImage&&this.config.cmsImage.data||console.error("ntpSettingsApi or imagedata is null or undefined.");const e={data:this.config.cmsImage.data.map(t=>({thumbnailImage:t.image.i240,ntpImage:t.image.i2160}))};t.sendNtpBackgroundImageData(e.data)}setCorrectRotationBackground(){this.data=this.getVideoData(),this.checkAndCreateImageProvider(this.config.cmsImage),this.saveBackgroundPref("CMSImage","always"==this.chromiumPageSettingsState?.selectedFeedDisplaySetting?N.K.getAbstractImageStartIndex()+this.dayNow:this.data.simpleSchedule[this.dayNow])}shouldOverrideWithPreviousRotation(){if(!this.isSSRBkgd||this.noSSRMismatch)return!1;if(!this.backgroundGalleryEligibility)return this.ssrRotationMismatch&&this.dailyRotationEnabled()&&this.ssrPageLoadMismatchBackgroundType===this.ssrModifiedMismatchBackgroundType;const t=this.chromiumPageSettingsState&&"off"===this.chromiumPageSettingsState.currentBackgroundImageType,e=N.K.getPreferenceByKeyFromFromPreferencesCache(X.mR.changeBackgroundDaily)||void 0===this.galleryBackgroundSelectionMetadata&&"CMSImage"===this.ssrBackgroundMetadata.provider;return this.ssrRotationMismatch&&!t&&e}checkForSSRRotationMismatch(t){this.dailyRotationEnabled()&&"always"==this.chromiumPageSettingsState?.selectedFeedDisplaySetting?this.ssrBackgroundMetadata&&this.ssrBackgroundMetadata.configIndex-N.K.getAbstractImageStartIndex()!==this.dayNow&&(this.ssrRotationMismatch=!0):t&&t.schedule&&(!this.config.simpleImages||t.simpleSchedule)&&(!this.backgroundGalleryEligibility&&this.isRotationMismatchWithoutGallery()?(N.K.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),this.ssrRotationMismatch=!0,this.ssrPageLoadMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType,this.ssrModifiedMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType):"CMSImage"===this.ssrBackgroundMetadata?.provider&&this.data.simpleSchedule[this.dayNow]!==this.ssrBackgroundMetadata?.configIndex&&(N.K.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),this.ssrRotationMismatch=!0))}isRotationMismatchWithoutGallery(){return"CMSImage"===this.ssrBackgroundMetadata?.provider&&("imageAndVideo"!==this.chromiumPageSettingsState.currentBackgroundImageType||this.data.simpleSchedule[this.dayNow]!==this.ssrBackgroundMetadata.configIndex)}get backgroundMuseumCarddBtnMoveToBottom(){return!this.museumCreditsCardIsShown}backgroundImageFixedWCStateSyncEventEmit(t){window.dispatchEvent(new CustomEvent("backgroundImageWCStatesSync",{detail:{states:t}}))}}(0,i.Cg)([A.sH],ct.prototype,"currentProvider",void 0),(0,i.Cg)([A.sH],ct.prototype,"imageOverrideStyles",void 0),(0,i.Cg)([A.sH],ct.prototype,"imageSource",void 0),(0,i.Cg)([A.sH],ct.prototype,"isReducedMotionActive",void 0),(0,i.Cg)([A.sH],ct.prototype,"isTTVRFired",void 0),(0,i.Cg)([A.sH],ct.prototype,"isLoadComplete",void 0),(0,i.Cg)([A.sH],ct.prototype,"museumBottom",void 0),(0,i.Cg)([A.sH],ct.prototype,"museumCard",void 0),(0,i.Cg)([A.sH],ct.prototype,"museumCreditsCardIsShown",void 0),(0,i.Cg)([A.sH],ct.prototype,"isBackgroundDefaultedToOff",void 0),(0,i.Cg)([A.sH],ct.prototype,"isChinaCompliance",void 0),(0,i.Cg)([A.sH],ct.prototype,"showToast",void 0),(0,i.Cg)([A.sH],ct.prototype,"telemetryTags",void 0),(0,i.Cg)([A.sH],ct.prototype,"toastMessage",void 0),(0,i.Cg)([A.sH],ct.prototype,"videoPlaying",void 0),(0,i.Cg)([A.sH],ct.prototype,"videoSource",void 0),(0,i.Cg)([(0,$.CF)({converter:$.R$})],ct.prototype,"spaceHolderHeight",void 0),(0,i.Cg)([(0,$.CF)({mode:"boolean"})],ct.prototype,"showFullPageBlur",void 0),(0,i.Cg)([$.CF],ct.prototype,"bgBlurSize",void 0),(0,i.Cg)([A.sH],ct.prototype,"secondaryButtonTelemetryTag",void 0),(0,i.Cg)([A.sH],ct.prototype,"imageEditButtonTelemetryTag",void 0),(0,i.Cg)([A.sH],ct.prototype,"turnOnHolidaySwitchButtonTelemetryTag",void 0),(0,i.Cg)([A.sH],ct.prototype,"turnOffHolidaySwitchButtonTelemetryTag",void 0),(0,i.Cg)([A.sH],ct.prototype,"copilotShowCard",void 0),(0,i.Cg)([A.sH],ct.prototype,"backgroundGalleryButtonEnabled",void 0),(0,i.Cg)([A.sH],ct.prototype,"canRenderNonSsrElements",void 0),(0,i.Cg)([A.sH],ct.prototype,"isDarkMode",void 0),(0,i.Cg)([A.sH],ct.prototype,"holidayBackground",void 0),(0,i.Cg)([A.sH],ct.prototype,"backgroundGalleryRef",void 0),(0,i.Cg)([A.sH],ct.prototype,"enableBackgroundGalleryCard",void 0),(0,i.Cg)([A.Jg],ct.prototype,"isRuby",null);var ut=n(96950),dt=n(60402),lt=n(91640),ht=n(68619),ft=n(56046),pt=n(11622);ht.a;const gt=ut.qy`<img class="picture" id="backgroundImagePicture" src=${t=>t.imageSource} style=${t=>t.imageOverrideStyles} @load=${t=>t.loadComplete()} @error=${t=>t.error(t.imageSource)}></img>`,mt=ut.qy`<div class="museumButtonContainer" ${(0,dt.K)("ref_museumButtonContainer")}></div>`,wt=ut.qy`<div class="backgroundGalleryButtonContainer"><fluent-button appearance="outline" class="backgroundGalleryButton" @click=${t=>t.onClick_openGalleryButton()} @focusout=${t=>t.onFocusLeave_backgroundGalleryButton()} title="${t=>t.backgroundGalleryButtonEnabled?t.strings.backgroundGalleryButtonText:t.strings.backgroundGalleryBelowMinimumWidthTooltip}" ?disabled=${t=>!t.backgroundGalleryButtonEnabled} data-t="${t=>t.telemetryTags?.backgroundGalleryButton}" ${(0,dt.K)("ref_backgroundGalleryButton")}><span class="backgroundGalleryButtonText">${t=>t.strings.backgroundGalleryButtonText}</span></fluent-button></div>`,yt=ut.qy`<div class="museumCardCreditsContainer" ${(0,dt.K)("ref_museumCreditsContainer")}><div class="museumCardTitleContainer">${(0,lt.z)(t=>t.museumCard.titleURL,ut.qy`<a class="museumCardTitle museumCardTitleAnchor" data-t="${t=>t.telemetryTags?.cardTitle}" href="${t=>t.museumCard.titleURL}" target="_blank">${t=>t.museumCard.title}</a>`)} ${(0,lt.z)(t=>!t.museumCard.titleURL,ut.qy`<p class="museumCardTitle">${t=>t.museumCard.title}</p>`)}<p class="museumCardCredits ${t=>t.backgroundGalleryEligibility&&"Event"!==t.currentProvider?"backgroundGallery":""}">${t=>t.museumCard.credits}</p></div>${(0,lt.z)(t=>!t.backgroundGalleryEligibility||"Event"===t.currentProvider,ut.qy`<div class="museumCardDivider"></div>${(0,lt.z)(t=>"Event"===t.currentProvider,mt)}</div>`)} ${(0,lt.z)(t=>t.backgroundGalleryEligibility&&"Event"!==t.currentProvider,ut.qy`<div class="copyrightContainer">${t=>` ${t.strings.copyrightText}`}</div>${wt} `)}
`,vt=(0,lt.z)(t=>t.museumCard&&t.museumBottom>0&&t.canRenderNonSsrElements,ut.qy`<div class="museumCard ${t=>t.museumCreditsCardIsShown?"museumCardVertical":"museumCardVerticalHide"} ${t=>t.holidayBackground&&t.config.holidayImage&&!t.isDarkMode?"holidayLight":""} " style="${t=>`bottom:${t.museumBottom}px; right:50px`}" ${(0,dt.K)("ref_museumCardContainer")}>${(0,lt.z)(t=>t.museumCreditsCardIsShown&&!t.enableBackgroundGalleryCard,yt)} ${(0,lt.z)(t=>t.museumCreditsCardIsShown&&t.backgroundGalleryRef&&t.enableBackgroundGalleryCard,ut.qy`<div id="backgroundGalleryContainer" class="bgCard">${t=>(0,pt.yN)(t.backgroundGalleryRef,{memoize:!1,ttvrMarkerAggregate:"Header",properties:{cardMode:!0}})}</div>`)}</div>`),bt=ut.qy`<span class="overlay ${t=>t.museumCreditsCardIsShown||"Theme"===t.currentProvider?"overlay_hide":""} ${t=>t.showFullPageBlur&&!t.museumCreditsCardIsShown?"windowsBlur":""}" data-mscc-ic="false" id="backgroundImageOverlay" ${(0,dt.K)("ref_backgroundOverlay")}></span>${(0,lt.z)(t=>t.config&&!t.museumCreditsCardIsShown&&"Theme"!==t.currentProvider&&!(t.holidayBackground&&t.config.holidayImage&&!t.config.enableEventGleamImage),ut.qy`<span class="overlayGradient ${t=>t.showFullPageBlur?"overlayGradientTranslucent":""} ${t=>t.config.enableBrightBgForHoliday&&"hero"===t.currentProvider&&!t.isDarkMode?"lightBG":""}"></span>`)}
`,St=t=>t.museumCreditsCardIsShown&&!t.isRuby,Ct=ut.qy` ${gt} ${bt}
`,kt=ut.qy` ${gt} ${bt}
`,Tt=ut.qy` ${gt} ${bt}
`,xt=ut.qy` ${gt} ${bt} ${(0,lt.z)(St,ut.qy`${vt}`)}
`,At=ut.qy` ${gt} ${bt}
`,$t=ut.qy`<msn-toast class="toast" style="${t=>`bottom:${t.museumBottom}px`}">${t=>t.toastMessage}</msn-toast>`,It=ut.qy`<video class="video" loop muted src="${t=>t.videoSource}" poster="${t=>t.imageSource}" @canplaythrough=${t=>t.playVideo()} @error=${t=>t.error(t.videoSource)} ${(0,dt.K)("ref_video")}></video>`,Pt=ut.qy` ${(0,lt.z)(t=>t.imageSource||t.videoSource,ut.qy` ${It} ${bt} ${(0,lt.z)(St,ut.qy`${vt}`)} ${(0,lt.z)(t=>t.showToast&&t.canRenderNonSsrElements,$t)} `)}
`,Rt=ut.qy` ${(0,lt.z)(t=>t.imageSource,gt)}
`,Mt=ut.qy` ${gt} ${bt} ${(0,lt.z)(St,ut.qy`${vt}`)}
`,_t=ut.qy` ${(0,lt.z)(t=>"Video"===t.currentProvider,ut.qy` ${(0,lt.z)(t=>t.imageSource||t.videoSource,ut.qy` ${It} ${(0,lt.z)(t=>t.showToast&&t.canRenderNonSsrElements,$t)} `)} `,ut.qy` ${gt} `)} ${bt} ${(0,lt.z)(St,ut.qy`${vt}`)}
`,Et=(0,ft.C)("TTSR.BackgroundImageWC"),Ft=["Event","CMSImage","Video"],Dt=ut.qy`<div class="backgroundImage" id="backgroundImage" ${(0,dt.K)("ref_backgroundImage")}>${t=>{if(t.isRuby)return Rt;if(t.enableBackgroundGalleryCard&&Ft.includes(t.currentProvider))return _t;switch(t.currentProvider){case"BrowserLocal":return Ct;case"FREBackground":return Tt;case"Event":return xt;case"NoBackground":return null;case"Theme":return At;case"Video":return Pt;case"CMSImage":case"hero":return Mt;default:return kt}}}</div>${Et}
`;var Ot=n(86856),Nt=n(74849),Lt=n(22131),Bt=n(4126);const Ut=Nt.A` .backgroundGalleryButtonContainer{padding-left:12px}.copyrightContainer{padding-left:12px}.museumCard{left:initial;right:12px}`,Wt=Nt.A` .backgroundGalleryButtonContainer{padding-right:12px}.copyrightContainer{padding-right:12px}.museumCard{left:12px;right:initial}`,Vt=Nt.A` .windowsBlur{background:rgba(31,31,31,0.7)}`,Ht=Nt.A` .picture{height:100%;position:fixed}`,zt=Nt.A` .picture{height:auto}`.withBehaviors((0,Lt.mr)(Ht)),jt=Nt.A`:not(:defined){visibility:hidden}.backgroundGalleryButtonContainer{padding-bottom:4px;width:362px}.backgroundGalleryButtonText{color:white}.copyrightContainer{color:rgba(255,255,255,0.54);padding-bottom:10px}fluent-button.backgroundGalleryButton::part(control){border-radius:16px}.white-icon svg{fill:white}.backgroundImage{height:100%;width:100%}.museumCard{color:#fff;opacity:1;position:absolute;transition:opacity 0.2s;z-index:100}.museumCard_hide{opacity:0;transition:opacity 0.2s}.museumCardCredits{color:rgba(255,255,255,0.54);font-size:13px;margin:10px 0px 16px 0px;user-select:none}.museumCardCredits.backgroundGallery{margin:10px 0px 12px 0px}.museumCardCreditsContainer{background:rgba(0,0,0,.77);border-bottom:1px solid transparent;border-radius:4px;font-family:inherit;font-size:12px;font-weight:400;margin-bottom:10px;max-width:384px;padding:8px 4px}.museumCardDivider{background-color:rgba(255,255,255,0.54);height:1px;margin:4px 12px;width:350px}.museumCardIcon{display:inline;fill:#fff;font-size:20px;height:14px;position:relative;top:1px;width:20px}.museumCardTextContainer{background:none;border:none;color:#fff;display:inline;height:auto;padding-left:12px;padding-right:12px;position:relative;text-decoration:none;width:auto}.museumCardTextContainer:hover{cursor:pointer}.museumCardTitle{color:#fff;font-family:inherit;font-size:20px;font-weight:400;line-height:24px;margin:4px 0px;text-decoration:none;user-select:none}.museumCardTitleAnchor:hover{cursor:pointer;text-decoration:underline}.museumCardTitleContainer{padding:0px 12px}.overlayGradient{width:120%;height:100%;position:absolute;top:0;background-image:radial-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 100%),radial-gradient(rgba(0,0,0,0) 33%,rgba(0,0,0,0.3) 166%);transform:translateZ(0px);backface-visibility:hidden;perspective:1000px;transition:all 0.07s ease-out 0s}.overlayGradient.overlayGradientTranslucent{opacity:0}.overlayGradient.lightBG{background-image:radial-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.35) 100%),radial-gradient(rgba(0,0,0,0) 33%,rgba(0,0,0,0.3) 166%)}.overlay{top:0;backdrop-filter:blur(60px);transition:all 0.4s ease-out 0s;position:absolute;width:100%;height:100%;opacity:0}.overlay_hide{opacity:0}.picture{background-position:center;background-repeat:no-repeat;background-size:cover;height:100%;margin:0;object-fit:cover;padding:0;position:absolute;width:100%}.toast{bottom:32px;left:50%;position:fixed;transform:translate(-50%,0);width:fit-content;z-index:${String(s.P.Over)}}.video{height:100%;margin:0;object-fit:cover;padding:0;position:absolute;width:100%}.windowsBlur{background:rgba(255,255,255,.55);height:100%;position:absolute;width:120%;z-index:1;transform:translateZ(0px);backface-visibility:hidden;perspective:1000px;opacity:1}#backgroundImage{opacity:1;visibility:visible;transition:opacity 0.5s ease,visibility 0.5s ease}#backgroundImage.hidden{opacity:0;visibility:hidden;transition:opacity 0.5s ease,visibility 0.5s ease}`.withBehaviors((0,Lt.G2)(Vt)),qt=jt.withBehaviors(new Ot.t(Ut,Wt),new Bt.o("isRuby",!0,zt));var Gt;!function(t){t.Secondary="backgroundImageWCSecondary",t.Edit="backgroundImageWCEdit",t.Toggle="backgroundImageWCToggle",t.StatesSync="backgroundImageWCStatesSync",t.StatesSyncAsk="backgroundImageWCStatesSyncAsk",t.EventToggle="eventToggle",t.CloseSpotlight="backgroundImageWCCloseSpotlight"}(Gt||(Gt={}));const Jt={experienceConfigSchema:undefined}},1215:function(t,e,n){n.d(e,{$:function(){return r},W:function(){return i}});const i="consent-banner-container",r="onetrust-sdk"},1350:function(t,e,n){n.d(e,{Az:function(){return r},H7:function(){return i},Vq:function(){return s},im:function(){return o}});const i="0067acd6d05f4168b92f510d33b9ed74",r="service::api.msn.com::MBI_SSL",o="service::www.msn.com::MBI_SSL",s="api://www.msn.com/OneService.Read"},1732:function(t,e,n){n.d(e,{Qm:function(){return it},M0:function(){return W},Q4:function(){return V},Sd:function(){return Y},sY:function(){return q},rn:function(){return K},Lc:function(){return X},lV:function(){return yt},WH:function(){return et},Eb:function(){return F},hb:function(){return M},HD:function(){return _},JO:function(){return Q},zl:function(){return nt},Qn:function(){return N},nX:function(){return pt},$2:function(){return lt},nm:function(){return gt},KQ:function(){return ft},YX:function(){return ut},cA:function(){return U},ei:function(){return J},iQ:function(){return z},c9:function(){return E},r2:function(){return vt},Cw:function(){return Ct},e7:function(){return j},_L:function(){return st},qC:function(){return wt},Z3:function(){return dt},Ph:function(){return P},Rx:function(){return G},R8:function(){return B},Il:function(){return D},Xm:function(){return O},h_:function(){return L},xe:function(){return ct},Zx:function(){return St},WY:function(){return bt},$W:function(){return ot},t1:function(){return Tt},TK:function(){return tt},kg:function(){return mt},iB:function(){return kt},Dl:function(){return H}});var i=n(19548),r=n(79426),o=n(6092),s=n(19330),a=n(53384),c=n(63418),u=n(79805),d=n(93468),l=n(65022),h=n(30817),f=n(17720),p=n(77246),g=n(41820),m=n(50115),w=n(12870),y=n(89980),v=n(98216);function b(t){if("undefined"==typeof window||!window.document||window.isRenderServiceEnv)return void(0,d.c_)(new Error("DOM is not available"),l.JhR,"DOM is not available to use trusted types API.");const e=window.trustedTypes;if(!e)return void(0,d.c_)(new Error("Trusted types API is not available"),l.NRk,"Trusted types API is not available to use.");if(!e.createPolicy)return void(0,d.c_)(new Error("Trusted types API createPolicy function is not available"),l.Z2S,"Trusted types API createPolicy function is not available to use.");const n=window.trustedTypePolicies||(window.trustedTypePolicies={});if(n[t])return n[t];const i=e.createPolicy(t,{createScriptURL:t=>{const e=function(t){const e=["ntp.msn.com","ntp.msn.cn","assets.msn.cn","assets.msn.com","www.bing.com","assets2.msn.com","assets2.msn.cn","int.msn.com","r.bing.com","business.bing.com","staticview.msn.com","staticview.msn.cn",document.location.hostname],n=["clarity.ms"];let i;try{i=new URL(t,location.origin)}catch(e){return(0,d.c_)(new Error("Failed to construct URL"),l.r4U,"URL is invalid",`Invalid URL: ${t}`),"about:blank#error"}if(i.hostname){const t=e.includes(i.hostname),r=n.some(t=>i.hostname.endsWith(`.${t}`));if(!t&&!r)return(0,d.c_)(new Error("URL violates Trusted Types"),l.Fwv,"URL hostname is not allowed",`Invalid URL hostname: ${i.hostname}`),"about:blank#error"}return t}(t);return e}});return n[t]=i,i}var S=n(32395),C=n(98793),k=n(48172),T=n(34713);const x="ntp-lastLayoutUpdate",A="ntp-lastContentChanged",$="ntp-lastWPOPromotion",I="lypSignal",P="isCoordsCacheInvalid";const R="__cachedClientFeaturesKey__";async function M(){const t=_();if(t)return t;let e=void 0!==w.Rb.EdgeNTPHeader?.enabledFeatures;const n=w.Rb.EdgeNTPHeader?.enabledFeatures||[],i=window.chrome;let r={enabled:n,disabled:[]};if(i){const t=i.ntpSettingsPrivate;if(t&&"function"==typeof t.getConfigData){const n=await new Promise(e=>t.getConfigData(e));e=void 0!==n?.enabledFeatures,r={enabled:n?.enabledFeatures||[],disabled:n?.disabledFeatures||[]}}}return e&&f.vv.set(R,r),r}function _(){return f.vv.get(R)}function E(t){const e=[];return t.forEach(t=>{if(t.startsWith("m")){const n=t.replace("msNtpExp",""),i=Number.parseInt(n);i>=0&&e.push(i)}}),e}function F(t){let e=BigInt(0);return t.forEach(t=>{t<64&&(e|=BigInt(1)<<BigInt(t))}),e===BigInt(0)?"":e.toString()}async function D(){const{enabled:t}=await M();return t?.includes("msReducedNtpAdsForNewDevice_BlockAllAds")}async function O(){const{enabled:t}=await M();return t?.includes("msReducedNtpAdsForNewDevice_BlockOnly3PAds")}async function N(){const{enabled:t}=await M(),e=t?.filter(t=>t.startsWith("msNtpReducedAdsSdCards"));return e&&e.length>0?e[0]:null}function L(){if("1"===new URLSearchParams(window?.location?.search).get("lowend"))return!0;if(window&&window.deviceMemory)return window.deviceMemory<=4;const t=window&&window.navigator;if(!t)return!1;const{deviceMemory:e=-1}=t;return e<=4}function B(){const t=window&&window.navigator;if(!t)return!1;if("1"===new URLSearchParams(window?.location?.search).get("edgelowend"))return!0;const{deviceMemory:e=-1,hardwareConcurrency:n=-1}=t;return e<=4||n<=4}function U(){let t=!1;const e="os-sku";if(!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv))try{if(window&&window.external&&window.external.getHostEnvironmentValue(e)){const n=JSON.parse(window.external.getHostEnvironmentValue(e));t=n&&"192"===n[e]}}catch(t){}return t}function W(t){window?.chrome?.ntpSettingsPrivate?.onPrerenderConversionFromDhpToNtp?.addListener(t)}function V(t){window?.chrome?.ntpSettingsPrivate?.onPrerenderConversionFromNtpToDhp?.addListener(t)}function H(t,e,n,i,r,o){const s=`${t}|${e}|${n}|${i}|${r}`;(0,y.Lg)().setItem(x,s),v.YT.removeTmplProperty(x),t===g.XE.Wpo&&(0,y.Lg)().setItem($,s),n!==i?(v.YT.addOrUpdateTmplProperty("layoutchange",s),t===g.XE.User&&((0,y.Lg)().setItem(A,s),v.YT.removeTmplProperty(A)),async function(t,e,n,i,r,o){const s=await z()||{};if(t==g.XE.User){if(s.userLayoutHistory={time:r,changeKey:e,from:n,to:i},i!==n){const t=await(0,m.mp)();t&&(await(0,m.Is)(null),v.YT.addOrUpdateTmplProperty("wpo_nxCleanDueToUserChange: ",JSON.stringify(t)))}}else(!o||o&&t==g.XE.Wpo)&&(s.wpoLayoutHistory={time:r,changeKey:e,from:n,to:i});await k.f.savePreferenceSetting(g.bJ.layoutHistory,s)}(t,e,n,i,r,o)):v.YT.addOrUpdateTmplProperty("layoutUpdate",s)}async function z(){const t=await k.f.getPreferenceSetting(g.bJ.layoutHistory,!0);return t&&t.value}async function j(){const t=await k.f.getPreferenceSetting(g.bJ.wpo),e=t&&t.value,n=e&&e.recommendedLayoutRetargetHistory&&e.recommendedLayoutRetargetHistory.length;return n?n+"":"0"}function q(){const t=(0,y.Lg)().getObject("AdminPortalSettings");if(!t)return!1;const{isOfficeContentEnabled:e,isShowCompanyAndIndustry:n}=t;return!e&&!n}async function G(){const{enabled:t}=await M();return!!t?.length&&t.includes("msNtpExpBlockLayoutPromotions")}async function J(t){try{const e=await z();let n=e&&e.wpoLayoutHistory,i=e&&e.userLayoutHistory;const r={};return n||(n=await async function(t){const e=await k.f.getPreferenceSetting(g.bJ.wpo),n=e&&e.value,i=n&&n.layoutHistory;if(i&&i.length){const e=t?i[i.length-1]:i[0];return{time:e.time,changeKey:"layout",from:g.IT[e.from],to:g.IT[e.to]}}return null}(t)),t||i||(i=await async function(){const t=await C.Q.getPreferenceSetting(g.K5.layout_mode,!0),e=t&&t;return e?{time:e.timestamp,changeKey:"layout",from:8,to:e.value}:null}()),n?.time&&(r.promotion=`${n.time}_${"layout"==n.changeKey?"l":"f"}_${n.from}_${n.to}`),i?.time&&(r.selection=`${i.time}_${"layout"==i.changeKey?"l":"f"}_${i.from}_${i.to}`),r}catch(t){return{}}}async function Q(){if((0,p.S)()&&window.caches){return(await window.caches.open("edgenext-pre-V1").then(t=>t.matchAll())).find(t=>t.url.includes("/common."))}}async function K(t){if((0,p.S)()&&window.caches)return window.caches.delete(t)}async function X(){}function Y(){window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onNtpFeedbackSubmitted&&window.chrome.ntpSettingsPrivate.onNtpFeedbackSubmitted.addListener(()=>{Z()})}const Z=async()=>{const t=w.Rb.ClientSettings?w.Rb.ClientSettings.aid:"";let e=v.YT.getPageMetadata().JoinIdProps.IDXId;if(e){const n=e.split(",");e=n.slice(0,10).toString();const i={serviceType:"oneservice",oneServiceTraceId:e,oneServiceActivityId:t};v.YT.sendTraceInfoEvent(i)}};function tt(t,e){const n=b(e);return n?n.createScriptURL(t):((0,d.c_)(new Error("Trusted Types policy creation error"),l.KSf,"Trusted Types policy creation failed, Trusted Types API is unavailable."),t)}async function et(){const t=await k.f.getPreferenceSetting("background_setting_preferences",!0),e=t?.value?.backgroundSelectionMetadata;return e}async function nt(){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(t&&t.getPref)return new Promise(e=>{t.getPref("ntp.background_image",function(t){e(t?.value)})})}function it(t){const e=window?.chrome?.ntpSettingsPrivate;if(!e)return;const{activateTriggerWithPageType:n,NTPTrigger:i,PageType:r}=e;try{if(n&&i&&r&&i[t]){const e="1"===new URLSearchParams(window?.location?.search).get("startpage");n(i[t],e?r.DHP:r.NTP)}}catch(n){(0,d.vV)(l.tH8,"NTP Settings Private: Failed to activate Trigger",`{"error": ${n}, "trigger": ${t}, "api": ${JSON.stringify(e)}}`,{shouldSampleErrorsForTreatement1:!0})}}(0,p.S)()&&"visible"===document.visibilityState&&async function(){const t=window?.chrome?.embeddedSearch?.newTabPage?.getTabTimings;if(!t)return;const e=(0,h.ZF)();t((t,n)=>{t&&n&&void 0!==n.tabStartToNavigationStart&&(e.tabStartToNavigationStart=Math.round(n.tabStartToNavigationStart))})}();const rt="widgetLockScreenLandingSessions";async function ot(){const t=await st()||[];return t.push({ts:Date.now()}),await k.f.savePreferenceSetting(rt,t)?t:null}async function st(){return await k.f.getPreferenceSetting(rt).then(t=>t?.value?t.value:null)}const at="myFeed";function ct(t){return!t||"null"===t||"undefined"===t||""===t||t.toLocaleLowerCase()===at.toLocaleLowerCase()}async function ut(t){let e;if((w.Rb.EdgeNTPHeader||await C.Q.isApiAvailableToUse())&&(e=w.Rb.EdgeNTPHeader?.freSeenCount?.toString(),!e)){const t=await C.Q.getPreferenceSetting(g.K5.seen_interest_fre_count,!0);e=t&&t.value?t.value.toString():"0"}const n=await lt(),r=await async function(){const{enabled:t}=await M();return t?.includes("msNtpExpDisableFre")}(),o=n&&Date.now()-n<864e5,s=i._3.getQueryParameterByName("firstlaunch",window.location.href),a=!e||!isNaN(parseInt(e))&&parseInt(e)<3;t||"1"===s||o||r?e="10":dt()&&a&&((0,d.vV)(l.tAV,"FRE overlay is disabled because of auth refresh",`{"seenCountToSend": ${e}}`),e="20");const c=i._3.getQueryParameterByName("overlay",window.location.href);return c&&(e=c),e}function dt(){const t=f.vv.get("authRefreshing"),e=v.YT.getPageMetadata()?.contract?.page?.isAutoRefresh;return!(!t&&!e)&&(v.YT.addOrUpdateTmplProperty("isauthrefreshing","1"),!0)}async function lt(){return await ht()||await pt()}async function ht(){if(!window?.chrome?.ntpSettingsPrivate?.getConfigData)return;const t=new r.e;return window.chrome.ntpSettingsPrivate.getConfigData(e=>{t.set(e?.newProfileFreSeenTime||null)}),t.getResultAsync()}async function ft(){return w.Rb.EdgeNTPHeader?.newProfFreTime?w.Rb.EdgeNTPHeader?.newProfFreTime:await ht()}async function pt(){if(w.Rb.EdgeNTPHeader?.seenNewDevFre&&w.Rb.EdgeNTPHeader?.newDevFreTime)return w.Rb.EdgeNTPHeader?.newDevFreTime;if(!window?.chrome?.ntpSettingsPrivate?.getPref||!window?.chrome?.ntpSettingsPrivate?.getConfigData)return;const t=new r.e;return window?.chrome?.ntpSettingsPrivate?.getPref(g.JW.hasUserSeenNewFre,e=>t.set(e?.value)),t.getResultAsync().then(t=>{if(!t)return null;const e=new r.e;return window.chrome.ntpSettingsPrivate.getConfigData(t=>{e.set(t?.newDeviceFreSeenTime||null)}),e.getResultAsync()})}async function gt(){if(!window?.chrome?.ntpSettingsPrivate?.getConfigData)return;const t=new r.e;return window.chrome.ntpSettingsPrivate.getConfigData(e=>{t.set(e?.profileCreationTime||null)}),t.getResultAsync()}function mt(){const t=(0,y.Lg)().getItem(x);t&&v.YT.addOrUpdateTmplProperty(x,t);const e=(0,y.Lg)().getItem(A);e&&v.YT.addOrUpdateTmplProperty(A,e);const n=(0,y.Lg)().getItem($);n&&v.YT.addOrUpdateTmplProperty($,n);const i=(0,y.Lg)().getObject("lypSignalTransition");if(i){const{clientReceivedTime:t,knobIdx:e,requestIdWhenReceived:n}=i,r=`${t??"0"}|${e??"0"}|${n??"0"}|${Date.now()}`;v.YT.addOrUpdateTmplProperty(I,r)}}async function wt(){return new Promise(t=>{const e=window?.chrome?.ntpSettingsPrivate;e?e.getPref(g.JW.widgetsRegion,function(e){t(!1!==e?.value)}):t(!1)})}function yt(){const[,t]=o.T3.CurrentMarket?.split("-")||[],e=(0,S.IF)(new URLSearchParams(window.location.search),"segment"),n=e?e.toLowerCase():void 0,i=w.Rb?.ClientSettings,r="true"===i?.browser?.ismobile||"phone"===i?.deviceFormFactor?"mobileapp":"desktopweb";return{[s.W.Publisher]:"msn",[s.W.PageType]:"edgehomeandtab",[s.W.Market]:t?.toLowerCase(),[s.W.ContentCategory]:n,[s.W.DeviceType]:r}}function vt(){const t=(0,y.Lg)()?.getItem("MUID"),e=(0,c.ab)()||t;if(e){const t=(0,u.Qn)(e),n=(0,u.E5)();if(n&&t?.dateCreated)return n-t.dateCreated}}const bt=(t,e)=>{if(window.chrome?.ntpSettingsPrivate?.launchEdgeFeedback){const n=new CustomEvent("EdgeFeedbackDialogOpened");document.dispatchEvent(n);const i=(0,a.KI)();if(i){const n=new URL(window.location.href),r=n.hash;n.hash=t||`${e}${i}`,history.replaceState(history.state,void 0,n),window.location.reload(),window.chrome.ntpSettingsPrivate.launchEdgeFeedback(),window.stop(),n.hash=r||"",history.replaceState(history.state,void 0,n)}else window.chrome.ntpSettingsPrivate.launchEdgeFeedback()}},St=t=>window&&window.chrome&&window.chrome.ntpSettingsPrivate&&"function"==typeof window.chrome.ntpSettingsPrivate[t];function Ct(){if((0,T.aG)()&&"ru-ru"!==o.T3.CurrentMarket)return{enableNTPStaticRoutes:!0,enableStaticAdsRouting:false}}async function kt(t){if(!(0,p.S)())return;const e=await C.Q.getPreferenceSetting(g.K5.is_ruby_page,!0),n=e?.value&&1===parseInt(String(e?.value));void 0!==n&&n!==t&&v.YT.addOrUpdateTmplProperty("rflip","1"),C.Q.savePreferenceSetting(g.K5.is_ruby_page,{setting:g.K5.is_ruby_page,value:""+(t?1:0),timestamp:Date.now(),source:"ntp"})}function Tt(){(0,y.Lg)().removeItem(x),v.YT.removeTmplProperty(x)}},1755:function(t,e,n){function i(t){for(const[e,n]of t)window[e]=n;const e=new CustomEvent(o,{detail:{adUniqueIds:Array.from(t.keys())}});document.dispatchEvent(e)}function r(t){for(const e of t)delete window[e]}n.d(e,{YW:function(){return i},r6:function(){return r},rz:function(){return o}});const o="nativeAdRendered"},2429:function(t,e,n){n.d(e,{Be:function(){return u},JQ:function(){return d},Re:function(){return c},V1:function(){return f},bJ:function(){return a},ul:function(){return h}});var i=n(12870),r=n(33918),o=n(65022),s=n(93468);function a(t){if(!i.Rb?.CurrentFlightSet?.has("prg-ad-mon-feedback")&&!i.Rb?.CurrentFlightSet?.has(r.pL))return!1;if(!t)return!1;const e=/\$\{[A-Z_]+\}/.test(t),n=t.includes("${FEEDBACK}")||t.includes("${RLINK}")||t.includes("${CANVAS}")||t.includes("${ADVERTISER_DOMAIN}");return e&&n}function c(t,e,n,i){return t.includes(e)?t.replace(e,n):t.concat(`&${i}=${n}`)}function u(t,e,n){const i=`&${e}=${n}`;return t.replaceAll(i,"")}function d(t){if(!t)return null;try{const e=new URL(t),n=e.searchParams.get("rlink");if(n)return n;const i=e.searchParams.get("clickenc");if(i)return l(i);const r=t.match(/[&/]clickenc=([^&/]*)/);return r?l(r[1]):null}catch{return null}}function l(t){try{const e=decodeURIComponent(t).match(/[&?]rlink=([^&]*)/);return e?decodeURIComponent(e[1]):null}catch{return null}}function h(t,e){if(t)try{const e=JSON.parse(t);if(e?.adDomain)return e.adDomain}catch(e){(0,s.c_)(e,o.cgf,`Failed to parse adSelectionCriteria: ${t?.substring(0,200)}`)}if(e)try{const t=JSON.parse(e),n=t?.ads?.[0]?.advertiserDomain;if(n)return n}catch(t){(0,s.c_)(t,o.cgf,`Failed to parse adSelectionReason: ${e?.substring(0,200)}`)}}function f(t){return null!=t&&""!==t}},2509:function(t,e,n){n.d(e,{DZ:function(){return f},X4:function(){return h},wE:function(){return l}});var i=n(65022),r=n(93468),o=n(16091),s=n(17720),a=n(86676),c=n(49084);const u=Symbol("__DigitalIdSubscription__"),d=Symbol("__DigitalIdSubscriptionEvents__"),l=s.vv.get(d,()=>({DigitalIdUpdate:"DigitalIdUpdate"})),h=(0,o.G)({getInstance:()=>s.vv.get(u,()=>new a.Q)}),f=t=>{if(!(0,c.NY)()||!t)return;const e="string"==typeof t?function(t){if(!t||"string"!=typeof t)return;const e=new Set(["muid","anid","wid","at","it","picassoId"]),n=t.split(";").map(t=>t.trim()),i={};for(const t of n){const[n,r]=t.split("="),o=n?.trim(),s=r?.trim();o&&s&&e.has(o)&&(i[o]=s)}if(i.at)return i}(t):t;e&&0!==Object.keys(e).length?(e.at||(0,r.vV)(i.CO2,"No account type in digital ID payload"),h.publish(l.DigitalIdUpdate,e)):(0,r.vV)(i.JYg,"No digital ID payload")}},2543:function(t,e,n){n.d(e,{NT:function(){return a},n_:function(){return r}});const i=2.255859375,r=(t,e=20,n=400)=>{if(!t||0===t.length)return 0;const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.13623046875,.3046875,.4375,.8,.6,.9,.8,.3,.4,.4328125,.5,.7,.4,.403125,.3,.6,.6,.403125,.6,.6,.7,.6,.6,.6,.6,.6,.3,.4,.6953125,.7,.6953125,.5,1,.8,.6046875,.7,.71875,.6,.503125,.7,.7359375,.3,.5,.7,.6,.925,.8,.8,.6,.9,.7,.6,.7,.703125,.8,1.1,.8,.8,.7,.4,.6,.3328125,.7,.6,.3,.5234375,.603125,.5,.603125,.6,.5,.603125,.6,.3,.5,.6,.3,.9,.6,.6,.603125,.603125,.4,.5,.5,.6,.7,.9,.7,.7,.6,.4,.3,.4,.7],r=s(n);return t.split("").map(t=>o(t,i,.5944274259868422,1.030769230769231)).reduce((t,e)=>e+t)*e*r},o=(t,e,n,i)=>{const r=t.charCodeAt(0);return r<e.length?e[r]:c(t)?i:n},s=t=>t>=700?1.15:t>=500?1.05:1,a=(t,e=265,n=20,o=400)=>{if(!t||0===t.length)return 0;const s=t.split(" ");let a=1,c=e;for(let t=0;t<s.length;t++){const u=r(s[t],n,o);u>c?(a+=1,c=e-u-i):u===c?(a+=1,c=e):c=c-u-i}return a},c=t=>/^[\u4e00-\u9fff\u3040-\u30ff\u1100-\u11ff\u3130-\u318f\uac00-\ud7af]$/.test(t)},2603:function(t,e,n){n.d(e,{V:function(){return d}});var i=n(11372),r=n(29231),o=n(91326),s=n(6727),a=n(18806),c=n(39598),u=n(693);class d{constructor(t=!1){this.enableBatchingForAllEvents=!1,this.enableBatchingEventList={},!0!==t?Array.isArray(t)&&t.forEach(t=>this.enableBatchingEventList[t]=!0):this.enableBatchingForAllEvents=!0}createPageViewPayload(t){if(t){return this.createEvent("PageView",{...t},o.XA.RealTime)}}createContentViewPayload(t,e,n,i,a){if(!e)return;const c=[];t.forEach(t=>{c.push(this.mapTelemetryObject(t))});const{contentViewType:d,isMeaningfulScroll:l}=n,h=(0,s.mm)();let f;(h||void 0!==i||void 0!==a)&&(f={content:{...h&&{docHeight:h},...i&&{vcard:i},...a&&{adDensity:a}}});const p={...e,...f,compressedObject:c,contentViewType:d};if(d===r.ym.Scroll&&(p.isMeaningfulScroll=l),!(0,u.A)(c)){return this.createEvent("ContentView",p,o.XA.RealTime)}}createActionPayload(t,e,n,r){if((0,u.A)(t)||!e)return;let s;n===i.EG.RightClick?s="rightclick":e&&e.browser&&!0===e.browser.isMobile?s="tap":n===i.EG.Click&&(s="click");const a=t.content&&t.content.type,d=t.type||(0,c.k)(a,r);0!==d&&(t.type=d),delete t.action,delete t.behavior,delete t.overrideId,delete t.overrideDestinationUrl,delete t.overrideEmailIdScrubbing;return this.createEvent("UserAction",{actionType:n,behavior:r,object:t,...e,gesture:s},o.XA.RealTime)}createEventPayload(t,e,n){if(!n)return;return this.createEvent(t,{...n,...e},o.XA.RealTime)}createCustomEventPayload(t,e,n){if(!n&&"AppError"!==t||(0,u.A)(e))return;return this.createEvent(t,{...n,extSchema:e},o.XA.RealTime)}mapTelemetryObject(t){let e;const n=t&&t.content&&t.content.type;(n||t.behavior)&&(e=(0,c.k)(n,t.behavior));const i={n:t&&t.name,y:t&&t.type||e,l:t&&t.content&&t.content.id,h:t&&t.content&&t.content.headlineIdx,v:t&&t.content&&t.content.vertical,tp:t&&t.content&&t.content.topic,c:t&&t.content&&t.content.category,s:t&&t.content&&t.content.source,f:t&&t.feed&&t.feed.id,ct:t&&t.content&&t.content.type,i:t&&t.placement&&t.placement.id,p:t&&t.placement&&t.placement.parentId,o:t&&t.placement&&t.placement.ordinal,tv:t&&t.content&&t.content.teraVertical,tc:t&&t.content&&t.content.teraCategory,aud:t&&t.content&&t.content.audienceMode,isLocal:t&&t.content&&t.content.isLocal,subscriptionType:t&&t.content&&t.content.subscriptionType,providerType:t&&t.content&&t.content.providerType,zone:t&&t.zone,isMonetized:t&&t.isMonetized,isFeed:t&&t.isFeed};return t.ext&&(i.ext=t.ext),i}createEvent(t,e,n){let i=0;return!s.OL||this.enableBatchingForAllEvents||this.enableBatchingEventList[t]||(i=2),{name:a.E0[t],data:e,baseType:a.E0.Base,latency:n,sync:i}}}},2692:function(t,e,n){n.d(e,{w:function(){return s}});var i=n(20048),r=n(64281);const o={name:"default-template",children:[...i._,{name:"gradient-mask",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]},s=(0,r.Wh)(o,"product-image",{imageMaskOn:!0})},3200:function(t,e,n){n.d(e,{I:function(){return s}});var i=n(53384),r=n(84855),o=n(52684);const s=async(t,e,n)=>{const s=(0,i.kP)(),a="headingsonly"===e?.selectedFeedDisplaySetting||"off"===e?.selectedFeedDisplaySetting;if(!["gaming","productivityHub","following"].includes(s)&&!a){const e=n?r.HPc:r.jCw,i={experienceType:e,instanceSrc:"default"},s=await t.getConfig(i);if(s.properties?.auctionRidOverride)return;const a=(0,o.Nc)(s.properties,e,!0);a.fetchSamPredictContent([]),a.fetchCmsPredictContent()}}},3304:function(t,e,n){n.d(e,{h:function(){return I}});var i=n(14586),r=n(14383),o=n(6092),s=n(96592),a=n(12870),c=n(19548),u=n(19993),d=n(74326),l=n(96048),h=n(27261),f=n(77246),p=n(17720);var g=n(486),m=n(86948),w=n(59239),y=n(98216),v=(n(93468),n(65022),n(29252)),b=n(96851),S=n(1732);const C="gaming",k="following",T="filteredChannels",x="outlookchannels",A=new Map([["msNtpReducedAdsSdCards_stage1","reducedadss1"],["msNtpReducedAdsSdCards_stage2_group1","reducedadss2g1"],["msNtpReducedAdsSdCards_stage2_group2","reducedadss2g2"],["msNtpReducedAdsSdCards_stage3","reducedadss3"]]);function $(t,e,n){e&&t.set(n,e)}var I;!function(t){async function e(t,e,d){const g=new s.m((0,h.iA)()),P=o.T3.UserId,{CurrentRequestTargetScope:R={},WidgetAttributes:M={},CurrentMarket:_}=o.T3;let E=e&&e.flightData;if(M.telemetry&&M.telemetry.tmpl&&M.telemetry.tmpl.includes("pwbingads2")){const t="prg-binghplite";E=E?`${E},${t}`:t}let F=new s.m(t);if(e.nextPageUrl)F=new s.m(new URL(e.nextPageUrl).search),!o.T3.SendFeedCallActivityIdInHeader&&o.T3.ActivityId&&(!n()||!function(){const t=a.Rb.CurrentFlightSet.has("prg-prsw");return"edgeMobile"!==o.T3.AppType&&"winWidgets"!==o.T3.AppType&&(!t||"edgeChromium"!==o.T3.AppType)}()&&F.get("activityId")||F.set("activityId",o.T3.ActivityId));else{let t=!1;if("bingHomepage"===o.T3.AppType){const e=window._model;t=!e?.EnforceNotSignedIn&&("msa"===e?.UserType||"msb"===e?.UserType)}const s=2===await(0,m.XK)()||t;l.g.publish(l.m.userIsSignedIn,{isSignedIn:s,src:"main"});(s?u.WR.getOneServiceParamsWithAuth(P,e.ocid,!1,E||null):u.WR.getOneServiceParamsWithoutAuth(P||e.muidFallback&&`m-${o.T3.ActivityId}`,e.ocid,!1,E||null,!1,!1,"homePage"===o.T3.AppType||"bingHomepage"===o.T3.AppType)).forEach(t=>t.value&&F.set(t.key,t.value)),F.set("contentType",e.contentType),e.requestType===r.Yw.wpoService&&function(t,e,r){["bing-widgetfeed-Peregrine","winp2","anaheim-ntp-feeds","rubyntp","rubyprong2"].includes(t.ocid)||((0,u.XH)(t.ocid)?e.set("apikey",i.D):e.set("apikey",i.Qw));(t.useDelta||t.sessionId)&&(e.set("delta","true"),t.sessionId&&e.set("session",t.sessionId));!e.get("newsTop")&&n()&&t.feedName!==T&&e.set("newsTop",null==(o=t.numberOfCards)||""===o||"string"!=typeof o&&"number"!=typeof o||isNaN(o)?"48":t.numberOfCards);var o;!e.get("newsSkip")&&n()&&t.feedName!==T&&e.set("newsSkip","0");if(!e.get("User")){const t=e.get("userid");t?e.set("User",`m-${t}`):r&&e.set("User",r)}e.delete("user")}(e,F,P);if(e.feedName&&"default"!=e.feedName&&e.feedName===C){const t=g.get("gamingInterestId");if(t)F.set("query",t);else{const t=window.widget__interestIds??e.interestIds;t&&(F.delete("query"),F.set("InterestIds",t));const{pageType:n}=M;"gamingfeed-widget"!==n&&"widget"!==a.Rb.ClientSettings?.pagetype||F.set("wpopageid","wponoads");const i=window.widget__satoriId;"string"==typeof i&&F.set("satoriId",i)}}e.feedName===x&&(F.set("channels","true"),F.set("followersCount","true"),F.set("iff","true")),$(F,e.additionalFdhead,"fdhead"),$(F,e.msnup,"msnup")}e?.shouldAddTelemetryParameters&&function(t){const{appType:e,type:n,name:i}=y.YT.getPageMetadata()?.contract?.page||{};e&&t.set("apptype",e),n&&t.set("pgtype",n),i&&t.set("pgname",i)}(F);const D=e.feedName===k||e.feedName===T;if(e.feedId){const t=e.useProviderKey||D&&!e.feedId.startsWith("Y_")?"ProviderId":"InterestIds";F.set(t,e.feedId)}$(F,1===e.edgeMobile&&"1","edgeMobile"),$(F,1===e.edgeMobileAds&&"1","edgeMobileAds"),$(F,1===e.oneULayout&&"1","oneULayout"),D&&F.set("iff","true");const O=g.get("OneSvc-Uni-Feat-Tun");O?F.set("OneSvc-Uni-Feat-Tun",O):"url"===p.vv.get("oneSvcUniTunMode")&&F.set("OneSvc-Uni-Feat-Tun",await u.WR.getUniFeatTunHeader()),$(F,!0===e.disableContent&&"true","disablecontent"),$(F,e.contentId,"contentId"),$(F,e.widgetsOn&&"true","widgetsOn"),$(F,e.renderedSegments,"renderedSegments"),$(F,e.copilotApiSupported&&"true","copilotApiSupported"),$(F,e.edgExpMask,"edgExpMask"),$(F,e.adsTimeout&&e.adsTimeout.toString(),"adsTimeout"),$(F,e.timeoutMs&&e.timeoutMs.toString(),"timeOut"),$(F,e.clientUtcOffset,"clientUtcOffset"),e.clientTimeStamp&&F.set("clientTimeStamp",encodeURIComponent(encodeURIComponent(e.clientTimeStamp))),$(F,e.unusedDocIds,"unusedDocIds"),$(F,e.aspectratio,"aspectratio");const N=(0,v.x5)();N>0&&F.set("cbypass",N.toString()),e.wpoPageId&&("wpoads"===e.wpoPageId.toLowerCase()&&"en-us"!==_?.toLowerCase()?F.set("wpopageid","wponoads"):F.set("wpopageid",e.wpoPageId)),(e.wpoSchema||e.wposchema)&&F.set("wposchema",e.wpoSchema??e.wposchema),e.newsTop&&n()&&F.set("newsTop",e.newsTop.toString()),e.newsSkip&&null==e.nextPageUrl&&n()&&F.set("newsSkip",e.newsSkip.toString()),(e.enableRightRailColumn||e.renderSingleColumn||e.renderEnterpriseSingleColumn)&&F.set("wpopageid",e.wpoPageId),e.installedWidgets&&e.installedWidgets.length&&F.set("installedWidgets",e.installedWidgets.join(",")),$(F,e.clientLayoutVersion,"clv"),$(F,e.layout,"layout"),$(F,e.linear&&"true","linear"),o.T3.SendFeedCallActivityIdInHeader&&F.delete("activityId"),o.T3.SendUserIdInHeader&&F.delete("User"),(0,f.S)()?e.isRetry?F.set("caller","retryForTimeout"):e.refreshType&&F.set("caller",e.refreshType):(F.set("caller","ssr"),$(F,window.isCacheRevalidateRequest&&"1","ssrcache")),$(F,e.isDhp&&"1","dhp"),e.isXFeed&&$(F,e.requestId,"rid"),$(F,e.private&&"1","private"),$(F,e.viewportSize,"vpSize"),$(F,e.apiKey,"apikey"),e.audienceMode&&($(F,R?.audienceMode||e.audienceMode,"audienceMode"),"kids"===e.audienceMode&&I()&&(F.set("apikey",i.lJ),F.set("ocid",i.yp),F.set("disablecontent","true"))),e.feedId&&e.feedName===k&&I()&&(F.set("ocid",i.tZ),F.set("apikey",i.LI));const L=(0,S.cA)();if(e.feedName===C&&"anaheim-ntp-feeds"===e.ocid&&L&&(F.set("ocid",i.$4),F.set("apikey",i.rA)),e.enableWpoAdPlacements){const t="true"===a.Rb.ClientSettings?.browser?.ismobile||"phone"===a.Rb.ClientSettings?.deviceFormFactor?"true":"false";F.set("mobile",t);const e=(0,w.GR)()||(0,w.Cl)();F.set("cookieWallPresent",e.toString())}const B=g.get("wpoitems");B&&F.set("wpoitems",B.toString());const U=g.get("bypass_trigger");U&&!e.feedId&&F.set("bypass_trigger",U.toString());for(const t in g.getAllSearchParams())if(t.toLowerCase().includes("adppc")){const e=g.get(t);e&&(F.set("adppc",e),y.YT.addOrUpdateTmplProperty("adppc","1"));break}$(F,(0,b.EZ)()&&"1","prerender"),$(F,e.adRefreshVariant,"adRefreshVariant"),$(F,e.anaheimPageLayout,"anaheimPageLayout"),$(F,e.feedYOffset&&`${e.feedYOffset}`,"feedYOffset"),$(F,e.gdpr&&"1","gdpr"),$(F,e.verticalName,"verticalName"),$(F,e.freScenario,"freScenario"),$(F,e.freMode,"freMode"),$(F,e.aver,"aver"),$(F,e.theme,"theme"),$(F,e.over,"over"),$(F,e.oem,"oem"),$(F,e.devicetype,"devicetype"),$(F,e.smode,"smode"),$(F,e.usri,"usri"),$(F,e.duotone&&e.duotone.toString(),"duotone"),$(F,e.cardIds,"cardIds"),$(F,e.column,"column"),$(F,void 0!==e.renderedAdCount&&e.renderedAdCount.toString(),"renderedAdCount"),$(F,e.feedColumn,"feedColumn"),$(F,void 0!==e.cardsHeight&&e.cardsHeight.toString(),"cardsHeight"),$(F,e.lastRowAdColumns,"lastRowAdColumns"),$(F,e.fcl&&"true","fcl"),$(F,e.idfc&&"true","idfc"),$(F,e.layout,"layout"),$(F,e.colstatus,"colstatus"),$(F,e.colwidth&&e.colwidth.toString(),"colwidth"),$(F,e.adoffsets,"adoffsets"),$(F,e.l3v&&e.l3v.toString(),"l3v"),$(F,e.wpoux&&e.wpoux.toString(),"wpoux"),$(F,e.interestCount&&`${e.interestCount}`,"interestCount"),$(F,e.providerId,"ProviderId"),$(F,e.gemId,"gemId"),$(F,e.topicId,"TopicId"),"viewslayout"===e.pageScenario&&$(F,e.start&&`${e.start}`,"$skip"),"freinterests"===e.pageScenario&&(e.start&&F.set(e.freV2Params?"interestSkip":"$skip",`${e.start}`),e.count&&F.set(e.freV2Params?"interestCount":"$top",`${e.count}`),$(F,e.InterestIds&&`${e.InterestIds}`,"InterestIds")),"providerfullpage"===e.pageScenario&&($(F,e.communityProfileId&&`${e.communityProfileId}`,"communityProfileId"),e.query&&F.set("query","newest")),"channelfeed"===e.pageScenario&&$(F,e.interestIds&&`${e.interestIds}`,"InterestIds"),"me"===e.pageScenario&&e.interestIds&&F.set("ids",`${e.interestIds}`),$(F,e.webUrl,"WebUrl"),$(F,"number"==typeof e.pageConfiguration&&e.pageConfiguration.toString(),"pgc");const W=function(){if(window?.deviceMemory)return window.deviceMemory;return window&&window.navigator&&window.navigator.deviceMemory}();W&&n()&&F.set("memory",W.toString()),$(F,e.forceDisableAds&&"1","edgenoads");(a.Rb.CurrentFlightSet.has("prg-forcenoads")||await(0,S.Il)())&&(F.set("edgenoads","1"),y.YT.addOrUpdateTmplProperty("edgenoads","1"));if((a.Rb.CurrentFlightSet.has("prg-forceredads")||await(0,S.Xm)())&&F.set("edgereduceads","1"),a.Rb.CurrentFlightSet?.has("tbingwebp")){(function(){const t=(0,h.$t)();if(!t)return!1;const e=t.toLowerCase(),n=e.match(/edg\/(\d+)/);if(n)return parseInt(n[1],10)>=79;const i=e.match(/edge\/(\d+)/);if(i)return parseInt(i[1],10)>=18;if(e.includes("opera")||e.includes("opr/")){const t=e.match(/(?:opera|opr)[\s/](\d+)/);return!t||parseInt(t[1],10)>=15}const r=e.match(/samsungbrowser\/(\d+)/);if(r)return parseInt(r[1],10)>=4;const o=e.match(/chrome\/(\d+)/);if(o)return parseInt(o[1],10)>=32;if(e.includes("android")){const t=e.match(/android (\d+)(?:\.(\d+))?/);if(t){const e=parseInt(t[1],10),n=parseInt(t[2]||"0",10);return e>4||4===e&&n>=2}}const s=e.match(/firefox\/(\d+)/);if(s)return parseInt(s[1],10)>=65;if(e.includes("iphone")||e.includes("ipad")){const t=e.match(/os (\d+)_(\d+)/);if(t)return parseInt(t[1],10)>=14}const a=e.match(/version\/(\d+).*safari/);if(a&&e.includes("safari")&&!e.includes("chrome")){const t=parseInt(a[1],10),n=e.match(/mac os x (\d+)[._](\d+)/);if(n){const e=parseInt(n[1],10);return t>=16||t>=14&&e>=11}return t>=16}return!1})()||(F.set("isWebPDisabled","1"),y.YT.addOrUpdateTmplProperty("isWebPDisabled","1"))}if(!a.Rb.CurrentFlightSet.has("prg-noreduce")){const t=await(0,S.Qn)();if(t&&A.has(t)){const e=A.get(t);F.set(e,"1"),y.YT.addOrUpdateTmplProperty(e,"1");const n=`prg-${e}`;a.Rb.CurrentFlights=a.Rb.CurrentFlights?`${a.Rb.CurrentFlights},${n}`:n}a.Rb.CurrentFlightSet.has("prg-reducedads")&&F.set("reducedadss1","1")}e.anaheimLayoutPromotion&&($(F,e.anaheimLayoutPromotion,"promotion"),y.YT.addOrUpdateTmplProperty("qpromotion",e.anaheimLayoutPromotion)),e.anaheimContentSelection&&($(F,e.anaheimContentSelection,"selection"),y.YT.addOrUpdateTmplProperty("qselection",e.anaheimContentSelection)),$(F,void 0!==e.backgroundImageIsSet&&e.backgroundImageIsSet.toString(),"backgroundImageIsSet"),void 0!==e.inEdgeFeatures&&($(F,e.inEdgeFeatures.toString(),"inEdgeFeatures"),y.YT.addOrUpdateTmplProperty("inEdgeFeatures",e.inEdgeFeatures?"1":"0")),$(F,void 0!==e.isAdb&&e.isAdb.toString(),"isAdb"),e.revertTimes&&($(F,e.revertTimes,"revertTimes"),y.YT.addOrUpdateTmplProperty("revertTimes",e.revertTimes)),void 0!==e.adminDisabled&&($(F,e.adminDisabled.toString(),"adminDisabled"),y.YT.addOrUpdateTmplProperty("adminDisabled",e.adminDisabled?"1":"0")),e.newProfFreTime&&($(F,e.newProfFreTime.toString(),"newProfFreTime"),y.YT.addOrUpdateTmplProperty("newProfFreTime",e.newProfFreTime.toString())),e.newDevFreTime&&($(F,e.newDevFreTime.toString(),"newDevFreTime"),y.YT.addOrUpdateTmplProperty("newDevFreTime",e.newDevFreTime.toString())),$(F,e.pageOcid,"pageOcid"),$(F,e.segment,"segment"),$(F,e.context,"Context"),$(F,e.scenario,"scenario"),$(F,e.assetId,"assetId"),$(F,e.calendarStartDate,"calendarStartDate"),$(F,e.calendarEndDate,"calendarEndDate"),$(F,e.calendarDate,"calendarDate"),(e.overlay||0===e.overlay)&&$(F,e.overlay.toString(),"overlay"),$(F,e.enableRuby&&e.enableRuby.toString(),"enableRuby"),$(F,e.isRubyEligible&&e.isRubyEligible.toString(),"isRubyEligible"),$(F,e.uxMode&&e.uxMode.toString(),"uxmode");const V=a.Rb.ClientSettings&&a.Rb.ClientSettings.queryparams?a.Rb.ClientSettings.queryparams:"",H=new s.m(V).get("canid");H&&F.set("triggerModules","promoxfeedupsell".concat(":",H)),e.noFREQsp||await async function(t,e){const{doNotTriggerFREInSession:n,feedName:i,enableFREOverlayMyFeed:r,sendFRESeenCount:s}=t;i===k&&y.YT.addOrUpdateTmplProperty("following-feed","1");if("edgeChromium"!==o.T3.AppType||"default"!==i||!r||!s)return;const a=await(0,S.YX)(n);p.vv.set("overlayQspSent",a),y.YT.addOrUpdateTmplProperty("ovrly-qsp",a),a&&(e.set("overlay",a),parseInt(a)<3&&y.YT.addOrUpdateTmplProperty("fre-seen-ct","1"))}(e,F);const z=c._3.getParamsWithItems(location.search);if(z){const t=z.find(t=>t.key===r.zH);t&&t.value&&F.set("installedWidgets",t.value)}const j=new URLSearchParams((0,h.iA)()).get("feedParams");if(j){j.split(",").forEach(t=>{if(t.includes("=")){const[e,n]=t.split("=");F.set(e.trim(),n.trim())}})}return $(F,e.dprValue&&e.dprValue.toString(),"dprValue"),F.toString()}function n(){return"channelmobile"!==o.T3.AppType}function I(){return n()&&"winWidgets"!==o.T3.AppType}t.requestInit=async function(t){t=t||{};const e={method:"GET"},n=await u.WR.getOneServiceFeedCallHeaders((0,g.wx)(),t.feedName,t.useXboxAccessToken);e.headers={...n,...t.additionalHeaders},t.credentialsOverride?e.credentials=t.credentialsOverride:e.credentials="include",t.enableWpoAdPlacements&&(e.headers["ads-referer"]=location.href,e.headers["taboola-sessionId"]=t.taboolaSessionId||"init");const i=o.T3.UserId;return o.T3.SendUserIdInHeader&&i&&(e.headers.MUID=i),e},t.buildRequestURLForOneService=async function(t){let n,r;if((t=t||{}).feedName===k)r=t.feedId?i.HW:i.$Z;else r=t.pageScenario;const o=`${i.ei}${r}`;return n=new s.m((0,h.iA)()).get(i.OJ)?new URL(o,i.ki):(0,d.J7)(o),n.search=await e(n.search,t,n.href),n.searchParams.sort(),n},t.buildServiceRequestURL=async function(t){let n;t=t||{};const{CurrentRequestTargetScope:r={},ConfigServiceBaseUrl:c}=o.T3,u=new s.m((0,h.iA)());let l=t.pageScenario??(t.shouldUseNewWpoEndpoint?i.w1:i.CD);"ntp"===t.pageScenario&&(l=i.w1);let p=t.requestPathOverride?`${t.requestPathOverride}${l}`:`${i.An}${l}`;p=function(t){return t&&t===`${i.An}${i.w1}`&&a.Rb&&a.Rb.CurrentFlightSet&&a.Rb.CurrentFlightSet.has(i.w)&&"edgeChromium"===o.T3.AppType?`${i.Oj}${i.w1}`:t}(p);const g=t.feedName&&"default"!=t.feedName;if(t.feedId||g)switch(t.feedName){case T:case"dynamicfilteredchannels":p=`${i.An}${i.Xd}`;break;case k:t.feedId?(p=`${i.An}${i.HW}`,y.YT.addOrUpdateTmplProperty("filtered-feed","1"),!t.nextPageUrl?.includes(i.$Z)&&t.nextPageUrl?.includes(t.feedId)||(t.nextPageUrl="")):(p=`${i.An}${i.$Z}`,t.nextPageUrl?.includes(i.HW)&&(t.nextPageUrl=""));break;case C:p=`${i.An}${i.rE}`;break;case"sports":p=`${i.An}${i.kH}`;break;case x:p=`${i.An}${x}`;break;default:p="work"===t.feedSource?`${i.An}${i.tU}`:`${i.An}${i.ku}`}t.isXFeed&&t.xFeedPageScenario&&(p=`${i.An}${t.xFeedPageScenario}`);const m=(0,f.S)();if(m&&["enabled","true"].includes(u.get(i.OJ)))"kids"===t.audienceMode||"kids"===r?.audienceMode||t.feedId?n=new URL(i.gi,i.ki):(p=`${i.ei}${l}`,n=new URL(p,i.ki));else if(m&&"enabled"===u.get(i.vc))n=new URL(p,c.origin);else if(function(t){return!t&&"edgeChromium"===o.T3.AppType&&o.T3.OneServiceOverride&&a.Rb&&a.Rb.CurrentFlightSet&&a.Rb.CurrentFlightSet.has(i.le)}(m))p=`${i.wg}${i.w1}`,n=new URL(p,o.T3.OneServiceOverride);else{const e=t.domainOverride?t.domainOverride:(0,d.pN)().origin;n=new URL(p,e)}return n.search=await e(n.search,t,n.href),n.searchParams.sort(),n}}(I||(I={}))},3371:function(t,e,n){var i;n.d(e,{Y:function(){return i}}),function(t){t[t.notStarted=1]="notStarted",t[t.loadDeferred=2]="loadDeferred",t[t.resolvedForLoad=3]="resolvedForLoad",t[t.loaded=4]="loaded",t[t.initialized=5]="initialized",t[t.renderDeferred=6]="renderDeferred",t[t.resolvedForRender=7]="resolvedForRender",t[t.rendered=8]="rendered",t[t.domComplete=10]="domComplete",t[t.visuallyReady=11]="visuallyReady",t[t.error=12]="error",t[t.startLoading=14]="startLoading",t[t.mediaContentReady=15]="mediaContentReady"}(i||(i={}))},3509:function(t,e,n){n.d(e,{F:function(){return v}});var i=n(65022),r=n(30817),o=n(83078),s=n(46140),a=n(40371),c=n(98216),u=n(11372),d=n(47149),l=n(31157),h=n(6092),f=n(12870),p=n(19548),g=n(97004),m=n(70177);function w(){const t=[];let e=document.body,n=0,i=!1;for(;e;){const r=Array.from(e.attributes).map(t=>`${t.name}="${t.value}"`).join("|");t.push(`[index:${n};inShadow:${i}]${e.nodeName};attrs:${r}`),e.children&&e.children.length?(n=e.children.length-1,e=e.children[n],i=!1):e.shadowRoot?.children&&e.shadowRoot?.children.length>0?(n=e.shadowRoot?.children.length-1,e=e.shadowRoot?.children[n],i=!0):e=null}return t.join(">")}function y(t){{const t=document.querySelector("html")?.style.getPropertyValue("--body-bg-color");if(t)return t}return t?"#242424":"#F7F7F7"}async function v(t,e,n,v,b,S,C){let k;o.M.startMark("WC.Render"),k=void 0===n||"boolean"==typeof n?{noPaint:!!n}:n;const T=t.configRef,x=(0,a.lKb)(T.experienceType),A=matchMedia("(prefers-color-scheme:dark)");if(window.isSSREnabled&&!window.isSSRCompleted){if(c.YT?.addOrUpdateTmplProperty("SSRIncomplete","1"),(0,r.ZF)().isSSRAborted="1","vp"===p._3.getQueryParameterByName("reqsrc",location.href)&&"1"!==p._3.getQueryParameterByName("ssrCrashVptest",location.href))return void document.write("SSR didn't complete successfully, CSR fallback is disabled for VP tests");if(c.YT?.sendAppErrorEvent({...i.X5D,message:"SSR didn't complete successfully, remove the existing design system provider element to avoid broken UI",pb:{...i.X5D.pb,lastElements:w()}}),window.isCSRFallback=!0,document.querySelector(e)?.remove(),window.disableCSRFallback)return Promise.resolve()}const $=document.querySelector(e)||document.createElement(e),I=b??A.matches;$.baseLayerLuminance=I?g.y.DarkMode:g.y.LightMode,$.direction="rtl"===f.Rb.MarketDir?l.O.rtl:l.O.ltr,$.setAttribute("fill-color",k?.fillColor??y(I));for(const t in k)Reflect.set($,t,Reflect.get(k,t));const P=window.isSSREnabled?(0,m.B1)("WholePageHydration",!0):void 0,R=(0,m.d1)($,P,v);if(void 0===b){const t=t=>{$.baseLayerLuminance=t.matches?g.y.DarkMode:g.y.LightMode,$.setAttribute("fill-color",k?.fillColor??y(t.matches))};A.addEventListener("change",t)}if(!$.isConnected){(S?document.querySelector(".peregrine-widgets")??document.body:document.body).appendChild($)}const M=new d.$({type:u.MJ.Module,name:T.experienceType,content:{}});let _=$.querySelector(x);return _||(_=document.createElement(x)),_.parentTelemetry=M,_.setAttribute("config-instance-src",T?.instanceSrc),_.setAttribute("instance-id",t.instanceId||""),_.setAttribute("data-t",M.getMetadataTag()),h.T3.IsUCBased&&(document.body.style.background="transparent",$.style.background="transparent",_&&_ instanceof HTMLElement&&(_.style.background="transparent")),C?.forEach(t=>{t(_)}),await(0,s.uC)(t),_.isConnected||$.appendChild(_),o.M.endMark("WC.Render"),R}},3762:function(t,e,n){function i(t){return new Promise(e=>setTimeout(e,t))}n.d(e,{jh:function(){return i},xu:function(){return r}});const r=async(t,e,n)=>{if(!e||isNaN(t))return;if(!t&&0!==t||t<0||t===1/0)return await e;const i=(t=>{let e,n=()=>{},i=()=>!1;const r=new Promise((r,o)=>{n=()=>{e&&(clearTimeout(e),e=null,o())},i=()=>null!==e,e=setTimeout(()=>{e=null,r()},t)});return{cancel:n,isActive:i,promise:r}})(t),r=await Promise.race([e,i.promise]);return i.isActive()?i.cancel():n&&n(),r}},3772:function(t,e,n){var i;n.d(e,{O:function(){return i}}),function(t){t.News_BreakingNews="News_BreakingNews",t.News_ForYouNews="News_ForYouNews"}(i||(i={}))},3774:function(t,e,n){n.d(e,{o:function(){return a}});var i=n(12870),r=n(27261),o=n(17720),s=n(18510);async function a(){const t=(0,r.ou)()?.includes("localhost")&&(0,r.iA)()?.includes("indicator=true"),e=i.Rb?.ClientSettings?.detection?.isMsft||i.Rb?.ClientSettings?.detection?.isCorpNet;if((0,r.iA)()?.includes("item=spalink")&&!(0,r.iA)()?.includes("reqsrc=vp")&&!(0,r.iA)()?.includes("noindicator")&&e||t){!function(){const t=console.error;if(!t.__withHistory&&t.toString().includes("[native code]")){const e=t,n=500;let i=!1;const r=function(...t){try{e(...t)}finally{const e=o.vv.get("__ErrorLogHistory__",()=>[]);e.push(t),e.length>n&&e.splice(0,e.length-n),i||(i=!0,requestAnimationFrame(()=>{i=!1,window.dispatchEvent(new CustomEvent("ErrorLogHistoryUpdated"))}))}};r.__withHistory=!0,console.error=r}}(),await(0,s.hL)();const{RenderModeIndicator:t}=await Promise.all([n.e("common-cscore"),n.e("web-components_render-mode-indicator_dist_index_js")]).then(n.bind(n,66229)),e=document.createElement("render-mode-indicator");document.body.appendChild(e)}}},3920:function(t,e,n){n.d(e,{Dy:function(){return u},HL:function(){return c},H_:function(){return s}});var i=n(17720);const r=()=>i.vv.get("__ssr_util__preload_bundles",()=>new Set),o=()=>i.vv.get("__ssr_util__pending_preload_bundles",()=>new Set),s=()=>{const t=(()=>{const t=r(),e=[...t];return t.clear(),e})();return t.length?`<script nonce="${window.NONCE_ID}">window.ssrLoadedBundles.publish(${JSON.stringify(t)});<\/script>`:""},a=new Map,c=(t,e)=>{if(a.has(t))throw new Error(`Bundle ${t} is already registered.`);a.set(t,e);const n=o();return n.has(t)&&(n.delete(t),e()),()=>(r().add(t),e())},u=t=>{const e=o(),n=t.map(async t=>{if(a.has(t))return a.get(t)();e.add(t)});return Promise.all(n)}},4520:function(t,e,n){n.d(e,{n:function(){return s}});var i=n(65022),r=n(93468),o=n(77246);const s=t=>{if(!(0,o.S)()||t)return;const e=window&&window.chrome&&window.chrome.runtime&&window.chrome.runtime.lastError||{},n=!1===t?"Failed to set preference.":e.message||"";n&&(0,r.vV)(i.vd4,"Failed to successfully execute window.chrome.ntpSettingsPrivate.setPref",n)}},4865:function(t,e,n){n.d(e,{j:function(){return i},p:function(){return s}});var i,r=n(49084),o=n(15098);!function(t){t.App="app",t.EdgeId="edgeid",t.Web="web"}(i||(i={}));const s=(0,o.L)(()=>(0,r.wQ)()||(0,r.FS)()?i.Web:(0,r.lp)()?i.EdgeId:i.App)},4891:function(t,e,n){n.d(e,{Tp:function(){return c},Ph:function(){return v},CY:function(){return A},vz:function(){return x},IT:function(){return w},h8:function(){return $},q0:function(){return q},A9:function(){return I},vq:function(){return z},Yw:function(){return y},vx:function(){return b},t3:function(){return G},Tv:function(){return C},mL:function(){return m},zg:function(){return E},JH:function(){return F},n5:function(){return N},mw:function(){return O},wu:function(){return V},v7:function(){return W},I$:function(){return D},bR:function(){return H},DX:function(){return T},jO:function(){return X},wM:function(){return k},EF:function(){return p},q9:function(){return g},jo:function(){return S}});var i=n(64281),r=n(2692);const o=(0,i.Gy)(r.w,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"rating",displayReviewCount:!1}]}]),s=(0,i.BA)(r.w,"gradient-mask",{name:"gradient-mask",setClickBeacon:!0,layout:{mode:"pixel",bottom:"0",width:"300",zIndex:4},children:[{name:"special-offer",isDrConfig:!0,layout:{mode:"block",display:"inline-block",position:"relative",marginBottom:"8",marginInlineStart:"16",marginInlineEnd:"16",width:"150",zIndex:5}},{name:"ad-title",setClickBeacon:!0}]}),a=(0,i.Gy)(r.w,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"free-shipping",color:"#036ac4",layout:{mode:"pixel",bottom:"265"}}]}]);var c,u=n(63456),d=n(64748),l=n(65022),h=n(2543),f=n(44449);!function(t){t.river="river",t.infopane="infopane",t.resriver="resriver",t.rivercms="river_cms",t.riverdb="riverdb",t.riverdbside="riverdbside",t.riverAmplify="river_amp",t.restoday="restoday",t.todaystripe="todaystripe",t.newsstripe="News-Stripe",t.entertainmentstripe="Entertainment-Stripe",t.sportsstripe="Sports-Stripe",t.lifestylestripe="Lifestyle-Stripe",t.rightRail="rightRail",t.rightRailAmplify="rr_amp",t.resinfopane="resinfopane",t.infopanetab="infopane-tab",t.infopanecms="infopane_cms",t.sliver="sliver",t.rightrail="rightrail",t.eoab="eoab",t.rectangle="rectangle",t.inarticle="inarticle",t.inarticledual="inarticledual",t.WatchInFeed="intranative",t.WatchInFeed2="intranative2",t.WatchOverlay="nativeoverlay",t.eoabmsx="eoabmsx",t.interstitialgallery="interstitialgallery",t.articleInline="ArticleInline",t.rivert="rivert",t.infopanet1="infopanet1",t.infopanet3="infopanet3",t.inarticlecarousel="inarticlecarousel",t.incontentcarousel="incontentcarousel",t.triver="triver",t.infopane1u="infopane1u",t.watchlistnative="watchlistnative",t.leftrail="leftrail"}(c||(c={}));const p=[c.rightrail,c.eoab,c.rectangle,c.inarticle,c.inarticledual,c.eoabmsx,c.interstitialgallery,c.WatchInFeed,c.WatchInFeed2,c.articleInline,c.rivert,c.inarticlecarousel,c.incontentcarousel,c.watchlistnative,c.leftrail,c.WatchOverlay],g=[c.river,c.riverdb,c.riverdbside],m=(c.riverdb,[c.river,c.resriver,c.rivercms,c.rightRail,c.rightrail]),w=[c.infopane,c.resinfopane,c.infopanetab,c.infopanecms],y=[c.restoday,c.todaystripe,c.newsstripe,c.entertainmentstripe,c.sportsstripe,c.lifestylestripe],v=[...m,...w],b=[...m,...y,c.riverdb,c.rightRail,c.rightrail,c.sliver,c.rectangle,c.eoab,c.inarticle,c.inarticlecarousel],S=[c.infopane,c.resinfopane,c.riverdb],C=[c.infopane,c.resinfopane],k=[c.infopanet1,c.infopanet3],T=[c.rivert,c.infopane1u,...k,c.WatchInFeed2],x=(c.infopane,c.resinfopane,c.river,c.resriver,c.inarticle,c.riverdb,{default:20,discScribble10:10,hotspotSingle10:10,saleHighlight15:15,gamification:5}),A=10,$=t=>!!(t&&t.items&&t.items[0]&&t.items[0].assets&&t.items[0].assets.transparentImage&&t.items[0].assets.transparentImage.url&&t.items[0].images&&t.items[0].images[0]&&t.items[0].images[0].ext&&t.items[0].images[0].ext.layoutColor),I=t=>((t,e)=>{const n=t?.items?.[0]?.assets?.transparentImage,i=n?.w,r=n?.h,o=n?.url;return!!(o&&null!=n&&r>0&&i>0)&&e(i,r)})(t,(t,e)=>t/e<1.4),P=t=>(0,u.A)(t,"items[0].assets.rating"),R=t=>(0,u.A)(t,"items[0].assets.specialOffer"),M=t=>(0,u.A)(t,"items[0].assets.freeShipping"),_=t=>(0,u.A)(t,"items[0].assets.discount"),E=t=>P(t)?o:R(t)?s:M(t)?a:void 0,F=t=>P(t)?"msn-combo-rating":R(t)?"msn-combo-special-offer":M(t)?"msn-combo-freeshipping":void 0,D=(t,e)=>{e&&(t.enableNativeAdWC=!0);const n=t?.items[0]?.assets;n?.rating?t.items[0].assets=(0,d.A)(n,["rating"]):n?.specialOffer?t.items[0].assets=(0,d.A)(n,["specialOffer"]):n?.discount&&n?.discount>=x.saleHighlight15?t.items[0].assets=(0,d.A)(n,["discount"]):n?.freeShipping&&(t.items[0].assets=(0,d.A)(n,["freeShipping"]))},O=t=>P(t)?"msn-combo-rating-nondr":R(t)?"msn-combo-special-offer-nondr":_(t)&&_(t)>=x.saleHighlight15?"msn-combo-sale-highlight-nondr":M(t)?"msn-combo-freeshipping-nondr":"msft-content-card",N=t=>P(t)?"msn-combo-rating-nondr-c":R(t)?"msn-combo-special-offer-nondr-c":_(t)&&_(t)>=x.saleHighlight15?"msn-combo-sale-highlight-nondr-c":M(t)?"msn-combo-freeshipping-nondr-c":"msft-content-card",L=t=>(0,u.A)(t,"items[0].assets.sold"),B=t=>(0,u.A)(t,"items[0].assets.returnPolicy"),U=t=>(0,u.A)(t,"items[0].assets.condition"),W=t=>L(t)?"msn-combo-sold-nondr":B(t)?"msn-combo-return-policy-nondr":U(t)?"msn-combo-condition-nondr":"msft-content-card",V=t=>L(t)?"msn-combo-sold-nondr-c":B(t)?"msn-combo-return-policy-nondr-c":U(t)?"msn-combo-condition-nondr-c":"msft-content-card",H=(t,e)=>{e&&(t.enableNativeAdWC=!0);const n=t?.items[0]?.assets;n?.sold?t.items[0].assets=(0,d.A)(n,["sold"]):n?.returnPolicy?t.items[0].assets=(0,d.A)(n,["returnPolicy"]):n?.condition&&(t.items[0].assets=(0,d.A)(n,["condition"]))},z=(0,f.sx)(l._0l,"modifyImageUrlForResponsiveImageSizingTemplate")((t,e)=>{const n=t?.items?.[0],i=n.assets?.price;if(t.template.templateType="msft-content-card",n&&!i){const i=Q(parseFloat(n.originalImageHeight),parseFloat(n.originalImageWidth),n.imageUrl,t.template.responsiveImageSizingTemplateConfigs);i&&i.imageUrl!==n.imageUrl&&J(i?.responsiveImageSizingTemplateConfig?.maxHeight,(0,h.NT)(t.items?.[0]?.title))&&(t.enableResponsiveImageSize=!0,t.template.templateType="msn-responsive-image-sizing",e||(t.responsiveImageSizingTemplateConfig=i.responsiveImageSizingTemplateConfig,t.items[0].imageUrl=i.imageUrl))}}),j=(0,f.sx)(l._0l,"isDescriptionShowingHelper")((t,e)=>{const n=t.items?.[0]?.description,i=t.items?.[0]?.title,r=n?.length>1&&i!=n,o=c[t.region];return S.includes(o)?r:r&&(0,h.NT)(i)<=e}),q=(0,f.sx)(l._0l,"isDescriptionShowing")((t,e)=>j(t,e)?"msn-responsive-description":"msft-content-card"),G=(0,f.sx)(l._0l,"pickRandomTemplateWithDensity")((t,e,n,i)=>{if(Math.random()>i)t.enablePattern=!1,t.template.templateType=n;else{const n=e.length,i=Math.floor(Math.random()*n);t.template.templateType=e[i],t.enablePattern=!0}}),J=(0,f.sx)(l._0l,"isTitleLineMeetRequire")((t,e)=>!(!t||!e)&&(225===t&&e<=1||200===t&&e<=2)),Q=(0,f.sx)(l._0l,"modifyImageUrl")((t,e,n,i)=>{if(!(t&&e&&n&&n.startsWith("https://www.bing.com/th")))return{imageUrl:n};const r=K(n),o=n.split("?")[0];if(!i||0===i.length)return{imageUrl:n};for(let n=0;n<i.length;n++){const s=i[n],a=e/t;if(a>=s.lowerBound&&a<=s.placementRatio){return{imageUrl:`${o}?id=${r.id}${r.pid?`&pid=${r.pid}`:""}&w=${s.maxWidth}`,responsiveImageSizingTemplateConfig:s}}if(a>s.placementRatio&&a<=s.upperBound){return{imageUrl:`${o}?id=${r.id}${r.pid?`&pid=${r.pid}`:""}&h=${s.maxHeight}`,responsiveImageSizingTemplateConfig:s}}}return{imageUrl:n}}),K=(0,f.sx)(l._0l,"parseImageUrl")(t=>{if(!t)return;const e=new URL(t),n=new URLSearchParams(e.searchParams),i={};return n.forEach((t,e)=>{["id","pid"].includes(e)&&(i[e]=t)}),i}),X=(0,f.sx)(l._0l,"switchToAIImage")(t=>{t&&t.items&&t.items[0]&&t.items[0].assets&&t.items[0].assets.transparentImage&&t.items[0].assets.transparentImage.url&&t.items[0].imageUrl&&(t.items[0].imageUrl=t.items[0].assets.transparentImage.url)})},4948:function(t,e,n){n.d(e,{Du:function(){return p},Fg:function(){return c},Jx:function(){return g},Mg:function(){return m},N9:function(){return i},NB:function(){return f},Tp:function(){return a},VV:function(){return y},ZW:function(){return o},Zu:function(){return s},_U:function(){return l},eo:function(){return w},fy:function(){return h},xK:function(){return d},yH:function(){return u}});var i,r=n(13312);!function(t){t[t.ALL=3]="ALL",t[t.VP=1]="VP",t[t.TTVR=2]="TTVR"}(i||(i={}));const o=36,s=146,a=160,c=304,u=344,d=["shortsCarousel","entertainmentTakeover"],l=.08,h="row",f="column";var p;!function(t){t.FeedResponseReceived="FeedResponseReceived",t.FeedUpdated="FeedUpdated",t.FeedProcessed="FeedProcessed",t.FeedResizeStart="FeedResizeStart",t.FeedUpdateCardsPreMap="FeedUpdateCardsPreMap",t.FeedUpdateCards="FeedUpdateCards",t.FeedPreviewReceived="FeedPreviewReceived",t.FeedUpdateSection="FeedUpdateSection",t.FeedCardMappingError="FeedCardMappingError",t.FeedProcessorReady="FeedProcessorReady",t.FeedSectionUpdated="FeedSectionUpdated",t.FeedScrollCardsReceived="FeedScrollCardsReceived"}(p||(p={}));const g={[r._4.C1]:1,[r._4.C2]:2,[r._4.C3]:3,[r._4.C4]:4,[r._4.C5]:5,[r._4.C6]:6},m={[r._4.C1]:496,[r._4.C2]:756,[r._4.C3]:408,[r._4.C4]:408,[r._4.C5]:408,[r._4.C6]:408},w=344,y={CasualGamesCarousel:440,TopicFeed:400}},5044:function(t,e,n){n.d(e,{En:function(){return d},K7:function(){return g},Xo:function(){return u},ZE:function(){return c},bl:function(){return p},cc:function(){return f},g2:function(){return h},wY:function(){return l}});var i=n(97852),r=n(98216),o=n(11372),s=n(6092),a=n(67387);function c(t,e){if(t){const n={type:o.MJ.Module,name:e,content:{}};return t.addOrUpdateChild(n)}return null}function u(t){switch(t){case"article":return o.b5.Article;case"video":return o.b5.Video;case"slideshow":return o.b5.Gallery;case"GemCard":return o.b5.Gem;default:return}}function d(){if(!r.YT)return;const t=r.YT.getPageMetadata?.();return t&&t.contract&&t.contract.page?t.contract.page.ocid:void 0}function l(t){if("windowsShell"===s.T3.AppType||"windowsShellV2"===s.T3.AppType)return h(t);const e=d(),n=t.toLowerCase();if(!e||-1!=n.indexOf("?ocid=")||-1!=n.indexOf("&ocid="))return t;const i=-1==t.indexOf("?")?"?":"&";return`${t}${i}ocid=${encodeURIComponent(e)}`}function h(t){if(!t)return t;try{const e=new URL(t),n=e.searchParams;return d()&&n.set("ocid",d()),n.set("cvid",r.YT.getRequestId()),e.toString()}catch{return t}}function f(t){try{const e=new URL(t),n=d();n&&e.searchParams.set("ocid",n);const i=function(){if(r.YT)return r.YT.getRequestId?.()}();i&&e.searchParams.set("cvid",i);const o=s.T3?.UxMode;o&&e.searchParams.set(r.GI,o);const a=r.YT.getCurrentEventIndex()+1;return a&&e.searchParams.set("ei",a.toString()),e.toString()}catch(e){return t}}function p(t){if(!t)return null;const e={...t};return e[a.aS.entAuthorization]&&(e[a.aS.entAuthorization]="*****"),e[a.aS.rpsToken]&&(e[a.aS.rpsToken]="*****"),e[a.aS.authorization]&&(e[a.aS.authorization]="*****"),e}function g(){const t=d();return!!t&&i.py.includes(t.toLowerCase())}},5419:function(t,e,n){n.d(e,{t:function(){return r}});var i=n(12870);function r(){return Boolean(i.Rb.ClientSettings?.detection?.isMsft||i.Rb.ClientSettings?.detection?.isCorpNet)&&!location.search.includes("msftuser=false")}},5518:function(t,e,n){n.d(e,{Y_:function(){return r}});let i=setTimeout;async function r(t){return new Promise((e,n)=>{i(e,t)})}},5751:function(t,e,n){n.d(e,{F7:function(){return u},gb:function(){return d}});var i=n(7965),r=n(41820),o=n(98793),s=n(17720),a=n(98216);const c="__storedRecommendedSitesState__";async function u(t){let e=s.vv.get(c);if(e)return e;if(e=t.showDefault3Rows?"threerows":"tworows",t.enableRecommendedSitesSelection){const t=await async function(){if(!await o.Q.isApiAvailableToUse())return null;const t=await o.Q.getPreferenceSetting(r.K5.recommended_sites);if(t&&void 0!==t.value)return i.HN[t.value];return null}();t&&(e=t)}return"onerow"===e&&(e="tworows"),a.YT.addOrUpdateTmplProperty("RecommendedSites",e.toString()),s.vv.set(c,e),e}async function d(t){if(!await o.Q.isApiAvailableToUse())return;const e={setting:r.K5.recommended_sites,source:"ntp",timestamp:(new Date).getTime(),value:i.bk[t]};o.Q.savePreferenceSetting(r.K5.recommended_sites,e)}},5831:function(t,e,n){n.d(e,{GO:function(){return a}});var i=n(77246),r=n(17720);const o="__PageExperimentInstance__";function s(t){r.vv.set(o,t)}function a(t){if(!r.vv.has(o)&&(0,i.S)()){s(c(document.head.dataset.info||window.document.getElementsByClassName("peregrine-widget-settings")[0]?.dataset?.info||""))}const e=r.vv.get(o);return e&&e.has(t)}function c(t){const e=(t||"").replace(/(^f:|;.*$)/g,"").split(",");return new Set(e)}},6092:function(t,e,n){n.d(e,{DF:function(){return D},T3:function(){return N},rA:function(){return O},Lo:function(){return L}});var i,r,o,s=n(78629),a=n(33918),c=n(65022),u=n(30817),d=n(18258);!function(t){t.WWW="www",t.MicrosoftStart="microsoftstart",t.INT="int",t.INT1="int1",t.MicrosoftStartINT="microsoftstart-int",t.MicrosoftStartINT1="microsoftstart-int1"}(i||(i={})),function(t){t.MSN="msn",t.MicrosoftStart="microsoftstart"}(r||(r={})),function(t){t.COM="com",t.CN="cn"}(o||(o={}));var l,h=n(15589),f=n(67387);!function(t){t.getHostPageFromUrl=function(t){if(!t)return;const e=new URL(t),n=e.hostname,i=e.pathname.split("/"),r=(n.match(/[^.]+\.[^.\d]+$/)||{})[0]||"";if(i.length<=f.Dg)return{originalUrl:t,categoryKey:null,verticalKey:null,hostName:n,topDomain:r};const o=5===i[1].length&&2===i[1].split("-").length?1:0,s={originalUrl:t,categoryKey:i[2+o],verticalKey:i[1+o],hostName:n,topDomain:r};return i.length>=f.Dg&&(s.subcategoryKey=i[3+o]),s}}(l||(l={}));var p=n(77246),g=n(27261),m=n(17720),w=n(16091),y=n(63418),v=n(57865),b=n(18605),S=n(28828);var C,k=n(28024),T=n(38796);!function(t){t.prod="prod",t.prodssr="prod-ssr",t.staging="staging",t.int1="int1",t.int="int",t.intpr="intpr",t.intperf="intperf"}(C||(C={}));var x=n(7813),A=n(19548),$=n(16507),I=n(49084),P=n(48608),R=n(12870);var M=n(41667),_=n(91494),E=n(11141);const F="__AppEnvironmentInstance__";class D{get ShouldUseFdheadQsp(){return this.shouldUseFdheadQsp}set ShouldUseFdheadQsp(t){this.shouldUseFdheadQsp=t}get DisableInMemoryCache(){return!!this.disableInMemoryCache}set DisableInMemoryCache(t){this.disableInMemoryCache=t}get CanvasTheme(){return this.canvasTheme}set CanvasTheme(t){this.canvasTheme=t}get OneServiceContentMarketQspKey(){return this.oneServiceContentMarketQspKey}get Ecasession(){return void 0===this.ecasession&&(this.ecasession=(0,y.Ri)("ecasession")||"init"),this.ecasession}get BrowserOptOut(){return void 0===this.browserOptOut&&(this.browserOptOut="1"===(0,y.Ri)("TOptOut")),this.browserOptOut}get MachineId(){return this.machineId}set MachineId(t){this.machineId=t}get isMobile(){const t=R.Rb?.ClientSettings?.ocid||"",e=R.Rb?.ClientSettings?.deviceFormFactor||"";return t.startsWith("msnaroverlay")||"phone"===e}get isMiniProgram(){const t=R.Rb.ClientSettings||{ocid:"",deviceFormFactor:""},e=(0,p.S)()?"weatherminiprogram"===t.ocid||(navigator?.userAgent||"").indexOf("miniProgram")>-1:"weatherminiprogram"===t.ocid;return"phone"===t.deviceFormFactor&&e}get isOverlayFrame(){return(R.Rb?.ClientSettings?.ocid||"").startsWith("msnaroverlay")}get ActivityId(){return this.activityId}set ActivityId(t){this.activityId=t,R.Rb.ClientSettings={...R.Rb.ClientSettings,aid:t}}get FrontDoorMuid(){return this.frontDoorMuid}get EnvironmentConfigUrl(){const t=new URL("",this.environmentConfigUrl);"dev"===new URLSearchParams((0,g.iA)()).get("env")&&t.searchParams.set("env.config","dev");const e=new URLSearchParams((0,g.iA)()).get("env.config");return e&&t.searchParams.set("env.config",e),t}get ContentServiceUrlBase(){const t=new URL("",this.contentServiceUrlBase);"dev"===new URLSearchParams((0,g.iA)()).get("env")&&t.searchParams.set("env.content","dev");const e=new URLSearchParams((0,g.iA)()).get("env.content");return e&&t.searchParams.set("env.content",e),t}get CurrentRequestTargetScope(){return this.currentRequestTargetScope}set CurrentRequestTargetScope(t){this.currentRequestTargetScope=t}get LocaleContentMarket(){return(0,k.YP)(R.Rb.ClientSettings&&R.Rb.ClientSettings.locale)||this.currentRequestTargetScope?.locale?.content||this.currentRequestTargetScope?.locale}get LocaleDisplayLanguage(){return(0,k.YP)(R.Rb.ClientSettings&&R.Rb.ClientSettings.locale,!0)||this.LocaleContentMarket}get LocaleContentMarketString(){const t=this.LocaleContentMarket;return t&&t.language&&t.market?(0,k.Ah)(t):""}get LocaleDisplayLanguageString(){const t=this.LocaleDisplayLanguage;return t&&t.language&&t.market?(0,k.Ah)(t):""}get SourceUrl(){let t=N.HostPage.originalUrl;const e=N.CurrentRequestTargetScope.pageType,n=N.HostPage.verticalKey;if("localhost.msn.com"===N.HostPage.hostName&&"ntp"===e)return t="https://ntp.msn.com/edge/ntp",t;if(e&&n){const i=e.toLowerCase();(i.indexOf("dhp")>-1||i.indexOf("ntp")>-1)&&(t="https://"+N.HostPage.hostName+"/"+n+"/"+e)}return t}get CurrentMarket(){return this.currentMarket}set CurrentMarket(t){this.currentMarket=t}get EnableFiveColLayout(){return this.enableFiveColLayout}set EnableFiveColLayout(t){this.enableFiveColLayout=t}get Environment(){return this.environment}set Environment(t){this.environment=t}get StaticDomain(){return this.staticDomain}get HostPage(){return this.hostPage}set HostPage(t){this.hostPage=t}get AppType(){return this.appType}get MiniAppId(){return this.miniAppId}get AuthCookieName(){return this.authCookieName}set AuthCookieName(t){this.authCookieName=t}get UseAuthFetch(){return this.useAuthFetch}set UseAuthFetch(t){this.useAuthFetch=t}get AccountInfoPromise(){return this.accountInfoPromise}set AccountInfoPromise(t){this.accountInfoPromise=t}get ResolvedAccountInfo(){return this.resolvedAccountInfo}set ResolvedAccountInfo(t){this.resolvedAccountInfo=t}get BuildVersion(){return this.buildVersion||""}get ClarityEnabled(){return this.clarityEnabled}set ClarityEnabled(t){this.clarityEnabled=t}get IsWinAADUser(){return this.isWinAADUser}set IsWinAADUser(t){this.isWinAADUser=t}get RootTelemetryId(){return this.rootTelemetryId}set RootTelemetryId(t){this.rootTelemetryId=t}get TrackInfo(){return this.trackInfo}set TrackInfo(t){this.trackInfo=t}get UserId(){return this.getUserMuid()||this.userId}set UserId(t){this.userId=t}get OneServiceApiKey(){return this.oneServiceApiKey}set OneServiceApiKey(t){this.oneServiceApiKey=t}get OneServiceOverride(){return this.oneServiceOverride}set OneServiceOverride(t){this.oneServiceOverride=t}get EnvInstanceOverride(){return this.envInstanceOverride}get IsDebug(){return this.isDebug}get NavTargetHostName(){return this.navTargetHost}get UseCachedApp(){return(0,p.S)()&&!!window.__useCachedApp}get NavTargetUrlWithLocale(){return`https://${this.NavTargetHostName}/${this.CurrentMarket}`}get IsChinaCompliance(){return this.isChinaCompliance}get IsCaliforniaRegion(){return this.isCaliforniaRegion}get AssetsUrl(){return this.staticAssetsUrl}set AssetsUrl(t){this.staticAssetsUrl=t}get StaticsUrl(){return this.staticsUrl}get StaticsUrlWithBuild(){return this.staticsUrlWithBuild}get topDomain(){return this.isChinaCompliance?o.CN:o.COM}get OptOutOfPersonalization(){return this.optOutOfPersonalization}set OptOutOfPersonalization(t){this.optOutOfPersonalization=t}get OptOutOfModelTraining(){return this.optOutOfModelTraining}set OptOutOfModelTraining(t){this.optOutOfModelTraining=t}get isGccModUser(){if((0,I.lp)()){const t=(0,P.A)();Promise.resolve(t===s.rK.GCC_MODERATE)}if(this.AccountInfoPromise)return this.AccountInfoPromise.then(t=>t?.region_scope===s.rK.GCC_MODERATE)}get unsupportedEnterpriseCloud(){if((0,I.lp)()){const t=(0,P.A)();Promise.resolve(!(t===s.rK.GLOBAL))}if(this.AccountInfoPromise)return this.AccountInfoPromise.then(t=>!(t?.region_scope===s.rK.GLOBAL))}get WidgetAttributes(){return this.widgetAttributes}set WidgetAttributes(t){this.widgetAttributes=t}get ServiceUrlBase(){const t=new URL("",this.serviceUrlBase);"dev"===new URLSearchParams((0,g.iA)()).get("env")&&t.searchParams.set("env.service","dev");const e=new URLSearchParams((0,g.iA)()).get("env.service");return e&&t.searchParams.set("env.service",e),t}get FeedServiceUrlBase(){if(!this.feedServiceUrlBase)return null;const t=new URL("",this.feedServiceUrlBase);"dev"===new URLSearchParams((0,g.iA)()).get("env")&&t.searchParams.set("env.service","dev");const e=new URLSearchParams((0,g.iA)()).get("env.service");return e&&t.searchParams.set("env.service",e),t}get EnterpriseServiceUrlBase(){if(!this.enterpriseServiceDomainUrl)return;const t=new URL("",this.enterpriseServiceDomainUrl);"dev"===new URLSearchParams((0,g.iA)()).get("env")&&t.searchParams.set("env.service","dev");const e=new URLSearchParams((0,g.iA)()).get("env.service");return e&&t.searchParams.set("env.service",e),t}get isAadAccountUser(){return this.CurrentRequestTargetScope&&"enterprise"===this.CurrentRequestTargetScope.audienceMode&&this.ResolvedAccountInfo&&this.ResolvedAccountInfo.account_type&&"AAD"===this.ResolvedAccountInfo.account_type}get IsFrePage(){return this.isFrePage}get DisableCachingConfigs(){return this.disableCachingConfigs}get EnableConfigService(){const t=A._3.getQueryParameterByName("enableConfigService",(0,g.iA)());return t?"true"===t.toLocaleLowerCase():this.enableConfigService}get EnableCMSPPEConfigs(){return R.Rb&&R.Rb.EnableCMSPPEConfigs}get IsMultiConfigRetrievalEnabled(){return this.isMultiConfigRetrievalEnabled}get SendFeedCallActivityIdInHeader(){return this.sendFeedCallActivityIdInHeader}get SendUserIdInHeader(){return this.sendUserIdInHeader}set SendUserIdInHeader(t){this.sendUserIdInHeader=t}get ConfigServiceBaseUrl(){return this.configServiceBaseUrl}get CrsRetryBaseUrl(){return this.crsRetryBaseUrl}get FeatureFlags(){return this.featureFlags}get HostHeaderOverride(){return this.hostHeaderOverride}get ConfigRootUrl(){if(!this.configRootUrl)return null;const t=new URL("",this.configRootUrl);"dev"===new URLSearchParams((0,g.iA)()).get("env")&&t.searchParams.set("env.config","dev");const e=new URLSearchParams((0,g.iA)()).get("env.config");return e&&t.searchParams.set("env.config",e),t}get CacheBustingIdentifier(){return this.cacheBustingIdentifier}get IsGitConfigs(){return this.isGitConfigs}get CountryCode(){return this.countryCode}set CountryCode(t){this.countryCode=t}get ActivityIdLowerCaseNoHypens(){return(R.Rb&&R.Rb.ClientSettings&&R.Rb.ClientSettings.aid||"").toLowerCase()}get Latitude(){return this.latitude}get Longitude(){return this.longitude}get ConfigOrigins(){return this.configOrigins}get CrsVersion(){return this.crsVersion}get CrsPath(){return this.crsPath}get CrsDisableServerCache(){return this.crsDisableServerCache}set CrsDisableServerCache(t){this.crsDisableServerCache=t}get LanguageRegionMismatch(){return this.findLanguageRegionMismatch()?"marketmismatch":""}get isWindowsDashboard(){return"windowsNewsPlus"===N.AppType||"winWidgets"===N.AppType}get LanguageRegionMismatchExplicit(){return this.findLanguageRegionMismatchExplicit()?"marketmismatch":""}get MarketRequestInputLanguage(){return this.marketRequestInputLanguage}get MarketRequestInputRegion(){return this.marketRequestInputRegion}get MarketRequestInputGeoCountry(){return this.marketRequestInputGeoCountry}get MarketDetectionType(){return this.marketDetectionType}get TelemetryInitOptions(){return this.telemetryInitOptions}get BatchedEvents(){const t=R.Rb?.CurrentFlightSet||new Set("");return t.has("telbatloadtime")?["LoadTime","LoadTimeDiag"]:t.has("telbaterrors")?["AppError"]:t.has("telbatdiag")?["AppError","ClientLog","LoadTime","LoadTimeDiag","TraceInfo"]:t.has("telbatmost")?["AppError","ClientLog","LoadTime","LoadTimeDiag","TraceInfo","ContentView"]:t.has("telbatcontentvw")?["ContentView"]:t.has("telbatlogs")?["AppError","ClientLog","TraceInfo"]:void 0}get ConfigStaticFallbackBaseUrl(){return`${this.IsChinaCompliance?a.Kb:a.ZW}/periconfigs/`}findLanguageRegionMismatch(){if(R.Rb.ClientSettings&&"true"===R.Rb.ClientSettings.static_page)return!1;const t=R.Rb.ClientSettings&&R.Rb.ClientSettings?.market&&R.Rb.ClientSettings?.market?.detection,e=R.Rb.ClientSettings&&R.Rb.ClientSettings?.market&&R.Rb.ClientSettings?.market?.requestInput,n=(0,k.YP)(R.Rb.ClientSettings&&R.Rb.ClientSettings?.locale&&R.Rb.ClientSettings?.locale?.content),i=t&&t?.recommendLanguageCoachmark;if(t&&("implicitExisting"===t.type||"implicitNew"===t.type||"cm"===t.type||"implicitReset"===t.type)&&e){if(n){if(e.language.toLowerCase()!==n.language.toLowerCase()||"true"===i)return this.marketMismatchDetails.type="language",this.marketMismatchDetails.mismatchItem1=e.language.toLowerCase(),this.marketMismatchDetails.mismatchItem2=n.language.toLowerCase(),!0;if(e.region&&e.region.toLowerCase()!==n.market.toLowerCase())return this.marketMismatchDetails.type="region",this.marketMismatchDetails.mismatchItem1=e.region.toLowerCase(),this.marketMismatchDetails.mismatchItem2=n.market.toLowerCase(),!0}if("implicitExisting"===t.type&&t.geo_country&&""!==t.geo_country&&e.geo_country.toLowerCase()!==t.geo_country.toLowerCase())return this.marketMismatchDetails.type="geo_country",this.marketMismatchDetails.mismatchItem1=e.geo_country.toLowerCase(),this.marketMismatchDetails.mismatchItem2=t.geo_country.toLowerCase(),!0}return!1}get MarketMismatchDetail(){return this.findLanguageRegionMismatch()||this.findLanguageRegionMismatchExplicit()?this.marketMismatchDetails:null}findLanguageRegionMismatchExplicit(){if(R.Rb.ClientSettings&&"true"===R.Rb.ClientSettings.static_page)return!1;const t=R.Rb.ClientSettings&&R.Rb.ClientSettings?.market&&R.Rb.ClientSettings?.market?.detection,e=R.Rb.ClientSettings&&R.Rb.ClientSettings?.market&&R.Rb.ClientSettings?.market?.requestInput,n=(0,k.YP)(R.Rb.ClientSettings&&R.Rb.ClientSettings?.locale&&R.Rb.ClientSettings?.locale?.content);if(t&&"compliance"!==t.type&&"url"!==t.type&&e){if(n){if(e.language.toLowerCase()!==n.language.toLowerCase())return this.marketMismatchDetails.type="language",this.marketMismatchDetails.mismatchItem1=e.language.toLowerCase(),this.marketMismatchDetails.mismatchItem2=n.language.toLowerCase(),!0;if(e.region&&e.region.toLowerCase()!==n.market.toLowerCase())return this.marketMismatchDetails.type="region",this.marketMismatchDetails.mismatchItem1=e.region.toLowerCase(),this.marketMismatchDetails.mismatchItem2=n.market.toLowerCase(),!0}if(e.geo_country.toLowerCase()!==t.geo_country.toLowerCase())return this.marketMismatchDetails.type="geo_country",this.marketMismatchDetails.mismatchItem1=e.geo_country.toLowerCase(),this.marketMismatchDetails.mismatchItem2=t.geo_country.toLowerCase(),!0}return!1}setConfigOrigin(){const t={feature:d.t.Production,loc:d.t.Production};return this.IsGitConfigs&&!this.EnableConfigService||(t.feature=d.t.Production,t.loc=d.t.Production),t}constructor(t,e,n,i,r){this.assetsGlobalUrl="https://assets.msn.com",this.assetsCNUrl="https://assets.msn.cn",this.heroOcids=["widgetonlockscreen","widgetonlockscreenwin10","calendarontaskbar","winp2fpwidgetboard","wind_spot_2","webwidgetonboard","webwidgetonlockscreen","wind_spot_desktop"],this.optOutOfPersonalization=!1,this.optOutOfModelTraining=!1,this.marketMismatchDetails={type:"",mismatchItem1:"",mismatchItem2:""},this.initializeAppEnvironment(t,e,n,i,r)}static getInstance(t=null,e=null,n=null,i=null,r=null){return m.vv.get(F,()=>new D(t,e,n,i,r))}static resetInstance(t=null,e=null,n=null,i=null,r=null){const o=new D(t,e,n,i,r);return m.vv.set(F,o),N=(0,w.G)(D),N}get IsHeroNTP(){return this.isHeroNTP}set IsHeroNTP(t){this.isHeroNTP=t}get IsUCBased(){return this.isUCBased}set IsUCBased(t){this.isUCBased=t}get IsUCPeekMode(){return this.isUCPeekMode}set IsUCPeekMode(t){this.isUCPeekMode=t}get IsHalfViewportUC(){return this.isHalfViewportUC}set IsHalfViewportUC(t){this.isHalfViewportUC=t}get UxMode(){return this.currentRequestTargetScope?.modes?.uxMode}initializeAppEnvironment(t,e,n,i,r){const o=(0,g.VQ)(),s=(0,p.S)()?(0,g.KP)(f.MK):null,u=(0,g.$N)(),d=(0,g.IU)(),m=(0,g.iA)(),w=(0,E.M8)(o);let y=null;const v=R.Rb&&R.Rb.ClientSettings,b=A._3.getParamsWithItems(m,!0);let S=!1;if(v){this.isCaliforniaRegion=v.geo_subdivision&&"california"==v.geo_subdivision.toLocaleLowerCase(),this.isChinaCompliance=function(t,e){return!!(t.hostname.toLowerCase().endsWith(".cn")||e.isChinaCompliance||e.useCnDomain||t.search.match(/isChinaBuild=true/i)||t.search.match(/item=revip:cn/))}({hostname:o,search:m},v),(0,T.jB)(this.isChinaCompliance),this.activityId=this.tryReformatGuid(v.aid),this.currentMarket=this.LocaleContentMarketString||v.apps_locale,this.countryCode=v.geo_country,this.frontDoorMuid=v.fd_muid,this.latitude=v.geo_lat,this.longitude=v.geo_long,this.configRootUrl=v.configRootUrl?new URL("",v.configRootUrl):null,y=(0,h.F)(v.pcsInfo&&v.pcsInfo.env||"prod"),this.setAccountInfoPromise(),this.appType=v.apptype||"",this.miniAppId=v.miniAppId||"",this.authCookieName=this.getAuthCookieName(),this.useAuthFetch=!1;const{featureFlags:t}=v;this.featureFlags=t,S=t&&"true"===t.disableCachingConfigs,this.enableConfigService=!t||!t.enableConfigService||"true"===t.enableConfigService,this.sendFeedCallActivityIdInHeader=(!t||!t.disableActivityIdInHeader||"true"!==t.disableActivityIdInHeader)&&"hub"===this.appType,this.cacheBustingIdentifier=v.cbid;const{bundleInfo:e,pcsInfo:n}=v||{};this.isDebug=(A._3.getQueryParameterByName("debug",u)||"").toLowerCase()in{1:1,true:1}||(A._3.getQueryParameterByName("item",u)||"").toLowerCase().indexOf("/debug")>0||w;const i=this.getRunTimePropertyBag(e,n);(0,c.RWs)(i),(0,_.RX)(i),this.configIndexDocId=v.configIndexDocId,this.widgetAttributes=v.widgetAttributes}const C=(0,h.F)(A._3.getQueryParameterByName("env",u));this.environment=C||y||h.O.prod,this.envInstanceOverride=A._3.getQueryParameterByName("instance",u);const k=v&&v.servicesEndpoints,$=k&&k.feedService&&k.feedService.domain||d;this.serviceDomainUrl=n||$,this.oneServiceOverride=r,this.staticDomain=new URL($).host,this.staticAssetsUrl=(0,E.VJ)(k?.staticConfig?.domain,this.isChinaCompliance),this.staticsUrl=(0,E.JO)(w,this.staticAssetsUrl,d);const I=b.find(t=>"pr"===t.key)?.value,P=I&&`pr-${I}`||"latest";this.staticsUrlWithBuild=this.staticsUrl+P+"/",this.enterpriseServiceDomainUrl=k&&k.enterpriseFeedService&&k.enterpriseFeedService.domain;const{crs:M={}}=k||{},{v:F,domain:D,path:O}=M;this.crsVersion=F,this.crsDomain=D,this.crsPath=O||a.iT;const{requestInput:N={},detection:L={}}=v&&v.market||{},{language:B="",region:U="",geo_country:W=""}=N||{},{type:V=""}=L||{};this.marketRequestInputLanguage=B,this.marketRequestInputRegion=U,this.marketRequestInputGeoCountry=W,this.marketDetectionType=V,this.serviceUrlBase=t||s&&s.getAttribute(f.Rs)&&new URL("",s.getAttribute(f.Rs))||new URL("/service/",this.serviceDomainUrl),this.feedServiceUrlBase=this.serviceDomainUrl&&new URL("/service/",this.serviceDomainUrl)||void 0,this.hostPage=l.getHostPageFromUrl(u),this.isFrePage="1"===A._3.getQueryParameterByName("fre",u),this.userId=this.getUserMuid(),this.rootTelemetryId=s?Number(s.getAttribute(f.Tp)):0;const H=s&&s.getAttribute(f.MQ),z=s&&s.getAttribute(f.Jp);this.trackInfo={sitePage:{page_product:H,page_type:z}},this.setNavTargetHostName(),this.setTargetScope();const j=this.currentRequestTargetScope&&this.currentRequestTargetScope.pageExperiments||[];this.disableCachingConfigs=S||(0,p.S)()&&j.includes("inlincrscall"),this.crsVersion=(0,x.wb)(this.crsVersion||"",j,this.appType||""),this.isGitConfigs=this.useGitConfigs(),this.configOrigins=this.setConfigOrigin(),this.contentServiceUrlBase=this.serviceDomainUrl?new URL("/content/",this.serviceDomainUrl):void 0,this.isMultiConfigRetrievalEnabled=this.useMultiConfigsRetrieval();const q=this.getConfigServiceBaseUrl(this.isMultiConfigRetrievalEnabled,e);this.configServiceBaseUrl=q?new URL("",q):null,this.environmentConfigUrl=this.serviceDomainUrl?new URL("/config/v1/",this.serviceDomainUrl):void 0,this.oneServiceApiKey=this.getOneServiceApiKey(),this.enableFiveColLayout=!1,i&&(this.hostHeaderOverride=i);const G={appType:this.appType,flights:R.Rb.CurrentFlights,itemOverrides:b},J=m&&(m.includes("vptest=1")||m.includes("reqsrc=vp")),Q="edgeChromium"===this.appType&&!(0,p.S)();this.shouldUseFdheadQsp=J||(0,x.on)(G,Q),this.oneServiceContentMarketQspKey=J?"market":"cm";const K="homePage"===this.appType&&m&&m.includes("segment="),X=A._3.getQueryParameterByName("ucexperience",(0,g.$N)());this.isHeroNTP=this.heroOcids.includes(R.Rb?.ClientSettings?.ocid)&&("edgeChromium"===this.appType||K),this.isHalfViewportUC="half"===X,this.isUCBased="full"===X||this.isHalfViewportUC,this.isUCPeekMode="peek"===A._3.getQueryParameterByName("exp",(0,g.$N)()),this.telemetryInitOptions={excludeCsMetaData:R.Rb.CurrentFlightSet?.has("telnometadata")},this.shouldSendUnloadTelemetry(),this.shouldThrottleLoadTime()}getOneServiceApiKey(){if(this.widgetAttributes&&this.widgetAttributes.feed&&this.widgetAttributes.feed.apiKey)return this.widgetAttributes.feed.apiKey;const t="0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM";let e;const n=["gaming","gaming::car","gaming::ai","gaming::deepseek"];switch(this.appType){case"windowsShell":case"windowsShellV2":e="pWw5OmQehOA0XNfgcgrTrwEJZJJJzE83ovtTQx6JRG";break;case"windowsNewsPlus":case"winWidgets":case"webWidgets":e="AEbyVYqTQAPvg4lWwMSFHaLkDzl3weRKKIDDInLQUj";break;case"edgeChromium":e="1hYoJsIRvPEnSkk0hlnJF2092mHqiz7xFenIFKa9uc";break;case"bingHomepage":case"distribution":e="lenovo"===R.Rb.ClientSettings.pagetype?"OrorOEMX3w4Hsk49OXMM6YayCYQw3OHcpzqiXEk9xd":"edgewelcome"===R.Rb.ClientSettings.pagetype?"oPFhbDSAghltCuG6UvQCcxmngSVye65eXQHHu3voxZ":"QMmdky7jrTlM4mWJmMYQTi71lp678KyZJBKHCAyKCg";break;case"sharedWidgets":e="hFWgtnoLG1BXruRRhEVJo5ACP8414XUG0Ric6JbyND";break;case"gaming":e="play"===this.currentRequestTargetScope?.pageType?t:n.includes(this.currentRequestTargetScope?.pageType)?"1hYoJsIRvPEnSkk0hlnJF2092mHqiz7xFenIFKa9uc":"Uj7u7bqBgMhDGBUVPSbcHUe0pU7X8TbVRviCO2fojo";break;case"travel":e="8RwD77wJgNQmmVBdGmZsK6vvPCrG58iRCQRoPsE4JJ";break;case"health":e="FywQv6H345wNCU4yKWraF2esI9qiMQFx90v53mMHrm";break;default:e=t}return e}getUserMuid(){let t;const e=(0,y.ab)();return(0,M.A)(e)&&(t="m-"+e),t}getConfigServiceBaseUrl(t=!0,e=null){const n=function(t,e,n=!1){switch(e){case C.prod:case C.prodssr:case C.staging:return t;default:return n?location.origin||null:(0,g.IU)()||null}}(this.crsDomain||(this.isChinaCompliance?a.Kb:a.ZW),this.environment),i=this.isGitConfigs?`${this.crsPath}${this.crsVersion||a.fK}/config/`:`${this.crsPath}${t?"v2/":""}configindex/`,r=(0,g.IU)();if(this.crsRetryBaseUrl=r?r+i:null,e)return e+i;if((0,p.S)()&&(this.renderWidgets()||"sharedWidgets"===this.appType||"bingHomepage"===this.appType||"distribution"===this.appType||"gaming"===this.appType||("sports"===this.appType||"finance"===this.appType||"weather"===this.appType)&&this.widgetAttributes)){const t=(this.crsDomain||"https://www.msn."+(this.IsChinaCompliance?"cn":"com"))+i;return this.crsRetryBaseUrl=t,n?`${n}`+i:t}return n||(0,g.IU)()?(n||(0,g.IU)())+i:null}useMultiConfigsRetrieval(){const t=(0,g.iA)();if(t){const e=A._3.getQueryParameterByName("isMultiConfigRetrievalEnabled",t);if(e)return"true"===e.toLocaleLowerCase()}return!this.featureFlags||!this.featureFlags.isMultiConfigRetrievalEnabled||"true"===this.featureFlags.isMultiConfigRetrievalEnabled}useGitConfigs(){const t=(0,g.iA)();if(t){const e=A._3.getQueryParameterByName("isGitConfig",t);if(e)return"true"===e.toLocaleLowerCase()}return(0,x.Uo)(this.crsVersion,this.configIndexDocId,this.appType)}renderWidgets(){const t=(0,g.iA)();if(t){const e=A._3.getQueryParameterByName("renderWidget",t);if(e)return"true"===e.toLocaleLowerCase()}return!1}getAuthCookieName(){if(this.authCookieName)return this.authCookieName;let t;switch((R.Rb&&R.Rb.ClientSettings).apptype||""){case"windows":t="windowshp"===R.Rb.ClientSettings.pagetype?"anon":"app_anon";break;case"bingHomepage":case"community":case"contentTools":case"finance":case"gaming":case"health":case"homePage":case"hub":case"personalize":case"sharedWidgets":case"shopping":case"sports":case"traffic":case"travel":case"ugc":case"views":case"weather":default:t="anon";break;case"edgeChromium":case"edgeMobile":case"distribution":case"windowsNewsPlus":case"winWidgets":case"webWidgets":case"windowsShell":case"windowsShellV2":case"office":case"channelmobile":case"superApp":t="app_anon"}return t}setAccountInfoPromise(){this.ResolvedAccountInfo=null,this.AccountInfoPromise=new Promise(t=>{if(!((0,p.S)()&&window.chrome&&window.chrome.authPrivate&&window.chrome.authPrivate.getPrimaryAccountInfo))return t(null);const e=Math.round(performance.now());window.chrome.authPrivate.getPrimaryAccountInfo(n=>{const i=Math.round(performance.now());return(0,u.ZF)()["Auth.GetPrimaryAccountInfo"]=i-e,this.ResolvedAccountInfo=n,t(n)})}),this.AccountInfoPromise}tryReformatGuid(t){if(t&&32===t.length){const e=t.match(/(\w{8})(\w{4})(\w{4})(\w{4})(\w{12})/i);e&&(t=e.slice(1).join("-"))}return t}setTargetScope(){if(!R.Rb||!R.Rb.ClientSettings)return;const t=function(t,e){let n;const i=decodeURIComponent((0,b._)(t,"aace")),{child:r}=i&&(0,S.B)(i)||{},o=(0,b._)(t,v.wX);return n=i&&(1===r||o)?"kids":e.modes?.audienceMode||e.audienceMode||"adult",n}((0,g.gH)(),R.Rb.ClientSettings),{browser:e,deviceFormFactor:n,domain:i,ocid:r,os:o,modes:s,pagetype:a}=R.Rb.ClientSettings,c=R.Rb.CurrentFlights.split(",");if(this.currentRequestTargetScope={audienceMode:t,browser:e,deviceFormFactor:n,domain:i,locale:{content:this.LocaleContentMarket,display:this.LocaleDisplayLanguage},ocid:r,os:o,modes:s,platform:"web",pageType:a,pageExperiments:c},!this.currentRequestTargetScope.locale&&$.n.stringHasData(this.LocaleContentMarketString)){const t=this.LocaleContentMarketString.split("-");t.length>1&&(this.currentRequestTargetScope.locale={language:t[0],market:t[t.length-1],content:{language:t[0],market:t[t.length-1]},display:{language:t[0],market:t[t.length-1]}})}}setNavTargetHostName(){let{subDomain:t,domainName:e,topLevelDomain:n}={subDomain:i.WWW,domainName:r.MSN,topLevelDomain:o.COM};const s="homePage"!==this.appType&&R.Rb&&R.Rb.CurrentFlightSet&&R.Rb.CurrentFlightSet.has("1s-viewurldomain");switch(this.environment){case h.O.prod:case h.O.staging:t=s?i.MicrosoftStart:i.WWW;break;case h.O.int1:t=s?i.MicrosoftStartINT1:i.INT1;break;case h.O.int:case h.O.intpr:case h.O.intperf:t=s?i.MicrosoftStartINT:i.INT}this.isChinaCompliance&&(n=o.CN),this.navTargetHost=`${t}.${e}.${n}`}getRunTimePropertyBag(t,e){const n={appType:this.appType};e&&(n.pcsVersion=e.v,n.pcsEnv=e.env);const{alias:i,v:r}=t||{};this.buildVersion=r||"",n.build=this.buildVersion,i&&(n.buildAlias=i),this.isDebug&&(n.isDebugPage=!0);const o=R.Rb.CurrentFlights;return o&&(n.shouldDelayUntilLoadTime="edgeChromium"===this.appType&&R.Rb.IsPrerender,n.shouldSampleErrorsForTreatement1=o.includes("apperror1")||o.includes("errorsamplingb")),n}shouldSendUnloadTelemetry(){(0,p.S)()&&R.Rb.CurrentFlightSet?.has("remunloadflt")&&(window.__sendUnloadTelemetry=!1)}shouldThrottleLoadTime(){(0,p.S)()&&R.Rb.CurrentFlightSet?.has("throttleloadtime")&&(window.__throttleLoadTime=!0)}getStaticUrls(t){return{com:`${this.assetsGlobalUrl}/staticsb/statics/${t}`,cn:`${this.assetsCNUrl}/staticsb/statics/${t}`}}}const O=D.getInstance;let N=(0,w.G)(D);const L=()=>O().Environment===h.O.staging},6727:function(t,e,n){n.d(e,{AE:function(){return m},AY:function(){return V},DA:function(){return f},DO:function(){return U},FD:function(){return _},Hi:function(){return S},Ir:function(){return L},J1:function(){return T},KS:function(){return P},Ln:function(){return p},O8:function(){return G},OL:function(){return C},QZ:function(){return O},U4:function(){return H},UG:function(){return A},W6:function(){return v},YC:function(){return $},Ym:function(){return Q},_Q:function(){return K},eq:function(){return x},fp:function(){return b},gk:function(){return R},hD:function(){return j},i4:function(){return W},mm:function(){return y},nN:function(){return z},pO:function(){return k},s8:function(){return q},td:function(){return g},uj:function(){return J},xI:function(){return w},yO:function(){return I},zm:function(){return N}});var i=n(98216);let r,o,s,a,c,u,d=(new Date).getTime();try{c="sessionStorage"in window&&window.sessionStorage}catch(t){}try{navigator&&navigator.userAgentData&&"Windows"===navigator.userAgentData.platform&&navigator.userAgentData.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["platformVersion"])&&navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then(t=>{u=t.platformVersion})}catch(t){}function l(t){const e=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"===t?e:7&e|8).toString(16)}const h=(()=>{let t=null;return()=>{if(null===t){const e=(document?.head?.getAttribute?.("data-info")?.split(";").find(t=>t.startsWith("f:"))||"").substring(2).split(",");t=e.includes("prg-tel-cvidfix")}return t}})();function f(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,l)}function p(){return Date.now()}function g(){return C&&(window.outerWidth||document.documentElement.clientWidth)}function m(t){return t?t.scrollHeight:C&&(window.outerHeight||document.documentElement.clientHeight)}function w(t){if(t)return t.scrollTop||0;return C&&(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop)||0}function y(){return C&&Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)}function v(){const t="undefined"!=typeof document&&document.cookie;if(!C&&!t)return"";const e=new RegExp("\\bMUID\\s*=\\s*([^;]*)","i").exec(t);return e&&e.length>1?e[1]:""}function b(t){return C?(o||""===o||(o=v()||t||""),o):v()}function S(t){o=t}const C=!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv);function k(t,e){return function(t,e){if(e&&t){const n=e.toLowerCase();if(-1==n.indexOf("?ocid=")&&-1==n.indexOf("&ocid=")){const n=-1==e.indexOf("?")?"?":"&";e=`${e}${n}ocid=${encodeURIComponent(t)}`}}return e}(e,t)}function T(t,e){M(t,"ocid",e)}function x(t,e){let n=e;try{const t=new URL(location.href);n=t.searchParams.get("pc")||t.searchParams.get("PC")||t.searchParams.get("pC")||t.searchParams.get("Pc")||n}catch{}M(t,"pc",n||e)}function A(t,e,n){const i=!n&&h(),o=function(t,e){if(!e)return t;r||(r=t);const n=new URLSearchParams(window.location.search);return n.get("cvid")||r}(e,i);M(t,"cvid",o,!0),i&&function(t,e,n){if(e===n)return;M(t,"cvpid",e,!0)}(t,e,o)}function $(t,e){M(t,i.GI,e,!0,!1)}function I(t,e){M(t,"ei",e.toString(),!0)}function P(t,e){M(t,e,void 0,!1,!0)}function R(t,e,n){try{if(!t||!e||!t.href)return;const i=new URL(t.href);if("http:"!==i.protocol&&"https:"!==i.protocol||i.searchParams.has("sc"))return;n&&t.setAttribute("originalhref",n),i.href=`${e}&url=${encodeURIComponent(i.href)}`;const r=Date.now().toString();i.searchParams.set("timestamp",r),t.href=i.href}catch(t){}}function M(t,e,n,i=!1,r=!1){if(!t||!e)return;let o=t;if("a"!==o.nodeName&&o.closest("a")&&(o=o.closest("a")),!o)return;const{href:s}=o;if(s)try{const t=new URL(s);let a=t,c=!1;if("microsoft-edge:"===t.protocol){const e=t.searchParams.get("url");e&&(a=new URL(e),c=!0)}if(r)return a.hash?-1===a.hash.indexOf(e)&&(a.hash+=`&${e}`):a.hash=e,void(c?(t.searchParams.set("url",a.href),o.href=t.href):o.href=a.href);const u=["msn.com","msn.cn","bing.com","msn.yidianzixun.com","msn.huya.com"],d=["ib.msn.com"].every(t=>!a.host.includes(t))&&u.some(t=>a.host.includes(t)),l=["topsite-ruby-link","recommendedSiteDiv"].some(t=>o.classList.contains(t));if(n&&d&&!l){let t="";t=a.searchParams.get(e),t&&!i||a.searchParams.set(e,n)}c?(t.searchParams.set("url",a.href),o.href=t.href):o.href=a.href}catch{}}function _(t,e=""){if(!t)return;const n=t.getAttribute("data-hl")||"";if(!e&&!n){const n=t.querySelector("h4")||t.querySelector("h3"),i=function(t,e,n=2){if(!e)return;let i=e,r=0;for(;i&&i!==t;i=i.parentElement,r++)if(r>n)return;return r}(t,n);n&&i&&i<=2&&(e=F(n))}const i=t instanceof HTMLAnchorElement?t.querySelector(".title"):"";!e&&i&&(e=F(i));const r=t instanceof HTMLAnchorElement?t.getAttribute("title"):"";!e&&r&&(e=r);const o=t instanceof HTMLAnchorElement?t.getAttribute("aria-lable"):"";return!e&&o&&(e=o),"string"!=typeof e&&(e=n||t.getAttribute("data-piitxt")||("FORM"==t.nodeName?"[form submit]":t.getAttribute("title")||D(t,"title","img")||F(t)||t.getAttribute("alt")||D(t,"alt")||"")),null!=e.trim&&(e=e.trim()),e}const E=/(^\s+)|(\s+$)/gm;function F(t){return(t&&(t.textContent||t.innerText)||"").replace(E,"")}function D(t,e,n=""){const i=t.children||[];let r,o=0;for(e=e||"alt";o<i.length;o++)if(r=i[o].getAttribute(e)||D(i[o],e,n),r&&n!=i[o].localName)return r}function O(t,e){if(!t||t===document||t===window)return null;const n=t.closest(e);if(n)return n;const i=N(t);return i&&i.host?O(i.host,e):void 0}function N(t,e){return!t?.parentNode||e&&t.parentNode instanceof ShadowRoot?t:N(t.parentNode,e)}function L(t){const e=[];if(!t)return;let n;return n=U(t)?t.shadowRoot.querySelectorAll("*"):t.querySelectorAll("*"),B(Array.from(n),e),e}function B(t,e=[]){for(let n=0;n<t.length;n++){const i=t[n];W(i)&&e.push(i),U(i)&&B(Array.from(i.shadowRoot.querySelectorAll("*")),e)}}function U(t){return!!t.shadowRoot}function W(t){return t.hasAttribute&&t.hasAttribute("data-t")}function V(t){try{new URL(t)}catch(t){return!1}return!0}function H(t,e){const n=new CustomEvent(t,{detail:{element:e}});dispatchEvent(n)}function z(){let t=!1;if(C)try{u&&parseInt(u.split(".")[0])>=11&&(t=!0)}catch(t){}return a=!0===t||null,a}function j(t){if(!s&&""!==s&&C)try{if(!t||0===t.length)return;const e=document.cookie;if(e){let n="";t.forEach(t=>{const i=new RegExp("\\b"+t+"\\s*=\\s*([^;]*)","i").exec(e),r=i&&i.length>1?i[1]:"";""!==r&&(n+=t+"="+r+";")}),s=n}}catch(t){}return s}function q(t,e){if(!t||""===t)return"";let n=!1,i=null;if(C)try{if(i=new URL(t),!e||0===e.length)return;e.forEach(t=>{i.searchParams.has(t)&&(n=!0),i.searchParams.delete(t)})}catch(e){return t}return n?i.toString():t}function G(t){if(!t||""===t)return"";let e=null,n=!1;if(C)try{e=new URL(t);const i=new RegExp(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/gi);e.searchParams.forEach(function(t,e){t.match(i)&&(n=!0)})}catch(t){}return n?"":t}function J(t){const e="sign-in-refreshed-page";C&&c&&c.getItem(e)?(c.removeItem(e),(t.page=t.page||{}).isAutoRefresh=!0):function(t){return!t||!t.page||!0!==t.page.isAutoRefresh&&!1!==t.page.isAutoRefresh}(t)&&((t.page=t.page||{}).isAutoRefresh=!1)}function Q(t=!1){let e;const n=new Promise(t=>{e=t});return t&&e(),{promise:n,resolve:e}}function K(){o=null,s=null}},6736:function(t,e,n){n.d(e,{S8:function(){return h},Wh:function(){return p},YO:function(){return c},Z5:function(){return u},ZT:function(){return g},nx:function(){return f},rw:function(){return l}});var i=n(65022),r=n(93468),o=n(89980);const s="digital-id-cache";let a;const c={getItem:t=>(0,o.Lg)().getItem(t),setItem:(t,e)=>{(0,o.Lg)().setItem(t,e)},removeItem:t=>{(0,o.Lg)().removeItem(t)}},u=t=>({getItem:async e=>await t.getItem(e),setItem:async(e,n)=>await t.setItem(e,n),removeItem:t.removeItem?async e=>await t.removeItem(e):void 0}),d=new Map,l=u({getItem:async t=>Promise.resolve(d.get(t)||null),setItem:async(t,e)=>(d.set(t,e),Promise.resolve()),removeItem:async t=>(d.delete(t),Promise.resolve())});function h(t=c){const e=w(t);return e&&Object.keys(e).length>0&&e.at?e:void 0}async function f(t=l){const e=await y(t);return e&&Object.keys(e).length>0&&e.at?e:void 0}function p(t,e=c){try{const n=m(t,w(e));e.setItem(s,JSON.stringify(n)),a=void 0}catch(t){(0,r.vV)(i.iUO,"Error updating digital ID cache",t.message)}}async function g(t,e=l){try{const n=m(t,await y(e));await e.setItem(s,JSON.stringify(n)),a=void 0}catch(t){(0,r.vV)(i.iUO,"Error updating async digital ID cache",t.message)}}function m(t,e){const n={...e,...t,lastUpdated:(new Date).toISOString()};return{NA:["anid","wid"],MSA:["wid"],AAD:["anid"]}[t.at]?.forEach(t=>delete n[t]),n}function w(t=c){if(void 0!==a)return a;try{const e=t.getItem(s);a=e?JSON.parse(e):null}catch(t){(0,r.vV)(i.lXX,"Error reading digital ID cache",t.message),a=null}return a}async function y(t=l){if(void 0!==a)return a;try{const e=await t.getItem(s);a=e?JSON.parse(e):null}catch(t){(0,r.vV)(i.lXX,"Error reading async digital ID cache",t.message),a=null}return a}},6860:function(t,e,n){n.d(e,{W:function(){return c},o:function(){return l}});var i=n(98216),r=n(65022),o=n(20431),s=n(30817),a=n(94444);const c={};let u=!1;function d(){c.primaryLoadTimeEventSent=!1,c.secondaryLoadTimeEventSent=!1,u=!1}function l(t,e={}){const{isSecondaryBeacon:n,reportEntityMetrics:a}=e,d=Object.assign({},n?(0,s.zq)():(0,s.ZF)());u||!a&&!n||((0,o.dX)(d),u=!0),Object.keys(d).length&&(n?c.primaryLoadTimeEventSent||(d.isPrimaryLoadTimeEventSent=!1):d.TimeToSendPrimaryPageTimings=Math.round(performance.now()),t.liteLoadTimeSentKey&&t.liteLoadTimeSentKey.forEach(t=>{delete d[t]}),function e(){try{if(i.YT&&i.YT.getPageMetadata()){const e=(0,s.Tm)()||{};if(n){if(c.secondaryLoadTimeEventSent)return;c.secondaryLoadTimeEventSent=!0}else{if(c.primaryLoadTimeEventSent||t.__peregrine_liteTtvrSent)return;c.primaryLoadTimeEventSent=!0,t.__peregrine_normalTtvrSent=!0}i.YT.sendLoadTimeEvent({markers:d,deviceCapabilities:e});const r=(0,s.ZF)();r&&n&&(r.telemetryBeaconFireTime=Math.round(performance.now()))}else t.setTimeout(e,500)}catch(t){i.YT&&i.YT.sendAppErrorEvent({...r.bk4,message:"Unable to send load time event"})}}())}d(),(0,a.x)(d)},6954:function(t,e,n){n.d(e,{v:function(){return r}});var i=n(76014);class r{constructor(t){if(this.authCallerGetter=t,!t)throw new Error("Auth Caller Getter is not provided in AadEdgeChromiumAuthCallerValidator")}async validateAuthCaller(){const{authCallerGetter:t}=this,{account:e,client:n}=await t()||{};return e?"UNSUPPORTED_SOVEREIGNTY"===e.account_type?{callerId:e.tenant_id,error:{message:"Edge unsupported sovereignty",status:i.f.UnsupportedSovereignty}}:"AAD"!==e.account_type?{callerId:e.tenant_id,error:{message:"Not valid AAD account.",status:i.f.OtherValidationError}}:n?.id?{client:n,account:e,callerId:e.tenant_id}:{callerId:e.tenant_id,error:{message:"Client Id not provided.",status:i.f.OtherValidationError}}:{error:{message:"Account info not available",status:i.f.AccountInfoUnavailable}}}}},7258:function(t,e,n){n.d(e,{Lk:function(){return o},M5:function(){return s},PD:function(){return a},h5:function(){return c}});const i=new Map,r=10;function o(t){if(!t)return!0;const e=i.get(t)||0;return e>=r?(console.error(`App Error ${t} throttled: Maximum ${r} events exceeded (current: ${e})`),!1):(i.set(t,e+1),!0)}function s(t,e){if(t instanceof Error){const n=t.toString();return e&&t.stack?`${n}, Stack: ${t.stack}`:n}return"string"==typeof t?t:a(t)}function a(t){if(void 0===t)return"undefined";try{return JSON.stringify(t)}catch{return"[serialization-error]"}}function c(t){return t instanceof Error?t:new Error(s(t))}},7469:function(t,e,n){n.d(e,{SX:function(){return i},uq:function(){return a}});var i,r,o,s=n(77246);!function(t){t.NTP_TOP_SITES_CLICK="NTP_TopSites_Click"}(i||(i={})),function(t){t.FunctionalNotification="ntp_profile_scope_tab_functional_notification",t.FeatureCampaign="ntp_profile_scope_tab_feature_campaign",t.PureFunctionalNotification="ntp_profile_scope_tab_pure_functional_notification"}(r||(r={})),function(t){t.PrimaryCTAClicked="PrimaryCTA_Clicked",t.DismissedCTA_Clicked="DismissedCTA_Clicked",t.Notification_Ignored="Notification_Ignored"}(o||(o={}));class a{static isEdgeNurturingAvailable(){return(0,s.S)()&&window.chrome?.edgeNurturingPrivate}static async getToken(t,e){return new Promise(n=>{(0,s.S)()?"function"==typeof window.chrome?.edgeNurturingPrivate?.GetToken?window.chrome.edgeNurturingPrivate.GetToken(t,e,"NTP",t=>{n(t)}):n({Message:"window.chrome.edgeNurturingPrivate.GetToken API Unavailable"}):n({Message:"Cannot use DOM"})})}static updateCTA(t,e){(0,s.S)()&&"function"==typeof window.chrome?.edgeNurturingPrivate?.UpdateCTA&&window.chrome.edgeNurturingPrivate.UpdateCTA(t,e)}static notifyTriggerEvent(t){return new Promise(e=>{(0,s.S)()&&"function"==typeof window.chrome?.edgeNurturingPrivate?.NotifyTriggerEvent&&window.chrome.edgeNurturingPrivate.NotifyTriggerEvent(t,t=>{e(t)})})}}},7483:function(t,e,n){n.d(e,{W:function(){return d}});var i,r=n(89151),o=n(89388),s=n(23768),a=n(82238);!function(t){t.VISUALLY_READY_WILL_FIRE="visuallyReadyWillFire",t.VISUALLY_READY_DID_FIRE="visuallyReadyDidFire",t.PAGE_REVEAL_START_WILL_FIRE="pageRevealStartWillFire",t.PAGE_REVEAL_START_DID_FIRE="pageRevealStartDidFire",t.PAGE_REVEAL_COMPLETE_WILL_FIRE="pageRevealCompleteWillFire",t.PAGE_REVEAL_COMPLETE_DID_FIRE="pageRevealCompleteDidFire"}(i||(i={}));var c=n(83542),u=n(65444);class d extends c.i{constructor(){super(...arguments),this.ttvrMarkers=[],this.getIncompleteVisualDependencies=()=>{const{visuallyReadyDependencies:t}=this.getCurrentState(),e=[];return t.forEach(t=>{t.visuallyReady||e.push(t.experienceType)}),e}}addVisuallyReadyDependencies(t){u.y.addVisuallyReadyDependencies.getActionSender(this).send(t),t.forEach(t=>{this.ttvrMarkers.push(t),(0,o.r)(t,!0)})}registerVisuallyReadyObserver(){s.m.updateVisuallyReadyTiming.registerObserver(t=>{const e=t.params[0];if(!e)return;const{experienceType:n,endTime:i}=e;if(null!=i){this.getCurrentState().visuallyReadyDependencies.has(n)&&this.markVisuallyReadyComplete(n)}})}registerMarkersIfNecessary(t,e,n=!1){if(!(this.ttvrMarkers&&0!==this.ttvrMarkers.length||t&&0!==t.length||e&&0!==e.length))return;const i={};i.TTVR=e?[...this.ttvrMarkers,...e]:this.ttvrMarkers,t&&(i.TTF=t),n&&(i.TTPR=[...this.ttvrMarkers],i.TTPR.push("OverlayRemoval")),(0,r.Yq)(i)}registerSecondaryPerfMarkers(t){(0,r.XO)(t)}registerFeedPerfMarker(t){(0,r.VK)(t)}async markVisuallyReadyComplete(t){const{visuallyReadyDependencies:e}=this.getCurrentState();if(e.get(t).visuallyReady)return;u.y.markVisuallyReadyComplete.getActionSender(this).send(t);for(const t of e.values())if(!t.visuallyReady)return;const n=(0,a.Kl)();n&&(await(0,a.Uk)(i.VISUALLY_READY_WILL_FIRE),performance.measure("VisuallyReady"),s.m.updateAboveTheFoldVisuallyReady.getActionSender(n).send(performance.now()),await(0,a.Uk)(i.VISUALLY_READY_DID_FIRE))}}},7578:function(t,e,n){n.d(e,{y:function(){return s}});var i=n(68399),r=n(30817),o=n(7258);function s(t){const e=t||performance.now();return{end:t=>{const n=performance.now(),s="ClientInit";try{if(!t){(0,r.ZF)()[s]=Math.round(n-e)}(0,i.Ww)({name:s,startTime:e,endTime:n,customSuffix:t?"error":void 0})}catch(t){console.error("ClientInit span error: "+(0,o.M5)(t))}}}}},7813:function(t,e,n){n.d(e,{Uo:function(){return r},fO:function(){return a},on:function(){return s},wb:function(){return o}});var i=n(33918);function r(t,e,n){return!(!n||!t||t<i.fK)&&!e}function o(t,e,n){try{return t&&e&&e.includes(i.jM)&&"weather"!==n&&"finance"!==n?i.Q9:t}catch(t){}return t}function s(t,e=!1){const{itemOverrides:n}=t||{},i=n&&n.find(t=>"should1sUseFdheadQsp"===t.key);if(i&&i.value)return"true"===i.value;if(e)return!1;const r=n&&n.find(t=>"flights"===t.key||"appendflights"===t.key.toLowerCase());return!!(r&&r.value&&r.value.length>0)}function a(t){return!(!t||!t.includes(i.MS))}},7965:function(t,e,n){n.d(e,{E3:function(){return x},HN:function(){return v},IT:function(){return o},JW:function(){return A},Le:function(){return m},MA:function(){return I},MW:function(){return k},Pl:function(){return p},U6:function(){return S},YU:function(){return l},Zp:function(){return i},bk:function(){return y},c_:function(){return $},dH:function(){return d},go:function(){return s},hY:function(){return g},lk:function(){return T},uF:function(){return C}});var i,r,o,s,a,c,u,d,l,h=n(6092),f=n(11141);!function(t){t[t.MicrosoftNews=0]="MicrosoftNews",t[t.Office365=1]="Office365",t[t.Gaming=2]="Gaming",t[t.Play=3]="Play",t[t.NavigationPage=4]="NavigationPage",t[t.Following=5]="Following"}(i||(i={})),function(t){t.Enforced="ENFORCED",t.Recommended="RECOMMENDED"}(r||(r={})),function(t){t[t.focused=0]="focused",t[t.inspirational=1]="inspirational",t[t.informational=2]="informational",t[t.custom=3]="custom"}(o||(o={})),function(t){t[t.always=0]="always",t[t.peek=1]="peek",t[t.headingsonly=2]="headingsonly",t[t.onscroll=3]="onscroll",t[t.off=4]="off"}(s||(s={})),function(t){t.focused="focused",t.inspirational="inspirational",t.informational="informational",t.custom="custom"}(a||(a={})),function(t){t.bing="bing",t.custom="custom",t.iris="iris",t.off="off",t.theme="theme",t.enterprise="enterprise",t.imageAndVideo="imageAndVideo",t.hero="hero"}(c||(c={})),function(t){t[t.allowAll=0]="allowAll",t[t.disableImageOfTheDay=1]="disableImageOfTheDay",t[t.disableCustomImage=2]="disableCustomImage",t[t.disableAll=3]="disableAll"}(u||(u={})),function(t){t[t.off=0]="off",t[t.onerow=1]="onerow",t[t.tworows=2]="tworows",t[t.top=3]="top"}(d||(d={})),function(t){t.off="off",t.onerow="onerow",t.tworows="tworows",t.top="top"}(l||(l={}));const p={0:"off",1:"onerow",2:"tworows",3:"top"},g={0:"allowAll",1:"disableImageOfTheDay",2:"disableCustomImage",3:"disableAll"},m={off:0,onerow:1,tworows:2,threerows:4,top:3};var w;!function(t){t.off="off",t.onerow="onerow",t.tworows="tworows",t.threerows="threerows"}(w||(w={}));const y={off:0,tworows:1,threerows:2,onerow:3},v={0:"off",1:"tworows",2:"threerows",3:"onerow"};var b,S,C;!function(t){t.off="off",t.on="on"}(b||(b={})),function(t){t.default="default",t.user="user-2",t.wpo="wpo",t.user_old="user"}(S||(S={})),function(t){t.Unknown="0",t.EdgeFlight="1",t.UserChoices="2",t.InvalidFeedLayout="3",t.NoRecommendedData="4",t.NoNeedToPromote="5"}(C||(C={}));const k={off:"off",on:"on"},T={backgroundImageTypePolicy:0,currentBackgroundImageType:"imageAndVideo",currentLayout:"inspirational",showQuickBrief:!0,hideDefaultTopSites:!1,imageOfTheDayEnabled:!0,selectedFeedDisplaySetting:(0,f.M8)()?"always":"headingsonly",selectedQuickLinksDisplaySetting:"onerow",enableWidgetsRegion:!1},x={0:"focused",1:"inspirational",2:"informational",3:"custom"},A={backgroundImage:"ntp.background_image",backgroundImageTypePolicy:"ntp.background_type_blocked_by_policy",currentBackgroundImageType:"ntp.background_image_type",currentBackgroundImageOption:"ntp.background_image",hideDefaultTopSites:"ntp.hide_default_top_sites",customBackgroundImageInfo:"ntp.local_background_image",layout:"ntp.layout_mode",quickLinksDisplaySetting:"ntp.quick_links_options",imageOfTheDay:"ntp.show_image_of_day",feeds:"ntp.news_feed_display",greeting:"ntp.show_greeting",showSettings:"ntp.show_settings",showQuickBrief:"ntp.show_quick_brief",verticalTabsCollapsed:"edge.vertical_tabs.collapsed",verticalTabsOpened:"edge.vertical_tabs.opened",singleColumnEnabled:"ntp.single_column.enabled",userNurturingUpdated:"ntp.user_nurturing",hasUserSeenNewFre:"new_device_fre.has_user_seen_new_fre",defaultBrowserSettingEnabled:"browser.default_browser_setting_enabled",showAppLauncher:"ntp.enable_app_launcher",userChoices:"ntp.record_user_choices",selectedFeedPivot:"ntp.selected_feed_pivot",layoutModeInstrumentation:"instrumentation.ntp.layout_mode",newsFeedDsiplayInstrumentation:"instrumentation.ntp.news_feed_display",gamerModeEnabled:"browser.gamer_mode_enabled",codexBingUpsellEnabled:"ntp.enable_bing_chat_by_policy",companyLogoEnabled:"ntp.enable_company_logo_by_policy",companyLogoBackplateColor:"ntp.company_logo_backplate_color",windowsIndexerPromotedTopSites:"ntp.promoted_top_sites",minVisitAffiliateSites:"ntp.min_visit_affiliate_sites",widgetsRegion:"ntp.enable_widgets_region",widgetsInPartialEnabled:"ntp.enable_wid_in_partial_view"},$=(h.T3.CurrentRequestTargetScope&&h.T3.CurrentRequestTargetScope.audienceMode,{focused:{feeds_position:"headingsonly",current_background_image_type:"off",greeting:!0,hide_promoted_links:!1},inspirational:{feeds_position:"peek",current_background_image_type:"imageAndVideo",greeting:!0,hide_promoted_links:!1},informational:{feeds_position:"always",current_background_image_type:"imageAndVideo",greeting:!0,hide_promoted_links:!1}}),I={currentBackgroundImageType:$.informational.current_background_image_type,currentLayout:"informational",hideDefaultTopSites:$.informational.hide_promoted_links,imageOfTheDayEnabled:!0,selectedFeedDisplaySetting:$.informational.feeds_position,greetingEnabled:$.informational.greeting,enableWidgetsRegion:!1}},8092:function(t,e,n){n.d(e,{KB:function(){return s},Qr:function(){return i},R$:function(){return r}});var i,r,o=n(3371);!function(t){t[t.belowTheFoldTransitionStart=0]="belowTheFoldTransitionStart"}(i||(i={})),function(t){t[t.startLoading=14]="startLoading",t[t.loaded=4]="loaded",t[t.rendered=8]="rendered",t[t.domComplete=10]="domComplete",t[t.visuallyReady=11]="visuallyReady",t[t.mediaContentReady=15]="mediaContentReady",t[t.aboveTheFoldVisuallyReady=16]="aboveTheFoldVisuallyReady",t[t.belowTheFoldTransitionStart=0]="belowTheFoldTransitionStart",t[t.hydrationComplete=1]="hydrationComplete",t[t.pageVisuallyReady=2]="pageVisuallyReady"}(r||(r={}));const s=new Map([[o.Y.loaded,r.loaded],[o.Y.rendered,r.rendered],[o.Y.domComplete,r.domComplete],[o.Y.visuallyReady,r.visuallyReady],[o.Y.mediaContentReady,r.mediaContentReady]])},8353:function(t,e,n){n.d(e,{I6:function(){return X},DP:function(){return Z},mL:function(){return K},F6:function(){return Y},iD:function(){return tt},ri:function(){return et},PE:function(){return j},n$:function(){return H},Rz:function(){return q},a8:function(){return Q}});var i,r=n(31653),o=n(33107),s=n(88294),a=n(7258),c=n(65022),u=n(79426),d=n(5518),l=n(15098),h=n(13113),f=n(48608),p=n(59983),g=n(49084),m=n(65432),w=n(43889),y=n(76980),v=n(18287),b=n(23572),S=n(6092),C=n(67387),k=n(8598),T=n(8597),x=n(63418),A=n(33292),$=n(34100);async function I(t,e){const n=e&&e.accessToken,i="Acquire"===t;if(!n&&i){const t="Invalid access token in jwtSSOCore";return k.xf.addAuthRecord($.B.jwtSSOService,t),void(0,A.$)(c.Me9,t)}let r,o;try{r=await fetch(`https://api.msn.${S.T3.IsChinaCompliance?"cn":"com"}/auth/token/v2/jwtsso?apikey=${S.T3.OneServiceApiKey}&ocid=${T.Mq}&activityId=${S.T3.ActivityId}`,{method:i?"POST":"DELETE",credentials:"include",body:JSON.stringify({userAccessToken:n})||void 0,headers:(0,g.LK)(n)||void 0});i!==!!(0,x.Ri)(C.Zc)&&(o=new Error(`${i?"Expected":"Unexpected"} cookie ${C.Zc} is ${i?"missing":"still present"} after ${t} JwtSSO call`))}catch(t){o=t}const s=!o&&r&&r.ok?null:`Error in ${t} mode in jwtSSO call. ${o||""}`;s&&(0,A.$)(c.Me9,s),k.xf.addAuthRecord($.B.jwtSSOService,`${s||"Success"}`)}!function(t){t.Acquire="Acquire",t.Delete="Delete"}(i||(i={}));var P=n(75391),R=n(77246),M=n(18284),_=n(4865),E=n(61803);const F=`apikey=${S.T3.OneServiceApiKey}&ocid=Peregrine&it=${(0,_.p)()}&activityId=${S.T3.ActivityId}`;function D(){return(0,o.m0)(()=>async function(){let t,e;try{t=await fetch(`https://api.msn.${S.T3.IsChinaCompliance?"cn":"com"}/auth/cookie/clearALCookies?${F}`,{method:"DELETE",credentials:"include"}),(0,E._C)();if((0,E.pu)()){const t=decodeURIComponent((0,x.Ri)(C.dW));e=new Error(`Account linking cookie ${t} indicates account is still linked after clearALCookies call`)}}catch(t){e=t}const n=!e&&t&&t.ok&&200===t.status?null:`Error in clearALCookies call. ${e||""}`;n&&(0,A.$)(c.FQt,n),k.xf.addAuthRecord($.B.clearAccountLinkingCookies,`${n||"Success"}`)}(),"tryDelete1SAcctLnkCookies",(0,b.aK)())}const O=7e3,N=7e3;let L,B=!1;const U={acquireTokenStatus:0,accessTokenResult1S:null,currentAccountInfo:null};let W=new u.e;const V=(0,l.L)(async()=>{const t=L||await(0,v.B3)(),e=await(0,o.m0)(()=>t?.handleRedirectPromise(),"handleRedirect",(0,b.aK)());if(e)return s.v.log("dual-auth: Signing in through interactive login loginResponse: "+JSON.stringify(e,null,4)),q(e).finally(()=>{(0,h.Ap)()}),k.xf.addAuthRecord($.B.interactiveLogin,"Success"),e;(0,h.Ap)()});async function H(t){const{userName:e,enforceTimeLimit:n}=t||{};B=!0;const i=await V();if(i)return i;let r;return r=e?(0,y.sd)(await(0,y.We)(e))||e:(0,y.Dl)()||(0,f.Sb)()||(0,y.g1)(),!r&&(0,p.RZ)()?(q(null,!0),void D()):await nt(()=>z(r),"ssoSilent",n?N:-1)}const z=(0,M.A)(async t=>{let e;t||s.v.log("dual-auth: login_hint is not available. ssoSilent may not work!");const n=L||await(0,v.B3)(),i=(0,b.Kq)("SSOSilentCoreAndToken"),o=(0,b.aK)(),u=o&&o.startMeasure("ssoSilentCore").endMeasure,d={...(0,v.zH)(!0),loginHint:t},l=(0,R.S)()&&history?.length;try{e=await n.ssoSilent(d)}catch(e){s.v.log(`dual-auth: ssoSilent failed! : ${e}`),k.xf.addAuthRecord($.B.ssoSilent,(0,a.M5)(e));const i=(0,p.Dm)();if(e.name===r.q9&&i){if((0,h.tX)(),!(0,h.GQ)()||!(0,g.FS)())return void await G(null,!0);{const e={...(0,v.zH)(),loginHint:t};n.acquireTokenRedirect(e)}}(i||(0,g.SM)())&&e.name!==r.q9&&e.name!==r.Jg&&(0,A.$)(c.LwN,"Error in ssoSilent call",e)}finally{s.v.log(`dual-auth: getAllAccounts AFTER ${e?"SUCCESSFUL":"UNSUCCESSFUL"} ssoSilent: ${JSON.stringify((0,y.Is)(),null,4)}`),e&&(s.v.log(`dual-auth: loginResponse AFTER SUCCESSFUL ssoSilent: ${JSON.stringify(e,null,4)}`),k.xf.addAuthRecord($.B.ssoSilent,"Success. User: "+(0,y.tW)(e.account.username))),q(e).finally(()=>{i(),(0,h.Yy)(),(0,h.VY)()}),u&&u({customSuffix:(e?e.fromCache&&"cache":"error")||void 0})}return l&&history.length===l+1&&dispatchEvent(new CustomEvent("ssoSilentHistChanged")),e});function j(){return H()}async function q(t,e=!1){const n=await G(t,e);await J(n)}async function G(t,e=!1){if(t){const e=U.currentAccountInfo=t.account,n=(0,y.sd)(e),i=(0,y.U8)(e);return(0,y.BL)({login_hint:n,account_type:i}),e}e&&((0,y.BL)(),(0,m.HY)(null),(0,h.Yy)(),(0,h.VY)(),(0,h.q)(),await Promise.all([(0,o.m0)(()=>I("Delete"),"tryDelete1SJwtCookies",(0,b.aK)()),D()]),(0,y.HN)())}async function J(t,e=!1,n=!1,i=!1){let u=U.accessTokenResult1S;const d=new Date(u&&u.expiresOn),l=d&&d.getTime()&&d>new Date;if(u&&3===U.acquireTokenStatus&&l)return void s.v.log(`dual-auth: tryAcquire1STokenSilently: token is still valid - expiry: ${new Date(u&&u.extExpiresOn)}`);const f="AAD"===(0,y.U8)(t),p=f?["https://enterprisenews.microsoft.com/User.Read"]:["https://oneservice.microsoft.com/OneService.Read"];try{if(u=await async function(t,e,n=!1,i=!1){if(!e)return void s.v.log("dual-auth: tryAcquireTokenSilently received empty account -- API calls may not be authenticated!");const o=L||await(0,v.B3)(),u={...(0,v.$$)(t),forceRefresh:i,account:e};let d;const l=(0,b.aK)(),f=l&&l.startMeasure("tryAcquireTokenSilently").endMeasure;try{d=await nt(()=>o.acquireTokenSilent(u),"acquireTokenSilent",n?O:-1)}catch(t){throw s.v.log(`dual-auth: acquireTokenSilent failed! : ${t}`),k.xf.addAuthRecord($.B.acquireTokenSilent,(0,a.M5)(t)),(0,A.$)(c.n5z,"acquireTokenSilent call failed",t),t.name===r.q9&&(0,h.GQ)()&&o.acquireTokenRedirect(u),d=null,t}finally{f&&f({customSuffix:(d?d.fromCache&&"cache":"error")||void 0}),d&&k.xf.addAuthRecord($.B.acquireTokenSilent,"Success"),s.v.log(`dual-auth: acquireTokenSilent for scopes: ${t} was ${d?"SUCCESSFUL":"UNSUCCESSFUL"} accessTokenResult: ${JSON.stringify(d,null,4)}`)}return d}(p,t,n,i),u){if(U.acquireTokenStatus=3,U.accessTokenResult1S=u,(0,m.HY)(u),!u.fromCache){const t=+new Date;(0,b.eQ)("OSATExpMins",Math.floor((+u.expiresOn-t)/6e4))}g=u,(0,o.m0)(()=>I("Acquire",g),"tryAcquire1SJwtCookies",(0,b.aK)()),f&&(0,P.fL)(u.accessToken)}}catch(t){if(u=U.accessTokenResult1S=null,t.name===r.q9&&t.errorCode===r.ET&&e)return void(U.acquireTokenStatus=2);U.acquireTokenStatus=1}var g;W.set(u);const w=function(t){if(!t)return null;const e=t&&t.extExpiresOn,n=e&&new Date(e),i=n&&n.getTime(),o=(new Date).getTime();let s;const a=6e4,c=1e3*(r.nC-r.HJ),u=1e3*r.HJ;i&&i>o?(s=i-o,s<=u&&(s=0)):s=c;return s+a}(u);w&&setTimeout(()=>J(t),w)}async function Q(){if(U.accessTokenResult1S)return U.accessTokenResult1S;if(!B){const t="Wait for 1SToken failed because auth flow was not started";return s.v.logError(`dual-auth:  ${t} -- so returning early without the 1S access token`),k.xf.addAuthRecord($.B.waitFor1SToken,t),(0,A.$)(c.ASD,t),void W.set(null)}const t=(0,b.Kq)("Wait1SToken"),e=await(0,o.m0)(()=>W.getResultAsync(),"waitFor1SToken",(0,b.aK)());return t(),e}function K(){const{currentAccountInfo:t}=U;if(t)return(0,y.U8)(t);const e=(0,p.Dm)();return e?e.account_type:void 0}function X(){return"AAD"===(0,y.U8)(U.currentAccountInfo)?U.currentAccountInfo.tenantId:""}function Y(){return U&&U.currentAccountInfo&&U.currentAccountInfo.idTokenClaims.puid}function Z(){return U&&U.currentAccountInfo&&U.currentAccountInfo.idTokenClaims.ageGroup}async function tt(t){(0,v.LF)();const{loginHint:e,forceLoginPrompt:n,tenantOptions:i,redirectStartPage:o}=t||{},s=L||await(0,v.B3)({tenantOptions:i});if(!s)return;const a=n?"login":"select_account",c={...(0,v.zH)(),prompt:a},{tenantScope:u,tenantId:d}=i||{},l=!(!e||!u&&!d);l&&Object.assign(c,{prompt:void 0,loginHint:e,extraQueryParameters:{domain_hint:"MSA"===u||d===r.nt?"consumers":"organizations"}}),o&&(c.redirectStartPage=o),k.xf.addAuthRecord($.B.interactiveLogin,"Redirect start"+(l?" with login hint":"")),await s.loginRedirect(c)}async function et(t){(0,v.LF)();const e=L||await(0,v.B3)();if(!e)return;const n=t?await(0,y.We)(t):U.currentAccountInfo;(0,y.HN)();n?.tenantId!==r.nt&&(0,P.Ks)();const i=(0,y.sd)(n),o=(0,v.g_)(n,i);(0,w.W9)().supported?((0,h.ro)(),k.xf.addAuthRecord($.B.logout,"Redirect start"),await e.logoutRedirect(o)):await e.logoutPopup(o)}async function nt(t,e,n){let i,r=n,o=!1;return(0,R.S)()&&(location.search.includes(`${e}NoTimeout`)?r=999999999:location.search.includes(`${e}ForceDelay`)?(t=()=>(0,d.Y_)(1e4).then(t),r+=2e4):location.search.includes(`${e}ForceTimeout`)?(r=0,o=!0):n<0&&(r=-1)),r<0?await t():(await Promise.race([t().then(t=>i=t),(0,d.Y_)(r).then(()=>Promise.reject(new Error(`Operation ${e} timed out after ${r}ms`)))]),o?void 0:i)}},8597:function(t,e,n){n.d(e,{Ar:function(){return r},I7:function(){return o},Ln:function(){return a},Mq:function(){return u},N7:function(){return c},Z8:function(){return d},h6:function(){return s},os:function(){return i}});const i="at-bing",r="at-bing-dt",o="sign-in-active",s="initial-page-nav",a="sign-in-pending",c="sign-in-refreshed-page",u="authconstants-peregrine",d="sign-in-refresh-session"},8598:function(t,e,n){n.d(e,{U5:function(){return w},xf:function(){return m}});var i=n(67387),r=n(59983),o=n(28828),s=n(12870),a=n(74166),c=n(13113),u=n(44369),d=n(76980),l=n(18287),h=n(97406),f=n(16091),p=n(17720);class g extends h.g{async getState(){const t=s.Rb.ClientSettings,e=(0,l.Ju)(),n=e&&(0,d.U8)(await(0,d.We)())||(0,r.Dm)()?.account_type||void 0,h=(0,a.Ux)(r.qM),{login_hint:f}=h&&(0,o.B)(h)||{},p=f&&0!==Object.keys(f).length;return{isSignedIn:2===(0,u.l)().getSignInState(),accountType:n,signedInAccounts:e?await this.getSignedInAccounts():void 0,storage:{aace:(0,a.Ux)(i.v1),ace:(0,a.Ux)(i.kr),als:(0,a.Ux)(i.dW,!0),child:(0,a.Ux)(i.wX),currentAccount:p,loginFlowMarker:(0,c.gV)(),logoutFlowMarker:(0,c.VH)(),editFlowMarker:(0,c.k4)(),osate:(0,a.Ux)(i.Zc)},appType:t&&t.apptype,pageType:t&&t.pagetype}}async getSignedInAccounts(){if(!await(0,l.B3)())return[-1];return(await(0,d.Is)()).map(t=>(0,d.tW)(t.username))}getCompressedResult(t){if(!t)return null;if(t.match(/\bsuccess\b/i))return"S";if(t.match(/\bfailure\b/i))return"F";{let e=t.match(/tryInitiateEarlyAuth: Finalized sign in state (\w+) from auth-(\w+)/);return e?`EarlyAuth: ${e[1]} from ${e[2]}`:(e=t.match(/initiateSSOCore: (\w+) - SSO data from the (\w+) auth flow[^]*/),e?`SSO: ${e[1]} from ${e[2]}`:t.toString())}}static getInstance(){return p.vv.get("__DualAuthRecordManagerInstance__",()=>new g)}}const m=(0,f.G)(g),w=m.getCompressedRecords},8646:function(t,e,n){n.d(e,{f:function(){return i}});class i{constructor(){this._eventListeners=new Set}addEventListener(t){this._eventListeners.add(t)}removeEventListener(t){this._eventListeners.delete(t)}dispatchEvent(t){this._eventListeners.forEach(e=>this.dispatchDecorator?e(this.dispatchDecorator(t)):e(t))}}},8701:function(t,e,n){var i;n.d(e,{T:function(){return i}}),function(t){t.clientAuctionAd="clientAuctionAd",t.oneServiceAd="oneServiceAd",t.cmsAd="cmsAd"}(i||(i={}))},9120:function(t,e){e.A=function(t,...e){if(t){const n=/{([\d]+)}/g,i=[];let r=n.exec(t),o=0,s=0;for(;null!==r;)s=r.index,i.push(t.substring(o,s)),i.push(e[r[1]]),o=n.lastIndex,r=n.exec(t);return i.push(t.substring(o)),i}}},9192:function(t,e,n){n.d(e,{YK:function(){return s},cE:function(){return a},tZ:function(){return c}});var i=n(30817),r=n(89151),o=n(53685);function s(t,e){const n=performance.now(),i=e&&e.firstTimeOnly;e&&e.logStart&&a(`${t}-start`,n,i);const r=e&&e.perfTimeline,o=r&&r.startMeasure(t).endMeasure;return function(){const r=performance.now();e&&e.logEnd&&a(`${t}-end`,r,i),e&&!e.logDuration||a(t,r-n,i),o&&o()}}function a(t,e=performance.now(),n){const r=(0,i.ZF)();return n&&void 0!==r[t]?r[t]:(r[t]=Math.round(10*e)/10,e)}function c(t,e=performance.now()){const n=t&&(0,r.W4)(o.xF)||0;return e+(n>0?-n:0)}},9612:function(t,e,n){var i;n.d(e,{M:function(){return y}}),function(t){t.weatherMobileCache="weatherMobileCache",t.telemetrySync="telemetrySync",t.raceEnabled="raceEnabled",t.enableOfficeRoutes="enableOfficeRoutes",t.riverAgeMinutes="riverAgeMinutes",t.enableNetworkFirst="enableNetworkFirst",t.navAgeMinutes="navAgeMinutes",t.enableNavPreload="enableNavPreload",t.enableEmptySectionRoute="enableEmptySectionRoute",t.networkTimeoutSeconds="networkTimeoutSeconds",t.bgTaskNetworkTimeoutSeconds="bgTaskNetworkTimeoutSeconds",t.enableCacheMissDiagnostics="enableCacheMissDiagnostics",t.enableFallbackVerticalsFeed="enableFallbackVerticalsFeed",t.enableExternalCssPrecache="enableExternalCssPrecache",t.enableEnterprisePrecache="enableEnterprisePrecache",t.useWebLayoutEndPoint="useWebLayoutEndPoint",t.noCacheLayoutTemplates="noCacheLayoutTemplates",t.cacheForceDisableContent="cacheForceDisableContent",t.cacheSSRAllResponse="cacheSSRAllResponse",t.cacheSSRBasePageResponse="cacheSSRBasePageResponse",t.enableSSRExtentionCache="enableSSRExtentionCache",t.enableFinanceRoutes="enableFinanceRoutes",t.enableTopicPublisherRoutes="enableTopicPublisherRoutes",t.enableStaticRouting="enableStaticRouting",t.enableStaticNavRouting="enableStaticNavRouting",t.enableStaticAdsRouting="enableStaticAdsRouting",t.commonHash="commonHash",t.vendorsHash="vendorsHash",t.experienceHash="experienceHash",t.microsoftHash="microsoftHash",t.enableCoreBundlePrecache="enableCoreBundlePrecache",t.ssrBasePageNavAgeMinutes="ssrBasePageNavAgeMinutes",t.enableWidgetsRegion="enableWidgetsRegion",t.disableDefaultNavigationRoute="disableDefaultNavigationRoute",t.disableRiverNetworkFirst="disableRiverNetworkFirst",t.enableLogNavFetchTime="enableLogNavFetchTime",t.enableNTPStaticRoutes="enableNTPStaticRoutes",t.enableRubyNTPStaticRoutes="enableRubyNTPStaticRoutes",t.enableRiverPostRoute="enableRiverPostRoute"}(i||(i={}));const r=["enableNetworkFirst","enableEmptySectionRoute","enableNavPreload","enableFallbackVerticalsFeed","enableExternalCssPrecache","enableEnterprisePrecache","useWebLayoutEndPoint","noCacheLayoutTemplates","cacheSSRAllResponse","cacheSSRBasePageResponse","cacheForceDisableContent","enableSSRExtentionCache","enableFinanceRoutes","enableTopicPublisherRoutes","enableCacheMissDiagnostics","enableStaticRouting","enableStaticNavRouting","enableStaticAdsRouting","enableCoreBundlePrecache","enableWidgetsRegion","disableDefaultNavigationRoute","enableLogNavFetchTime","disableRiverNetworkFirst","enableNTPStaticRoutes","enableRubyNTPStaticRoutes","enableRiverPostRoute"];var o=n(93468),s=n(65022),a=n(55593),c=n(12870),u=n(82238);function d(t,e,n=!1,i,d,h,p){if(!t)return void(0,o.vV)(s.QHO,"No scriptUrl provided");if(!("serviceWorker"in navigator))return void(0,o.vV)(s.QHO,"Service Worker is not in navigator.");const g=function(t,e){const n=new URLSearchParams;return function(t,e){const n=(0,a.a)().getAll("item").find(t=>t&&0===t.indexOf("spalink:"));if(n)return t.set("item",n.replace("/mobile","")),void l(t);!function(t,e){const n=c.Rb.ClientSettings&&c.Rb.ClientSettings.bundleInfo;l(t);const i=(0,a.a)().get("bundles");if(i)return void t.set("bundles",i);if(e.bundlesOverride)return void t.set("bundles",e.bundlesOverride);n?.alias&&t.set("bundles",n.alias)}(t,e)}(n,t),function(t){"enterprise"===c.Rb?.ClientSettings?.audienceMode&&t.set("enableOfficeRoutes","true")}(n),function(t,e){isNaN(e.riverAgeMinutes)||t.set("riverAgeMinutes",e.riverAgeMinutes.toString())}(n,t),function(t,e){isNaN(e.navAgeMinutes)||t.set("navAgeMinutes",e.navAgeMinutes.toString())}(n,t),function(t,e){isNaN(e.networkTimeoutSeconds)||t.set("networkTimeoutSeconds",e.networkTimeoutSeconds.toString())}(n,t),function(t,e){isNaN(e.bgTaskNetworkTimeoutSeconds)||t.set("bgTaskNetworkTimeoutSeconds",e.bgTaskNetworkTimeoutSeconds.toString())}(n,t),function(t,e){isNaN(e.ssrBasePageNavAgeMinutes)||t.set("ssrBasePageNavAgeMinutes",e.ssrBasePageNavAgeMinutes.toString())}(n,t),function(t,e,n=[]){n.forEach(n=>{(e[n]||(0,a.a)().get(n))&&t.set(n,"true")})}(n,t,r),e?function(t,e){return`${t.toString()}&${e.toString()}`}(n,e):n.toString()}(i,p);if(g&&(t=t+(t.indexOf("?")>-1?"&":"?")+decodeURIComponent(g)),h){const e=(t=h(t,"serviceWorkerUrlPolicy"))&&t.toString();if(!e||"about:blank#error"===e)return void(0,o.vV)(s.QHO,"Service Worker script Url is not trusted type compliant")}n?f(t,e,d):(0,u.Qc)().then(()=>{f(t,e,d)})}function l(t){const e=c.Rb.ClientSettings&&c.Rb.ClientSettings.bundleInfo;e?.variant&&t.set("bundlevariant",e.variant)}async function h(t="/"){try{if(!navigator||!navigator.serviceWorker||!navigator.serviceWorker.getRegistration)throw new Error("Service worker is not available in this session");const e=await navigator.serviceWorker.getRegistration(t);if(!e)return;await e.unregister()||(0,o.vV)(s.nGT,"ServiceWorker unregistration failed.")}catch(t){(0,o.c_)(t,s.nGT,"Failed to unregister ServiceWorker:"+t.message)}}async function f(t,e,n){try{if(!navigator||!navigator.serviceWorker||!navigator.serviceWorker.register)throw new Error("Service worker is not available in this session");await navigator.serviceWorker.register(t,{scope:e}),n&&n()}catch(t){(0,o.c_)(t,s.QHO,"ServiceWorker registration failed.")}}var p=n(89980),g=n(19548),m=n(27261),w=n(75575);function y(t,e,n,i,r,o,s){if(!e||"true"!==e.enabled)return;const a=c.Rb.ClientSettings.deviceFormFactor;if("false"===e.mobileEnabled&&("phone"===a||"tablet"===a))return;if(!function(t){const e=c.Rb.ClientSettings.browser;if(!e&&"false"===t.mobileEnabled)return!1;const n=t.unsupportedBrowsers;if(!n||!n.length)return!0;if(n.findIndex(t=>t.toLowerCase()===e.browserType.toLowerCase())>-1)return!1;return!0}(e))return;if(!(0,p.Lg)().supported)return;const u=e.isLowEndDevice&&e.disableOnLowEndDevices;if("true"===e.registrationEnabled&&!u){const a=function(){const t=(0,m.iA)(),e=g._3.getQueryParameterByName("swimmediateregistration",t);if(e)return"true"===e.toLocaleLowerCase();return!1}();i=i||a,w.S.setIsServiceWorkerEnabled(!0),d(t,n,i,e,r,o,s)}("true"===e.unregistrationEnabled||u)&&(!function(t="/",e=!1){if(!t||!("serviceWorker"in navigator))return null;e||"complete"===document.readyState?h(t):window.addEventListener("load",()=>{h(t)},{once:!0})}(n),w.S.setIsServiceWorkerEnabled(!1))}},9774:function(t,e,n){var i;n.d(e,{j:function(){return i}}),function(t){t.Essential="ES",t.Advertising="AD",t.SocialMedia="SM",t.ThirdPartyAnalytics="AL"}(i||(i={}))},10160:function(t,e,n){n.d(e,{AF:function(){return r},JV:function(){return i},L9:function(){return c},Me:function(){return a},V3:function(){return o},W:function(){return u},ah:function(){return s},xP:function(){return d}});const i="peregrine-widgetgroup",r="peregrine-widgets",o="peregrine-widget-settings",s="data-widget",a="data-widget-state",c="PeregrineWidgetEvent",u="expected-widget-cards",d="widgets-cards-args"},10186:function(t,e,n){n.d(e,{Ck:function(){return f},Cw:function(){return T},EH:function(){return y},Fb:function(){return h},J3:function(){return I},J6:function(){return a},Nz:function(){return P},Oy:function(){return s},PU:function(){return p},VI:function(){return w},Wc:function(){return $},_J:function(){return g},aS:function(){return u},cS:function(){return l},dA:function(){return C},f7:function(){return v},m8:function(){return A},p6:function(){return k},pc:function(){return x},qG:function(){return i},sE:function(){return r},tk:function(){return c},u$:function(){return o},xm:function(){return d},yJ:function(){return m},yY:function(){return S},ye:function(){return b}});var i,r;!function(t){t.Excel="Excel",t.Forms="Forms",t.OneNote="OneNote",t.Pdf="PdfViewer",t.Portfolio="Portfolio",t.PowerPoint="PowerPoint",t.Project="Project",t.PowerBI="PowerBI",t.Sway="Sway",t.Visio="Visio",t.Word="Word",t.Video="Video",t.NewsArticle="NewsArticle"}(i||(i={})),function(t){t.DocumentsTableMenu="documents-table-menu",t.DocumentsTableHover="documents-table-hover",t.DocumentCardMenu="document-card-menu"}(r||(r={}));const o="edgeEnterpriseNtp",s="ContextMenuItem",a="ContextMenu",c="Copy file",u="-CopyFile",d="DocumentListItem",l="Download file",h="-Download",f="FileLocation",p="Open file location",g="-OpenFileLocation",m="Open file",w="Open in browser",y="-OpenInBrowser",v="Open in desktop",b="-OpenInDesktop",S="Remove file",C="-RemoveFromList",k="More options",T="ShareButton",x="Share file",A="-Share";var $,I,P;!function(t){t.Graph="https://graph.microsoft.com",t.Loki="394866fc-eedb-4f01-8536-3ff84b16be2a",t.MRU="https://api.office.net",t.Sharepoint="https://microsoft.sharepoint.com",t.Substrate="https://substrate.office.com",t.Yammer="https://www.yammer.com",t.Turbo="f84065aa-522d-45c2-bfc9-ce0ba17f1593"}($||($={})),function(t){t.Activity="Activity",t.EnterpriseOneService="EnterpriseOneService",t.EnterpriseWaffle="EnterpriseWaffle",t.Graph="Graph",t.Loki="Loki",t.MRU="MRU",t.Share="Share",t.Sharepoint="Sharepoint",t.SharepointSites="SharepointSites",t.Substrate="Substrate",t.Yammer="Yammer",t.Turbo="Turbo"}(I||(I={})),function(t){t.Activities="Activities",t.AdminPortal="AdminPortal",t.Calendar="Calendar",t.CompanyNewsCard="CompanyNewsCard",t.Discover="Discover",t.DiscoverSharepoint="DiscoverSharepoint",t.EnterpriseWaffle="EnterpriseWaffle",t.EdgeWorth="EdgeWorth",t.EdgeWorthHide="EdgeWorthHide",t.Feeds="Feeds",t.Images="Images",t.IndustryNewsCard="IndustryNewsCard",t.MRU="MRU",t.MRUUpdate="MRUUpdate",t.OneDriveLink="OneDriveLink",t.Pinned="Pinned",t.Recommended="Recommended",t.RemoveRecommended="RemoveRecommended",t.ProfilePhoto="ProfilePhoto",t.RecentFiles="RecentFiles",t.SharedLink="SharedLink",t.SharedWithMe="SharedWithMe",t.SharepointNewsCard="SharepointNewsCard",t.SharepointNewsCardImages="SharepointNewsCardImages",t.SharePointSites="SharePointSites",t.Shell="Shell",t.StreamPreviewImages="StreamPreviewImages",t.TaskCreate="TaskCreate",t.TaskDelete="TaskDelete",t.Tasks="Tasks",t.TaskUpdate="TaskUpdate",t.Topics="Topics",t.Turbo="Turbo"}(P||(P={}))},10307:function(t,e,n){var i;n.d(e,{P:function(){return i}}),function(t){t.small="OneByOne",t.medium="OneByTwo",t.large="OneByThree"}(i||(i={}))},10610:function(t,e,n){n.d(e,{K:function(){return b}});var i=n(55457),r=n(65022),o=n(88294),s=n(77246),a=n(27261),c=n(16091),u=n(17720),d=n(42e3),l=n(89980),h=n(19548),f=n(1732),p=n(48172),g=n(28006),m=n(98216),w=n(27061),y=n(35849);class v{constructor(){this.hasSimpleImages=!1,this.dailyRotationOnlySimpleImages=!1,this.shouldRerender=!0,this.stateInited=!1,this.simpleBkgdKey="simpleBkgd",this.useDefaultBackground=!1,this.enableAbstractImageFlight=!1}static getInstance(){return u.vv.get("__BackgroundStorageHelper__",()=>new v)}async initState(t,{disableGalleryFREAndLowEnd:e}={}){if(!(0,s.S)())return;if(this.stateInited)return;this.stateInited=!0,void 0===this.enableGallerySettingOnLowend&&(this.enableGallerySettingOnLowend=!e);if(await this.getBackgroundGalleryEligibilityAsync()){const e=(0,y.zP)(g.h$);if(!e)return;const n=await e.getPageSettingsStateAsync();await this.initialBackgroundPSLSetup(n);(0,l.Lg)().getItem("clean_meta_flag")||((0,l.Lg)().setItem("clean_meta_flag","1"),"focused"===n.currentLayout&&await this.resetAppliedBackgroundAndToggleStorage(n.currentLayout));const i=await this.checkAndRemoveApplicableBackgrounds(!1,n),r=await this.getBackgroundPreferences();if(r){const e={backgroundGalleryDisplayed:!1,selectedVideoSetting:r.selectedVideoSetting,backgroundSelectionMetadata:r.backgroundSelectionMetadata};t?.send(e);const o=w.l.isImageOfTheDayDisabled(),s=w.l.isCustomImageDisabled();if(await this.resetGalleryStorageForPolicyCompliance(r,o,s),o||s)return;i&&"off"!==n.currentBackgroundImageType&&this.updateLayoutBasedOnBackgroundType(r)}}}async getBackgroundGalleryEligibilityAsync(){const t=this.shouldDisableGalleryFeature(),e=await p.f.isApiAvailableToUse(),n=(0,f.h_)();return this.isEligibleForTreatment=e&&(!n||Boolean(this.enableGallerySettingOnLowend))&&!t,this.isEligibleForTreatment}getBackgroundGalleryEligibility(){return!!this.isVPTest()||this.isEligibleForTreatment}setBackgroundSettingsPreferencesCache(t){this.backgroundSettingsPreferences=t}getBackgroundSettingsPreferencesCache(){return this.backgroundSettingsPreferences}getPreferenceByKeyFromFromPreferencesCache(t){const e=this.backgroundSettingsPreferences;return e?e[t]:void 0}setCurrentBackgroundPreferenceCache(t){this.currentBackgroundMetadata=t}getCurrentBackgroundPreferenceCache(){return this.currentBackgroundMetadata}setDefaultBackground(t){this.useDefaultBackground=t}getDefaultBackground(){return this.useDefaultBackground}getShouldRerender(){return this.shouldRerender}setShouldRerender(t){this.shouldRerender=t}setSimpleImagesandCMSSize(t,e){this.hasSimpleImages=t,this.cmsImageSize=e-1}setAbstractImageStartIndex(t){this.enableAbstractImageFlight=!0,this.abstractImageIndexStart=t}setRubyImageStartIndex(t){this.rubyImageIndexStart=t}getCMSImageSize(){return this.cmsImageSize}getAbstractImageStartIndex(){return this.abstractImageIndexStart}getRubyImageStartIndex(){return this.rubyImageIndexStart}async getBackgroundPreferences(){return p.f.getPreferenceSetting(i.lD,!0).then(t=>{const e=t&&t.value;if(e)return this.setBackgroundSettingsPreferencesCache(e),e;o.v.logError(`PSL: Preferences API does not have ${i.lD}.`)}).catch(t=>{o.v.logError(`Exception ${t} occurred storing background setting preferences in persistent storage layer`)})}async getBackgroundPreferenceByKey(t){return p.f.getPreferenceSetting(i.lD,!0).then(e=>{const n=e&&e.value;if(n)return n[t];o.v.logError(`PSL: Preferences API does not have ${i.lD}.`)}).catch(t=>{o.v.logError(`Exception ${t} occurred getting background setting preference by key in persistent storage layer`)})}async setBackgroundPreferences(t){return p.f.savePreferenceSetting(i.lD,t).then(e=>(e&&this.setBackgroundSettingsPreferencesCache(t),e)).catch(e=>(o.v.logError(`Exception ${e} occurred storing background settings preferences: ${t} in persistent storage layer`),!1))}async setBackgroundPreferenceByKey(t,e){const n=await p.f.getPreferenceSetting(i.lD,!0).catch(t=>(o.v.logError(`Exception ${t} occurred getting background settings preferences in persistent storage layer`),this.getNurturingErrorObject()));let r=n&&n.value;return r!==this.getNurturingErrorObject()&&(r||(r={key:i.lD,value:{}}),t==i.mR.backgroundSelectionMetadata&&(r[i.mR.changeBackgroundDaily]=!1),r[t]=e,p.f.savePreferenceSetting(i.lD,r).then(t=>(t&&this.setBackgroundSettingsPreferencesCache(r),t)).catch(n=>(o.v.logError(`Exception ${n} occurred storing background preference ${t} and value ${e} in persistent storage layer`),!1)))}async getCurrentBackgroundMetadata(){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(t&&t.getPref)return new Promise(e=>{t.getPref(i.$e,function(t){e(t?.value)})})}setCurrentBackgroundMetadata(t){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;return!(!e||!e.getPref)&&(e.setPref(i.$e,t),this.setCurrentBackgroundPreferenceCache(t),!0)}setSSRBackgroundMetadata(t){this.ssrBackgroundMetadata=t}async checkAndRemoveApplicableBackgrounds(t,e,n){const i=await this.getBackgroundPreferences();if(!i)return!1;const r=this.overrideCacheAging(),o=i.changeBackgroundDaily||r||t,s=i.backgroundSelectionMetadata;if(!s)return!1;let a=-1;return r||n||(a=s.appliedTimestamp?s.appliedTimestamp+864e5:-1),!!(o&&a<Date.now())&&this.clearCachedBackground(i)}getBackgroundImageTypeFromSettings(t){return this.backgroundSettingsPreferences&&this.backgroundSettingsPreferences.backgroundSelectionMetadata?this.getProviderBackgroundType(this.backgroundSettingsPreferences.backgroundSelectionMetadata.provider):t?"off":"imageAndVideo"}async initialBackgroundPSLSetup(t){if(await this.getBackgroundPreferences())return;if(!t)return;const e=this.createInitialStateFromChromiumPageSettings(t);if(!e)return void m.YT.sendAppErrorEvent({...r.VZt,message:"Initial state for background gallery is undefined",pb:{...r.VZt.pb,customMessage:`Initial state for background gallery is undefined. Current BackgroundImageType: ${t.currentBackgroundImageType}`}});await this.setBackgroundPreferences(e)&&this.setBackgroundSettingsPreferencesCache(e)}createInitialStateFromChromiumPageSettings(t){switch(t.currentBackgroundImageType){case"off":case"custom":case"theme":return this.createInitialState(!1);case"bing":case"imageAndVideo":return this.createInitialState(!0);default:return}}createInitialState(t){return{changeBackgroundDaily:t,selectedVideoSetting:this.shouldUseEnergySaverMode()?"energySaver":"balanced"}}shouldUseEnergySaverMode(){const t=window&&window.navigator;if(!t)return!0;const e=t?t.deviceMemory:-1;return!("4g"===t.connection.effectiveType)||!(e>=4)}getProviderBackgroundType(t){switch(t){case"BrowserLocal":return"custom";case"FREBackground":case"Iris":default:return"bing";case"Theme":return"theme";case"Video":case"CMSImage":return"imageAndVideo"}}async backgroundSelectionSet(){return!!await this.getBackgroundPreferenceByKey(i.mR.backgroundSelectionMetadata)}overrideCacheAging(){return"true"===h._3.getQueryParameterByName("ageOutGalleryCache",(0,a.iA)())}async handleRotationToggling(t,e){return!!this.backgroundSettingsPreferences&&(t?(this.isCurrentAndCachedBackgroundIdentical(e.selectedFeedDisplaySetting)&&this.setShouldRerender(!1),this.checkAndRemoveApplicableBackgrounds(!0,e,!0)):!!this.backgroundSettingsPreferences.backgroundSelectionMetadata||this.getActiveBackgroundSelectionMetadata(e).then(t=>!!t&&(this.setShouldRerender(!1),this.setBackgroundPreferenceByKey(i.mR.backgroundSelectionMetadata,t))).catch(t=>!1))}isCurrentAndCachedBackgroundIdentical(t){const e=this.getVideoBackgroundProviderInfo(t);if(!e||!this.backgroundSettingsPreferences||!this.backgroundSettingsPreferences.backgroundSelectionMetadata)return!1;const n=this.backgroundSettingsPreferences.backgroundSelectionMetadata;return e.provider===n.provider&&e.configIndex===n.configIndex}async getActiveBackgroundSelectionMetadata(t){if(!t)return;if("off"===t.currentBackgroundImageType)return this.buildBackgroundSelectionMetadata("Off");let e=await this.getBackgroundPreferences();if(this.isVPTest()&&(e=d.JW),e){if(e.backgroundSelectionMetadata&&"theme"!==t.currentBackgroundImageType)return e.backgroundSelectionMetadata;if(this.useDefaultBackground)return this.buildBackgroundSelectionMetadata("CMSImage","0");switch(e.changeBackgroundDaily&&this.dailyRotationOnlySimpleImages&&"bing"===t.currentBackgroundImageType&&(t.currentBackgroundImageType="imageAndVideo"),t.currentBackgroundImageType){case"bing":case"imageAndVideo":default:return this.getVideoBackgroundProviderInfo(t.selectedFeedDisplaySetting);case"custom":return this.buildBackgroundSelectionMetadata("BrowserLocal");case"theme":return this.buildBackgroundSelectionMetadata("Theme")}}}isVideoScheduled(){const t=(0,l.Lg)().getObject("bkgdV");if(!t)return-1;const e=(new Date).getDay();return t&&t.schedule&&-1!==t.schedule[e]?t.schedule[e]:-1}isVPTest(){const t=new URLSearchParams((0,a.iA)());return"vp"===t?.get("reqsrc")}simpleImageScheduled(){const t=(0,l.Lg)().getObject("bkgdV");if(!t)return 0;const e=(new Date).getDay();return t&&t.simpleSchedule?t.simpleSchedule[e]:-1}getVideoBackgroundProviderInfo(t){let e=this.simpleImageScheduled();if(this.enableAbstractImageFlight&&"always"==t){const t=(new Date).getDay();e=this.abstractImageIndexStart+t}return this.ssrBackgroundMetadata&&this.ssrBackgroundMetadata.configIndex&&(e=this.ssrBackgroundMetadata.configIndex),this.buildBackgroundSelectionMetadata("CMSImage",e.toString())}buildBackgroundSelectionMetadata(t,e,n){return{provider:t,configIndex:e||"-1",appliedTimestamp:n||Date.now()}}async shouldOverrideLayoutToCustom(){const t=await this.getBackgroundPreferences();return!!t&&(!!t.backgroundSelectionMetadata||!t.changeBackgroundDaily)}shouldOverrideLayoutToCustomCache(){const t=this.getBackgroundSettingsPreferencesCache();return!!t&&(!!t.backgroundSelectionMetadata||!t.changeBackgroundDaily)}async resetAppliedBackgroundAndToggleStorage(t){if("informational"===t||"inspirational"===t||"focused"===t){const e=await this.getBackgroundPreferences();if(!e)return;if(delete e[i.mR.backgroundSelectionMetadata],"focused"===t)return void this.setBackgroundPreferences(e);e[i.mR.changeBackgroundDaily]=!0,this.setBackgroundPreferences(e)}}async resetGalleryStorageForPolicyCompliance(t,e,n){return e&&n?this.resetStorageForImagesOff(t):e?this.resetStorageForImageOfTheDayDisabled(t):!n||this.resetStorageForCustomImageDisabled(t)}async resetStorageForImagesOff(t){if(!t)return!1;const e={...t,changeBackgroundDaily:!1};return delete e[i.mR.backgroundSelectionMetadata],this.setBackgroundPreferences(e)}async resetStorageForImageOfTheDayDisabled(t){if(!t)return!1;const e={...t,changeBackgroundDaily:!1},n=e.backgroundSelectionMetadata;return n&&"BrowserLocal"!==n.provider&&"Theme"!==n.provider&&delete e[i.mR.backgroundSelectionMetadata],this.setBackgroundPreferences(e)}async resetStorageForCustomImageDisabled(t){if(!t)return!1;const e=t.backgroundSelectionMetadata;return!e||("Theme"===e.provider||"BrowserLocal"===e.provider?(delete t[i.mR.backgroundSelectionMetadata],this.setBackgroundPreferences(t)):this.setBackgroundPreferences(t))}async clearCachedBackground(t){const e=t||await this.getBackgroundPreferences();return!!e&&(!e.backgroundSelectionMetadata||(delete e[i.mR.backgroundSelectionMetadata],this.setBackgroundPreferences(e)))}setToastCooldown(t,e){let n=(0,l.Lg)().getObject(d.VP);n||(n={reducedMotionNextAvailableTimestamp:0});const i=Date.now()+this.calculateToastCooldown(e);"reducedMotion"===t&&(n.reducedMotionNextAvailableTimestamp=Date.now()+i),(0,l.Lg)().setObject(d.VP,n)}toastCooldownExpired(t){const e=(0,l.Lg)().getObject(d.VP);return!e||"reducedMotion"===t&&e.reducedMotionNextAvailableTimestamp<Date.now()}calculateToastCooldown(t){return 864e5*t}getNurturingErrorObject(){return{key:i.lD,value:{isError:!0}}}shouldDisableGalleryFeature(){return"true"===h._3.getQueryParameterByName("disableBackgroundGallery",(0,a.iA)())}async updateLayoutBasedOnBackgroundType(t){if(!(t=t||await this.getBackgroundPreferences()))return;const e=this.getBackgroundImageTypeFromSettings();w.l.updateLayoutAndBackgroundImageType(e)}setDailyRotationOnlySimpleImages(t){this.dailyRotationOnlySimpleImages=t}getDailyRotationOnlySimpleImages(){return this.dailyRotationOnlySimpleImages}isRubyImage(t,e){if(!t)return!1;const n=this.getRubyImageStartIndex(),r=n+(e?i.VR.dataDark:i.VR.dataLight).length-1,o=Number(t);return o>=n&&o<=r}}const b=(0,c.G)(v)},10615:function(t,e,n){n.d(e,{X:function(){return i}});const i=(t=2)=>{let e="/";const n=window.location.pathname.split("/");if(n.length>t&&n[t]){e+=n[1];for(let i=2;i<=t;i++)e+="/"+n[i]}return e}},11141:function(t,e,n){n.d(e,{JO:function(){return o},M8:function(){return a},VJ:function(){return s}});var i=n(77246),r=n(27261);function o(t,e,n){return(t&&!0!==globalThis?.isSSREnabled?n:e)+"/staticsb/statics/"}function s(t,e){return t||(e?"https://assets.msn.cn":"https://assets.msn.com")}function a(t){const e=t||(0,r.VQ)();return(0,i.S)()?e.includes("localhost.msn.com"):e.includes("localhost")}},11177:function(t,e,n){n.d(e,{$w:function(){return $},CM:function(){return E},Gd:function(){return L},JX:function(){return F},Rq:function(){return P},Tx:function(){return O},VA:function(){return j},YK:function(){return f},Yn:function(){return R},Z0:function(){return z},Zj:function(){return H},cU:function(){return D},eR:function(){return I},jg:function(){return M},kB:function(){return U},pL:function(){return V},rY:function(){return d},sL:function(){return g},su:function(){return W},sx:function(){return l},t9:function(){return p},vb:function(){return _},xF:function(){return m},zE:function(){return B},zN:function(){return h}});const i=300,r=624,o=948,s=1272,a=1596,c=1900,u=24;let d=i,l=r,h=o,f=s,p=a,g=c,m=u,w=348,y=348,v=348,b=348,S=348,C=272,k=272,T=272,x=272,A=272,$=400,I=824,P=1248,R=1672,M=2096,_=i,E=r,F=o,D=s,O=a,N=null,L=612,B=924,U=1236;function W(){m=u,d=i,l=r,h=o,f=s,p=a,g=c}function V(t){w=t[0].max,C=t[0].min,y=t[1].max,k=t[1].min,v=t[2].max,T=t[2].min,b=t[3].max,x=t[3].min,S=t[4].max,A=t[4].min}function H(t,e){const n=[];for(let i=0;i<6;i++)n.push(d*(i+1)+t*i+2*(e||0));e&&(d=n[0]),l=n[1],h=n[2],f=n[3],p=n[4],g=n[5],m=t}function z(t){_=C,$=w,E=2*k+t,I=2*y+t,F=3*T+2*t,P=3*v+2*t,D=4*x+3*t,R=4*b+3*t,O=5*A+4*t,M=5*S+4*t,m=t}function j(t,e){const n=[];for(let i=0;i<4;i++)n.push(300*(i+1)+t*i+2*e+25);N=n[0],L=n[1],B=n[2],U=n[3]}},11367:function(t,e,n){n.d(e,{gR:function(){return tt}});var i,r=n(77246),o=n(17720),s=n(15003),a=n(12870),c=n(55593),u=n(6092),d=n(5419),l=n(63418),h=n(17703),f=n(88034),p=n(48622),g=n(93468),m=n(65022),w=n(1732),y=n(98216);!function(t){t[t.Unknown=1]="Unknown",t[t.OptIn=2]="OptIn",t[t.OptOut=3]="OptOut",t[t.ExplicitOptIn=4]="ExplicitOptIn"}(i||(i={}));class v{get isRuby(){return(0,f.ls)()}get isRubyEligible(){return!this._isLoggingOnly&&!!this._isRubyEligible}get isLoggingOnly(){return!!this._isLoggingOnly}get _isRubyInternal(){return!this._isLoggingOnly&&!!this._isRuby}get isUserOptedOut(){return this._rubyState?.userSelection===i.OptOut}get isIn1SCohortForAB(){return this._rubyState?.cohortStatus===f.GL.In1SCohortForAB}get isClassicToggleFlightEligible(){return this.isIn1SCohortForAB&&!(0,f.rk)()&&!(0,f.O_)()}constructor(){this._isMsftInternal=(0,d.t)(),this.rsmDebugMarkers=new Set,this.getIsRubyEligible=()=>this.ensureInit().then(()=>this.isRubyEligible),this.update=t=>{this.ensureInit().then(()=>this.updateImpl(t))},this.updateImpl=t=>{if(!b()||this._isForcedOnWithoutCookie||(0,f.YS)())return;const e={...f.hJ,...this._rubyState,...this.rubyStateUpdateFrom1s,...this._rubyStateUpdateFromUntargetedFlight,...this._rubyStateUpdateFromShippedCases,...this._rubyStateUpdateFromRubyOptParam,...this.rubyStateUpdateFromUserSelection};this.setRubyStateCookie(e);const{isRuby:n,reason:i}=C(e,this.pageSettings,this.isEdgeExpIsolationFlagEnabled,this._isForcedOn,this.isEnvironmentSupported);this.setIsRubyCookie(n,e.cohortStatus,t,i),this.rsmDebugMarkers.add("up"),(0,f.BT)("RSM2",this.rsmDebugMarkers)},this.isIsRubyChangingByForceOrEnvironment=()=>this._isRuby&&!this.isEnvironmentSupported||!this._isRuby&&this._isForcedOn,this.setRubyStateCookie=({userSelection:t,cohortStatus:e})=>{const n=`${t}${f.fQ}${e}`;this._rubyStateCookieValue!==n&&((0,f.Ug)({cookieValue:this._rubyStateCookieValue,newCookieValue:n}),this._rubyState.cohortStatus===f.GL.In1SCohortForAB&&e===f.GL.Out1SCohortForAB&&(0,g.vV)(m.S8B,"Server side signal indicates user is no longer in the Ruby cohort"),this._isLoggingOnly||(this._isRubyCookieValue=n,(0,l.Ub)(f.XO,n,f.ET)))},this.setIsRubyCookie=(t,e,n,i,r)=>{const o=String(t);if(this._isRubyEligible&&((0,f.Je)()&&e===f.GL.In1SCohortForAB||(0,f.Yx)()&&e===f.GL.In1SCohortForAA)?(0,f.cJ)(!0):(0,f.cJ)(t),this._isRubyCookieValue!==o){let e=!1;if(this._isRuby!==t&&((0,f.l4)(t),a.Rb.IsPrerender&&"visible"!==document.visibilityState||(0,s.TI)(14),t&&(0,f.v0)(),n&&(e=!0)),!this._isLoggingOnly||r){this._finalRubyCookieStatus=t;(0,f.T_)(o,f.ET)?(this._isRubyCookieValue=o,this.lastRubyCookieChangeReason=i,i&&(0,f.Mc)("rubyrc",String(i)),(0,f.Z_)(i)):(0,f.Mc)("rubyrc",String(15)),e&&(0,f.b6)("usel",void 0,300)}}o&&(0,f.Wf)(o)},this.onVisibilityChange=()=>{"visible"===document.visibilityState&&this.handleVariantEnablementMismatch()},this.handleVariantEnablementMismatch=()=>{const t=a.Rb.ClientSettings?.bundleInfo?.variant,e="ruby"===t;if(this._isRuby!==e){(0,g.vV)(m._uC,"Bundle variant mismatch error",`Got variant "${t}", but expected ${this._isRuby?"ruby":"classic (no variant)"}`,{rsm:"RSM2",url:location.href});null!=(0,c.a)().get("bv")||(0,f.b6)("var",2,300)}},this.refreshRubyStateUpdateFromShippedCases=t=>{this._isRubyEligible&&x(this.pageSettings,this.isEdgeExpIsolationFlagEnabled,$(this._rubyState)).isRuby&&this._isMsftInternal&&f.W3.has((t||u.T3.CurrentMarket)?.toLocaleLowerCase())?this._rubyStateUpdateFromShippedCases={cohortStatus:f.GL.InMsftShipped,shouldReload:!this.isRuby}:this._rubyState.cohortStatus===f.GL.InMsftShipped?this._rubyStateUpdateFromShippedCases={shouldReload:this.isRuby}:this._rubyStateUpdateFromShippedCases=void 0},b()&&(this._isForcedOn=(0,f.Wu)("prg-rn-frc"),this._isForcedOnWithoutCookie="1"===(0,c.a)().get("fcruby")||(0,r.S)()&&"ruby"===(0,c.a)().get("bv"),this._isLoggingOnly=!this._isForcedOn&&!this._isForcedOnWithoutCookie&&(0,f.Yx)(),this.rsmDebugMarkers.add("c"),(0,f.BT)("RSM2",this.rsmDebugMarkers),(0,f.jI)(),(0,f.Kp)()&&(0,f.f_)(),(0,h.b)(),this._rubyStateCookieValue=(0,l.Ri)(f.XO),this._rubyState=(0,f.KH)(this._rubyStateCookieValue),this._isRubyCookieValue=(0,l.Ri)(f.Bv),this._isRuby="true"===this._isRubyCookieValue||this._isForcedOnWithoutCookie,this.isEnvironmentSupported=(0,f.eY)(void 0),this._isRubyEligible=!(!this._isRuby&&!this.isEnvironmentSupported),this._rubyStateUpdateFromRubyOptParam=(0,f.Bd)(),this.handleVariantEnablementMismatch(),document?.addEventListener("visibilitychange",this.onVisibilityChange,{once:!0}),(0,f.HW)(this._isRubyCookieValue||""),this.ensureInit())}ensureInit(){return this.initCompletedPromise||(this.initCompletedPromise=this.init()),this.initCompletedPromise}async init(){this.pageSettings=await(0,f.pE)();const t=(0,f.kG)(this.pageSettings);(0,f.Yl)(t),(0,f.vT)(t),this.isEdgeExpIsolationFlagEnabled=(await(0,w.hb)())?.enabled.includes("msRubyFlightingAllowed"),this._rubyStateUpdateFromUntargetedFlight=S(this._rubyState,this.pageSettings),this.refreshRubyStateUpdateFromShippedCases(),this.setupPageSettingsListener();let e=!1;e=this._isLoggingOnly?this._isRuby:!(!(this._rubyStateUpdateFromUntargetedFlight?.shouldReload||this._rubyStateUpdateFromShippedCases?.shouldReload||this._rubyStateUpdateFromRubyOptParam)&&this.isEnvironmentSupported),this.isIsRubyChangingByForceOrEnvironment()&&(e=!0),this.updateImpl(e),this._isLoggingOnly&&this._isRuby&&!this._isForcedOnWithoutCookie&&this.setIsRubyCookie(!1,this._rubyState.cohortStatus,!0,21,!0),window.addEventListener("beforeunload",()=>{const t={rsmDbg:Array.from(this.rsmDebugMarkers).join(",")};this.lastRubyCookieChangeReason&&this.isRuby&&!1===this._finalRubyCookieStatus&&(t.lastCookieChangeReason=this.lastRubyCookieChangeReason),y.YT.sendLoadTimeEvent({markers:t})},{once:!0})}setupPageSettingsListener(){if(!(0,f.Je)()&&!(0,f.rk)()&&!this._isMsftInternal)return;const t=this._rubyState.cohortStatus;(0,f.l3)(this.pageSettings,e=>{if(this.refreshRubyStateUpdateFromShippedCases(),(0,f.rk)()){const e=this.isRuby&&"off"===this.pageSettings.feedSetting&&t===f.GL.InUntargetedCohort;this.update(e)}else this.update(!1);this.isRuby&&"Theme"===e.backgroundImageProvider&&(0,f.sg)(this.pageSettings)&&a.Rb.IsPrerender&&"hidden"===document.visibilityState&&(0,s.TI)(14)})}updateUserSelection(t,e){const n=t?i.ExplicitOptIn:i.OptOut;this.isEnvironmentSupported&&!this._isLoggingOnly&&this._rubyState.userSelection!==n&&p.d.updateFeedPreference(t),this.rubyStateUpdateFromUserSelection={userSelection:n},this.update(!e)}async update1sCohort(t,e){if(!(0,f.eY)()||!b()||!t)return;if(t?.isStatic||t?.swCacheEnabled||t?.isPartial)return void this.rsmDebugMarkers.add("no1s");this.rsmDebugMarkers.add("1s");let n={};const r=t?.serviceContext?.rubyTargetedVersion||null,o=t?.serviceContext?.rubyEverSelected,s=t?.serviceContext?.isTestRubyVersion;if(this.isEnvironmentSupported&&(0,f.Kp)()&&(0,f.Oi)(r,!!s),(0,f.Oi)(r,!!s,"rubyTargetedVersionExt"),(0,f.$y)(t),!T(this._rubyState)){const t=e?.allowedRubyTargetedVersions?.split(","),s=((0,f._g)()||(0,f.aw)())&&!0===o||!(!r||"all"!==t?.[0]&&!t?.includes(r)),a=I(s);(0,f.Kp)()&&(0,f.L3)(this._rubyState.cohortStatus,a!==f.GL.In1SCohortForAB),n={cohortStatus:a},A(this._rubyState.cohortStatus).isRuby&&!A(n.cohortStatus).isRuby&&this._rubyState.userSelection===i.OptIn&&(n.userSelection=i.Unknown)}this.rubyStateUpdateFrom1s=n,this.update(this.isIsRubyChangingByForceOrEnvironment())}updateMarket(t,e){(0,f.p8)(t),this.isEnvironmentSupported=(0,f.eY)(t),this.refreshRubyStateUpdateFromShippedCases(t),this.update(!e&&!this._isLoggingOnly)}get isRejectedByEdgeExpIsolation(){return(0,f.go)(this.isEdgeExpIsolationFlagEnabled,this.isRuby)}static getInstance(){return o.vv.get(f.Yc,()=>new v)}}const b=()=>f.uF.has(u.T3.AppType),S=(t,e)=>(0,f.rk)()?{cohortStatus:f.GL.InUntargetedCohort,shouldReload:t.cohortStatus===f.GL.InUntargetedCohort&&"Theme"===e.backgroundImageProvider}:t.cohortStatus===f.GL.InUntargetedCohort?t.userSelection===i.OptIn?{userSelection:i.Unknown,cohortStatus:f.GL.Unknown}:{cohortStatus:f.GL.Unknown}:void 0,C=({userSelection:t,cohortStatus:e},n,r,o,s)=>{if(o)return{isRuby:!0,reason:4};if(!s)return{isRuby:!1,reason:1};if(t===i.ExplicitOptIn)return{isRuby:!0,reason:5};if(t===i.OptIn)return{isRuby:!0,reason:6};const{isRuby:a,reason:c}=x(n,r,$({userSelection:t,cohortStatus:e}));return a?t===i.OptOut?{isRuby:!1,reason:10}:A(e):{isRuby:!1,reason:c}},k=t=>[f.GL.InDogfoodingCohort,f.GL.InAlphaDogfoodingCohort,f.GL.ExternalOptIn].includes(t),T=t=>t.userSelection!==i.OptOut&&k(t.cohortStatus),x=(t,e,n)=>t&&!((t,e)=>{const n=(0,f.kG)(t);return!((0,f.Je)()&&!n||(e||(0,f.rk)())&&!n)})(t,n)?{isRuby:!1,reason:8}:(0,f.go)(e,(0,f.ls)())?{isRuby:!1,reason:7}:(0,f.R)()?{isRuby:!1,reason:9}:{isRuby:!0},A=t=>{if(t===f.GL.InMsftShipped)return{isRuby:!0,reason:19};if(k(t))return{isRuby:!0,reason:12};if((0,f.Yx)()&&t===f.GL.In1SCohortForAA)return{isRuby:!0,reason:20};if((0,f.mf)()&&t===f.GL.In1SCohortForAB)return{isRuby:!0,reason:11};if((0,f.rk)()&&t===f.GL.InUntargetedCohort)return{isRuby:!0,reason:14};if(t===f.GL.In1SCohortForAB){if("adult"!==u.T3.CurrentRequestTargetScope?.audienceMode)return{isRuby:!1,reason:23};if(!(0,f.O_)()&&!(0,f.R)()&&!(0,f._g)())return{isRuby:!1,reason:24}}return{isRuby:!1,reason:2}},$=({userSelection:t,cohortStatus:e})=>t!==i.OptOut&&e===f.GL.InMsftShipped,I=t=>(0,f.mf)()?t?f.GL.In1SCohortForAB:f.GL.Out1SCohortForAB:(0,f.Yx)()?t?f.GL.In1SCohortForAA:f.GL.Out1SCohortForAA:f.GL.Unknown;class P{constructor(){this.getIsRubyEligible=()=>Promise.resolve(this.isRubyEligible)}get isRuby(){return!0}get isUserOptedOut(){return!1}get isRubyEligible(){return!0}get isClassicToggleFlightEligible(){return!1}get isLoggingOnly(){return!1}updateUserSelection(t,e){}update1sCohort(t,e){}updateMarket(t){}get isRejectedByEdgeExpIsolation(){return!1}static getInstance(){return o.vv.get(f.Yc,()=>new P)}}var R=n(27261),M=n(16091),_=n(96851),E=n(41820),F=n(19548),D=n(89151),O=n(90905),N=n(98793),L=n(48172),B=n(57865);const U=["edgeChromium","views","msn","winWidgets","msnStudio"],W="_copilotDiscoverUX";var V;!function(t){t.UserSelection="usel"}(V||(V={}));class H{constructor(){if(this.getIsRubyEligible=()=>Promise.resolve(this.isRubyEligible),!U.includes(u.T3.AppType))return;(0,h.b)(),this.isRubyVariant="ruby"===a.Rb.ClientSettings?.bundleInfo?.variant,this._isRubyEligible=!u.T3.IsHeroNTP&&"kids"!==u.T3.CurrentRequestTargetScope?.audienceMode;const t=(0,l.Ri)(W);this._userChoice=null===t?null:"true"===t,(0,y.RO)().then(()=>{"kids"===u.T3.CurrentRequestTargetScope?.audienceMode&&this.isRubyVariant&&((0,g.vV)(m.YKQ,"Kids user hit ruby bundle","",{aace:(0,l.Ri)("aace"),childCookie:(0,l.Ri)(B.wX),pcdMode:a.Rb.ClientSettings.modes?.audienceMode||a.Rb.ClientSettings.audienceMode}),this.updateUserSelection(!1,!0))})}get isRuby(){return this.isRubyVariant||this._isRubyEligible&&!1!==this._userChoice}get isUserOptedOut(){return!1===this._userChoice}get isClassicToggleFlightEligible(){return!1}get isRubyEligible(){return this._isRubyEligible}get isLoggingOnly(){return!1}updateUserSelection(t,e=!1){if(t&&!this.isRubyEligible)return;const n=(0,l.Ri)(W),i=String(t);n!==i&&((0,l.Ub)(W,i,365),(0,f.cJ)(t),a.Rb.IsPrerender&&"visible"!==document.visibilityState||(0,s.TI)(14),e||window.setTimeout(()=>this.safeReload("usel"),100))}update1sCohort(t,e){const n=(0,c.a)().get("testRubyVersion"),i=t?.serviceContext?.rubyTargetedVersion||n;this._isRubyEligible&&(0,f.Kp)()&&(0,f.Oi)(i,!!n),(0,f.Oi)(i,!!n,"rubyTargetedVersionExt")}updateMarket(t){}safeReload(t){if(!(0,r.S)())return;const e=new URL(window.location.href),n=`sr${t}`,i=Number(e.searchParams.get(n))||0;e.searchParams.set(n,String(i+1)),e.searchParams.delete("rubyopt"),window.location.href=e.href}get isRejectedByEdgeExpIsolation(){return!1}static getInstance(){return o.vv.get(f.Yc,()=>new H)}}class z{constructor(){this._rsmDebugMarkers=new Set,this._rubyStateCookieValue=(0,l.Ri)(f.XO),this._rubyState={...f.hJ,...(0,f.KH)(this._rubyStateCookieValue)},this._isEnvironmentSupported=(0,f.eY)(void 0,!0),(0,f.Ve)(),(0,f.Kp)()&&(0,f.f_)(),(0,h.b)(),(0,f.pE)().then(t=>{this._pageSettings=t,this._arePageSettingsEligibleForImplicitRuby=(0,f.kG)(t),(0,f.Yl)(this._arePageSettingsEligibleForImplicitRuby),(0,f.l3)(this._pageSettings,this.updatePageSettings.bind(this))}),this._rsmDebugMarkers.add("c"),(0,f.BT)("RSRC",this._rsmDebugMarkers);{const t=(0,f.Bd)();if(t){const e={...this._rubyState,...t};this._rubyState.cohortStatus===e.cohortStatus&&this._rubyState.userSelection===e.userSelection||(this._rubyState=e,this.persistRubyState(this._rubyState),j("usero",1))}(0,f.T_)(String(!!this.isRuby),f.ET)}}get isRuby(){return(0,f.ls)()}get isRubyEligible(){return this.isRuby||this._isEnvironmentSupported}getIsRubyEligible(){return Promise.resolve(this.isRubyEligible)}get isLoggingOnly(){return!1}get isUserOptedOut(){return this._rubyState?.userSelection===i.OptOut}get isIn1SCohortForAB(){return this._rubyState?.cohortStatus===f.GL.In1SCohortForAB}get isClassicToggleFlightEligible(){return this.isIn1SCohortForAB&&!(0,f.rk)()&&!(0,f.O_)()}updateUserSelection(t,e){const n=t?i.ExplicitOptIn:i.OptOut;n!==this._rubyState?.userSelection&&(p.d.updateFeedPreference(t),this.persistRubyState({...this._rubyState,userSelection:n}),e||j("uselo"))}update1sCohort(t,e){(0,f.$y)(t,!0)}updateMarket(t,e){this._isEnvironmentSupported=(0,f.eY)(t,!0),e||j("uselm")}updatePageSettings(t){this._pageSettings={...this._pageSettings,...t};const e=(0,f.kG)(this._pageSettings);e!==this._arePageSettingsEligibleForImplicitRuby&&(this._arePageSettingsEligibleForImplicitRuby=e,j("uselp"))}persistRubyState({userSelection:t,cohortStatus:e}){const n=`${t}${f.fQ}${e}`;this._rubyStateCookieValue!==n&&(0,f.Ug)({cookieValue:this._rubyStateCookieValue,newCookieValue:n}),(0,l.Ub)(f.XO,n,f.ET)}get isRejectedByEdgeExpIsolation(){return!1}static getInstance(){return o.vv.get(f.Yc,()=>new z)}}function j(t,e){(0,s.TI)(14),(0,f.b6)(t,e??30,300)}const q=new Set(["en-us","en-ca","en-au","en-gb","en-in"]),G=new Set(["en-us","en-ca","en-au","en-gb","en-in","zh-cn"]),J=()=>"1"===(0,c.a)().get("fcruby")||(0,r.S)()&&"ruby"===(0,c.a)().get("bv"),Q=[],K=(t,e)=>{if(y.YT){for(;Q.length>0;){const[t,e]=Q.shift();y.YT?.addOrUpdateTmplProperty?.(t,e)}y.YT?.addOrUpdateTmplProperty?.(t,e)}else Q.push([t,e])},X=t=>{const e=String(t);K("rubyUX",e),(0,f.Kp)()&&N.Q.savePreferenceSetting(E.K5.ruby_ux_history,{setting:E.K5.ruby_ux_history,value:e,timestamp:Date.now(),source:"ntp"})},Y=(t,e,n="rubyTargetedVersion")=>{const i=Date.now(),r=`${t}|${y.YT.getRequestId()}|${e}|${i}`;K(n,r);const o={value:r};L.f.savePreferenceSetting(E.bJ.rubyTargetedVersion,o)};class Z{get isRuby(){return(0,f.ls)()}async getRubyEligibilityForClassicNTPUser(){return this.isRubyEligibleForClassicNTPUser}get _isRubyInternal(){return this._isRuby}get isRubyEligible(){return this._enableToggleButton}async getIsRubyEligible(){return await this.init(),this.isRubyEligible}get isRejectedByEdgeExpIsolation(){return(0,f.go)(this.isEdgeExpIsolationFlagEnabled,this.isRuby)}get isClassicToggleFlightEligible(){return this.isIn1SCohortForAB&&!(0,f.rk)()&&!(0,f.O_)()}get enableToggleButton(){return this._enableToggleButton}get isEnvironmentSupported(){return this.isEnvironmentSupportedInternal()}isEnvironmentSupportedInternal(t){const e=t||u.T3.CurrentMarket;return G.has(e)&&!u.T3.IsHeroNTP&&"kids"!==u.T3.CurrentRequestTargetScope?.audienceMode&&this.isSupportedDeviceType()&&!(0,f.SG)()}isSupportedDeviceType(){return(0,f.e2)()||!u.T3.isMobile&&"tablet"!==a.Rb.ClientSettings?.deviceFormFactor}get isOptIn(){return"1"===(0,c.a)().get("rubyopt")}get isExternalOptIn(){return"2"===(0,c.a)().get("rubyopt")&&!(0,c.a)().get("srusel")}get isOptedOutByDogfooding(){return this._isOptedOutByDogfooding}get isInRubyDogfoodFlight(){return(0,f.Ii)()||this.isOptIn||!1}get isRubySupported(){return this.isRubySupportedInternal()}get isUserOptedOut(){return this.rubyState.userSelection===f.ov.OptOut}get isLoggingOnly(){return(0,f.Yx)()}isRubySupportedInternal(t){return this.isEnvironmentSupportedInternal(t)}get isExternalOptInCohort(){return this.rubyState.cohortStatus===f.GL.ExternalOptIn}get isIn1SCohortForAB(){return this.rubyState.cohortStatus===f.GL.In1SCohortForAB}get isIn1SCohortForAA(){return this.rubyState.cohortStatus===f.GL.In1SCohortForAA}get isDogfoodingCohort(){return this.rubyState.cohortStatus===f.GL.InDogfoodingCohort||this.rubyState.cohortStatus===f.GL.InAlphaDogfoodingCohort}get isInTargetCohort(){if(this.isIn1SCohortForAB&&(0,f.mf)())return{isRuby:!0,reason:11};if(this.isDogfoodingCohort&&this.isInRubyDogfoodFlight)return{isRuby:!0,reason:12};if(this.isExternalOptInCohort)return{isRuby:!0,reason:13};if((0,f.rk)()&&this.isInUntargetedCohort)return{isRuby:!0,reason:14};if(this.isIn1SCohortForAB){if("adult"!==u.T3.CurrentRequestTargetScope?.audienceMode)return{isRuby:!1,reason:23};if(!(0,f.O_)()&&!(0,f.R)()&&!(0,f._g)())return{isRuby:!1,reason:24}}return{isRuby:!1,reason:2}}get isInUntargetedCohort(){return this.rubyState.cohortStatus===f.GL.InUntargetedCohort}constructor(){if(this.rubyState={userSelection:f.ov.Unknown,cohortStatus:f.GL.Unknown},this._isRuby=!1,this._enableToggleButton=!1,this._isOptedOutByDogfooding=!1,this.didInit=!1,this.forceRubyPage=J(),this.rsmDebugMarkers=new Set,this.isMsftInternal=(0,d.t)(),this.isRubyEligibleForClassicNTPUser=!1,this.removeCookieListener=()=>{document?.removeEventListener?.("visibilitychange",this.onRubyCookieChanged),window?.cookieStore?.removeEventListener?.("change",this.onRubyCookieChanged)},this.onRubyCookieChanged=(0,O.A)(t=>{if((0,f.mv)(t))return;if([f.GL.In1SCohortForAA,f.GL.Out1SCohortForAA,f.GL.In1SCohortForAB,f.GL.Out1SCohortForAB,f.GL.InUntargetedCohort].includes(this.rubyState.cohortStatus))return;const e=this.getIsRubyFromCookie(),n="ruby"===a.Rb.ClientSettings?.bundleInfo?.variant;"visible"===document.visibilityState&&(this._isRuby!==e||!e&&n)&&(0,f.b6)("rc",void 0,300)},100),"edgeChromium"!==u.T3.AppType&&"msnStudio"!==u.T3.AppType)return;this.rsmDebugMarkers.add("c"),(0,f.BT)("RSM",this.rsmDebugMarkers),(0,f.jI)();const t=this.getIsRubyFromCookieRaw(),e="true"===t;this.isEnvironmentSupported?((0,f.HW)(t||""),this.init()):e&&(0,r.S)()&&!(0,f.YS)()&&((0,h.b)(),(0,f.T_)("false",-1),this.setIsRubyAndReloadIfNeeded(void 0,!0))}async init(){if(this.didInit)return;this.didInit=!0,this.pageSettings=await(0,f.pE)();const t=(0,f.kG)(this.pageSettings);if((0,f.Yl)(t),this.isEdgeExpIsolationFlagEnabled=(await(0,w.hb)())?.enabled.includes("msRubyFlightingAllowed"),(0,h.b)(),(0,c.a)().get("rubyopt")&&(0,s.TI)(14),!this.forceRubyPage){if(!this.updateCookieAndStates())return}(0,f.vT)(t),this.setIsRuby(),this.isRubyEligibleForClassicNTPUser=(0,f.Vr)((0,r.S)()?{rubyState:this.rubyState,pageSettings:this.pageSettings,isEdgeExpIsolationFlagEnabled:this.isEdgeExpIsolationFlagEnabled}:void 0),this.isRubyEligibleForClassicNTPUser&&K("isRubyEligible",String(this.isRubyEligibleForClassicNTPUser)),this.forceRubyPage||(this._enableToggleButton=this.checkIsEnableToggleButton(),this.addCookieListener()),(()=>{const t=(0,l.Ri)(f.XO);K("currentRubyState",t)})(),window.addEventListener("beforeunload",()=>{const t={rsmDbg:Array.from(this.rsmDebugMarkers).join(",")};this.lastRubyCookieChangeReason&&this.isRuby&&!this._isRuby&&(t.lastCookieChangeReason=this.lastRubyCookieChangeReason),y.YT.sendLoadTimeEvent({markers:t})},{once:!0}),window.chrome.authPrivate?.onSignInStateChanged?.addListener(()=>{this.isRuby&&this.rubyState.cohortStatus==f.GL.In1SCohortForAB&&this.removeCookie(22)}),Promise.all([(0,D.dT)(),(0,_.GP)()]).then(()=>{const t=p.d.getCachedUserPrefData(),e=t?.value?.[0]?.userSettings?.rubyOptOut;void 0!==e&&y.YT.addOrUpdateTmplProperty("serverRubyOptOutStatus",String(e))})}updateCookieAndStates(){if("-1"===(0,c.a)().get("rubyopt"))return this._isOptedOutByDogfooding=this.getRubyStateCookie().hasRubyCookie,this.removeCookie(16),!1;const{userSelection:t,cohortStatus:e}=this.getRubyStateCookie(),n=a.Rb.ClientSettings?.bundleInfo?.variant;if("ruby"===n&&!this.getIsRubyFromCookie()&&!J()&&(0,r.S)()){if((0,g.vV)(m._uC,"Bundle variant mismatch error",`Got variant "${n}", but expected classic (no variant)`,{rsm:"RSM1",url:location.href}),e===f.GL.InDogfoodingCohort)return this.setRubyStateCookie({userSelection:f.ov.OptIn,cohortStatus:f.GL.InDogfoodingCohort}),(0,f.b6)("frv",2,300),!1;(0,f.b6)("frv",2,300)}this.rubyState={userSelection:t,cohortStatus:e},this.isExternalOptIn&&this.setExternalOptInCohort();const i=this.isExternalOptIn||this.rubyState.cohortStatus===f.GL.ExternalOptIn;return this.setUntargetedCohortIfNeeded(),this.setShippedCohortIfNeeded(),(t===f.ov.ExplicitOptIn||!this.shouldCleanupStateAndExitOutsideFlights(e))&&(this.isInRubyDogfoodFlight||(0,f.mf)()||(0,f.Yx)()||i||(0,f.rk)()||G.has(u.T3.CurrentMarket)?((0,f.Kp)()&&(0,f.f_)(),this.isOptIn&&this.setOptInCohort(),(i||this.isOptIn)&&this.initRubyCoachmark(),this.update1SCohortStatusBasedOnPageSettings(),!0):("ruby"===a.Rb.ClientSettings?.bundleInfo?.variant&&!J()&&this.removeCookie(17),!1))}shouldCleanupStateAndExitOutsideFlights(t){if(!(0,f.mf)()&&(t===f.GL.In1SCohortForAB||t===f.GL.Out1SCohortForAB))return this.removeCookie(18),this.rubyState={userSelection:f.ov.Unknown,cohortStatus:f.GL.Unknown},!0}setIsRuby(t){const{isRuby:e,reason:n}=this.checkIsRuby(t);this._isRuby=e,this.forceRubyPage||(J()||this.setIsRubyCookie(this._isRuby,void 0,n),this.isEnvironmentSupportedInternal()&&((0,f.mf)()&&this.isIn1SCohortForAB||(0,f.Yx)()&&this.isIn1SCohortForAA)?X(!0):X(this._isRuby))}getIsRubyFromCookie(){return"true"===this.getIsRubyFromCookieRaw()}getIsRubyFromCookieRaw(){return(0,l.Ri)(f.Bv)}initRubyCoachmark(){const{isRuby:t}=this.checkIsRuby();this._isRuby=t;!this.getIsRubyFromCookie()&&this._isRuby&&(0,f.v0)()}checkIsEnableToggleButton(){return this._isRuby||this.isRubySupported}checkIsRuby(t){return this.isRubySupportedInternal(t)?this.forceRubyPage?{isRuby:!0,reason:4}:this.rubyState.userSelection===f.ov.ExplicitOptIn?{isRuby:!0,reason:5}:this.rubyState.userSelection===f.ov.OptIn?{isRuby:!0,reason:6}:this.isRejectedByEdgeExpIsolation?{isRuby:!1,reason:7}:this.pageSettings&&!this.arePageSettingsEligibleForCohort(this.pageSettings)?{isRuby:!1,reason:8}:this.rubyState.userSelection!==f.ov.OptOut&&this.rubyState.cohortStatus===f.GL.InMsftShipped?{isRuby:!0,reason:19}:(0,f.R)()?{isRuby:!1,reason:9}:this.rubyState.userSelection===f.ov.OptOut?{isRuby:!1,reason:10}:this.isInTargetCohort:{isRuby:!1,reason:1}}setUserSelection(t){const e=t?f.ov.ExplicitOptIn:f.ov.OptOut,n=this.getRubyStateCookie().cohortStatus;e===f.ov.OptOut&&this.setIsRubyCookie(!1,-1,10),this.setRubyStateCookie({userSelection:e,cohortStatus:n}),p.d.updateFeedPreference(t)}updateUserSelection(t,e){this.setUserSelection(t),e||this.setIsRubyAndReloadIfNeeded(void 0,!0)}updateMarket(t,e){(0,f.p8)(t),this.setIsRubyAndReloadIfNeeded(t,!1,e)}setIsRubyAndReloadIfNeeded(t,e,n){this.init();const i=this._isRubyInternal;this.setIsRuby(t),(e||!n&&i!==this._isRubyInternal)&&(0,f.b6)("usel",void 0,300)}update1sCohort(t,e){this.set1SCohort(t,e),(t=>{const e=t?.serviceContext?.rubyTargetedVersion,n=t?.serviceContext?.isTestRubyVersion;e&&Y(e,!!n,"rubyTargetedVersionExt")})(t),(0,f.BT)("RSM",this.rsmDebugMarkers)}async set1SCohort(t,e){if(!t)return;if(this.rsmDebugMarkers.add("start1s"),(0,f.$y)(t),!this.isEnvironmentSupportedInternal())return void this.rsmDebugMarkers.add("noEnv");if(!(0,f.Yx)()&&!(0,f.mf)())return void this.rsmDebugMarkers.add("noSup");if(this.isDogfoodingCohort||this.isExternalOptInCohort)return void this.rsmDebugMarkers.add("dogOrOptIn");if(this.rubyState?.cohortStatus===f.GL.InMsftShipped)return void this.rsmDebugMarkers.add("msftShipped");if(t?.isStatic||t?.swCacheEnabled||t?.isPartial)return void this.rsmDebugMarkers.add("invalid1s");this.rsmDebugMarkers.add("1s");const n=t?.serviceContext?.rubyTargetedVersion||null,i=t?.serviceContext?.isTestRubyVersion,r=t?.serviceContext?.rubyEverSelected,o=e?.allowedRubyTargetedVersions?.split(","),s=((0,f._g)()||(0,f.aw)())&&!0===r||!(!n||!o?.some(t=>"all"===t||t===n));(0,f.Kp)()&&((0,f.L3)(this.rubyState.cohortStatus,!s),Y(n,!!i));const[a,c]=(0,f.Yx)()?[f.GL.In1SCohortForAA,f.GL.Out1SCohortForAA]:[f.GL.In1SCohortForAB,f.GL.Out1SCohortForAB],u=s?a:c;u===f.GL.Out1SCohortForAB&&this.rubyState.userSelection!==f.ov.ExplicitOptIn&&(this.rubyState.userSelection=f.ov.Unknown),this.rubyState.cohortStatus===f.GL.In1SCohortForAB&&u===f.GL.Out1SCohortForAB&&(0,g.vV)(m.S8B,"Server side signal indicates user is no longer in the Ruby cohort",void 0,{...m.S8B.pb});const d={userSelection:this.rubyState.userSelection,cohortStatus:u};this.setRubyStateCookie(d)}setExternalOptInCohort(){this.rubyState.cohortStatus=f.GL.ExternalOptIn,this.setRubyStateCookie({userSelection:f.ov.OptIn,cohortStatus:this.rubyState.cohortStatus})}setOptInCohort(){const t=(0,f.E9)()?f.GL.InAlphaDogfoodingCohort:f.GL.InDogfoodingCohort;this.rubyState.cohortStatus=t,this.setRubyStateCookie({userSelection:this.rubyState.userSelection,cohortStatus:t});const e=Date.now()+5184e6;var n;window.cookieStore?.set({name:"_EDGE_S",value:"O="+(n=t,n===f.GL.InAlphaDogfoodingCohort?"prg-ntprubyalpha":"prg-ntp1sruby"),expires:e})}update1SCohortStatusBasedOnPageSettings(){(0,f.mf)()&&(0,f.l3)(this.pageSettings,t=>{const{isRuby:e,reason:n}=this.checkIsRuby();this.setIsRubyCookie(e,void 0,n),"Theme"===t.backgroundImageProvider&&(0,f.sg)(this.pageSettings)&&a.Rb.IsPrerender&&"hidden"===document.visibilityState&&(0,s.TI)(14)})}setUntargetedCohortIfNeeded(){if((0,f.rk)()){const t=this.rubyState.cohortStatus,e=this.isRuby;if(this.rubyState.cohortStatus===f.GL.Unknown&&(this.rubyState.cohortStatus=f.GL.InUntargetedCohort,this.setRubyStateCookie(this.rubyState)),"Theme"===this.pageSettings.backgroundImageType&&t===f.GL.InUntargetedCohort&&e){const{isRuby:t,reason:e}=this.checkIsRuby();this.setIsRubyCookie(t,void 0,e),(0,s.TI)(14),(0,f.b6)("rthm",void 0,300)}(0,f.l3)(this.pageSettings,n=>{const{isRuby:i,reason:r}=this.checkIsRuby();this.setIsRubyCookie(i,void 0,r),"visible"===document.visibilityState&&"off"===this.pageSettings.feedSetting&&t===f.GL.InUntargetedCohort&&e&&this.rubyState.userSelection!==f.ov.OptOut&&((0,s.TI)(14),(0,f.b6)("roff",void 0,300)),e&&"Theme"===n.backgroundImageType&&a.Rb.IsPrerender&&"hidden"===document.visibilityState&&(0,s.TI)(14)})}else this.rubyState.cohortStatus===f.GL.InUntargetedCohort&&(this.rubyState.cohortStatus=f.GL.Unknown,this.rubyState.userSelection===f.ov.OptIn&&(this.rubyState.userSelection=f.ov.Unknown),this.setRubyStateCookie(this.rubyState))}setShippedCohortIfNeeded(){(0,f.kG)(this.pageSettings)&&(!(0,f.O4)()||this.isEdgeExpIsolationFlagEnabled)&&this.isMsftInternal&&q.has(u.T3.CurrentMarket)?(this.rubyState.cohortStatus=f.GL.InMsftShipped,this.setRubyStateCookie(this.rubyState),this.isRuby||this.setIsRubyAndReloadIfNeeded()):this.rubyState.cohortStatus===f.GL.InMsftShipped&&(this.rubyState.cohortStatus=f.GL.Unknown,this.setRubyStateCookie(this.rubyState))}arePageSettingsEligibleForCohort(t){const e=(0,f.kG)(t);return!((0,f.mf)()&&!e)&&!((0,f.rk)()&&!e)}checkIsRubySupportedMarket(t){return this.isInRubyDogfoodFlight&&G.has(t)}addCookieListener(){document?.addEventListener?.("visibilitychange",this.onRubyCookieChanged),window?.cookieStore?.addEventListener?.("change",this.onRubyCookieChanged),window?.addEventListener("beforeunload",this.removeCookieListener,{once:!0})}getRubyStateCookie(){const t=(0,l.Ri)(f.XO);if(!t)return{userSelection:f.ov.Unknown,cohortStatus:f.GL.Unknown,hasRubyCookie:!1};const[e,n]=t.split("_").map(Number);return{userSelection:e,cohortStatus:n,hasRubyCookie:!0}}setRubyStateCookie(t){if((0,f.YS)())return;this.rubyState=t;const e=`${t.userSelection}_${t.cohortStatus}`;(t=>{const{updatedRubyStateString:e,currentRubyStateString:n}=t,i=Date.now(),r=`${n}->${e}|${i}`;K("rubyState",r),(0,f.Kp)()&&N.Q.savePreferenceSetting(E.K5.ruby_state_history,{setting:E.K5.ruby_state_history,value:r,timestamp:i,source:"ntp"})})({updatedRubyStateString:e,currentRubyStateString:(0,l.Ri)(f.XO)}),(0,r.S)()&&(0,l.Ub)(f.XO,e,60);const{isRuby:n,reason:i}=this.checkIsRuby();this.setIsRubyCookie(n,void 0,i)}setIsRubyCookie(t,e,n){if((0,f.YS)())return;this.rsmDebugMarkers.add("up"),(0,f.BT)("RSM",this.rsmDebugMarkers);const i=(0,l.Ri)(f.Bv),o="true"===i,c=String(t);if(i!==c&&(o!==t&&((0,f.l4)(t),(!a.Rb.IsPrerender||"visible"===document.visibilityState)&&(0,s.TI)(14),t&&(0,f.v0)()),this.removeCookieListener(),(0,r.S)())){const i=(0,f.T_)(c,e??60);return i?(this._isRuby=t,this.lastRubyCookieChangeReason=n,n&&K("rubyrc",String(n)),(0,f.Z_)(n)):K("rubyrc",String(15)),i}return c&&(0,f.Wf)(c),!0}removeCookie(t){(0,r.S)()&&(this.lastRubyCookieChangeReason=t,(0,f.Z_)(t),(0,f.T_)(null,-1),(0,l.Ub)(f.XO,null,-1),window.cookieStore?.delete("_EDGE_S"),window.setTimeout(()=>this.onRubyCookieChanged(),100))}static getInstance(){return o.vv.get(f.Yc,()=>{const t=(0,R.iA)();return["half","full"].includes(F._3.getQueryParameterByName("ucexperience",t))?new P:(0,f.EF)()?new H:(0,f.SE)()?new z:(0,f.e)()?new v:new Z})}}const tt=(0,M.G)(Z,{bindMethod:!0,forceLazy:!0})},11372:function(t,e,n){n.d(e,{EG:function(){return o},MJ:function(){return i},MS:function(){return s},b5:function(){return r}});const i={Undefined:0,Header:1,Footer:2,TopNavBar:3,NavBar:4,DropDown:5,Section:6,Carousel:7,Module:8,SearchBox:9,InputBox:10,ActionButton:11,Interaction:12,Headline:13,Legacy_Navigate:14,Entity:15,Legacy_StructuredData:16,Legacy_AppStore:17,Legacy_Launch:18,Legacy_CmsPromotions:19,Legacy_MicrosoftWebStore:20,Legacy_XboxStore:21,Legacy_OfficeStore:22,Legacy_Install:23,Legacy_PartnerLinks:24,Legacy_SponsoredContent:25,Legacy_Follow:26,Legacy_Unfollow:27,Legacy_More:28,Topic:29,Provider:30,Legacy_Close:36,Legacy_Share:37,Legacy_Like:38,Legacy_Dislike:39,Legacy_Unlike:40,Legacy_Undislike:41,Legacy_Mute:42,Legacy_Unmute:43,Legacy_Cancel:44,Legacy_Manage:45,NewStories:46,AutoSuggest:47,Tile:49,TrendingNews:50,AllCoverage:51,Report:52,MsccCookieComplianceBanner:54,CookieWallCookieComplianceBanner:57,FRE:60,VideoPlayer:61,ContentCard:62,SubmitForm:63,TrafficCard:64,WeatherCard:65,TravelDestinationCard:66,FitnessWorkoutVideo:67,BingHealthFitnessCard:68,FamilyCard:69,FitnessCard:70,HealthQnACard:71,HealthTipCard:72,HealthFitnessCarousel:73,CovidCard:74,Audio:75,ShoppingAd:76,ContentGroup:77,AicreationCard:78,Game:79,HealthRiverCard:80,Augment:81,Manga:82,NotificationCenter:85,MomentInTime:86},r={Undefined:0,StructuredData:1,AppStore:2,CmsPromotions:3,MicrosoftWebStore:4,XboxStore:5,OfficeStore:6,PartnerLinks:7,SponsoredContent:8,ExternalLink:10,SearchPromo:11,Feed:12,Article:13,Gallery:14,Video:15,Audio:16,Settings:17,DisplayAd:18,OfficeDocument:19,App:20,SearchResult:21,VideoAd:22,Map:23,Comment:24,Profile:25,Coachmark:26,TrendingSearch:27,AutoSuggestSearch:28,SearchHistory:29,TextSearch:30,TopSites:31,SearchLink:32,ImageSearch:33,VoiceSearch:34,Toast:35,Greeting:36,Image:37,Banner:38,Waffle:39,Notification:40,QnaTopic:41,QnaContent:42,Publisher:43,Topic:44,LayoutToggle:45,WebContent:46,FinanceTicker:47,CashbackOffer:48,AiCharacter:49,FoodItem:50,FitnessChallenge:51,Overlay:52,Inspiration:53,DailyDiscovery:54,SegmentAugment:55,Upsell:56,UpsellLearnMore:57,WeatherHero:58,UpsellTooltip:60,UpsellGetApp:61,UpsellAppStore:62,UpsellGooglePlay:63,DailyBrief:64,Gem:65},o={Click:"click",Hover:"mouseenter",MouseLeave:"mouseleave",Submit:"submit",View:"view",RightClick:"rightclick",Wheel:"wheel",KeyPress:"keypress",HorizontalSwipe:"hswipe",MiddleClick:"middleclick",VerticalSwipe:"vswipe",Launch:"launch"},s={Undefined:0,Navigate:1,ContextMenu:2,Pin:3,Unpin:4,Rearrange:5,Remove:6,Add:7,Open:8,View:9,Follow:10,Unfollow:11,More:12,Close:13,Share:14,Like:15,Dislike:16,Unlike:17,Undislike:18,Mute:19,Unmute:20,Cancel:21,Launch:22,Install:23,Manage:24,Show:25,MuteCancel:26,Save:27,Hide:28,Unhide:29,Customize:30,Suspend:31,Clear:32,SignIn:33,SignOut:34,UndoSave:35,TurnOn:36,TurnOff:37,Forward:38,Response:39,Report:40,ZoomIn:41,ZoomOut:42,Comment:43,Sort:44,Love:45,Surprised:46,Thinking:47,Sad:48,Angry:49,TextSearch:50,ImageSearch:51,UndoRemove:52,Rename:53,SearchLink:54,VoiceSearch:55,Complete:56,Play:57,Pause:58,Seek:59,Volume:60,ClosedCaptions:61,Fullscreen:62,Restore:63,Replay:64,Copy:65,Reactlike:66,UnReactlike:67,UnLove:68,UnSurprised:69,UnThinking:70,UnSad:71,UnAngry:72,ReportAd:73,Refresh:74,Paginate:75,Click:76,Hover:77,SelectProduct:78,Signup:79,CompleteOrder:80,Model3DInteraction:81,PushNotificationReceive:82,PushNotificationShow:83,PushNotificationClick:84,PushNotificationHmsClick:85,Expand:86,Collapse:87,NoSearchQuerySubmit:88,Feedback:89,QualityChange:90,ProtocolLaunch:91,SydneySummary:92,SydneyTopQuestions:93,SydneyKeyTakeaways:94,SydneyDegreeOverview:95,SydneyFactCheck:96,SydneyMore:97,LeftSwipe:98,RightSwipe:99,ContinueToMobileQrCode:100,CustomContextMenu:101,PlayBackSpeedChange:102};var a;!function(t){t[t.Empty=0]="Empty",t[t.SearchBox=1]="SearchBox",t[t.TopSites=2]="TopSites",t[t.Suggested=4]="Suggested",t[t.ContentFeed=8]="ContentFeed",t[t.WinFRE=16]="WinFRE",t[t.BingImage=32]="BingImage",t[t.ContentBelowTheFold=64]="ContentBelowTheFold",t[t.CustomModeOption=128]="CustomModeOption",t[t.GreetingEnabled=256]="GreetingEnabled",t[t.HeadingsOnly=512]="HeadingsOnly",t[t.StripeLayout=1024]="StripeLayout",t[t.Peek=2048]="Peek"}(a||(a={}))},11566:function(t,e,n){n.d(e,{$G:function(){return g},Br:function(){return d},Cd:function(){return u},Ej:function(){return w},Jh:function(){return c},Jo:function(){return v},Om:function(){return p},Rm:function(){return l},cn:function(){return f},em:function(){return S},fc:function(){return m},g0:function(){return h},yM:function(){return y}});var i=n(85593),r=n(50091),o=n(31086);const s=-1,a=[-5,-8,-4,-6,-7];function c(t,e,n){const i={props:{notificationDurationMs:e,closeToastNotificationHandler:n},timerId:null,startTime:e,remainingTime:e,paused:!1};t.currentToastTimerHandle?.timerId&&window.clearTimeout(t.currentToastTimerHandle.timerId),t.currentToastTimerHandle=i,t.currentToastTimerHandle.startTime=Date.now(),e&&e!==1/0&&(t.currentToastTimerHandle.timerId=window.setTimeout(()=>{t.currentToastTimerHandle.props.closeToastNotificationHandler(!0)},e))}function u(t){t.currentToastTimerHandle&&(t.currentToastTimerHandle.paused||(t.currentToastTimerHandle.timerId&&(window.clearTimeout(t.currentToastTimerHandle.timerId),t.currentToastTimerHandle.remainingTime-=Date.now()-t.currentToastTimerHandle.startTime),t.currentToastTimerHandle.paused=!0))}function d(t){t.currentToastTimerHandle&&t.currentToastTimerHandle.paused&&t.currentToastTimerHandle.remainingTime&&(t.currentToastTimerHandle.props.notificationDurationMs&&t.currentToastTimerHandle.props.notificationDurationMs!==1/0&&(t.currentToastTimerHandle.startTime=Date.now(),t.currentToastTimerHandle.timerId=window.setTimeout(()=>{t.currentToastTimerHandle.props.closeToastNotificationHandler(!0)},t.currentToastTimerHandle.remainingTime)),t.currentToastTimerHandle.paused=!1)}function l(t,e,n,i,o,s){if(t){const{left:a,right:c,bottom:u,top:d}=t.getBoundingClientRect(),l=e.getBoundingClientRect(),h=i-c>r.p$,f=i-a>r.p$;let p=h?a-l.left:c-r.p$-l.left,g=f?l.right-a-r.p$:l.right-c;h||f||(s?p=0-l.left:g=0-l.right);const m=o-u-r.Fp>n,w=d>=n;let y="auto";m&&(y=u-l.bottom+r.Fp+"px"),m||w||(y=-d+"px");const v=m?"auto":l.bottom-u+r.g9+r.Fp+"px";return s?`--dialog-left:${p}px;--dialog-top:${y};--dialog-bottom:${v};`:`--dialog-right:${g}px;--dialog-top:${y};--dialog-bottom:${v};`}return s?`--dialog-left:0px; --dialog-top:${r.Fp}px;`:`--dialog-right:0px; --dialog-top:${r.Fp}px;`}function h(t){if(!t?.mostVisitedAvailable)return[];const e=[],n=new Set,i=new Set,o=new Set,s=new Set;return t.mostVisited.forEach(a=>{const c=t.getMostVisitedItemData(a.rid),u={rid:a.rid,dataGenerationTime:c.dataGenerationTime,faviconUrl:a.faviconUrl,domain:c.domain,title:c.title,tileSource:c.tileSource,tileTitleSource:c.tileTitleSource,url:c.url,direction:c.direction,enforcement:a.enforcement,customImagePart:a.customImagePart};if(0!=c.tileSource)return e.push(u),!o.has(u.url)&&o.add(u.url),!i.has(u.domain)&&i.add(u.domain),void(!s.has(u.title)&&s.add(u.title));const d=(c.domain??y(c.url)).replace("www.","");!n.has(d)&&n.add(d),r.MC.includes(d)||function(t,e){if(r.jw&&r.jw[t])for(let n=0;n<r.jw[t].length;n++)if(0===r.jw[t][n].localeCompare(e,{sensitivity:"accent"}))return!0;return!1}(d,c.title)||o.has(u.url)||(i.has(u.domain)||n.has(d))&&s.has(u.title)||e.push(u)}),n.clear(),i.clear(),o.clear(),e}function f(t,e,n,r,s){const a=function(t,e,n){const r=t.recommendedSites||[],o=i.N9()||{},s=i.MW()||{},a=new Set,c=n.map(t=>t.url),u=r.filter(t=>{const e=y(t.url);if(!(s[e]||o[t.url]||c.includes(t.url)||a.has(t.url)))return a.add(t.url),t}),d=n.filter(t=>4===t.tileSource||3===t.tileSource).length,l=e-d;return u.splice(0,l)}(t,e,n),c=a.map(t=>t.url);let u;n=n.filter(t=>{if(!c.includes(t.url))return t}),u=0===n.length&&0===s.length?1:s.length>0?s[s.length-1].rid+1:n[n.length-1].rid+1e3;const d=a.map(t=>{r.set(u,t);const e=t.faviconId??i.aQ(t.faviconUrl);return{...t,faviconUrl:i.VG(e),tileSource:-4,rid:u++,customImagePart:t.customImagePart??"image"}});return(0,o.H)(n,d)}function p(t,e,n){if(t&&e){const i=t.fixupAndValidateUrl(e.href);if(i)return t.updateCustomLink(s,i,n||e.hostname),!0}return!1}function g(t,e,n,r,o,s){if(n){if(i.x_(n.url),s&&o(),a.includes(n.tileSource))return void e();r&&n.rid&&r.deleteMostVisitedItem(n.rid)}}function m(t,e,n,r,o){if(a.includes(r))return i.TG(o),void t();if(e&&n){const t=e.getMostVisitedItemData(n),i=t?t.tileSource:null;4===i||3===i?e.undoCustomLinkAction(n):0!==i&&2!==i||e.undoMostVisitedDeletion(n)}}function w(t,e,n,i,r,o){if(e&&i){let a=e.fixupAndValidateUrl(i.href);if(a&&r){return e.getMostVisitedItemData(r)?(a=e.getMostVisitedItemData(r).url!==a?a:"",e.updateCustomLink(r,a,o||i.hostname)):(e.onmostvisitedchange=n,e.updateCustomLink(s,a,o||i.hostname),t()),!0}}return!1}function y(t){try{return new URL(t).hostname}catch{return""}}function v(t,e){const n=t.filter(t=>t.isSponsored);if(0===n.length)return e;const r=n.map(t=>({faviconUrl:t.faviconUrl??i.VG(t.faviconId),title:t.title,url:t.url,isSponsored:t.isSponsored})),o=e.filter(t=>t.isSponsored),s=r.concat(o).filter((t,e,n)=>e===n.findIndex(e=>e.title?.toLocaleLowerCase()===t.title?.toLocaleLowerCase()));return e.map(t=>t.isSponsored&&s.length>0?s.shift():t)}const b=new Set(["index","welcome","working","loading","interstitial","redirect","continue","https","access denied","sign in","signin","sign in to your account","signup","signing in","sign up","log in","login","logging in","home","monitored access"]);function S(t,e){let n=t.toLowerCase().trim();if(n.endsWith("...")&&(n=n.slice(0,-3)),b.has(n)){if((e.startsWith("https://")||e.startsWith("http://"))&&(e=new URL(e).hostname),e.startsWith("www.")){const t="www.";e=e.slice(t.length)}return e}return t}},11622:function(t,e,n){n.d(e,{yN:function(){return v}});var i=n(42277),r=n(96950),o=n(29194),s=n(22360),a=n(52201),c=n(46140),u=n(40371),d=n(98216),l=n(11372),h=n(47149),f=n(65022),p=n(89151),g=n(77246);const m={};function w(t,e){if(!e)return;const{properties:n,attributes:r}=e;if(n&&Object.assign(t,n),r)for(const[e,n]of Object.entries(r))"boolean"==typeof n?i.d.setBooleanAttribute(t,e,n):"number"==typeof n?t.setAttribute(e,n.toString()):t.setAttribute(e,n)}class y extends o.Yi{bind(t){t.onUnbind(this);const e=t.targets[this.targetNodeId],{events:n,properties:i,instanceKey:r}=this.options||{};if(n)for(const[t,i]of Object.entries(n))e.addEventListener(t,i);let o;if(r&&(o=m[r]),o)return o.elements.push(e),!e.telemetryObject&&i?.telemetryObject&&(e.telemetryObject=i.telemetryObject),void w(e,o.options);Object.assign(e,i)}unbind(t){const e=t.targets[this.targetNodeId];if(this.options?.events)for(const[t,n]of Object.entries(this.options?.events))e.removeEventListener(t,n);const n=this.options?.instanceKey;if(n){const t=m[n];if(t){const n=t.elements.indexOf(e);n>=0&&t.elements.splice(n,1)}}}}function v(t,e){if(!t)return;if(!t.configRef||!t.configRef.experienceType)return void d.YT.sendAppErrorEvent({...f.fnS,message:`ConfigRef for InstanceId "${t?.instanceId}" is ${t?.configRef?"invalid":"missing"}`});e&&e.ttvrMarkerAggregate&&(0,p.vj)(t.configRef.experienceType,e.ttvrMarkerAggregate,!0);const n=function(t,e){const{configRef:n}=t,i=function(t){const e=t?.properties;return e?.cardLayout}(e),r=function(t){const e=t?.properties;return e?.cardType}(e),o=r?`_${r}`:"";return`${n.experienceType}_${n.instanceSrc}_${n.sharedNs||""}_${t.instanceId}_${i||""}${o}`}(t,e);if(!1!==e?.memoize&&(0,g.S)()){const i=m[n];let r;if(i){if(e)for(const t of i.elements)w(t,e);i.options=e,r=i.template}else r=b(t,n,e),m[n]={template:r,options:e,elements:[]};return r}return b(t,n,e)}function b(t,e,n){let i=n?.telemetryObject;if(!i){const e={type:l.MJ.Module,name:t.configRef.experienceType};i=new h.$(e)}const o={...n?.properties,telemetryObject:i};let d;!1!==n?.includeTelemetryTag&&(d=i.getMetadataTag());const f={instanceKey:e,events:n?.events,properties:o},p=(0,s.dt)(t),g=(0,a.v)(t),m=(0,u.lKb)(p);(0,c.uC)(t);const w=Object.entries(n?.attributes??{}).map(([t,e])=>"boolean"==typeof e?e?t:"":`${t}=${e}`).join(" ");return r.qy`<${r.qy.partial(m)} config-instance-src=${r.qy.partial(g)} config-shared-ns=${e=>t.configRef?.sharedNs} instance-id=${r.qy.partial(t.instanceId)} data-t=${t=>d} ${function(t){return t?new y(t):""}(f)} ${r.qy.partial(w)}></${r.qy.partial(m)}>`}o.dg.define(y)},11917:function(t,e,n){var i;n.d(e,{y:function(){return i}}),function(t){t.Location="Location",t.Weather="Weather",t.Finance="Finance",t.Team="Team",t.League="League",t.Player="Player",t.Traffic="Traffic",t.Widget="Widget",t.TopicFeed="TopicFeed",t.CasualGame="CasualGame",t.Horoscope="Horoscope"}(i||(i={}))},12034:function(t,e,n){n.d(e,{l:function(){return c},lQ:function(){return s}});var i=n(93468),r=n(65022);var o=n(6092);n(94623);"object"!=typeof window||!window.chrome||window.chrome.webview,new class{constructor(){this._isTrue=!1,this.onTrueCallbacks={}}isTrue(){return this._isTrue}reset(){this._isTrue=!1,this.onTrueCallbacks={}}sub(t,e){this._isTrue?e&&e():t&&e&&"function"==typeof e&&(this.onTrueCallbacks[t]=e)}unsub(t){t&&this.onTrueCallbacks[t]&&delete this.onTrueCallbacks[t]}setTrue(){if(this._isTrue)return;this._isTrue=!0;Object.keys(this.onTrueCallbacks).forEach(t=>{this.onTrueCallbacks[t]&&this.onTrueCallbacks[t]()}),this.onTrueCallbacks={}}};const s=()=>{let t=!1,e=!1;try{const{shellFeedsExperienceInfo:n}=c()||{};if(!n)return!1;t=0===n.buttonInteraction,e=n.isWebviewVisible}catch(t){return(0,i.vV)(r.s2B,"Error with shellFeedsExperienceInfo API for isWindowShellPageInBackground",`Thrown error: ${t}`),!1}return u("prg-1sw-wv2bgup")?t:u("prg-1sw-2wv2bgup")?!e:u("prg-1sw-3wv2bgup")?t||!e:!e&&t};const a=u("prg-1sw-apiproxy"),c=()=>{if(window.ShellFeedsApp)return a?new Proxy(window.ShellFeedsApp,{get(t,e,n){try{if("isProxy"===e)return!0;if("toJSON"===e)return()=>function(t){const e={},n=Object.getOwnPropertyNames(t);for(const i of n)e[i]=t[i];return JSON.stringify(e)}(t);if("shellFeedsExperienceInfo"===e||"authManager"===e)return new Proxy(t[e]||{},this);const n=e in t?t[e]:void 0;return"function"==typeof n?n.bind(t):n}catch(t){!function(t,e){(0,i.c_)(e||new Error("Property not found"),r.s2B,"shellFeedsAppApi error",`API: ${t}`)}(e,t)}}}):window.ShellFeedsApp};!function(){try{const{shellFeedsExperienceInfo:t}=c()||{};return!!t&&!1===t.showPinToTaskbarBanner}catch(t){return!1}}();function u(t){return(o.T3&&o.T3.CurrentRequestTargetScope&&o.T3.CurrentRequestTargetScope.pageExperiments||[]).includes(t)}},12801:function(t,e,n){n.d(e,{R:function(){return a}});var i=n(51947),r=n(974),o=n(89980),s=n(75084);const a=(t,e)=>({ver:`edgenext.${i.ZU.ver}.1`,spec:{...i.ZU.spec,wpoData:{clientValue:()=>(0,o.Lg)().getItem(t)},breakpoint:{clientValue:()=>(0,s.UE)(window.innerWidth,e||(0,r.v3)())}}})},12870:function(t,e,n){n.d(e,{Th:function(){return x},Rb:function(){return A}});var i=n(33918),r=n(84397),o=n(17720),s=n(16091),a=n(27261),c=n(77246),u=n(67387),d=n(28024),l=n(19548),h=n(89980),f=n(43889),p=n(28828),g=n(93468),m=n(65022),w=n(88294),y=n(38700);function v(t){return"shd_"+t}var b=n(78629),S=n(10160),C=n(98216);const k="__HeadDataInstance__";class T{get Locale(){return this.locale}get MarketDir(){return this.marketDir}set MarketDir(t){this.marketDir=t}get CurrentFlights(){return this.currentFlights||""}set CurrentFlights(t){this.currentFlights=t,this.currentFlightSet=new Set((t||"").split(",")),this.currentFlightSet?.has(i.r7)||this.setSweeperStoredHeadData(r.GD.FlightIdKey,this.currentFlights)}get AppFlights(){return this.appFlights}get CurrentFlightSet(){return this.currentFlightSet}get ClientSettings(){return this.clientSettings}set ClientSettings(t){this.clientSettings=t}get Diagnostics(){return this.diagnostics}set Diagnostics(t){this.diagnostics=t}get EnableCMSPPEConfigs(){return this.enableCMSPPEConfigs}get EdgeNTPHeader(){return this.edgeNTPHeader}set EdgeNTPHeader(t){this.edgeNTPHeader=t}get UserIsSignedIn(){return this.userIsSignedIn}get IsPreload(){return this.isPreload}set IsPreload(t){this.isPreload=t}get IsPrerender(){return this.isPrerender}set IsPrerender(t){this.isPrerender=t}get IsBlendedEnterprise(){return this.isBlendedEnterprise}set IsBlendedEnterprise(t){this.isBlendedEnterprise=t}get IsServiceWorkerCache(){return this.isServiceWorkerCache}get LastKnownAppVersion(){return this.lastKnownAppVersion}get AnonCookieName(){return this.anonCookieName}set AnonCookieName(t){this.anonCookieName=t}get SsoComplete(){return this.ssoComplete}get AadState(){return this.aadState}set AadState(t){this.aadState=t}set LocaleName(t){this.locale=t}get SelectedFeedPivot(){return this.selectedFeedPivot}set SelectedFeedPivot(t){this.selectedFeedPivot=t}get LastSelectedPivot(){return this.lastSelectedPivot}set LastSelectedPivot(t){this.lastSelectedPivot=t}get SwitchedPivot(){return this.switchedPivot}set SwitchedPivot(t){this.switchedPivot=t}get AdsNumberLines(){return this.adsNumberLines||""}set AdsNumberLines(t){this.adsNumberLines=t}constructor(t){this.currentFlightSet=new Set,this.enableCMSPPEConfigs=!1,this.initializeHeadData(t)}static getInstance(){return o.vv.get(k,()=>new T)}static resetInstance(t){const e=new T(t);return o.vv.set(k,e),A=(0,s.G)(T),A}initializeHeadData(t){if(t)return void this.initializeFromData(t);if(this.newRidNeeded=void 0,this.lastUsedActivityIdBacking=void 0,this.locationSearch=(0,a.iA)(),this.htmlElement=(0,c.S)()?(0,a.F)(u.oC.html)[0]:null,this.headElement=(0,c.S)()?(0,a.F)(u.oC.head)[0]:null,this.applicationCache=(0,c.S)()?window.applicationCache:null,this.selectedFeedPivot="",this.widgetSettingsElement=(0,c.S)()?(0,a.V)(S.V3)[0]:null,!this.htmlElement||!this.headElement)return;this.initializeFromDom(),window&&window.navigator&&window.navigator.serviceWorker&&window.navigator.serviceWorker.controller&&(this.isServiceWorkerCache=!0),(this.isServiceWorkerCache||window.__useCachedApp)&&(this.initializeFromStorage(),this.initializeLastUsedActivityId());const e=(0,d.YP)(this.clientSettings&&this.clientSettings.locale),n=this.clientSettings&&e&&e.language&&e.market;this.locale=n?(0,d.Ah)(e):"";const i=this.htmlElement.getAttribute(u.y_);this.marketDir=i&&i.toLocaleLowerCase()||"",this.setQueryItemProvidedValues();const r=(this.widgetSettingsElement||this.headElement).getAttribute(u.js);if(r){const t=(0,p.B)(r);this.anonCookieName=t.anonckname,this.userIsSignedIn=1===t.signedin}l._3.getQueryParameterByName("backgroundpreload",this.locationSearch)&&"hidden"===document.visibilityState&&(this.isPreload=!0,this.logDocumentVisibility()),l._3.getQueryParameterByName("prerender",this.locationSearch)&&"hidden"===document.visibilityState&&(this.isPrerender=!0,this.logDocumentVisibility()),(0,c.S)()&&window.ShellFeedsApp&&window.ShellFeedsApp.shellFeedsExperienceInfo&&!window.ShellFeedsApp.shellFeedsExperienceInfo.isWebviewVisible&&0===window.ShellFeedsApp.shellFeedsExperienceInfo.buttonInteraction&&(this.isPreload=!0),this.setIsBlendedEnterprise(),this.maybeUpdateNewTabPageLinkIcon()}get lastUsedActivityId(){if(this.lastUsedActivityIdBacking)return this.lastUsedActivityIdBacking;const t=this.getStoredActivityIdKey(),e=(0,h.Lg)().getItem(t);return e&&(this.lastUsedActivityIdBacking=(0,p.B)(e)),this.lastUsedActivityIdBacking}set lastUsedActivityId(t){const e=this.getStoredActivityIdKey();if(t){if(t.id&&t.ts){try{(0,h.Lg)().setItem(e,JSON.stringify(t),!1)}catch(t){const e=t&&t.message;(0,C.RO)().then(()=>{(0,g.vV)(m.Ys5,e)})}this.lastUsedActivityIdBacking=t}}else(0,h.Lg)().removeItem(e)}get storedHeadData(){return function(t){const e=v(t),n=(0,h.Lg)().getItem(e);return n?(0,p.B)(n):null}(this.clientSettings.pagetype)}set storedHeadData(t){!function(t,e){const n=v(t);e?(0,h.Lg)().setItem(n,JSON.stringify(e)):(0,h.Lg)().removeItem(n)}(this.clientSettings.pagetype,t)}initializeFromData(t){this.clientSettings=t.clientSettings,this.edgeNTPHeader=t.edgeNTPHeader,this.selectedFeedPivot=t.edgeNTPHeader?.selectedFeedPivot,this.setFlights(t.clientInfo),this.appFlights=(0,d.lC)(t.canvasInfo),this.setQueryItemProvidedValues();const e=(0,d.YP)(this.clientSettings&&this.clientSettings?.locale),n=this.clientSettings&&e&&e.language&&e.market;this.locale=n?(0,d.Ah)(e):"",this.marketDir=t.marketDir&&t.marketDir.toLocaleLowerCase()||"",this.setIsBlendedEnterprise()}initializeFromDom(){const t=this.widgetSettingsElement||this.headElement;this.setFlights(t.getAttribute(u.pq)),this.appFlights=(0,d.lC)(t.getAttribute(u.Xp)),this.setAdsNumberLines(t.getAttribute(u.Nn));const e=t.getAttribute(u.Ah);if(!e)return;if(this.clientSettings=(0,p.B)(e),!this.clientSettings)return;const n=t.getAttribute(u.gR);this.diagnostics=(0,p.B)(n),this.calculateForwardableParams();const{pagetype:i}=this.clientSettings;if(!i){const e=t.getAttribute(u.PO);this.clientSettings.pagetype=null==e?void 0:e}if(i)try{const t=(0,h.Lg)().getObject(u.k2.pageVersions)||{};this.lastKnownAppVersion=t[i];const{bundleInfo:e}=this.clientSettings;e&&this.lastKnownAppVersion!==e.v&&(t[i]=e.v,(0,h.Lg)().setObject(u.k2.pageVersions,t))}catch{w.v.log(`${this.logPrefix()} couldn't complete local storage related operation.`)}}initializeFromStorage(){const t=this.storedHeadData;t&&this.populateFromApiResponse(t)}populateFromApiResponse(t){if(!t)return;const e=t.clientSettings,n=t.info;if(this.appFlights=(0,d.lC)(t.canvasInfo),!e||!n)return;if(this.clientSettings.pageGenTime>=e.pageGenTime)return void(this.storedHeadData=null);const i=this.clientSettings.queryparams,r=this.clientSettings&&this.clientSettings.bundleInfo&&this.clientSettings.bundleInfo.v;this.clientSettings=e,this.clientSettings.bundleInfo=Object.assign(this.clientSettings.bundleInfo||{},{v:r}),this.clientSettings.queryparams=i,this.calculateForwardableParams(),this.setFlights(n)}calculateForwardableParams(){const t=this.clientSettings?this.clientSettings.queryparams:"";if(!t)return;const e=t.toLocaleLowerCase(),n=["fdhead","item"].map(t=>{const n=l._3.getQueryParameterByName(t,e);return n?`${t}=${encodeURIComponent(n)}`:null}).filter(t=>t);this.clientSettings.forwardablequeryparams=n.join("&")}initializeLastUsedActivityId(){const t=this.lastUsedActivityId,e=this.clientSettings.aid,n=(0,y.A)(this.clientSettings.pageGenTime).getTime();this.newRidNeeded=!(!t||!n||t.id!==e);const i="edgeChromium"!==this.clientSettings.apptype||window.ssrExtensionLoaded;n&&(!t||n>t.ts)&&i&&(this.lastUsedActivityId={id:e,ts:n})}setFlights(t){this.CurrentFlights=((/f:\s*([^;]+)/i.exec(t)||{})[1]||"").toLowerCase(),this.currentFlightSet=new Set(this.currentFlights.split(","))}setSweeperStoredHeadData(t,e){if(!t)return;const n=v("sweeper"),i=f.sZ.getObject(n)||{};e?i[t]=e:delete i[t],f.sZ.setObject(n,i)}setIsBlendedEnterprise(){this.IsBlendedEnterprise=this.clientSettings&&"enterprise"===this.clientSettings.audienceMode&&this.clientSettings.browser&&"edgeChromium"===this.clientSettings.browser.browserType&&parseInt(this.clientSettings.browser.version)>=b.Wb}setQueryItemProvidedValues(){const t=l._3.getParamsWithItems((0,a.iA)(),!0),e=t.find(t=>"cms"===t.key);this.enableCMSPPEConfigs=e&&"ppe"===e.value,this.setCurrentFlightsTestOverride(t)}setCurrentFlightsTestOverride(t){if((0,a.VQ)().toLowerCase().includes("localhost")&&t){const e=t.find(t=>"flights"===t.key);e&&(this.currentFlights=e.value,this.currentFlightSet=new Set(this.currentFlights.split(",")))}}setAdsNumberLines(t){this.AdsNumberLines=(/^f:\s*([^;]+)/i.exec(t)||{})[1]||""}getStoredActivityIdKey(){return"sai_"+this.clientSettings.pagetype}logPrefix(){return"HeadData:"+((0,c.S)()?"":` [Head:${this.widgetSettingsElement||this.headElement}] and [Html:${this.htmlElement}]`)}logDocumentVisibility(){(0,c.S)()&&((0,m.RWs)({isVisible:"visible"===document.visibilityState}),document.addEventListener("visibilitychange",()=>{(0,m.RWs)({isVisible:"visible"===document.visibilityState})}))}maybeUpdateNewTabPageLinkIcon(){if(!this.CurrentFlightSet?.has("prg-newntpicon")||"edgeChromium"!==this.clientSettings?.apptype)return;const t="localhost.msn.com"===(0,a.VQ)()?"https://assets.msn.com/statics/icons/ntp-favicon.png":"https://assets.msn.com/statics/icons/favicon_newtabpage.png",e=Array.from(document?.head?.getElementsByTagName("link")||[]).find(e=>e.href===t);e&&(e.href="https://assets.msn.com/staticsb/statics/pr-5433783/edge-favicon/edge_ntp_favicon.png")}}const x=T.getInstance;let A=(0,s.G)(T)},12951:function(t,e,n){n.d(e,{n:function(){return i}});const i=new Map([["en",["en-xl","en-ae","en-au","en-ca","en-gb","en-ie","en-in","en-my","en-nz","en-ph","en-sg","en-us","en-za"]],["ja",["ja-jp"]],["ko",["ko-kr"]],["ru",["ru-ru","ru-xl"]],["de",["de-de","de-ch","de-at"]],["fr",["fr-xl","fr-be","fr-ca","fr-ch","fr-fr"]],["es",["es-xl","es-us","es-mx","es-ar","es-cl","es-co","es-es"]],["it",["it-it"]],["pl",["pl-pl"]],["ar",["ar-eg","ar-sa","ar-ae"]],["sv",["sv-se"]],["nl",["nl-nl","nl-be"]],["tr",["tr-tr"]],["bn",["bn-in"]],["te",["te-in"]],["hi",["hi-in"]],["mr",["mr-in"]],["nb",["nb-no"]],["pt",["pt-pt","pt-br"]],["id",["id-id"]]])},13053:function(t,e,n){n.d(e,{D:function(){return r},b:function(){return o}});var i=n(77246);function r(t,e=0){(0,i.S)()&&window.requestAnimationFrame(()=>window.setTimeout(()=>t(),e))}async function o(){return new Promise(t=>r(t))}},13113:function(t,e,n){n.d(e,{Ap:function(){return f},GQ:function(){return v},LN:function(){return C},VH:function(){return p},VY:function(){return y},Yy:function(){return g},gV:function(){return h},k4:function(){return w},q:function(){return b},ro:function(){return m},tX:function(){return S}});var i=n(93914),r=n(77246),o=n(5831),s=n(15098);const a="uxlogin",c="uxlogout",u="uxedit",d="useRedirect",l="uxswitch",h=(0,s.L)(()=>{const t=(0,i.Y)();return t&&"1"===t.getItem(a)||(0,r.S)()&&location.search&&location.search.includes(`${a}=1`)});function f(){const t=(0,i.Y)();t&&h()&&(t.removeItem(a),h.cache.clear())}const p=(0,s.L)(()=>{const t=(0,i.j)();return t&&!!t.getItem(c)});function g(){const t=(0,i.j)();t&&p()&&(t.removeItem(c),p.cache.clear())}function m(){const t=(0,i.j)();t&&t.setItem(c,"1"),p.cache.clear()}const w=(0,s.L)(()=>{const t=(0,i.Y)();return t&&"1"===t.getItem(u)});function y(){const t=(0,i.Y)();t&&w()&&(t.removeItem(u),w.cache.clear())}const v=(0,s.L)(()=>{const t=(0,i.Y)();return!(0,o.GO)("prg-noredirect")&&t&&"1"===t.getItem(d)&&function(){const{browser:t}=window._clientSettings||{},{browserType:e=""}=t||{};return!!/safari/i.test(e)}()});function b(){const t=(0,i.Y)();t&&"1"===t.getItem(d)&&(t.removeItem(d),v.cache.clear())}function S(){const t=(0,i.Y)();t&&t.setItem(d,"1"),v.cache.clear()}const C=(0,s.L)(()=>{const t=(0,i.Y)();return t&&"1"===t.getItem(l)})},13937:function(t,e,n){n.d(e,{Nf:function(){return s},jU:function(){return a}});var i=n(17720);const r=()=>i.vv.get("__core_DisplayModeCoordination_displayModeMap__",()=>({})),o=()=>i.vv.get("__core_DisplayModeCoordination_callbackMap__",()=>({}));function s(t,e){const n=r();if(n[t]===e)return;n[t]=e;const i=o()[t];if(i)for(const t of i)t(e)}function a(t,e){const n=o(),i=r();let s=n[t];s||(s=[],n[t]=s),s.push(e);const a=i[t];a&&e(a)}},14012:function(t,e,n){n.d(e,{GN:function(){return m},Hx:function(){return h},Lx:function(){return g},Wl:function(){return l},XL:function(){return o},hp:function(){return w},mo:function(){return d},sV:function(){return a},vO:function(){return u},yj:function(){return c}});var i=n(77246);const r=["vendors","microsoft","common","common-daily","common-alternate-daily","common-biweekly","common-monthly","experience","widget-initializer"];function o(t){if(t&&performance.getEntriesByType){const e=v();for(const n of r){const i=y(n,e);i&&f(t,i,n+"JS")}}}const s="resolver/api/resolve";function a(t){if(t&&performance.getEntriesByType){const e=performance.getEntries().find(t=>t.name.indexOf(s)>0);e&&f(t,e,"CrsConfig")}}function c(t){if(t&&performance.getEntriesByType){const e=v();for(const n of r){const i=y(n,e);i&&p(t,i,n+"JS")}}}function u(t){if(t&&performance.getEntriesByType){const e=performance.getEntriesByType("navigation");if(e&&e.length){const n=e[0];n&&(f(t,n,"html"),window.ssrPageGenTime&&(t.htmlCacheAge=Math.round((Date.now()-window.ssrPageGenTime.valueOf())/6e4)))}}}function d(t){if(t&&performance.getEntriesByType){const e=performance.getEntriesByType("resource");if(e&&e.length){const n=e.find(t=>t.name.indexOf("/Feed/me")>=0||t.name.indexOf("/feed/pages/startmhp")>=0);n&&f(t,n,"feed")}}}function l(t){if(!(0,i.S)()||!t)return;const e=navigator;if(e.connection){const n=e.connection;"rtt"in n&&(t.rtt=n.rtt),"downlink"in n&&(t.downlink=n.downlink),"effectiveType"in n&&(t.effectiveType=n.effectiveType)}"hardwareConcurrency"in navigator&&(t.hardwareConcurrency=navigator.hardwareConcurrency)}function h(t){t&&(t.isIDBSupported=window.indexedDB?1:0,t.isSWSupported=window.navigator.serviceWorker?1:0,t.isWWPresent=window._isWebWorkerPresent?1:0)}function f(t,e,n){const i=g(e);null!=i&&(t[n+"Cached"]=i?1:0)}function p(t,e,n){const{startTime:i,fetchStart:r,requestStart:o,responseStart:s,responseEnd:a,duration:c}=e;t[n+"ResponseTime"]=Math.round(a-s),t[n+"ResponseStart"]=Math.round(s),t[n+"ResponseEnd"]=Math.round(a),t[n+"StartTime"]=Math.round(i),t[n+"FetchStart"]=Math.round(r),t[n+"RequestStart"]=Math.round(o),t[n+"Duration"]=Math.round(c)}function g(t){return void 0!==t.transferSize?!(0!==t.transferSize&&300!==t.transferSize):void 0!==t.nextHopProtocol?!(""!==t.nextHopProtocol):void 0}function m(t){if(t&&performance.getEntriesByType){const e=performance.getEntriesByType("navigation");if(e.length){const n=e[0],i="useragent_launch";"type"in n&&(t.isBrowserLaunch=n.type===i?1:0)}}}function w(){return performance.getEntriesByType("navigation")[0]}function y(t,e){const n=e.filter(e=>e.name.indexOf(`/${t}.`)>-1);return n[n.length-1]}function v(){const t=["script","other"];return performance.getEntriesByType("resource").filter(e=>t.includes(e.initiatorType))}},14383:function(t,e,n){var i,r,o,s;n.d(e,{Yw:function(){return o},zH:function(){return a}}),function(t){t.activityId="x-client-activityid",t.authorization="Authorization",t.entAuthorization="Ent-Authorization",t.muid="MUID",t.adsReferer="ads-referer",t.taboolaSessionId="taboola-sessionId"}(i||(i={})),function(t){t.actionType="actionType",t.activityId="activityId",t.adsTimeout="adsTimeout",t.apiKey="apikey",t.appType="apptype",t.audienceMode="audienceMode",t.aver="aver",t.bypassTrigger="bypass_trigger",t.cacheBypassQueryStringParamName="cbypass",t.cardsHeight="cardsHeight",t.channel="channel",t.channels="channels",t.cm="cm",t.complexInfoPaneEnabled="cipenabled",t.contentId="contentId",t.contentType="contentType",t.copilotApiSupported="copilotApiSupported",t.delta="delta",t.devicetype="devicetype",t.disableContent="disablecontent",t.dhp="dhp",t.disableTypeSerialization="DisableTypeSerialization",t.dprValue="dprValue",t.duotone="duotone",t.edgExpMask="edgExpMask",t.edgeSignalAdppc="adppc",t.widgetsOn="widgetsOn",t.gamingInterestId="gamingInterestId",t.infopaneCount="infopaneCount",t.fcl="fcl",t.fdhead="fdhead",t.feedColumn="feedColumn",t.feedParams="feedParams",t.feedLayoutRequestType="t",t.filter="$filter",t.followersCount="followersCount",t.feedYOffset="feedYOffset",t.idfc="idfc",t.ids="ids",t.infoPaneItemCount="t =InfoPane.itemCount",t.isAdb="isAdb",t.lastRowAdColumns="lastRowAdColumns",t.location="location",t.market="market",t.memory="memory",t.msnup="msnup",t.newsTop="newsTop",t.newsSkip="newsSkip",t.ocid="ocid",t.oem="oem",t.oneSvcUni="OneSvc-Uni-Feat-Tun",t.over="over",t.overlay="overlay",t.pageName="pgname",t.pageType="pgtype",t.parentContentId="parent-content-id",t.parentNamespace="parent-ns",t.parentTitle="parent-title",t.queryQ="q",t.query="query",t.queryType="queryType",t.qScope="qscope",t.renderedAdCount="renderedAdCount",t.responseSchema="responseSchema",t.satoriId="satoriId",t.select="$select",t.session="session",t.signInCookieName="scn",t.skip="$skip",t.smode="smode",t.source="source",t.targetType="targetType",t.theme="theme",t.timeOut="timeOut",t.top="$top",t.type="type",t.User="User",t.user="user",t.userid="userid",t.usri="usri",t.wpoitems="wpoitems",t.wpoPageId="wpopageid",t.wpoSchema="wposchema",t.wrapOData="wrapodata",t.caller="caller",t.installedWidgets="installedWidgets",t.clientLayoutVersion="clv",t.pageConfiguration="pgc",t.requestId="rid",t.interestIds="InterestIds",t.providerId="ProviderId",t.topicId="TopicId",t.includeFollowingFilters="iff",t.freScenario="freScenario",t.freMode="freMode",t.mobile="mobile",t.clientLocation="clientLocation",t.clientLocationProvider="clientLocationProvider",t.clientLocationAccuracy="clientLocationAccuracy",t.clientLocationTimeStamp="clientLocationTimeStamp",t.clientUtcOffset="clientUtcOffset",t.clientTimeStamp="clientTimeStamp",t.collectionIds="collectionIds",t.endTime="EndTime",t.eventType="EventType",t.exchangeCode="ExchangeCode",t.listIds="listIds",t.requireQuoteDetail="requireQuoteDetail",t.skipNum="skip",t.startTime="StartTime",t.topNum="top",t.prerender="prerender",t.layout="layout",t.triggerModules="triggerModules",t.promoXFeed="promoxfeedupsell",t.canid="canid",t.edgeNoAds="edgenoads",t.edgeReduceAds="edgereduceads",t.edgeMobile="edgeMobile",t.edgeMobileAds="edgeMobileAds",t.oneULayout="oneULayout",t.private="private",t.viewportSize="vpSize",t.promotion="promotion",t.selection="selection",t.cardIds="cardIds",t.renderedSegments="renderedSegments",t.column="column",t.colstatus="colstatus",t.colwidth="colwidth",t.adoffsets="adoffsets",t.l3v="l3v",t.wpoux="wpoux",t.cookieWallPresent="cookieWallPresent",t.anaheimPageLayout="anaheimPageLayout",t.adRefreshVariant="adRefreshVariant",t.gdpr="gdpr",t.verticalName="verticalName",t.pageOcid="pageOcid",t.scenario="scenario",t.calendarStartDate="calendarStartDate",t.calendarEndDate="calendarEndDate",t.calendarDate="calendarDate",t.segment="segment",t.context="Context",t.backgroundImageIsSet="backgroundImageIsSet",t.inEdgeFeatures="inEdgeFeatures",t.revertTimes="revertTimes",t.adminDisabled="adminDisabled",t.interestCount="interestCount",t.interestSkip="interestSkip",t.communityProfileId="communityProfileId",t.newProfFreTime="newProfFreTime",t.newDevFreTime="newDevFreTime",t.webUrl="WebUrl",t.enableRuby="enableRuby",t.isRubyEligible="isRubyEligible",t.assetId="assetId",t.uxMode="uxmode",t.isWebPDisabled="isWebPDisabled",t.unusedDocIds="unusedDocIds",t.gemId="gemId",t.aspectratio="aspectratio",t.ssrcache="ssrcache",t.linear="linear"}(r||(r={})),function(t){t[t.oneService=0]="oneService",t[t.wpoService=1]="wpoService"}(o||(o={})),function(t){t.Bgtask="bgtask",t.Api="api",t.App="app",t.RetryFetch="retryFetch",t.Scroll="scroll",t.Init="init",t.BgRefresh="bgRefresh"}(s||(s={}));const a="installedWidgetsOverride"},14535:function(t,e,n){n.d(e,{J4:function(){return h},PV:function(){return l},Y0:function(){return f},au:function(){return p}});var i,r=n(54761),o=n(41820),s=n(48172),a=n(65022),c=n(93468),u=n(98216),d=n(69118);function l(t){try{const e=d.h.getWpoTreatmentsWithType(r.Ar.uxMessage,t);return e?.length>0&&e[0]?.properties?e[0]?.properties:null}catch(t){const e="Error in getting wpo uxmessge promotion data";(0,c.vV)(a.rSI,e,`error:${t}`)}}function h(t=""){return t.split(",").reduce((t,e)=>{const[n,i]=e.split(":");return"0"!==i&&"1"!==i||(t[n]="1"===i),t},{})}function f(){const t=l();return!(!t||!t.featUX)&&(u.YT.addOrUpdateTmplProperty("wpopromuxmsg",t.featUX),!0)}async function p(){const t=l(!0),{featUX:e=""}=t||{},n=h(e),i=n.IsCSDAU7dSum;void 0!==i?await s.f.savePreferenceSetting(o.bJ.nonDAU7d,!i):await s.f.savePreferenceSetting(o.bJ.nonDAU7d,null,!0);const r=n.IsCSDAU30dSum;void 0!==r?await s.f.savePreferenceSetting(o.bJ.nonDAU30d,!r):await s.f.savePreferenceSetting(o.bJ.nonDAU30d,null,!0)}!function(t){t.IsCSDAU7dSum="IsCSDAU7dSum",t.IsCSDAU30dSum="IsCSDAU30dSum"}(i||(i={}))},14586:function(t,e,n){var i;n.d(e,{$4:function(){return F},$W:function(){return s},$Z:function(){return w},$m:function(){return S},An:function(){return c},CD:function(){return g},Ci:function(){return a},D:function(){return o},Eh:function(){return I},HW:function(){return C},LI:function(){return W},OJ:function(){return R},Oj:function(){return u},Q:function(){return A},Qw:function(){return r},Se:function(){return b},Xd:function(){return y},Y9:function(){return x},Yf:function(){return v},dV:function(){return V},ei:function(){return E},gi:function(){return _},iw:function(){return $},kH:function(){return T},ki:function(){return M},ku:function(){return l},lJ:function(){return B},le:function(){return N},nF:function(){return p},nm:function(){return f},rA:function(){return D},rE:function(){return m},tU:function(){return h},tZ:function(){return U},vc:function(){return P},w:function(){return O},w1:function(){return k},wg:function(){return d},yp:function(){return L}}),function(t){t.activityId="activityId",t.apiKey="apikey",t.audienceMode="audienceMode",t.bypassTrigger="bypass_trigger",t.cm="cm",t.complexInfoPaneEnabled="cipenabled",t.contentType="contentType",t.delta="delta",t.disableContent="disablecontent",t.disableTypeSerialization="DisableTypeSerialization",t.dprValue="dprValue",t.duotone="duotone",t.infopaneCount="infopaneCount",t.fdhead="fdhead",t.feedLayoutRequestType="t",t.filter="$filter",t.includeFollowingFilters="iff",t.ids="ids",t.interestIds="InterestIds",t.location="location",t.market="market",t.newsSkip="newsSkip",t.newsTop="newsTop",t.ocid="ocid",t.pageConfiguration="pgc",t.parentContentId="parent-content-id",t.parentNamespace="parent-ns",t.parentTitle="parent-title",t.providerId="ProviderId",t.queryQ="q",t.query="query",t.queryType="queryType",t.qScope="qscope",t.requestId="rid",t.responseSchema="responseschema",t.select="$select",t.session="session",t.signInCookieName="scn",t.skip="$skip",t.source="source",t.timeOut="timeOut",t.top="$top",t.type="type",t.user="user",t.wrapOData="wrapodata",t.wpoitems="wpoitems",t.wpoPageId="wpopageid",t.wpoSchema="wposchema",t.caller="caller",t.dhp="dhp",t.webWorker="webWorker",t.edgeNoAds="edgenoads",t.edgeReduceAds="edgereduceads",t.column="column",t.anaheimPageLayout="anaheimPageLayout",t.adRefreshVariant="adRefreshVariant",t.gdpr="gdpr",t.verticalName="verticalName"}(i||(i={}));const r="0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM",o="r3HOPDA7wzesCD1BWVDtCJY24KnBcvx7vLcbGvb7YU",s="cp_msn_news",a="cp_msn_gems",c="service/news/feed/pages/",u="serviceak/news/feed/pages/",d="news/feed/pages/",l="ntpxfeed",h="wpoxfeed",f="news/feed/pages/",p="winxfeed",g="wpodhp",m="gamingfeed",w="ntpfollowfeed",y="filteredfollowingchannels",v="prong1followfeed",b="prong1xfeed",S="prong2followfeed",C="followingxfeed",k="weblayout",T="ntpxfeed",x="prong2xfeed",A="news/feed/Segments",$="https://api.msn.com",I="https://sf-ppe.oneservice-test.msn.com",P="wpo-usebasedomain",R="wpo-useintdomain",M="https://ppe-api.msn.com",_="news/feed/pages/ntpxfeed",E="news/feed/pages/",F="xbox-browser",D="jY4a3fYtgzb7PIcW0Kj6amp5k6LwDefg6RSnkmxjto",O="prg-useakmaipath",N="prg-ssr-ext1sdns",L="msnkids",B="dy0rQcQaYj5cKZ2Cy0cdaRDJcC5maS5hPj9w2SbeRf",U="anaheim-ntp-following",W="vevII5dbHfpd1fHIMlPxbas6GZQEFOm4CozFHehOgW";function V(t,e){e.set("wrapodata","false").set("DisableTypeSerialization","true").set("queryType",t.queryType||"myfeed").set("timeOut",`${function(t){const{timeoutMs:e,query:n,customFeedTimeoutMs:i}=t;return n&&i?i:e}(t)}`).set("contentType",t.contentType).set("apikey",r),(t.useDelta||t.sessionId)&&(e.set("delta","true"),t.sessionId&&e.set("session",t.sessionId)),t.ocid&&e.set("ocid",t.ocid)}},14588:function(t,e,n){n.d(e,{Y:function(){return o},t:function(){return s}});var i=n(17720),r=n(68480);class o{static get backgroundDataStateLoaded(){return i.vv.get(this.backgroundDataStateLoadedKey,()=>new r.P("backgroundDataStateLoaded"))}static set backgroundDataStateLoaded(t){i.vv.set(this.backgroundDataStateLoadedKey,t)}static get hotSpotsDisplayStatusUpdated(){return i.vv.get(this.hotSpotsDisplayStatusUpdatedKey,()=>new r.P("hotSpotsDisplayStatusUpdated"))}static set hotSpotsDisplayStatusUpdated(t){i.vv.set(this.hotSpotsDisplayStatusUpdatedKey,t)}static get irisImageUpdated(){return i.vv.get(this.irisImageUpdatedKey,()=>new r.P("irisImageUpdated"))}static set irisImageUpdated(t){i.vv.set(this.irisImageUpdatedKey,t)}static get refreshBackgroundMetadata(){return i.vv.get(this.refreshBackgroundMetadataKey,()=>new r.P("refreshBackgroundMetadata"))}static set refreshBackgroundMetadata(t){i.vv.set(this.refreshBackgroundMetadataKey,t)}static get updateBackgroundGalleryDisplayed(){return i.vv.get(this.updateBackgroundGalleryDisplayedKey,()=>new r.P("updateBackgroundGalleryDisplayed"))}static set updateBackgroundGalleryDisplayed(t){i.vv.set(this.updateBackgroundGalleryDisplayedKey,t)}static get updateGallerySelectedBackground(){return i.vv.get(this.updateGallerySelectedBackgroundKey,()=>new r.P("updateGallerySelectedBackground"))}static set updateGallerySelectedBackground(t){i.vv.set(this.updateGallerySelectedBackgroundKey,t)}static get updateSelectionInGallery(){return i.vv.get(this.updateSelectionInGalleryKey,()=>new r.P("updateSelectionInGallery"))}static set updateSelectionInGallery(t){i.vv.set(this.updateSelectionInGalleryKey,t)}static get videoSettingsUpdated(){return i.vv.get(this.videoSettingsUpdatedKey,()=>new r.P("videoSettingsUpdated"))}static set videoSettingsUpdated(t){i.vv.set(this.videoSettingsUpdatedKey,t)}static get updateEventGleam(){return i.vv.get(this.updateEventGleamKey,()=>new r.P("updateEventGleam"))}static set updateEventGleam(t){i.vv.set(this.updateEventGleamKey,t)}}function s(){o.backgroundDataStateLoaded.unregisterObservers(),o.hotSpotsDisplayStatusUpdated.unregisterObservers(),o.irisImageUpdated.unregisterObservers(),o.refreshBackgroundMetadata.unregisterObservers(),o.updateBackgroundGalleryDisplayed.unregisterObservers(),o.updateGallerySelectedBackground.unregisterObservers(),o.videoSettingsUpdated.unregisterObservers(),o.updateEventGleam.unregisterObservers()}o.backgroundDataStateLoadedKey=Symbol("backgroundDataStateLoaded"),o.hotSpotsDisplayStatusUpdatedKey=Symbol("hotSpotsDisplayStatusUpdated"),o.irisImageUpdatedKey=Symbol("irisImageUpdated"),o.refreshBackgroundMetadataKey=Symbol("refreshBackgroundMetadata"),o.updateBackgroundGalleryDisplayedKey=Symbol("updateBackgroundGalleryDisplayed"),o.updateGallerySelectedBackgroundKey=Symbol("updateGallerySelectedBackground"),o.updateSelectionInGalleryKey=Symbol("updateSelectionInGallery"),o.videoSettingsUpdatedKey=Symbol("videoSettingsUpdated"),o.updateEventGleamKey=Symbol("updateEventGleam")},15003:function(t,e,n){n.d(e,{C8:function(){return u},Op:function(){return p},PP:function(){return d},TI:function(){return h},du:function(){return f},i6:function(){return l},lw:function(){return g}});var i=n(53626),r=n(89980),o=n(34713);const s=new Set,a=[];let c=!1;function u(t){const e=(0,r.Lg)().getObject(i.WP)||{},n=e[t];return!isNaN(n)&&(s.has(t)||s.add(t),delete e[t],(0,r.Lg)().setObject(i.WP,e),n>performance.timeOrigin)}function d(t){return s&&s.has(t)}function l(t){const e=(0,r.Lg)().getObject(i.WP)||{},n=e[t];isNaN(n)&&(e[t]=p(),(0,r.Lg)().setObject(i.WP,e))}function h(t){a&&!a.includes(t)&&a.push(t);const e={time:p(),data:t};(0,r.Lg)().setObject(i.CQ,e),g()}function f(t){if(!a||0===a.length||!a.includes(t))return;a.splice(a.indexOf(t),1);const e=a.length;if(0===e)(0,r.Lg)().removeObject(i.CQ);else{const t={time:p(),data:a[e-1]};(0,r.Lg)().setObject(i.CQ,t)}}function p(){return Math.round(performance.timeOrigin+performance.now())}function g(){!(0,o.QP)()&&!(0,o.aG)()||c||(c=!0,fetch(location.href.replace("prerender=1",""),{cache:"no-cache"}))}},15098:function(t,e,n){function i(t){let e,n=!1;const i=function(){return n||(n=!0,e=t()),e};return i.cache={clear:()=>{n=!1,e=void 0}},i}n.d(e,{L:function(){return i}})},15301:function(t,e,n){n.d(e,{k:function(){return c}});var i=n(93468),r=n(65022),o=n(77246),s=n(27261),a=n(3762);async function c(t){if(!(0,o.S)())return;const{src:e,id:n,async:c=!0,container:d=document.head,loadMode:l="skipIfExists",retryNumber:h=0,retryDelayMs:f=0}=t;if("skipIfExists"==l&&(u.has(n)||Boolean(document.getElementById(n))))return u.get(n);try{const t=async function(t,e=3,n=100){if(e<=1)return t();let i,r=1;do{try{i=await t()}catch(t){if(r===e)throw t&&t.message&&(t.message=`${t.message} after ${r} attempts`),t;await(0,a.jh)(n)}}while(!i&&++r<=e);return i}(()=>function(t,e,n,i=!0){return new Promise((r,o)=>{const a=(0,s.C7)(t,e,i,void 0,void 0,()=>r(!0));a.crossOrigin=void 0,a.onerror=o,n.append(a)})}(e,n,d,c),h,f);u.set(n,t),await t}catch(t){throw(0,i.c_)(t,r.WqK,"Failed to download Static JS",void 0,{scriptId:n,scriptSrc:e}),document.getElementById(n)?.remove(),t}finally{u.delete(n)}}const u=new Map},15373:function(t,e,n){n.d(e,{Wz:function(){return r},iU:function(){return s},uc:function(){return a}});var i=n(32633);class r{constructor(t,e,n=()=>{}){if(this.authDataFetchStrategy=t,this.authDataCacheStrategy=e,this.logAuthEvent=n,!t)throw new Error("Fetch Strategy is not provided in ModularAuthManager");if(!e)throw new Error("Cache Strategy is not provided in ModularAuthManager")}async getAuthData(t,e=!1){const n=await this.authDataCacheStrategy.getAuthDataFromCache(t),{authToken:i,...r}=n||{};if(this.logAuthEvent(r,e),n?.authToken)return n;const o=await this.authDataFetchStrategy.fetchAuthData(t,e),{authToken:s,...a}=o||{};return this.logAuthEvent(a,e),o?.error||this.authDataCacheStrategy.setAuthDataToCache(t,o).then(t=>{this.logAuthEvent(t,e)}),o}}let o={getAuthData:async t=>({resource:t,error:{message:"Auth manager is not initialized",status:i.f.OtherError}})};function s(t){o=t}function a(){return o}},15387:function(t,e,n){n.d(e,{V:function(){return a},m:function(){return s}});var i=n(68399),r=n(30817),o=n(53685);function s(t){const e=(0,r.ZF)();for(const[n,i]of t)for(const t of i){const i=e[t];if(null!=i){e[n]=i;break}}}function a(){const t=`${o.xA}.BasicFeed`;s([[t,["TTVR.River","TTVR.GridViewFeed","TTVR.StripeFeed","TTVR.WaterfallViewFeed"]]]);const e=(t,e,r)=>{const o=r&&e?r-e:-1;n[t]=o,(0,i.Ww)({name:t,startTime:e,endTime:r})},n=(0,r.ZF)(),a=n[t],c=n[`${o.xA}.SearchBox`],u=n[`${o.xA}.SDCards`],d=n.WpoResponseBack;e("SearchBoxToFeed",c,a),e("FeedSDRender",a,u),e("FeedBasicRender",d,a)}},15507:function(t,e,n){n.d(e,{D:function(){return u},M:function(){return a}});var i=n(65022),r=n(93468),o=n(98216),s=n(77246);class a{constructor(t,e,n,i){this.chromiumApiRetryCount=5,this.isNtpPrivateApiAvailable=t=>window&&window.chrome&&window.chrome.ntpSettingsPrivate&&"function"==typeof window.chrome.ntpSettingsPrivate[t],this.prefSettingKey=t,this.searchForKeyName=e,this.targetKeyName=n,this.defaultItem=i}async getPreferenceSetting(t,e){try{const n=await this.getPreferenceSettingValueArray(e),i=n.findIndex(e=>e[this.searchForKeyName]===t);return i>-1?n[i]:null}catch(e){const n=`Failed to find user preference key: ${t}`;return this.logAppError(i.r0p,n,e),null}}async savePreferenceSetting(t,e){try{const n=await this.getPreferenceSettingValueArray()||[],i=n.findIndex(e=>e[this.searchForKeyName]===t);if(i>-1){const t={...n[i],...e};n[i]=t}else{const i={...this.defaultItem,...e};i[this.searchForKeyName]=t,n.push(i)}return this.setAndSavePreferenceSetting(n)}catch(e){const n="Failed to store user preference setting";return this.logAppError(i.NVY,n,`Key:${t}.Error:${e}`),!1}}isApiAvailableToUse(){return new Promise(t=>{const e="Error in isApiAvailableToUse";try{this.isGoodToUseNtpSettingsPrivate("getAllPrefs")?void 0===this.isPrefSettingKeyAvailable?window.chrome.ntpSettingsPrivate.getAllPrefs(n=>{if(this.isPrefSettingKeyAvailable=n&&n.findIndex(t=>t.key===this.prefSettingKey)>-1,!this.isPrefSettingKeyAvailable){let t="";try{n&&n.forEach(e=>t+=`${e.key}+`)}catch(t){this.logAppError(i.r0p,"Error: Can not log keylist from preference setting",t)}this.logAppError(i.pUO,e,`missing preference key: ${this.prefSettingKey}, available keys: ${t}`)}t(this.isPrefSettingKeyAvailable)}):t(this.isPrefSettingKeyAvailable):(this.logAppError(i.Syp,e,"getAllPrefs not present"),t(!1))}catch(e){this.logAppError(i.Syp,"Error: Unexpected throw in isApiAvailableToUse",e),t(!1)}})}logAppError(t,e,n){o.YT?.sendAppErrorEvent({...t,message:e,pb:{...t.pb,customMessage:n,stack:Error().stack}})}async getPreferenceSettingValueArray(t){try{if(this.settingValuesArray&&!t)return this.settingValuesArray;{const t=await this.getPreferenceValueFromBrowser();return this.settingValuesArray=t||[],this.settingValuesArray}}catch(t){const e=`Failed to read ${this.prefSettingKey} preference setting`;return this.logAppError(i.tqL,e,t),[]}}setAndSavePreferenceSetting(t){if(!(0,s.S)())return!1;try{if(this.isGoodToUseNtpSettingsPrivate("setPref"))return this.settingValuesArray=t,window.chrome.ntpSettingsPrivate.setPref(this.prefSettingKey,this.settingValuesArray,c),!0;{const t="window.chrome.ntpSettingsPrivate.setPref does not exist.";return this.logAppError(i.cZD,t,`Key:${this.prefSettingKey}`),!1}}catch(t){return!1}}isGoodToUseNtpSettingsPrivate(t){let e=this.isNtpPrivateApiAvailable(t),n=0;for(;n<this.chromiumApiRetryCount&&!e;)n++,setTimeout(()=>{e=this.isNtpPrivateApiAvailable(t),e&&(0,r.vV)(i.W5k,`Chromium API retry succeed after ${n} retry`)},50);if(!e){const e=`functionName: ${t},\n            canUseDOM: ${(0,s.S)()},\n            windows: ${window},\n            document: ${window&&window.document},\n            createElement: ${window&&window.document&&window.document.createElement},\n            chrome: ${window&&window.chrome},\n            ntpSettingsPrivate: ${window&&window.chrome&&window.chrome.ntpSettingsPrivate},\n            ntpSettingsPrivate funtions: ${window&&window.chrome&&window.chrome.ntpSettingsPrivate&&Object.getOwnPropertyNames(window.chrome.ntpSettingsPrivate).toString()}\n            `;(0,r.vV)(i.huQ,"Failed to get funtion from window.chrome.ntpSettingsPrivate.",void 0,{...i.huQ.pb,customMessage:e,stack:Error().stack})}return e}getPreferenceValueFromBrowser(){return new Promise((t,e)=>{if(this.isGoodToUseNtpSettingsPrivate("getPref"))window.chrome.ntpSettingsPrivate.getPref(this.prefSettingKey,function(e){e&&e.value?t(e.value):t(null)});else{const t="window.chrome.ntpSettingsPrivate.getPref does not exist.";this.logAppError(i.r6S,t,""),e(t)}})}}let c=t=>{};function u(t){c=t}},15589:function(t,e,n){var i;function r(t){switch(t){case i.prod:case i.staging:return i.prod;case i.int1:return i.int1;case i.int:case i.intpr:case i.intperf:return i.int;default:return null}}n.d(e,{F:function(){return r},O:function(){return i}}),function(t){t.prod="prod",t.staging="staging",t.int1="int1",t.int="int",t.intpr="intPR",t.intperf="intPerf"}(i||(i={}))},15963:function(t,e,n){n.d(e,{F:function(){return s}});var i=n(30817),r=n(98216),o=n(81349);function s(t,e,n,s,a){if((0,o.VE)())r.YT.getPageMetadata().updateContract();else{(0,i.ZF)().TimeToSendPageView=Math.round(performance.now()),r.YT.sendPageView(t,e,n,s,a),window.__peregrine_normalPVSent=!0}}},16091:function(t,e,n){n.d(e,{G:function(){return r}});var i=n(77246);function r(t,e={bindMethod:!0,forceLazy:!1}){return"object"!=typeof n.g||!n.g.TEST_ENV||n.g.TEST_SINGLETONPROXY||e.forceLazy?(0,i.S)()&&!e.forceLazy?t.getInstance():new Proxy(t,{get(t,n,i){const r=t.getInstance(),o=Reflect.get(r,n,r);return e.bindMethod&&"function"==typeof o?o.bind(r):o},set(t,e,n,i){const r=t.getInstance();return Reflect.set(r,e,n,r)}}):t.getInstance()}},16253:function(t,e,n){n.d(e,{Fs:function(){return p},Kg:function(){return l},U6:function(){return y},nA:function(){return u},r8:function(){return m},rP:function(){return d},v3:function(){return w},vd:function(){return g}});var i=n(63581),r=n(930),o=n(84855),s=n(669),a=n(91532),c=n(44944);const u=t=>"WeatherHero"==t.type?o.UoA:t.type+(t.id??""),d="TTVR.ViewCards",l="TTVR.SDCards",h=new Map([[a.C.infopaneCard,()=>!0],[a.C.sectionHeaderCard,()=>!0],[a.C.topStoriesCard,()=>!0],[a.C.contentCard,t=>{const e=(0,s.Ie)(t)||(0,s.YA)(t);return e&&e.height>=i.L._300x225.height&&e.width>=i.L._300x225.width}],[a.C.weatherHeroExperienceCarouselCard,()=>!0]]),f=[a.C.contentCard,a.C.infopaneCard,a.C.sectionHeaderCard,a.C.topStoriesCard,a.C.weatherHeroExperienceCarouselCard];function p(t){const e=c.G[t.type];if(e&&f.includes(e)){const n=h.get(e);return!!n&&n(t)}return!1}const g={C1:1,C2:2,C3:3,C4:4,C5:5,C6:6};function m(t,e,n=2){return t*n*(g[e]||1)}const w=t=>{switch(t){case r.uE._1x_1y:return 1;case r.uE._1x_2y:case r.uE._2x_1y:return 2;case r.uE._3x_1y:return 3;case r.uE._2x_2y:case r.uE._4x_1y:return 4;default:return 2}},y={contentGroup:o.qNJ,horoscopeCard:o.IWO,linkedInCard:o.k2X,moneyInfoCard:o.ahW,onThisDayCard:o.B34,qnaCard:o.Qb0,"shopping-carousel":o.yXx,sportsCard:o.FC5,trafficCard:o.F9m,travelDestination:o.WNH,trendingNowCard:o.dnH,weather:o._1i,autosCarousel:o.WG6,boostAdCard:o.Op9,electionsCard:o.oMs,rewardsCard:o.adn,gamingRecentlyPlayedCard:o.gIT,"trending-in-ten-minutes-id":o.oJ5,"infopane-id":o.oJ5,"war-in-ukraine-carousel-id":o.oJ5,"local-news-carousel-id":o.oJ5,casualGamesCarouselCard:o.CNr,trendingSearchCard:o.tKm,mangaCard:o.Ir6,mangaCarousel:o.aI7,"shopping-prong-card-response":o.oJ5,winAppCard:o.nR3,publisherList:o.QYe,promotedAdCard:o.XRH}},16414:function(t,e,n){n.d(e,{D:function(){return i},o:function(){return r}});const i="default",r=-1},16418:function(t,e,n){n.d(e,{ZQ:function(){return lt},aJ:function(){return ft},cY:function(){return ht}});var i=n(53788),r=n(98216),o=n(80247),s=n(98763),a=n(65022);const c=Object.freeze({experience:"e",page:"p",other:"o",script:"js",service:"s",container:"c",custom:"x"});var u;!function(t){t[t.keepPrevious=1]="keepPrevious",t[t.keepThis=2]="keepThis",t[t.keepAll=3]="keepAll"}(u||(u={}));var d=n(73691),l=n(27261),h=n(77246),f=n(68399),p=n(30817),g=n(53685),m=n(41862),w=n(14012),y=n(88294);const v=new Map([["min",t=>t.length?t.reduce((t,e)=>Math.min(t,e),1/0):void 0],["max",t=>t.length?t.reduce((t,e)=>Math.max(t,e),-1/0):void 0],["first",t=>{for(const e of t)if(null!=e)return e}]]),b={clientrtt:"tcp",origin:"origin",cdntime:"self"},S=/\/\/([^/]+)\/([^?&#]+)/,C=/^assets\.msn\.(com|cn)/i,k=/^(ent-)?api\.msn\.(com|cn)/i,T="service",x="[cdn]/",A="[1s]/",$="[self]/",I=`${$}[root]`,P="[1s-cdn]/",R=(0,s.Xe)();function M(t,e,n,r){const o=(0,p.gU)(),s=function(t){const e=new Map,n=t=>function(t,e){const{name:n}=e;let i=t.get(n);i||t.set(n,i=[]);i.push(e)}(e,t);performance.getEntriesByType("navigation").forEach(t=>{n(function(t,e){return{name:t.name,startTime:t.startTime,requestStart:t.requestStart,responseEnd:t.responseEnd,transferSize:t.transferSize,duration:t.duration,serverTiming:t.serverTiming,initiatorType:t.initiatorType,nextHopProtocol:t.nextHopProtocol,...e}}(t,{name:I}))});const r=(0,i.X1)(performance.getEntriesByType("resource"),t,"startTime",!0);return r.forEach(n),e}(r),a={networkCounter:new m.G,networkMap:s,filterContext:r},u=function(t,e){const n={name:"experiences",data:{type:c.container}};return t&&t.forEach(t=>{const i=function(t,e){const{filterContext:n,networkMap:i}=e,r=q(t,["min",[["first","scripts","from"],["first","config","from"]]]),o=r?q(t,["max",[["first","scripts","to"],["first","config","to"]]]):void 0,s=r&&o?U(r,o,void 0,n):void 0;let a=G(t,["first","render","to"]);J(a)||(a=G(t,["first","update","to"]),a&&y.v.log(`${t.timelineName} is missing 'render' mark`));const u=a&&q(t,["min",[["first","render","from"],["first","update","from"]]]),l=u?U(u,a,void 0,n):void 0;if(!s&&!l)return;const h={name:t.timelineName,data:{type:c.experience}};B(h,"init",s),B(h,"render",l),s&&l&&B(h,"_self",U(r,a,void 0,n));const f=t.getMeasureValues({coreName:d.EA});f.forEach(t=>{const n=t.customData,r=function(t,e,n){const i=t&&e.get(t);if(!i)return;const r=N(i,t=>Math.abs(t.startTime-n.from));if(r>=0){const n=i.splice(r,1)[0];return i.length||e.delete(t),n}}(n&&n.url,i,t);F(E(t)||d.EA,c.service,h,r,t,e)});const p=t.getMeasureValues({entityMeasures:!0});if(p.length){const t=L(h,{name:"custom",data:{type:c.custom}});p.forEach(e=>{D(t,e,n)})}return h}(t,e);i&&L(n,i)}),n}(e,a),l=function(t){const e={name:"scripts",data:{type:c.container}},n={name:"services",data:{type:c.container}},i={name:"other",data:{type:c.container}};return(0,h.S)()?function(t,e,n,i){const{networkMap:r}=t;r.forEach(o=>{o.forEach(o=>{const{initiatorType:s,name:a}=o;if("img"===s)return;let u,l,h,f;const p=_(a);if(p&&p.endsWith(".js")){l=p.replace(/(\.[0-9a-f]{20})?\.js$/,"").replace(/bundles\/v1\/\w+\/[\w.]+\//,""),u=e,h=c.script}else if("css"===s||"iframe"===s||"other"===s||"beacon"===s)u=i,h=c.other;else{u=n,h=c.service;const t=(0,d.Yk)()?.getMeasureValues({coreName:a});if(t&&t.length){const{startTime:e}=o;f=t[N(t,({from:t})=>Math.abs(t-e))],l=E(f)}}let g=l||p;g&&(g=g.toLowerCase(),F(g,h,u,o,f,t),r.delete(a))})})}(t,e,n,i):function(t,e,n){const i=(0,d.Yk)()?.getMeasureValues({entityMeasures:!1});i&&i.forEach(i=>{const{coreName:r,from:o,to:s}=i,a=_(r)?.toLowerCase();if(!a)return;let u,d;r.endsWith(".js")?(u=e,d=c.script):(u=n,d=c.service);F(a,d,u,{startTime:o,duration:s-o},void 0,t)})}(t,e,n),[e,n,i]}(a),w=function(t){const e={name:"custom",data:{type:c.custom}};(0,f.Qn)(t).forEach(n=>D(e,n,t)),(0,f.kf)(t).forEach(({name:t,duration:n})=>function(t,e,n){W(t,e,n)}(e,t,n)),(0,f.vx)(t).forEach(({name:n,time:i})=>V(e,n,i,t));const n=t===i.vs;if(n){const n=(0,p.ZF)();O(e,g.jy,t,n,g.jy,p.pR),O(e,g.xA,t,n,g.xA,p.pP)}else V(e,g.xA,t.timeFilter.end,t);return e}(r),v={name:"",data:{type:c.container}};B(v,"calc",U(o,(0,p.gU)(),void 0,i.vs));const b={metrics:v.data,...t||{}},S={_meta:b};let C=!1;if([w,u,...l].forEach(t=>{const{data:e}=t;(e.children||e.spans||e.durations||e.scalars||e.instants)&&(S[t.name]=e,C=!0)}),C)return n&&n.length&&(b.pivots=n.map(t=>t.key),b.pivots64=n.map(t=>t.key64)),S}function _(t){if(t){const e=t.match(S);if(e){let[,t,n]=e;return n=n.toLowerCase(),t.match(C)?n=(n.startsWith(T)?P:x)+n:t.match(k)?n=A+n:t===R.get()&&(n=$+n),n}return t.toLowerCase()}}function E(t){const e=t&&t.customData;if(e){const{requestName:t,url:n,mappedUrl:i}=e;return t||_(i||n)}}function F(t,e,n,i,r,o){const{networkCounter:s,filterContext:a}=o,c=s.qualifyKey(t),u={name:c,data:{type:e}},d=function(t,e){if(!e)return;const{startTime:n,requestStart:i,responseEnd:r,transferSize:o,duration:s,serverTiming:a}=e,c=!!i,u={name:t,hasFullTimings:c,networkDur:s,networkStart:n};if(c){u.connectDur=i-n,u.requestDur=r-i;const t=(0,w.Lx)(e);null!=t&&(u.cached=t?1:0,t||(u.transferSize=o))}if(!u.cached&&(t.startsWith(x)||t.startsWith(P))&&a&&a.length){const t=u.cdn={};a.forEach(({name:e,duration:n})=>{const i=b[e];i&&(t[i]=n)})}return u}(c,i);if(d){const{cdn:t,networkStart:e,networkDur:n}=d;B(u,"network",U(e,void 0,n,a))&&(d.hasFullTimings&&(W(u,"connect",d.connectDur),W(u,"request",d.requestDur),H(u,"size",d.transferSize),H(u,"cache",d.cached)),t&&(W(u,"cdnTCP",t.tcp),W(u,"cdnSelf",t.self),W(u,"cdnOrigin",t.origin)))}if(r&&B(u,"app",U(r.from,r.to,void 0,a))){const t=r.customData,{perfCritical:e,error:n}=t||{};e&&H(u,"critical",1),n&&H(u,"error",1)}u.data.spans&&L(n,u)}function D(t,e,n){const i=U(e.from,e.to,void 0,n);if(i){B(t,e.coreName+e.idSuffix,i)}}function O(t,e,n,i,r,o){V(t,e,i[(0,h.S)()?r:o],n)}function N(t,e){const n=t&&t.length||0;if(n<=1)return n-1;let i=1/0,r=0;return t.length>1&&t.forEach((t,n)=>{const o=e(t);o<i&&(i=o,r=n)}),r}function L(t,e){return j(t,"children",e.name,e.data),e}function B(t,e,n){return n?j(t,"spans",e,n):void 0}function U(t,e,n,{spanMapperFn:i}){return i(t,e,n)}function W(t,e,n){return z(t,e,n,"durations")}function V(t,e,n,{timeFilterFn:i,timeMapperFn:r}){if(i(n))return z(t,e,r(n),"instants")}function H(t,e,n){return z(t,e,n,"scalars")}function z(t,e,n,r){if(J(n)){return j(t,r,e,(0,i.LI)(n))}}function j(t,e,n,i){return(t.data[e]||(t.data[e]={}))[n]=i,i}function q(t,e){const[n,i]=e,r=[];for(const e of i){const n=G(t,e);null!=n&&r.push(n)}const o=v.get(n),s=o&&o(r);return J(s)?s:void 0}function G(t,e){const[n,i,r]=e,o=t.getMeasureValues({coreName:i});if(o&&o.length){const e=v.get(n);if(e){const n=function(t,e,n){return t.getMeasureValues({coreName:e}).map(t=>t[n]).filter(t=>null!=t)}(t,i,r),o=e(n);if(J(o))return o}}}function J(t){return null!=t&&!isNaN(t)}R.set((0,l.ou)());var Q=n(63608),K=n(93468),X=n(12986),Y=n(50369),Z=n(51518);const tt=6e4,et=(0,s.bP)(),nt=(0,s.Xe)(),it=(0,s.bP)(),rt=(0,s.bP)(),ot=(0,s.Xe)(),st=(0,s.Xe)(),at=()=>{},ct=(0,s.MV)(),ut=(0,s.MV)(),dt=(0,s.MV)();function lt(t,e,n,i,r){if([ct,ut,dt,nt,et,st,ot].forEach(t=>t.unset()),rt.set(i||X.A),it.set(r||X.A),!i||!r||!e)return;const{bundleInfo:s,pcsInfo:a}=e.ClientSettings||{};st.set({buildAlias:s&&s.alias,env:a&&a.env});const{pivotsFinalized:c}=(0,o.kP)(t,e,n),u=!t&&(0,Z.E)(),d=t&&(0,o.Kz)();ot.set(!0),d&&c.then(()=>{(0,o.Kz)()||pt()}),(u||d)&&(nt.set(!0),et.set(gt({props:{},dedupeBehavior:2,startTime:0,getMatches:()=>d?(0,o.HB)():[]})))}function ht(t,e,n){if(ot.get())return n=n||(0,o.HB)(),M(st.get(),t,n,e)}function ft(t){if(pt()&&t){wt(t,Object.values(Y.A.get()),(0,i.ms)())}}function pt(){if(et.get())return et.call(!0),nt.unset(),et.unset(),!0}function gt(t){0===ct.size&&(!nt.get()&&performance.clearResourceTimings(),rt.call());const{props:e,dedupeBehavior:n,groupId:o,traceId:s}=t,c=(0,Q.y)(e)+`|${s||""}|${o||""}`,u=ct.get(c);if(u&&u.size)if(n&&2!==n){if(1===n)return at}else{const t=o&&dt.get(o);t&&t.size&&u.forEach(e=>t.delete(e));const e=s&&ut.get(s);e&&e.size&&u.forEach(t=>e.delete(t)),u.clear()}let d;return d=e=>{const n=ct.get(c);if(n&&n.delete(d)){const u=s&&ut.get(s);u&&u.delete(d);const l=o&&dt.get(o);l&&(e?l.delete(d):(l.forEach(t=>t!==d&&t(!0)),l.clear())),n.size||!ct.delete(c)||ct.size||it.call(),e||function(t){const e=(0,i.ms)({start:t.startTime,end:performance.now()}),{spanFilterFn:n}=e,o=Object.values(Y.A.get()).filter(t=>{const{timeSpan:e}=t;return e&&n(e[0],void 0,e[1])}),s={},c=t.getMatches();if(!wt(s,o,e,c))return;try{r.YT.sendLoadTimeEvent({markers:s})}catch(t){(0,K.vV)(a.P_C,"Failed to upload entity-metrics for manual trace",`Matches: ${c.map(t=>t.key).join("|")}`)}}(t)}},mt(ct.getObj(),c,d),mt(ut.getObj(),s,d),mt(dt.getObj(),o,d),setTimeout(()=>d(!0),t.stopTimeout||tt),d}function mt(t,e,n){if(e){let i=t.get(e);!i&&t.set(e,i=new Set),void 0!==n&&i.add(n)}}function wt(t,e,n,i){if(t&&ot.get()){const r=ht(e,n,i);if(r)return t.entityMetrics=r,!0}}},16507:function(t,e,n){n.d(e,{n:function(){return i}});var i,r=n(41667),o=n(84194);!function(t){function e(t){return null!=t}t.isNotNullOrUndefined=e,t.isDefined=function(t){return void 0!==t},t.isKeyValuePair=function(e,n,i){return t.isNonNullObject(e)&&n(e.key)&&i(e.value)},t.isNonNullObject=function(t){return t&&"object"==typeof t},t.isNotNull=function(t){return null!==t},t.isNullOrWhiteSpace=function(t){return!(0,r.A)(t)||""===t.trim()},t.toNumber=function(t,e=-1){if(!t)return e;const n=(0,o.A)(t);return isNaN(n)?e:n},t.arrayHasData=function(t){return!!e(t)&&(t.constructor===Array&&t.length>0)},t.stringHasData=function(t){return(0,r.A)(t)&&t.trim().length>0},t.objectToString=function t(e){let n="",i=!0;if("object"!=typeof e)return n;for(const r in e)"object"==typeof e[r]?n+=i?`${t(e[r])}`:`-${t(e[r])}`:n+=i?`${e[r]}`:`-${e[r]}`,i=!1;return n},t.removeHyphens=function(t){if(t)return t.replace(/-/g,"")}}(i||(i={}))},16611:function(t,e,n){n.d(e,{e1:function(){return u},kN:function(){return c},mU:function(){return h},v5:function(){return a}});var i=n(79426);let r,o,s=!1;function a(){s=!0}function c(){s=!1,l()}function u(t){return"visible"!==document.visibilityState||t&&s?(r||(r=new i.e,document.addEventListener("visibilitychange",d)),r.getResultAsync()):Promise.resolve()}function d(){"visible"===document.visibilityState&&l()}function l(){!s&&r&&(r.set(),r=null,document.removeEventListener("visibilitychange",d))}function h(){return o||(o=new Promise(t=>{"visible"===document.visibilityState&&t(),document.addEventListener("visibilitychange",function e(){"visible"===document.visibilityState&&(t(),document.removeEventListener("visibilitychange",e))})})),o}},16813:function(t,e,n){var i;n.d(e,{r:function(){return i}}),function(t){t.CallToAction="CallToAction",t.CallToChoice="CallToChoice"}(i||(i={}))},17128:function(t,e,n){n.d(e,{Ps:function(){return w},Ve:function(){return m},dx:function(){return g}});var i=n(65022),r=n(93468),o=n(76166),s=n(12870);const a="OneWebServiceLatency",c="//assets.msn",u="//assets2.msn",d="//api.msn",l="prg-1s-bkupdmnt",h="prg-1s-bkupdmnt1",f="prg-1s-bkupdmnt2",p="prg-1s-bkupdmnt3";function g(){const t=s.Rb.CurrentFlightSet;return!(!t||!(t.has(l)||t.has(h)||t.has(f)||t.has(p)))}function m(){const t=s.Rb.CurrentFlightSet;return!(!t||!t.has(l)&&!t.has(h))}async function w(t,e={},n,l=!1){let h;try{if(h=await(0,o.hv)(t,n,e),h&&h.ok)return h}catch(e){(0,r.c_)(e,i.aVy,i.aVy.message,`Failed URL: ${t}`)}return h&&h.headers&&h.headers.get(a)||l?h:(t=s.Rb.CurrentFlightSet&&s.Rb.CurrentFlightSet.has(p)?t.replace(c,d).replace("/service/","/"):t.replace(c,u),(0,o.hv)(t,n,e))}},17268:function(t,e,n){n.d(e,{L:function(){return h}});var i,r,o,s,a=n(22360);!function(t){t.OneColumn="OneColumn",t.TwoColumn="TwoColumn",t.ThreeColumn="ThreeColumn",t.FourColumn="FourColumn",t.FiveColumn="FiveColumn",t.Any="Any"}(i||(i={})),function(t){t.customExperience="customExperience",t.grid="grid",t.horizontalStack="horizontalStack",t.layout="layout",t.rail="rail",t.verticalStack="verticalStack"}(r||(r={})),function(t){t.actionTrigger="ActionTrigger",t.button="Button",t.heading="Heading",t.peregrineExperience="PeregrineExperience",t.typography="Typography",t.webComponentExperience="WebComponentExperience"}(o||(o={})),function(t){t.riverGridChildren="riverGridChildren"}(s||(s={}));var c=n(88296),u=n(27942),d=n(29307),l=n(7187);class h{static registerAppValidator(t){this.expValidatorMap=t.getAllValidators()}static processConfig(t,e){if(!this.expValidatorMap||this.expValidatorMap.size<1||!t||!t.childExpValidatorMap)return t;const n=t.childExpValidatorMap;let i=null,r=null;for(const o in n){const s=n[o];if(this.expValidatorMap.has(o)){this.expValidatorMap.get(o)(s.validationArgs)&&(null===r&&(r=this.expConfigMap.get(e)||t),null===i&&(i=(0,d.A)(r)),t=this.filterConfig(s,r))}}return i?this.expConfigMap.set(e,i):null===r&&this.expConfigMap.has(e)&&(t=this.expConfigMap.get(e)),t}static removeFromRiverGridChildren(t,e){const n=e.riverGridChildren;return n&&n.forEach(e=>{const n=e.children;if(n){const i=t.childExperienceConfigInfo,r=(0,a.dt)(i);e.children=n.filter(t=>{const e=t.childExperienceConfigInfo;return!e||!i||i.instanceId!==e.instanceId||r!==(0,a.dt)(e)})}}),e}static getChildrenDataConnectorConfigInfos(t){const e=[];if(t&&t.dataConnectors&&t.dataConnectors.length>0){const n=h.getOrdinalObjectForCurrentBreakpoint(t.dataConnectors);n&&n.children&&n.children.length>0&&n.children.forEach(t=>{e.push(t)})}return e}static getMetadataByScreenWidth(t,e){return e.find(e=>e.screenWidth===t)||e.find(t=>t.screenWidth===i.Any)}static getOrdinalObjectForCurrentBreakpoint(t){switch((0,c.TU)().currentColumnArrangement){case u.j1.c1:return h.getMetadataByScreenWidth(i.OneColumn,t);case u.j1.c2:return h.getMetadataByScreenWidth(i.TwoColumn,t);case u.j1.c3:return h.getMetadataByScreenWidth(i.ThreeColumn,t);case u.j1.c4:return h.getMetadataByScreenWidth(i.FourColumn,t);case u.j1.c5:return h.getMetadataByScreenWidth(i.FiveColumn,t);default:return h.getMetadataByScreenWidth(i.Any,t)}}static compositionOverrideResolver(t,e){const{getCompositionIdOverride:n}=e||{},{composition:i,compositionOverrides:r}=t;return r&&(0,l.isFunction)(n)&&r[n()]||i}static getChildrenExperienceConfigInfos(t,e){const n=[];if(t&&t.composition){const i=h.compositionOverrideResolver(t,e);switch(i.type){case r.rail:case r.horizontalStack:case r.layout:i.page.children.forEach(t=>{void 0!==t.children&&t.children.forEach(t=>{if(!t.children)return;const{childType:e}=t.children;e?e===o.peregrineExperience&&n.push(t.children.child):n.push(t.children)})});break;case r.grid:i.grid.rows.forEach(t=>{void 0!==t.columns&&t.columns.forEach(t=>{const{itemType:e}=t.item;e&&e===o.peregrineExperience&&n.push(t.item.child)})});break;case r.customExperience:{const t=i;n.push(t.experience);break}}}return n}static filterConfig(t,e){return t&&"string"==typeof t.sectionName&&t.sectionName.toLowerCase()===s.riverGridChildren.toLowerCase()?this.removeFromRiverGridChildren(t,e):e}static resetValidatorMap(){this.expValidatorMap.clear()}static resetConfigMap(){this.expConfigMap.clear()}}h.expValidatorMap=new Map,h.expConfigMap=new Map},17501:function(t,e,n){var i;n.d(e,{x:function(){return i}}),function(t){t[t.All=0]="All",t[t.Otf=1]="Otf",t[t.OneDS=2]="OneDS",t[t.CTag=3]="CTag",t[t.Comscore=4]="Comscore",t[t.Debug=5]="Debug",t[t.SuperApp=6]="SuperApp",t[t.Automation=7]="Automation",t[t.SuperAppBridge=8]="SuperAppBridge"}(i||(i={}))},17506:function(t,e,n){n.d(e,{GK:function(){return f},Pj:function(){return h},R:function(){return l},kj:function(){return p},oW:function(){return d}});var i=n(65022),r=n(93468),o=n(98216),s=n(50115),a=n(77246),c=n(17720),u=n(12870);const d="MSNCMPN_RUBY_CARD",l="MSNCMPN_RUBY_GREETING";async function h(){return new Promise(async t=>{if(!(0,a.S)()||u.Rb?.IsPrerender){const e=await(0,s.Db)();return void t(e)}"function"==typeof window?.chrome?.edgeMarketingPagePrivate?.isEdgeChatEnabled&&"function"==typeof window?.chrome?.edgeMarketingPagePrivate?.sendCopilotQuery?window.chrome.edgeMarketingPagePrivate.isEdgeChatEnabled(e=>{t(e)}):t(!1)}).then(t=>(m(t),t))}function f(){return"function"==typeof window?.chrome?.edgeMarketingPagePrivate?.isEdgeChatVisible}const p=(t,e="MSNCMPN_DEFAULT_CARD")=>{if(window&&window.chrome&&window.chrome.edgeMarketingPagePrivate)try{window.chrome.edgeMarketingPagePrivate.sendCopilotQuery(t,t,"",e,"MsnNtpQuery","",g)}catch(t){(0,r.c_)(t,i.o6d,"Copilot Card - edgeMarketingPagePrivate sendCopilotQuery API failure:")}else(0,r.vV)(i.cnX,"Copilot Card - edgeMarketingPagePrivate sendCopilotQuery is not available to use.")},g=t=>{"FEATURE_DISABLED"===t?(0,r.vV)(i.seI,"Copilot Card - edgeMarketingPagePrivate sendCopilotQuery feature is disabled."):"MESSAGE_SENT"===t?o.YT.addOrUpdateTmplProperty("askCopilotQuerySent","1"):(0,r.vV)(i.Gmj,"Copilot Card - edgeMarketingPagePrivate sendCopilotQuery API returns unknown error.")},m=t=>{c.vv.set("__CopilotAPISupported__",t)}},17703:function(t,e,n){n.d(e,{b:function(){return h}});var i=n(99893),r=n(79742),o=n(90831),s=n(9774),a=n(45494);const c={[a.f.C0001]:s.j.Essential,[a.f.C0002]:s.j.Advertising,[a.f.C0003]:s.j.SocialMedia,[a.f.C0004]:s.j.ThirdPartyAnalytics};var u=n(45181),d=n(59239),l=n(77246);function h(t){if(u.n.get(u.Y.Initialized))return;let e=i.O.None,n=r.z.NotRequired;(0,l.S)()&&(t&&t.required?(e=i.O.WidgetHost,n=t.categories?r.z.NotRequired:r.z.Required,f(t.categories),window.addEventListener(o.t,t=>f(t.detail))):(0,d.Tj)()?(e=i.O.MSCCBanner,n=(0,d.GR)()?r.z.Required:r.z.NotRequired,n===r.z.Required?u.n.set(u.Y.ActiveCookieCategories,[s.j.Essential]):u.n.set(u.Y.ActiveCookieCategories,[...Object.values(s.j)])):(0,d.d1)()&&(e=i.O.OneTrustBanner,n=(0,d.Cl)()?r.z.Required:r.z.NotRequired,p(),window.addEventListener(o.M,p))),u.n.set(u.Y.CookieConsentStatus,n),u.n.set(u.Y.CookieConsentProvider,e),u.n.set(u.Y.Initialized,!0)}function f(t){const e=t&&Object.keys(t).filter(e=>Object.values(s.j).includes(e)&&1===t[e])||new Array;e.includes(s.j.Essential)||e.unshift(s.j.Essential),u.n.set(u.Y.ActiveCookieCategories,e)}function p(){const t=window.OnetrustActiveGroups,e=t&&t.trim().split(",").filter(t=>{const e=t&&t.trim();return Object.values(a.f).includes(e)}).map(t=>{const e=t.trim();return c[e]})||new Array;e.includes(s.j.Essential)||e.unshift(s.j.Essential),u.n.set(u.Y.ActiveCookieCategories,e)}},17720:function(t,e,n){n.d(e,{$U:function(){return o},vv:function(){return r}});let i=new Map;const r=Object.freeze({set(t,e){return i.set(t,e),this},get:function(t,e){let n=i.get(t);return void 0===n&&e&&(n=e(),i.set(t,n)),n},clear(){i.clear()},delete:t=>i.delete(t),has:t=>i.has(t)});function o(t){const e=Symbol();return{get current(){return r.get(e,()=>t)},set current(t){r.set(e,t)}}}},17831:function(t,e,n){var i;n.d(e,{F:function(){return i}}),function(t){t.ntpAcquireToken="NAT",t.ntpUpdateToken="NUT",t.ntpNewAccount="NRP",t.ntpGetEdgeLoginToken="NET",t.ntpAuthManagerToken="NAM",t.ntpWorkIdCookie="NWC"}(i||(i={}))},18e3:function(t,e,n){n.d(e,{m:function(){return w}});n(57209);var i=n(98165),r=n(12870);const o="undefined"!=typeof window?function(){const t={positions:[],beacons:{},clickBeacons:{},elements:{},timer:null,watch:null,paused:!1,supportsIO:!(window.location.search.indexOf("useLegacyTracking=1")>-1)&&"IntersectionObserver"in window,viewedBeaconHistory:new Set},e="background: #fff; border-radius: 2px; color: #5f6a96; padding: 4px;";let n=!1;window&&(n=window.location.search.toLowerCase().indexOf("debug=1",0)>-1);const i=function(t){"NOT_PROVIDED"!==t&&((new Image).src=t)},r=function(e){const n=t.clickBeacons[e]||[];if(n.length)for(let t=0,e=n.length;t<e;t++)i(n[t])},s=function(t,e){const n=(new Date).getTime()/1e3|0,i=Math.floor(9007199254740990*Math.random()),r=e&&e.index||0;return t.replace("$(AD_POSN)",encodeURIComponent("pp=m,pi="+r)).replace("{REQUEST_ID}",i).replace("[timestamp]",n).replace("[CACHEBUSTER]",n).replace("[RANDOM_NUMBER]",i)},a=function(t,e){return t.replace("$(S_VIEW_TYPE)",e)},c=function(t,e,n){const i=function(t,e){const n=e+1,i=Math.floor(t.width/n),r=Math.floor(t.height/n),o=Math.max(0,t.left),s=t.top,a=[];for(let t=1;t<n;t++){const e=o+i*t;for(let t=1;t<n;t++){const n=s+r*t;a[a.length]=[e,n]}}return a}(e,10);let r=0;for(let e=0,n=i.length;e<n;e++){const n=i[e][0],o=i[e][1];u(t,n,o)||r++}const o=100*n;return!(100-r/i.length*100>=o)},u=(t,e,n)=>{if(!!t.shadowRoot){const i=t.shadowRoot.elementFromPoint(e,n);return t.shadowRoot.contains(i)||t.contains(i)}const i=document.elementFromPoint(e,n);return!(!i||"MSFT-FEED-LAYOUT"!==i.tagName.toUpperCase()&&"VIEWS-NATIVE-AD"!==i.tagName.toUpperCase()&&"EDGE-CHROMIUM-PAGE"!==i.tagName.toUpperCase())},d=function(t,e){const n=function(){const t=document,e=window,n=t.body,i=t.documentElement;return{height:e.innerHeight||i.clientHeight||n&&n.clientHeight,width:e.innerWidth||i.clientWidth||n&&n.clientWidth}}(),i=t.getBoundingClientRect(),r=Math.max(0,Math.min(i.bottom,n.height)-Math.max(i.top,0)),o=Math.max(0,Math.min(i.right,n.width)-Math.max(i.left,0)),s=r/(i.height||t.offsetHeight)||0,a=o/(i.width||t.offsetWidth)||0;return!window.disableObstructionDetection&&window.addEventListener&&c(t,i,e)?0:Math.max(0,s+a-1)},l=function(t,e,n){return window.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},h=function(){const i=t.positions.length;for(let o=0;o<i;o++){const i=t.positions[o];if(!t.paused&&i){const s=i.uid,a=i.node;if(!a)continue;if(t.elements[s]||(t.elements[s]=a,t.clickBeacons[s]&&l(a,"click",function(){r(s)})),d(a,i.threshold)<i.threshold)i.history=null;else{i.history||(i.history=Date.now(),n&&console.log("%c[ Gemini: Started - "+i.history+" ]",e));const r=(Date.now()-i.history)/1e3;if(n&&console.log("%c[ Gemini: Tracking - "+r+" ]",e),r>=i.duration&&(n&&console.log("%c[ Gemini: Tracking - "+r+" ]",e),i.timer&&(clearInterval(i.timer),i.timer=null),i.observer&&i.observer.unobserve(a),t.viewedBeaconHistory.has(i.uid)||(t.viewedBeaconHistory.add(i.uid),i.callback(i)),i.history=Date.now(),t.positions.splice(o,1),o-=1,!t.positions.length)){n&&console.log("%c[ Gemini: Finished - "+i.history+" ]","background: #eb2e2e; border-radius: 2px; color: #fff; padding: 4px;"),t.timer&&(clearInterval(t.timer),t.timer=null);break}}}}},f=function(t){const e=t.node;if(!t.observer){const n=new IntersectionObserver(function(e){return function(e){const n=e[e.length-1];n.isIntersecting?n.isIntersecting&&!t.timer&&(t.timer=setInterval(h,150)):(clearInterval(t.timer),t.timer=null,t.history=null)}(e)},{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]});n.observe(e),t.observer=n}},p=function(e,r,a,c,u,d){const l=a.a,h=a.c,p=a.d,g=a.p,m=a.t,w=t.beacons,y=t.positions,v=g/100;w[e]||(w[e]={});w[e][r]={urls:c,threshold:v,duration:p,type:m,consecutive:h,audio:l};const b={uid:e,threshold:v,duration:p,consecutive:h,audio:l,callback:function(){const t=w[e][r],a=t.urls,c=a.length,u=o.beaconCallback;for(let o=0;o<c;o++){const c=a[o];i(s(c,d)),"function"==typeof u&&u(w[e][r],e,r,c),n&&console.log("%c[ Gemini: $$$$ ]\n"+JSON.stringify({url:c,rule:r,threshold:t.threshold,duration:t.duration,consecutive:t.consecutive},null,2),"background: #5c71d9; border-radius: 2px; color: #fff; padding: 4px;")}},node:u,history:null};y.push(b),t.supportsIO&&f(b)},g=function(e,n,i){const r=n.rules,o=r.viewabilityDefStatic,s=r.viewabilityDefStatic3P,c=n.tag,u=c.clickTrackingUrl,d=c.imprTrackingUrl,l=c.imprTrackingUrls,h=n.actionUrls,f=n.beacon;if(h&&h.PARTIAL_VIEW){const t=h.PARTIAL_VIEW;p(e,"viewabilityDefStaticPartial",{p:.01,d:0,t:21},t,i,n)}if(o||f||h&&h.IMPR_INTERNAL){const t="viewabilityDefStatic",r=o||{c:1,d:1,p:50};let s=[];f&&f.length&&s.push(f),h&&h.IMPR_INTERNAL&&(s=s.concat(h.IMPR_INTERNAL)),l&&l.length?s=s.concat(l):d&&(d instanceof Array?s=s.concat(d):s.push(d)),p(e,t,r,s,i,n)}if(s&&h&&h.STATIC_VIEW_3P){const t=s.length;for(let r=0;r<t;r++){const t=h.STATIC_VIEW_3P.slice(),o=s[r],c="viewabilityDefStatic3P:"+r,u=s[r].t;for(let e=0,n=t.length;e<n;e++)t[e]=a(t[e],u);p(e,c,o,t,i,n)}}let g=[];h&&h.CLICK_INTERNAL&&(g=g.concat(h.CLICK_INTERNAL)),u&&u.length&&(g=g.concat(u)),t.clickBeacons[e]=g},m=function(t,e){const n=t.ads,i=t.section.id,r=n.length;for(let t=0;t<r;t++){const r=n[t],o=r.customId||"gemini-"+i+"-"+(r.creativeId||r.demandSourceCreativeId||r.dynamicProductAdId||0)+"-"+r.index,s=e;r.tag="string"==typeof r.tag?JSON.parse(r.tag):r.tag,r.beacon=r.beacon.replace("$(AD_POSN)",encodeURIComponent("pp=m,pi="+r.index)),g(o,r,s)}},w=function(e,i){const r=e instanceof Array;if(!e||r&&!e.length||e&&"object"!=typeof e)return;e&&!r&&(e=[e]);const o=e.length;for(let t=0;t<o;t++){const n=e[t],r=n.sectionads;if(r)for(let t=0;t<r.length;t++)m(r[t],i);else m(n,i)}return"IntersectionObserver"in window||t.timer||(n&&console.log("%c[ Gemini: Start Watching ]","background: #55ae3f; border-radius: 2px; color: #fff; padding: 4px;"),t.timer=setInterval(h,150)),this};return window.Gemini=w,"hidden"in document&&document.addEventListener("visibilitychange",function(){return t.paused=document.hidden}),w.version="2.0",w}():null;var s=n(88294),a=n(93468),c=n(65022),u=n(84397),d=n(95125),l=n(1755),h=n(77246),f=n(27261),p=n(98216),g=n(29231),m=n(31774);class w{constructor(t){this.config=t,this.visiJsonTrackingData=new Map,this.userActionLog=new d.Yg,this.beaconsProcessed=new Map,this.currentVideoDom=new Map,this.onObserve=(t,e)=>(n,r)=>{n&&n.forEach(n=>{s.v.logCallback(()=>"IntersectionRatio: "+n.intersectionRatio.toString());let o=1e3;(0,i.T)()&&(o=0),n.intersectionRatio>=.5?this.timerId=window.setTimeout((n,i)=>{this.fireVisibilityBeacon(n,i),this.userActionLog.fireImpressionLog(t,e,i)},o,r,n.target):this.timerId&&clearTimeout(this.timerId)})}}async sendBeaconForAdServed(t){const{beaconsJson:e,beaconsSupportHttpPOST:n}=t;this.fireAdServedTrackingCall(e,n)}async fireAdServedTrackingCall(t,e){if(t&&t.length>0)try{const e=JSON.parse(t),n=e&&e.trb;if(n)for(let t=0;t<n.length;t++){const i=n[t];window.servedBeaconUrls?.includes(i)||(this.beaconsProcessed&&this.beaconsProcessed.has(i)&&this.beaconsProcessed.get(i)===u._D.BeaconTypeAdServed||w.allServeBeaconsFiredOnPage&&w.allServeBeaconsFiredOnPage.has(i)||this.fireTrackingBeacon(n[t],u._D.BeaconTypeAdServed,e.e))}}catch(e){p.YT.sendAppErrorEvent((0,a.$5)(c.wvT,"Fail to fire ad served call",`Fail to parse beacon json tracking data: ${t}`))}}fireClickTrackingCall(t,e){if(t&&t.length>0)try{const n=JSON.parse(t),i=JSON.parse(e),r=n&&n.tcb,o=i&&i.e;if(r)for(let t=0;t<r.length;t++)this.fireTrackingBeacon(r[t],u._D.BeaconTypeClick,o)}catch(e){p.YT.sendAppErrorEvent((0,a.$5)(c.wvT,"Fail to fire ad clicked call",`Fail to parse beacon click json: ${t}`))}}fireUserActionBeacon(t){this.fireTrackingBeacon(t,u._D.UserActionEvent,!1)}visibilityObserver(t,e,n){const i=document.querySelector(t.replace(/\s/g,".")),r=t.slice(1,t.length);i&&this.elementVisibilityObserver(i,e,void 0,r,n)}visibilityCarouselObserver(t,e){t&&e&&this.elementVisibilityObserver(t,e)}elementVisibilityObserver(t,e,n,i,r,o,s,u,d){if(this.visiJsonTrackingData.set(t,e),n)try{!function(t,e){window.Gemini&&window.Gemini(t,e)}(JSON.parse(n),t)}catch(t){p.YT.sendAppErrorEvent((0,a.$5)(c.wvT,"Fail to invoke gemini caller",`Fail to parse beacon gemini json: ${n}`))}const l={root:null,rootMargin:"0px",threshold:.5};let h;return this.doubleVerifyConfig=d,this.onObserve=this.onObserve.bind(this),this.fireVisibilityBeacon=this.fireVisibilityBeacon.bind(this),this.loadPolyfills().then(()=>{h=new IntersectionObserver(this.onObserve(s,u),l),h.observe(t),r&&r.length>0&&(this.trackBingViewability=this.trackBingViewability.bind(this),this.trackBingViewability(t,i,r,!0,this.beaconsProcessed,o,e))}),()=>h?.disconnect()}checkVideoElementChanged(t,e,n){const i=t&&t.querySelector("native-ad-video-player")&&t.querySelector("native-ad-video-player").shadowRoot,r=i&&i.querySelector("content-video-player")&&i.querySelector("content-video-player").shadowRoot?i.querySelector("content-video-player").shadowRoot.querySelector("video"):null,o=n?n.get(t):null;n&&r!=o&&(e.element=r,e.videoParenentElement=i&&i.host&&i.host.parentElement,window&&window.MSANTracker&&window.MSANTracker.TrackElements&&(window.MSANTracker.PlayUtils.untrackElement(o),window.MSANTracker.TrackElements([e],window)),n.set(t,r))}trackBingViewability(t,e,n,i,r,o,s){const a=(this.config&&this.config.VideoAd&&this.config.VideoAd.view&&this.config.VideoAd.view.triggerType)??"play",c=(this.config&&this.config.VideoAd&&this.config.VideoAd.view&&this.config.VideoAd.view.durationMs)??2e3,d=!!o,l=e?e.concat(" video"):"";let h=t,f=null;i&&d&&(null==this.currentVideoDom&&(this.currentVideoDom=new Map),h=t&&t.querySelector("native-ad-video-player")&&t.querySelector("native-ad-video-player").shadowRoot,f=h&&h.querySelector("content-video-player")&&h.querySelector("content-video-player").shadowRoot&&h.querySelector("content-video-player").shadowRoot.querySelector("video"),this.currentVideoDom.set(t,f));let p=[];const g=[];let m=[],w=[];if(n&&n.length>0)for(let t=0;t<n.length;t++){const e=n[t];r&&r.has(e)&&r.get(e)===u._D.BeaconTypeVisibility||(d?m.push({type:"videoView",triggerType:a,url:e,percentage:50,duration:c}):g.push({type:"view",triggerType:"view",url:e,percentage:50,duration:1e3}),null!=r&&i&&r.set(e,u._D.BeaconTypeVisibility),w.push({beaconUrl:e,type:u._D.BeaconTypeVisibility}))}if(d){const{bingBeacons:n,servedBeacons:a,videoTrackedUrls:c}=this.getBeaconsForVideo(o,r,i,s);m=m.concat(n),w=w.concat(c),p=[{impid:e,element:i?t:null,beacons:a},{impid:i?e:l,element:i?f:null,videoParenentElement:i?h&&h.host&&h.host.parentElement:null,beacons:m}]}else p=[{impid:e,element:i?t:null,beacons:g}];if(window&&window.MSANTracker&&window.MSANTracker.TrackElements&&window.MSANTracker.TrackElements(p,window),i&&d){const n={impid:e,element:f,videoParenentElement:h&&h.host&&h.host.parentElement,beacons:m};setInterval(this.checkVideoElementChanged,100,t,n,this.currentVideoDom)}return w}getBeaconsForVideo(t,e,n,i){const o=(this.config&&this.config.VideoAd&&this.config.VideoAd.mobileEnable)??!0,s=(this.config&&this.config.VideoAd&&this.config.VideoAd.impression&&this.config.VideoAd.impression.durationMs)??1e3;let d=[];const l=[],{bingBeacons:h,videoUrls:f}=this.generateVideoBeaconsFromVast(t,e,n);d=d.concat(f);const g=i,m=r.Rb&&r.Rb.ClientSettings||{},w=m.browser&&"true"===m.browser.ismobile||"phone"===m.deviceFormFactor;if(g&&g.length>0)try{const t=JSON.parse(g);if(t){const i=t.trb;if(i)for(let r=0;r<i.length;r++){const a=i[r];e&&e.has(a)&&e.get(a)===u._D.BeaconTypeAdServed||(l.push({type:"videoImpression",triggerType:"view",url:t.e?a:decodeURIComponent(a),percentage:50,duration:o&&w?300:s}),null!=e&&n&&e.set(a,u._D.BeaconTypeAdServed),d.push({beaconUrl:a,type:u._D.BeaconTypeAdServed}))}}}catch(t){p.YT.sendAppErrorEvent((0,a.$5)(c.wvT,"Fail to fire video tracked beacon",`Fail to parse beacon json tracking data: ${g}`))}return{bingBeacons:h,servedBeacons:l,videoTrackedUrls:d}}getMilliseconds(t){const e=t.split(".");let n=0;const i=e[0];e.length>1&&(n+=Number(e[1]));const r=i.split(":");return n+1e3*(3600*Number(r[0])+60*Number(r[1])+Number(r[2]))}generateVideoBeaconsFromVast(t,e,n){const i=[],r=[],o=this.getMilliseconds(t.Duration);if(t.TrackingEvents)for(let s=0;s<t.TrackingEvents.length;s++)if(t.TrackingEvents[s]){const a=t.TrackingEvents[s].value;if(e&&e.has(a)&&e.get(a)===u._D.BeaconTypeVideoProgress)continue;let c="";switch(t.TrackingEvents[s].event&&(c=t.TrackingEvents[s].event.toLowerCase()),c){case u._D.StartEvent:i.push({type:"start",triggerType:"play",url:a,percentage:50,duration:0});break;case u._D.FirstQuartileEvent:i.push({type:"quartile",triggerType:"play",url:a,percentage:50,duration:Math.ceil(o/4)});break;case u._D.MidPointEvent:i.push({type:"quartile",triggerType:"play",url:a,percentage:50,duration:Math.ceil(o/2)});break;case u._D.ThirdQuartileEvent:i.push({type:"quartile",triggerType:"play",url:a,percentage:50,duration:Math.ceil(o/4*3)});break;case u._D.CompleteEvent:i.push({type:"complete",triggerType:"play",url:a,percentage:50,duration:o});break;case u._D.ProgressEvent:t.TrackingEvents[s].offset&&i.push({type:"progress",triggerType:"play",url:a,percentage:50,duration:this.getMilliseconds(t.TrackingEvents[s].offset)})}null!=e&&n&&e.set(a,u._D.BeaconTypeVideoProgress),r.push({beaconUrl:a,type:u._D.BeaconTypeVideoProgress})}return{bingBeacons:i,videoUrls:r}}firePageMonetizedTelemetry(t){if(!t?.getAttribute)return;const e=t.getAttribute(g.i);try{const n=JSON.parse(e),i=n?.ism;i&&p.YT.sendContentViewEvent(t.parentElement,g.ym.Partial)}catch(t){p.YT.sendAppErrorEvent((0,a.$5)(c.wvT,"Fail to set isMonetized flag",`Fail to parse telemetryObject json: ${e}`))}}fireVisibilityBeacon(t,e){if(s.v.logCallback(()=>"ad visible for 1 second"),this.firePageMonetizedTelemetry(e),this.visiJsonTrackingData&&this.visiJsonTrackingData.get(e))try{const t=JSON.parse(this.visiJsonTrackingData.get(e)),n=t&&t.tvb,i=(0,m.FS)(this.doubleVerifyConfig);if(i?.shouldAttach&&(0,m.Mb)(i?.dvTrackers,this.doubleVerifyConfig?.nativeAdId,c.fze),n)for(let e=0;e<n.length;e++){const i=n[e];window.viewedBeaconUrls?.includes(i)||(this.beaconsProcessed&&this.beaconsProcessed.has(i)&&this.beaconsProcessed.get(i)===u._D.BeaconTypeVisibility||w.allVisiBeaconsFiredOnPage&&w.allVisiBeaconsFiredOnPage.has(i)||this.fireTrackingBeacon(i,u._D.BeaconTypeVisibility,t.e))}}catch(t){p.YT.sendAppErrorEvent((0,a.$5)(c.wvT,"Fail to fire visibility beacon",`Fail to parse beacon json tracking data: ${this.visiJsonTrackingData.get(e)}`))}t&&t.unobserve(e)}fireRequestLevelBeacons(t){t&&t.forEach(t=>{t&&this.fireRequestLevelBeaconCall(t)})}fireJSTrackers(t,e=!1){if(t&&t.length>0)try{const n=JSON.parse(t),i=n&&n.tjb;if(!Array.isArray(i))return;for(const t of i)t&&"string"==typeof t&&(this.beaconsProcessed&&this.beaconsProcessed.has(t)&&this.beaconsProcessed.get(t)===u._D.BeaconTypeJsTracker||(e&&this.isXandrVisibilityTracker(t)?this.fireXandrJSTracker(t):this.fireJSTracker(t)))}catch(e){p.YT.sendAppErrorEvent((0,a.$5)(c.wvT,"Fail to fire jstrackers",`Fail to parse beacon json tracking data: ${t}`))}}async fireJSTracker(t){return new Promise((e,n)=>{if(!(0,h.S)())return void n(new Error("DOM is not available"));const i=(0,f.C7)(t,void 0,!0,void 0);i.onload=()=>{s.v.logCallback(()=>"Added jsTracker url: "+t),this.beaconsProcessed.set(t,u._D.BeaconTypeJsTracker),e()},i.onerror=e=>{p.YT.sendAppErrorEvent({...c.mi4,message:"Failed to load partner jsTracker file",pb:{...c.mi4.pb,customMessage:`Error occurred while loading ad partner trackerJS file: ${t}`}}),n()},document.body.appendChild(i)})}extractXandrTrackerInfo(t){let e,n;const i=t.match(/\/v\/s\/(\d+)\/trk\.js/);if(i)e="trk",n=i[1];else{const i=t.match(/\/viewability\/versions\/(v[\d.]+)\/banner\.js/);i?(e="banner",n=i[1]):(e="unknown",n="unknown")}return{scriptType:e,version:n,iframeId:`${w.xandrIframePrefix}-${e}-${n}`}}extractTagIdFromTrackerUrl(t){const e=t.match(/[;&]tag_id=([^;&]+)/);return e?e[1]:null}createXandrScriptKey(t){try{const{scriptType:e,version:n}=this.extractXandrTrackerInfo(t),i=this.extractTagIdFromTrackerUrl(t);if(i&&"unknown"!==e&&"unknown"!==n)return`${e}-${n}-${i}`}catch(t){s.v.logCallback(()=>`Failed to parse Xandr script key, using full URL: ${t.message}`)}return s.v.logCallback(()=>`Using full URL as Xandr script key for: ${t.substring(0,100)}...`),t}getOrCreateXandrIframe(t){if(!(0,h.S)())return null;const{scriptType:e,version:n,iframeId:i}=this.extractXandrTrackerInfo(t),r=`${e}-${n}`;let o=document.getElementById(i);return o||(o=document.createElement("iframe"),o.id=i,o.width="0",o.height="0",o.tabIndex=-1,o.style.cssText="border: 0px; display: none; margin: 0px; padding: 0px; position: absolute; left: -9999px; top: -9999px;",o.onload=()=>{const t=o.contentDocument||o.contentWindow&&o.contentWindow.document;t&&(t.open(),t.write('\n                        <html>\n                            <head></head>\n                            <body marginwidth="0" marginheight="0"></body>\n                        </html>\n                    '),t.close())},document.body.appendChild(o),s.v.logCallback(()=>`Created new Xandr ${r} tracker iframe with ID: ${i}`)),o}injectScriptIntoIframe(t){return new Promise((e,n)=>{try{const i=this.getOrCreateXandrIframe(t),r=i?.contentDocument||i?.contentWindow&&i.contentWindow.document;if(!r)return(0,a.vV)(c.mi4,"Unable to access iframe document for Xandr tracker injection"),void n();const o=()=>{if(!r.head)return void setTimeout(o,10);const i=(0,f.C7)(t,void 0,!0,void 0);i.onload=()=>{s.v.logCallback(()=>"Added jsTracker url to iframe: "+t),this.beaconsProcessed.set(t,u._D.BeaconTypeJsTracker),e()},i.onerror=e=>{p.YT.sendAppErrorEvent({...c.mi4,message:"Failed to load Xandr tracker file",pb:{...c.mi4.pb,customMessage:`Error occurred while loading ad Xandr trackerJS file: ${t}`}}),n(e)},r.head.appendChild(i)};o()}catch(t){(0,a.vV)(c.mi4,"Error injecting Xandr tracker script into iframe",t),n()}})}async fireRequestLevelBeaconCall(t){if(t){s.v.logCallback(()=>"Firing encoded requestlevel beacon: "+t);let e=await new Image(1,1);e.src=t,e=null}}firePostTrackingBeacon(t,e,n){let i=u._D.BeaconFormatEncoded;n||(t=decodeURIComponent(t),i=u._D.BeaconFormatDecoded),t&&(s.v.logCallback(()=>"Firing "+i+" "+e+" beacon, beaconUrl: "+t),navigator.sendBeacon(t),this.beaconsProcessed.set(t,e))}fireTrackingBeacon(t,e,n){let i=u._D.BeaconFormatEncoded;n||(t=decodeURIComponent(t),i=u._D.BeaconFormatDecoded),t&&(s.v.logCallback(()=>"Firing "+i+" "+e+" beacon, beaconUrl: "+t),this.fireBeaconCall(t,e))}fireBeaconCall(t,e){try{let e=new Image(1,1);e.src=t,e=null}catch(e){p.YT.sendAppErrorEvent((0,a.$5)(c.pwC,"Invalid beacon URL",`Fail to parse beacon json tracking data: ${t}`))}finally{this.beaconsProcessed.set(t,e),e===u._D.BeaconTypeVisibility&&w.allVisiBeaconsFiredOnPage.add(t),e===u._D.BeaconTypeAdServed&&w.allServeBeaconsFiredOnPage.add(t)}}supportsIntersectionObserver(){return"IntersectionObserver"in n.g&&"IntersectionObserverEntry"in n.g&&"intersectionRatio"in IntersectionObserverEntry.prototype}loadPolyfills(){const t=[];return this.supportsIntersectionObserver()||t.push(n.e("node_modules_intersection-observer_intersection-observer_js").then(n.t.bind(n,95097,23))),Promise.all(t)}isXandrVisibilityTracker(t){return r.Rb?.CurrentFlightSet?.has("prg-ad-new-xandr-rf")?t.includes("trk.js"):t.includes("trk.js")||t.includes("/viewability/versions/v")&&t.includes("banner.js")}xandrJSTrackerInjection(t){if(r.Rb?.CurrentFlightSet?.has("prg-ad-new-xandr-rf"))this.fireJSTracker(t);else{const e=this.createXandrScriptKey(t);if(w.allInjectedXandrScripts.has(e))return void s.v.logCallback(()=>`Duplicate Xandr script skipped: ${t}`);w.allInjectedXandrScripts.add(e),s.v.logCallback(()=>`Pre-registered Xandr script key: ${e} for URL: ${t}`),this.injectScriptIntoIframe(t)}}fireXandrJSTracker(t){document.addEventListener(l.rz,e=>{const n=this.extractAdIdFromXandrTrackerUrl(t);e.detail.adUniqueIds.includes(n)&&this.xandrJSTrackerInjection(this.replaceXandrVisibilityTrackerParam(n,t))})}replaceXandrVisibilityTrackerParam(t,e){const n=`dom_id=${t};`,i=`dom_elt_var=${t};`;return e.replace(n,i)}extractAdIdFromXandrTrackerUrl(t){const e=t.match(/dom_id=([a-zA-Z0-9_-]+);/)?.[1];return e||(0,a.vV)(c.ne$,"Xandr visibility tracker URL doesn't have ad id","dom_id parameter is empty",{trackerUrl:t}),e}get intersectionObserver(){return this.loadPolyfills()}}w.allInjectedXandrScripts=new Set,w.allVisiBeaconsFiredOnPage=new Set,w.allServeBeaconsFiredOnPage=new Set,w.xandrIframePrefix="xandr-iframe"},18207:function(t,e,n){n.d(e,{Fl:function(){return v}});var i=n(65022),r=n(93468),o=n(89980),s=n(12870),a=n(85766),c=n(8597),u=n(59121),d=n(63418),l=n(77246),h=n(98216),f=n(17831),p=n(54361);const g="f3222e55-ab35-49de-81f3-88a3be08cf77",m="service::www.msn.com::mbi_ssl",w="service::bing.com::MBI_SSL",y="077c9b95-2f57-4442-8872-134fcc08fcb3/Bing.MSA.Default";async function v({accountInfo:t,clientId:e,signInStateChanged:n,customRefreshCallback:v}){const C=window.chrome,k=C&&C.authPrivate,T=t&&"MSA"===t.accountType;if(!k||!T)return await(0,u.k9)(null,v,n),(0,o.Lg)().removeItem(c.os),void p.p.addAuthRecord(f.F.ntpUpdateToken,"SUCCESS");(0,l.S)()&&s.Rb.IsPrerender&&"visible"!==document.visibilityState||(0,u.Au)();let x,A,{result:$,appError:I}=await async function(t){const e=(0,d.Ri)(a.wj);if(!e)return{result:!1,appError:{message:"MSA user, lt cookie not present.",pb:{...i.PI7.pb,isPrerender:s.Rb.IsPrerender,msnCookiePresent:e}}};return await(0,u.k9)(e,t),{result:!0}}(),{result:P,appError:R}=function(){const t=(0,o.Lg)()?.getItem(c.os),e=(0,o.Lg)()?.getItem(c.Ar);if(t&&e){const t=Number(e);if(t){return{result:(new Date).getTime()-new Date(t).getTime()<0}}}return{result:!1,appError:{message:"MSA user, Bing token not found.",pb:{...i.PI7.pb,isPrerender:s.Rb.IsPrerender,bingTokenFound:null!=t}}}}();if(!$){const o={account_id:t.accountId,account_type:t.accountType,client_id:e||g,scope_or_resource:m};if(x=await b(o),x&&!x.is_success&&x.error_info&&0==x.error_info.primary_error&&0==x.error_info.platform_error_code&&""!=x.error_string&&(0,d.Ri)(a.wj))return M=x.error_string,void(0,r.vV)(i.o9x,"Access token fetch failed. Used LT cookie",void 0,{...i.o9x.pb,errorMessage:M,isPrerender:s.Rb.IsPrerender});$=x?.is_success&&x?.is_token_valid,await async function(t,e,n=!1){await(0,u.k9)(t&&t.is_success&&t.is_token_valid&&t.access_token,e,n)}(x,v,n)}var M;if(!P){const{accountId:n,accountType:o}=t||{},a=(parseInt(s.Rb.ClientSettings?.browser?.version??"",10)||0)>101,c={account_id:n,account_type:o,client_id:e||g,scope_or_resource:a?y:w,...a&&{use_msa_v2_api:!0}};A=await b(c),P=A?.is_success&&A?.is_token_valid,S(A),P||(0,r.vV)(i.Urt,"Failed to acquire Bing access token.",void 0,{shouldSampleErrorsForTreatement1:!0}),S(A)}$||function(t,e,n){h.YT.sendAppErrorEvent({...i.PI7,message:"Failed to acquire MSA access token(s).",pb:{...i.PI7.pb,msn:t&&t.is_success?void 0:t&&t.error_info,bing:e&&e.is_success?void 0:e&&e.error_info,innerErrors:n,shouldSampleErrorsForTreatement1:!0}})}(x,A,[I,R])}async function b(t){const e=await function(t){return new Promise(e=>{window.chrome.authPrivate.acquireAccessTokenSilently(t,t=>{e(t)})})}(t);return p.p.addAuthRecord(f.F.ntpAcquireToken,e?.is_success&&e?.is_token_valid?"SUCCESS":"FAIL"),e}function S(t){if(t&&t.is_success&&t.is_token_valid&&t.access_token){const e=.5,n=(new Date).getTime()+36e5*e;(0,o.Lg)().setItem(c.os,t.access_token),(0,o.Lg)().setItem(c.Ar,n.toString())}}},18258:function(t,e,n){var i;n.d(e,{t:function(){return i}}),function(t){t[t.Production=0]="Production",t[t.Local=1]="Local"}(i||(i={}))},18263:function(t,e,n){n.d(e,{N:function(){return u},l:function(){return c}});var i=n(77246);let r=!1,o=!1,s=!1;function a(){!r&&document.hidden?o=!0:"visible"===document.visibilityState&&(s=!0)}function c(){return o}function u(){return s}(0,i.S)()&&(window.addEventListener&&window.addEventListener("beforeunload",function(){r=!0}),void 0!==document.hidden&&null!==document.hidden&&document.addEventListener("visibilitychange",a),a())},18287:function(t,e,n){n.d(e,{$$:function(){return F},B3:function(){return D},Ju:function(){return R},LF:function(){return O},g_:function(){return E},zH:function(){return _}});var i=n(31653),r=n(65022),o=n(7258),s=n(88294),a=n(93468),c=n(30817),u=n(89151),d=n(5518),l=n(79426),h=n(89980),f=n(6092),p=n(49084),g=n(12870),m=n(78629),w=n(77246),y=n(27261),v=n(26555),b=n(18284),S=n(23572);const C="4.24.0",k="2.24.0",T="1p-2.24.0",x="2.16";let A,$,I,P;function R(){return $}function M(t){const{tenantScope:e="Dual",tenantId:n}=t?.tenantOptions||{},{appId:r=m.L2}=t?.clientOptions||{};let o;o=n||("MSA"===e?"consumers":"AAD"===e?"organizations":"common");return{auth:{clientId:r,authority:`https://login.microsoftonline.com/${o}`,redirectUri:N(),navigateToLoginRequestUrl:!0},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1,claimsBasedCachingEnabled:!0},system:{loggerOptions:{loggerCallback:(t,e,n)=>{if(!n)switch(t){case"Error":return void s.v.logError("dual-auth: "+e.toString());case"Info":case"Verbose":case"Warning":return void s.v.log("dual-auth: "+e.toString())}}},tokenRenewalOffsetSeconds:i.HJ}}}function _(t=!1){const e={scopes:["User.Read"],loginHint:"",redirectUri:N(t)};return t||Object.assign(e,{...B(),extraQueryParameters:{edge_suppress_profile_switch:"1"}}),e}function E(t,e){const n={...B(),account:t,postLogoutRedirectUri:N(),extraQueryParameters:{logout_hint:e,edge_suppress_profile_switch:"1"}};return W()&&(n.logoutHint=e,delete n.extraQueryParameters.logout_hint),n}function F(t){return{scopes:t,forceRefresh:!1,redirectUri:N(!0)}}A="localhost.msn.com"===(0,y.VQ)(),P=(0,y.ou)().toLowerCase().endsWith(".cn"),I=((0,y.iA)().match(/\bpr=([\d]+)\b/)||{})[1];const D=(0,b.A)(async(t,e)=>{await async function(){if(!(0,w.S)())return;let t;(0,p.Sm)()&&(await Promise.race([L.getResultAsync(),(0,u.dT)(),(0,d.Y_)(1e4).then(()=>t=!0)]),t&&(0,a.vV)(r.vsI,"Loading MSAL before TTVR in delay load"));const e=(0,S.aK)(),n=e&&e.startMeasure("loadMsalScript").endMeasure;let i;const s=new Promise(t=>{i=t}),c=t=>{n&&n({customSuffix:t}),i()},l=z(`auth/msal-browser-${U()}.min.js`),h=(0,y.C7)(l);return h.onload=()=>c(),h.onerror=t=>{(0,a.vV)(r.TwO,"Error in loading MSAL script",(0,o.M5)(t)),c("error")},document.head.appendChild(h),await s}();const n=window.msal;if($=!!n,n&&!e){const e=new n.PublicClientApplication(M(t));return await e.initialize(),e}n&&!W()&&function(){const t=(0,h.Lg)();t.keys().forEach(e=>{const n=e.match(/-[-]+/),i=n&&n[0].length;i>=2&&(2===i&&e.includes("accesstoken")||3===i&&e.includes("idtoken")||4===i&&e.includes("refreshtoken"))&&t.removeItem(e)})}();const i=H()?{performanceTelemetryConfiguration:{samplingPrecentage:1}}:void 0;if(n&&n.PublicClientApplication){const e=new n.PublicClientApplication(M(t),i);return function(t){if(!W()||!g.Rb.CurrentFlightSet.has("prg-msal224-ts")&&!f.T3.IsDebug)return;let e=1;const n=(0,c.ZF)(),i=(t,i)=>n[`MSAL.${e}.${t}`]=i,r=t=>Math.round(10*t)/10;t.addPerformanceCallback(t=>{t.forEach(t=>{const n=t.name;i(`${n}-start`,r(t.startTimeMs-performance.timeOrigin)),i(n,r(t.durationMs)),i("meta",`c:${t.fromCache?1:0}-v:${t.startPageVisibility}-ok:${t.success?1:0}`),i("cv",t.correlationId);const o="DurationMs";(0,v.A)(t,(t,e)=>{if(e.endsWith(o)){const n=e.substring(0,e.length-o.length);i(`fn.${n}`,t)}}),e++})})}(e),e}});function O(){L.set()}function N(t){return z(t?"auth/auth-redirect-blank.html":"0/auth/auth-redirect.html","https://"+(!!(0,y.VQ)().match(/\.msn\.(com|cn)$/i)?(0,y.ou)():"www.msn."+(P?"cn":"com")),!1)}const L=new l.e;function B(){const t={appType:f.T3.AppType,authRedirJsVer:x,buildVersion:f.T3.BuildVersion,debug:f.T3.IsDebug?1:void 0,msalJsVer:U(),pr:I,returnUrl:(0,y.$N)(),isCnDomain:f.T3.IsChinaCompliance};return{state:encodeURIComponent(JSON.stringify(t))}}function U(){return H()?T:V()?k:C}function W(){return V()||H()}function V(){return g.Rb.CurrentFlightSet.has("prg-msal224-b")}function H(){return g.Rb.CurrentFlightSet.has("prg-msal224-1p")}function z(t,e="https://assets.msn."+(P?"cn":"com"),n=!0){let i="/latest",r=e;I&&n?i=`/pr-${I}`:A&&(i="",r=`https://${(0,y.ou)()}`);return`${r}/staticsb/statics${i}/${t}`}},18510:function(t,e,n){n.d(e,{G4:function(){return d},_Y:function(){return h},kl:function(){return l},hL:function(){return u}});var i=n(30817),r=n(80247),o=n(68399),s=n(89151),a=n(98216);n(28383);let c;function u(){return c||(c=new Promise(t=>{if(!window.isSSREnabled)return void t();const e=new URLSearchParams(location.search).get("delayTopDownHydration");"1"===e||"true"===e?window.startHydration=t:"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{t()},{once:!0}):t()})),c}function d(){const t=window.customElements.define,e=window.customElements.get,n=[];window.customElements.define=function(t,e,i){n.push({name:t,ctor:e,options:i})},window.customElements.get=function(t){return e.call(window.customElements,t)||!!n.find(e=>e.name===t)},u().then(()=>{window.customElements.define=t,n.forEach(({name:t,ctor:e,options:n})=>{customElements.define(t,e,n)}),window.customElements.get=e})}function l(){const t=(0,i.ZF)();a.YT.addOrUpdateCustomProperty("ssr-enabled",1),a.YT.addOrUpdateTmplProperty("ssr-enabled","1"),t.isSSREnabled=1;const e=function(){const t=performance.getEntriesByType("navigation")[0].serverTiming;if(t){const e=t.find(t=>"rsClusterName"===t.name);if(e)return e.description}}();e&&(a.YT.addOrUpdateCustomProperty("rs-cluster-name",e),t["rs-cluster-name"]=e)}function h(){const t=(0,i.ZF)(),e=window?.isSSRCompleted?1:0;a.YT.addOrUpdateCustomProperty("ssr-completed",e),t.isSSRCompleted=e,t.ssrRenderDuration=window.ssrRenderDuration,a.YT.addOrUpdateTmplProperty("ssr-completed",e.toString()),(0,r.i8)("renderArch",e?"ssr":"fallback-csr"),(0,o.up)({name:"TTSR",time:t[`${s.wL}Complete`]}),window.ssrCpuCost>0&&(t.ssrCpuCost=window.ssrCpuCost)}},18605:function(t,e,n){function i(t,e){if(t){const n=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t);return n&&n.length>1?n[1]:null}return null}n.d(e,{_:function(){return i}})},18702:function(t,e,n){n.d(e,{w:function(){return h}});var i=n(41589),r=n(17075),o=n(22182),s=n(90609),a=n(51830);class c extends a.A{constructor(t,e,n,i,r,o,s){super(e,n,i,r,o,s),this.RequestId=t}set isMetrics(t){this._isMetrics=t}get isMetrics(){return this._isMetrics}}var u=n(28083),d=n(77246),l=n(87346);class h{constructor(t,e=""){this.requestId=e,(0,d.S)()?(this.logger=o.J.getInstance("ExperienceLogger",r.$.Info,u.e.Browser),this.isDebugEnabled=((0,l.K)(t,"debug")||"").toLowerCase()in{1:1,true:1}||"vp"===((0,l.K)(window.location.href,"reqsrc")||"").toLowerCase(),this.isDebugEnabled&&!n.g.TEST_ENV&&(window.webpackRequire=n)):(this.logger=o.J.getInstance("ExperienceLogger",r.$.Info,u.e.NodeJs),this.isDebugEnabled=!1),this.setupLogLevel()}getLoggingService(){return this.logger}isDebug(){return this.isDebugEnabled}setDebug(t){this.isDebugEnabled=t,this.setupLogLevel()}setTags(t){this.tags=t}log(t,e){if(!this.tags||!this.tags.length||e&&e.length&&e.filter(t=>this.tags.includes(t)).length>0){const e=new c(this.requestId,t);this.logger.info(e)}}logError(t){const e=new c(this.requestId,t);this.logger.error(e)}logCallback(t){this.logger.infoCallback(t)}logObjects(...t){const e=new c(this.requestId,null,t);this.logger.info(e)}logSingleObject(t,e=!1){const n=new c(this.requestId,null,t);n.isMetrics=e,this.logger.info(n)}setupLogLevel(){this.logger.setLevel(this.isDebug()?r.$.Info:r.$.Error),this.setupAppenders()}setupAppenders(){this.logger.removeAllAppenders(),(0,d.S)()?this.logger.addAppender(new i.F(this.logger.getLevel())):this.logger.addAppender(new s.H(this.logger.getLevel()))}}},18731:function(t,e,n){n.d(e,{KP:function(){return a},bb:function(){return s},e9:function(){return c}});var i=n(6092),r=n(28383),o=n(51947);class s{constructor({params:t,qspPrefix:e,spec:n}={},i){this.requestData=new r.CN(n||o.ZU,e||o.UJ),t&&this.requestData.loadQueryParams(t),i&&(this.RequestId=i)}get requestId(){return this.RequestId||this.app.ActivityId}get app(){return i.T3}get data(){return this.requestData.data}}function a(t,e,n=!0){if("function"==typeof t){const e=t();if(e||0===e)return e}if(n)throw new Error("Expected "+e+" to return value. Possible invalid RequestContext spec used or the spec doesn't contain this data.")}function c(t){return a(t.data.locationHref,"locationHref",!1)}},18750:function(t,e,n){n.d(e,{r0:function(){return a},ud:function(){return s}});var i=n(6092),r=n(27261);function o(){const t=(0,i.rA)();return t.WidgetAttributes?.propertyBag?.theme||new URLSearchParams((0,r.iA)()).get("theme")}function s(){if(!window?.matchMedia)return;const t=o();if(t)return"dark"===t;const e=window.matchMedia("(prefers-color-scheme: dark)");return e?!!e.matches:void 0}function a(t){return!(!t?.useMobile||!t?.isDarkModeForMobile)}},18806:function(t,e,n){n.d(e,{E0:function(){return r},Hb:function(){return o},tK:function(){return i}});const i="https://www.msn.com/PV.xml",r={UserAction:"MS.News.Web.PageAction",PageView:"MS.News.Web.PageView",ContentView:"MS.News.Web.ContentView",AppError:"MS.News.Web.AppError",AppErrorDiag:"MS.News.Web.AppErrorDiag",LoadTime:"MS.News.Web.LoadTime",LoadTimeDiag:"MS.News.Web.LoadTimeDiag",Unload:"MS.News.Web.Unload",Base:"MS.News.Web.Base",Feedback:"MS.News.Web.Feedback",AdImpression:"MS.News.Web.AdImpression",AdFeedback:"MS.News.Web.AdFeedback",GamePlay:"MS.News.Web.GamePlay",VideoPlay:"MS.News.Web.VideoPlay",VideoAdPlay:"MS.News.Web.VideoAdPlay",AudioPlay:"MS.News.Web.AudioPlay",ServerLog:"MS.News.Web.ServerLog",AppPerfTrace:"MS.News.Web.AppPerfTrace",Auth:"MS.News.Web.Auth",HeartBeat:"MS.News.Web.HeartBeat",ClientLog:"MS.News.Web.ClientLog",PageOutOfFocus:"MS.News.Web.PageOutOfFocus",TraceInfo:"MS.News.Web.TraceInfo"},o=1e3},19045:function(t,e,n){n.d(e,{$:function(){return o}});var i=n(6092),r=n(12870);function o(){const t=r.Rb&&r.Rb.Diagnostics||{},e=r.Rb&&r.Rb.ClientSettings,{mc:n={}}=t||{},{pageGenTime:o="",geo_citycf:s="",geo_countrycf:a="",requestTrailInfo:c,detection:u}=e||{},{cdn:d=""}=c||{},l={refs:{refA:i.T3.ActivityIdLowerCaseNoHypens||"",refC:o},cookies:n,geoConfidence:{cityConfidence:s,countryConfidence:a},langMismatch:i.T3.MarketMismatchDetail,cdn:d};return JSON.stringify(l)}},19330:function(t,e,n){var i,r;n.d(e,{W:function(){return r}}),function(t){t.MobileApp="mobileapp",t.MobileWeb="mobileweb",t.DesktopWeb="desktopweb",t.DesktopApp="desktopapp"}(i||(i={})),function(t){t.Publisher="Publisher",t.Language="Language",t.Market="Market",t.PageType="PageType",t.DeviceType="DeviceType",t.ContentCategory="ContentCategory",t.ContentSubcategory="ContentSubcategory",t.ProviderId="ProviderId",t.ContentTopic="ContentTopic",t.GameTitle="GameTitle",t.GameGenre="GameGenre"}(r||(r={}))},19548:function(t,e,n){n.d(e,{Dv:function(){return g},R1:function(){return p},_3:function(){return i}});var i,r=n(16507),o=n(46277),s=n(78285),a=n(693),c=n(41667),u=n(99173),d=n(61676),l=n(7258),h=n(88294),f=n(27261);function p(t,e){try{const n=new URL(t,(0,f.IU)());return e&&e.forEach(([t,e])=>t&&null!=e&&n.searchParams.append(t,e)),n}catch(t){h.v.logError((0,l.M5)(t))}}function g(t){if(!t)return;const e=new URLSearchParams(window.location.search),n=new URL(t);if(function(){const t=window.location.href;return null!==i.getQueryParameterByName("disti",t)}()){const t=e.get("ocid");if(t){const e=new URLSearchParams(n.search);e.set("ocid",t),n.search=`?${e.toString()}`}}const r=e.getAll("item");return r&&r.length?(r.forEach(t=>{const e=n.search?"&":"?";-1===n.search.indexOf(t)&&(n.search+=`${e}item=${t}`)}),n.toString()):n.toString()}!function(t){const e=/[^A-Za-z0-9]+/g;function n(t,e=!1){if(!(0,c.A)(t))return null;return l((t||"").split("?")[1],e)}function i(t){return t=t.replace(/\+/g," "),t=decodeURIComponent(t)}function l(t,e=!1){const n=[];if(t&&t.startsWith("?")&&(t=t.substring(1)),t){const r=(t=t.split("#")[0]).split("&");for(let t=0;t<r.length;t++){const s=r[t].split("=");let a=s[0],c=s[1];e&&(a=i(a),c&&(c=i(c)));const u={key:a,value:c},d=(0,o.A)(n,t=>t.key===u.key);-1===d?n.push(u):n[d]=u}}return n}t.getParamsFromUrl=n,t.encodeURIComponentForPrime=function(t){return encodeURIComponent(t.replace(e,"-"))},t.getParams=l,t.getParamsWithItems=function(t,e=!1,n="item"){const r=[];if(t){t.startsWith("?")&&(t=t.substring(1));const o=(t=t.split("#")[0]).split("&");for(let t=0;t<o.length;t++){const s=o[t].split("=");let a=s[0],c=s[1];if(e&&(a=i(a),c&&(c=i(c))),a.toLowerCase()===n){c=c.replace("::::",";;;;");const t=c.split(":");if(2===t.length){a=t[0],c=t[1].replace(";;;;","::::");const e={key:a,value:c};-1===r.findIndex(t=>t.key===e.key)&&r.push(e)}}}}return r};const h={};function p(t){const e={},i=n(t,!0);return i&&i.length&&i.forEach(t=>e[t.key]=t.value),e}t.getQueryParameterByName=function(t,e){h[e]||(h[e]=p(e));const n=h[e][t];return void 0!==n?n:null},t.isValidUrl=function(t,e){return(0,c.A)(t)&&t.length>0&&(!e||e&&0===t.indexOf("http"))},t.keyValueArrayToQueryString=function(t){return!(0,s.A)(t)||(0,a.A)(t)?"":t.filter(t=>r.n.isKeyValuePair(t,t=>"string"==typeof t,t=>"string"==typeof t)).map(t=>t.key+"="+t.value).join("&")},t.getParamsObj=p,t.joinSubpathToURL=function(t,e){const n=t.href,i=(0,u.A)(n,"/"),r=(0,d.A)(e,"/");return new URL(`${i}/${r}`)},t.updateSearchParam=function(t,e,n){return t&&t.searchParams&&t.searchParams.get(e)&&t.searchParams.set(e,n),t},t.appendSearchParam=function(t,e,n,i){return t&&(t.searchParams||i?t.searchParams.append(e,n):t=new URL(t.href+(t.search.indexOf("?")>=0?"&":"?")+e+"="+n)),t},t.getAbsoluteUrl=function(t){return t.indexOf("://")>0||0===t.indexOf("//")?t:(0,f.IU)()+t};const g=new Set(["/","$","^","+",".","(",")","=","!","|"]);t.urlPatternToRegExp=function(t){if(0==t.indexOf("/")&&t.lastIndexOf("/")>0){const e=t.slice(1,t.lastIndexOf("/")),n=t.substring(t.lastIndexOf("/")+1)||void 0;return new RegExp(e,n)}return function(t){const e=["^"];let n;for(let i=0;i<t.length;++i){const r=t[i];if(g.has(r))e.push("\\"+r);else{if("*"===r){const n=t[i-1];let r=1;for(;"*"===t[i+1];)r++,i++;const o=t[i+1];!(r>1)||"/"!==n&&void 0!==n||"/"!==o&&void 0!==o?e.push("([^/]*)"):(e.push("((?:[^/]*(?:/|$))*)"),i++);continue}switch(r){case"?":e.push(".");break;case"{":n=!0,e.push("(");break;case"}":n=!1,e.push(")");break;case",":if(n){e.push("|");break}e.push("\\"+r);break;default:e.push(r)}}}return e.push("$"),new RegExp(e.join(""))}(t)},t.compareURLs=function(t,e){try{const n=new URL(t),i=new URL(e),r=n.searchParams,o=i.searchParams,s=[],a=[],c=[];return r.forEach((t,e)=>{o.has(e)?o.get(e)!==r.get(e)&&c.push(e):a.push(e)}),o.forEach((t,e)=>{r.has(e)||s.push(e)}),{hostMismatch:n.hostname!==i.hostname,pathMismatch:n.pathname!==i.pathname,paramsMissingLeft:s.join(","),paramsMissingRight:a.join(","),paramsDiff:c.join(",")}}catch(t){return{}}}}(i||(i={}))},19575:function(t,e,n){n.d(e,{g:function(){return o}});var i=n(28828),r=n(88294);class o{get supported(){return!!this.storage}constructor(t){this.storage=t}getItem(t){if(this.supported)return this.storage.getItem(t)}getObject(t,e){const n=this.getItem(t);if(null!=n){const t=(0,i.B)(n);if(null!=t)return t}return e}key(t){if(this.supported&&t>=0)return this.storage.key(t)}keys(){return this.supported?Object.keys(this.storage):[]}setObject(t,e){void 0!==e?this.setItem(t,JSON.stringify(e)):this.removeItem(t)}removeObject(t){const e=this.removeItem(t);if(null!=e)return(0,i.B)(e)}setItem(t,e,n=!0){if(this.supported)try{if(!e)throw"Attempted to store null/undefined value: "+e;this.storage.setItem(t,e)}catch(t){if(!n)throw t;r.v.logError(t)}else if(!n)throw new Error("WebStorage not supported")}get length(){if(this.supported)return this.storage.length}removeItem(t){if(this.supported){const e=this.getItem(t);return this.storage.removeItem(t),e}}clear(){this.supported&&this.storage.clear()}removeSubstringKeys(t){if(!this.supported||!t)return;const e=[];for(let n=0;n<this.storage.length;n++){const i=this.key(n);i&&i.includes(t)&&e.push(i)}for(let t=0;t<e.length;t++)this.removeItem(e[t])}}},19621:function(t,e,n){n.d(e,{A:function(){return y}});var i=n(28006),r=n(83542),o=n(49084),s=n(85766),a=n(59983),c=n(6092),u=n(77246),d=n(37423),l=n(24678),h=n(77479),f=n(63418);class p{reduce(t,e){if(!t){return{signedIn:this.getSignInStatus(),useEnterpriseCompliance:!1}}if(!e)return t;let n,i=!1;return i=l.n.handleAction(e,h.p.signedInStatus,e=>{n={...t,signedIn:e}}),i=i||l.n.handleAction(e,h.p.useEnterpriseCompliance,e=>{n={...t,useEnterpriseCompliance:e}}),i=i||l.n.handleAction(e,h.p.updateLocation,e=>{n={...t,location:e}}),n||t}getSignInStatus(){if((0,o.lp)()){return(0,s.eM)().isSignedIn}if(!(0,u.S)()){const{oneServiceHeaders:t}=(0,d.cn)();if(t&&Object.keys(t).length>0&&t.authorization)return 2}if((0,o.nf)())return 0;if((0,o.FS)())return(0,a.Dm)()?2:1;const t=c.T3.AuthCookieName;if(""==t)return 1;const e="app_anon"==t?"aace":"ace";return(0,f.Ri)(e)?2:1}}var g=n(44369),m=n(98216);class w extends r.i{constructor(t,e,n,i,r,o,s){super(t,e,n,i,r,o,s,!0),this.initOverrides=()=>{}}static initialize(t,e,n){let r=t.connector(i.bn);return r||(r=new w(i.bn,"",t,new p,e,void 0,n)),(0,g.F)(r),r}getSignInState(){return this.getCurrentState().signedIn}setSignInState(t){const e=this.getCurrentState().signedIn;e!==t?(h.p.signedInStatus.getActionSender(this).send(t),m.YT.addOrUpdateTmplString(`auth-stateChange-${e}-${t}`)):h.p.signedInStatusConfirmed.getActionSender(this).send()}useEnterpriseCompliance(){return this.getCurrentState().useEnterpriseCompliance}}const y=w.initialize},19993:function(t,e,n){n.d(e,{WR:function(){return L},XH:function(){return D}});var i=n(14586),r=n(85889),o=n(6092),s=n(4865),a=n(12870),c=n(67387),u=n(49084),d=n(78629),l=n(89980),h=n(48608),f=n(43889);var p=n(16507),g=n(96592),m=n(15098),w=n(486),y=n(30158),v=n(86948),b=n(8353),S=n(77246),C=n(37423),k=n(28868),T=n(64405),x=n(90454),A=n(1350),$=n(56639);function I(t){if(!(0,k.RH)())return;const e=(0,$.cE)();e?.isProd||(0,x.ZM)({appId:A.H7,type:"Debug",name:"HP_WEBVIEW_SERVER_LOG",data:{message:t}})}var P=n(98216),R=n(88206),M=n(15373),_=n(41667),E=n(5518);const F="prg-telemetry-trace";function D(t){return((0,r.vM)()||(0,r.aD)())&&(t===i.$W||t===i.Ci)}const O="traceparent";var N;!function(t){t.ANID="ANID",t.PICASSOID="PicassoID"}(N||(N={}));var L;!function(t){function e(t=null,e,n=!1,r=null,c=!1,u=(0,w.wx)(),d=!1,l=!1){const h=(0,o.rA)(),f=[{key:"apikey",value:D(e)?i.D:h.OneServiceApiKey},{key:"activityId",value:h.ActivityId},{key:"ocid",value:n?x(h.TrackInfo,e):e},{key:h.OneServiceContentMarketQspKey,value:h.CurrentMarket},{key:"it",value:(0,s.p)()}],p=(0,a.Th)().CurrentFlights;if(h.SendUserIdInHeader||!t||p?.includes("1s-r-user-qsp")||f.push({key:"user",value:t}),u&&f.push({key:w.L9,value:w.B4}),a.Rb.IsBlendedEnterprise&&f.push({key:"audienceMode",value:"enterprise"}),h.ShouldUseFdheadQsp&&!l){let t=p;if(r){t=t?`${t},${r}`:r;const e="prg-bngimg-t";-1===t.indexOf(e)&&(t+=","+e),!0===c&&(t=r)}f.push({key:"fdhead",value:t})}if(p?.includes(F)){const t=R.T.getTraceInstance(),e="00-"+t.getTraceId(!0)+"-"+t.getSpanId(!0)+"-00";f.push({key:"traceparent",value:e})}if(!d){const t=h.AuthCookieName;t&&f.push({key:"scn",value:t.toUpperCase()})}return f}async function n(t=(0,w.wx)(),e,n,i,s){const p={};let g;const m=(0,o.rA)()||{};if((0,a.Th)().CurrentFlights&&(0,a.Th)().CurrentFlights.includes("prg-tracingheader")){const t=R.T.getTraceInstance(),e=t.getTraceId(!0),n=t.getSpanId(!0);p[c.aS.traceParent]="00-"+e+"-"+n+"-00"}if("windowsShell"===m.AppType||"windowsShellV2"===m.AppType)m.IsWinAADUser&&(g=await A(),Object.assign(p,(0,u.BL)(g)));else if("winWidgets"===m.AppType||"webWidgets"==m.AppType){if((0,S.S)()&&"function"==typeof window.createWindowsWidget1SAuthHeaders){const t=await window.createWindowsWidget1SAuthHeaders();Object.assign(p,t)}}else{if(m.WidgetAttributes){g=(await(0,y.f7)()).tokenValue}if(("shopping"==m.AppType||"views"==m.AppType)&&(0,k.RH)()){if("MSA"==(await(0,v.rj)()).accountType){Object.assign(p,await(0,T.U)());for(const t in p)0===t.indexOf("X-MSEdge")&&delete p[t];return p.SiteName=`api.msn.${m.topDomain}`,I(p),p}}if(!g)if(t&&!await m.isGccModUser){const t={id:d.IW,friendlyName:d.C1},e=await((0,M.uc)()?.getAuthData(t));g=e?.authToken}else if("gaming"===n&&i&&(0,S.S)()){const t=(0,l.Lg)().getObject("xboxXTokenId");t&&t.notAfter&&new Date(t.notAfter)>new Date&&(p[c.aS.xboxToken]=JSON.stringify(t))}else if(s)g=(0,h._W)()?.access_token;else if(!e?.skipDualAuthHeader&&(0,u.FS)()&&!(0,u.lp)()){const t=(0,u.nf)()?await(0,b.a8)():(0,u.HN)();g=t?.accessToken}Object.assign(p,(0,u.LK)(g))}if((0,r.vM)()){const t=(0,f.W9)().getItem("nativeAppUserConfig"),e=JSON.parse(t)||{},n=e?.preferredIdType;Object.values(N).includes(n)&&(p["X-1S-Digital-ID"]=`preferredIdType=${n}`)}if(m.SendUserIdInHeader&&(Object.assign(p,function(){const t={},e=document.head.hasAttribute("data-client-settings")?document.head:window.document.getElementsByClassName("peregrine-widget-settings")[0],n=e&&e.getAttribute("data-client-settings"),i=n?JSON.parse(n)?.fd_muid:void 0;return i&&(t.MUID=`m-${i}`),t}()),m.WidgetAttributes&&"bingHomepage"===m.AppType)){const t=await(0,y.f7)();t?.muid&&(p.MUID=t.muid,P.YT.addOrUpdateTmplProperty("bhpmuidhdrosu","1"))}if(!(0,S.S)()){const{oneServiceHeaders:t,cookie:e,referer:n,clientData:i,userAgent:r}=(0,C.cn)();t&&Object.assign(p,t),i&&(p["X-Client-Data"]=i),e&&(p.Cookie=e),n&&(p.Referer=n),r&&(p["User-Agent"]=r)}return p}function x(t,e){return p.n.isNonNullObject(t)&&p.n.isNonNullObject(t.sitePage)&&(0,_.A)(t.sitePage.page_product)&&(0,_.A)(t.sitePage.page_type)?t.sitePage.page_product+"-"+t.sitePage.page_type+(e?"-"+e:""):e}t.serviceRequestOnComplete=async function(t,e){try{const n=await t();return e(),n}catch(t){throw e(),t}},t.getOneServiceParamsWithoutAuth=e,t.getOneServiceNonDynamicParamsWithoutAuth=function(t,e=!1,n=null){const i=(0,o.rA)(),r=[{key:"apikey",value:i.OneServiceApiKey},{key:"ocid",value:e?x(i.TrackInfo,t):t},{key:i.OneServiceContentMarketQspKey,value:i.CurrentMarket}];return!i.SendUserIdInHeader&&n&&r.push({key:"user",value:n}),(0,w.wx)()&&r.push({key:w.L9,value:w.B4}),r},t.getOneServiceParamsWithAuth=function(t=null,n,i=!1,r=null,s=!1,a=!1){return(0,o.rA)(),[...e(t,n,i,r,s,(0,w.wx)(),!1,a)]},t.getOneServiceHeaders=n,t.getOneServiceFeedCallHeaders=async function(t,e,i){const r=await n(t,null,e,i),s=(0,o.rA)(),a=s.ActivityId;return s.SendFeedCallActivityIdInHeader&&a&&(r[c.aS.activityId]=a),r},t.getLocationParams=function(t,e){const n=(0,o.rA)(),i=t||n.Latitude,r=e||n.Longitude;return i&&r?{key:"location",value:`${i}|${r}`}:null},t.getOneServiceOCID=x,t.getBaseRequestData=async function(e,n){return{headers:await t.getOneServiceHeaders((0,w.wx)(),n),method:e}},t.getCommonParams=function(t,e=!1){return(0,a.Th)().UserIsSignedIn?this.getOneServiceParamsWithAuth((0,o.rA)().UserId,t,e):this.getOneServiceParamsWithoutAuth((0,o.rA)().UserId,t,e)},t.getCommonParams2=function(t,e=!1,n=!1){return(0,v.Fo)()?this.getOneServiceParamsWithAuth((0,o.rA)().UserId,t,e,n):this.getOneServiceParamsWithoutAuth((0,o.rA)().UserId,t,e,n)},t.urlContainsOcidParam=function(t){if(!t)return!1;const e=t.split("?");if(e.length<2)return!1;const n=e[1].split("#")[0];return!!new g.m(n).get("ocid")},t.removeOcidFromUrl=function(t){if(!t)return t;const e=t.split("?");if(e.length<2)return t;const n=e[1].split("#")[0],i=new g.m(n);if(i.get("ocid")){i.delete("ocid");let e=t.replace(n,i.toString());return"?"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e}return t},t.removeOcidFromRiverCardProviderResponse=function(e){e&&e.cardMetadata&&e.cardMetadata.length&&e.cardMetadata.forEach(e=>{e.cardContent&&e.cardContent.destinationUrl?e.cardContent.destinationUrl=t.removeOcidFromUrl(e.cardContent.destinationUrl):e.subItems&&e.subItems.length&&e.subItems.forEach(e=>{e.cardContent&&e.cardContent.destinationUrl&&(e.cardContent.destinationUrl=t.removeOcidFromUrl(e.cardContent.destinationUrl))}),e.metadata&&e.metadata.relatedCards&&e.metadata.relatedCards.forEach(e=>{e.url=t.removeOcidFromUrl(e.url)})})},t.removeOcidFromWindowsOneServiceResponse=function(e){e&&e.cards&&e.cards.forEach(e=>{e.subCards.forEach(e=>{e.url?e.url=t.removeOcidFromUrl(e.url):e.subCards&&e.subCards.forEach(e=>{e.url&&(e.url=t.removeOcidFromUrl(e.url))})})})};const A=(0,m.L)(async()=>{if(!((0,S.S)()&&window&&window.ShellFeedsApp&&window.ShellFeedsApp.getQueryHeadersAsync))return;const t=await Promise.race([window.ShellFeedsApp.getQueryHeadersAsync(),(0,E.Y_)(3e3).then(()=>null)]),e=t&&t[c.aS.entAuthorization]||null;return e&&setTimeout(()=>A.cache.clear(),36e5),e});t.getUniFeatTunHeader=async function(){const t={},e=(0,o.rA)()||{};(0,S.S)()&&"edgeChromium"===e.AppType&&(t.EdgeInterestTier1Ids=(0,l.Lg)().getItem("userTopics"));const n=P.YT.getPageMetadata(),i=n?.combinedContract;return i&&(t.LoginState=i.user?.loginState,t.Product=i.page?.product,t.PageName=i.page?.name,t.PageType=i.page?.type,t.OCID=i.page?.ocid,t.ViewPortWidth=i.browser?.width,t.ViewPortHeight=i.browser?.height),function(t){let e="";return Object.keys(t).forEach(n=>{e+=`${n}:${Array.isArray(t[n])?t[n].join(","):t[n]};`}),e}(t)},t._reset=function(){A.cache.clear()},t.addTelemetryTracingQueryParam=function(t){if(a.Rb&&a.Rb.CurrentFlightSet&&a.Rb.CurrentFlightSet.has(F)){const e=R.T.getTraceInstance(),n="00-"+e.getTraceId(!0)+"-"+e.getSpanId(!0)+"-00";t.searchParams.set(O,n)}}}(L||(L={}))},20048:function(t,e,n){n.d(e,{_:function(){return i}});const i=[{name:"product-image",layout:{position:"absolute",left:0,top:0,width:"300",height:"225",zIndex:1}},n(38870).o]},20205:function(t,e,n){n.d(e,{L:function(){return pt}});var i=n(33107),r=n(88294),o=n(65022),s=n(6092),a=n(15589),c=n(12870),u=n(22360),d=n(19548),l=n(76166),h=n(17720),f=n(16091),p=n(27261),g=n(77246),m=n(67536);class w extends Error{constructor(t,e){super(t),this.isNetworkFailure=e}}var y=n(98216);const v="-start",b="-end",S="CrsConfig",C="AkCrsConfig",k="FDCrsConfig",T={},x={};let A;function $(t){if(t.endsWith(v)){t=t.slice(0,t.length-6);const e={endMeasure:A&&A.startMeasure(t).endMeasure,startTime:performance.now()};return void(T[t]=e)}if(t.endsWith(b)){if(t=t.slice(0,t.length-4),T[t]){const{endMeasure:e,startTime:n}=T[t],i=Math.round(performance.now()-n);return x[t]=i,e&&e(),{name:t,timeTaken:i}}}else;}var I=n(18258);const P="feature-manifests",R="loc-manifests",M="feature-configs",_="loc-configs",E="default";const F=new class{constructor(){this._mocksEnabled=!1,this._shouldInitializeMockMgrConfig=!1,this._mockConfigDictionary={},this._mocksEnabled=this.areMocksEnabled(),this._shouldInitializeMockMgrConfig&&(this._mockConfigDictionary["MockManager/default"]="MockManager/default")}get mockConfigDictionary(){return this._mockConfigDictionary}get mocksEnabled(){return this._mocksEnabled}initialize(t){if(!t)return void this.addMockQspToDictionary();const e=[];if(new URLSearchParams((0,p.iA)()).getAll("mock").forEach(t=>{t.trim().split(",").forEach(t=>{e.indexOf(t)<0&&e.push(t)})}),0===e.length)return;const n=t&&t.scenarios;for(const t in n)if(n[t]&&e.indexOf(t)>-1){n[t].forEach(t=>{const{experienceType:e,instanceSrc:n}=t.source.configLink,{experienceType:i,instanceSrc:r}=t.target.configRef;this._mockConfigDictionary[`${e}/${n}`]=`${i}/${r}`})}this.addMockQspToDictionary()}areMocksEnabled(){const t=new URLSearchParams((0,p.iA)());return this._shouldInitializeMockMgrConfig=!!t.get("mock"),this._shouldInitializeMockMgrConfig||t.getAll("item").some(t=>/^mock:/.test(t))}addMockQspToDictionary(){new URLSearchParams((0,p.iA)()).getAll("item").filter(t=>/^mock:/.test(t)).forEach(t=>{const[e,n]=t.split(":"),[i,r]=n.split("|");this._mockConfigDictionary[i]=r})}},D=/^\d{8}\.\d+$/;let O="";function N(t,e){if(!t)return;const{experienceType:n,instanceSrc:i,sharedNs:r}=t,o=[e,n,i];return r&&o.push(r),o.map(t=>t||"").join("/").toLowerCase()}function L(t){if(!t)return null;if(t.match("^shared/")){const[e,n,i,r]=t.split("/");return{experienceType:i,instanceSrc:r,sharedNs:n}}{const[e,n]=t.split("/");return{experienceType:e,instanceSrc:n}}}function B(t){const e=new Set;if(t&&t.properties)try{U(t.properties,e)}catch(t){}return e}function U(t,e){const n=t.configRef;n&&n.experienceType&&e.add(n);for(const n of Object.values(t))"object"==typeof n&&n&&U(n,e)}function W(t,e=!1){if(!t)return;const n=(e?E:t.instanceSrc)||E;return!t.sharedNs||e?`${t.experienceType}/${n}`:`shared/${t.sharedNs}/${t.experienceType}/${n}`}function V(t,e){t&&t(e)}function H(t,e){return function(t){return t===M||t===P}(t)?z(e&&e.feature):z(e&&e.loc)}function z(t){return t===I.t.Local}function j(t,e,n){let i=!1;const r=F.mocksEnabled&&F.mockConfigDictionary&&F.mockConfigDictionary[e];let o;r&&(e=r,i=!0),o=i?"mock":t===_?"dev/loc":"prod";return`${o}/${/^shared/.test(e)?e:`${n}/${e}`}`}var q=n(91494);function G(t,e,n){return{...t,message:e||t.message,pb:n?{...t.pb,customMessage:n}:t.pb}}var J=n(36417),Q=n(693),K=n(66600);class X{get hadNetworkError(){return this._hadNetworkError}get shouldTryFallbackResolver(){return this._shouldTryFallbackResolver}get configServiceEnabled(){return this.enableConfigService}get configServiceQueryParams(){return this.configServiceParams}get crsActivityId(){return this._crsActivityId}constructor(t){if(this.resolverEnvironment=t,this.configMap=new Map,this.enableConfigService=!0,this.skipBelowTheFold=!1,this.configPromiseMap=new Map,this._shouldTryFallbackResolver=!1,this._hadNetworkError=!1,this._shouldUseCdnFallback=!1,this._initialCrsFetch=!0,this.getCacheKeyFromConfigRef=t=>N(t,this.resolverEnvironment.appType),!(t&&t.configServiceParameters&&t.appType&&t.configServiceParameters.configServiceBaseUrl&&t.targetScope))throw this.enableConfigService=!1,new Error("ResolverEnvironment or configServiceParameters or targetScope does not exist.");t.segmentPlugins&&t.segmentPlugins.skipBelowTheFold&&(this.skipBelowTheFold=!0)}async initialize(){this.shouldUseConfigService(),await this.setConfigServiceParams()}async setConfigServiceParams(){const{appType:t,configServiceParameters:e,targetScope:n}=this.resolverEnvironment,{maxDepth:i}=e;let{buildVersion:r}=e,o=`apptype=${t}`;o+=`&v=${r}`;const s=function(t,e){try{if(t&&t.pageExperiments&&t.pageExperiments.includes("prg-crsfdheadrem")&&"weather"!==e&&"finance"!==e){const e={...t};return e.pageExperiments=[],e}}catch(t){}return t}(n,t);s.modes={audienceMode:s.audienceMode||s.modes?.audienceMode,uxMode:s.modes?.uxMode},o+="&targetScope="+JSON.stringify(s),i&&(o+=`&maxDepth=${i}`),this.skipBelowTheFold&&(o+="&skipBelowTheFold=true"),this.containsDevOnlyQueryParameters()&&(o+="&citem=dev:true&instance=Int1"),this.configServiceParams=o}sendPerfMarker(t){this.resolverEnvironment.perfMarkerCallback&&this.resolverEnvironment.perfMarkerCallback(t)}shouldUseConfigService(){const t=this.resolverEnvironment&&this.resolverEnvironment.configServiceParameters&&this.resolverEnvironment.queryParams;t&&t.enableConfigService&&(this.enableConfigService="true"===t.enableConfigService)}containsDevOnlyQueryParameters(){const t=this.resolverEnvironment.queryParams;if(!t)return!1;const e=t.item;if(e&&e.length>0)return!0;if(t.citem)return!0;return!!t.pcsonly}getConfigMap(){return this.configMap}tryGetConfigSync(t){if(t){const e=this.getCacheKeyFromConfigRef(t);return this.configMap.get(e)}}async getConfig(t){const{configServiceParameters:e,targetScope:n}=this.resolverEnvironment;if(!e||!n||!t)return Promise.reject(Error("Either of configServiceParameters, targetScope or configRef is not set correctly."));if(!this.enableConfigService)return void(this._shouldTryFallbackResolver=!0);const i=this.getCacheKeyFromConfigRef(t);if(this.configMap.has(i))return this.configMap.get(i);if(this.configPromiseMap.has(i))return this.configPromiseMap.get(i);const r=new Promise(async(e,n)=>{try{this._initialCrsFetch&&this.sendPerfMarker(`${C}${v}`),await this.getConfigTreeFromCrs(t),this._initialCrsFetch&&this.sendPerfMarker(`${C}${b}`),this._shouldTryFallbackResolver&&(this._shouldUseCdnFallback=!0,this._shouldTryFallbackResolver=!1,this._initialCrsFetch&&this.sendPerfMarker(`${k}${v}`),await this.getConfigTreeFromCrs(t),this._initialCrsFetch&&this.sendPerfMarker(`${k}${b}`),this.sendAppError(G(q.mQ,"CRS-AFD Retry",`Retryring to call CRS-AFD with ConfigRef ${this.getCacheKeyFromConfigRef(t)} because Akamai call had an error.`))),this._initialCrsFetch=!1,e(this.configMap.get(i))}catch(t){this.sendAppError(G(q.yy,`Exception in getConfig for ${i}`,t)),n(t)}finally{this.configPromiseMap.delete(i)}});return this.configPromiseMap.set(i,r),r}async getConfigTreeFromCrs(t){let e="",n="";try{let i;const r=this.getCrsTimeout(),o=performance.now(),s=new Promise(n=>{i=setTimeout(()=>{const i={...q._F,pb:{...q._F.pb,errorBehavior:J.B.Fallback,isWebWorker:this.resolverEnvironment.isThisWebWorkerThread}};return this.sendAppError(G(i,"CRS fetch timeout",`ConfigRef: ${this.getCacheKeyFromConfigRef(t)}. CrsUrl: ${e||""}, timeElapsed: ${performance.now()-o}`)),n(null)},r)});e=this.generateCrsUrl(t);let a=this.tryGetConfigFromEarlyCrsPromise(t,e);a?n="Prefetch ":a=this.downloadFromCrs(e,r);const c=a.then(t=>(i&&clearTimeout(i),t)),u=await Promise.race([c,s]),d=u&&u.configs;if(!d||(0,Q.A)(d))return void(this._shouldTryFallbackResolver=!0);this._shouldTryFallbackResolver=!1,this.updateCacheUsingConfigs(d)}catch(i){this._shouldTryFallbackResolver=!0,this.sendAppError(G(q.ZM,`${n}CRS fetch network error`,`ConfigRef: ${this.getCacheKeyFromConfigRef(t)}. CrsFetchNetworkError: ${this._hadNetworkError}. Error: ${i}. CrsUrl: ${e||""}`))}}updateCacheUsingConfigs(t){for(const e in t){const n=t[e];if(n&&n.properties){const t=this.getCacheKeyFromConfigRef(L(e));this.configMap.set(t,n)}}}setDownloadFromCrsBeforeNetwork(t){this.downloadFromCrsBeforeNetwork=t}async downloadFromCrs(t,e){if(this.downloadFromCrsBeforeNetwork){const e=await this.downloadFromCrsBeforeNetwork(t);if(e)return e}const{abortableFetchCallback:n,hostHeaderOverride:i}=this.resolverEnvironment,r="afdprotocol",o=h.vv.get(r);if(o){const e=new URL(t);e.searchParams.append(r,o),t=e.toString()}const s=!(0,g.S)()&&i?{headers:{host:i}}:void 0;return(n?n(t,e,s):fetch(t)).then(e=>this.processCrsResponse(t,e)).catch(t=>this.handleCrsDownloadError(t))}handleCrsDownloadError(t){throw this._shouldTryFallbackResolver=!1,this._hadNetworkError=!0,t}processCrsResponse(t,e,n=!1){if(this._crsActivityId=function(t){try{if(t&&"string"==typeof t){const e=t.indexOf("|");return t.substring(0,e)}}catch(t){}return""}(e.headers.get("x-ceto-ref")||"")||function(t){try{if(t&&"string"==typeof t)return t.match(/Ref A: [A-Z0-9]+/)[0].substring(7)}catch(t){}return""}(e.headers.get("x-msedge-ref")||"")||"empty",e.ok)return e.json();const{isThisWebWorkerThread:i}=this.resolverEnvironment,r=e.headers.get("X-Crs-BuildVersion")||"",o=e.headers.get("X-Crs-Env")||"",s=e.headers.get("X-Crs-Ref")||"",a=e.headers.get("Akamai-Cache-Status")||"",c=e.headers.get("Eo-Cache-Status")||"",u=e.headers.get("x-msedge-ref")||"",d=`Url: ${t}, CRS Version: ${r}, CRS Env: ${o}, CRS Ref: ${s}, Akamai Cache: ${a}, EO Cache: ${c}`,l={...q.BQ,pb:{...q.BQ.pb,userImpacting:!0,errorBehavior:J.B.Fallback,isWebWorker:i,isEarlyFetch:n,fetchNetworkResponse:{activityId:u,statusCode:e.status}}};return this.sendAppError(G(l,"CRS returned non-200 response",d)),Promise.resolve()}generateCrsUrl(t){const e=t.sharedNs?`&sharedNs=${t.sharedNs}`:"",n=`?${`expType=${t.experienceType}&expInstance=${t.instanceSrc}${e}`}&${this.configServiceParams}`;return(this._shouldUseCdnFallback?new URL(n,this.resolverEnvironment.crsRetryBaseUrl):new URL(n,this.resolverEnvironment.configServiceParameters.configServiceBaseUrl)).toString()}sendAppError(t){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(t)}getCrsTimeout(){return(0,g.S)()||this.resolverEnvironment&&this.resolverEnvironment.isThisWebWorkerThread?1e4:3e3}tryGetConfigFromEarlyCrsPromise(t,e){if(!(0,g.S)())return null;const{crsPromise:n,crsRequestData:i}=window,r=i?.url;return n&&r&&(0,K.A)(t,{experienceType:"AppConfig",instanceSrc:"default"})?(setTimeout(()=>{const t=new URL(r).search,n=new URL(e).search;n.indexOf(t)<0&&this.sendAppError(G(q.aO,"Early CRS URL is different",[t,n].toString()))},8e3),delete window.crsPromise,delete window.crsRequestData,n.then(t=>this.processCrsResponse(r,t,!0)).catch(t=>this.handleCrsDownloadError(t))):null}}var Y=n(18284);let Z=async(t,e,n,i)=>{if(!t)throw new Error("BlobFetcher.ts: Fetch Error: Relative Url is null or undefined.");const r=H(e,n)?"https://localhost.msn.com:9000/"+t:O+t.toLowerCase(),o=void 0,s=i?i(r,1e4,o):fetch(r);let a;return a=i?s.then(t=>{if(t.ok)return t.json();return i(r,1e4,o).then(t=>{if(t.ok)return t.json();throw new Error(`Non-200 response, failed to fetch 2nd time, Status: ${t.status}, StatusText: ${t.statusText}, fetch url: ${r}`)})}).catch(t=>{throw new Error(`BlobFetcher.ts: Fetch Error: fetch url: ${r}, error: ${t}.`)}):s.then(t=>{if(t.ok)return t.json();throw new Error(`Non-200 response, Status: ${t.status}, StatusText: ${t.statusText}, fetch url: ${r}`)}).catch(t=>{throw new Error(`BlobFetcher.ts: Fetch Error: fetch url: ${r}, error: ${t}.`)}),a},tt=(0,g.S)()?(0,Y.A)(Z):Z;class et{constructor(t,e,n){this.failedConfigIndexFetches=[],this.appType=t,this.configOrigins=e,(0,g.S)()&&(this.fetchAndParseConfigIndex=(0,Y.A)(this.fetchAndParseConfigIndex,(...t)=>t.join("/"))),this.resolverEnvironment=n}async fetchAndParseConfigIndex(t,e,n){const i=H(t,this.configOrigins);if(!n&&!i)return;const r=i?`${j(t,e,this.appType)}/index.json`:`${t}/${e}/index.json/${n}`;try{const e=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback;return await tt(r,t,this.configOrigins,e)}catch(t){i||this.failedConfigIndexFetches.push(t)}}getFailedConfigIndexFetches(){return this.failedConfigIndexFetches}}class nt{constructor(t,e,n){this.failedConfigFetches=[],this.appType=t,this.configOrigins=e,(0,g.S)()&&(this.fetchAndParseConfig=(0,Y.A)(this.fetchAndParseConfig,(...t)=>t.join("/"))),this.resolverEnvironment=n}async fetchAndParseConfig(t,e,n,i){const r=H(t,this.configOrigins);if(!i&&!r)return;const o=r?`${j(t,e,this.appType)}/${n}`:`${t}/${e}/${n}/${i}`;try{const e=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback;return await tt(o,t,this.configOrigins,e)}catch(t){r||this.failedConfigFetches.push(t)}}getFailedConfigFetches(){return this.failedConfigFetches}}class it{constructor(t,e,n){this.manifestsMap=new Map,this.appType=t,this.configOrigins=e,this.resolverEnvironment=n}async fetchAndParseManifest(t,e){if(H(t,this.configOrigins))return;const n=`${t}/${this.appType}/${e}.json`;if(!this.manifestsMap.has(t))try{const e=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback,i=await tt(n,void 0,void 0,e);if(this.manifestsMap.set(t,i),(0,Q.A)(i))throw new Error(`Manifest response is ok but empty or undefined, relative url: ${n}`)}catch(e){throw this.manifestsMap.set(t,null),new Error(`ManifestService.ts: ${e}`)}return this.manifestsMap.get(t)}getConfigIndexHashedFileName(t,e){if(H(e,this.configOrigins))return;const n=`${t}/index.json`;return this.getFromManifest(n,e)}getConfigHashedFileName(t,e,n){if(H(n,this.configOrigins))return;const i=`${t}/${e}`;return this.getFromManifest(i,n)}getFromManifest(t,e){if(!this.manifestsMap||!this.manifestsMap.get(e))return;const n=this.manifestsMap.get(e);if(n&&n.fileHashes)return n.fileHashes[t.toLowerCase()];throw new Error(`ManifestService.ts: Manifest is defined but does not have fileHashes: ${t}: cacheKey snippet of manifest: ${JSON.stringify(n).substr(0,100)}`)}}var rt=n(69144),ot=n(78285);function st(t,e){if((0,ot.A)(t))return e}var at=n(51673);class ct{constructor(t){if(!(t&&t.configServiceParameters&&t.appType&&t.configServiceParameters.configServiceBaseUrl&&t.targetScope))throw new Error("SingleConfigResolver.ts: ResolverEnvironment or configServiceParameters or targetScope does not exist.");this.appType=t.appType,this.targetScope=t.targetScope,this.buildVersion=t.configServiceParameters.buildVersion,this.configOrigins=t.configOrigins,this.manifestService=new it(this.appType,this.configOrigins,t),this.configIndexService=new et(this.appType,this.configOrigins,t),this.configService=new nt(this.appType,this.configOrigins,t)}async resolveConfigAsync(t){const e=W(t),n=W(t,!0);this.buildNumber=this.tryGetBuildNumber()||await async function(t,e){let n;const i=new URLSearchParams((0,p.iA)()).getAll("item"),r=i?i.find(t=>t&&0===t.indexOf("spalink:")):void 0;r&&(n=r.replace("spalink:","").replace("/debug",""));const o=n||t;if(!o||!e||"latest"!==o&&"rolling"!==o&&!D.test(o))throw new Error(`Arguments are incorrect. Check buildVersion: ${o} appType: ${e}`);const s=`https://assets.msn.com/bundles/v1/${e}/${o}/v?${(new Date).getTime()}`;let a;try{if(a=await fetch(s),!a||!a.ok)throw new Error(`Response not OK, Status: ${a.status}, StatusText: ${a.statusText}`);return(await a.text()).trim()}catch(t){throw new Error(`getBuildNumberAsync Fetch Url: ${s}, ${t}`)}}(this.buildVersion,this.appType);const i=this.manifestService.fetchAndParseManifest(P,this.buildNumber),r=this.manifestService.fetchAndParseManifest(R,this.buildNumber);await Promise.all([i,r]);const o=this.manifestService.getConfigIndexHashedFileName(e,P),s=this.manifestService.getConfigIndexHashedFileName(n,R),a=this.configIndexService.fetchAndParseConfigIndex(M,e,o),c=this.configIndexService.fetchAndParseConfigIndex(_,n,s),u=await Promise.all([a,c]).then(t=>({featureIndex:t[0],localizationIndex:t[1]})),d=u.featureIndex&&u.featureIndex.configs||void 0,l=u.localizationIndex&&u.localizationIndex.configs||void 0,h=[];if(this.fetchMathingConfigs(h,d,P,M,e),this.fetchMathingConfigs(h,l,R,_,n),this.fetchMathingConfigs(h,l,R,_,n,!0),0==h.length)return;return function(t){if(!t||t.length<1)return null;const e=t[0];for(let n=1;n<t.length;n++)e.properties=(0,rt.A)(e.properties,t[n].properties,st);return e}((await Promise.all(h).then(t=>t)).filter(t=>null!=t))}fetchMathingConfigs(t,e,n,i,r,o=!1){e&&0!=e.length&&e.forEach(e=>{if((0,at.oH)(e.targetScope,this.targetScope,o)){const o=e.src,s=this.manifestService.getConfigHashedFileName(r,o,n);t.push(this.configService.fetchAndParseConfig(i,r,o,s))}})}getFailedFetches(){const t=[],e=this.configService.getFailedConfigFetches();e.length>0&&t.push(...e);const n=this.configIndexService.getFailedConfigIndexFetches();return n.length>0&&t.push(...n),t}get buildNumber(){return this._buildNumber}set buildNumber(t){this._buildNumber=t}tryGetBuildNumber(){return this.buildNumber?this.buildNumber:this.configOrigins.feature===I.t.Local&&this.configOrigins.loc===I.t.Production?null:this.buildVersion}}class ut{constructor(t){if(this.mergedConfigMap=new Map,this.mockManagerInitialized=!1,!(t&&t.configServiceParameters&&t.appType&&t.configServiceParameters.configServiceBaseUrl&&t.targetScope))throw new Error("Resolver.ts: ResolverEnvironment or configServiceParameters or targetScope does not exist.");this.resolverEnvironment=t,this.appType=t.appType,this.singleConfigResolver=new ct(t)}async getConfig(t,e=!1){const n=N(t,this.appType),{mockManager:i}=this.resolverEnvironment;if(i.mocksEnabled&&!this.mockManagerInitialized){this.mockManagerInitialized=!0;const t={scenarios:(await this.getConfig({experienceType:"MockManager",instanceSrc:"default"})).properties.scenarios};i.initialize(t)}if(!this.mergedConfigMap.has(n)){await this.getConfigRecursive(t,e);const n=this.singleConfigResolver.getFailedFetches();n.length>0&&n.forEach(t=>{V(this.resolverEnvironment.appErrorCallback,{...q.EV,message:"Fetch failed for a config",pb:{...q.EV.pb,customMessage:`Failed fetch url: ${t}`}})})}return this.mergedConfigMap.get(n)}getConfigMap(){return this.mergedConfigMap}async getConfigRecursive(t,e=!1){const n=N(t,this.appType);if(n&&!this.mergedConfigMap.has(n))try{const i=await this.singleConfigResolver.resolveConfigAsync(t);if(this.mergedConfigMap.set(n,i),e){const t=B(i);if(0==t.size)return;const n=[];t.forEach(t=>{n.push(this.getConfigRecursive(t,e))}),await Promise.all(n)}}catch(t){V(this.resolverEnvironment.appErrorCallback,{...q.Co,message:"Exception in getConfig.",pb:{...q.Co.pb,customMessage:`CacheKey: ${n} / Error: ${t}`}})}}}class dt{constructor(t){if(this.resolverEnvironment=t,this.fallbackResolverCalled=!1,this.crsInitComplete=!1,this.configResolverMap=new Map,this.configResolverMapSet=!1,!t||!t.targetScope)throw new Error("ResolverEnvironment or targetScope does not exist.");var e;this.configService=new X(t),e=t.configStaticFallbackBaseUrl,O=e,this.fallbackResolver=new ut(t)}get crsHadNetworkError(){return this.configService.hadNetworkError}get crsActivityId(){return this.configService.crsActivityId}tryGetConfigSync(t){if(t)return this.configService.tryGetConfigSync(t)||this.tryToGetFromInMemory(t)}async getConfig(t){if(this.resolverEnvironment.configOrigins.feature===I.t.Local||this.resolverEnvironment.mockManager.mocksEnabled){const e="function"==typeof this.resolverEnvironment.loggerCallback;try{const n=await this.fallbackResolver.getConfig(t);return n?Promise.resolve(n):(e&&this.resolverEnvironment.loggerCallback(`ConfigResolver: Failed to fetch configs from local configs. Config: ${N(t)}`),Promise.resolve(null))}catch(t){return e&&this.resolverEnvironment.loggerCallback(`${t.message}`),Promise.reject(t)}}if(!this.configResolverMapSet&&t?.properties){const e=t.properties;e&&e.configs&&(this.setConfigResolverMap(e.configs),this.configResolverMapSet=!0)}const e=this.configResolverMapSet&&t?this.tryToGetFromInMemory(t):null;if(e)return e;this.crsInitComplete||(this.sendPerfMarker(`${S}${v}`),await this.initiateConfigService(),this.crsInitComplete=!0,this.sendPerfMarker(`${S}${b}`)),this.configResolverMapSet&&this.crsInitComplete&&this.sendAppError(G(q.P9,"Fallback to network call",`Config Ref ${this.getCacheKeyFromConfigRef(t)} not found in prefetched configs. Network Fallback`));const n=t?this.configService.tryGetConfigSync(t):null;return n||new Promise(async e=>{if(this.configService.shouldTryFallbackResolver){this.fallbackResolverCalled=!0;const n=await this.fallbackResolver.getConfig(t);if(n)return e(n)}else{const n=await this.configService.getConfig(t);if(n)return e(n)}return e(null)})}getConfigServiceObject(){return this.configService}async initiateConfigService(){await this.configService.initialize(),await this.configService.getConfig({experienceType:"AppConfig",instanceSrc:"default"})}sendPerfMarker(t){this.resolverEnvironment.perfMarkerCallback&&this.resolverEnvironment.perfMarkerCallback(t)}setConfigResolverMap(t){for(const e in t){const n=t[e];if(n&&n.properties){const t=this.getCacheKeyFromConfigRef(L(e));this.configResolverMap.set(t,n)}}}tryToGetFromInMemory(t){const e=this.getCacheKeyFromConfigRef(t);return this.configResolverMap.get(e)}getCacheKeyFromConfigRef(t){return N(t,this.resolverEnvironment.appType)}sendAppError(t){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(t)}}const lt="__ResolverInstance__";class ht{constructor(){this.currentTargetScope=s.T3.CurrentRequestTargetScope,this.env=s.T3.Environment||a.O.prod,this.localOverrideMap={},this.isInitialized=!1,this.initializeCaching()}static getInstance(){return h.vv.get(lt,()=>new ht)}static resetResolverInstance(){const t=new ht;h.vv.set(lt,t),ft=(0,f.G)(ht)}getConfigResolver(){return this.configResolver}initializeCaching(){this.setTargetScopeAndConfigServiceParams()}setTargetScopeAndConfigServiceParams(){const{AppType:t,CurrentRequestTargetScope:e,WidgetAttributes:n}=s.T3;this.currentTargetScope=this.currentTargetScopeOverride||e;let i=[];const r=c.Rb.AppFlights;if(Array.isArray(r))i=r;else{const e=n&&n.clientPerf&&n.clientPerf.shouldUsePWOnlyFlights||"distribution"===t,r=this.currentTargetScope?.pageExperiments,o=(0,m.wV)(r,e,t);i=(0,m.Dl)(r,o)}this.scopeWithPeregrineFlights={...this.currentTargetScope,domain:n&&(0,p.VQ)()||this.currentTargetScope&&this.currentTargetScope.domain,pageExperiments:i}}initialize(t,e){if(this.isInitialized)return;var n;if(this.perfTimeline=(0,i.S9)("Resolver","Resolver",!0),n=this.perfTimeline,A=n,!s.T3.IsGitConfigs)return;const o={buildVersion:s.T3.BuildVersion,configServiceBaseUrl:s.T3.ConfigServiceBaseUrl.toString()},a=s.T3.CrsRetryBaseUrl,{pageExperiments:c}=this.currentTargetScope,u={appType:s.T3.AppType,configServiceParameters:o,targetScope:this.scopeWithPeregrineFlights,env:s.T3.Environment.toString(),featureFlags:s.T3.FeatureFlags,isThisWebWorkerThread:!1,isWebWorkerPresent:this.useWebWorkerToCache,queryParams:d._3.getParamsObj((0,p.iA)()),appErrorCallback:t,perfMarkerCallback:$,loggerCallback:r.v.log.bind(r.v),logObjectsCallback:r.v.logObjects.bind(r.v),isDebug:r.v.isDebug(),configCacheProperties:undefined,configOrigins:s.T3.ConfigOrigins,segmentPlugins:e,mockManager:F,crsRetryBaseUrl:a,disableInMemoryCache:s.T3.DisableInMemoryCache,useCachedApp:s.T3.UseCachedApp,crsDisableServerCache:s.T3.CrsDisableServerCache,abortableFetchCallback:c&&(c.includes("useabortfetch")||c.includes("prg-1sw-abtfetch"))||!(0,g.S)()?l.hv:void 0,hostHeaderOverride:s.T3.HostHeaderOverride,configStaticFallbackBaseUrl:s.T3.ConfigStaticFallbackBaseUrl};this.configResolver=new dt(u),this.isInitialized=!0}overrideCurrentRequestTargetScope(t){this.currentTargetScopeOverride=t,this.currentTargetScopeOverride&&(this.currentTargetScope=this.currentTargetScopeOverride)}overrideCurrentRequestEnvironment(t){this.env=t||a.O.prod}overrideConfig(t,e,n){if(this.env!==a.O.prod){const i="string"==typeof t?t:(0,u.Dw)(t);this.localOverrideMap[i]={experienceType:e,properties:n,typeVersion:"1.0.0",_name:"index"}}}async getRootConfig(){const t=await this.getEntryPointConfigRef();return await this.getConfig(t.configRef)}async getEntryPointConfigRef(){return(await this.getConfig({experienceType:"AppConfig",instanceSrc:"default"})).properties.rootExperience}getConfigSync(t){if(!t||!this.currentTargetScope||!s.T3.IsGitConfigs)return;const e=(0,u.Dw)(t),n=e&&this.localOverrideMap[e];if(n)return n;const i=this.configResolver&&this.configResolver.tryGetConfigSync(t);return i?{experienceType:t.experienceType,properties:i.properties||{},typeVersion:"Git",_name:e}:void 0}async getConfig(t){if(!this.currentTargetScope)return Promise.reject(new Error(`getConfig: Invalid target scope when fetching config ${JSON.stringify(t)}`));if(s.T3.IsGitConfigs){if("string"==typeof t){const e="Invalid config Id for Git configs flight";return this.resolverErrors.push({...o.cDn,message:e,pb:{...o.cDn.pb,userImpacting:!0,customMessage:t}}),Promise.reject(new Error(`${e}: ${t}`))}if(!this.configResolver){const e="Invalid configResolver object for Git configs flight";return this.resolverErrors.push({...o.dyB,message:e,pb:{...o.dyB.pb,userImpacting:!0,customMessage:JSON.stringify(t)}}),Promise.reject(new Error(`${e}: ${JSON.stringify(t)}`))}const e=(0,u.Dw)(t),n=this.localOverrideMap[e];if(n)return n;const i=this.perfTimeline&&this.perfTimeline.startMeasure("config",e).endMeasure;let r,s;try{s=this.configResolver.tryGetConfigSync(t);let e=s;if(!e){e=await this.configResolver.getConfig(t);const n=this.configResolver.crsActivityId;n&&y.YT.addOrUpdateCustomProperty("crsActivityId",n)}return e?r={experienceType:t.experienceType,properties:e.properties||{},typeVersion:"Git",_name:(0,u.Dw)(t)}:Promise.reject(new w(`Could not fetch Git config id ${JSON.stringify(t)}`,this.configResolver.crsHadNetworkError))}finally{if(i){i({customSuffix:`${e}-${(s?"memory":r&&"network")||"error"}`})}}}}useConfigService(){const t=(0,p.iA)();if(t){const e=d._3.getQueryParameterByName("enableConfigService",t);if(e)return"true"===e.toLocaleLowerCase()}return s.T3.EnableConfigService}getConfigRetrievalMaxDepth(){const t=d._3.getQueryParameterByName("maxDepth",(0,p.$N)());return t||(s.T3.FeatureFlags&&s.T3.FeatureFlags.crsMaxDepth?s.T3.FeatureFlags.crsMaxDepth:"10")}containsDevOnlyQueryParameters(){const t=(0,p.iA)(),e=d._3.getQueryParameterByName("item",t);if(e&&e.length>0)return!0;const n=d._3.getQueryParameterByName("pcsonly",t);return!!(n&&n.length>0)}getConfigTimings(t={},e=!1){if(s.T3.IsGitConfigs)return void Object.assign(t,x);if(!this.configTimings)return;let n=0,i=0;for(const r of this.configTimings){const o=r.experienceType.toLowerCase(),a=r.cacheFetchDuration,c=r.networkFetchDuration;("entrypoint"===o||"river"===o||"contentpreview"===o||s.T3.IsDebug||e)&&(void 0!==c&&(t["ConfigFetch."+o]=Math.round(c)),void 0!==a&&(t["ConfigCache."+o]=Math.round(a))),void 0!==a&&(n+=a),void 0!==c&&(i+=c)}n&&(t["ConfigCache.All"]=Math.round(n)),i&&(t["ConfigFetch.All"]=Math.round(i))}}let ft=(0,f.G)(ht);const pt={getRootConfig:()=>ft.getRootConfig(),getEntryPointConfigRef:()=>ft.getEntryPointConfigRef(),getConfig:t=>ft.getConfig(t),getConfigSync:t=>ft.getConfigSync(t),getConfigTimings:(t={},e=!1)=>ft.getConfigTimings(t,e),getInstance:()=>ft,setTargetScopeAndConfigServiceParams:()=>ft.setTargetScopeAndConfigServiceParams(),initialize:(t,e)=>ft.initialize(t,e),overrideConfig:(t,e,n)=>ft.overrideConfig(t,e,n),overrideCurrentRequestTargetScope:t=>ft.overrideCurrentRequestTargetScope(t),overrideCurrentRequestEnvironment:t=>ft.overrideCurrentRequestEnvironment(t),initializeCaching:()=>ft.initializeCaching()}},20292:function(t,e,n){n.d(e,{_F:function(){return g},aW:function(){return p},yS:function(){return l}});var i=n(65431),r=n(65022),o=n(93468),s=n(6092),a=n(12870),c=n(5044);const u=16,d="cs-infopane-card, cs-infopane-card-28, cs-infopane-card-immersive, cs-responsive-infopane";function l(t,e,n,a){t?.indices?.length&&(t.placementLevelSignals=t.indices.map((c,u)=>{const l=t.placementLevelSignals?.[u]||{},g=function(t,e,n,a,c,u){if(!t?.region)return{};let l=`nativead-${t.region}-${e}`;const g=t.region?.includes("infopane"),m=t.region?.includes("sliver"),w=t.region?.includes("rectangle"),y=document?.querySelector("entry-point")?.shadowRoot?.querySelector?.("waterfall-view-feed")||c;let v;if(g)l="infopane";else if(m){if(l=`sliver-${e}`,y&&c)try{v=y.getBoundingClientRect().top>c.getBoundingClientRect().bottom}catch(t){v=void 0}}else w&&(l=`rectangle${e}`);const b=function(t,e){if(!t)return;const n=e?.adTemplateConfig?.cardSizeConfig;if(n&&n[t])return n[t];return t.includes("infopane")?n?.infopane||i.Hv.infopane:t.includes("riverdb")?n?.riverdb||i.Hv.riverdb:t.includes("river")?n?.river||i.Hv.river:i.Hv[t]||void 0}(t.region,n),S=p(t.region,v);let C=n?.passAdOcidRegSize?{pageRegion:S,cardSize:b}:{};n?.passBrandSafetySignals&&!a?.length&&function(t,e,n,i,r,o){let s,a=[];if(e){const{layout:t,masterLayoutCardList:e,masterCardMapWpoItems:n,river:o}=r?.feedManager||{};if(i)a.push(...h(e,n,t,0));else{let i;if(o?.forEach(t=>{const e=t?.cardMetadataList?.[0];"display-ad-banner"===e?.id&&"number"==typeof e?.order&&(i=e.order-1)}),"number"==typeof i&&i>=0){const r=h(e,n,t,i-1),o=h(e,n,t,i);a.push(...r,...o),o?.length||(s=!0)}}}else if(n){const t=r?.feedManager?.waterfall?.flatMap(t=>t.columns[0])?.find(t=>t.instanceId===o);a=t?.adjacentCardIds}a?.length&&(t.adjacentCardIds=a);s&&(t.isPartialBrandSafety=s)}(C,m,w,v,y,l);if(!u&&(n?.enableAddingAdCoords||n?.passAdOcidRegSize)){const i=function(t,e,n,i,r,o,s,a,c){const u=i?.shadowRoot?.querySelectorAll("cs-super-container");let l,h=null;if(u&&u.length>0){if("DESKTOP-FEED-VIEWS"===i?.tagName){if(o){let t=u[0];for(let e=0;e<4&&t;e++){const e=t.shadowRoot;if(!e?.children?.length)break;const n=e.children[0];if(!n)break;const i=n.shadowRoot?.querySelector?.(d);if(i){h=i;break}t=n}}}else for(const t of u){const i=t?.shadowRoot?.querySelector("cs-responsive-feed-layout")?.shadowRoot;if(i&&(o?h=i.querySelector(d):s?({adElement:h,left:l}=f(r,c,n,e)):h=a?r:i?.querySelector(`[id*="${c}"]`),h))break}}else a||"inarticle"===t||"interstitialgallery"===t?h=r:s&&({adElement:h,left:l}=f(r,c,n,e));const p=h?.getBoundingClientRect();if(!p)return;return{top:p.top,left:l??p.left,width:p.width,height:p.height}}(t.region,b,e,y,c,g,m,w,l);if(i)return n?.enableAddingAdCoords&&(C.coords={x:i.left,y:i.top}),n?.passAdOcidRegSize&&i.width&&i.height&&(C.cardSize={w:i.width,h:i.height}),C;t.region.includes("river")&&"views"===s.T3.AppType||(0,o.vV)(r.$2y,"Placement level signal fell back to cached coordinates",`{"cardId": "${l}", "placement": ${JSON.stringify(t)}}`,void 0,void 0,20)}if(n?.enableAddingAdCoords&&u){const t=u(l);t&&(C={...C,...t})}return C}(t,c,e,l.adjacentCardIds,n,a);return{...l,...g}}))}function h(t,e,n,i){const r=[];return!t||!e||!n||"number"!=typeof i||i<0||t?.river?.[n]?.filter(t=>void 0!==t?.cards?.[i]?.wpoId).forEach(t=>{const n=t.cards[i].wpoId,o=e?.get("river_wfcard"+n),s=o?.subItems||o?.subCards;if(s?.length){let t=0;for(const e of s)if(e?.id&&(r.push(e.id),t++),3===t)break}else o?.id&&r.push(o.id)}),r}function f(t,e,n,i){let r,o=t?.shadowRoot?.querySelector(`[id*="${e}"]`);if(!o&&t&&i?.w){try{const e=t.getBoundingClientRect();if(e){const t=2*i.w+u;r=1===n?e.left-t/2:e.left+u/2}}catch(t){r=void 0}o=t}return{adElement:o,left:r}}function p(t,e){if(t)return t.includes("infopane")?"views"===s.T3.AppType?"consumption-infopane":"infopane":t.includes("river")?"views"===s.T3.AppType?"consumption-river":"river":t.includes("rectangle")?"views"===s.T3.AppType?"rightrail":"river":t.includes("sliver")?"views"===s.T3.AppType||e?"topbanner":"sliver":t.includes("inarticle")?"intra-article":t.includes("interstitialgallery")?"intra-gallery":t}function g(t,e,n){t&&(t.auctionLevelSignals={...t.auctionLevelSignals,isPrerender:!!a.Rb?.IsPrerender,isSSR:!1,vpSize:window&&{w:window.innerWidth,h:window.innerHeight},ocid:e?.passAdOcidRegSize?(0,c.En)():void 0},e?.passCohortSignalsAds&&n&&(t.auctionLevelSignals.userSignals=n))}},20431:function(t,e,n){n.d(e,{dX:function(){return _},wR:function(){return $},Is:function(){return M},Cp:function(){return A},hz:function(){return R},$y:function(){return I},k$:function(){return P}});var i=n(77216),r=n(33107),o=n(53788),s=n(98763),a=n(77246),c=n(16418),u=n(41862),d=n(30817),l=n(12986);const h=(0,s.pV)(()=>new u.G);h.unset();const f="-start",p="-end";class g{constructor(t,e,n,i,r){var o;this.timelineName=t,this.instanceId=e,this.addPerfMarks=n,this.addPageTimings=i,this.async=r,this.measures=new y,this.timeRange=[1/0,-1/0],this.timelineName=(o=t,h.get().qualifyKey(o))}get timeSpan(){const[t,e]=this.timeRange;if(t!==1/0&&e!==-1/0)return[t,e-t]}startMeasure(t,e,n){const{async:i,startTime:r}=n||{},o=b(r);if(null==o)return{endMeasure:l.A};const{timeRange:s}=this;o<s[0]&&(s[0]=o);const a=w(t,e),c=this.measures.add({coreName:a,from:o,async:null!=i?i:this.async,idSuffix:""},n);return{endMeasure:n=>{const{customSuffix:i,customData:r,endTime:a}=n||{},u=b(a);if(null==u||u<o)return;if(i&&e!==i){const e=w(t,i);this.measures.rename(c,e)}c.to=u,c.customData=r,u>s[1]&&(s[1]=u);!function(t,e,n,i){if(!n&&!i)return;const{from:r,to:o}=e;if(null!=r){const e=t+f,s=(0,d.ZF)();if(n&&(s[e]=r),i&&performance.mark(e,{startTime:r}),null!=o&&(n&&(s[t]=o-r),i)){const n=t+p;performance.mark(n,{startTime:o}),performance.measure(t,e,n)}}}(v(this.timelineName,c),c,this.addPageTimings,this.addPerfMarks)}}}rename(t){if(this.timelineName!==t){if(this.addPageTimings){const e=this.timelineName,n=(0,d.ZF)();this.measures.get().forEach(i=>{const r=v(e,i);delete n[r+f],delete n[r];const o=v(t,i);n[o+f]=i.from,n[o]=i.to-i.from})}this.timelineName=t}}getPageMeasures(){return this.measures.get().map(t=>({...t,timelineName:this.timelineName}))}getMeasureValues(t){return this.measures.get(t)}instrumentFunc(t,e,n){return(...i)=>{const r=this.startMeasure(t).endMeasure;try{const t=e.apply(n,i);return t instanceof Promise?m(t,r):r(),t}catch(t){r({customSuffix:"error"})}}}instrumentPromise(t,e,n){const i=this.startMeasure(t,null,n).endMeasure;return m(e(),i)}}function m(t,e){return t.then(()=>e()).catch(()=>e({customSuffix:"error"})),t}function w(t,e){return e?`${t}-${e}`:t}class y{constructor(){this.list=[],this.entList=[],this.map=new Map}add(t,e){return e&&e.entityMeasure?this.entList.push(t):this.list.push(t),this.addToMap(t)}addToMap(t){const e=t.coreName;let n=this.map.get(e);return!n&&this.map.set(e,n=[]),t.idSuffix=(0,u.J)(n.length),n.push(t),t}get(t){const{coreName:e,entityMeasures:n}=t||{};let i;return i=e?this.map.get(e)||[]:n?this.entList:!1===n?this.list:[...this.list,...this.entList],i}rename(t,e){const n=t.coreName;if(n==e)return;const i=this.map.get(n),r=i.indexOf(t);if(r>=0){i.splice(r,1);for(let t=r,e=i.length;t<e;t++)i[t].idSuffix=(0,u.J)(t);t.coreName=e,this.addToMap(t)}}}function v(t,e){return`${t}-${e.coreName}${e.idSuffix}`}function b(t){return null==t?(0,d.gU)():"number"==typeof t&&t>=0?t:void 0}var S=n(88294),C=n(50369),k=n(73691);const T=(0,s.Xe)(),x=(0,s.pV)(()=>({}));function A(t,e){(0,r.ST)(e),function(t){Object.assign(x.get(),T.set((0,i.x)(t)))}(t)}function $(){return x.get()}function I(t){const e=x.get();e.enablePerfTimeline=t,e.trackAllExp=t,e.enableEntityMetricsTimeline=t,e.traceLevel=i.X.default,!(0,a.S)()&&(0,k.As)(t)}const P=(t,e,n)=>function(t){const e=x.get();if(!e.enablePerfTimeline)return!1;const{experiencesForPerf:n}=e;if(n&&n[t])return!0;const{experiencesExcludedForPerf:i}=e;if(i&&i[t])return!1;return e.trackAllExp}(t)?function(t,e,n){const i=F(t,e),o=C.A.get(),s=x.get();return o[i]||(o[i]=(0,r.zr)(g,t,e,s.addPerformanceMarks,s.addPageTimings,n))}(t,e,n):void 0;function R(t,e){const n=E(t),i=C.A.get();if(i[n]!==t)return void S.v.logError(`Attempted to rename a perf timeline object with mismatching instance key ${n}`);t.rename(e),delete i[n];i[E(t)]=t}function M(){const t=[],e=C.A.get();return Object.keys(e).forEach(n=>t.push(...e[n].getPageMeasures())),t}function _(t){x.get().enableEntityMetricsTimeline&&(0,c.aJ)(t)}function E(t){const{timelineName:e,instanceId:n}=t;return F(e,n)}function F(t,e){return`${t}-${e||"0"}`}(0,a.S)()&&(window._getEntityMetricsCollection=t=>(0,c.cY)(Object.values(C.A.get()),(0,o.ms)(t)))},20760:function(t,e,n){n.r(e),n.d(e,{BrowserBackgroundPrefSupport:function(){return r.hq},BrowserType:function(){return r.dZ},ChromiumPageSettingsActions:function(){return s.U},ChromiumPageSettingsConnector:function(){return st},ChromiumPageSettingsReducer:function(){return ct},EdgeChannel:function(){return r.$C},EdgeFeatureFlag:function(){return i},InPageSearchBoxType:function(){return r.I4},LayoutChangeInitiator:function(){return r.MR},PrimaryAccountType:function(){return ut.M},ToolingInfo:function(){return dt},WPOLayoutPromotionCoachMarkId_OnLoadAutoScrollPrompt:function(){return r.qy},WPOLayoutPromotionCoachMarkId_OptInStickPromptLoad:function(){return r.BS},WPOLayoutPromotionCoachMarkId_layoutDemotion:function(){return r.EM},WPOLayoutPromotionCoachMarkId_layoutPromotion:function(){return r.uu},WPOLayoutPromotionCoachMarkId_optInFeedLayout:function(){return r.fu},WpoLayoutPromotionFailedScenarios:function(){return r.Y0},cleanupWidgetsUpsellButtonNurturingStorage:function(){return o.U9},configDataStringMap:function(){return r.qs},coolDownTimeMap:function(){return r.pS},createLayoutPromotionData:function(){return o.A7},customBackgroundImageInfoStringMap:function(){return r.of},edgeNextGetPageConfiguration:function(){return o.UU},edgeNextLayoutOptimizer:function(){return H},getBackgroundImageTypeFromSelectionMetadata:function(){return o.rS},getBackgroundSettingsPreferences:function(){return o.IR},getCMLastViewTime:function(){return o.DG},getConfigDataAsync:function(){return o.j_},getCurrentConfigurationIndex:function(){return o.y7},getCurrentLayoutAsync:function(){return o.WP},getCurrentVideoIndex:function(){return o.pg},getUserSetting:function(){return o.cv},getUserTopicAsync:function(){return o.$Z},isBaseBackgroundPreferenceAndGallerySelectionMismatched:function(){return o.Vf},isBundledThemeBackground:function(){return o.wl},isPersistentStorageAPIAvailable:function(){return o.kc},isRGBThemeBackground:function(){return o.nT},logAppError:function(){return o.yx},logVerboseAppError:function(){return o.CH},overrideGallerySelectionCache:function(){return o.H1},overrideNtpSettingsPrivatePreferenceSetting:function(){return X.kk},primaryAccountInfoStringMap:function(){return r.DP},quickLinksOptionsKey:function(){return r.Km},recordUserChoice:function(){return o.qU},sendClientLogEvent:function(){return o.eP},stampWidgetsUpsellTmpl:function(){return o.Hg},topsitesCollapsedToOff:function(){return r.nT}});var i,r=n(48309);!function(t){t.WinHPCustomBackButtonBehavior="msEnableWinHPNewTabBackButtonFocusAndClose"}(i||(i={}));var o=n(43434),s=n(34299);const a={StructuredDataCardsUserPreference:{id:"scp",maxRawLength:250,useCookie:!0,jsonEncoded:!0},CoachmarkUserPreference:{id:"cmp",maxRawLength:1,useCookie:!1,jsonEncoded:!1},LayoutOptimization:{id:"wpolo",maxRawLength:250,useCookie:!1,jsonEncoded:!0}};var c,u;!function(t){t.DefaultShowContent="DefaultShowContent",t.DisplayedCoachMarkWizards="DisplayedCoachMarkWizards",t.DynamicFeedFilters="DynamicFeedFilters",t.FreDialogExistingUser="FreDialogExistingUser",t.HasMsa="HasMsa",t.MarketSelection="MarketSelection",t.OutlookOptIn="OutlookOptIn",t.ProActiveCanvasFRE="ProActiveCanvasFRE",t.StructuredDataCardsUserPreference="StructuredDataCardsUserPreference",t.TopicSelection="TopicSelection",t.Layout="Layout",t.DhpHideNewsFeed="DhpHideNewsFeed",t.HideBingImage="HideBingImage"}(c||(c={})),function(t){t.DefaultShowContent="dsc",t.CoachMarkWizard="cmwr",t.DynamicFeedFilters="dff",t.MarketReset="mktreset",t.HasMsa="msa",t.MarketSelection="ntps",t.OutlookOptIn="olopt",t.ProActiveCanvasFRE="spnewpcfre",t.StructuredDataCardsUserPreference="scp",t.TopicSelection="epnff",t.DhpHideNewsFeed="iedo",t.HideBingImage="bingimage"}(u||(u={}));var d=n(89980);class l{constructor(t=(0,d.Lg)()){this.webStorage=t,this.loadSettingsFromStorage=()=>{},this.storage={}}fetchProperty(t){const e=a[t];return e&&this.storage[e.id]}clear(){Object.keys(a).forEach(t=>{const e=a[t];this.webStorage.removeItem(e.id),delete this.storage[e.id]})}deleteProperty(t){const e=a[t];e&&(this.webStorage.removeItem(e.id),delete this.storage[e.id])}saveProperty(t,e){const n=a[t];if(n){const t=n.jsonEncoded,i=n.maxRawLength,r=typeof e,o=JSON.stringify(e),s=o.length;if(t?"object"===r&&s<=i:("string"===r||"number"===r)&&s<=i+2){const i=t?o:e;return this.webStorage.setItem(n.id,i),!0}}return!1}loadSynchronizedSettingsFromStorage(){Object.keys(a).forEach(t=>{const e=a[t].id,n=this.webStorage.getItem(e);n&&(this.storage[e]=JSON.parse(n))})}}var h=n(83542),f=n(7965),p=n(69913),g=n(66600),m=n(93468),w=n(65022),y=n(88294),v=n(30817),b=n(51267),S=n(50127),C=n(89710),k=n(63418),T=n(19548),x=n(6092),A=n(12870),$=n(67387);class I{static get UpsellGamerMode(){return I.upsellGamerMode}static set UpsellGamerMode(t){I.upsellGamerMode=t}}var P=n(48172),R=n(41820),M=n(98793),_=n(50115),E=n(17720),F=n(16091),D=n(1732),O=n(98216);class N{}const L={0:"focused",1:"inspirational",2:"informational",3:"custom"},B={focused:0,inspirational:1,informational:2,custom:3},U={0:"off",1:"headingsonly",2:"peek",3:"always",4:"onscroll"},W={off:0,headingsonly:1,peek:2,always:3,onscroll:4};class V{constructor(){this.recommendation=new N,this.getRecommendedLayout=async(t,e,n,i)=>new Promise(async s=>{try{const{coolDownTimeInSecondsPromoted:a,coolDownTimeInSecondsSelected:c,forcePromotion:u,enableCleanerPromotion:d}=t&&t.layoutPromotion||{};let l=a,h=c,f=null;if(!(t&&t.enableOptPromoReverse)&&i)this.layoutPromotionConfig=i;else{if(await P.f.isApiAvailableToUse()){const t=(await P.f.getPreferenceSetting(R.bJ.layoutPromotion))?.value;this.layoutPromotionConfig=t||null}else O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.nurturingApiUnavailable)}if(this.layoutPromotionConfig&&(f=(0,o.A7)(this.layoutPromotionConfig),l=this.layoutPromotionConfig.coolDownTimeInSecondsPromoted??l,h=this.layoutPromotionConfig.coolDownTimeInSecondsSelected??h),!f||!f.recommendedLayout)return O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.promotionInfoIsNull),s(null);if(u){const{reTargetRecommendedLayout:t}=f;if(this.recommendation={layoutPromotionData:{recommendedLayout:f.recommendedLayout,isRevertFlight:t,shouldReTarget:t,tmpl:f.tmpl,control:f.control,source:f.source},rid:f.requestIdWhenReceived,time:f.clientReceivedTimestamp,muid:f.usermuidWhenReceived??"",lypType:f.coachMarkId===r.EM?"demotion":"promotion"},this.qualifyForPromotion=!0,t){const t=await P.f.getPreferenceSetting(R.bJ.wpo),e=t&&t.value,n=e.layoutHistory?.length?e.layoutHistory.pop():null;n&&(this.recommendation.layoutPromotionData.recommendedLayout=n.from||f.recommendedLayout)}return"custom"===this.recommendation.layoutPromotionData.recommendedLayout&&f.selectedFeedDisplaySetting&&(this.recommendation.layoutPromotionData.recommendedFeedDisplaySetting=f.selectedFeedDisplaySetting),s(this.recommendation)}return await this.canBePromoted(f,e,l,h,d,n,t?.enableLayoutPromotionForLog)?(f.selectedFeedDisplaySetting&&"custom"===f.recommendedLayout&&(this.recommendation.layoutPromotionData.recommendedFeedDisplaySetting=f.selectedFeedDisplaySetting),s(this.recommendation)):s(null)}catch(t){return(0,o.yx)(w.nom,"Applying recommended layout failed",`Error:${t}`),s(null)}}),this.qualifyForPromotion=!1}static getInstance(){return E.vv.get("__EdgeNextLayoutOptimizer__",()=>new V)}isNurturingLimitsGood(t,e,n,i,o){if(t&&t.recommendedLayoutAppliedTs){const e=(new Date).getTime(),n=o??r.pS.promoted;if(e-t.recommendedLayoutAppliedTs>1e3*n)return O.YT.addOrUpdateTmplProperty("lpIncoolDown","0"),!0}return!(e&&!n)||(O.YT.addOrUpdateTmplProperty("lpIncoolDown","1"),O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.layoutIsAlreadyApplied),!1)}async updateLayoutPromotionUserNurturing(t,e,n){const i=(new Date).getTime(),r=await P.f.getPreferenceSetting(R.bJ.wpo),o=r&&r.value,s=o&&o.recommendedLayoutRetargetHistory||[];n&&s.push(i);const a=o&&o.layoutHistory||[];a.push({time:i,from:t,to:e,reTarget:n||!1});const c={recommendedLayoutAppliedTs:i,recommendedLayoutRetargetHistory:s,layoutHistory:a};await P.f.savePreferenceSetting(R.bJ.wpo,c)}async canBePromoted(t,e,n,i,s,a,c){const{enabled:u}=await(0,D.hb)()||{},d=u&&u.includes("msNtpExpBlockLayoutPromotions");if(O.YT.addOrUpdateTmplProperty("inEdgeExpN",d?"1":"0"),d)return O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.isInEdgeExperience),!1;const l=A.Rb.CurrentFlightSet.has("prg-forcenoads"),h=u&&u?.includes("msReducedNtpAdsForNewDevice_BlockAllAds");if(l||h)return O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.isInEdgeNoAdsFlight),!1;if(e||(e=await(0,o.WP)()),e===t.recommendedLayout&&"custom"!==e)return O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.sameWithCurrentLayout),!1;if(this.areFeedsDisabledByAdmin())return O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.feedsDisabledByAdmin),!1;const{fromLayoutsArray:f,reTargetRecommendedLayout:p,fromFeedsArray:g}=t;if(f&&-1===f.indexOf(e))return O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.isNotOneOfFromLayouts),!1;if(g&&g.length&&-1===g.indexOf(a))return O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.isNotOneOfFromFeeds),!1;if(!await P.f.isApiAvailableToUse())return O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.nurturingApiUnavailable),!1;if(await this.isSelectedByUser(t.recommendedLayout,i))return!1;const m=await P.f.getPreferenceSetting(R.bJ.wpo),w=m&&m.value,y=w&&w.recommendedLayoutAppliedTs,v=w&&w.recommendedLayoutRetargetHistory&&w.recommendedLayoutRetargetHistory.length;if(!s){if(!this.isNurturingLimitsGood(w,y,p,v,n))return!1}if(c&&O.YT.addOrUpdateTmplProperty("lyp-r-rid",`${t.requestIdWhenReceived}`),t.usermuidWhenReceived||t.clientReceivedTimestamp){if(x.T3.UserId!==t.usermuidWhenReceived)return O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.userMuidMisMatch),!1;if(t.clientReceivedTimestamp&&t.clientReceivedTimestamp<(new Date).getTime()-15552e6)return O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.staleLayoutPromotion),!1}if(this.recommendation={layoutPromotionData:{recommendedLayout:t.recommendedLayout,isRevertFlight:p,shouldReTarget:p,tmpl:t.tmpl,control:t.control,source:t.source,coachmark:t.coachmark,knobIdx:t.knobIdx,knobIdxPrefix:t.knobIdxPrefix,fromLayoutsArray:f,fromFeedsArray:g},time:t.clientReceivedTimestamp,rid:t.requestIdWhenReceived,muid:t.usermuidWhenReceived,lypType:t.lypType,isPr:t.isPrerenderWhenReceived},this.qualifyForPromotion=!0,p){const e=w.layoutHistory?.length?w.layoutHistory.pop():null;e&&(this.recommendation.layoutPromotionData.recommendedLayout=e.from||t.recommendedLayout)}return"custom"===this.recommendation.layoutPromotionData.recommendedLayout&&t.selectedFeedDisplaySetting&&(this.recommendation.layoutPromotionData.recommendedFeedDisplaySetting=t.selectedFeedDisplaySetting),!0}areFeedsDisabledByAdmin(){const t=(0,d.Lg)().getObject("AdminPortalSettings");if(!t)return!1;const{isOfficeContentEnabled:e,isShowCompanyAndIndustry:n}=t;return!e&&!n}async isSelectedByUser(t,e){if(!await M.Q.isApiAvailableToUse()){const t="ntp.record_user_choices pref is not present in this version of EDGE; Will try to promote user";return(0,o.eP)(t),!1}let n;const i=await(0,D.iQ)();n=i&&i.userLayoutHistory;let s=!1;if(n||(n=await this.getExplicitUserChoice(R.K5.layout_mode),s=!0,O.YT.addOrUpdateTmplProperty("f-l")),n){const i=s?n.timestamp:n.time;if(this.isUserChoiceOutOfCooldownTime(i,e)){const t="ntp.record_user_choices pref is present and can be promoted as selected time is larger than cooldowntime";return(0,o.eP)(t),O.YT.addOrUpdateTmplProperty("uChoiceOutCooldown",i.toString()),!1}(0,o.eP)(`Did not promote layout to ${t} since user explicitly set layout or content to ${n.value}`);const a=s?r.Y0.isLayoutSelectedByUserWithinCoolDown:r.Y0.isContentSelectedByUserWithinCoolDown;return O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",a),!0}return O.YT.addOrUpdateTmplProperty("uChoiceIsNull","1"),!1}async getExplicitUserChoice(t){const e=await M.Q.getPreferenceSetting(t);return e&&"ntp"===e.source?e:null}isUserChoiceOutOfCooldownTime(t,e){if(t){if((new Date).getTime()-t>1e3*(e??r.pS.selected))return!0}return!1}async getWpoLayoutPromotionFromBrowser(t){if(!t&&this.qualifyForPromotion)return this.recommendation;if(!await P.f.isApiAvailableToUse())return O.YT.addOrUpdateTmplProperty("layoutPromotionFailedAdd",r.Y0.nurturingApiUnavailable),null;const e=await(0,_.mp)();if(e){const t=e;return this.recommendation={layoutPromotionData:{recommendedLayout:t.isCtrl?null:L[t.proLayout],recommendedFeedDisplaySetting:t.isCtrl?null:U[t.proContent],fromLayout:t.fromLayout,fromFeed:t.fromFeed,isRevertFlight:t.isRvert,shouldReTarget:t.isRvert,tmpl:t.tmpl,control:t.isCtrl,source:t.source,coachmark:t.coachmark,knobIdx:t.knobIdx,knobIdxPrefix:t.knobIdxPrefix},rid:t.rid,time:t.time,muid:t.muid,showCM:t.showCM,lypType:t.lypType,isPr:t.isPr},this.qualifyForPromotion=!0,this.recommendation}return O.YT.addOrUpdateTmplProperty("layoutPromotionFailedAdd",r.Y0.noSavedWpoPromotionOptions),null}async storeWpoLayoutPromotionToBrowser(t){if(t.layoutPromotionData){const{rid:e,time:n,muid:i,isPr:r,lypType:o}=t;if(await P.f.isApiAvailableToUse()){const{isRevertFlight:s,control:a,recommendedLayout:c,recommendedFeedDisplaySetting:u,tmpl:d,source:l,coachmark:h,knobIdx:f,knobIdxPrefix:p,fromLayoutsArray:g,fromFeedsArray:m}=t.layoutPromotionData;let w="",y="";g&&g.length&&(w=g.map(t=>B[t]).join(",")),m&&m.length&&(y=m.map(t=>W[t]).join(","));const v={isRvert:s,isCtrl:a,tmpl:d,proLayout:a?null:B[c],proContent:a?null:W[u],fromLayout:w,fromFeed:y,source:l,coachmark:h,knobIdx:f,knobIdxPrefix:p,time:n,rid:e,muid:i,lypType:o,isPr:r};await(0,_.Is)(v);let b=0;b=void 0!==r?r?1:0:2,O.YT.addOrUpdateTmplProperty("saveLyPromoToPSL",`${v?.knobIdx??"0"}|${b}|${Date.now()}|${v?.rid??"0"}|rsTime: ${v?.time??0}`)}}}}const H=(0,F.G)(V);var z=n(27261),j=n(77246),q=n(84316);class G{constructor(t){this.numberOfDaysToStoreTmpl=90,this.layoutTmplDataKey=R.bJ.wpoLytTmpl,this.userNurturingManager=t}static getInstance(){return E.vv.get("__TmplManager__",()=>new G(P.r.getInstance()))}async persistTmplValueToNurturingPref(t){if(t){const e=await this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),n=e&&e.value||[];if(this.findTmpl(n,t))return;n.push({value:t,expiryDate:this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl)}),await P.f.savePreferenceSetting(this.layoutTmplDataKey,n)}}async persistTmplValueToNurturingPrefAndStampToTelemetry(t){if(t){const e=await this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),n=e&&e.value||[];this.findTmpl(n,t)||n.push({value:t,expiryDate:this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl)});const i=[...new Set(n)];await this.userNurturingManager.savePreferenceSetting(this.layoutTmplDataKey,i),O.YT.addOrUpdateTmplProperty(t,"1")}}async stampExistingTmplValueToTelemetry(){const t=await this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),e=t&&t.value||[];if(!e.length)return;let n=!1;const i=this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl),r=e.map(t=>"string"==typeof t?(n=!0,{value:t,expiryDate:i}):t),o=(new Date).getTime(),s=r.filter(t=>t.expiryDate>o);s.forEach(t=>{t.value&&O.YT.addOrUpdateTmplProperty(t.value,"1")}),(n||r.length!=s.length)&&await this.userNurturingManager.savePreferenceSetting(this.layoutTmplDataKey,s)}findTmpl(t,e){return t&&-1!=t.findIndex(t=>t===e||t&&t.value===e)}getExpirationTimestamp(t){let e;try{e=(0,q.A)(new Date,t)}catch(n){const i=new Date;e=i.setDate(i.getDate()+t)}return e.getTime()}}const J=(0,F.G)(G);var Q=n(4520),K=n(11367),X=n(51991),Y=n(55593);const Z="myFeed",tt=(t,e,n)=>{if(t===f.JW.selectedFeedPivot&&""===e&&(e=Z),t===f.JW.selectedFeedPivot&&""===n&&(n=Z),(t!==f.JW.feeds||"onscroll"!==e||"headingsonly"!==n)&&e!==n){"true"===(0,Y.a)().get("mock-ntp-header")||(0,m.vV)(w.ZuI,"SSR - Edge header mismatch.",void 0,{...w.ZuI.pb,customMessage:`key: ${t}, header: ${e}, state: ${n}`,edgeHeader:`${A.Rb.EdgeNTPHeader}`})}};var et=n(53709),nt=n(21599),it=n(90441),rt=n(56098),ot=n(90565);class st extends h.i{constructor(t,e,n,i,a,u,d){super(t,e,n,i,a,u,d),this.preferenceChangeCallbacks=[],this.marketCookieName="ntps",this.cookieExpireInDays=182,this.didLayoutModeChangeInCurrentTab=!1,this.layoutChangeInitiatorKey="lytupdtinitiator",this.initialWidgetsPrefKey="initialWidgetsPref",this.QSPLayoutOverride=null,this.QSPTopSitesOverride=null,this.isPageLayoutStateReady=new Promise(t=>{this.resolvePageLayoutState=t}),this.isWindowsIndexerPromotedTopSitesPreferenceAvailable=!1,this.isMinimumVisitAffiliateSitePreferenceAvailable=!1,this.isWidgetPreferenceAvailable=!1,this.overrideWidgetsQSP=!1,this.hasFeedDisplaySettingChanged=!1,this.promotion="promotion",this.layoutPromotionSignalTransition="lypSignalTransition",this.isPreCheckPassed=!1,this.getLayoutStateFromOverrideConfig=(t,e,n)=>{let i;if(t&&"custom"!==t){const e=f.c_[t];i={currentBackgroundImageType:e.current_background_image_type,originalLayout:n.currentLayout,currentLayout:t,greetingEnabled:e.greeting,imageOfTheDayEnabled:"off"!==e.current_background_image_type,hideDefaultTopSites:e.hide_promoted_links,selectedFeedDisplaySetting:e.feeds_position,originalFeedDisplaySetting:n.selectedFeedDisplaySetting,selectedQuickLinksDisplaySetting:n.selectedQuickLinksDisplaySetting}}else i={...n,originalLayout:n.currentLayout,currentLayout:"custom",selectedFeedDisplaySetting:e,originalFeedDisplaySetting:n.selectedFeedDisplaySetting};return i},this.settingsAPI="undefined"!=typeof window&&window&&window.chrome&&window.chrome.ntpSettingsPrivate,this._authPrivateApi="undefined"!=typeof window&&window&&window.chrome&&window.chrome.authPrivate,this.ntpApiHandle="undefined"!=typeof window&&window&&window.chrome&&window.chrome.embeddedSearch&&window.chrome.embeddedSearch.newTabPage,this.chromiumBackgroundPrefType=r.hq.BOOLEAN,this.registerOnConfigDataChangedCallback(),this.registerOnPrefsChangeCallback(),this.edgeChromiumStorageProvider=new l,s.U.updateLocalStorage.registerObserver(t=>{const e=t.params[0];this.edgeChromiumStorageProvider.saveProperty(c.StructuredDataCardsUserPreference,function(t){return{bsk:{v:t.bingShoppingVisible?1:0,p:null},wsk:{v:t.weatherVisible?1:0,p:null},ssk:{v:t.sportsVisible?1:0,p:null},msk:{v:t.moneyVisible?1:0,p:null},hsk:{v:t.horoscopeVisible?1:0,p:null},osk:{v:t.onThisDayVisible?1:0,p:null},esk:{v:t.electionsVisible?1:0,p:null},essk:{v:t.esportsVisible?1:0,p:null},lsk:{v:t.lotteryVisible?1:0,p:null},qsk:{v:t.qnaVisible?1:0,p:null},rsk:{v:t.qnaVisible?1:0,p:null},amsk:{v:t.autosMarketplaceVisible?1:0,p:null},bhsk:{v:t.healthCardVisible?1:0,p:null}}}(e))}),s.U.marketUpdated.registerObserver(t=>{const e=t.params[0];if(e&&""!==e)try{this.updateMarketandRefresh(e)}catch(t){(0,m.c_)(t,w.JLo,"Failed to change the market, cookie doesn't drop from PCS")}}),this.getInitialState().then(t=>{s.U.loadLocalStorage.getActionSender(this).send(t)}),this.QSPLayoutOverride=T._3.getQueryParameterByName("setNTPLayout",(0,z.iA)()),this.QSPTopSitesOverride=T._3.getQueryParameterByName("setNTPTopSites",(0,z.iA)()),this.QSPLayoutOverride=x.T3.IsHeroNTP&&!this.config.heroNoPromoLayout||x.T3.IsUCBased?"custom":this.QSPLayoutOverride,this.getPageLayoutStateAsync(u&&u.enableClientEventsLog).then(t=>{if(this.config&&this.config.promoFormParamList){const e=new URLSearchParams((0,z.iA)()).get("form");if(e){if(this.config.promoFormParamList.includes(e.toUpperCase())&&"always"!==t.selectedFeedDisplaySetting){const e={...t,originalLayout:t.currentLayout,...f.MA};this.updateLayout(e),t={...e},O.YT.addOrUpdateTmplProperty("formRecommendedLayout",t.currentLayout),O.YT.addOrUpdateTmplProperty("formRecommendedDisplay",t.selectedFeedDisplaySetting)}}}if(this.config.recordDisableContentAsOff&&this.isPageLayoutStateReady.then(()=>(0,_.hI)(!!this.config?.forceDisableContent)),window.isSSREnabled&&!this.config.enablePromotionInSSR)return t.isLoadCompleted=!0,s.U.pageLayoutStateLoaded.getActionSender(this).send(t),void this.resolvePageLayoutState();this.applyWpoLayoutPromotion(t)}),this.getPrimaryAccountInfoAsync().then(t=>{s.U.updatePrimaryAccountInfo.getActionSender(this).send(t)}),this.getConfigDataAsync().then(t=>{s.U.updateConfigData.getActionSender(this).send(t)}),this.ntpApiHandle&&(this.ntpApiHandle.onthemechange=()=>{const t=this.ntpApiHandle.ntpTheme;s.U.updateNtpTheme.getActionSender(this).send(t),t||(0,o.yx)(w.D04,"Missing theme information detected on theme change.",`ntpTheme: ${t}`)})}applyWpoLayoutPromotion(t){H.getWpoLayoutPromotionFromBrowser().then(async e=>{const n=async t=>{if((0,j.S)())if(this.config.enableOptPromoReverse){const e=this.getCurrentState();H.getRecommendedLayout(this.config,e.currentLayout,e.selectedFeedDisplaySetting).then(async n=>{if(n)H.storeWpoLayoutPromotionToBrowser(n);else{let n=!1;t&&"beforeunload"===t.type&&(n=await this.shouldReTriggerCoachMark(e.currentLayout,e.selectedFeedDisplaySetting)),(0,_.Is)(n?{showCM:!0}:null)}})}else{const e=await(0,_.mp)()??{};let n=!1;if(t&&"beforeunload"===t.type){const t=this.getCurrentState();n=await this.shouldReTriggerCoachMark(t.currentLayout,t.selectedFeedDisplaySetting)}n&&(0,_.Is)({...e,showCM:!0}),!n&&e&&e.showCM&&(0,_.Is)({...e,showCM:!1})}};await this.layoutPromotionFollowUp(t,e),this.config.enableOptPromoReverse&&n(),window.addEventListener("beforeunload",n,{once:!0})})}async layoutPromotionFollowUp(t,e){const{layoutPromotionData:n,showCM:i}=e||{},{recommendedLayout:a,recommendedFeedDisplaySetting:c}=n||{},u=!!a;if(i&&(0,j.S)()){if(a&&a!==t.currentLayout||c&&c!==t.selectedFeedDisplaySetting)return;const n=await(0,o.DG)("layoutPromotion");Date.now()-n<=2592e6||(s.U.updateWPOLayoutPromotion.getActionSender(this).send(!0,e?.lypType),O.YT.addOrUpdateTmplProperty("reTriggerlypCM","1"),!u&&e&&e.showCM&&(0,_.Is)(null))}if(u||(0,d.Lg)().setObject(this.promotion,void 0),u){O.YT.addOrUpdateTmplProperty("hasPromoInfo","isFromPr:"+(e.isPr?"1":"0"));const{enabled:n}=await(0,D.hb)()||{},i=n&&n.includes("msNtpExpBlockLayoutPromotions");O.YT.addOrUpdateTmplProperty("inEdgeExp",i?"1":"0");if(!await this.shouldApplyPromotion(t.currentLayout,t.selectedFeedDisplaySetting,e,i,t.enableWidgetsRegion))return this.isPreCheckPassed&&(0,et.fi)("layoutPromotion_PreCheck",nt.R.Ignored),(0,j.S)()&&J.stampExistingTmplValueToTelemetry(),t.isLoadCompleted=!0,s.U.pageLayoutStateLoaded.getActionSender(this).send(t),void this.resolvePageLayoutState()}const l=n?.knobIdx,h=this.config.knobsForLog&&this.config.knobsForLog.includes(l);if((this.config.layoutPromotion?.forceRegisterLayoutPromotionCoachMark||u&&!n?.isRevertFlight&&!h)&&(O.YT.addOrUpdateTmplProperty("sendlypaction",e?.lypType),s.U.updateWPOLayoutPromotion.getActionSender(this).send(!0,e?.lypType)),u&&!n?.isRevertFlight&&(n?.source&&s.U.updateWPOLayoutPromotionSource.getActionSender(this).send(n?.source),n?.coachmark&&s.U.updateWPOPromotionCoachMark.getActionSender(this).send(n?.coachmark)),u&&e.layoutPromotionData?.tmpl&&J.persistTmplValueToNurturingPref(e.layoutPromotionData?.tmpl),u&&e.layoutPromotionData?.source&&O.YT.addOrUpdateTmplProperty("pSource",e.layoutPromotionData?.source),u){(0,D.Qm)("OPT_OUT_UPSELL_ELIGIBLE");const{time:i,rid:o,lypType:s}=e,{shouldReTarget:u}=n;if(a){const e=A.Rb.IsPrerender?r.MR.wpoPrerenderTab:r.MR.wpoVisibleTab,n=this.getLayoutStateFromOverrideConfig(a,c,t),f=t.currentLayout,p=this.config.enableLayoutPromotionForLog&&(!this.config.knobsForLog||h);p||this.wpoPromoteNewLayout(n,e),!p&&c&&this.wpoPromoteNewFeedDisplaySetting(c,t.selectedFeedDisplaySetting),O.YT.addOrUpdateTmplProperty("wpolyp",`${l}|${(new Date).getTime()}|${s??"promotion"}|${o}|sTime:${i}`),p&&O.YT.addOrUpdateTmplProperty("wpolyp-rid",`${o}|${i}`),(0,d.Lg)().setObject("previousLayoutState",{currentLayout:t.currentLayout,selectedFeedDisplaySetting:t.selectedFeedDisplaySetting,currentBackgroundImageType:t.currentBackgroundImageType,greetingEnabled:t.greetingEnabled,imageOfTheDayEnabled:t.imageOfTheDayEnabled,hideDefaultTopSites:t.hideDefaultTopSites});const g=c||n.selectedFeedDisplaySetting;p||(t={...t,currentLayout:a,selectedFeedDisplaySetting:g,currentBackgroundImageType:n.currentBackgroundImageType,greetingEnabled:n.greetingEnabled,imageOfTheDayEnabled:n.imageOfTheDayEnabled,hideDefaultTopSites:n.hideDefaultTopSites,layoutPromotionType:s}),O.YT.addOrUpdateTmplProperty("recommendedLayout",a),O.YT.addOrUpdateTmplProperty("recommendedDisplay",g),(0,d.Lg)().setObject(this.promotion,{isPromoted:!0,muid:x.T3.UserId,time:Date.now(),recommendedLayout:a,recommendedFeedDisplaySetting:c}),this.config.enablePromotionInSSR&&(0,_.Is)(null),p||H.updateLayoutPromotionUserNurturing(f,a,u)}}(0,j.S)()&&J.stampExistingTmplValueToTelemetry(),t.isLoadCompleted=!0,s.U.pageLayoutStateLoaded.getActionSender(this).send(t),this.resolvePageLayoutState()}async updateMarketandRefresh(t){(0,k.Ub)(this.marketCookieName,void 0,-1),(0,k.Ub)(this.marketCookieName,void 0,-1,void 0,"/edge");const e=JSON.stringify({m:t});(0,k.Ub)(this.marketCookieName,e,this.cookieExpireInDays,x.T3.HostPage.topDomain,"/"),await M.Q.savePreferenceSetting(this.marketCookieName,{setting:this.marketCookieName,source:"ntp",timestamp:(new Date).getTime(),value:e}),O.YT.addOrUpdateTmplProperty("marketSetToExplicitSelection","1"),x.T3.IsUCBased&&rt.c.getInstance()?.notify(ot.m2.OnContentReload);const n=`/${x.T3.CurrentMarket}/`;if(!location.pathname.startsWith(n))return void(0,b.J)();const i=new URL(location.href);i.pathname=i.pathname.replace(n,`/${t}/`),(0,b.J)({newUrl:i.href})}checkAuthApiIsAvailable(){return!!(window&&window.chrome&&window.chrome.authPrivate)&&!!window.chrome.authPrivate.startEdgeSignIn}getPrimaryAccountInfoAsync(t=!0){return new Promise(e=>{const n=this.getCurrentState();t&&n.primaryAccountInfo?e(n.primaryAccountInfo):this._authPrivateApi&&this._authPrivateApi.getPrimaryAccountInfo?this._authPrivateApi.getPrimaryAccountInfo(t=>{if(t){const n={accountId:t[r.DP.accountId],accountType:t[r.DP.accountType],firstName:t[r.DP.firstName],lastName:t[r.DP.lastName],email:t[r.DP.email]};e(n)}else(0,m.vV)(w.SF3,"Failed to get response from Chromium API.",void 0,{...w.SF3.pb}),e({})}):(y.v.logError("Failed to get auth private api data from Chromium API."),e({}))})}async getConfigDataAsync(){const t=this.getCurrentState();return t.configData?t.configData:(0,o.j_)()}getPageSettingsStateAsync(){const t=this.getCurrentState(),e=this.config&&this.config.forceDisableContent;return e&&this.setContentDisabled(t),new Promise((n,i)=>this.settingsAPI?t.isLoadCompleted?(e&&this.setContentDisabled(t),n(t)):void s.U.pageLayoutStateLoaded.registerObserver(t=>{const r=t&&t.params;if(!r||r.length<1)return i("Load action didn't send any params");const o=r[0];return e&&o&&this.setContentDisabled(o),o?n(o):i("Chromium Load action params type does not match with expected state type")}):n(t))}getThemeTextColor(){let t=null;const e=this.getThemeLayoutColor();if(e){const n={r:e[0],g:e[1],b:e[2],a:e[3]};t=S.m.rgbNumberToCssHexColor(S.m.parsedColorToNumber(n))}return t}getThemeLayoutColor(){const t=this.getCurrentState(),e=t.ntpTheme;if("theme"!==t.currentBackgroundImageType||!e||e.imageUrl||e.usingDefaultTheme||!e.backgroundColorRgba)return null;if(e&&!e.usingDefaultTheme){if(e&&e.isNtpBackgroundDark&&e.textColorRgba&&e.textColorRgba.length>3)return e.textColorRgba;if(e&&!e.isNtpBackgroundDark&&e.textColorLightRgba&&e.textColorLightRgba.length>3)return e.textColorLightRgba}return null}getLayoutStateAsync(){return this.getPageSettingsStateAsync()}addSettingChangeListener(t){this.preferenceChangeCallbacks.push(t)}updateLayout(t,e=r.MR.user,n=!0,i){if(!(0,j.S)()||!this.settingsAPI||this.config&&this.config.forceDisableContent)return;const o=this.getCurrentState();O.YT.addOrUpdateTmplProperty("lychangeby",e+""),e!==r.MR.user&&"off"===t.selectedFeedDisplaySetting&&"off"!==o.selectedFeedDisplaySetting&&O.YT.sendAppErrorEvent({...w.C9e,message:`Feed layout is set to content-off by initiator: ${e}`,pb:{...w.C9e.pb}});let s=f.Le[o.selectedQuickLinksDisplaySetting];if(t.selectedQuickLinksDisplaySetting&&(s=f.Le[t.selectedQuickLinksDisplaySetting]),this.didLayoutModeChangeInCurrentTab=!0,(0,d.Lg)().setObject(this.layoutChangeInitiatorKey,e),this.isFreModalBackground())O.YT.addOrUpdateTmplString("FREModalBackgroundLayoutNotSaved:1"),e!==r.MR.user&&O.YT.addOrUpdateTmplProperty("layoutPromotionFailed",r.Y0.isFREModalBackground);else{const i=R.lh[e]??"unknown",s=t.originalFeedDisplaySetting??o.selectedFeedDisplaySetting;if(t.selectedFeedDisplaySetting!==s){const n=e===r.MR.user?o.selectedFeedDisplaySetting:t.originalFeedDisplaySetting;(0,D.Dl)(i,"feeds",f.go[n??t.selectedFeedDisplaySetting],f.go[t.selectedFeedDisplaySetting],(new Date).getTime(),this.config.enableOptimizedTmpl)}else{const e=f.IT[t.originalLayout??o.currentLayout],n=f.IT[t.currentLayout];O.YT.addOrUpdateTmplProperty("layoutUpdate",`${i}|layout|${e}|${n}|${(new Date).getTime()}`)}this.logCallStack("updateLayout"),n?this.executeSettingsChange(f.JW.layout,f.IT[t.currentLayout]):this.settingsAPI.setPref(f.JW.layout,f.IT[t.currentLayout],Q.n)}t.isContentFeedManagedByAdminPortal&&this.updateContentFeedAdminPortalSetting(!0),s&&this.settingsAPI.setPref(f.JW.quickLinksDisplaySetting,s,Q.n),this.settingsAPI.setPref(f.JW.hideDefaultTopSites,t.hideDefaultTopSites,Q.n),this.settingsAPI.setPref(f.JW.imageOfTheDay,t.imageOfTheDayEnabled,Q.n),this.settingsAPI.setPref(f.JW.currentBackgroundImageType,t.imageOfTheDayEnabled?"imageAndVideo":"off",Q.n),this.settingsAPI.setPref(f.JW.greeting,t.greetingEnabled,Q.n),this.updateFeedsPreference(t.selectedFeedDisplaySetting,this.getFeedUpdateReason(e)),e===r.MR.user&&i&&M.Q.savePreferenceSetting(f.JW.feeds,{setting:f.JW.feeds,source:"ntp",timestamp:(new Date).getTime(),value:t.selectedFeedDisplaySetting}),void 0!==t.selectedFeedPivot&&this.settingsAPI.setPref(f.JW.selectedFeedPivot,t.selectedFeedPivot,Q.n)}updateQuickLinksDisplayOption(t,e){this.QSPTopSitesOverride=null;const n=this.getCurrentState();(0,d.Lg)().setItem("prevQuickLinksValue",n.selectedQuickLinksDisplaySetting),this.executeSettingsChange(f.JW.quickLinksDisplaySetting,f.dH[t]),this.updatePrefTSCollapsed(e)}updateHideDefaultLinksOption(t){this.executeSettingsChange(f.JW.hideDefaultTopSites,t)}updateQuickBriefToggle(t){M.Q.savePreferenceSetting(f.JW.showQuickBrief,{setting:f.JW.showQuickBrief,source:"ntp",timestamp:(new Date).getTime(),value:t}),this.updateUIForSettingsChange(f.JW.showQuickBrief,t)}updateBackgroundImageType(t){this.executeSettingsChange(f.JW.imageOfTheDay,"off"!==t),this.executeSettingsChange(f.JW.currentBackgroundImageType,t)}updateTopSitesQuickLinkEndMarginUsedPadding(t){s.U.updateTopSitesQuickLinkEndMarginUsedPadding.getActionSender(this).send(t)}updateGreeting(t){this.executeSettingsChange(f.JW.greeting,t)}updateFeeds(t,e,n=R.XE.User){n===R.XE.User&&(0,D.Dl)(n,"feeds",f.go[e],f.go[t],(new Date).getTime()),n!==R.XE.User&&"off"===t&&"off"!==e&&O.YT.sendAppErrorEvent({...w.C9e,message:`Feed is set to off by initiator: ${n}`,pb:{...w.C9e.pb}}),this.logCallStack("updateFeeds"),this.updateFeedsPreference(t,this.getFeedUpdateReason(n)),this.updateUIForSettingsChange(f.JW.feeds,t),n===R.XE.User&&M.Q.savePreferenceSetting(f.JW.feeds,{setting:f.JW.feeds,source:"ntp",timestamp:(new Date).getTime(),value:t})}getFeedUpdateReason(t){const{ADMIN_PORTAL:e,OPT_OUT_UPSELL:n,USER_CHANGE:i}=window?.chrome?.ntpSettingsPrivate?.FeedChangeReason||{};switch(t){case r.MR.adminPortalVisibleTab:return e||n||"";case R.XE.Wpo:case r.MR.wpoPrerenderTab:case r.MR.wpoVisibleTab:case r.MR.ntpVisibleTab:return n||"";case R.XE.User:case r.MR.user:default:return i||""}}async updateFeedsForWidgetsToggle(t){this.config.enableWidgetsRegion&&(await(0,it.VN)(f.U6.user),this.settingsAPI.setPref(f.JW.widgetsRegion,t))}updateOfficeLeftRail(t){(0,d.Lg)().setItem($.lP,t.toString())}officeLeftRailEnabled(){return(0,d.Lg)().getObject($.lP,!1)}isContentFeedManagedByAdminPortal(){return(0,d.Lg)().getObject("isContentFeedManagedByAdminPortal",!1)}updateContentFeedAdminPortalSetting(t){(0,d.Lg)().setItem("isContentFeedManagedByAdminPortal",t.toString())}updatePageSetting(t,e){(0,d.Lg)().setItem(t,e.toString())}isPageSettingEnabled(t,e){return(0,d.Lg)().getObject(t,e)}executeSettingsChange(t,e){this.settingsAPI&&this.settingsAPI.setPref&&this.settingsAPI.setPref(t,e,Q.n)}updateFeedsPreference(t,e){this.config.enableUpdateFeedsFunction&&this.settingsAPI&&this.settingsAPI.updateFeedPref&&e?this.settingsAPI.updateFeedPref(t,e,Q.n):this.executeSettingsChange(f.JW.feeds,t)}async getInitialState(){this.edgeChromiumStorageProvider.loadSynchronizedSettingsFromStorage();const t=this.edgeChromiumStorageProvider.fetchProperty(c.StructuredDataCardsUserPreference)||{};if(t){return{weatherVisible:!t.wsk||!!t.wsk.v,sportsVisible:!t.ssk||!!t.ssk.v,moneyVisible:!t.msk||!!t.msk.v,bingShoppingVisible:!t.bsk||!!t.bsk.v,horoscopeVisible:!t.hsk||!!t.hsk.v,onThisDayVisible:!t.osk||!!t.osk.v,electionsVisible:!t.esk||!!t.esk.v,esportsVisible:!t.essk||!!t.essk.v,lotteryVisible:!t.lsk||!!t.lsk.v,qnaVisible:!t.qsk||!!t.qsk.v,recipesVisible:!t.rsk||!!t.rsk.v,autosMarketplaceVisible:!t.amsk||!!t.amsk.v,healthCardVisible:!t.bhsk||!!t.bhsk.v}}return null}getPageLayoutStateAsync(t){const e=this.getCurrentState(),n=(0,v.ZF)();return n["GetAllPrefsRequest.Start"]=Math.round(performance.now()),new Promise(i=>{this.ntpApiHandle&&(e.ntpTheme=this.ntpApiHandle.ntpTheme,e.isQuickLinksSetByPolicy=this.ntpApiHandle.mostVisited?.some(t=>"ENFORCED"===t.enforcement));const s=e;if("function"==typeof this.settingsAPI?.getAllPrefs){let a,c=!1;window.chrome.ntpSettingsPrivate.getAllPrefs(async u=>{n["GetAllPrefsRequest.End"]=Math.round(performance.now());const l=new URLSearchParams((0,z.iA)());if("vp"===l?.get("reqsrc")&&!u&&this.config.enableWidgetsRegion)this.isWidgetPreferenceAvailable=!0,e.enableWidgetsRegion=!0,e.disableWidgetsToggle=x.T3.IsHeroNTP,e.isContentFeedManagedByPolicy=!1,i(e);else if(void 0!==u){a=this.defineChromiumKeys(u),O.YT.addOrUpdateTmplProperty("init-dlayout",a[f.JW.layout]),O.YT.addOrUpdateTmplProperty("init-feeds",a[f.JW.feeds]),O.YT.addOrUpdateTmplProperty("bg-img-type",a[f.JW.currentBackgroundImageType]),O.YT.addOrUpdateTmplProperty("bg-img-provider",a[f.JW.currentBackgroundImageOption]?.provider),(0,X.T2)(a),s.currentLayout=this.QSPLayoutOverride??f.E3[a[f.JW.layout]],s.userSelectedLayout=this.QSPLayoutOverride?f.E3[a[f.JW.layout]]:void 0,A.Rb.SelectedFeedPivot=a[f.JW.selectedFeedPivot];const n=new URLSearchParams(location.search);n.has("feedPivot")&&(A.Rb.SelectedFeedPivot=n.get("feedPivot"));const l=a[f.JW.gamerModeEnabled];if(void 0!==l){const t=this.getGroupPolicy(u,f.JW.gamerModeEnabled);I.UpsellGamerMode=!1===l&&!("USER_POLICY"===t.controlledBy&&"ENFORCED"===t.enforcement)}else I.UpsellGamerMode=!1;s.prefDerivedBrowserFeatures={isCustomBackgroundImageFeatureFlightOn:f.JW.customBackgroundImageInfo in a};const h=f.JW.currentBackgroundImageType in a,p=f.JW.imageOfTheDay in a;let g;this.isWindowsIndexerPromotedTopSitesPreferenceAvailable=f.JW.windowsIndexerPromotedTopSites in a,this.isMinimumVisitAffiliateSitePreferenceAvailable=f.JW.minVisitAffiliateSites in a;if(h&&!this.config.disableBackgroundGallery&&!x.T3.IsFrePage){const t=a[f.JW.userNurturingUpdated];g=(0,o.IR)(t)}if(h&&p){this.chromiumBackgroundPrefType=r.hq.BOOLEAN_AND_STRING_ENUM;const t=a[f.JW.imageOfTheDay],n=a[f.JW.currentBackgroundImageType];t||"off"===n||"theme"===n?t&&"off"===n?(s.currentBackgroundImageType="imageAndVideo",c=!0):"custom"===a[f.JW.currentBackgroundImageType]&&a[f.JW.customBackgroundImageInfo]&&!a[f.JW.customBackgroundImageInfo].has_image||"theme"===a[f.JW.currentBackgroundImageType]&&e.ntpTheme&&e.ntpTheme.usingDefaultTheme?s.currentBackgroundImageType="imageAndVideo":s.currentBackgroundImageType=a[f.JW.currentBackgroundImageType]:(s.currentBackgroundImageType="off",c=!0)}else if(p){this.chromiumBackgroundPrefType=r.hq.BOOLEAN;const t=a[f.JW.imageOfTheDay];s.currentBackgroundImageType=t?"imageAndVideo":"off"}else h&&(this.chromiumBackgroundPrefType=r.hq.STRING_ENUM,s.currentBackgroundImageType=a[f.JW.currentBackgroundImageType],"bing"===s.currentBackgroundImageType&&(s.currentBackgroundImageType="imageAndVideo"));if(h&&f.JW.customBackgroundImageInfo in a){const t=a[f.JW.customBackgroundImageInfo],e={hasImage:t[r.of.hasImage],resourceUrl:t[r.of.resourceUrl],timestamp:t[r.of.timestamp]};s.customBackgroundImageInfo=e}const m=a[f.JW.currentBackgroundImageType];t&&g&&!g.backgroundSelectionMetadata&&!g.changeBackgroundDaily&&(0,o.eP)("Rotate Image daily is off with no selection in the gallery cache",`Current background image type (pref): ${a[f.JW.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}, current layout: ${f.E3[a[f.JW.layout]]}`);const y=a[f.JW.customBackgroundImageInfo];if((0,o.Vf)(m,g?.backgroundSelectionMetadata)&&(0,o.CH)(w.JxG,"Preference for current background image type and gallery selection do not match.",`Current background image type (pref): ${a[f.JW.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,y,e.ntpTheme,f.E3[a[f.JW.layout]]),g&&"custom"===m&&!y)K.gR.isRuby||(0,o.CH)(w.ztq,"Current BackgroundImageType is custom and custom background information is missing.",`Current background image type (pref): ${a[f.JW.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,y,e.ntpTheme,f.E3[a[f.JW.layout]]);else if(g&&"custom"===m&&y&&!y.has_image){(0,o.CH)(w.ztq,"Current BackgroundImageType is custom and has image flag is false.",`Current background image type (pref): ${a[f.JW.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,y,e.ntpTheme,f.E3[a[f.JW.layout]]);const t=(0,o.y7)(g),n="imageAndVideo";s.currentBackgroundImageType=n,g.changeBackgroundDaily||"BrowserLocal"!==g?.backgroundSelectionMetadata?.provider||(0,o.H1)(g,t)}if(g&&"theme"===m&&!e.ntpTheme)K.gR.isRuby||(0,o.CH)(w.D04,"Current Background Image type is theme and theme information is missing",`Current background image type (pref): ${a[f.JW.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,y,e.ntpTheme,f.E3[a[f.JW.layout]]);else if(g&&"theme"===m&&e.ntpTheme&&e.ntpTheme.usingDefaultTheme){(0,o.CH)(w.Y7T,"Current Background Image type is theme and theme is default. Switching to background in rotation in cache.",`Current background image type (pref): ${a[f.JW.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(g)}`,y,e.ntpTheme,f.E3[a[f.JW.layout]]);const t=(0,o.y7)(g),n="imageAndVideo";s.currentBackgroundImageType=n,"Theme"===g?.backgroundSelectionMetadata?.provider&&(0,o.H1)(g,t)}t&&("theme"===s.currentBackgroundImageType&&(0,o.nT)(s)?(0,o.eP)("RGB Theme background detected",`Current theme info: ${JSON.stringify(e.ntpTheme)}`):"theme"===s.currentBackgroundImageType&&(0,o.wl)(s)&&(0,o.eP)("Bundled Theme background detected",`Current theme info: ${JSON.stringify(e.ntpTheme)}`));let v=this.QSPTopSitesOverride??f.Pl[a[f.JW.quickLinksDisplaySetting]];if("top"==v&&this.settingsAPI?.setPref("ntp.quick_links_options",1,Q.n),this.config.enableCarouselTopSite&&"tworows"==v&&(v="onerow"),s.isQuickLinksSetByPolicy&&"off"==v&&(v="onerow"),s.ntpPrefOptionApiAvailability=!!v,"custom"!==s.currentLayout){const t=a[f.JW.feeds];f.c_[s.currentLayout].feeds_position&&t!==f.c_[s.currentLayout].feeds_position&&O.YT.addOrUpdateTmplProperty("LFMismatchUF",`UF:${t}|LF:${f.c_[s.currentLayout].feeds_position}|LogLM:${a["instrumentation.ntp.layout_mode"]}|LogFD:${a["instrumentation.ntp.news_feed_display"]}`),s.selectedQuickLinksDisplaySetting=v,s.currentBackgroundImageType=f.c_[s.currentLayout].current_background_image_type,s.selectedFeedDisplaySetting=f.c_[s.currentLayout].feeds_position,s.hideDefaultTopSites=f.c_[s.currentLayout].hide_promoted_links}else{s.selectedQuickLinksDisplaySetting=v,s.greetingEnabled=a[f.JW.greeting];const t=a[f.JW.feeds];s.selectedFeedDisplaySetting=t,s.hideDefaultTopSites=a[f.JW.hideDefaultTopSites]}let b=!1;const S=this.getGroupPolicy(u,f.JW.feeds);if(O.YT.addOrUpdateTmplProperty("feedPolicy",`${S.isEnabled} ${S.enforcement||"NONE"}`),(S.isEnabled&&"ENFORCED"===S.enforcement||this.isContentFeedManagedByAdminPortal())&&(O.YT.addOrUpdateTmplProperty("feedManagedByPolicy"),s.isContentFeedManagedByPolicy=!0,b=!0,"custom"!==s.currentLayout&&(s.selectedFeedDisplaySetting=a[f.JW.feeds])),f.JW.quickLinksDisplaySetting in a){const t=this.getGroupPolicy(u,f.JW.quickLinksDisplaySetting);t.isEnabled&&"ENFORCED"===t.enforcement&&(s.isQuickLinksManagedByPolicy=!0,s.isRecommendedSitesManagedByPolicy=!0,b=!0,"custom"!==s.currentLayout&&(s.selectedQuickLinksDisplaySetting=v))}if(f.JW.defaultBrowserSettingEnabled in a){const t=this.getGroupPolicy(u,f.JW.defaultBrowserSettingEnabled);s.defaultBrowserSettingPolicyEnforced="ENFORCED"===t.enforcement}if(f.JW.backgroundImageTypePolicy in a){const t=this.getGroupPolicy(u,f.JW.backgroundImageTypePolicy);s.backgroundImageTypePolicy=a[f.JW.backgroundImageTypePolicy],"ENFORCED"!=t.enforcement&&(s.backgroundImageTypePolicy=0),3===s.backgroundImageTypePolicy&&"off"!==s.currentBackgroundImageType||1===s.backgroundImageTypePolicy&&"imageAndVideo"===s.currentBackgroundImageType?(s.currentBackgroundImageType="off",c=!0):2===s.backgroundImageTypePolicy&&"custom"===s.currentBackgroundImageType&&(s.currentBackgroundImageType="imageAndVideo",c=!0),b=b||0!==s.backgroundImageTypePolicy}if(b&&"custom"!==s.currentLayout&&(s.currentLayout="custom",this.overrideLayoutPreferenceForPolicy()),s.imageOfTheDayEnabled="off"!==s.currentBackgroundImageType,"theme"===s.currentBackgroundImageType&&e.ntpTheme){const t=e.ntpTheme;t.imageUrl||t.backgroundColorRgba||(s.imageOfTheDayEnabled=!1),!t.usingDefaultTheme&&t.isNtpBackgroundDark?s.isNtpThemeBackgroundDark=!0:s.isNtpThemeBackgroundDark=!1}c&&this.migrateBackgroundPreference(s.currentBackgroundImageType),s.openSettingsDialogFlyout=a[f.JW.showSettings],s.market=A.Rb.Locale,s.isAppLauncherEnabledByPolicy=a[f.JW.showAppLauncher],s.isCodexBingUpsellEnabledByPolicy=a[f.JW.codexBingUpsellEnabled];const k=a[f.JW.userChoices];O.YT.addOrUpdateTmplProperty("userPrefCount",k?k.length:"0");const $={};k?.reduce((t,e)=>(t[e.setting]=e,t),$);const P=$[f.JW.showQuickBrief];s.showQuickBrief=!1!==P?.value;const M=a[f.JW.widgetsRegion];let _=M;if(this.config.defaultOffForWidgets){const{enabled:t}=await(0,D.hb)()??{},e=t?.includes("msNtpExpBlockWidgetsPromotions");e||(_=await(0,it.TE)(_,async t=>{await this.settingsAPI.setPref(f.JW.widgetsRegion,t)},{selectedFeedDisplaySetting:s.selectedFeedDisplaySetting},{defaultOff:this.config.defaultOffForWidgets}))}if(this.config.enableWidgetsRegion){this.isWidgetPreferenceAvailable=f.JW.widgetsRegion in a;const{enabled:t}=await(0,D.hb)()??{},e=t?.includes("msNtpExpBlockWidgetsPromotions");e?O.YT.addOrUpdateTmplProperty("wgt_edge_flight","1"):_=await(0,it.TE)(_,async t=>{await this.settingsAPI.setPref(f.JW.widgetsRegion,t)},{selectedFeedDisplaySetting:s.selectedFeedDisplaySetting},{enableWidgetsWPOProm:this.config.enableWidgetsWPOProm,defaultOnInPartialView:this.config.enableWidgetsInPartialView,defaultOff:!0});const n=(0,d.Lg)().getObject(this.initialWidgetsPrefKey);null!=n&&(_=n,this.executeSettingsChange(f.JW.widgetsRegion,n),(0,d.Lg)().removeItem(this.initialWidgetsPrefKey),O.YT.addOrUpdateTmplProperty("wgtRestoredInitial",n?"1":"0")),s.enableWidgetsRegion=!!_,this.overrideWidgetsQSP||(this.overrideWidgetsQSP=s.enableWidgetsRegion),s.disableWidgetsToggle=x.T3.IsHeroNTP}const E=await(0,it.Ac)();if(O.YT.addOrUpdateTmplProperty("wgt_src",E??f.U6.default),O.YT.addOrUpdateTmplProperty("widgetsPref",_?"1":"0"),!this.config.enableWidgetsRegion&&M){const t=(0,d.Lg)().getObject(this.initialWidgetsPrefKey);null==t&&((0,d.Lg)().setObject(this.initialWidgetsPrefKey,M),O.YT.addOrUpdateTmplProperty("wgt_initial_stored",M?"1":"0")),s.enableWidgetsRegion=!1,this.executeSettingsChange(f.JW.widgetsRegion,!1),O.YT.addOrUpdateTmplProperty("wgtDisabled"),["headingsonly","off"].includes(s.selectedFeedDisplaySetting)&&(s.selectedFeedDisplaySetting="peek",this.updateFeedsPreference(s.selectedFeedDisplaySetting,this.getFeedUpdateReason(r.MR.ntpVisibleTab)),O.YT.addOrUpdateTmplProperty("wgtFeedPeek"))}if(s.isCompanyLogoEnabledByPolicy=void 0===a[f.JW.companyLogoEnabled]||a[f.JW.companyLogoEnabled],s.companyLogoBackplateColor=a[f.JW.companyLogoBackplateColor],f.JW.verticalTabsCollapsed in a&&(s.verticalTabsCollapsed=a[f.JW.verticalTabsCollapsed]),f.JW.verticalTabsOpened in a&&(s.verticalTabsOpened=a[f.JW.verticalTabsOpened]),f.JW.hideDefaultTopSites in a){s.hideDefaultTopSites=a[f.JW.hideDefaultTopSites];const t=this.getGroupPolicy(u,f.JW.hideDefaultTopSites);t.isEnabled&&"ENFORCED"===t.enforcement&&(s.hideDefaultTopSitesManagedByPolicy=!0)}if("onscroll"===s.selectedFeedDisplaySetting&&(s.selectedFeedDisplaySetting="headingsonly",setTimeout(()=>{const t=window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.setPref(f.JW.feeds,s.selectedFeedDisplaySetting,Q.n)})),this.config.showPulse){const t=$[R.K5.enable_pulse];s.pulseEnabled=!t||t.value}if(this.config.topSitesOpenInNewTab){["always","peek"].includes(s.selectedFeedDisplaySetting)?s.openInNewTab=!0:s.openInNewTab=!1;const t=$[R.K5.topsites_open_in_new_tab];t&&(s.openInNewTab=t.value),O.YT.addOrUpdateTmplProperty("openInNewTab",s.openInNewTab?"1":"0")}if(this.config.copilotSuggestionsToggle){s.showSuggestions=!0;const t=$[R.K5.show_copilot_suggestions_toggle];t&&(s.showSuggestions=t.value),O.YT.addOrUpdateTmplProperty("showCopilotSuggestions",s.showSuggestions?"1":"0")}O.YT.addOrUpdateTmplProperty("wgEnabled",s.greetingEnabled?"1":"0"),this.isFreModalBackground()&&(s.selectedFeedDisplaySetting="headingsonly",O.YT.addOrUpdateTmplString("FREModalBackgroundLoaded:1"));let F=T._3.getQueryParameterByName("feedDisplay",(0,z.iA)());F=x.T3.IsHeroNTP&&!this.config.heroNoPromoLayout||x.T3.IsUCBased?"always":F;const N=(0,C.dr)(s.market);x.T3.IsUCBased&&!N&&(F="off"),F&&["always","peek","headingsonly","onscroll","off"].indexOf(F)>-1&&(s.userSelectedFeedDisplaySetting=s.selectedFeedDisplaySetting,s.selectedFeedDisplaySetting=F,(0,D.Dl)(R.XE.Lpo,"feeds",f.go[s.userSelectedFeedDisplaySetting],f.go[s.selectedFeedDisplaySetting],(new Date).getTime(),this.config.enableOptimizedTmpl),O.YT.addOrUpdateTmplString("feedDisplay:1"),O.YT.addOrUpdateTmplString(`originalLayout:${s.userSelectedFeedDisplaySetting}`));if(!((0,j.S)()&&g?.backgroundSelectionMetadata&&!g?.changeBackgroundDaily||A.Rb.EdgeNTPHeader?.backgroundImage?.userSelected)&&(0,z.iA)().includes("ocid=wind_spot_2")&&(0,z.iA)().includes("segment=videos")&&(s.displayBackgroundImageType="hero"),"headingsonly"===s.selectedFeedDisplaySetting){const t=$[R.K5.dismiss_scroll_down_button];t&&(s.isScrollDownButtonDismissed=!!t.value)}(0,j.S)()&&(this.config.enableWidgetsUpsellButton?(0,o.Hg)(a[f.JW.userNurturingUpdated]):(0,o.U9)(a[f.JW.userNurturingUpdated]));const L=window.location&&window.location.search?.includes("mock-ntp-header=1");(0,j.S)()||L||(t=>{const e=A.Rb.EdgeNTPHeader;e&&(tt(f.JW.selectedFeedPivot,e.selectedFeedPivot,t.selectedFeedPivot||Z),tt(f.JW.quickLinksDisplaySetting,f.Pl[e.quickLinkOption],t.selectedQuickLinksDisplaySetting),tt(f.JW.backgroundImageTypePolicy,f.hY[e.backgroundImageTypePolicy],f.hY[t.backgroundImageTypePolicy]),x.T3.IsHeroNTP||(tt(f.JW.layout,f.E3[e.layoutMode],t.currentLayout),tt(f.JW.feeds,e.newsFeedDisplay,t.selectedFeedDisplaySetting)))})(s),$[f.JW.feeds]?.value||await this.checkForRubyDefaultLayoutPromotion(s),i(s),(0,j.S)()||O.YT.addOrUpdateTmplProperty("ssrChromiumSettingLayout",s.selectedFeedDisplaySetting)}else y.v.logError("Failed to get saved layout preferences."),i(e)})}else(0,m.vV)(w.Syp,"getAllPrefs API not available"),i(e)})}registerOnConfigDataChangedCallback(){this.settingsAPI&&this.settingsAPI.onConfigDataChanged&&this.settingsAPI.onConfigDataChanged.addListener(t=>{if(t){const e=t[r.qs.inPageSearchBoxType];e!==r.I4.redirect&&e!==r.I4.bing||s.U.updateConfigDataChanged.getActionSender(this).send(e)}})}registerOnPrefsChangeCallback(){this.settingsAPI&&this.settingsAPI.onPrefsChanged&&this.settingsAPI.onPrefsChanged.addListener(t=>{if(!this.didLayoutModeChangeInCurrentTab){const t=(0,d.Lg)().getObject(this.layoutChangeInitiatorKey);if(t===r.MR.wpoPrerenderTab||t===r.MR.ntpVisibleTab)return}const e=t[0];if(window.isSSREnabled&&e.key===f.JW.userChoices){const t=e.value;if(t.sort((t,e)=>e.timestamp-t.timestamp),t[0].setting===R.K5.tscollapsed&&"wpo"===t[0].source)return}this.updateUIForSettingsChange(e.key,e.value,t)})}async updateUIForSettingsChange(t,e,n){const i=await this.getPageSettingsStateAsync(),o={...i};if(this.hasFeedDisplaySettingChanged=i?.selectedFeedDisplaySetting!==o?.selectedFeedDisplaySetting,t===f.JW.backgroundImageTypePolicy&&(0,b.J)(),t===f.JW.feeds&&n){const e=this.getGroupPolicy(n,t);e.isEnabled&&"ENFORCED"===e.enforcement||this.isContentFeedManagedByAdminPortal()?o.isContentFeedManagedByPolicy=!0:o.isContentFeedManagedByPolicy=!1}if(t===f.JW.layout){const t=f.E3[e];if(o.currentLayout=t,o.userSelectedLayout&&(o.userSelectedLayout=t),e!==f.IT.custom&&(o.hideDefaultTopSites=!!o.hideDefaultTopSitesManagedByPolicy||f.c_[t].hide_promoted_links,o.currentBackgroundImageType=f.c_[t].current_background_image_type,o.selectedFeedDisplaySetting=f.c_[t].feeds_position,o.userSelectedFeedDisplaySetting&&(o.userSelectedFeedDisplaySetting=f.c_[t].feeds_position),o.selectedQuickLinksDisplaySetting=i.selectedQuickLinksDisplaySetting,o.imageOfTheDayEnabled="off"!==o.currentBackgroundImageType),"visible"===document.visibilityState&&n)for(const t of this.preferenceChangeCallbacks)t(n,o)}else{switch(t){case f.JW.hideDefaultTopSites:{const t=this.getGroupPolicy(n,f.JW.hideDefaultTopSites),i=t.isEnabled&&"ENFORCED"===t.enforcement;o.hideDefaultTopSites=e,o.hideDefaultTopSitesManagedByPolicy=i;break}case f.JW.quickLinksDisplaySetting:o.selectedQuickLinksDisplaySetting=f.Pl[e];break;case f.JW.showQuickBrief:o.showQuickBrief=e;break;case f.JW.imageOfTheDay:this.chromiumBackgroundPrefType===r.hq.BOOLEAN&&(o.currentBackgroundImageType=e?"imageAndVideo":"off",o.displayBackgroundImageType=void 0,o.imageOfTheDayEnabled="off"!==o.currentBackgroundImageType);break;case f.JW.currentBackgroundImageType:if(o.currentBackgroundImageType=e,o.displayBackgroundImageType=void 0,o.imageOfTheDayEnabled="off"!==o.currentBackgroundImageType,o.isNtpThemeBackgroundDark=void 0,"theme"===o.currentBackgroundImageType&&i.ntpTheme){const t=i.ntpTheme;t.imageUrl||t.backgroundColorRgba||(o.imageOfTheDayEnabled=!1),!t.usingDefaultTheme&&t.isNtpBackgroundDark?o.isNtpThemeBackgroundDark=!0:o.isNtpThemeBackgroundDark=!1}this.settingsAPI.setPref(f.JW.imageOfTheDay,o.imageOfTheDayEnabled,Q.n);break;case f.JW.customBackgroundImageInfo:{const t=e,n={hasImage:t[r.of.hasImage],resourceUrl:t[r.of.resourceUrl],timestamp:t[r.of.timestamp]};o.customBackgroundImageInfo=n;break}case f.JW.feeds:o.selectedFeedDisplaySetting=e,o.userSelectedFeedDisplaySetting&&(o.userSelectedFeedDisplaySetting=e);break;case f.JW.greeting:o.greetingEnabled=e;break;case f.JW.showSettings:o.openSettingsDialogFlyout=e;break;case f.JW.showAppLauncher:o.isAppLauncherEnabledByPolicy=e;break;case f.JW.widgetsRegion:o.enableWidgetsRegion=e,this.overrideWidgetsQSP||(this.overrideWidgetsQSP=e)}if("visible"===document.visibilityState&&n)for(const t of this.preferenceChangeCallbacks)t(n,o)}if(t===f.JW.verticalTabsCollapsed&&(o.verticalTabsCollapsed=e),t===f.JW.verticalTabsOpened&&(o.verticalTabsOpened=e),t===f.JW.userChoices){const t=e.reduce((t,e)=>(t[e.setting]=e,t),{});this.config.showPulse&&t[R.K5.enable_pulse]&&(o.pulseEnabled=!!t[R.K5.enable_pulse].value),this.config.topSitesOpenInNewTab&&t[R.K5.topsites_open_in_new_tab]&&(o.openInNewTab=!!t[R.K5.topsites_open_in_new_tab].value),this.config.copilotSuggestionsToggle&&t[R.K5.show_copilot_suggestions_toggle]&&(o.showSuggestions=!!t[R.K5.show_copilot_suggestions_toggle].value),t[R.K5.dismiss_scroll_down_button]&&(o.isScrollDownButtonDismissed=!!t[R.K5.dismiss_scroll_down_button].value)}t===f.JW.quickLinksDisplaySetting&&(o.selectedQuickLinksDisplaySetting=f.Pl[e]),t===f.JW.companyLogoEnabled&&(o.isCompanyLogoEnabledByPolicy=e),(0,g.A)(o,i)&&t!==f.JW.widgetsRegion||p.G.updateLayout.getActionSender(this).send(o)}defineChromiumKeys(t){const e={};let n;for(n of t)e[n.key]=n.value;return e}getGroupPolicy(t,e){const n=t.find(t=>t.key===e),i={key:n.key,value:n.value,type:n.type};return n&&n.controlledBy&&n.enforcement?(i.isEnabled=!0,i.enforcement=n.enforcement,i.controlledBy=n.controlledBy):i.isEnabled=!1,i}getPromoFormParamList(){return this.config&&this.config.promoFormParamList?this.config.promoFormParamList:null}setContentDisabled(t){t.greetingEnabled=!1,t.selectedFeedDisplaySetting="off",t.userSelectedFeedDisplaySetting&&(t.userSelectedFeedDisplaySetting="off"),t.currentLayout="custom",t.userSelectedLayout&&(t.userSelectedLayout="custom"),t.imageOfTheDayEnabled=!1,t.currentBackgroundImageType="off"}isPromotedTopSitesPreferenceAvailable(){return this.isWindowsIndexerPromotedTopSitesPreferenceAvailable}isMinimumVisitAffiliateSitesPreferenceAvailable(){return this.isMinimumVisitAffiliateSitePreferenceAvailable}isWidgetsPreferenceAvailable(){return this.isWidgetPreferenceAvailable}shouldOverrideWidgetsQSP(){return this.overrideWidgetsQSP}migrateBackgroundPreference(t){this.settingsAPI.setPref(f.JW.imageOfTheDay,"off"!==t,Q.n),this.settingsAPI.setPref(f.JW.currentBackgroundImageType,t,Q.n)}overrideLayoutPreferenceForPolicy(){this.settingsAPI.setPref(f.JW.layout,f.IT.custom,Q.n)}wpoPromoteNewLayout(t,e){this.updateLayout(t,e)}wpoPromoteNewFeedDisplaySetting(t,e){this.updateFeeds(t,e,R.XE.Wpo)}updatePrefTSCollapsed(t){t===R.sL.WPO_CLOSE?this.saveTsCollapsed(R.Wl.WPO_CLOSED):t===R.sL.WPO_OPEN?this.saveTsCollapsed(R.Wl.WPO_OPENED):t===R.sL.MANUAL?this.saveTsCollapsed(R.Wl.MANUAL):t===R.sL.REVERT&&this.saveTsCollapsed(R.Wl.REVERT_WPO_CLOSE)}saveTsCollapsed(t){const e={setting:R.K5.tscollapsed,source:"updatePrefTSCollapsed",timestamp:(new Date).getTime(),value:t};M.Q.savePreferenceSetting(R.K5.tscollapsed,e),O.YT.addOrUpdateTmplProperty(R.K5.tscollapsed,`${e.value}|${e.source}|${e.timestamp}`)}onlyUpdateQuickLinksDisplaySetting(t){this.executeSettingsChange(f.JW.quickLinksDisplaySetting,t)}logCallStack(t){const e=(new Error).stack,n=(0,X.$K)(e);n&&O.YT.addOrUpdateTmplProperty(t+"CallStack",n)}async isInEdgeFeature(){if(await(0,et.Rd)()){const t=await(0,et.SS)();if(this.isPreCheckPassed=t,!t)return!0}return!1}async shouldReTriggerCoachMark(t,e){if(!(0,j.S)())return!1;const n=(0,d.Lg)().getObject(this.promotion);if(!n||!n.time)return O.YT.addOrUpdateTmplProperty("reTriggerCoachMarkFailedNolyp","1"),!1;const i=await(0,o.DG)("layoutPromotion");if(Date.now()-i<=2592e6)return O.YT.addOrUpdateTmplProperty("reTriggerCoachMarkFailedShown","1"),!1;if(Date.now()-n.time>3e3)return O.YT.addOrUpdateTmplProperty("reTriggerCoachMarkFailedOverTime",n.time.toString()),!1;const{isPromoted:r,muid:s,coachMarkShown:a,recommendedLayout:c,recommendedFeedDisplaySetting:u}=n,l=x.T3.UserId,h=c&&c!==t||u&&e!==u;return!r||a||s!==l||h?(O.YT.addOrUpdateTmplProperty("reTriggerCoachMarkFailed",`${r?"1":"0"}|${s===l?"1":"0"}|${a?"1":"0"}|${h?"1":"0"}`),!1):(O.YT.addOrUpdateTmplProperty("reTriggerCoachMark",n.time.toString()),!0)}async isFRE(){const t=await(0,D.KQ)(),e=await(0,D.nX)();if(!t&&!e)return O.YT.addOrUpdateTmplProperty("noProfAndDeviceFreTime","1"),!1;const n=1728e5,i=Date.now();return t&&i-t<=n?(O.YT.addOrUpdateTmplProperty("isFRE",`${i}|newProfFreTime:${t}`),!0):e&&i-e<=n?(O.YT.addOrUpdateTmplProperty("isFRE",`${i}|newDevFreTime:${e}`),!0):(O.YT.addOrUpdateTmplProperty("notFRE",`${i}|${t}|${e}`),!1)}async shouldApplyPromotion(t,e,n,i,o){const{muid:s}=n,{fromLayout:a,fromFeed:c,knobIdx:u,knobIdxPrefix:d}=n.layoutPromotionData;if(c&&c.includes(W.headingsonly+"")&&(!o||x.T3.IsHeroNTP))return O.YT.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.Y0.widgetsRegionDisabled),!1;const l=a&&!a.includes(B[t]+""),h=c&&!c.includes(W[e]+""),f=s&&s!==x.T3.UserId;if(i)return O.YT.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.Y0.isInEdgeExperience),!1;if(f)return O.YT.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.Y0.userMuidMisMatch),!1;if(l){if(this.config.enablePerfImprove){this.isLpo()||(0,_.Is)(null)}return O.YT.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.Y0.isNotOneOfFromLayouts),!1}if(h){if(this.config.enablePerfImprove){this.isLpo()||(0,_.Is)(null)}return O.YT.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.Y0.isNotOneOfFromFeeds),!1}return u&&d&&u.startsWith(d)?await this.isInEdgeFeature()?(O.YT.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.Y0.isENPCheckFailed),!1):await this.isFRE()?(O.YT.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.Y0.isFRE),!1):!A.Rb.CurrentFlightSet.has("prg-forcenoads")&&!await(0,D.Il)()||(O.YT.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.Y0.isInEdgeNoAdsFlight),!1):((0,_.Is)(null),O.YT.addOrUpdateTmplProperty("applyLayoutPromotionFailed",r.Y0.isNotInPromotionV2),!1)}saveLayoutPromotionData(t){if((0,j.S)()){const e=this.getCurrentState(),n=t[0].properties.fromFeeds&&t[0].properties.fromFeeds.includes("headingsonly");if("headingsonly"===e.selectedFeedDisplaySetting&&n&&(!e.enableWidgetsRegion||x.T3.IsHeroNTP))return;const i=t[0].properties,r=O.YT?.getRequestId?.()??"";this.storePromotionSignalTransition(i,r);const o={...i,clientReceivedTimestamp:(new Date).getTime(),usermuidWhenReceived:x.T3.UserId??"",requestIdWhenReceived:r,isPrerenderWhenReceived:A.Rb.IsPrerender??!1};H.getRecommendedLayout(this.config,e.currentLayout,e.selectedFeedDisplaySetting,o).then(t=>{t?H.storeWpoLayoutPromotionToBrowser(t):(0,_.Is)(null)})}}storePromotionSignalTransition(t,e){const n=(0,d.Lg)().getObject(this.layoutPromotionSignalTransition),i=x.T3.UserId??"";n&&n.knobIdx===t.knobIdx||(0,d.Lg)().setObject(this.layoutPromotionSignalTransition,{clientReceivedTime:(new Date).getTime(),usermuid:i,requestIdWhenReceived:e,knobIdx:t.knobIdx})}isLpo(){let t=T._3.getQueryParameterByName("feedDisplay",(0,z.iA)());return t=x.T3.IsHeroNTP?"always":t,!!t}async checkForRubyDefaultLayoutPromotion(t){"ruby"===x.T3.UxMode?("peek"===t.selectedFeedDisplaySetting&&this.config.promoteDefaultPeekToFull?(this.setDefaultLayout(t,"peek","always",R.XE.rubyDefault),(0,_.Mr)()):this.config.revertPeekToFullPromotion&&(await this.revertPeekToFullPromotion(t),(0,D.Dl)(R.XE.rubyDefault,"feeds",f.go.always,f.go.peek,Date.now(),this.config.enableOptimizedTmpl)),(0,D.kg)()):await this.revertPeekToFullPromotion(t)}setDefaultLayout(t,e,n,i){t.selectedFeedDisplaySetting=n,this.executeSettingsChange(f.JW.feeds,n),i&&(0,D.Dl)(i,"feeds",f.go[e],f.go[n],Date.now(),this.config.enableOptimizedTmpl)}async revertPeekToFullPromotion(t){const e=await(0,_.V$)();"1"===e?.rptf&&((0,_.Mr)(!1),(0,D.t1)(),this.setDefaultLayout(t,"always","peek"))}isFreModalBackground(){const t=T._3.getQueryParameterByName("isFREModalBackground",(0,z.iA)()),e=T._3.getQueryParameterByName("startpage",(0,z.iA)());return t&&e&&!A.Rb.IsPrerender}}var at=n(24678);class ct{reduce(t,e){if(!t)return{...f.lk,contentSource:0,isLoadCompleted:!1,greetingEnabled:!0,openSettingsDialogFlyout:!1,inPageSearchBoxType:null,market:A.Rb.Locale};if(!e)return t;let n;return at.n.handleAction(e,s.U.pageLayoutStateLoaded,e=>{n={...t,...e,isLoadCompleted:!0}}),at.n.handleAction(e,p.G.updateLayout,e=>{n={...t,...e}}),at.n.handleAction(e,s.U.updateLocalStorage,e=>{n={...t,sdCardSettings:e}}),at.n.handleAction(e,s.U.loadLocalStorage,e=>{n={...t,sdCardSettings:e}}),at.n.handleAction(e,s.U.updatePrimaryAccountInfo,e=>{n={...t,primaryAccountInfo:e}}),at.n.handleAction(e,s.U.updateConfigData,e=>{n={...t,configData:e}}),at.n.handleAction(e,s.U.updateConfigDataChanged,e=>{n={...t,inPageSearchBoxType:e}}),at.n.handleAction(e,s.U.updateTopSitesQuickLinkEndMarginUsedPadding,e=>{n={...t,topSitesQuickLinkEndMarginUsedPadding:e}}),at.n.handleAction(e,s.U.marketUpdated,e=>{n={...t,market:e}}),at.n.handleAction(e,s.U.updateNtpTheme,e=>{n={...t,ntpTheme:e}}),at.n.handleAction(e,s.U.updateWPOLayoutPromotion,(e,i)=>{n={...t,isLayoutWPOPromoted:e,layoutPromotionType:i}}),at.n.handleAction(e,s.U.updateWPOTopsitesPromotion,e=>{n={...t,isTopsitesWPOPromoted:e}}),at.n.handleAction(e,s.U.updateWPOLayoutPromotionSource,e=>{n={...t,promotionSource:e}}),at.n.handleAction(e,s.U.updateWPOPromotionCoachMark,e=>{n={...t,coachmark:e}}),at.n.handleAction(e,s.U.updateFeedStateOnScroll,e=>{n={...t,isFeedStateChangedOnScroll:e}}),n||t}}var ut=n(95879);const dt={experienceConfigSchema:{}}},20878:function(t,e,n){n.d(e,{_:function(){return h}});var i=n(65022),r=n(84080),o=n(98216),s=n(81618);const a=/^fe-b\S+fe-b$/,c=/^fe-repeat\S+fe-repeat$/,u=t=>t.nodeType===Node.COMMENT_NODE&&(a.test(t.textContent)||c.test(t.textContent)),d=(t,e="")=>{const n=[];for(const i in t){const r=t[i],o=e+">"+`[nodeidx:${i}]${r.nodeName}`;if(u(r))n.push({text:r.textContent,path:o.toLowerCase()});else{const t=l(r,o);n.push(...t)}}return n},l=(t,e="")=>{const n=[],i=e+">"+t.nodeName;if(t.shadowRoot?.childNodes.length){const e=d(t.shadowRoot?.childNodes,i+">shadowRoot");n.push(...e)}if(t.childNodes){const e=d(t.childNodes,i);n.push(...e)}return n},h=(t,e)=>{if(!window.isSSRCompleted)return;const n=(0,r.C)(performance.now());let a=!1;const c=()=>d("10s timeout"),u=()=>d("beforeunload");function d(s){if((0,r.C)(performance.now())-n<1e4||a||e.wasSet())return;a=!0,window.removeEventListener("beforeunload",u);const c=performance.now(),d=l(t,"body"),h=performance.now()-c;d.length&&o.YT.sendAppErrorEvent({...i.T1W,message:"SSR unhydrated marker detected.",pb:{...i.T1W,customMessage:`${d.length} unhydrated marker detected. Trigger condition: ${s}.`+(d.length>10?`Unhydrated markers are truncated due to lenghth ${d.length} > 10.`:""),hydrationMarkers:d.slice(0,10),scanCost:h}})}(0,s.b)(()=>window.requestIdleCallback(c),1e4),window.addEventListener("beforeunload",u)}},21599:function(t,e,n){var i,r;n.d(e,{R:function(){return r},z:function(){return i}}),function(t){t.FeedLayoutPromotions="FeedLayoutPromotions",t.FreOverlay="FreOverlay",t.NurturingFunctional="NurturingFunctional",t.NurturingPromotions="NurturingPromotions"}(i||(i={})),function(t){t.Engaged="Engaged",t.Dismissed="Dismissed",t.Ignored="Ignored"}(r||(r={}))},21629:function(t,e,n){n.d(e,{X:function(){return s},E:function(){return o}});var i=n(93468),r=n(65022);const o=t=>{if(!t)return;const e=(t=>{try{return{success:!0,data:JSON.parse(t)}}catch(t){return{success:!1,error:t}}})(t);if(e.success)return e.data;(0,i.vV)(r.YHC,"Failed to parse MSN_KV",`Failed to parse MSN_KV: ${t}`,{error:e.error,msn_kv:t})},s=(t,e)=>{if(91===e)return t.description?"DTS_91_3":"DTS_91_1"}},22011:function(t,e,n){n.d(e,{U:function(){return x}});var i=n(56911),r=n(20205),o=n(92011),s=n(38493),a=n(94061),c=n(73691),u=n(30817),d=n(93468),l=n(65022),h=n(89151),f=n(13053),p=n(23768),g=n(82238),m=n(11372),w=n(70177);class y extends Event{constructor(t){super(y.type,{bubbles:!0,composed:!0}),this.complete=t}static isPendingTask(t){return t.type===y.type&&"function"==typeof t.complete?.then}}y.type="pending-task";var v=n(47149),b=n(77246),S=n(87137),C=n(71776),k=n(78981);const T="props-token";class x extends o.L{constructor(){super(...arguments),this.ensureObservableBeforeConnect=!1,this.hydratable=!1,this.isSSRRendered=!1,this.useTTSRMarker=!1,this.needPendingTask=!1}connectedCallback(){this.initializeCore().then(()=>this.ttvrEnd=this.perfTimeline?.startMeasure("render").endMeasure)}async initializeCore(){const t=this.getExperienceType(),e=this.perfTimeline=(0,a.hB)(t,this.instanceId);if(this.initStart=e&&(()=>this.initEnd=e.startMeasure("init").endMeasure),this.fetch=(0,c.xS)({perfTimeline:e}),(0,u._P)("WCE.Count"),(0,b.S)())this.hydratable=this.hasAttribute("defer-hydration")||this.hasAttribute("needs-hydration"),this.isSSRRendered=this.hasAttribute("needs-hydration"),this.useTTSRMarker=this.hasAttribute("use-ttsr")||this.hasAttribute("needs-hydration"),this.initializeAsync();else{const t=this.initializeOnServerSide();this.needPendingTask&&this.dispatchEvent(new y(t))}}async initializeOnServerSide(){this.initStart?.(),this.needPendingTask=!1;const t=this.getExperienceType();try{const t=this.getConfigRef();if(!this.config){let e;if("string"!=typeof t)try{e=r.L.getConfigSync(t)}catch(t){}e||(this.needPendingTask=!0,e=await r.L.getConfig(t)),this.config=e.properties}if(this.strings=this.config.localizedStrings,!this.telemetryObject){const t=this.getTelemetryContract();this.telemetryObject=new v.$(t)}const e=this.experienceConnected();e&&(this.needPendingTask=!0,await e),super.connectedCallback(),this.shadowDomPopulated(),this.initEnd?.()}catch(e){if(this.initEnd?.({customSuffix:"error"}),(0,d.c_)(e,l.bGx,`Exception web component experience(${t}) initializeOnServerSide.`,`ssrLayout:${window.ssrLayoutState?.selectedFeedDisplaySetting};edgeHeader:${JSON.stringify(window.edgeNTPHeader)}`),this.lifecycleExceptionToThrowErrorOnServerSide)throw e.message=`InitializeOnServerSide exception in ${t}: ${e.message}`,e}}async initializeAsync(){this.hydratable&&await(0,w.mb)(this),this.initStart?.(),this.reportStartTimeToMilestoneConnector(p.m.updateVisuallyReadyTiming);const t=this.getExperienceType();try{const e=this.getConfigRef();if(!this.config){const t=await r.L.getConfig(e);this.config=t.properties}if(this.strings=this.config.localizedStrings,!this.telemetryObject){const t=this.getTelemetryContract();this.telemetryObject=new v.$(t)}const{stalenessInfo:n}=this.config;n&&n.isStaleCheckRequired&&(0,C.kn)({experienceType:t,thresholdMinutes:n.staleThreshold,criticalCallback:()=>this.prerenderRefreshCritical(),delayCallback:()=>this.prerenderRefresh(),isRequiredForInitialRendering:n.isRequiredForInitialRendering}),this.ensureObservableBeforeConnect&&this.$fastController.bindObservables();const i=this.experienceConnected();if(i){const t=this.hydratable&&w.Pj?(0,w.B1)(`${this.getExperienceType()}:experienceConnected`):void 0;t?.start(),await i,t?.markEnd()}if(this.hydratable){const t=w.Pj?(0,w.B1)(`${this.getExperienceType()}:beforeHydration`):void 0;t?.start(),await this.beforeHydration(),t?.markEnd()}super.connectedCallback(),this.shadowDomPopulated(),this.hydratable&&await this.afterHydration(),this.perfTimeline&&(0,a.HA)(this,this.perfTimeline,k.P),this.initEnd?.()}catch(e){(0,d.c_)(e,l.bGx,`Exception web component experience initializeAsync. ExperienceType: ${t}`,`ssrLayout:${window.ssrLayoutState?.selectedFeedDisplaySetting};edgeHeader:${JSON.stringify(window.edgeNTPHeader)}`),this.processExperienceInitializeError(),this.initEnd?.({customSuffix:"error"})}}experienceConnected(){}beforeHydration(){}afterHydration(){}shadowDomPopulated(){}prerenderRefreshCritical(){return Promise.resolve(void 0)}prerenderRefresh(){}processExperienceInitializeError(){}getConfigRef(){return{instanceSrc:this.instanceSrc,experienceType:this.getExperienceType(),sharedNs:this.sharedNs}}getTelemetryContract(){return{type:m.MJ.Module,name:this.getExperienceType()}}getApproxTTVRValue(t){const e=(0,u.ZF)();if(this.useTTSRMarker&&e.isSSRCompleted)return e[h.wL+(t||this.getExperienceType())]||e[h.wL+"Complete"]}markVisuallyReady(t,e){const n=this.getApproxTTVRValue();e??(e=void 0===n),t=n||t;const i=(0,h.yi)(this.getExperienceType(),!1,t,e);return this.reportEndTimeToMilestoneConnector(p.m.updateVisuallyReadyTiming,t),this.ttvrEnd?.({endTime:t}),this.visualReadinessCallback?.(),i}markVisuallyReadyRaf(t){(0,f.D)(()=>this.markVisuallyReady(t))}reportStartTimeToMilestoneConnector(t){this.reportTimeToMilestoneConnector(t,performance.now())}reportEndTimeToMilestoneConnector(t,e){this.reportTimeToMilestoneConnector(t,void 0,e||performance.now())}reportTimeToMilestoneConnector(t,e,n){const i=(0,g.Kl)();i&&t.getActionSender(i).send({experienceType:this.getExperienceType(),experienceInstance:this.instanceId,startTime:e,endTime:n})}attributeChangedCallback(t,e,n){if(super.attributeChangedCallback(t,e,n),t===T){const t=(0,S._)(n);Object.assign(this,t)}}}(0,i.Cg)([(0,s.CF)({attribute:"config-instance-src"})],x.prototype,"instanceSrc",void 0),(0,i.Cg)([(0,s.CF)({attribute:"config-shared-ns"})],x.prototype,"sharedNs",void 0),(0,i.Cg)([(0,s.CF)({attribute:"instance-id"})],x.prototype,"instanceId",void 0),(0,i.Cg)([(0,s.CF)({attribute:T})],x.prototype,"propsToken",void 0)},22272:function(t,e,n){function i(t,e){if(!t||!e)throw new Error("PlacementInteractionsThrottle: Invalid parameters.");return(n,i)=>{if(!n)return!1;if(!i)return!0;let r;return Object.values(i).flat().forEach(e=>{e?.type===t&&e?.ts&&(!r||r.ts<e.ts)&&(r=e)}),!(r&&Date.now()-r.ts<=e)}}function r(t,e,n){return(i,r)=>{if(!i)return!1;let o=r?.[i.id]||[];const{relatedPlacementIds:s}=n||{};if(s?.length){const t=s.filter(t=>t!==i.id).flatMap(t=>r?.[t]||[]);o=[...o,...t]}if(!o.length)return!0;let a;o.forEach(e=>{e?.type===t&&e?.ts&&(!a||a.ts<e.ts)&&(a=e)});return!!(!a||a.ts&&Date.now()-a.ts>e)}}n.d(e,{A:function(){return r},r:function(){return i}})},22309:function(t,e,n){n.d(e,{H:function(){return r}});var i=n(6727);class r{createPageViewPayload(t){if(!t)return;const e=t&&t.page,n=e&&e.content,r=t&&t.user,o={rnd:(0,i.Ln)(),udc:!0};return e&&(o["pg.n"]=e.name,o["pg.t"]=e.type,o["pg.c"]=e.config,o["pg.p"]=e.product,o.rf=e.referral,o.tp=e.url,o.cvs=e.canvas,e.consentChanged&&(o.ctsa=e.consentChanged)),n&&(o.di=n.domainId,o["st.dpt"]=n.category,o["st.sdpt"]=n.subcategory,o.subcvs=n.vertical),t&&(o.lng=t.locale&&t.locale.mkt,t.request&&(o.rid=t.request.requestId,o.activityId=t.request.activityId),t.browser&&(o["d.imd"]=t.browser.isMobile,o.scr=t.browser.screenSize,o.anoncknm=t.browser.anoncknm)),r&&(o.issso=r.isSso,o.aadState=r.aadState),o}}},22360:function(t,e,n){function i(t){return c(t,t=>t.configRef.experienceType,t=>t.experienceType,null)}function r(t){return c(t,t=>t.configRef)}function o(t){return c(t,null,t=>t.href,t=>t)}function s(t,e){return c(t,t=>`${a(t.configRef)}_${e||t.instanceId||""}`,t=>`${t.experienceType}_${t.href}_${e||t.instanceId||""}`,t=>`${t}_${e||""}`)}function a(t){return`${t.experienceType}_${t.instanceSrc}_${t.sharedNs||""}`}function c(t,e,n,i,r){if(void 0===r&&(r=null),null!=t){if("string"==typeof t)return i&&i(t)||r;const o=t;if(o.configRef)return e&&e(o)||r;if(n)return n(t)||r}return r}n.d(e,{Dw:function(){return a},QH:function(){return r},Rq:function(){return s},dt:function(){return i},fJ:function(){return c},mA:function(){return o}})},23572:function(t,e,n){n.d(e,{Kq:function(){return s},aK:function(){return o},eQ:function(){return a}});var i=n(9192),r=n(33107);const o=(0,n(15098).L)(()=>(0,r.S9)("auth","auth")),s=t=>(0,i.YK)(`Auth.${t}`,{logStart:!0,logDuration:!0,firstTimeOnly:!0}),a=(t,e)=>(0,i.cE)(`Auth.${t}`,e,!0)},23768:function(t,e,n){n.d(e,{m:function(){return o}});var i=n(68480);class r{constructor(){this.updateHydrationComplete=new i.P("updateHydrationRenderComplete"),this.updateRiverHydrationComplete=new i.P("updateRiverHydrationRenderComplete"),this.updateAboveTheFoldVisuallyReady=new i.P("updateAboveTheFoldVisuallyReady"),this.updateBelowTheFoldTransitionStart=new i.P("updateBelowTheFoldTransitionStart"),this.updateExperienceLoadDeferralState=new i.P("updateExperienceLoadDeferralState"),this.updateExperienceCurrentState=new i.P("updateExperienceCurrentState"),this.updateExperiencePublicState=new i.P("updateExperiencePublicState"),this.updateExperienceRenderDeferralState=new i.P("updateExperienceRenderDeferralState"),this.updateInitTiming=new i.P("UpdateInitTiming"),this.updatePageComplete=new i.P("updatePageCompleteTiming"),this.updateRenderTiming=new i.P("UpdateRenderTiming"),this.updateVisuallyReadyTiming=new i.P("UpdateVisuallyReadyTiming"),this.updateStartLoadingTiming=new i.P("UpdateStartLoadingTiming"),this.updateMediaContentReadyTiming=new i.P("UpdateMediaContentReadyTiming"),this.updateDomCompleteTiming=new i.P("UpdateDomCompleteTiming"),this.updateMilestonePlugins=new i.P("updateMilestonePlugin")}resetInstance(){this.updateHydrationComplete.unregisterObservers(),this.updateRiverHydrationComplete.unregisterObservers(),this.updateAboveTheFoldVisuallyReady.unregisterObservers(),this.updateBelowTheFoldTransitionStart.unregisterObservers(),this.updateExperienceLoadDeferralState.unregisterObservers(),this.updateExperienceCurrentState.unregisterObservers(),this.updateExperiencePublicState.unregisterObservers(),this.updateExperienceRenderDeferralState.unregisterObservers(),this.updateInitTiming.unregisterObservers(),this.updatePageComplete.unregisterObservers(),this.updateRenderTiming.unregisterObservers(),this.updateVisuallyReadyTiming.unregisterObservers(),this.updateDomCompleteTiming.unregisterObservers(),this.updateMilestonePlugins.unregisterObservers(),o=new r}}let o=new r},23801:function(t,e,n){n.d(e,{E:function(){return p}});var i=n(23768),r=n(8092),o=n(82238),s=n(3371),a=n(41917),c=n(89388);function u(t,e){t.registerObserver(t=>{((t.params||[])[0]||[]).forEach(({deferralInfo:t,experienceType:n})=>{t&&n&&function(t,e,n){if(!t||!e||!(e.eventType in r.R$)||!e.experienceType&&!e.experienceGroup)return;const{eventType:i,experienceType:o}=e,u=o||e.experienceGroup,d=a.Z.get(u);if(d&&d.referencedDependentsDeferralMap){if(d.currentState<i){const e=d.referencedDependentsDeferralMap.get(i);e?e.size>0&&e.set(t,n):d.referencedDependentsDeferralMap.set(i,new Map([[t,n]]))}}else a.Z.set(u,{currentState:s.Y.notStarted,referencedDependentsDeferralMap:new Map([[i,new Map([[t,n]])]])}),o&&(0,c.r)(o,!0)}(n,t,e)})})}function d(){u(i.m.updateExperienceLoadDeferralState,s.Y.loadDeferred),u(i.m.updateExperienceRenderDeferralState,s.Y.renderDeferred),i.m.updateExperienceCurrentState.registerObserver(t=>{const e=[];if(((t.params||[])[0]||[]).forEach(({experienceType:t,currentState:n})=>{if(!t||!n)return;const i=a.Z.get(t);if(!i)return;i.currentState=n;const c=r.KB.get(n),u=c&&i.referencedDependentsDeferralMap.get(c);u&&u.forEach((t,n)=>{if(!n)return;const i=t===s.Y.loadDeferred?s.Y.resolvedForLoad:s.Y.resolvedForRender;e.push((0,o.bO)(n,i))})}),e.length){const t=(0,o.Kl)();t&&i.m.updateExperienceCurrentState.getActionSender(t).send(e)}})}var l=n(94444);let h=new Map;(0,l.x)(()=>{h=new Map});var f=n(83542);class p extends f.i{constructor(t,e,n,r,a,c,u){super(t,e,n,r,a,c,u),this.startObservers(),i.m.updateInitTiming.registerObserver(t=>this.updateExperienceTiming(t.params[0],s.Y.initialized)),i.m.updateRenderTiming.registerObserver(t=>this.updateExperienceTiming(t.params[0],s.Y.rendered)),i.m.updateVisuallyReadyTiming.registerObserver(t=>this.updateExperienceTiming(t.params[0],s.Y.visuallyReady)),i.m.updateStartLoadingTiming.registerObserver(t=>this.updateExperienceTiming(t.params[0],s.Y.startLoading)),i.m.updateMediaContentReadyTiming.registerObserver(t=>this.updateExperienceTiming(t.params[0],s.Y.mediaContentReady)),i.m.updateDomCompleteTiming.registerObserver(t=>this.updateExperienceTiming(t.params[0],s.Y.domComplete)),i.m.updateExperienceLoadDeferralState.registerObserver(t=>{const e=((t.params||[])[0]||[]).map(({experienceType:t,experienceGroup:e,experienceInstance:n})=>(0,o.bO)(t,s.Y.loadDeferred,e,n));e.length&&i.m.updateExperienceCurrentState.getActionSender(this).send(e)}),i.m.updateExperienceRenderDeferralState.registerObserver(t=>{const e=((t.params||[])[0]||[]).map(({experienceType:t,experienceGroup:e,experienceInstance:n})=>(0,o.bO)(t,s.Y.renderDeferred,e,n));e.length&&i.m.updateExperienceCurrentState.getActionSender(this).send(e)})}startObservers(){d(),i.m.updateExperienceCurrentState.registerObserver(t=>{((t.params||[])[0]||[]).forEach(t=>{t.currentState===s.Y.domComplete&&h.forEach((e,n)=>{let i=!0;const{DomCompleteDependencies:r,DomCompleteCallback:o}=e;for(const e of r.values()){const{dependencyId:{experienceType:n,experienceGroup:r,experienceNamespace:o}}=e;if(n&&n!==t.experienceType||r&&r!==t.experienceGroup||o&&o!==t.experienceInstance||(e.milestoneReached=!0),!e.milestoneReached){i=!1;break}}i&&(e.dependenciesMet=!0,o&&(h.delete(n),o()))})})})}updateExperienceTiming(t,e){t&&t.endTime&&i.m.updateExperienceCurrentState.getActionSender(this).send([(0,o.bO)(t.experienceType,e,t.experienceGroup,t.experienceInstance)])}}},24678:function(t,e,n){n.d(e,{n:function(){return o}});var i=n(68140),r=n(20368);class o{static handleAction(t,e,n){return!!o.endsWith(t.type+"",e.type)&&(n.apply(n,t.params),!0)}static handleActions(t,e,n){const i=t.type+"";return!!(0,r.A)(e,t=>o.endsWith(i,t.type))&&(n.apply(n,t.params),!0)}static safeHandleAction(t,e,n){if(!o.endsWith(t.type+"",e.type))throw"The action payload does not match the action type.";return n.apply(n,t.params),!0}}o.endsWith=String.prototype.endsWith?function(t,e){return t.endsWith(e)}:i.A},24685:function(t,e,n){n.d(e,{i:function(){return w}});var i=n(63418),r=n(12870),o=n(41820),s=n(98793),a=n(93468),c=n(65022),u=n(96851),d=n(6092),l=n(48172),h=n(51267),f=n(98216);const p="sptmarket_restored";async function g(t=!1){const e=(0,i.Ri)(o.bJ.sptmarket),n=(0,i.Ri)(p),s=await l.f.getPreferenceSetting(o.bJ.sptmarket,!1);if(f.YT.addOrUpdateTmplProperty("ImplicitMarketRestoredSync","1"),!e)return;const u=r.Rb.ClientSettings&&r.Rb.ClientSettings.market&&r.Rb.ClientSettings.market.detection?.type;let g;s&&s.value&&s.value.value?(g=s.value.value,"implicitExisting"!=u&&"implicitReset"!=u||(await l.f.savePreferenceSetting(o.bJ.sptmarket,{setting:o.bJ.sptmarket,source:"ntp",timestamp:(new Date).getTime(),value:e}),g=e)):"implicitExisting"!=u&&"implicitNew"!=u||(await l.f.savePreferenceSetting(o.bJ.sptmarket,{setting:o.bJ.sptmarket,source:"ntp",timestamp:(new Date).getTime(),value:e}),g=e),!g||n&&g==n||function(t,e){const n=365;(0,i.Ub)(p,void 0,-1),(0,i.Ub)(p,void 0,-1,void 0,"/edge"),(0,i.Ub)(p,t,n,d.T3.HostPage.hostName,"/"),e&&((0,a.vV)(c.zfD,`Edge Next page refresh due to implicit market cookie restored. market: ${t}`),(0,h.J)())}(g,function(t,e){const n=t?.split("|",5)?.[4],i=e?.split("|",5)?.[4];return n!=i}(e,g))}var m=n(11367);async function w(t,e){const n=r.Rb?.ClientSettings?.market?.detection,d=await(document?.hasStorageAccess?.());if(!window.navigator.cookieEnabled||!d||!n||"cm"===n.type)return;const l=(0,i.Ri)(o.oN),h=await s.Q.getPreferenceSetting(o.oN,!1);!l||h&&l===h.value||await s.Q.savePreferenceSetting(o.oN,{setting:o.oN,source:"ntp",timestamp:(new Date).getTime(),value:l});let f=!1;if(!l&&h&&h.value)try{const e=JSON.parse(h.value)?.m;e&&(f=!0,m.gR.updateMarket(e,!0),await t(e),(0,a.vV)(c.l7i,"Edge Next page refresh due to market cookie missing.",void 0,{customMessage:`market: ${e}`}))}catch(t){(0,a.vV)(c.S6p,`Invalid market user preference: ${h.value}`,t.message)}(0,u.GP)().then(async()=>{await e(t),l||f||"true"===r.Rb.ClientSettings.static_page||g(!1)})}},24695:function(t,e,n){n.d(e,{Q7:function(){return S},Q_:function(){return v},sY:function(){return y}});var i=n(98216),r=n(41820),o=n(48172),s=n(12870);const a=18e4,c=100,u=100,d=()=>{const t=new Set;let e=!1,n=null;const i=t=>{n||e||(n=setTimeout(()=>{n=null,r(t)},200))},r=async n=>{if(0!==t.size){e=!0;try{await n()}finally{e=!1,t.size>0&&i(n)}}};return{getPending:()=>t,isProcessing:()=>e,add:(e,n)=>{t.add(e),i(n)},scheduleFlush:i,reset:()=>{t.clear(),e=!1,n&&(clearTimeout(n),n=null)}}};let l=null,h=null,f=!1;function p(){f||(f=!0,window.addEventListener("beforeunload",w,{once:!0}))}let g=null;function m(){const t={},e=function(){if(h&&h.size>0)return Array.from(h)}();e&&(t.pendingCards=e);const n=function(){const t=l?l.getPending().size:0;return t>0?t:void 0}();void 0!==n&&(t.queueSize=n);const i=g;return i&&(void 0!==i.minTimestamp&&(t.batchMinTimestamp=i.minTimestamp),void 0!==i.maxTimestamp&&(t.batchMaxTimestamp=i.maxTimestamp)),Object.keys(t).length>0?t:void 0}function w(){const t=m();t&&i.YT.sendLoadTimeEvent({markers:t})}function y(t){p();(h||(h=new Set),h).add(t)}function v(t){if(!t.id||0===t.id.trim().length)return;p();const e=(l||(l=d()),l);e&&(e.add(t,C),t.tagName&&h&&h.delete(t.tagName))}async function b(){const t=await o.f.getPreferenceSetting(r.bJ.recentlyViewedContent);if(!t||!t.value)return null;const e=t.value,n=Date.now()-a;if(!e.lastUpdateTimestamp||e.lastUpdateTimestamp<n)return null;const i=[];for(let t=0;t<e.batches.length;t++){const r=e.batches[t];if(!(r.timestamp>=n))break;i.push(r)}return 0===i.length?null:{lastUpdateTimestamp:e.lastUpdateTimestamp,batches:i}}async function S(){if(["ruby-ntp","ruby-ntp-ctrl2","prg-untgt-ar-c","prg-untgt-ar-t"].some(t=>s.Rb.CurrentFlightSet.has(t)))return;const t=await b();if(!t||!t.batches)return;const e=function(t,e){const n=new Set,i=new Set;for(let r=0;r<t.length;r++){const o=t[r];if(n.size<e&&o.newsIds)for(const t of o.newsIds){if(n.size>=e)break;n.add(t)}if(i.size<e&&o.segmentIds)for(const t of o.segmentIds){if(i.size>=e)break;i.add(t)}if(n.size>=e&&i.size>=e)break}return{NewsImpressedDocIds:Array.from(n),SegmentImpressedDocIds:Array.from(i)}}(t.batches,c);if(e.NewsImpressedDocIds.length||e.SegmentImpressedDocIds.length){if(!g){const e=t.batches.map(t=>t.timestamp);g={minTimestamp:Math.min(...e),maxTimestamp:Math.max(...e)}}return e}}async function C(){if(!l)return;const t=l.getPending();if(0===t.size)return;const e=new Set(t);t.clear();const n=await b(),i=new Set,s=new Set;for(const t of e)t.isSegment?i.add(t.id):s.add(t.id);if(!s.size&&!i.size)return;const a=Date.now(),c={timestamp:a,newsIds:Array.from(s)};i.size>0&&(c.segmentIds=Array.from(i));const d={lastUpdateTimestamp:a,batches:[c,...n?.batches||[]].slice(0,u)};await o.f.savePreferenceSetting(r.bJ.recentlyViewedContent,d)}},25194:function(t,e,n){n.d(e,{N1:function(){return d},S4:function(){return l},vz:function(){return s}});var i=n(11372),r=n(29231),o=n(52088);const s=["click","auxclick","contextmenu"],[a,c,u]=s,d="data-customhandled";class l{constructor(){this.clickSearchDepth=20,this.contextMenuEventCallback=t=>{const e=this.getClickTarget(t),n=e&&e.hasAttribute("custom-context-menu")?i.MS.CustomContextMenu:i.MS.ContextMenu;this.handleClickEvent(e,i.EG.RightClick,n)},this.clickEventCallback=t=>{const e=this.getClickTarget(t);1===t.button?this.handleClickEvent(e,i.EG.MiddleClick,i.MS.Navigate):this.handleClickEvent(e)},this.auxClickEventCallback=t=>{if(1===t.button){const e=this.getClickTarget(t);this.handleClickEvent(e,i.EG.MiddleClick,i.MS.Navigate)}}}observe(t=window,e){t.addEventListener(a,this.clickEventCallback),t.addEventListener(c,this.auxClickEventCallback),e||t.addEventListener(u,this.contextMenuEventCallback)}unobserve(t,e){t.removeEventListener(a,this.clickEventCallback),t.removeEventListener(c,this.auxClickEventCallback),e||t.removeEventListener(u,this.contextMenuEventCallback)}handleClickEvent(t,e,n){const i=this.getTelemetryClickTarget(t);if(!i)return;i&&i.hasAttribute(d)||this.dispatchEvent("telemetryclick",i,e,n)}dispatchEvent(t,e,n,i){const r=new CustomEvent(t,{detail:{element:e,action:n,behavior:i}});dispatchEvent(r)}getTelemetryClickTarget(t){let e=t;for(let t=0;t<this.clickSearchDepth&&e&&!this.validTarget(e);t++)if(e.assignedSlot)e=e.assignedSlot;else if(e.parentElement)e=e.parentElement;else{if(!e.parentNode||!e.parentNode.host)break;e=e.parentNode.host}if(this.validTarget(e))return e}getClickTarget(t){if(!t.composedPath||"function"!=typeof t.composedPath)return t.target;{const e=t.composedPath();if(e.length>2&&"hasAttribute"in e[0]&&!e[0].hasAttribute(r.i)&&"[object ShadowRoot]"===Object.prototype.toString.call(e[1])&&"hasAttribute"in e[2]&&e[2].hasAttribute(r.i))return e[2];if(e.length>0)return e[0]}}validTarget(t){const e=t instanceof Element;if(!t||!e)return!1;const n=o.W.get(t);let r;return r=n?n.contract:o.W.parseContract(t),"BUTTON"===t.nodeName||t.hasAttribute("href")||t.getAttribute&&"button"===t.getAttribute("role")||r&&r.type===i.MJ.DropDown||r&&r.type===i.MJ.ActionButton||r&&r.behavior&&t.tagName.includes("-")||t.form}}},26142:function(t,e,n){n.d(e,{u:function(){return r}});var i=n(69004);class r extends i.G{getCurrentState(){return null}}},26474:function(t,e,n){n.d(e,{a:function(){return r}});var i=n(9774);const r={[i.j.Essential]:["AL","ALS","AL_ANON","AL_APP_ANNON","AL_STATE","ANON","ANONCKNM","APP_ANON","APP_TWID","APP_WID","BFB","BFBUSR","DefaultLocation","Edgecac","FreWv","GalleryMode","MC1","MS0","MSCC","MSFPC","MSPRequ","MUID","MUIDB","MicrosoftApplicationsTelemetryDeviceId","OSAT","OSATE","OptanonAlertBoxClosed","OptanonConsent","OvrlyTrf","PreferencesMsn","RC","RUM","RecentStocks","SRCHD","SRCHHPGUSR","SRCHUID","SRCHUSR","Sample","TOptOut","TWID","UMH2E","WID","WLMMAC","_EDGE_S","_EDGE_V","_SS","_U","__rubyState","__rubyUX","_cb","_cb_ls","_cb_svref","_copilotDiscoverUX","_hpFeedView","_switchBannerClosed","aace","ace","afdprotocol","ahs-dismissed","ahs-installed","ahs-showings","ai_session","aqp","at-bing","bcookie","bingimage","bwssoc","cac","cb","cbypass","cfrecnt","cg_new_visit_timestamp","cgusc","child","cmdisp","cmwr","currentaccount","ddlcur","df","ecasession","elt","eub","eupubconsent","eupubconsent-v2","gfrecnt","hidebn","i18next","ipt","ipv6","isdomainmigrated","lt","marketPref","mktreset","mniotd","mnmarket","msaOptout","msaoptout","nactk","no_read_more","notiStats","ntps","numac","orfc_feeds","pbmi","pglt-edgeChromium-dhp","pglt-edgeChromium-ntp","pglt-microsoftNews-msnews","pglt-microsoftNews-startpage","pop","refresh-reason","sbc-dismissed","sbc-installed","sbc-showings","smd","sptmarket","sptmarket_restored","theme","timeZoneOffsetInMins","uaid","videoCookiesLastCategory","videoerrorcount","w10rp","w10rpls"],[i.j.Advertising]:["BizoID","adslrid","dub_downlevel","eAPID","ecadprovider","ecisession","ecmsession","ecsession"],[i.j.SocialMedia]:["promptDisplayCount"],[i.j.ThirdPartyAnalytics]:[]}},26560:function(t,e,n){n.d(e,{s:function(){return o},u:function(){return s}});var i=n(16507);const r=/www\d*\./i,o=/^https?:/i;class s{constructor(t){if(!i.n.isNotNullOrUndefined(t))return;let e;try{e=new URL(t.trim())}catch{e=void 0}if(!e||!t.toLocaleLowerCase().startsWith(e.origin.toLocaleLowerCase()))try{e=new URL("http://"+t)}catch{e=void 0}if(!e||!e.host||!o.test(e.protocol))return;const n=e.hostname.replace(r,"");this.url=e.href.replace(/\/$/,""),this.domain=n,this.domainAndPath=this.domain+e.pathname.replace(/[\s/]+$/g,""),this.domainPathAndQuery=this.domainAndPath+e.search,this.hasQuery=!!e.search}}},26854:function(t,e,n){n.d(e,{qx:function(){return d}});var i,r=n(81760),o=n(19330),s=n(77195);!function(t){t.TruncateArray="TruncateArray"}(i||(i={}));const a={[i.TruncateArray]:(t,e)=>Array.isArray(t)?t.slice(0,e):t},c=(t,e)=>e.reduce((t,e)=>a[e.type](t,e.config),t),u={[o.W.ContentTopic]:[{type:i.TruncateArray,config:3}]},d=t=>{const e=[];for(const n in s.ie.current){const i=s.ie.current[n],o=r.t.getMetadata(n),a=r.t.getRulesOverride()??u;if(o){const r=t(i,c(o,a?.[n]||[]));void 0!==r&&e.push(r)}}return e}},27061:function(t,e,n){n.d(e,{l:function(){return l}});var i=n(65022),r=n(93468),o=n(7965),s=n(43666),a=n(43434),c=n(41820),u=n(28006),d=n(35849);const l=new class{get chromiumPageSettingsConnector(){return this._chromiumPageSettingsConnector||(this._chromiumPageSettingsConnector=(0,d.zP)(u.h$)),this._chromiumPageSettingsConnector}setLayoutFromPreset(t){if(!this.chromiumPageSettingsConnector)return void(0,r.vV)(i.yHB,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the setLayoutFromPreset method");const e=this.chromiumPageSettingsConnector.getCurrentState(),n=(0,s.J)(e.selectedFeedDisplaySetting,t,e.greetingEnabled,e.hideDefaultTopSites);if(e.currentLayout!==n){let t;if("custom"!==n){const i=o.c_[n];t={currentBackgroundImageType:i.current_background_image_type,originalLayout:e.currentLayout,currentLayout:n,greetingEnabled:i.greeting,imageOfTheDayEnabled:"off"!==i.current_background_image_type,hideDefaultTopSites:i.hide_promoted_links,selectedFeedDisplaySetting:i.feeds_position}}else{const e=this.chromiumPageSettingsConnector.getCurrentState();t={...e,originalLayout:e.currentLayout,currentLayout:n}}this.chromiumPageSettingsConnector.updateLayout(t),(0,a.qU)(c.K5.layout_mode,o.IT[t.currentLayout])}}updateLayoutAndBackgroundImageType(t,e){this.chromiumPageSettingsConnector?(e?this.updateToCustomLayoutMode():this.setLayoutFromPreset(t),this.chromiumPageSettingsConnector.updateBackgroundImageType(t)):(0,r.vV)(i.yHB,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the updateLayoutAndBackgroundImageType method")}updateToCustomLayoutMode(){if(!this.chromiumPageSettingsConnector)return void(0,r.vV)(i.yHB,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the updateToCustomLayoutMode method");const t=this.chromiumPageSettingsConnector.getCurrentState(),e={...t,originalLayout:t.currentLayout,currentLayout:"custom"};this.chromiumPageSettingsConnector.updateLayout(e),(0,a.qU)(c.K5.layout_mode,o.IT[e.currentLayout])}isImageOfTheDayDisabled(){if(!this.chromiumPageSettingsConnector)return void(0,r.vV)(i.yHB,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the isImageOfTheDayDisabled method");const t=this.chromiumPageSettingsConnector.getCurrentState(),e=t.backgroundImageTypePolicy&&(3===t.backgroundImageTypePolicy||1===t.backgroundImageTypePolicy);return void 0!==e&&0!==e&&e}isCustomImageDisabled(){if(!this.chromiumPageSettingsConnector)return void(0,r.vV)(i.yHB,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the isCustomImageDisabled method");const t=this.chromiumPageSettingsConnector.getCurrentState(),e=t.backgroundImageTypePolicy&&(3===t.backgroundImageTypePolicy||2===t.backgroundImageTypePolicy);return void 0!==e&&0!==e&&e}}},27191:function(t,e,n){n.d(e,{$w:function(){return o},Jc:function(){return i},RD:function(){return r},Sg:function(){return s},cn:function(){return l},l:function(){return c},le:function(){return d},v4:function(){return a},x8:function(){return u}});const i="TTPR2",r="TTF.SearchBox",o="TTVR",s="TTVR.SearchBox",a="TFPR",c="TTVR.BackgroundExecution",u="backgroundpreload",d="prerender",l="TTAF"},27261:function(t,e,n){n.d(e,{$N:function(){return s},$t:function(){return o},C7:function(){return v},F:function(){return g},IU:function(){return u},KP:function(){return p},V:function(){return m},VQ:function(){return a},W7:function(){return w},g3:function(){return h},gH:function(){return f},iA:function(){return d},iw:function(){return l},mZ:function(){return y},ou:function(){return c}});var i=n(77246),r=n(37423);function o(){return(0,i.S)()?window.navigator.userAgent:(0,r.cn)().userAgent}function s(){return(0,i.S)()?window.location.href:(0,r.cn)().url.href}function a(){return(0,i.S)()?window.location.hostname:(0,r.cn)().url.hostname}function c(){return(0,i.S)()?window.location.host:(0,r.cn)().url.host}function u(){return(0,i.S)()?window.location.origin:(0,r.cn)().url.origin}function d(){return(0,i.S)()?window.location.search:(0,r.cn)().url.search}function l(){return(0,i.S)()?window.location.protocol:(0,r.cn)().url.protocol}function h(){return(0,i.S)()?window.location.hash:(0,r.cn)().url.hash}function f(){return(0,i.S)()?window.document.cookie:(0,r.cn)().cookie}function p(t){if(!(0,i.S)())throw new Error("getDocumentElementById is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementById(t)}function g(t){if(!(0,i.S)())throw new Error("getDocumentElementsByTagName is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementsByTagName(t)}function m(t){if(!(0,i.S)())throw new Error("getDocumentElementsByClassName is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementsByClassName(t)}function w(){return(0,i.S)()?window.indexedDB:null}function y(){return(0,i.S)()?window.devicePixelRatio:(0,r.cn)().devicePixelRatio}function v(t=void 0,e=void 0,n=!0,r="anonymous",o,s){if(!(0,i.S)())throw new Error("createScriptTag is unsupported server side. This call should be wrapped in canUseDOM().");const a=document.createElement("script");return e&&(a.id=e),o&&a.setAttribute("class",o),s&&(a.onload=s),a.type="text/javascript",t&&(window&&window.trustedTypesURLValidation?a.src=window.trustedTypesURLValidation(t,"scriptSrcUrlPolicy"):a.src=t,a.async=n,a.crossOrigin=r),window&&window.NONCE_ID&&(a.nonce=window.NONCE_ID),a}},27597:function(t,e,n){n.d(e,{C1:function(){return o},Jl:function(){return c},aD:function(){return a},vQ:function(){return s}});var i=n(17720);let r;function o(t){r=t}function s(t,e,n=!0){const i=u();let o=i[t];if(o||(o=[],i[t]=o),o.push(e),n){const n=r(t);if(n){const t=n.getCurrentState();t&&e(t)}}}function a(t,e){const n=u(),i=n[t];if(i&&i.length){for(let t=0;t<i.length;t++)if(i[t]===e){i.splice(t,1);break}n[t]=i}}function c(t,e){const n=u()[t];if(n&&e)for(const t of n)t(e)}function u(){return i.vv.get("reducers__callbackMap",()=>({}))}},27791:function(t,e,n){n.d(e,{GZ:function(){return c},cs:function(){return a}});var i=n(65022),r=n(27220),o=n(44449);const s=[{ratio:"invalid",width:1,height:9999},{ratio:"1x1.91",width:1,height:1.91},{ratio:"9x16",width:9,height:16},{ratio:"3x4",width:3,height:4},{ratio:"1x1",width:1,height:1},{ratio:"4x3",width:4,height:3},{ratio:"16x9",width:16,height:9},{ratio:"1.91x1",width:1.91,height:1}],a=(0,o.sx)(i._0l,"calculateRatio")(t=>{const e=t?.items[0]?.originalImageWidth,n=t?.items[0]?.originalImageHeight;if(!e||!n)return;const i=d(t.items[0].imageUrl);if(!i)return;const r=i.searchParams.get("c");if(r&&"4"!==r)return;const o=Number(e),a=Number(n);let c=1;for(;c<s.length&&Math.ceil(o*s[c].height)!==Math.ceil(a*s[c].width);++c)if(!(Math.ceil(o*s[c].height)>Math.ceil(a*s[c].width))){if(1==c)break;const t=1*o/a;Math.abs(t-s[c].width/s[c].height)>=Math.abs(t-s[c-1].width/s[c-1].height)&&(c-=1);break}c==s.length&&(c-=1),t.template.desiredRatio=s[c].ratio}),c=(0,o.sx)(i._0l,"reduceWidthOrHeightAndUpdateUrl")((t,e,n,i)=>{const o=(0,r.A)(s,t=>t.ratio===e);if(1!==o.length)return;const a=o[0],c=n?t.ext.originalImageWidth:t.originalImageWidth,d=n?t.ext.originalImageHeight:t.originalImageHeight;if(!c||!d)return;const l=1*c/d,h=1*a.width/a.height,f={w:c,h:d};l>=h?f.w=Math.round(d*h):f.h=Math.round(c/h);const p={river:300,infopane:604};return f.w>p[i]?(f.h=Math.round(f.h*p[i]/f.w),f.w=p[i]):(f.h=p[i]*h,f.w=p[i]),u(f.h,f.w,t,n),f}),u=(0,o.sx)(i._0l,"updateUrlWithDesiredSize")((t,e,n,i)=>{const r=d(i?n.url:n.imageUrl);r&&(r.searchParams.set("h",t),r.searchParams.set("w",e),r.searchParams.set("c","4"),i?n.url=r.href:n.imageUrl=r.href)}),d=(0,o.sx)(i._0l,"constructUrl")(t=>{let e;try{e=new URL(t)}catch(n){try{e=new URL(`https://${t}`)}catch{return}}return e})},27833:function(t,e,n){n.d(e,{Ak:function(){return o},KY:function(){return a},Rg:function(){return c},Ub:function(){return s}});var i=n(53685),r=n(68399);function o(t){if(performance.getEntriesByType){const e=performance.getEntriesByType("paint").filter(t=>"first-contentful-paint"===t.name);e.length>0&&(t[i.q]=Math.round(e[0].startTime))}}function s(t){if(performance&&performance.getEntriesByType&&t&&t[i.xA]){const e=performance.getEntriesByType("navigation");if(e.length){const n=e[0];let r=0,o=0;i.CS in n&&i.Bt in n&&(r=n[i.CS],o=n[i.Bt]),r<0&&o<0&&(t["TTVR."+i.Ng]=Math.round(t[i.xA]-r),t["TTVR."+i.O1]=Math.round(t[i.xA]-o))}}}const a=t=>{let e=-1;const n=t[i.oC],o=t[i.jy];n&&o&&(e=n-o),t[i.ly]=e,(0,r.Ww)({name:i.ly,startTime:o,endTime:n})},c=t=>{let e=-1;const n=t[i.oC],o=t[i.yE];o&&n&&(e=o-n),t[i.S7]=e,(0,r.Ww)({name:i.S7,startTime:n,endTime:o})}},27942:function(t,e,n){n.d(e,{AE:function(){return S},F9:function(){return b},H5:function(){return k},Pj:function(){return v},VD:function(){return h},_D:function(){return C},eS:function(){return p},j1:function(){return i},mO:function(){return g},oK:function(){return c}});var i,r=n(11177),o=n(17720),s=n(63150),a=n(87944);!function(t){t.c1="c1",t.c2="c2",t.c3="c3",t.c4="c4",t.c5="c5"}(i||(i={}));const c={c1:1,c2:2,c3:3,c4:4,c5:5},u="__minViewportWidthOverrides__",d="__columnArrangementDefinitions__",l="__columnArrangementMap__",h=()=>(o.vv.get(d)||w(),o.vv.get(d)),f=()=>(o.vv.get(l)||w(),o.vv.get(l));function p(t){o.vv.set(u,t)}function g(){const t=h(),e=f();if(s.U0.fiveColSupported()&&4===t.length){const n=new m(i.c5,r.t9);t.push(n),e[i.c5]=n}}class m{constructor(t,e,n){this.arrangement=t,this.contentSizePx=e,this.isFirstBreakpoint=n}get minViewportWidthPx(){if(this.isFirstBreakpoint)return 0;const t=o.vv.get(u);if(t){const e=t.get(this.arrangement);if(e)return e}return this.contentSizePx+y}}function w(){const t=[];t.push(new m(i.c1,r.rY,!0)),t.push(new m(i.c2,r.sx)),t.push(new m(i.c3,r.zN)),t.push(new m(i.c4,r.YK)),s.U0.fiveColSupported()&&t.push(new m(i.c5,r.t9));const e={};for(const n of t)e[n.arrangement]=n;o.vv.set(d,t),o.vv.set(l,e)}const y=32;!function(){const t=[0],e=h();for(let n=1;n<e.length;n++)t.push(e[n]?.minViewportWidthPx)}();function v(t){return f()[t].contentSizePx}function b(t,e){const n=[],i=h(),r=f();if(t){const e=r[t],i=e?.minViewportWidthPx;i>0&&n.push(`(min-width: ${(0,a.c)(i)})`)}if(e){const t=r[e],o=i.indexOf(t);o<i.length-1&&n.push(`(max-width: ${(0,a.c)(i[o+1]?.minViewportWidthPx-1)})`)}return n.join(" and ")}function S(t){return b(t,t)}function C(t,e){const n=b(t,e);return n?"@media "+n:""}function k(t){return C(t,t)}},28006:function(t,e,n){n.d(e,{BO:function(){return g},BS:function(){return M},Dq:function(){return m},HI:function(){return S},KR:function(){return h},OJ:function(){return P},Qb:function(){return a},Qi:function(){return v},TE:function(){return d},UD:function(){return y},Vz:function(){return C},YL:function(){return I},YQ:function(){return p},ZI:function(){return w},_A:function(){return u},_N:function(){return b},bn:function(){return k},eX:function(){return _},h$:function(){return c},kR:function(){return o},lm:function(){return r},mL:function(){return f},n4:function(){return A},ne:function(){return T},ni:function(){return R},oN:function(){return x},qi:function(){return l},ql:function(){return i},sF:function(){return $},xW:function(){return s}});const i="AdminPortalData",r="BackgroundData",o="BingImageData",s="CategoryData",a="ChannelData",c="ChromiumPageSettings",u="CoachmarkData",d="ExperienceTrackerEdgeNextData",l="ExperienceTrackerWidgets",h="IrisData",f="LayoutPreferenceData",p="LocationData",g="MilestoneData",m="MsccCookieBannerData",w="NurturingPlacementManager",y="OfficeSharedData",v="PoweredByData",b="Preload",S="RewardsData",C="SearchHistoryEdgenextData",k="SharedState",T="SignInData",x="ShellNewTabData",A="SmartListSharedData",$="TelemetryData",I="TopicData",P="TopSitesLayoutData",R="WeatherData",M="WeatherCardData",_="SocialData"},28024:function(t,e,n){function i(t,e=!1){if(t){if(e&&t.display)return t.display;if(t.content)return t.content}return t}function r(t){return t.language&&t.market&&(t.language+"-"+(t.script?t.script+"-":"")+t.market).toLowerCase()||""}function o(t){if(!t||!t.startsWith("f:"))return;const e=(t.match(/f:\s*([^;]+)/i)||[])[1];return e?e.toLowerCase().split(",")?.sort():[]}n.d(e,{Ah:function(){return r},YP:function(){return i},lC:function(){return o}})},28067:function(t,e,n){n.d(e,{X:function(){return c}});var i=n(89980),r=n(53384),o=n(35079),s=n(28006),a=n(35849);function c(t,e){const n=(0,r.kP)();let c;if(t&&n&&(c=t[n]),!e){const t=(0,a.zP)(s.ql),n=t&&t.getCurrentState();e=n?n.settings:(0,i.Lg)().getObject(o.Bd)}if(!e)return c;const{adminSelectedNavId:u,isOfficeContentEnabled:d,isShowCompanyAndIndustry:l}=e;let h;return t&&u&&(h=t[u]),d&&l?c||h||0:d?1:0}},28381:function(t,e,n){n.d(e,{y:function(){return v}});var i=n(17720),r=n(16091),o=n(60815),s=n(56911),a=n(77246),c=n(97364),u=n(97004),d=n(95239),l=n(85889),h=n(56639),f=n(43103);class p{constructor(){this.mediaQueryCallback=()=>{},this.appThemeState=null}eventListener(){if(this.appThemeState)if((0,h.vk)()){const t=(0,h.cE)(),e=t?.isDarkMode;void 0!==e&&this.appThemeState.setAppInDarkMode(e)}else if((0,l.JK)()){const t=sessionStorage.getItem("nativeAppUserConfig");if(t){const e=JSON.parse(t),n=e?.isDarkMode;void 0!==n&&this.appThemeState.setAppInDarkMode(n)}else this.appThemeState.setAppInDarkMode(!!this.mediaQueryList?.matches)}else this.appThemeState.setAppInDarkMode(!!this.mediaQueryList?.matches)}initialize(t){return!(!this.mediaQueryList&&t)||!!window?.matchMedia&&(this.mediaQueryList=window.matchMedia("(prefers-color-scheme: dark)"),!!this.mediaQueryList&&(this.appThemeState=t,this.mediaQueryCallback=this.eventListener.bind(this),this.mediaQueryList.addEventListener("change",this.mediaQueryCallback),this.mediaQueryCallback(),!0))}uninitialize(){return this.mediaQueryList&&(this.mediaQueryList.removeEventListener("change",this.mediaQueryCallback),this.mediaQueryCallback=()=>{},this.mediaQueryList=void 0,this.appThemeState=null),!0}}class g{constructor(t=null){this.initialized=!1,this.source=t,this.appThemeState=null}handleChange(t,e){if(this.source&&e.target===this.source){const e=t.getValueFor(this.source),n=(0,f.e)(e.toColorString())<=u.y.DarkMode;this.appThemeState&&this.appThemeState.setAppInDarkMode(n)}}updateSource(t=null){this.source=t}initialize(t){if(this.initialized)return!0;if(this.appThemeState=t,!this.source){const t=document.querySelector("fluent-design-system-provider[fill-color]");if(null==t)return!1;this.source=t}const e={target:this.source,token:d.p};return this.handleChange(d.p,e),d.p.subscribe(this),this.initialized=!0,this.initialized}uninitialize(){return this.initialized&&(d.p.unsubscribe(this),this.initialized=!1,this.appThemeState=null),!0}}class m{constructor(){this.appThemeInDarkMode=!1,this.themeSwitchSubscription=null;let t=null;if((0,a.S)())switch((0,c.YV)()){case"BaseLayerLuminance":t=new g;break;case"External":break;default:t=new p}else t=new p;t&&this.setThemeSubscription(t)}setThemeSubscription(t){if(this.themeSwitchSubscription&&this.themeSwitchSubscription.uninitialize(),this.themeSwitchSubscription=t,!this.themeSwitchSubscription)return;this.themeSwitchSubscription.initialize(this)||(this.themeSwitchSubscription=new p,this.themeSwitchSubscription?.initialize(this))}setAppInDarkMode(t){this.appThemeInDarkMode=t}appInDarkMode(){return this.appThemeInDarkMode}}(0,s.Cg)([o.sH],m.prototype,"appThemeInDarkMode",void 0);const w=new WeakMap;class y{constructor(){this._appThemeMode=null}get appThemeMode(){return this._appThemeMode||(this._appThemeMode=new m),this._appThemeMode}static getInstance(){return i.vv.get("__SuperComponentThemeHelper__",()=>new y)}setThemeSwitchSubscription(t){this.appThemeMode.setThemeSubscription(t)}setAppInDarkMode(t){this.appThemeMode.setAppInDarkMode(t)}appInDarkMode(){return this.appThemeMode.appInDarkMode()}subscribeThemeChange(t){if(!t||!this.appThemeMode||w.get(t))return;if(t.handleThemeChange(v.appInDarkMode()),!(0,c.TZ)())return;const e={handleChange:()=>{t.handleThemeChange(v.appInDarkMode())}};w.set(t,e),o.cP.getNotifier(this.appThemeMode).subscribe(e,"appThemeInDarkMode")}unsubscribeThemeChange(t){if(!(0,c.TZ)()||!t||!this.appThemeMode)return;const e=w.get(t);e&&(o.cP.getNotifier(this.appThemeMode).unsubscribe(e,"appThemeInDarkMode"),w.delete(t))}}const v=(0,r.G)(y)},28422:function(t,e,n){n.d(e,{g:function(){return u}});var i=n(30817),r=n(89151),o=n(30071),s=n(77246),a=n(12870),c=n(27191);async function u(t){if(!(0,s.S)())return;if(t=t||{},a.Rb.IsPrerender){(0,i.zq)()[c.le]=1}let e=!1;return new Promise(n=>{const i=setTimeout(()=>{n(),e=!0,(0,o.je)(s,r.Ci.Secondary,t.incompleteVisualDependencyCallback)},t.timeoutOverride||2e4);async function s(e){i&&clearTimeout(i);const n=!!t.pageLoadEventsAvailableCallback&&!t.pageLoadEventsAvailableCallback();(0,o.x5)(e,t.onBeforeNotifyCallback&&(()=>{t.onBeforeNotifyCallback(e)}),n)}(0,r.uR)().then(t=>{n(),e||s(t)})})}},28469:function(t,e,n){n.d(e,{At:function(){return l},X3:function(){return a},pT:function(){return i}});var i,r=n(65022),o=n(6092),s=n(77246);function a(){return c}!function(t){t.Unknown="unknown",t.Connected="connected",t.Disconnected="disconnected",t.Aborted="aborted"}(i||(i={}));let c=i.Unknown,u=null,d=!1;function l(t=5e3){(0,s.S)()&&(c=i.Unknown,h(t))}async function h(t=5e3,e){return d=!1,e&&(u=window.setTimeout(()=>{d=!0,e.abort()},t)),function(t){const e={method:"HEAD",cache:"reload"};t&&(e.signal=t);return fetch(`https://assets.msn.${o.T3.IsChinaCompliance?"cn":"com"}/statics/icons/favicon.ico`,e)}(e&&e.signal).then(()=>(c=i.Connected,(0,r.RWs)({networkStatus:c}),!0)).catch(t=>(c=t&&"AbortError"===t.name?i.Aborted:i.Disconnected,(0,r.RWs)({networkStatus:c}),!1)).finally(()=>{clearTimeout(u)})}},28480:function(t,e,n){n.d(e,{j:function(){return u},V:function(){return d}});var i=n(32633),r=n(79426);var o,s=n(65022),a=n(98216);!function(t){t[t.kNoError=0]="kNoError",t[t.kTokenFetchUserInteractionRequired=13]="kTokenFetchUserInteractionRequired",t[t.kTokenFetchProviderError=15]="kTokenFetchProviderError",t[t.kInteractionRequired=24]="kInteractionRequired",t[t.kUnsupportedSovereignty=60]="kUnsupportedSovereignty",t[t.kSovereigntyDetectionFailed=61]="kSovereigntyDetectionFailed"}(o||(o={}));let c=!1;class u{constructor(t){if(this.authCallerValidator=t,!t)throw new Error("Auth Caller Validator is not provided in EdgeChromiumFetchStrategy")}async fetchAuthData(t,e=!1){const{account:n,client:u,...d}=await this.authCallerValidator.validateAuthCaller();if(!n||!u)return{...d,resource:t};if(!t?.id)return{resource:t,error:{message:"Resource Id not provided.",status:i.f.OtherError}};const l=e?window.chrome.authPrivate.acquireAccessTokenWithUserInteraction:window.chrome.authPrivate.acquireAccessTokenSilently,h=new r.e,f={account_id:n.account_id,account_type:n.account_type,client_id:u.id,scope_or_resource:t.id},p=Math.round(performance.now());let g=-1;l(f,t=>{h.set(t),g=Math.round(performance.now())});const m=await h.getResultAsync(),{access_token:w,is_success:y,error_info:v,is_token_valid:b}=m||{};if(y&&b)return{authToken:w,resource:t,callerId:d.callerId,performance:{startTime:p,endTime:g}};let S=i.f.OtherError,C=v?.error_string||"Unknown Error";return y&&!b?(S=i.f.MaySucceedOnRetry,C="Invalid Auth Token returned"):v?.secondary_error===o.kTokenFetchUserInteractionRequired||v?.secondary_error===o.kInteractionRequired?(S=i.f.InteractionRequired,C="User interaction Required"):v?.secondary_error===o.kTokenFetchProviderError?(S=i.f.AuthProviderNotSupported,C="Authentication provider not supported"):this.isRetryableError(v)?(S=i.f.MaySucceedOnRetry,C="Retryable fetch error"):"Auth private api is not allowed when MAM enabled."===C&&(S=i.f.AuthPrivateNotSupportedForMAM,c=!0,a.YT.sendAppErrorEvent({...s.GZv,pb:{...s.GZv.pb,customMessage:"MAM is Enabled"}})),{resource:t,error:{message:C,status:S,internalError:v},callerId:d.callerId,performance:{startTime:p,endTime:g}}}isRetryableError(t){if(!t?.platform_error_code)return!1;const e=(t.platform_error_code>>>0).toString(16).toUpperCase();return void 0!==["CAA3","CAA7","CAA8","CAAD"].find(t=>e.startsWith(t))||!!["CAA20005","CAA20008","CAA10001"].includes(e)}}function d(){return c}},28556:function(t,e,n){n(71481);var i=n(65022),r=n(93468),o=n(22020),s=n(18931),a=n(98216),c=n(6092),u=n(1732);class d extends s.lT{constructor(t,e){t?.shadowRoot&&a.YT?.observeShadowRoot(t.shadowRoot),super(t,e)}connect(){try{super.connect()}catch(t){if(this.needsHydration){this.needsHydration=!1;const e={...i.rbF.pb,customMessage:`Error: ${t?.message}`};if(t instanceof o.qQ){const n=new XMLSerializer;e.targetNodeId=t.factory.targetNodeId,e.targetTagName=t.factory.targetTagName,e.viewMarkup=n.serializeToString(t.fragment),e.templateString=t.templateString}t.factories&&(e.factories=JSON.stringify(t.factories?.map(t=>({...t,dataBinding:{...t?.dataBinding,evaluate:t?.dataBinding?.evaluate?.toString()}})))),t.node&&(e.nodeHTML=t.node.outerHTML||""),t.templateString&&(e.templateString=t.templateString),t.stack&&(e.stack=t.stack);if((c.T3?.CurrentRequestTargetScope?.pageExperiments||[]).includes("prg-swssrbspg-v1")&&(0,u.Lc)(),this.source.tagName.includes("HERO"))a.YT.sendAppErrorEvent({...i.pHQ,message:`Error while hydrating component: ${this.source.tagName}`,pb:e});else if("BACKGROUND-IMAGE"==this.source.tagName)a.YT.sendAppErrorEvent({...i.BL9,message:`Error while hydrating component: ${this.source.tagName}`,pb:e});else if("TOP-COMMENTS-CARD"==this.source.tagName)a.YT.sendAppErrorEvent({...i.ejj,message:`Error while hydrating component: ${this.source.tagName}`,pb:e});else if(this.source.tagName.includes("WEATHER-TOPSECTION")){const t=[];try{const e=document.querySelector("body > fluent-design-system-provider > ruby-page").shadowRoot.querySelector("div.feed-section > msn-feed").shadowRoot.querySelector("#mfl-0-0").shadowRoot.querySelector("#weather > weather-top-section-card").shadowRoot.querySelector("div.card-container");t.push(...Array.from(e.querySelectorAll("*")).map(t=>t.tagName))}catch(t){}finally{(0,r.vV)(i.NQ7,`Error while hydrating component: ${this.source.tagName}`,void 0,{...i.NQ7.pb,elementsInContainer:t.join(", ")})}}else(0,r.vV)(i.rbF,`Error while hydrating component: ${this.source.tagName}`,void 0,e);super.connect()}else(0,r.c_)(t,i.VNh,`Error while connecting component: ${this.source.tagName}`,void 0,{component:this.source.tagName})}}}s.V7.setStrategy(d)},28611:function(t,e,n){n.d(e,{Cq:function(){return u},IW:function(){return d},YJ:function(){return a},vs:function(){return c},xV:function(){return i}});var i,r=n(17720),o=n(95992);!function(t){t.actionMenuOpen="actionMenuOpen",t.addTopSite="addTopSite",t.coachmark="coachmark",t.editTopSite="editTopSite",t.editWelcomeGreeting="editWelcomeGreeting",t.hamburgerMenu="hamburgerMenu",t.imageSearch="imageSearch",t.locationMarkerCard="locationMarkerCard",t.mobileAppUpsell="mobileAppUpsell",t.msRewards="msRewards",t.museumCard="museumCard",t.navOverflow="navOverflow",t.notificationBell="notificationBell",t.pivot="pivot",t.search="search",t.searchHistoryMoreOptions="searchHistoryMoreOptions",t.settings="settings",t.feedSettings="feedSettings",t.feedbackFaq="feedbackFaq",t.signInControl="signInControl",t.toast="toast",t.topSiteOverflowPanel="topSiteOverflowPanel",t.waffle="waffle",t.recommendedSitesSetting="recommendedSitesSetting",t.weatherOneLinerActionMenu="weatherOneLinerActionMenu",t.pulseActionMenu="pulseActionMenu",t.rewardsDialog="rewardsDialog",t.rewardsSignInDialog="rewardsSignInDialog",t.marketLanguageToggle="marketLanguageToggle"}(i||(i={}));class s{constructor(){this.flyoutOpen=!1,this.openFlyouts=new Set,this.registeredCallbacks=[]}static getInstance(){return r.vv.get("__FlyoutCoordinationInstance__",()=>new s)}reportFlyoutOpen(t,e){e?this.openFlyouts.add(t):this.openFlyouts.delete(t),this.flyoutOpen=this.openFlyouts.size>0;for(const n of this.registeredCallbacks)n(t,e)}registerFlyoutListener(t){this.registeredCallbacks.push(t)}unregisterFlyoutListener(t){(0,o.A)(this.registeredCallbacks,e=>t===e)}isFlyoutOpen(){return this.flyoutOpen}}function a(t,e){return s.getInstance().reportFlyoutOpen(t,e)}function c(t){return s.getInstance().registerFlyoutListener(t)}function u(t){return s.getInstance().unregisterFlyoutListener(t)}function d(){return s.getInstance().isFlyoutOpen()}},28828:function(t,e,n){function i(t){try{if(t)return JSON.parse(t)}catch(t){}return null}n.d(e,{B:function(){return i}})},28868:function(t,e,n){n.d(e,{lA:function(){return s},RH:function(){return r}});var i=n(77246);function r(){if(!(0,i.S)()||function(){const t=new URL(location.href),e=t.searchParams.get("chpltfm")||"",n=t.searchParams.get("ocid")||"",i=e.toLowerCase().split("-")[0];return n.toLowerCase()==="swiftKey".toLowerCase()||"swiftkey"==i.toLowerCase()}())return!1;const t=window.sapphireWebViewBridge?.send,e=window.webkit?.messageHandlers?.send?.postMessage;return t||e}function o(t,e){console.log(t,e);const n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}),i={scenario:t,data:{data:e},id:n};window.__sapphirePeregrineState?.gAppId&&!i.data.data.appId&&(i.data.data.appId=window.__sapphirePeregrineState?.gAppId);const r=JSON.stringify(i);return window.webkit?.messageHandlers?.send?.postMessage&&window.webkit?.messageHandlers?.send?.postMessage(r),window.sapphireWebViewBridge?.send&&window.sapphireWebViewBridge.send(r),"subscribe"!==t&&"sendBroadcast"!==t&&window.VPsapphireWebViewBridge?.send&&window.VPsapphireWebViewBridge.send(r),n}function s(t,e,n){if(!(0,i.S)())return;const r=o(t,e);n&&function(t,e){const{gJobListeners:n}=window.__sapphirePeregrineState;n[t]?n[t].push(e):n[t]=[e]}(r,n)}"undefined"==typeof window||window.__sapphirePeregrineState||(window.__sapphirePeregrineState={gJobListeners:{},gObservers:{},gAppId:void 0,gInited:!1})},29231:function(t,e,n){n.d(e,{RJ:function(){return o},i:function(){return i},kN:function(){return a},xB:function(){return s},ym:function(){return r}});const i="data-t";var r;!function(t){t.Auto="auto",t.AutoScroll="autoScroll",t.Load="load",t.OutOfFocus="outoffocus",t.Partial="partial",t.Resize="resize",t.Scroll="scroll",t.Swipe="swipe",t.Tap="tap",t.View="view"}(r||(r={}));const o="TelemetryPageViewNotificationEvent",s="AppErrorNotificationEvent",a="IDXId"},29252:function(t,e,n){n.d(e,{Ig:function(){return v},P7:function(){return w},T4:function(){return g},Xq:function(){return y},ei:function(){return c},r8:function(){return p},uw:function(){return b},x5:function(){return m}});var i=n(75575),r=n(6092),o=n(74195),s=n(63418);const a=10/1440,c="cbypass";let u="",d=!1,l=0;const h=10;let f=parseInt((0,s.Ri)(c))||0;async function p(){f=Date.now(),(0,s.Ub)(c,f.toString(),a,r.T3.HostPage.topDomain,"/"),await i.S.purgeCacheAsync(i.p.river),(0,o.Q6)({id:"updatemyfeed",payload:f})}async function g(){f=Date.now(),(0,s.Ub)(c,f.toString(),a,r.T3.HostPage.topDomain,"/"),await i.S.purgeCacheAsync(i.p.river)}function m(){return f}function w(t){f>0&&t.searchParams.set(c,f.toString())}function y(){return u}function v(t,e){if(!t)return;if(e)return u=t,void(l=1);if(l>=h)return;const n=u?`${u},${t}`:t;l+=1,u=n}function b(t){!0!==t&&"true"!==t||(d=!0)}},29320:function(t,e,n){function i(t){if(!navigator.serviceWorker)return;const e=navigator.serviceWorker.controller;return e?r(e,t):navigator.serviceWorker.ready.then(e=>{const n=e.active;if(n)return r(n,t)})}function r(t,e){return new Promise(n=>{const i=new MessageChannel;i.port1.onmessage=t=>{n(t.data)},t.postMessage(e,[i.port2])})}n.d(e,{O:function(){return i}})},29582:function(t,e,n){n.d(e,{W:function(){return s}});var i=n(63456),r=n(80164);const o={n:"name",t:"type",a:"action",b:"behavior",customHandled:"customHandled",d:"overrideDestinationUrl",oe:"overrideEmailIdScrubbing",z:"zone",ism:"isMonetized",isfeed:"isFeed",isci:"isCI","c.hi":"content.headlineIdx","c.auth":"content.author","c.i":"content.id","c.l":"content.isLocal","c.s":"content.source","c.p":"content.parentId","c.t":"content.type","c.tp":"content.topic","c.v":"content.vertical","c.c":"content.category","c.sc":"content.subcategory","c.pn":"content.partnerName","c.pi":"content.partnerId","c.b":"content.brand","c.bi":"content.brandId","c.st":"content.subscriptionType","c.tv":"content.teraVertical","c.tc":"content.teraCategory","c.pl.i":"content.placement.id","c.pl.p":"content.placement.parentId","c.pl.o":"content.placement.ordinal","c.pl.l":"content.placement.lineage","c.pl.lo":"content.placement.lineageOrdinal","c.aud":"content.audienceMode","c.pv":"content.providerType","f.i":"feed.id","f.n":"feed.name","f.t":"feed.type",ext:"ext","m.c":"metrics.isContentCI"};class s{static compress(t){const e={},n=Object.keys(o);for(let r=0;r<n.length;r++){const s=n[r],a=(0,i.A)(t,o[s]);void 0!==a&&(e[s]=a)}const r=(0,i.A)(t,"content.headline");return r&&(e["c.hl"]=r),e}static decompress(t){if(!t)return;const e={},n=Object.keys(o);for(let s=0;s<n.length;s++){const a=n[s],c=(0,i.A)(t,a);void 0!==c&&(0,r.A)(e,o[a],c)}return t["c.hl"]&&(0,r.A)(e,"content.headline",t["c.hl"]),e}}},29673:function(t,e,n){n.r(e),n.d(e,{BackgroundDataActions:function(){return i.Y},BackgroundDataConnector:function(){return r.E},BackgroundDataReducer:function(){return o.l},ToolingInfo:function(){return s},resetBackgroundDataActions:function(){return i.t}});var i=n(14588),r=n(29923),o=n(30871);const s={experienceConfigSchema:{}}},29784:function(t,e,n){n.d(e,{$6:function(){return $},DK:function(){return m},LT:function(){return y},PR:function(){return R},SU:function(){return C},Se:function(){return A},Ty:function(){return T},_Y:function(){return I},rN:function(){return v},sX:function(){return w},y$:function(){return S},z0:function(){return g},zx:function(){return x}});var i=n(6092),r=n(43889),o=n(12870),s=n(63150),a=n(5044),c=n(19548),u=n(85889),d=n(48566),l=n(18750),h=n(60791),f=n(77246),p=n(27261);function g(t){let e="";const n=["{0}","{0}K","{0}M"];for(let i=n.length-1;i>=0;i--){const r=Math.pow(1e3,i);if(t>=r){let o;o=r<1e3?t:t/r,e=d.Qf.Format(n[i],Math.round(10*o)/10);break}}return e}!function(){let t=null}();function m(){if((0,f.S)()){if((0,h.j)()){const t=(0,h.a)();return Boolean(t&&t.isDarkMode)}if(((0,u.JK)()||(0,u.vM)())&&(0,r.W9)().supported){const t=(0,r.W9)().getItem("nativeAppUserConfig"),e=t&&JSON.parse(t);if(e)return e.isDarkMode}const t=c._3.getQueryParameterByName("isDarkTheme",location.href);if(null!==t)return"true"===t}return(0,l.ud)()}function w(t){const e=window.matchMedia("(prefers-color-scheme: dark)"),n=new WeakMap,i=e=>{let i=n.get(e);return i||(i=(e=>{let n=!1;return()=>{const i=m();n!==i&&(n=i,i?e.addStyles(t):e.removeStyles(t))}})(e),n.set(e,i)),i};return{connectedCallback(t){const n=i(t);n(),e.addEventListener("change",n)},disconnectedCallback(t){const i=n.get(t);i&&e.removeEventListener("change",i)}}}function y(){return!b()&&(!o.Rb?.CurrentFlightSet?.has("prg-watch-kumo-rf")||A())}function v(){return y()&&(A()||!o.Rb?.CurrentFlightSet?.has("prg-watch-copi-rf"))}function b(){return i.T3?.isMobile}function S(){return b()||(0,u.vM)()}const C=(t,e)=>t.replace(/<path\s[^>]*>/i,t=>-1===t.indexOf("fill=")?`${t.slice(0,-1)} fill="${e}">`:t);function k(t=(0,p.$t)()){return/Edg/.test(t)}function T(t,e){return(function(t=(0,p.$t)()){return k(t)&&S()}()||Boolean("emmx-launcher-feeds"===(0,a.En)()?.toLowerCase()))&&t?t:e}function x(t){const e=(0,h.a)(),n="iOS"===e?.platform;switch(t){case"article":return n?"saiar":"saaar";case"gallery":return n?"saiga":"saaga";case"video":return n?"saiwatch":"saawatch";case"videoinf":return n?"saivi":"saavi";default:return"saaar"}}function A(){const t=($()||(0,s.ns)())&&!(0,u.vM)();return!b()&&(function(){const t=((0,a.En)()??new URL(window.location.href).searchParams.get("ocid")??"").toLowerCase(),e=(i.T3.CurrentMarket?.split("-")||[])[0];return"cp_msn_cmc"===t&&"en"===e}()||t)}function $(){return"gem"===R((0,p.$N)())}function I(t){const e=P(t);if(!e)return;const n=e.contentId;return decodeURIComponent(n)!==n?n:encodeURIComponent(n)}function P(t){const e=new RegExp("^.*/(?<contentPrefix>[Aa][Rr]||[Ss]{2}||[Vv][Ii]||[Vv][Dd]||[Vv][Pp]||[Vv][Ss])-(?<contentId>[a-zA-Z0-9]{6,8})(([?].*)||#.*)?$"),n=new RegExp("^.*/(?<contentPrefix>[Vv][Ii])-(?<contentId>.*?)(([?].*)||#.*)?$"),i=new RegExp("^.*/(?<contentPrefix>[Ii][Ss]||[Gg][Mm])-(?<contentId>[a-zA-Z0-9]*)(([?].*)||#.*)?$"),r=t.match(e)||t.match(n)||t.match(i);return r&&r.groups?.contentId&&"vn/video"!==r.groups.contentId?r.groups:null}function R(t){if(!t)return null;const e=P(t);if(!e||!e.contentPrefix)return null;switch(e.contentPrefix.toLowerCase()){case"ar":return"article";case"ss":return"gallery";case"vi":return e.contentId&&e.contentId.length>=6&&e.contentId.length<=8?"video":"webcontent";case"vp":case"vs":return"video";case"is":return"insight";case"gm":return"gem"}return null}},29923:function(t,e,n){n.d(e,{E:function(){return h}});var i,r=n(55457);!function(t){t.backgroundImageType="backgroundImageType",t.backgroundImage="backgroundImage",t.backgroundSettingPreferences="backgroundSettingPreferences",t.irisPreferences="irisPreferences"}(i||(i={}));const o=new Set(["Video","CMSImage"]);var s=n(48172),a=n(14588),c=n(83542),u=n(10610),d=n(77246),l=n(66600);class h extends c.i{get backgroundSettingPreferencesState(){return this._backgroundSettingPreferencesState?JSON.parse(this._backgroundSettingPreferencesState):null}set backgroundSettingPreferencesState(t){this._backgroundSettingPreferencesState=t?JSON.stringify(t):null}constructor(t,e,n,i,o,s,a){super(t,e,n,i,o,s,a),this._backgroundSettingPreferencesState=null,this.config&&!this.config.disableBackgroundGallery&&(this.settingsAPI=(0,d.S)()&&window.chrome&&window.chrome.ntpSettingsPrivate,this.initializePreferences(r.lD,"backgroundSettingPreferencesState"),this.initializeIrisSurfaceInfoPreferences(),this.registerOnPrefsChangeCallback())}hotSpotsDisplayStatusUpdated(t){a.Y?.hotSpotsDisplayStatusUpdated?.getActionSender(this)?.send(t)}updateBackgroundGalleryDisplayed(t){a.Y?.updateBackgroundGalleryDisplayed?.getActionSender(this)?.send(t)}updateGallerySelectedBackground(t){a.Y?.updateGallerySelectedBackground?.getActionSender(this)?.send(t)}videoSettingsUpdated(t){a.Y?.videoSettingsUpdated?.getActionSender(this)?.send(t)}updateEventGleam(t){a.Y?.updateEventGleam?.getActionSender(this)?.send(t)}async initializePreferences(t,e){if(!await this.isNurturingApiAvailable())return;const n=await s.f.getPreferenceSetting(t,!0);this[e]=n&&n.value}async initializeIrisSurfaceInfoPreferences(){if(!await this.isNurturingApiAvailable())return;const t=await s.f.getPreferenceSetting("campaigns");if(!t||!t.value||t.value.length<=0)return;const e=t.value;this.irisBackgroundSurfaceInfo=this.getIrisBackgroundSurfaceInfo(e)}async registerOnPrefsChangeCallback(){this.settingsAPI&&this.settingsAPI.onPrefsChanged.addListener(async t=>{const e=t[0],n=this.getModifiedPreference(e);if(n)if(n===i.backgroundSettingPreferences){const t=e.value,n=this.getPreferenceKeyIndex(t,"background_setting_preferences");if(n<0)return;const i=this.backgroundSettingPreferencesState;if(this.backgroundSettingPreferencesState=t[n].value,u.K.setBackgroundSettingsPreferencesCache(this.backgroundSettingPreferencesState),!i||!this.backgroundSettingPreferencesState)return;const r=i.backgroundSelectionMetadata,s=this.backgroundSettingPreferencesState.backgroundSelectionMetadata;if(!u.K.getShouldRerender())return void u.K.setShouldRerender(!0);i.selectedVideoSetting!==this.backgroundSettingPreferencesState.selectedVideoSetting?(a.Y.videoSettingsUpdated.getActionSender(this)?.send(this.backgroundSettingPreferencesState.selectedVideoSetting),a.Y.refreshBackgroundMetadata.getActionSender(this)?.send()):!r&&s?a.Y.updateGallerySelectedBackground.getActionSender(this)?.send(s):r&&!s?(a.Y.refreshBackgroundMetadata.getActionSender(this)?.send(),a.Y.updateSelectionInGallery.getActionSender(this)?.send()):r&&s&&!(0,l.A)(r,s)&&(r.provider===s.provider||o.has(r.provider)&&o.has(s.provider))&&a.Y.updateGallerySelectedBackground.getActionSender(this)?.send(s)}else if(n===i.irisPreferences){const t=e.value,n=this.getPreferenceKeyIndex(t,"campaigns");if(n<0)return;const i=this.irisBackgroundSurfaceInfo,r=t[n].value;if(this.irisBackgroundSurfaceInfo=this.getIrisBackgroundSurfaceInfo(r),!i||!this.irisBackgroundSurfaceInfo)return;i.currentCreativeId!==this.irisBackgroundSurfaceInfo.currentCreativeId&&a.Y.refreshBackgroundMetadata.getActionSender(this)?.send()}})}getIrisBackgroundSurfaceInfo(t){if(t&&!(t.length<=0))return t.find(t=>"88000244"===t.placement)||void 0}getModifiedPreference(t){if("ntp.background_image_type"===t.key)return i.backgroundImageType;if("ntp.user_nurturing"===t.key){const e=t.value,n=this.getPreferenceByKey(e,r.lD);if(!(0,l.A)(this.backgroundSettingPreferencesState,n))return i.backgroundSettingPreferences}}getPreferenceByKey(t,e){const n=this.getPreferenceKeyIndex(t,e);return n>-1?t[n].value:{}}getPreferenceKeyIndex(t,e){return t.findIndex(t=>t.key===e)}async isNurturingApiAvailable(){return s.f.isApiAvailableToUse()}}},30071:function(t,e,n){n.d(e,{nX:function(){return U},x5:function(){return W},je:function(){return B}});var i=n(89151),r=n(30817),o=n(65022),s=n(93468),a=n(27833),c=n(14012);function u(t){window.windowsPerfMarker&&window.windowsPerfMarker(t)}var d=n(15387),l=n(70177),h=n(82238),f=n(23768),p=n(18263),g=n(20205),m=n(74195),w=n(6092),y=n(27191),v=n(50677),b=n(28006),S=n(37805),C=n(96241),k=n(12870);const T={didPreload:!1,timeTakenForRevealInMs:0,pageRevealed:!0};function x(){const t=S.V.getInstance().rootReducer.connector(b._N);if(!t||!k.Rb.IsPreload)return Promise.resolve(T);const e=t.getCurrentState();if(e&&e.pageRevealedData){const t=e.pageRevealedData;return Promise.resolve(t)}return new Promise(t=>{C.$.pageVisibilityChange.registerObserver(e=>{const n=e.params[0];t(n)})})}var A=n(96851);const $={prefix:"SW",startTime:"StartTime",navigationFetchTime:"NavigationFetchTime",navigationCacheReadTime:"NavigationCacheReadTime",navFeedHandlerComplete:"NavFeedHandlerComplete",navFeedHandlerWillRespond:"NavFeedHandlerWillRespond",navFeedHandlerDidRespond:"NavFeedHandlerDidRespond",navFeedHandlerStart:"NavFeedHandlerStart",navFeedCacheDuration:"NavFeedCacheDuration",navParseDuration:"NavParseDuration",navFeedCachedStatus:"NavFeedCachedStatus",navFeedCacheReadTime:"NavFeedCacheReadTime",navFeedFetchTime:"NavFeedFetchTime",navFeedCacheOpenDuration:"NavFeedCacheOpenDuration",navCachedResponseAge:"NavCachedResponseAge",navRoutingReason:"NavRoutingReason",navRoutingDuration:"NavRoutingDuration",clientNavCacheReadStart:"clientNavCacheReadStart",clientNavFetchStart:"clientNavFetchStart"};function I(t){return[$.prefix,t].filter(t=>t.length>0).join(".")}var P=n(53685),R=n(29320);var M=n(98216);const _={hit:1,"hit-mem":2,miss:0};function E(t){const e=(0,r.Zm)();F(e)&&(t[I($.startTime)]=function(t){return t.requestStart-t.workerStart}(e),t[I($.navigationFetchTime)]=function(t){const e=t.transferSize;if(0===e||300===e)return-1;return t.responseStart-t.requestStart}(e),t[I($.navigationCacheReadTime)]=function(t){const e=t.transferSize;return 0===e||300===e?t.responseStart-t.requestStart:-1}(e),async function(t){if(!F())return;const e=await async function(){return(0,R.O)({type:"NAV_PERF_DATA"})}();if(!e)return;e.cacheLookupStatus&&(t[P.R0]=_[e.cacheLookupStatus]);let n={};if(e&&e.swTimeOrigin){const t=e.swTimeOrigin;e.resourceTiming=D(e.resourceTiming,t),n=D(e,t,"SW."),n.clientTimeOrigin=performance.timeOrigin}M.YT.sendLoadTimeEvent({markers:n}),window._swTimings=n}(t))}function F(t){return!!(t=t||(0,r.Zm)())&&Boolean(t.workerStart)}function D(t,e,n=""){if(!t)return;const i={};for(const r in t){const o=t[r];"number"!=typeof o||o<0?i[`${n}${r}`]=o:r.endsWith("Start")||r.endsWith("End")?i[`${n}${r}`]=Math.round(o+e-performance.timeOrigin):r.endsWith("Time")?i[`${n}${r}`]=Math.round(o):i[`${n}${r}`]=o}return i}var O=n(77246),N=n(53829),L=n(6860);function B(t,e,n){if(!(0,O.S)())return;const a=(0,h.Kl)();a&&e===i.Ci.Primary&&f.m.updateAboveTheFoldVisuallyReady.getActionSender(a).send(performance.now());const c=e===i.Ci.Primary,u=(0,i.wI)(e),d=(0,r.ZF)();if(d.IncompleteMarkers=u?.join(","),(0,p.l)())return void t([]);let g=[];const m=c?o.N61:o.Fdr;g=c?(0,i.z1)():(0,i.Yy)();const w=(0,i.$y)(),y=w.marker||"None",v=w.value||"None";let b=", Visual dependency callback was unavailable.";if(n){const t=n();b=t.length?`, Incomplete visual dependencies: ${JSON.stringify(t)}.`:", No pending visual dependencies."}if((0,s.vV)(m,"Missing perf markers",`Missing perf markers: ${JSON.stringify(u)}${b} Last Marked: ${y} ${v}`),window?.dispatchEvent(new Event("PerfMarkMissErr")),window.isSSRCompleted&&u.includes("TTF")){const t=[...(0,l.Kh)().entries()].map(([t,e])=>`${t}:${e}`).join(",");(0,s.vV)(o.BZ4,"Missing TTF marker in SSR page",`Elements that are still in top-down hydration process: ${t}`)}const S=(0,i.xY)();S&&c&&u.includes(`TTVR.${S}`)&&((0,s.vV)(o.bLg,"Expected feed timed out while loading",`Expected feed timed out while loading: ${S}`),d&&console.log(JSON.stringify(d))),window.renderCacheEnabled&&c&&(0,N.nB)(),t(g)}async function U(t,e={}){const n=(0,r.ZF)(),{onAfterPageTimingsUpdated:o,disableLoadTimeEvent:s,reportEntityMetrics:l}=e,h=(0,r.Zm)();if(h){const{domComplete:t,loadEventStart:e,responseStart:i,domainLookupEnd:r,domainLookupStart:o,domInteractive:s,domContentLoadedEventStart:u,domContentLoadedEventEnd:d,fetchStart:l,connectEnd:f,connectStart:p,workerStart:g,responseEnd:m,requestStart:y,unloadEventStart:v,unloadEventEnd:b,type:S,systemEntropy:C,secureConnectionStart:k,redirectCount:T,redirectEnd:x,redirectStart:A}=h;n.timeToFirstByte=i,n.timeToDomComplete=t,n.timeToOnLoad=e,n.domainLookupTime=r-o,n.timeToFetchStart=l,n.timeToWorkerStart=g,n.connectStart=p,n.connectTime=f-p,n.requestStart=y,n.requestTime=i-y,n.responseStart=i,n.responseTime=m-i,n.requestResponseTime=m-y,n.fetchTime=m-l,n.swInitTime=l-g,n.swFetchTime=o-l,n.timeToUnload=b-v,n.timeToInteractive=s,n.domContentLoadedEventStart=u,n.domContentLoadedEventEnd=d,n.navigationType=S,n.systemEntropy=C,n.timeToSecureConnection=k-p,n.redirectStart=A,n.redirectEnd=x,n.redirectCount=T,function(t){t.buildVer=w.T3.BuildVersion||-1}(n),(0,a.Ak)(n),(0,c.vO)(n),(0,c.XL)(n),(0,c.yj)(n),(0,c.mo)(n),(0,c.GN)(n),(0,a.KY)(n),(0,c.sV)(n),(0,a.Rg)(n)}(0,c.Wl)(n),(0,c.Hx)(n);for(const e of t){const t=e[0];n[t]||(n[t]=e[1])}const f=(0,i.eD)();f&&(n.ReasonForTTVR=f);const b=n[y.$w];b&&(u(y.cn),u(y.Jc),(0,v.Wy)(b),(0,a.Ub)(n)),g.L.getConfigTimings(n),E(n),n.wasBrowserHiddenAtLeastOnce=(0,p.l)(),(0,d.V)(),o&&o(),(0,A.TR)(),Promise.all([x(),(0,A.GP)()]).then(()=>{(0,v.CJ)(n),s||(0,L.o)(window,{reportEntityMetrics:l})}),(0,m.Q6)({id:"PostTtvr",type:"command"})}async function W(t,e,n){const i=(0,r.ZF)(),o=(0,r.zq)();if((t=t.filter(t=>!(t[0]in i))).forEach(t=>{const e=t[0];e in i||(o[e]=t[1],i[e]=t[1])}),m.WD){const t=await(0,m.H$)({id:"perfmarkers"},4e3);if(t&&t.fetched){const e=t.payload;e&&e["WW.MyFeed"]&&(e.FeedRequest=e["WW.MyFeed"]),Object.assign(o,t.payload),Object.assign(i,t.payload)}}o.TimeToSendSecondaryPerfMarkers=Math.round(performance.now()),e&&e(),n||Promise.all([x(),(0,A.GP)()]).then(()=>{(0,L.o)(window,{isSecondaryBeacon:!0})})}},30158:function(t,e,n){n.d(e,{$O:function(){return a},Ag:function(){return u},f7:function(){return c}});var i=n(6092),r=n(15098),o=n(5518),s=n(77246);function a(){return i.T3.WidgetAttributes&&"shopping"==i.T3.AppType}const c=(0,r.L)(async()=>{let t;const e=(0,s.S)()&&window.__pw_options,n=e&&e.auth&&e.auth.serviceToken;if("object"==typeof n&&n.then){const e=3e3;t=await Promise.race([n,(0,o.Y_)(e).then(()=>null)])}return t||{tokenValue:void 0,accountType:void 0,muid:void 0}});function u(){c.cache.clear()}},30216:function(t,e,n){var i,r;n.d(e,{J:function(){return i},X:function(){return r}}),function(t){t[t.none=0]="none",t[t.enabled=1]="enabled",t[t.saved=2]="saved",t[t.hide=4]="hide",t[t.showMore=8]="showMore",t[t.showFewer=16]="showFewer",t[t.mute=32]="mute",t[t.hidden=64]="hidden",t[t.report=128]="report",t[t.adFeedbackSubmitted=256]="adFeedbackSubmitted",t[t.hideTopic=512]="hideTopic",t[t.dismiss=1024]="dismiss",t[t.adPrivacy=2048]="adPrivacy",t[t.feedback=4096]="feedback",t[t.whyAmISee=8192]="whyAmISee",t[t.followedPublisher=16384]="followedPublisher",t[t.followedTopic=32768]="followedTopic",t[t.hideAds=65536]="hideAds",t[t.blockAdvertiser=131072]="blockAdvertiser"}(i||(i={})),function(t){t.Hide="Hide",t.Like="Like",t.Disabled="Disabled",t.Dislike="Dislike",t.Mute="Mute",t.MuteWebVideo="MuteWebVideo",t.Save="Save",t.Share="Share",t.ShowMore="ShowMore",t.ShowFewer="ShowFewer",t.Divider="Divider",t.Report="Report",t.ManageInterests="ManageInterests",t.ReportAd="ReportAd",t.AdPrivacy="AdPrivacy",t.AdChoice="AdChoice",t.HideTopic="HideTopic",t.Feedback="Feedback",t.WhyAmISee="WhyAmISee",t.CuratedByCopilot="CuratedByCopilot",t.FollowPublisher="FollowPublisher",t.FollowTopic="FollowTopic",t.Upvote="Upvote",t.Downvote="Downvote",t.BlockPublisherWithoutName="BlockPublisherWithoutName",t.Copilot="Copilot",t.OpenNewTab="OpenNewTab",t.OpenNewWindow="OpenNewWindow",t.LocationEdit="LocationEdit",t.LocationManage="LocationManage",t.CopyLink="CopyLink",t.CopyImageLink="CopyImageLink",t.ImageAttribution="ImageAttribution",t.AiDisclaimerAttribution="AiDisclaimerAttribution"}(r||(r={}))},30817:function(t,e,n){n.d(e,{I:function(){return m},Tm:function(){return p},WP:function(){return l},ZF:function(){return u},Zm:function(){return g},_P:function(){return h},gB:function(){return a},gU:function(){return f},pP:function(){return s},pR:function(){return c},zq:function(){return d}});var i=n(77246),r=n(17720);const o="ssrTimeOrigin",s="ssrTimeEnd",a="SSR.InfopaneRendered",c="ssrTimeServerEntry";function u(){return(0,i.S)()?window._pageTimings||(window._pageTimings={}):r.vv.get("__diagnostics_pageTimings",()=>({}))}function d(){return(0,i.S)()?window._secondaryPageTimings||(window._secondaryPageTimings={}):r.vv.get("__diagnostics_secondaryPageTimings",()=>({}))}function l(){return(0,i.S)()?window._webVitalsPageTimings||(window._webVitalsPageTimings={}):r.vv.get("__diagnostics_webVitalsPageTimings",()=>({}))}function h(t,e=!0){const n=u();if(!t||!n||e&&n.TTVR)return;const i=n[t]||(n[t]=0);n[t]=i+1}function f(){return(0,i.S)()?performance.now():performance.now()-u()[o]}function p(){if((0,i.S)()&&navigator)return{memory:navigator.deviceMemory,cpu:navigator.hardwareConcurrency,networkSpeed:navigator.connection&&navigator.connection.effectiveType}}function g(){if(!(0,i.S)())return;const t=(performance.getEntriesByType("navigation")||[])[0],e={};for(const n in t){const i=t[n];e[n]="number"==typeof i?Math.round(i):i}return e}function m(t="navigate"){if(!(0,i.S)())return!1;const e=performance.getEntriesByType("navigation");return e&&e[0]&&e[0].type===t}},30871:function(t,e,n){n.d(e,{l:function(){return o}});var i=n(24678),r=n(14588);class o{reduce(t,e){if(!t)return{backgroundGalleryDisplayed:!1};if(!e)return t;let n;return i.n.handleAction(e,r.Y.backgroundDataStateLoaded,e=>{n={...t,...e}}),i.n.handleAction(e,r.Y.updateBackgroundGalleryDisplayed,e=>{n={...t,backgroundGalleryDisplayed:e}}),i.n.handleAction(e,r.Y.updateGallerySelectedBackground,e=>{n={...t,backgroundSelectionMetadata:e}}),i.n.handleAction(e,r.Y.hotSpotsDisplayStatusUpdated,e=>{n={...t,shouldRenderHotSpots:e}}),i.n.handleAction(e,r.Y.videoSettingsUpdated,e=>{n={...t,selectedVideoSetting:e}}),i.n.handleAction(e,r.Y.updateEventGleam,e=>{n={...t,eventGleam:e}}),n||t}}},31086:function(t,e,n){n.d(e,{H:function(){return r},q:function(){return o}});var i=n(46417);function r(t,e){const n=t.length+e.length,i=[];let r=0,o=0,s=0;for(let a=0;a<n;a++)o<e.length&&e[o].locationIndex===s?i[s++]=e[o++]:r<t.length?i[s++]=t[r++]:i[s++]=e[o++];return i}function o(t,e){const n=[];let r=0,o=0;const s=(0,i.A)(e,"slot"),a=t.length+e.length;for(let e=0;e<a;e++)e>=s[o]?.slot?n.push(s[o++]):r<t.length&&n.push(t[r++]);for(;o<s.length;)n.push(s[o++]);return n}},31653:function(t,e,n){n.d(e,{ET:function(){return c},HJ:function(){return r},Jg:function(){return a},nC:function(){return o},nt:function(){return u},q9:function(){return s},uP:function(){return i}});const i="login_hint",r=300,o=3600,s="InteractionRequiredAuthError",a="BrowserAuthError",c="no_tokens_found",u="9188040d-6c67-4c5b-b112-36a304b66dad";var d;!function(t){t[t.NotAttempted=0]="NotAttempted",t[t.Fail=1]="Fail",t[t.FailTrySSO=2]="FailTrySSO",t[t.Success=3]="Success"}(d||(d={}))},31774:function(t,e,n){n.d(e,{FS:function(){return b},Mb:function(){return S},Q3:function(){return C},xs:function(){return v},yR:function(){return k}});var i=n(77246),r=n(44449),o=n(98216),s=n(1732),a=n(65022),c=n(93468),u=n(6092),d=n(12870),l=n(33918);const h=/^[a-zA-Z0-9_-]*(?:infopane|info)-\d+/,f={v2:"latest/js/thirdparty/doubleverify/v2/msftdvbm.js"},p=new Map,g=20;let m;const w=["cs-responsive-card","msft-content-card","cs-native-ad-card","cs-responsive-infopane","cs-native-ad-card-24","cs-content-card","msft-native-ad","cs-infopane-dense-card","cs-infopane-card-28","interstitial-native-ad-card"];function y(t,e){let n=(0,u.rA)().StaticsUrl;return n.endsWith("/")||(n+="/"),t&&e?function(t,e){let n=null;const i=/https:\/\/adsdkprod\.azureedge\.net\/assets\/dv\/(v\d+)\/msftdvbm\.js/i,r="latest/js/thirdparty/doubleverify/{version}/msftdvbm.js";try{const o=t.match(i);if(o&&o[1]){const t=o[1];return`${e}${r.replace("{version}",t)}`}n=`URL does not match expected DV script pattern: ${t}`}catch(t){n=`Error occurred while overriding DV script URL: ${t.message}`,(0,c.vV)(a.fze,n)}return""}(e,n):`${n}${f.v2}`}function v(t,e,n){if(!t)return;const i=C(t),r=d.Rb?.CurrentFlightSet?.has(l.pL),o=r?i.get("doubleverify.com-omid"):i.get("DV");if(o&&o.length>0){const t=o[0]?.ext,i=t?.vendorKey,s=`p:${T(r&&"doubleverify.com-omid"===i?t?.verification_parameters:t?.verificationParameters,r)||"null"}|i:${e||"null"}|f:${n}|xdr:${r}`;(0,c.vV)(a.tpw,`DoubleVerify trackers present but skipped processing. ${s}`,void 0,{...a.tpw.pb,userImpacting:!0})}}function b(t){if(!t)return{shouldAttach:!1};const e=t.eventTrackers&&t.eventTrackers.length>0,n=!!t.nativeAdId,i=n&&k(t.nativeAdId),r=t.enableInfopaneDVBeacon,o=d.Rb?.CurrentFlightSet?.has(l.pL);if(!e||!i||n&&r||v(t.eventTrackers,t.nativeAdId,r),!function(t){return!!(t.enableInfopaneDVBeacon&&t.nativeAdId&&k(t.nativeAdId)&&t.eventTrackers&&t.eventTrackers.length>0)}(t))return{shouldAttach:!1};const s=C(t.eventTrackers),a=o?"doubleverify.com-omid":"DV",c=s.has(a);return{shouldAttach:c,dvTrackers:c?s.get(a):void 0}}function S(t,e,n){if(!(0,i.S)()||!t||!e)return;const h=o.YT.getRequestId(),f=`${e}`;if(p.has(h)&&p.get(h)?.has(f))return;p.has(h)||(p.set(h,new Set),function(){if(p.size>g){const t=p.size-g;Array.from(p.keys()).slice(0,t).forEach(t=>{p.delete(t)})}}()),p.get(h)?.add(f);const v=d.Rb?.CurrentFlightSet?.has(l.pL),b=(0,r.sx)(n,"attachDVScript")((t,e,n,i)=>{const r=i?t[0]?.ext?.verification_parameters:t[0]?.ext?.verificationParameters,d=T(r,i),l=function(t,e,n,i){if(!t||!e)return;const r=function(t,e){if(void 0===m){const n=y(t,e);if("edgeChromium"===u.T3.AppType){const t=(0,s.TK)(n,"DvUrlPolicy"),e=t||void 0;if(!e||"about:blank#error"===e)return void(0,c.vV)(a.fze,"DV script url is not trusted type compliant.");m=e}else m=n}return m}(n,i);if(!r)return;try{const i=n?t:t.split(";").filter(t=>t.includes(":")).map(t=>t.split(":")).map(([t,e])=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&"),o=new URL(r),s=new URLSearchParams(i);s.set("tagType","display"),s.set("mon","1"),s.set("blk","0"),s.set("ee_dp_js","1");const a=s.toString();return o.hash=`${a}&btreg=${e}&bttag=${w.join("|")}`,o.toString()}catch(t){return void(0,c.vV)(a.fze,`Failed to construct DV script URL: ${t}`)}}(r,n,i,t[0]?.url);if(!l)return void(0,c.vV)(e,"Failed to create sanitized DV script URL");const h=document.createElement("script");h.async=!0,h.src=l,h.onerror=t=>{(0,c.vV)(e,`Failed to download DV JS ${t}`)},document.body.appendChild(h),d&&o.YT.addOrUpdateTmplProperty("dvattachedid",d)});b(t,n,e,v)}function C(t){const e=new Map;return t.forEach(t=>{const n=t?.ext?.vendorKey;n&&!e.has(n)&&e.set(n,[]),n&&e.get(n)?.push(t)}),e}function k(t){return!!t&&h.test(t.toLowerCase())}function T(t,e){if(t)try{const n=e?t.split("&"):t.split(";");for(const t of n){const[n,i]=e?t.split("="):t.split(":");if(n&&"plc"===n.trim()&&i)return i.trim()}}catch(t){return}}},31843:function(t,e,n){n.d(e,{Ej:function(){return d},o9:function(){return h},qu:function(){return l},rL:function(){return f}});var i=n(6092),r=n(15301),o=n(89151);const s=`${(0,i.rA)().StaticsUrl}latest/js/thirdparty/viewability/banner.5.8.21.js`,a=`${(0,i.rA)().StaticsUrl}latest/js/thirdparty/ast/ast_ntp.1.10.50.js`,c=()=>"edgeChromium"===i.T3.AppType,u=()=>c()?a:"https://adsdk.microsoft.com/ast/ast.js",d=()=>c()?s:"";function l(){const t=u(),e=performance.getEntriesByName(t,"resource")[0];e&&((0,o.tD)("TTAdSdk.ScriptRequest",e.fetchStart),(0,o.tD)("TTAdSdk.ScriptLoaded",e.responseEnd))}async function h(){window.apntag=window.apntag||{anq:[]},window.apntag.anq=window.apntag.anq||[],await(0,r.k)({id:"ad-ast-sdk",src:u(),container:document.head,retryDelayMs:200,retryNumber:5})}function f(){return!!window.apntag?.setPageOpts}},32395:function(t,e,n){var i;n.d(e,{hK:function(){return l},n3:function(){return c},En:function(){return r},IF:function(){return o},Er:function(){return f},Ag:function(){return u},Pt:function(){return d}}),function(t){t.DesktopL1="weatherdesktopl1",t.DesktopL2="weatherdesktopl2",t.PWA="weatherpwa",t.EdgeFeatured="edgefeatured",t.WINAPP="weather-app-win",t.Weather_Mobile_App="weather-app-mobile",t.XIAOMI="xiaomi",t.OPPO="oppowx",t.XIAOMI_ANDROID_GO="xmweather-gominus1",t.XIAOMI_BROWSER="xmweather-browser",t.WINDOWS_HEADER_PREFIX="win",t.EDGE_ARTICLE_PREFIX="msnar",t.SuperApp="weather-super-app",t.WINDOWS_OCID_PREFIX="winp2"}(i||(i={}));new Set(["msedgdhphdr","msedgntphdr","msedgntp","msedgdhp","entnewsntp"]),new Set(["entnewsdhp","entnewsntp","msedgdhp","msedgntp","msedgdhphdr","msedgntphdr"]);function r(t){let e;if(t instanceof URL)e=t.searchParams;else if(t instanceof URLSearchParams)e=t;else if("string"==typeof t)try{e=new URL(t).searchParams}catch(t){e=void 0}return o(e,"ocid")}function o(t,e,n){if(t&&e){const i={value:t.get(e)||void 0};if(!i.value&&n&&n.length>0)for(let e=0;e<n.length&&(i.value=t.get(n[e])||void 0,!i.value);++e);if(!i.value){const n=e.toLowerCase();t.forEach(function(t,e){!i.value&&e.toLowerCase()===n&&t&&(i.value=t)})}return i.value}}var s=n(6092),a=n(67387);function c(t,e,n){if(!t)return null;let i;try{i=t instanceof URL?new URL(t.href):new URL(t)}catch(t){return null}if(i&&(n||i.host.includes("msn.com")||i.host.includes(".msn.cn")))for(const[t,n]of Object.entries(e))t&&n&&i.searchParams.set(t,n);return i.href}function u(t,e){if(!t)return null;let n;try{n=new URL(t instanceof URL?t.href:t)}catch(t){return null}return n&&e&&e.length&&e.forEach(t=>{n.searchParams.delete(t)}),n.href}function d(t){if("edgeChromium"===s.T3.AppType)return!1;const e=r(t),n=e?.toLowerCase();return a.B9.has(n)||a.Ju.has(n)}n(94623);function l(t,e,n){return c(t,{cvid:e,ocid:n})}new Set(["wind_spot_2","wind_spot_desktop","widgetonlockscreen","widgetonlockscreenwin10","winp2fpwidgetboard"]);const h=new Set(["wind_spot_2","wind_spot_desktop"]);function f(t){return h.has(t)}},32633:function(t,e,n){var i;n.d(e,{f:function(){return i}}),function(t){t.InteractionRequired="userInteractionRequired",t.AuthProviderNotSupported="authProviderNotSupported",t.MaySucceedOnRetry="fetchRetryableError",t.AuthPrivateNotSupportedForMAM="authPrivateNotSupportedForMAM",t.OtherError="authFetchError"}(i||(i={}))},32886:function(t,e,n){n.d(e,{$:function(){return i},h:function(){return r}});const i=864e5,r=36e5},33107:function(t,e,n){function i(t,e,n,i=!1,r=!1,o){return new t(e,n,i,r,o)}n.d(e,{S9:function(){return s},ST:function(){return o},m0:function(){return a},zr:function(){return i}});const r=(0,n(98763).bP)();function o(t){r.set(t)}const s=(t,e,n)=>r.call(t,e,n);function a(t,e,n){return n?n.instrumentPromise(e,t):t()}},33292:function(t,e,n){n.d(e,{$:function(){return l}});var i=n(7258),r=n(15098),o=n(65432),s=n(74166),a=n(98216),c=n(8598),u=n(76980);const d=(0,r.L)(()=>(0,u.tW)((0,s.Ux)("MUID"),100)<2);function l(t,e,n=null){a.YT.sendAppErrorEvent({...t,message:e,pb:{...t.pb,customMessage:(0,i.M5)(n),authRecordTrail:d()&&c.xf.getRecordsTail()||void 0,tokenCacheState:(0,o.hF)()}})}},33462:function(t,e,n){n.d(e,{$C:function(){return M},AK:function(){return G},CP:function(){return a},FU:function(){return h},Hw:function(){return C},I4:function(){return r},IJ:function(){return _},JC:function(){return i},JU:function(){return q},Jl:function(){return f},LN:function(){return V},Lw:function(){return L},ME:function(){return m},N_:function(){return R},Nd:function(){return j},Nm:function(){return o},OF:function(){return x},OT:function(){return A},Ql:function(){return g},RA:function(){return K},RY:function(){return D},SU:function(){return E},T3:function(){return z},Vl:function(){return b},Zc:function(){return k},cg:function(){return l},dT:function(){return $},dg:function(){return Z},eV:function(){return J},fV:function(){return Y},g9:function(){return u},hi:function(){return Q},hq:function(){return T},j$:function(){return c},jr:function(){return B},kA:function(){return w},kT:function(){return v},lt:function(){return X},nC:function(){return d},nw:function(){return O},o7:function(){return U},pJ:function(){return W},pN:function(){return tt},qK:function(){return I},tT:function(){return s},u2:function(){return p},vE:function(){return N},vN:function(){return y},vO:function(){return H},wD:function(){return F},xs:function(){return S},y6:function(){return P}});const i="#FFFFFF",r="#2169EB",o="#FFF",s="#FFF0EF",a="#FF9F99",c="#EF6864",u="#D63F40",d="#C0413F",l="#3F2524",h="#34A84E",f="#007F30",p="#242424",g="#FFF",m="rgba(0, 0, 0, 0.1)",w="rgba(0, 0, 0, 0.15)",y="#FFFFFF",v="rgba(255, 255, 255, 0.6)",b="#000000",S="#23272B",C="#FFFFFF",k="#EDF2F9",T="#DADEE5",x="rgba(255, 255, 255, 0.1)",A="rgba(255, 255, 255, 0.15)",$="#1B1D1F",I="rgba(0, 0, 0, 0.6)",P="rgba(0, 30, 68, 0.1)",R="#FFFFFF",M="#FFFFFF",_="#8D9197",E="#1E2024",F="#FFFFFF",D="#000000",O="#26292E",N="#35383D",L="#EAEFF5",B="#F6F9FC",U="rgba(0, 0, 0, 0.2)",W="#F0F4FF",V="#26292E",H="#24262A",z="#474B50",j="#C3C8CE",q="brightness(0) saturate(100%) invert(90%) sepia(9%) saturate(164%) hue-rotate(173deg) brightness(90%) contrast(87%)",G="#33302E",J="#E3CBBC",Q="#FEE5CE",K="#1D2439",X="#24282F",Y="#F6FAFE",Z="#8D9198",tt="#6E7279"},33918:function(t,e,n){n.d(e,{EW:function(){return c},HN:function(){return g},Hm:function(){return v},IY:function(){return m},J4:function(){return s},Kb:function(){return h},L2:function(){return b},MS:function(){return f},OY:function(){return a},Q9:function(){return r},ZW:function(){return l},fK:function(){return i},h0:function(){return d},iT:function(){return o},jM:function(){return u},pL:function(){return y},r7:function(){return p},s$:function(){return w}});const i="v3",r="v3.1",o="/resolver/api/resolve/",s="prg-pr2-",a="prg-pw-",c="prg-",u="prg-crsfdheadrem",d="prg-1sw-",l="https://assets.msn.com",h="https://assets.msn.cn",f="prg-pr2-manupcs",p="remflighthead",g="prg-ad-lvrmp-rf",m="prg-ad-ndanid",w="prg-ad-xan-noncnna",y="ads-xandr-t";var v;!function(t){t.Treatment1="prg-ad-xan-tmx1",t.Treatment2="prg-ad-xan-tmx2",t.Treatment3="prg-ad-xan-tmx3",t.Treatment4="prg-ad-xan-tmx4",t.Treatment5="prg-ad-xan-tmx5",t.Treatment6="prg-ad-xan-tmx6"}(v||(v={}));const b="prg-ad-xan-ceto"},33930:function(t,e,n){n.d(e,{AA:function(){return C},zQ:function(){return x},Yd:function(){return T},tR:function(){return S}});var i=n(74195),r=n(49084),o=n(6092),s=n(67387),a=n(85766),c=n(44369),u=n(48608),d=n(74166),l=n(28828);const h=()=>{const t=(0,d.Ux)(s.v1,!0),e=t&&(0,l.B)(t),{child:n,expiredOn:i}=e||{};return(void 0!==n||void 0!==i)&&e},f=()=>{const t=h();if(!t)return!0;const e=t.expiredOn,n=new Date(e),i=!0;if(!n.getTime())return i;const r=new Date;return(n<r||n.getTime()-r.getTime()<2592e6)&&i};var p=n(86948),g=n(8353),m=n(98216),w=n(8597),y=n(63418),v=n(693),b=n(23572);async function S(t,e,n,o){const s=(0,b.aK)(),a=s&&s.startMeasure("updateAuthState").endMeasure;try{const t=!n&&(i.WD||i.TE);if(t){const n=await(0,i.H$)({id:"appanoncookie"},window.location.port?1500:null),r=n?.payload?.appAnonCookieExists||!1;await k(e,r,t)}(0,r.FS)()?(await(0,g.n$)(),await k(e,!1,t)):(await C(o),await k(e,void 0,t))}catch(e){await k(),t(e)}a&&a()}async function C(t,e){(0,r.FS)()?await(0,g.n$)():function(){if((0,r.x1)()){if(!(0,r.lp)()&&"edgeChromium"!==o.T3.AppType)return f();{const t=(0,a.eM)();if((0,u.Ki)()&&"MSA"===t.accountType||(0,d.XJ)(a.wj))return f()}}return!1}()&&await async function(t,e){const n=new URL(`https://api.msn.${o.T3.IsChinaCompliance?"cn":"com"}/auth/cookie/appanon`),i={credentials:"include"};t&&(i.headers=t);const s=e||(r.Aj[o.T3.AppType]?o.T3.AppType:w.Mq);return n.searchParams.set("apikey",o.T3.OneServiceApiKey),n.searchParams.set("ocid",s),n.searchParams.set("activityId",o.T3.ActivityId),n.searchParams.set("scn","app_anon"),fetch(n.href,i)}(t,e)}async function k(t,e,n){let o=!1;const u=(0,b.aK)(),d=u&&u.startMeasure("handleSignInStateUpdateAsync").endMeasure;if((0,r.FS)()){const{accessToken:t}=((0,r.nf)()?await(0,g.a8)():(0,r.HN)())||{},e=(0,r.LK)(t);(0,v.A)(e)||(o=!0,(0,i.Q6)({id:"AuthHeaders",type:"command",payload:e}))}else if(o=null!=(0,y.Ri)(s.v1),(0,r.lp)()){(0,a.dl)();o=2===(0,a.eM)().isSignedIn}const l=o?2:1;if(n){!1===e&&2===l&&((0,i.Q6)({id:"updatemyfeed"}),(0,i.Q6)({id:"updatepdp"}),(0,i.Q6)({id:"UpdateMyBriefing"}))}(0,c.l)().setSignInState(l),(0,p._r)(),void 0!==t&&t!==l&&m.YT.addOrUpdateTmplProperty("signInUpdate","1"),d&&d()}function T(){return(0,p.Fo)()&&(!(0,r.FS)()||"MSA"===(0,p.NP)())}function x(){return"AAD"===(0,p.NP)()}},34100:function(t,e,n){var i;n.d(e,{B:function(){return i}}),function(t){t.tryAcquire1STokenLite="ATL",t.acquireTokenSilent="ATS",t.tryAcquire1STokenProfileSwitch="ATP",t.clearAccountLinkingCookies="CAL",t.jwtSSOService="JWT",t.interactiveLogin="ILO",t.loginRedirect="LRD",t.loginPopup="LPP",t.logout="LGT",t.ssoSilent="SSL",t.singleSignOn="SSO",t.waitFor1SToken="W1S"}(i||(i={}))},34185:function(t,e,n){n.d(e,{N:function(){return d},b:function(){return u}});var i=n(63418),r=n(6736),o=n(49084),s=n(6092);function a(){return{anid:function(t=r.YO){if((0,o.NY)()){const e=(0,r.S8)(t);if(e)return e.anid?.startsWith("a-")?e.anid.slice(2):e.anid}return""}(),signinCookieName:s.T3.AuthCookieName}}var c=n(89284);function u(t){const e=t||(0,i.ab)();return c.eE.maskIdentifiers(e)}function d({muid:t,anid:e,isCookieWallPresent:n}){let r,o,s;if(!n){const{anid:n,signinCookieName:u}=a();r=c.eE.maskIdentifiers(t||(0,i.ab)()),o=c.eE.maskIdentifiers(n||e),s=c.eE.maskIdentifiers(u)}return{muidForRequest:r,anidForRequest:o,authCookieNameForRequest:s}}},34299:function(t,e,n){n.d(e,{U:function(){return o}});var i=n(17720),r=n(68480);class o{static get loadLocalStorage(){return i.vv.get(this.loadLocalStorageKey,()=>new r.P("loadLocalStorage"))}static set loadLocalStorage(t){i.vv.set(this.loadLocalStorageKey,t)}static get marketUpdated(){return i.vv.get(this.marketUpdatedKey,()=>new r.P("marketUpdated"))}static set marketUpdated(t){i.vv.set(this.marketUpdatedKey,t)}static get pageLayoutStateLoaded(){return i.vv.get(this.pageLayoutStateLoadedKey,()=>new r.P("PageLayoutStateLoaded"))}static set pageLayoutStateLoaded(t){i.vv.set(this.pageLayoutStateLoadedKey,t)}static get updateConfigData(){return i.vv.get(this.updateConfigDataKey,()=>new r.P("updateConfigData"))}static set updateConfigData(t){i.vv.set(this.updateConfigDataKey,t)}static get updateConfigDataChanged(){return i.vv.get(this.updateConfigDataChangedKey,()=>new r.P("updateConfigDataChanged"))}static set updateConfigDataChanged(t){i.vv.set(this.updateConfigDataChangedKey,t)}static get updateTopSitesQuickLinkEndMarginUsedPadding(){return i.vv.get(this.updateTopSitesQuickLinkEndMarginUsedPaddingKey,()=>new r.P("updateTopSitesQuickLinkEndMarginUsedPadding"))}static set updateTopSitesQuickLinkEndMarginUsedPadding(t){i.vv.set(this.updateTopSitesQuickLinkEndMarginUsedPaddingKey,t)}static get updateLocalStorage(){return i.vv.get(this.updateLocalStorageKey,()=>new r.P("updateLocalStorage"))}static set updateLocalStorage(t){i.vv.set(this.updateLocalStorageKey,t)}static get updateNtpTheme(){return i.vv.get(this.updateNtpThemeKey,()=>new r.P("updateNtpTheme"))}static set updateNtpTheme(t){i.vv.set(this.updateNtpThemeKey,t)}static get updatePrimaryAccountInfo(){return i.vv.get(this.updatePrimaryAccountInfoKey,()=>new r.P("updatePrimaryAccountInfo"))}static set updatePrimaryAccountInfo(t){i.vv.set(this.updatePrimaryAccountInfoKey,t)}static get updateWPOLayoutPromotion(){return i.vv.get(this.updateWPOLayoutPromotionKey,()=>new r.P("updateWPOLayoutPromotion"))}static set updateWPOLayoutPromotion(t){i.vv.set(this.updateWPOLayoutPromotionKey,t)}static get updateWPOLayoutPromotionSource(){return i.vv.get(this.updateWPOLayoutPromotionSourceKey,()=>new r.P("updateWPOLayoutPromotionSource"))}static set updateWPOLayoutPromotionSource(t){i.vv.set(this.updateWPOLayoutPromotionSourceKey,t)}static get updateWPOTopsitesPromotion(){return i.vv.get(this.updateWPOTopsitesPromotionKey,()=>new r.P("updateWPOTopsitesPromotion"))}static set updateWPOTopsitesPromotion(t){i.vv.set(this.updateWPOTopsitesPromotionKey,t)}static get updateWPOPromotionCoachMark(){return i.vv.get(this.updateWPOPromotionCoachMarkKey,()=>new r.P("updateWPOPromotionCoachMark"))}static set updateWPOPromotionCoachMark(t){i.vv.set(this.updateWPOPromotionCoachMarkKey,t)}static get updateFeedStateOnScroll(){return i.vv.get(this.updateFeedStateOnScrollKey,()=>new r.P("updateFeedStateOnScroll"))}static set updateFeedStateOnScroll(t){i.vv.set(this.updateFeedStateOnScrollKey,t)}}o.loadLocalStorageKey=Symbol("loadLocalStorage"),o.marketUpdatedKey=Symbol("marketUpdated"),o.pageLayoutStateLoadedKey=Symbol("pageLayoutStateLoaded"),o.updateConfigDataKey=Symbol("updateConfigData"),o.updateConfigDataChangedKey=Symbol("updateConfigDataChanged"),o.updateTopSitesQuickLinkEndMarginUsedPaddingKey=Symbol("updateTopSitesQuickLinkEndMarginUsedPadding"),o.updateLocalStorageKey=Symbol("updateLocalStorage"),o.updateNtpThemeKey=Symbol("updateNtpTheme"),o.updatePrimaryAccountInfoKey=Symbol("updatePrimaryAccountInfo"),o.updateWPOLayoutPromotionKey=Symbol("updateWPOLayoutPromotion"),o.updateWPOLayoutPromotionSourceKey=Symbol("updateWPOLayoutPromotionSource"),o.updateWPOTopsitesPromotionKey=Symbol("updateWPOTopsitesPromotion"),o.updateWPOPromotionCoachMarkKey=Symbol("updateWPOPromotionCoachMark"),o.updateFeedStateOnScrollKey=Symbol("updateFeedStateOnScroll")},34713:function(t,e,n){n.d(e,{C6:function(){return a},QP:function(){return c},aG:function(){return u},cH:function(){return d}});var i=n(14012),r=n(12870),o=n(77246);let s=null;function a(){return null!=s?s:s=!(!(0,o.S)()||!window.ssrPageGenTime)&&d()}function c(){return h("ruby-http-cache")&&!l()}function u(){return h("ntp-httpc-alldc")&&!l()}function d(){const{deliveryType:t,transferSize:e}=(0,i.hp)()||{},n=0===e;return t?["cache","cache-storage"].includes(t)&&n:n}function l(){return h("ruby-ntp-ctrl")||h("ruby-ntp-ctrl2")||h("ruby-ntp")}function h(t){return r.Rb.CurrentFlightSet?.has(t)}},35079:function(t,e,n){n.d(e,{Bd:function(){return s},D4:function(){return r},Mq:function(){return o},OP:function(){return u},YA:function(){return i},hk:function(){return c},l$:function(){return d},yh:function(){return a}});const i={id:"https://enterprisenews.microsoft.com",friendlyName:n(78629).C1},r="https://ent-nfc-api.msn.com/api/v2/news/companies/current/settings",o="Peregrine",s="AdminPortalSettings",a="AdminPortalSettingsRetryTimes",c=3,u="AdminPortalUserLayoutCache",d="isContentFeedManagedByAdminPortal"},35628:function(t,e,n){n.d(e,{z:function(){return r}});var i=n(90206);class r{async getAuthDataFromCache(t){return{resource:t,error:{message:"inMemoryAuthCacheStrategy Resource Id is missing",status:i.L.CacheMissing}}}async setAuthDataToCache(t){return{resource:t}}async removeAuthDataFromCache(t){return{resource:t}}}},35849:function(t,e,n){n.d(e,{SV:function(){return g},wv:function(){return w},zP:function(){return m}});var i=n(38290),r=n(20205),o=n(18731),s=n(22360),a=n(65022),c=n(93468),u=n(37805),d=n(77246),l=n(17720),h=n(27597);const f="GetDataConnector.skippedConnectors",p={};async function g(t){return t?await u.V.getInstance().rootReducer.getDataConnector(t):null}function m(t){return u.V.getInstance().rootReducer.connector(t)}async function w(t){const e=(0,s.dt)(t);if(l.vv.get(f,()=>new Set).has(e))return Promise.resolve();const n=l.vv.get("dataConnectorLoadPromiseMap",()=>({}));let g=n[e];if(g)return g;let m=p[e];return m||(m=i.L.loadExperience(e).catch(()=>{delete p[e]}),p[e]=m),g=new Promise(async e=>{try{const e=(0,s.dt)(t),n=(0,s.QH)(t),i=r.L.getConfig(n),a=await Promise.all([i,m]),c=a[0].properties,l=a[1],f=u.V.getInstance(),p=l[e+"Connector"];if(!0===p.isWCConnector)new p(e,c);else{const t=l[e+"Reducer"],n=new p(e,"",f.rootReducer,new t(c),f.store,c,new o.bb);(0,d.S)()&&(0,h.Jl)(e,n.getCurrentState())}}catch(t){const e={...a.B0t};(0,c.c_)(t,e,"Loading data connector failed.")}e()}),n[e]=g,g}},36090:function(t,e,n){var i;n.d(e,{Aw:function(){return o},CR:function(){return d},DX:function(){return i},L3:function(){return s},LN:function(){return r},MD:function(){return c},ME:function(){return a},gU:function(){return h},n5:function(){return l},oQ:function(){return u}}),function(t){t.BR="pt-br",t.DEDE="de-de",t.ENAU="en-au",t.ENCA="en-ca",t.ENGB="en-gb",t.ENIN="en-in",t.ENUS="en-us",t.ENIE="en-ie",t.ESES="es-es",t.ESMX="es-mx",t.FRCA="fr-ca",t.FRFR="fr-fr",t.ITIT="it-it",t.IN="en-in",t.HUHU="hu-hu",t.KOKR="ko-kr",t.JAJP="ja-jp",t.PLPL="pl-pl",t.PTBR="pt-br",t.RURU="ru-ru",t.RUXL="ru-xl",t.ZHCN="zh-cn"}(i||(i={}));const r="de-de",o="en-us",s="en-in",a="en-xl",c="es-mx",u="ja-jp",d="ko-kr",l="pt-br",h="zh-cn"},36128:function(t,e,n){n.d(e,{v:function(){return o}});var i,r=n(10160);function o(t,e=i.Telemetry){if(!t)return void console.log(`EventType: ${e} payload to be dispatched is either null or empty.`);const n=document.querySelector(`.${r.JV}`);if(!n||!n.hasAttributes())return void console.log(`Div ${r.JV} is not present on the page.`);const o={type:e,name:t.name||"",payload:t};n.dispatchEvent(new CustomEvent(r.L9,{bubbles:!0,cancelable:!0,composed:!0,detail:o}))}!function(t){t.Telemetry="telemetry"}(i||(i={}))},36417:function(t,e,n){var i,r;n.d(e,{A:function(){return r},B:function(){return i}}),function(t){t[t.Exceptional=0]="Exceptional",t[t.Fallback=1]="Fallback"}(i||(i={})),function(t){t[t.Alert=0]="Alert",t[t.Deprecated=1]="Deprecated",t[t.HighImpact=2]="HighImpact",t[t.Critical=3]="Critical"}(r||(r={}))},37416:function(t,e,n){n.d(e,{D:function(){return a}});var i=n(16091),r=n(17720),o=n(74180);class s extends o.f{constructor(){super(...arguments),this.configRef={experienceType:"SuperComponentData",instanceSrc:"default"}}static getInstance(){return r.vv.get("__SuperComponentDataHelper__",()=>new s)}}const a=(0,i.G)(s)},37423:function(t,e,n){n.d(e,{cn:function(){return d}});var i=n(17720),r=n(51947);const o="__RequestDataInstance__";class s{constructor(t,e){if(this.url=new URL(t.href),this.innerHeight=t.innerHeight,this.devicePixelRatio=t.devicePixelRatio,this.canUseCssGrid=t.canUseCssGrid,this.requestId=t.requestId,this.cookie=t.cookie,this.referer=t.referer,this.userAgent=t.userAgent,this.clientData=t.clientData,this.vpCetoToken=t.vpCetoToken,this.oneServiceHeaders=c(t.oneServiceHeaders)||{},this.isPssrMode=e,e){const t=a(r.Zc,this.cookie),e=!!t&&"1"===t,n=a(r.V$,this.cookie);if(e&&n||!t&&!n)return this.msalAuthReady=!0,void(n&&(this.oneServiceHeaders.Authorization=`Bearer ${n}`));this.msalAuthReady=!1,this.pssrRejectedReason=t&&!e?"interactiveLogin":t&&!n?"missOSAT":"missOSATE"}}static getInstance(){const t=i.vv.get(o);return t||(n.g.TEST_ENV?u({href:"http://localhost:8080/",innerHeight:768,devicePixelRatio:1,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:"",vpCetoToken:""}):u({href:"http://localhost:8080/",innerHeight:0,devicePixelRatio:0,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:"",vpCetoToken:""}))}static resetInstance(t,e=!1){const n=new s(t,e);return i.vv.set(o,n),n}}function a(t,e){if(e&&t){const n=new RegExp("\\b"+t+"\\s*=\\s*([^;]*)","i").exec(e);return n&&n.length>1?n[1]:null}return null}function c(t){try{if(t)return JSON.parse(t)}catch(t){}}const u=s.resetInstance,d=()=>s.getInstance()},37739:function(t,e,n){n.d(e,{J:function(){return p},V:function(){return g}});var i=n(65022),r=n(88294),o=n(93468),s=n(89151),a=n(53978),c=n(77246),u=n(17720),d=n(6092),l=n(12870),h=n(89980),f=n(7187);class p{constructor(){(0,c.S)()&&(this.localstorage_get(null,i._6x),(0,s.dT)().then(()=>{this.autoCleanup()}))}autoCleanup(){if(!(0,c.S)())return;if(!this.eventData)return;let t;for(t in this.eventData){const e=t;let n;for(n in this.eventData[e]){const t=n,i=this.eventData[e][t],r=(new Date).getTime();i.timestamp_EventStart+a.pg.get(e)<r&&delete this.eventData[e][t]}}this.localstorage_save(null)}dismissCreative(t,e,n,i){if((0,c.S)()){if(!t||!e||!n){const s=`Missing data to save creative dismissal. Event ID: ${t}, Experience ID: ${e}, Creative ID: ${n}`;return void(i?(0,o.vV)(i,s):r.v.logError(s))}for(const i in this.eventData[e][t].expiredCreatives)if(i===n)return;this.eventData[e][t].expiredCreatives.push(n),this.localstorage_save(t,i)}}getCMSContent(t,e,n,i){if(!t||!e||!n){const s=`Missing data to return current cms content. Event ID: ${t}, Experience ID: ${e}, Creative IDs: ${n}`;return i?(0,o.vV)(i,s):r.v.logError(s),null}return this.eventData&&this.eventData[e]&&this.eventData[e][t]&&this.eventData[e][t].cmsData?this.eventData[e][t].cmsData:null}static getInstance(){return u.vv.get("__eventLocalStorage__",()=>new p)}async getCurrentCreativeId(t,e,n,i,s,a){if(!(0,c.S)())return null;if(!t||!e||!n){const i=`Missing data to return current creative. Event ID: ${t}, Experience ID: ${e}, Creative IDs: ${n}`;return a?(0,o.vV)(a,i):r.v.logError(i),null}let u;if(!(this.eventData&&this.eventData[e]&&this.eventData[e][t]))return null;u=this.eventData[e][t].currentCreative;return await this.selectCreative(n,t,e,i,s,u,a)}localstorage_get(t,e){if((0,c.S)())try{this.eventData=(0,h.Lg)().getObject(a.Z2)}catch(n){e?(0,o.vV)(e,`Get local storage operation failed for event - ${t}.`):r.v.logError(n)}}localstorage_save(t,e){if((0,c.S)())try{(0,h.Lg)().setObject(a.Z2,this.eventData)}catch(n){return void(e?(0,o.vV)(e,`Save local storage operation failed for event - ${t}.`):r.v.logError(n))}}async selectCreative(t,e,n,i,s,u,h,p){if(!t||0===t.length)return null;if(i){const t=new Date,e=new Date(i.start_year,i.start_month-1,i.start_day);e.setDate(e.getDate()-1);const n=new Date(i.end_year,i.end_month-1,i.end_day);if(n.setDate(n.getDate()+1),!(e<=t&&t<=n))return null}const g=(0,f.isNullOrUndefined)(this.eventData&&this.eventData[n]&&this.eventData[n][e]&&this.eventData[n][e].timestamp_EventStart);if(!u&&g&&!s)return t[0];if(s){const i=(new Date).getTime(),g=this.eventData&&this.eventData[n]&&this.eventData[n][e]&&this.eventData[n][e].timestamp_EventLastUpdate?this.eventData[n][e].timestamp_EventLastUpdate:0,m=d.T3.CurrentMarket,w=this.eventData[n][e]?.market;let y=!1;if(void 0!==w&&(y=w!==m,y&&this.dismissCreative(e,n,u,h)),!(0,c.S)()||g+a.Wz<i||y){const i=()=>fetch(s),a=i=>{switch(n){case"BackgroundImageWC":this.eventData[n][e]={cmsData:{attribution:i.headlines[0].subtitle,imageSource:i.headlines[1].title,imageHref:i.headlines[2].title,title:i.headlines[0].title},currentCreative:t[0],expiredCreatives:[],market:m,timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(e,h);break;case"SuperNav":case"FeedNavigationHp":this.eventData[n][e]={cmsData:{display:i.headlines[1].title,highlighted:"1"===i.headlines[4]?.title,id:i.headlines[0].title,positionOverride:i.headlines[3]?.title,url:i.headlines[1].subtitle},currentCreative:t[0],expiredCreatives:[],market:m,timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(e,h)}};if(!(0,c.S)()||l.Rb.IsPrerender){try{const t=await i(),e=await t.json();a(e)}catch(t){h?(0,o.vV)(h,`Failed to call CMS data - ${n} - ${e}. url ${s}`,t):r.v.logError(t)}return t[0]}if(p){const e=p.href,n=p.innerText,i=p.id,r=p.dataset?.positionOverride,o=p.classList?.contains("highlight");return a({headlines:[{title:i},{title:n,subtitle:e},{},{title:r},{title:o?"1":"0"}]}),t[0]}if(i().then(t=>{t.json().then(t=>{a(t)})}).catch(t=>{h?(0,o.vV)(h,`Failed to call CMS data - ${n} - ${e}. url ${s}`,t):r.v.logError(t)}),(0,f.isNullOrUndefined)(this.eventData&&this.eventData[n]&&this.eventData[n][e]&&this.eventData[n][e].cmsData))return null}}let m=-1;for(let e=0;e<t.length;e++)if(t[e]===u){m=e;break}if(-1===m)return m=0,this.eventData[n][e]={currentCreative:t[m],expiredCreatives:[],market:d.T3.CurrentMarket,timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(e,h),t[m];const w=(new Date).getTime();if(this.eventData[n][e].timestamp_EventLastUpdate+a.xW.get(n)<w&&!i&&"SuperNav"!==n){if(m<t.length-1){const i=t[m+1];return this.dismissCreative(e,n,u,h),this.eventData[n][e]={...this.eventData[n][e],currentCreative:i,timestamp_EventLastUpdate:w},this.localstorage_save(e,h),i}return this.dismissCreative(e,n,t[m],h),null}for(let i=0;i<this.eventData[n][e].expiredCreatives.length;i++)if(this.eventData[n][e].expiredCreatives[i]===t[m])return null;return t[m]}async shouldShowEvent(t,e,n,i,r,o,s){const a=(0,f.isNullOrUndefined)(this.eventData),c=this.eventData&&(0,f.isNullOrUndefined)(this.eventData[e]),u=this.eventData&&this.eventData[e]&&(0,f.isNullOrUndefined)(this.eventData[e][t]);if(a||c||u){a?(this.eventData={},this.eventData[e]={},this.eventData[e][t]={}):c&&(this.eventData[e]={},this.eventData[e][t]={});const u=await this.selectCreative(n,t,e,i,r,null,null,s);return!!u&&(this.eventData[e][t].currentCreative=u,this.localstorage_save(t,o),!0)}const d=this.eventData[e][t].currentCreative;return!!await this.selectCreative(n,t,e,i,r,d,o,s)}}const g=()=>{const t="__eventLocalStorage__";let e=u.vv.get(t);return e||(e=new p,u.vv.set(t,e)),e}},37805:function(t,e,n){n.d(e,{V:function(){return y}});var i=n(8782),r=n(99382),o=n(98847),s=n(63456),a=n(80164),c=n(87440),u=n(77246),d=n(89905),l=n(7187),h=n(27597);class f{constructor(){this._connectorMap={},this._globalConnectors=[],this._allConnectors=[],this._getDataConnectorPendingPromises=new Map,this.reduce=this.reduce.bind(this)}connectors(){return this._allConnectors}connector(t){return this._connectorMap[t]}globalConnectors(){return this._globalConnectors}getDataConnector(t){const e=this.connector(t);if(e)return Promise.resolve(e);const n=this._getDataConnectorPendingPromises.get(t);if(n)return n.promise;let i,r;const o=new Promise((t,e)=>{i=t,r=e});return this._getDataConnectorPendingPromises.set(t,{promise:o,resolve:i,reject:r}),o}reduce(t,e){(0,l.isNullOrUndefined)(t)&&(t={});let n={...t},i=!1;const f=e.key;if(void 0!==e&&void 0!==f){const l="string"==typeof e.type;if(l&&e.type.endsWith(r.j.renderAction)){const e=f+"."+r.j.connectorStateKey,c=(0,o.A)({},(0,s.A)(t,e,void 0));(0,a.A)(n,e,c),i=!0}else if(l&&e.type.endsWith(r.j.dataConnectorMergeInitAction)){const t=f,r=e.params[0];r&&(d.a.initializeExperience(n,t,r),i=!0)}else{const t=this._connectorMap[f];if(t){t.isGlobal&&(n=(0,c.A)({},n));const r=this.computeNextStateForConnector(n,f,e);i=r.stateChanged,i&&(d.a.reportStateChange(n,f,r.newState),(0,u.S)()&&(0,h.Jl)(f,r.newState))}else if(!(0,u.S)())throw new Error("Reducer for: "+f+" must not return undefined.")}}else Object.keys(this._connectorMap).forEach(t=>{this.computeNextStateForConnector(n,t,e).stateChanged&&(i=!0)});return i?n:t}addSubReducerForConnector(t){if(!t)throw new Error("The parameter 'connector' cannot be null.");this.addConnectorToCollection(t),t.store.dispatch({key:t.fullNamespace,type:"@@connector-view/INIT"})}addConnectorToCollection(t){if(this._connectorMap[t.fullNamespace]=t,this._allConnectors.push(t),t.isGlobal&&this._globalConnectors.push(t),this._getDataConnectorPendingPromises.has(t.namespace)){const e=this._getDataConnectorPendingPromises.get(t.namespace);try{e.resolve(t)}catch(t){e.reject(t)}this._getDataConnectorPendingPromises.delete(t.namespace)}}computeNextStateForConnector(t,e,n){const i=this._connectorMap[e];if(!i.reducer)return{stateChanged:!1,newState:null};const o=e+"."+r.j.connectorStateKey,c=(0,s.A)(t,o,void 0),u=this.subReduce(i.reducer,c,n);if(void 0===u)throw new Error("Reducer for: "+e+" must not return undefined.");const d=u!==c;return d&&(0,a.A)(t,o,u),{newState:u,stateChanged:d}}subReduce(t,e,n){const i=t.reduce(e,n);return i!==e?i:e}}var p=n(47475),g=n(88294),m=n(17720);const w="__PageBaseInstance__";class y{constructor(t){let e;const n=[];if(void 0!==g.v&&g.v&&g.v.isDebug()){e=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||i.Zz)((0,p.Tw)(...n))}else e=(0,p.Tw)(...n);this._rootReducer=new f,this._store=(0,i.y$)(this.rootReducer.reduce,t,e)}static resetPageBaseInstance(t){m.vv.set(w,new y(t))}static deletePageBaseInstance(){m.vv.delete(w)}get store(){return this._store}get rootReducer(){return this._rootReducer}static getInstance(t){return m.vv.get(w,()=>new y(t))}start(){this.rootReducer.connectors().forEach(t=>t.onApplicationStart())}}},37918:function(t,e,n){n.d(e,{x:function(){return s}});var i=n(60815),r=n(92011);const o={handleChange(t){t.$fastController.isConnected?t.connected&&t.connected():t.disconnected&&t.disconnected()}};function s(t){return class extends t{constructor(...t){super(...t),i.cP.getNotifier(this.$fastController).subscribe(o,"isConnected")}}}s(r.L)},38135:function(t,e,n){n.d(e,{x:function(){return h}});var i=n(65022),r=n(93468),o=n(6092),s=n(89980),a=n(63418),c=n(98216),u=n(48622),d=n(86948),l=n(61204);async function h(t){if(!window.navigator.cookieEnabled||"ru-ru"===o.T3.CurrentMarket)return;await(0,d.e9)();let e="";try{e=await async function(){const t=await u.d.getPdpUserPreference(!0,void 0,void 0,"market-consolidation");if(!t||!t.value||0===t.value.length)return"";const e=t.value[0];if(!e)return"";return e.userSettings?.preferredMarket??""}()}catch{return void(0,r.vV)(i.QXg,"There was an error getting preferredMarket from PDP services.")}const n=function(){let t="";const e=(0,l._H)(),n=(0,a.Ri)(e);if(!n)return"";if("homePage"===o.T3.AppType)return n;const i=JSON.parse(n);i&&i.m&&(t=i.m);return t}();"edgeChromium"!=o.T3.AppType&&(t=l.wy);let h=!1,f="";if(f=(0,s.Lg)().getItem("marketConsolidationTmpl"),e)n?e!==n?(f=`MarketConsolidationSync_Mismatch_${e}_${n}`,t(e),(0,s.Lg)().setObject("showMarketRoamingCoachmark",!0),h=!0,(0,r.vV)(i.NHc,`Market missmatch. Server market: ${e}, Client market: ${n}`)):e!==n||f||(f="MarketConsolidationSync_Match",h=!0):(f="MarketConsolidationSync_Client_"+e,t(e),h=!0);else if(n){h=!0;await u.d.updateMarketPreference(n)?f="MarketConsolidationSync_Server_"+n:(h=!1,(0,r.vV)(i.VsV,"PDP Service failed to update market preference from MarketConsolidation",`market: ${n}`))}f&&(0,s.Lg)().setItem("marketConsolidationTmpl",f),(h||f)&&(c.YT.addOrUpdateTmplProperty("MarketConsolidationSync",h?"1":"0"),c.YT.addOrUpdateTmplProperty(f,"1"))}},38290:function(t,e,n){var i;n.d(e,{L:function(){return i}}),function(t){const e={};t.loadExperience=async t=>{const n=e[t];if(!n)throw new Error(`Attempted to load unknown dynamic bundle "${t}". Make sure it's a registered dynamic experience bundle.`);return n()},t.registerExperience=(t,n)=>{e[t]=n},t.hasExperienceRegistered=t=>!!e[t]}(i||(i={}))},38405:function(t,e,n){n.d(e,{G9:function(){return C},aI:function(){return v},bO:function(){return m},cP:function(){return f},fe:function(){return b},hq:function(){return g},ip:function(){return p},sB:function(){return S}});var i=n(16253),r=n(27942),o=n(65022),s=n(93468),a=n(98216),c=n(99863),u=n(99928),d=n(91532);const l={enableDynamicWaterfallWPO:"wf",enableVerticalCarousels:"vc",enableAugments:"aug"},h={0:r.j1.c1,1:r.j1.c2,2:r.j1.c3,3:r.j1.c4,4:r.j1.c5};function f(t,e,n,r){const o=i.vd[t];let s="";let a;s=e?Object.keys(e).slice(0,o).map(t=>`${t}:${e[t].offset}`).join(","):((t,e="c",n=":0")=>Array.from({length:t},(t,i)=>`${e}${i+1}${n}`).join(","))(o),a=n?Object.keys(n).slice(0,o).map(t=>`${t}:${n[t].offset}`).join(","):((t,e="c",n=":-1")=>Array.from({length:t},(t,i)=>`${e}${i+1}${n}`).join(","))(o);const c={layout:t?.toLowerCase(),colstatus:s,colwidth:300,adoffsets:a,l3v:2};if(r){const t=function(t){if(!t)return;const e=[];if(Object.keys(l).forEach(n=>{const i=n;t[i]&&e.push(l[i])}),!e.length)return;return e.join(",")}(r);t&&(c.wpoux=t)}return c}function p(t,e){const n={c1:{offset:0},c2:{offset:0},c3:{offset:0},c4:{offset:0},c5:{offset:0}},i=t[0];for(let r=1;r<t.length;r++){const o=h[r],s=e?.[o]?.offset??0;n[o].offset=t[r]-i+s}return n}function g(t,e,n){const i={c1:{offset:-1},c2:{offset:-1},c3:{offset:-1},c4:{offset:-1},c5:{offset:-1}};for(let r=0;r<t.length;r++){const o=h[r];-1!=t[r]?i[o].offset=t[r]:i[o].offset=void 0!==n?.[o]?.offset?-1===n[o].offset?-1:n[o].offset+e[r]:t[r]}return i}const m=(t,e,n,i)=>{const{columnsOffset:r,adsOffset:a}=y(e),c=[];try{const o=Object.values(r)?.map(t=>t.offset)||[];t.forEach((t,r)=>{const s=h[r];let u=Boolean(a[s].offset>-1),l=Math.max(a[s].offset,0),f=0;const p=e?.numProcessedCards?.[r]??0;let g=0;t.slice(p)?.forEach((t,e)=>{if("cs-section-tracker"!==t.childTemplateType&&!C(t)){const r=w(t,n,i);f+=r,t.childTemplateType===d.C.nativeAdCard||t.childTemplateType===d.C.responsiveAdCard?(u=!0,l=0):u&&(l+=r),g=e}}),o[r]+=f,c.push(g+p+1),r<=1&&!e&&(o[r]+=i),u&&(a[s].offset=l)});for(let e=1;e<t.length;e++){r[h[e]].offset=o[e]-o[0]}return{adsOffset:a,columnsOffset:r,numProcessedCards:c}}catch(n){return void(0,s.c_)(n,o.aIL,"Error calculating rendered column offsets","",{numColumns:t?.length,lastPageOffsets:e})}},w=(t,e,n)=>t.childTemplateType===d.C.nativeAdCard||t.childTemplateType===d.C.responsiveAdCard?u.MG:e?.get(t.id)||(t.height??n),y=t=>{let e={c1:{offset:0},c2:{offset:0},c3:{offset:0},c4:{offset:0},c5:{offset:0}},n={c1:{offset:-1},c2:{offset:-1},c3:{offset:-1},c4:{offset:-1},c5:{offset:-1}};return t?.preColumnsOffset&&(e={...t.preColumnsOffset}),t?.preAdsOffset&&(n={...t.preAdsOffset}),{adsOffset:n,columnsOffset:e}};function v(t,e){(void 0===t.layout||void 0===t.colstatus||void 0===t.l3v||void 0===t.adoffsets)&&a.YT.sendAppErrorEvent({...o.L$h,message:"Waterfall feed request missing QSPs",pb:{...o.L$h.pb,customMessage:`feedName: ${t.feedName}, \n                                option2: true, \n                                layout: ${t.layout}, \n                                colstatus: ${t.colstatus}, \n                                l3v: ${t.l3v}, \n                                adoffsets: ${t.adoffsets}, \n                                requestnextPageUrl: ${t.nextPageUrl},\n                                requestServiceUrl: ${t.serviceUrl},\n                                useWebLayoutEndpoint: ${t.useWebLayoutEndpoint},\n                                pageScenario: ${t.pageScenario},\n                                traceIdIndex: ${e?.traceIdIndex}, \n                                Statics: ${e?.isStatic}, \n                                debugId: ${e?.debugId}, \n                                fdHead: ${e?.serviceContext.fdHead},\n                                responseNextPageUrl: ${e?.nextPageUrl},\n                                responseNextPageRequest.nextPageUrl: ${e?.nextPageRequest?.nextPageUrl},\n                                responseNextPageRequest.serviceUrl: ${e?.nextPageRequest?.serviceUrl},\n                                responseSource: ${e?.responseSource}, \n                                status: ${e?.status},\n                                responseStatus: ${e?.responseStatus}`}})}const b=(t,e)=>t.map(t=>t.cards.reduce((t,n)=>t+(n.height?n.height:e),0)),S=(t,e,n,i=0)=>{const{contentInViewport:r}=(0,c.X3)(t),o=((t,e)=>t?t.map(t=>{const{colSpan:n,height:i=e}=t?.columns[0]?.cards[0]||{},r=b(t.columns,e);if(n&&n>1)for(let t=1;t<=Math.min(n,r.length-1);t++)r[t]+=i;return Math.min(...r)}):[])(e,n);let s=0,a=0;for(let t=0;t<o.length&&!(s>=r.height-i);t++)s+=o[t],a++;return a},C=t=>t?.id?.startsWith("loadingCardPlaceholder")},38467:function(t,e,n){n.d(e,{E:function(){return o}});var i=n(65022),r=n(98216);class o extends Map{constructor(t,e={}){super(),this.identifier=t,this.subscriptions=new Map,e.initialState&&Object.keys(e.initialState).forEach(t=>{super.set(t,e.initialState[t])})}set(t,e){super.set(t,e);const n=this.subscriptions.get(t);return n&&n.size?(n.forEach(n=>{try{n&&n(e)}catch(e){r.YT.sendAppErrorEvent({...i.O2G,message:"Failed to execute subscription callback",pb:{...i.O2G.pb,customMessage:`Error executing subscription callback for key [${t}]`,instanceId:this.identifier,errorMessage:e&&e.message}})}}),this):this}subscribe(t,e,n={}){if(!e||"function"!=typeof e)return;let i=this.subscriptions.get(t);i||(this.subscriptions.set(t,new Set),i=this.subscriptions.get(t)),i.add(e),this.has(t)&&!1!==n.fireImmediately&&e(this.get(t)),n.signal&&n.signal.addEventListener("abort",()=>{this.unsubscribe(t,e)})}unsubscribe(t,e){const n=this.subscriptions.get(t);n&&n.delete(e)}reset(){this.clear(),this.subscriptions.clear()}}},38754:function(t,e,n){n.d(e,{$6:function(){return o},Hu:function(){return r},op:function(){return s}});var i=n(50127);function r(t){let e=null;const n=t?.ntpTheme?.backgroundColorRgba;if(!n||n.length<4)return null;const r={r:n[0],g:n[1],b:n[2],a:n[3]};return e=i.m.rgbNumberToCssHexColor(i.m.parsedColorToNumber(r)),e}function o(t,e){if(!t)return null;if(!t.includes("edge_background.jpg"))return t;const n="edge_background.jpg?ts="+(e?.customBackgroundImageInfo?.timestamp||"");return t.replaceAll("edge_background.jpg",n)}function s(t,e){if(!t)return null;const n=t.match(/\(([^()]+)\)/g);if(!n.length)return null;return o(n[0].slice(1,-1),e)}},38796:function(t,e,n){let i,r;function o(t){i=t}function s(){return i}function a(t){r=t}function c(){return r}n.d(e,{HT:function(){return s},eC:function(){return a},eU:function(){return c},jB:function(){return o}})},38870:function(t,e,n){n.d(e,{o:function(){return i}});const i={name:"footer",layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%"},children:[{name:"start-action-part",children:[{name:"ad-label",layout:{marginInlineStart:"16",marginInlineEnd:"6",zIndex:5}},{name:"provider-name",layout:{flex:1,minWidth:0,zIndex:5},customStyleClass:"white-12-flex-layout"}]},{name:"end-action-part",children:[{name:"disclaimer",layout:{zIndex:5}},{name:"ad-choice",layout:{zIndex:5}},{name:"see-more",layout:{marginInlineEnd:"16",zIndex:5}}]}]}},39092:function(t,e,n){n.d(e,{IC:function(){return d},XP:function(){return s}});var i=n(81760),r=n(19330),o=n(12870);const s=(t,e,n)=>{if(t?.passIsAppTrafficSignal||e?.enablePageObject||t?.passRequestModelSignals||t?.passVAXandrMigrationSignals||t?.passDeviceOS||e?.brandSafety?.adjCardIds||t?.sendAdBlockDetectionFromEdge&&e?.isAdblockerEnabled)try{const i=a(t,e,n);return Object.keys(i).length?JSON.stringify(i):""}catch(t){return}},a=(t,e,n)=>{const i={};if(t?.passIsAppTrafficSignal&&e?.isAppTraffic&&(i.app={isApp:e?.isAppTraffic}),e?.enablePageObject&&(i.page=c(e)),t?.passRequestModelSignals||e?.requestModelSignals){const t=n?.auctionLevelSignals||e?.requestModelSignals;t&&(i.requestModelSignals={vpSize:t?.vpSize?{w:t?.vpSize?.w,h:t?.vpSize?.h}:void 0,isPrerender:t?.isPrerender||void 0,isSSR:t?.isSSR||void 0,ocid:t?.ocid||void 0})}e?.brandSafety?.adjCardIds?.length&&e.brandSafety.adjCardIds.length>0&&(i.brandSafety=e.brandSafety);const r={};return t?.passVAXandrMigrationSignals&&(r.vaXandrMigration=!0),Object.keys(r).length>0&&(i.flightSignals=r),t?.passDeviceOS&&e?.device&&(i.deviceRequest=e.device),t?.sendAdBlockDetectionFromEdge&&1==e?.isAdblockerEnabled&&(i.isAdblockerEnabled=!0),i},c=t=>{const e=u(),n={};return e&&(n.type=e),t?.pageLayout&&(n.layout=t?.pageLayout),n},u=()=>i.t.getMetadata(r.W.PageType)||o.Rb.ClientSettings?.pagetype,d=(t,e)=>{try{const n=l(t,e);return Object.keys(n).length?JSON.stringify(n):""}catch(t){return}},l=(t,e)=>{const n={};return e?.displayAdTemplateKVstyles?.styles?.length&&e.displayAdTemplateKVstyles.styles.length>0&&(n.template_kv={styles:e.displayAdTemplateKVstyles.styles}),e?.brandSafety?.adjCardIds&&(n.brandSafety=e.brandSafety),e?.modelSignals&&(n.modelSignals=e.modelSignals),n}},39152:function(t,e,n){var i,r,o,s,a;n.d(e,{By:function(){return h},Et:function(){return o},Gi:function(){return m},IC:function(){return l},IL:function(){return u},QK:function(){return s},Vi:function(){return w},a7:function(){return d},bu:function(){return a},cj:function(){return c},dU:function(){return g},hO:function(){return f},hs:function(){return r},li:function(){return p},qr:function(){return i},sm:function(){return y}}),function(t){t.Email="email",t.Facebook="facebook",t.Line="line",t.LinkedIn="linkedin",t.Skype="skype",t.Twitter="twitter",t.VK="vk",t.WhatsApp="whatsapp"}(i||(i={})),function(t){t.Share="share",t.ShareV2="shareV2",t.Mute="mute",t.Report="report",t.ReportAd="reportad",t.WhyAmISee="whyAmISee",t.CuratedByCopilot="curatedByCopilot",t.LocationEdit="locationEdit",t.LocationManage="locationManage"}(r||(r={})),function(t){t.cancel="Cancel",t.cardAction="CardAction",t.closeHeadline="Close dialog",t.closeModule="Dismiss",t.copy="Copy",t.hideMenuItem="Hide",t.hideHeadline="Hide Story",t.manageInterestsMenuItem="ManageInterests",t.muteMenuItem="MutePublisher",t.muteWebVideoMenuItem="MuteWebVideo",t.muteButton="Mute",t.muteConfirmation="Hide Stories from Publisher",t.reportAdHeadline="Report an issue",t.reportAdMenuItem="ReportAd",t.reportButton="Submit",t.reportChecked="Checked",t.reportDialog="ReportedReason",t.reportHeadline="Report an issue",t.reportMenuItem="ReportArticle",t.reportUnchecked="Unchecked",t.reportDialogFeedbackText="Feedback",t.reportDialogPrivacyStatement="Privacy Statement",t.saveMenuItem="SaveContent",t.showFewerHeadline="Fewer stories like this",t.showFewerMenuItem="ShowFewer",t.showMoreHeadline="More stories like this",t.showMoreMenuItem="ShowMore",t.shareArticle="ShareArticle",t.shareDialog="Share",t.toastButton="ToastButton",t.upvote="Upvote",t.adPrivacy="AdPrivacy",t.adChoice="AdChoice",t.feedbackMenuItem="Feedback",t.whyAmISeeChannelStoreLink="WhyAmISeeChannelStoreLink",t.whyAmISeeMenuItem="ExplainableAlOverlay",t.whyAmISee="whyamiseeingthis",t.yes="yesbutton",t.no="nobutton",t.followTopic="FollowTopic",t.unfollowTopic="UnfollowTopic",t.followPublisher="FollowPublisher",t.unfollowPublisher="UnfollowPublisher",t.openNewTab="OpenNewTab",t.openNewWindow="OpenNewWindow",t.copyLink="CopyLink",t.copyImageLink="CopyImageLink",t.whyAmISeeMenuButton="WhyAmISeeingThis",t.saveTooltipButton="Personalize",t.curatedByCopilotMenuItem="CuratedByCopilotDisclaimer",t.curatedByCopilotButton="CuratedByCopilot"}(o||(o={})),function(t){t.breakingNews="breakingNews",t.followPublisher="followPublisher",t.followTopic="followTopic",t.interacted="interacted",t.local="local",t.trending="trending",t.explore="explore",t.u2u="u2U",t.default="default",t.explicitLike="explicitLike",t.userSearchSignal="userSearchSignal",t.cF_U2i="cF_U2i",t.cF_I2i="cF_I2i",t.cF_Swing_i2i="cF_Swing_i2i",t.cF_U2u="cF_U2u",t.cF_Topic_cf="cF_Topic_cf",t.cF_Cross_domain="cF_Cross_domain",t.cF_Ip="cF_Ip",t.cF_Topic_plus="cF_Topic_plus",t.trending_in_industry="trending_in_industry",t.trending_related_comp="trending_related_comp",t.trending_in_location="trending_in_location",t.trending_in_company="trending_in_company",t.contentExplore="contentExplore",t.fallback="fallback"}(s||(s={})),function(t){t.InappropriateAd="InappropriateAd",t.MisleadingAd="MisleadingAd",t.NotInterested="NotInterested",t.RepeatedAd="RepeatedAd",t.VisuallyPoorAd="VisuallyPoorAd"}(a||(a={}));const c=(t,e,n="828282")=>`https://placehold.it/${t}x${e}/${n.replace("#","")}/`,u={personalize:"Personalize",myInterests:"MyInterests"},d=5e3,l="/{locale}/feed/personalize",h="/{locale}/feed/personalize/settings",f="/{locale}/feed/personalize#mutedPublishers",p="{locale}",g="https://www.msn.com",m="https://account.microsoft.com/privacy/ad-settings/",w="https://go.microsoft.com/fwlink/?LinkId=521839",y="toggleWidgetPicker"},39598:function(t,e,n){n.d(e,{k:function(){return r}});var i=n(11372);function r(t,e){const n=function(t){switch(t){case i.b5.AppStore:return 17;case i.b5.StructuredData:return 16;case i.b5.CmsPromotions:return 19;case i.b5.MicrosoftWebStore:return 20;case i.b5.XboxStore:return 21;case i.b5.OfficeStore:return 22;case i.b5.PartnerLinks:return 24;case i.b5.SponsoredContent:return 25;default:return 0}}(t)||function(t){switch(t){case i.MS.Navigate:return 14;case i.MS.Follow:return 26;case i.MS.Unfollow:return 27;case i.MS.More:return 28;case i.MS.Close:return 36;case i.MS.Share:return 37;case i.MS.Like:return 38;case i.MS.Dislike:return 39;case i.MS.Unlike:return 40;case i.MS.Undislike:return 41;case i.MS.Mute:return 42;case i.MS.Unmute:return 43;case i.MS.Cancel:return 44;case i.MS.Manage:return 45;default:return 0}}(e);if(0!==n)return n;if(t===i.b5.App){if(e===i.MS.Install)return 23;if(e===i.MS.Launch)return 18}return 0}},39677:function(t,e,n){n.d(e,{$n3:function(){return f},$rH:function(){return ct},AZd:function(){return i},Afb:function(){return It},Ag7:function(){return et},Awm:function(){return lt},Blw:function(){return Tt},Ci3:function(){return Ct},Dpq:function(){return gt},F2F:function(){return Bt},FeE:function(){return C},FkA:function(){return V},G4W:function(){return Ft},Gkw:function(){return w},HQR:function(){return _},I5k:function(){return K},IMk:function(){return d},Imi:function(){return D},JMw:function(){return Q},JrC:function(){return X},JuT:function(){return Wt},K1H:function(){return c},L1:function(){return h},MCQ:function(){return Ot},MSR:function(){return S},MU6:function(){return Dt},N$c:function(){return $t},O7O:function(){return u},PIQ:function(){return Vt},PWf:function(){return A},Q4s:function(){return s},RfR:function(){return P},Rqs:function(){return wt},Tb$:function(){return U},Tex:function(){return pt},UYK:function(){return m},V6n:function(){return At},VI$:function(){return g},VPb:function(){return Mt},VVH:function(){return G},Vo5:function(){return F},Vw1:function(){return nt},Ws$:function(){return b},XES:function(){return k},XLk:function(){return q},Y1$:function(){return xt},Y4F:function(){return mt},_SK:function(){return ft},aTe:function(){return o},b0J:function(){return N},bYh:function(){return L},cDF:function(){return l},cbN:function(){return rt},cjA:function(){return bt},eA:function(){return Ut},fAo:function(){return Pt},fxR:function(){return H},gCv:function(){return E},hZ0:function(){return at},iG5:function(){return $},iIh:function(){return dt},iT:function(){return a},jsj:function(){return Rt},kLb:function(){return O},kf9:function(){return v},mdD:function(){return ht},nDV:function(){return x},pTq:function(){return j},qcT:function(){return vt},r2g:function(){return ut},r91:function(){return M},rFv:function(){return I},rOe:function(){return yt},ruk:function(){return W},ry_:function(){return y},sNZ:function(){return Et},tF1:function(){return Y},tOA:function(){return tt},thz:function(){return ot},v6S:function(){return kt},vJX:function(){return it},vmb:function(){return Ht},wlx:function(){return p},wvE:function(){return z},xEt:function(){return St},xl2:function(){return Nt},y3Q:function(){return Lt},y8E:function(){return st},yCo:function(){return R},yHt:function(){return _t},yds:function(){return B},ze9:function(){return J},zkJ:function(){return Z},zmN:function(){return T},zrv:function(){return r}});const i="var(--smtc-foreground-control-neutral-primary-rest)",r="var(--smtc-theme-color-background-200)",o="var(--smtc-theme-color-background-300)",s="var(--smtc-theme-color-background-700)",a="var(--smtc-theme-color-component-button-subtle-dimmed-inverted-background-hover)",c="var(--smtc-theme-color-component-button-subtle-dimmed-inverted-background-pressed)",u="var(--smtc-theme-color-foreground-primary-750)",d="var(--smtc-theme-color-foreground-primary-800)",l="var(--smtc-theme-color-foreground-secondary-550)",h="var(--smtc-theme-color-overlay-black-30)",f="var(--smtc-theme-color-stroke-muted-300)",p="var(--smtc-static-spacing-3-5-base)",g="var(--smtc-static-spacing-4-base)",m="var(--smtc-padding-content-xxSmall)",w="var(--smtc-padding-content-xSmall)",y="var(--smtc-shadow-flyout-key-x)",v="var(--smtc-shadow-flyout-key-y)",b="var(--smtc-shadow-flyout-key-blur)",S="var(--smtc-shadow-flyout-ambient-x)",C="var(--smtc-shadow-flyout-ambient-y)",k="var(--smtc-shadow-flyout-ambient-blur)",T="var(--smtc-text-style-default-display-letterSpacing)",x="var(--smtc-text-style-default-regular-letterSpacing)",A="var(--smtc-background-ctrl-on-image-lum-blend)",$="var(--smtc-background-ctrl-on-image-rest)",I="var(--smtc-background-ctrl-on-image-saturation-blend)",P="var(--smtc-background-tint-neutral)",R="var(--smtc-ctrl-choice-switch-background-selected-rest)",M="var(--smtc-ctrl-choice-switch-background-rest)",_="var(--smtc-ctrl-choice-switch-thumb-background-rest)",E="var(--smtc-ctrl-choice-switch-thumb-background-selected-rest)",F="var(--smtc-ctrl-choice-switch-stroke-rest)",D="var(--smtc-ctrl-coachmark-foreground)",O="var(--smtc-foreground-tint-neutral)",N="var(--smtc-foreground-ctrl-on-image-rest)",L="var(--smtc-foreground-neutral-primary)",B="var(--smtc-shadow-ctrl-button-neutral-rest-inner-shine-x)",U="var(--smtc-shadow-ctrl-button-neutral-rest-inner-shine-y)",W="var(--smtc-shadow-ctrl-button-neutral-rest-inner-shine-blur)",V="var(--smtc-shadow-ctrl-button-neutral-rest-inner-shine-spread)",H="var(--smtc-shadow-ctrl-button-neutral-rest-inner-shine-color)",z="var(--smtc-shadow-ctrl-button-neutral-rest-key-x)",j="var(--smtc-shadow-ctrl-button-neutral-rest-key-y)",q="var(--smtc-shadow-ctrl-button-neutral-rest-key-blur)",G="var(--smtc-shadow-ctrl-button-neutral-rest-key-color)",J="var(--smtc-shadow-ctrl-brand-key-color)",Q="var(--smtc-shadow-ctrl-fab-rest-key-color)",K="var(--smtc-shadow-ctrl-fab-rest-ambient-color)",X="var(--smtc-status-informative-tint-background-ad)",Y="var(--smtc-corner-card-small-rest)",Z="var(--smtc-corner-card-nested-small-outside)",tt="var(--smtc-corner-card-discover-nested-outside)",et="var(--smtc-corner-card-discover-nested-inside)",nt="var(--smtc-corner-card-alternate-small-rest)",it="var(--smtc-background-flyout-saturation-blend)",rt="var(--smtc-corner-favicon)",ot="var(--smtc-ctrl-badge-stroke)",st="var(--smtc-corner-ctrl-fab-rest)",at="var(--smtc-padding-card-body-default-horizontal-start)",ct="var(--smtc-padding-card-default)",ut="var(--smtc-padding-content-xSmallNudge)",dt="var(--smtc-padding-content-xLarge)",lt="var(--smtc-padding-content-xxLarge)",ht="var(--smtc-padding-ctrl-lg-text-side)",ft="var(--smtc-shadow-ctrl-brand-key-x)",pt="var(--smtc-shadow-ctrl-brand-key-y)",gt="var(--smtc-shadow-ctrl-brand-key-blur)",mt="var(--smtc-shadow-ctrl-fab-rest-key-x)",wt="var(--smtc-shadow-ctrl-fab-rest-key-y)",yt="var(--smtc-shadow-ctrl-fab-rest-key-blur)",vt="var(--smtc-shadow-ctrl-fab-rest-ambient-y)",bt="var(--smtc-shadow-ctrl-fab-rest-ambient-blur)",St="var(--smtc-shadow-flyout-ambient-color)",Ct="var(--smtc-shadow-flyout-key-color)",kt="var(--smtc-size-ctrl-choice-base)",Tt="var(--smtc-stroke-width-ctrl-choice-rest)",xt="var(--smtc-stroke-width-ctrl-outline)",At="var(--smtc-text-global-body1-font-weight)",$t="var(--smtc-text-global-body3-font-weight)",It="var(--smtc-style-default-regular-font-family)",Pt="var(--smtc-style-default-header-font-family)",Rt="var(--smtc-static-corner-rounded-5-base)",Mt="var(--smtc-text-global-body3-font-size)",_t="var(--smtc-text-global-body3-line-height)",Et="var(--smtc-text-style-default-header-font-family, var(--smtc-text-style-default-regular-font-family))",Ft="var(--smtc-icon-color-primary-filter)",Dt="var(--squircle-modifier)",Ot="var(--mai-smtc-corner-card-default)",Nt="var(--mai-smtc-corner-card-nested-default-inside)",Lt="var(--mai-smtc-corner-card-nested-default-outside)",Bt="var(--mai-smtc-corner-card-nested-large-inside)",Ut="var(--mai-smtc-corner-card-nested-large-outside)",Wt="var(--mai-background-ctrl-onImage-rest)",Vt="var(--mai-background-ctrl-onImage-hover)",Ht="var(--mai-background-ctrl-onImage-pressed)"},39892:function(t,e,n){var i,r,o;n.d(e,{CO:function(){return r},us:function(){return i}}),function(t){t[t.Unknown=0]="Unknown",t[t.NotSignedIn=1]="NotSignedIn",t[t.SignedIn=2]="SignedIn"}(i||(i={})),function(t){t.MSA="MSA",t.AAD="AAD",t.AAD_AL="AAD-AL",t.NA="NA",t.UNSUPPORTED_SOVEREIGNTY="UNSUPPORTED_SOVEREIGNTY"}(r||(r={})),function(t){t[t.NonAadAccount=0]="NonAadAccount",t[t.AadAccount=1]="AadAccount",t[t.Unknown=2]="Unknown"}(o||(o={}))},40160:function(t,e,n){n.d(e,{Z:function(){return d}});var i=n(65022),r=n(93468),o=n(51518),s=n(6092),a=n(12870),c=n(77246),u=n(98216);async function d(t,e=!1){const{CurrentFlightSet:n,ClientSettings:d}=a.Rb;if(!(0,c.S)()||"true"===d?.static_page)return;const l=(0,o.E)(20),{debugId:h,fdHead:f,fdFlightingVersion:p,requestHeaderMuid:g}=t||{};if(!f)return;const{requestMuid:m,requestTrailInfo:w}=d,y=w?.flightVersion,v=m?.toLowerCase(),b=g?.replace(/-/g,"").toLowerCase(),S=new Set(f.toLocaleLowerCase().split(",")),C={pcsMuid:v,oneServiceMuid:b,pcsFlightBlobVersion:y,oneServiceFlightBlobVersion:p,oneServiceDebugId:h},k=[],T=n||new Set;if(!T||!T.size)return void(l&&(0,r.vV)(i.CUJ,"PCS flights are empty",`ClientSettings.static_page = ${d?.static_page}`,C));v&&b&&b!==v&&l&&(0,r.vV)(i.O3F,"Muid mismatch between PCS and 1S",void 0,C);const x=function(){const t=s.T3.AppType;if("winWidgets"===t)return"prg-pr2";if("windowsShell"===t||"windowsShellV2"==t)return"prg-1sw-";return"prg-"}();for(const t of T)t.startsWith(x)&&!S.has(t)&&k.push(t);for(const t of S)t.startsWith(x)&&!T.has(t)&&k.push(t);k&&k.length>0&&(e&&u.YT.addOrUpdateTmplProperty("flight-mismatch"),l&&(0,r.vV)(i.VLN,"Flight mismatch between PCS and 1S",void 0,{missingPrgFlights:k.join(","),commonProps:C}))}},40371:function(t,e,n){n.d(e,{lKb:function(){return o}});var i=n(84855);const r={[i.i_T]:"above-river-block",[i.Ej]:"action-tray",[i.K8q]:"article-close-button",[i.Ouq]:"article-related-stories",[i.SAb]:"article-top-comment",[i.WG6]:"autos-carousel",[i.vjl]:"autos-entity-card-wc",[i.DfK]:"autos-entity-span",[i.FjG]:"back-to-top-button",[i.U72]:"background-gallery",[i.F0b]:"background-image",[i.w0E]:"bing-daily-quiz-card",[i.iej]:"bing-health-card",[i.ct7]:"bing-health-fitness-card",[i.Y7O]:"bing-homepage-feed",[i.Op9]:"boost-ad-card",[i.SNY]:"breaking-news-wc",[i.MIc]:"calendar-card",[i.eYr]:"card-action",[i.EUj]:"cashback-carousel-card",[i.ote]:"casual-games-banner",[i.ymm]:"casual-games-card",[i.CNr]:"casual-games-carousel-card",[i.pqA]:"casual-games-entertainment-takeover",[i.QcA]:"casual-games-zh-carousel",[i.oC8]:"casual-games-feed",[i.n_I]:"casual-games-frame",[i.AfX]:"casual-games-game-card-carousel",[i.Sld]:"casual-games-gameplay",[i.C25]:"casual-games-gameplay-right-rail",[i.$1A]:"casual-games-hub",[i.JOJ]:"casual-games-landing-v2",[i.nlv]:"casual-games-pill",[i.W2]:"casual-games-prong2-carousel-card",[i.hxV]:"casual-games-stripe-carousel-card",[i.oOo]:"casual-games-user-profile-preview",[i.LGh]:"channel-entry-point",[i.HTg]:"channel-filter-card",[i.LSw]:"fre-entrypoint",[i.Bvk]:"channel-interests-manager",[i.iEy]:"channel-mobile-content",[i.OTF]:"channel-page",[i.eVF]:"channel-store",[i.Qoi]:"chrome-extension-page",[i.Yw8]:"cms-base-experience",[i.BV_]:"shopping-cms",[i.FEr]:"codex-bing-chat",[i.QmR]:"cold-start",[i.uby]:"common-auto-suggest",[i.eww]:"common-header",[i.UlU]:"common-search-box-edgenext",[i.k29]:"common-settings-edgenext",[i.XTG]:"community-card",[i.RMd]:"community-compose-copilot",[i.AN5]:"commute-card",[i.spA]:"companion-widget",[i._5A]:"conditional-banner-hp-wc",[i.s4M]:"conditional-banner-wc",[i.ZPV]:"consumption-feed-wc",[i.m$j]:"consumption-page",[i.M4f]:"content-flex-info-pane",[i.qNJ]:"content-group",[i.ojW]:"content-group-card",[i.uWu]:"content-tts",[i.An8]:"contextual-feedback-wc",[i.$YM]:"copilot-consumption-landing-page",[i.JCB]:"copilot-feed-view",[i.G2r]:"copilot-ruby-card",[i.r3n]:"copilot-suggestion-prompts",[i.PMX]:"copilot-prompts-card-for-work",[i.P$f]:"cpc-monetization-dashboard",[i.qIz]:"creator-spotlight-card",[i.nau]:"daily-brief-card",[i.E2]:"daily-brief-full-page-player",[i.avx]:"daily-greeting-card",[i.iR_]:"daily-moments-card",[i.Aqo]:"daily-wonder-card",[i.QO_]:"daily-wonder-copilot-card",[i.KaV]:"dashboard-fallback",[i.rmE]:"dashboard-settings",[i.lwF]:"debug-button",[i.BJK]:"dense-card",[i.B$w]:"desktop-feed-hub",[i.Cbw]:"desktop-feed-views",[i.ySv]:"desktop-feed",[i.O_p]:"dev-tools",[i.o$H]:"did-you-know-image-wc-experience",[i.bQD]:"did-you-know-wc-experience",[i.cpF]:"digest-card",[i.Wi9]:"display-ads",[i.SAI]:"distribution-feed",[i.bN8]:"distribution-header",[i.P6d]:"distribution-page",[i.smC]:"distribution-pivots-nav",[i.hEo]:"donation-npo-card",[i.KTI]:"edge-chromium-page",[i.DSN]:"edge-shopping",[i.nwD]:"election-card",[i.pH]:"emmx-entrypoint",[i.OBg]:"entertainment-card",[i.skx]:"entertainment-premier-card",[i.Igw]:"entry-point-hp-mobile",[i.CJU]:"entry-point",[i.WO6]:"entry-point-hp-ruby",[i.zV7]:"entry-point-mobile-hub",[i.Qj3]:"entry-point-views",[i.s7z]:"esports-card",[i.A$l]:"example-offer-card",[i._iH]:"experience-preview-cta",[i.a0r]:"family-card",[i.Fep]:"feed-container",[i.v7O]:"feed-level-feedback-wc",[i.G2t]:"feed-navigation-hp",[i.vq4]:"feedback-card",[i.TAx]:"feedback-dialog-wc",[i.b8g]:"feedback-link",[i.DKz]:"feed-off-dialog",[i.C$X]:"finance-carousel",[i.pqd]:"float-button-group",[i.Ruc]:"following-fre-confirmation",[i.pt1]:"following-fre-full-width",[i.B_E]:"food-similar-items",[i.gvE]:"frequent-sites-card",[i.KHV]:"gaming-channel",[i.CVt]:"gaming-discover-strip",[i.asX]:"gaming-page",[i.gIT]:"gaming-recentlyplayed-card",[i.oMs]:"general-elections",[i.jCw]:"grid-view-feed",[i.yy7]:"header-windows-shell-wc",[i.D69]:"health-articles-card",[i.FYv]:"health-augment-card",[i.sUJ]:"health-diet-plan-schedule",[i.LxF]:"health-feedback",[i.owB]:"health-fitness-carousel",[i.KdP]:"health-food-healtheffects",[i.$v]:"health-food-recipes",[i.Mf4]:"healthhub-healthapp",[i.Mc6]:"health-interests-manager",[i.ozo]:"health-qna-card-wc",[i.Lwu]:"health-tip-wc",[i.rK_]:"health-top-span",[i.WgF]:"health-topic-flyout",[i.z3c]:"health-translation",[i.Zhi]:"hero-container-wc",[i.puY]:"homepage-footer",[i.NJc]:"homepage-header",[i.moo]:"homepage-pwa-mobile",[i.IWO]:"horoscope-answer-card",[i.Vzq]:"hot-list-card",[i.Cfy]:"hp-feed-switch",[i.sZo]:"immersive-fullscreen",[i.c9U]:"inspiration-card",[i.PvQ]:"interest-fre-card",[i.rh2]:"interest-management-card",[i.qMv]:"interests-manager",[i.ve9]:"interests-wc",[i.FM9]:"ios-pwa-install-instructions",[i.d3]:"issue-reporting",[i.q8z]:"ka-social-buzz",[i.h1]:"key-takeaways-wc",[i.cEj]:"language-toggle",[i.k2X]:"linked-in-card",[i.hkb]:"local-hub-header",[i.PSy]:"localize-strings-temp-experience",[i.K9G]:"mail-signout-banner",[i.Ir6]:"manga-card",[i.aI7]:"manga-carousel",[i.swS]:"market-language-toggle",[i.JY9]:"marketplace-card",[i.X0z]:"me-control",[i.lJH]:"me-stripe",[i.XEv]:"microsoft-edge-widget",[i.kW8]:"mobile-app-upsell",[i.GIn]:"mobile-consumption-page",[i.h7w]:"mobile-feed-hub",[i.aVt]:"mobile-feed-wc",[i.vAe]:"mobile-footer",[i.BsJ]:"mobile-header",[i.JYX]:"mobile-market-selector",[i.P6g]:"mobile-notification",[i.QCU]:"mobile-popup-window",[i.jHn]:"mobile-tip",[i.dxc]:"mobile-trending-search-card",[i.skl]:"mobile-video-sd-card",[i.shR]:"moment-in-time-hero",[i.$q6]:"money-augment-card",[i.aC]:"money-copilot",[i._1F]:"money-info",[i.ahW]:"money-info-card",[i.yl]:"money-info-span",[i.YPW]:"ms-rewards",[i.chB]:"msn-feed",[i.mLJ]:"msn-studio",[i.e19]:"native-ad-wc",[i.$K6]:"navigation-page-experience",[i.PbL]:"newsletter-signup",[i.MAn]:"newsletter-signup-page",[i.Acs]:"tracker-create",[i.Zgg]:"tracker-page",[i.N6u]:"tracker-topic",[i.Kt8]:"notification-bell",[i._E8]:"notification-mini-card",[i.FcC]:"nudge-spotlight-card",[i.QtQ]:"nurturing-banner",[i.jRe]:"nurturing-coach-mark",[i.iIw]:"office-apps",[i.bNy]:"office-coachmark",[i.enh]:"office-documents-table",[i.PyZ]:"office-leftrail",[i.B34]:"on-this-day-card",[i.wcr]:"page-refresh",[i.PP4]:"pano-page",[i.W34]:"personal-finance-expense-distribution",[i.lr]:"personal-finance-transactions-card",[i.j$N]:"personalize-nav-button",[i.Ujv]:"photo-card",[i.P4y]:"pill-wc",[i.J9$]:"pivots-mobile",[i.ktl]:"polls-card",[i.VMF]:"premium-profile-promo-card",[i.SLN]:"pride-event-card",[i.JxY]:"prism-carousel-card",[i.fQG]:"prism-feed",[i.AOC]:"prism-sd-card",[i.CzP]:"proactive-feedback-wc",[i.jz6]:"productivity-hub",[i.CAk]:"profile-articles",[i.XRH]:"promoted-ad-wc",[i.QYe]:"publisher-list",[i.PIH]:"publisher-subscribe-follow-button",[i.hzk]:"pull-to-refresh",[i.HYZ]:"pulse-edgenext",[i.dIv]:"pulse-prong",[i.Qb0]:"qna-card",[i.j2b]:"qna-feed-404-page",[i.U8S]:"qna-feed-card",[i.Pju]:"qna-feed-card-menu",[i.mrt]:"qna-feed-carousel",[i.dZV]:"qna-feed-categories-menu",[i.JdX]:"qna-feed-explore-topics",[i.uKL]:"qna-feed-list",[i.ggT]:"qna-feed-my-topics",[i.g$M]:"qna-feed-related-questions",[i.Erl]:"qna-feed-report-card",[i.ptQ]:"qna-feed-suggested-topics",[i.IMn]:"qna-feed-topic-detail",[i.Sdo]:"qna-feed-trending-questions",[i.zHB]:"quiz-card",[i.u2C]:"reaction-breakdown-dialog",[i.ArF]:"real-estate-card",[i.Lz8]:"recipes-sd-card",[i.gJ$]:"recommended-interests",[i.F2]:"recommended-sites",[i.adn]:"rewards-card",[i.xYf]:"rewards-flyout",[i.wNB]:"rich-calendar-card",[i.QSA]:"rich-calendar-landing-page",[i.Y_V]:"exam-page",[i.$i6]:"right-rail-provider-carousel",[i.mhC]:"ruby-board-home-page",[i.i]:"ruby-board-notifications-card",[i.oXp]:"ruby-composer",[i.vqF]:"ruby-composer-autosuggest",[i.xye]:"ruby-page",[i.HOb]:"scroll-down-button",[i.nDg]:"sd-card-mask",[i.FSw]:"search-box-wc",[i.s1n]:"search-history-edgenext",[i.oJ5]:"select-carousel",[i._Jh]:"shared-hero-news-card",[i.qkr]:"stack-card",[i.ED]:"shared-links",[i.ohD]:"sharepoint-news-card",[i._ge]:"shopping-all-stores-page",[i.XSf]:"shopping-article-page",[i.r87]:"shopping-augment-card",[i.psk]:"shopping-banner-sd-card",[i.V9h]:"shopping-bing-product-details",[i.r4q]:"shopping-blackjack-deal-page",[i.vXx]:"shopping-blackjack-page",[i.aR4]:"shopping-buying-guide",[i.JCG]:"shopping-buying-guide-premium-card",[i.D19]:"shopping-buying-guides-card",[i.xdy]:"shopping-card-actions",[i.yXx]:"shopping-card-wc",[i.yFt]:"shopping-carousel-prong-wc",[i.Yeu]:"shopping-carousel",[i.bBp]:"shopping-category-page",[i.F5C]:"shopping-checkout-modal",[i.a0f]:"shopping-cold-start",[i.e1E]:"shopping-coupons-page",[i.BCq]:"shopping-deals-home-page",[i.SbE]:"shopping-debug-page",[i.rAl]:"shopping-entry-base-experience",[i.P83]:"shopping-events-deal-card",[i.Yac]:"shopping-fashion-carousel",[i.Rpm]:"shopping-gem-hero-card",[i.AUU]:"shopping-grid",[i.Ohn]:"shopping-grouped-carousel",[i.sz2]:"shopping-guides-page",[i.Cfl]:"shopping-homepage",[i.mny]:"shopping-inspiration",[i.TlD]:"shopping-leaderboard",[i.lHB]:"shopping-modal",[i.N0q]:"shopping-model-overlay",[i.N34]:"shopping-moment-in-time-page",[i.qfU]:"shopping-offer-card",[i.IxT]:"shopping-page-base",[i.GFw]:"shopping-page-content",[i.GjX]:"shopping-pivot-feed",[i.LkC]:"shopping-product-detail-page",[i.KJl]:"shopping-river-card",[i.NjZ]:"shopping-sd-card",[i.k_X]:"shopping-search",[i.JMd]:"shopping-shopthelook-page",[i.LLs]:"shopping-top-span",[i.VLS]:"sign-in-control",[i.R6D]:"sign-in-flyout",[i.UET]:"signal-overlay",[i.wTj]:"social-avatar",[i.c$z]:"social-bar-wc",[i.$on]:"social-comment-box",[i.uY0]:"social-comment-wc",[i.uy5]:"social-endorsements",[i.PyO]:"social-entrypoint",[i.y55]:"social-lead-gen-in-article",[i.Cvt]:"social-notification",[i.QJZ]:"social-post-editor",[i.dHl]:"social-profile-action-menu",[i.Z6M]:"social-profile-appeal",[i.aAb]:"social-profile-card",[i.$B1]:"social-profile-promotion",[i.HXk]:"social-profile-rejection-details",[i.OVJ]:"social-profile-topics",[i.g4B]:"social-related-sources",[i._07]:"social-report-menu",[i.yVO]:"social-rewards-medal",[i.KsV]:"social-rewards-promotion",[i.I7z]:"social-star-rating",[i.oCI]:"social-subscription-banner",[i.nQd]:"social-subscription-notification",[i.YFx]:"social-subscription-overlay",[i.CKw]:"social-subscription-overlay-summary",[i.$PL]:"social-subscription-upsell",[i.ztc]:"social-support-result",[i.uBV]:"social-tip-history",[i.CnP]:"social-tip-introduction",[i.BDB]:"social-tip-promotion",[i.oWn]:"social-tip-promotion-in-article",[i.grb]:"social-tip-selection",[i.Ch2]:"sports-around-the-league",[i.IUs]:"sports-augment-card",[i.AxF]:"sports-background-ux",[i.oz5]:"sports-brackets",[i.FC5]:"sports-card",[i.IbX]:"sports-commentary",[i.LjG]:"sports-copilot-navigation",[i.XvT]:"sports-countdown-timer",[i.xsS]:"sports-cricket-layout-manager",[i.EJM]:"sports-cricket-league-stats",[i.lDi]:"sports-cricket-match-row",[i.Lph]:"sports-cricket-partnerships",[i.PEi]:"sports-cricket-rankings",[i.SSD]:"sports-cricket-scorecard",[i.T3B]:"sports-cricket-scores-and-schedule",[i.X2D]:"sports-entity-header",[i.W1i]:"sports-featured-matches-card",[i.C3j]:"sports-featured-team-list",[i.ezG]:"sports-fre-panel",[i.bVF]:"sports-full-standings",[i.jeg]:"sports-full-stats",[i.dVA]:"sports-game-information",[i.hLd]:"sports-game-score",[i.HfM]:"sports-game-summary",[i.khk]:"sports-game-summary-full",[i.gNr]:"sports-game-timeline",[i.Zyh]:"sports-gc-player-stats",[i.NE7]:"sports-gc-team-stats",[i.ABl]:"sports-gen-ui-page",[i.wHA]:"sports-gpt-analysis",[i.$U7]:"sports-headlines-header",[i.mkF]:"sports-headlines-main-story",[i.zXW]:"sports-headlines-story-carousel",[i.WlQ]:"sports-headlines-timelines",[i.nDd]:"sports-info",[i.vRr]:"sports-info-span",[i.of8]:"sports-layout-renderer",[i.iNz]:"sports-match-row",[i.l$J]:"sports-medal-count-list",[i.krc]:"sports-medal-summary-list",[i.em2]:"sports-medal-tracker-list",[i.YPZ]:"sports-mobile-tab-panel",[i.eyY]:"sports-olympic-card",[i.Adx]:"sports-olympics-header-row",[i.PRP]:"sports-olympics-result-full",[i.RSF]:"sports-olympics-schedule-full",[i.fgP]:"sports-person-match-row",[i.Zt2]:"sports-personalization-strip",[i.ptP]:"sports-pick-winner",[i.mVK]:"sports-player-bio",[i.ZC1]:"sports-player-insights",[i.ZtX]:"sports-popular-card-wx",[i.zhA]:"sports-previous-matchups",[i.KB5]:"sports-promo-card",[i.hBV]:"sports-rankings-full",[i.s$e]:"sports-retention-full",[i.cif]:"sports-scores-and-schedule",[i.$mu]:"sports-scores-and-schedule-full",[i.yFF]:"sports-scoring-summary",[i.nZy]:"sports-squad",[i.YCb]:"sports-standings",[i.aT3]:"sports-standings-list",[i.PsK]:"sports-stat-leaders",[i.SU9]:"sports-stats",[i.fCz]:"sports-story-player",[i._PY]:"sports-tab-layout",[i.Hwy]:"sports-team-formation",[i.vOM]:"sports-team-probability",[i.AeL]:"sports-tennis-scores-and-schedule-full",[i.$1s]:"sports-tennis-tournament-info",[i.y7p]:"sports-tournament-info",[i.pkK]:"sports-tournament-leaderboard",[i.XTS]:"sports-tournament-match-row",[i.aYj]:"sports-tournament-result-and-schedule",[i.zCf]:"sports-tournament-schedule",[i.jkJ]:"sports-tournament-standings",[i.apg]:"sports-trending-carousel",[i.$LH]:"sports-unavailable-players",[i.Iju]:"sports-video-list",[i.IUg]:"spotlight-card",[i.pSY]:"starter-kit",[i.qb$]:"streaks-badge",[i.p_1]:"stripe-wc",[i.SJ2]:"summary-card-wc",[i.$mD]:"super-breaking-news",[i.Isg]:"super-nav",[i.xmJ]:"super-nav-coach-mark",[i.oHo]:"superapp-banner",[i.Btw]:"theme-picker",[i.elO]:"tips-card",[i.dnU]:"ms-toast",[i.c8z]:"todo-card",[i.DZv]:"top-comments-card",[i.Kag]:"top-sites-bookmarks",[i.v$w]:"top-sites-edgenext",[i.fBZ]:"top-sites-newsbar",[i.Oc7]:"topic-tags",[i.F9m]:"traffic-card",[i.pfG]:"traffic-hero",[i.F$I]:"translate-temporary",[i.Pfk]:"travel-article-page-card",[i.kXx]:"travel-card",[i.IR9]:"travel-carousel",[i.UZs]:"travel-collection-card",[i.WNH]:"travel-destination",[i.eGH]:"travel-destination-banner",[i.W9P]:"travel-destination-details-banner",[i.i1_]:"travel-feed",[i.g4M]:"travel-flight-carousel",[i.Ew1]:"travel-hotel-carousel",[i.CfA]:"travel-inspiration-card-wc",[i.Uom]:"travel-landing-page",[i.CN]:"travel-msn-hp-card",[i.gIA]:"travel-sd-carrentals-card",[i.Qs5]:"travel-sd-destinations-card",[i.aJb]:"travel-sd-flights-card",[i.S6]:"travel-sd-hotels-card",[i.znl]:"travel-sd-themes-card",[i.vAv]:"travel-tour-activity-card",[i.dnH]:"trending-now-card",[i.tKm]:"trending-search-card",[i.nnw]:"ugc-creator-homepage",[i.Srt]:"unified-composer-personalization",[i.u1j]:"unified-mobile-feed",[i.exF]:"vertical-left-nav",[i.Jqf]:"video-card",[i.P5d]:"video-details",[i.Rh6]:"video-details-kit",[i.Nbo]:"views-coachmark",[i.s_6]:"views-native-ad",[i.qgh]:"views-rail",[i.RVI]:"waffle-wc",[i.eHh]:"wallet-personalized-offer-sd-card-wc",[i.Kvq]:"watch-filter-channel",[i.Nip]:"watch-take-a-break-header",[i.FD]:"watch-wc",[i.pQI]:"water-tracker-card",[i.HPc]:"waterfall-view-feed",[i._1i]:"weather-card",[i.O0R]:"weather-feed-wc",[i.hCA]:"weather-forecast-day",[i.Cj7]:"weather-forecast-per-hour",[i.UoA]:"weather-hero-experience",[i.yrn]:"weather-historical-temperature",[i.FOs]:"weather-hourly-histogram",[i._bP]:"weather-immersive-forecast-wc",[i.TzA]:"weather-location-card",[i.Ae$]:"weather-map-group-switcher-button",[i.Z9n]:"weather-map-legend",[i.T7e]:"weather-map-timeline",[i.ehF]:"weather-map",[i.R7J]:"weather-minimap",[i.M8j]:"weather-one-liner",[i.VPW]:"weather-overview",[i.tN3]:"weather-page",[i.$cA]:"weather-report-issue-dialog",[i.Pq7]:"weather-today-history",[i.yT]:"weather-today-mini",[i.aJM]:"weather-top-section-card",[i.LFC]:"weather-video-entry",[i.rWZ]:"welcome-greeting-light",[i.f2c]:"welcome-greeting",[i.W1Y]:"widget-picker-wc",[i.uGz]:"widgets-dynamic-feed",[i.T3T]:"widgets-consumption-page",[i.zOi]:"widgets-home-page",[i.B7V]:"widgets-notifications-card",[i.LVx]:"widgets-privacy",[i.dXe]:"widgets-region",[i.JCv]:"widgets-start-feed",[i.nR3]:"win-app-wc",[i.BPC]:"windows-office-feed",[i.nFz]:"windows-shell-banners-manager",[i.hwV]:"windows-shell-entry",[i.gQ$]:"windows-shell-header",[i.c5_]:"windows-shell-location-dialog",[i.Bkj]:"windows-shell-notification-settings",[i.FOf]:"windows-shell-settings-menu",[i.Sxv]:"windows-shell-soft-landing",[i.xiF]:"xbox-feed-wc",[i.Yhc]:"xfeed-wc",[i.DQH]:"consumption-landing-page",[i.fVD]:"msn-router",[i.RLX]:"msn-ux-ai-starter-kit-wce",[i.$AT]:"msn-unified-consumption",[i.RFF]:"gem-consumption-page",[i._C5]:"gem-card-wce"};function o(t){return r[t]}},40735:function(t,e,n){n.d(e,{u:function(){return r}});var i=n(8646);class r{get displaySurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:"Viewed",ts:Date.now()})}}}get hideSurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:"Hidden",ts:Date.now()})}}}get closeSurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:"Closed",ts:Date.now()})}}}constructor(t){if(this._platformData=t,this.interactionEvent=new i.f,!t)throw new Error("Platform data is required for PlacementSurfaceModel")}}},41377:function(t,e,n){n.d(e,{b3:function(){return i},bN:function(){return r}});const i="selectedNavItemClicked";class r{constructor(){this.ht=!1}attemptNavItemChange(t,e){return!!this.gt&&(this.gt(t,e),!0)}disconnectSuperNav(){this.gt=void 0}getForceSelectedNavItemId(){return this.wt}getSupports3DContent(){return this.ht}static getInstance(t){return r.yt||(r.yt=new r),t&&(r.yt.gt=t),r.yt}registerForceSelectedNavItemId(t){this.wt=t}registerSupports3DContent(t){this.ht=t}}},41423:function(t,e,n){n.d(e,{w:function(){return d}});var i=n(56485),r=n(98216);class o{constructor(){this.callbacks=[],this.clickCallbacks=[]}getSelectedPivot(){return this.selectedPivot}setSelectedPivot(t){t&&t.pivotId&&(this.selectedPivot={...t})}switchPivot(t,e){const n=this.selectedPivot;this.selectedPivot={...t};const i={hash:this.selectedPivot.context?.hash,navIsSticky:this.selectedPivot.navIsSticky,newSelection:this.selectedPivot,oldSelection:n};this.callbacks.sort((t,e)=>t.switchCallbackOrder-e.switchCallbackOrder),e&&r.YT.addOrUpdateTmplProperty("pvcb",this.callbacks.length.toString());for(const t of this.callbacks)t.callback(i)}clickPivot(t=!0,e){for(const n of this.clickCallbacks)n(t,e)}addSwitchListener(t,e=i.M.AfterLoadContent){this.callbacks.find(n=>n.callback===t&&n.switchCallbackOrder===e)||this.callbacks.push({callback:t,switchCallbackOrder:e})}removeSwitchListener(t){this.callbacks=this.callbacks.filter(e=>e.callback!==t)}addClickListener(t){this.clickCallbacks.push(t)}removeClickListener(t){this.clickCallbacks=this.clickCallbacks.filter(e=>e!==t)}reportLoadComplete(){this.loadComplete=!0,this.loadCompleteResolveCallback&&this.loadCompleteResolveCallback()}waitForLoadComplete(){return this.loadCompletePromise?this.loadCompletePromise:this.loadComplete?Promise.resolve():(this.loadCompletePromise=new Promise(t=>{this.loadCompleteResolveCallback=t}),this.loadCompletePromise)}}var s=n(94444),a=n(17720);const c="__PivotManager_default__",u="__PivotManager_namedSwitchers__";function d(t){if(t){const e=a.vv.get(u,()=>new Map);let n=e.get(t);return n||(n=new o,e.set(t,n)),n}return a.vv.get(c,()=>new o)}(0,s.x)(()=>{a.vv.delete(c),a.vv.delete(u)})},41625:function(t,e,n){n.d(e,{G6:function(){return o},es:function(){return c},p:function(){return a},sm:function(){return s}});var i=n(83003),r=n(17720);const o="CanonicalName-watch-shorts";var s;!function(t){t[t.IsInfopaneDenseCard=0]="IsInfopaneDenseCard",t[t.IsRiverDenseCard=1]="IsRiverDenseCard",t[t.NotDenseCard=2]="NotDenseCard"}(s||(s={}));const a=(0,r.$U)({liked:"like",unliked:"unlike",saved:"save"}),c=(0,r.$U)([i.pL.AutosCarousel,i.pL.AutosEntityList,i.pL.BeaconProviderUpsell,i.pL.BingDailyQuizCard,i.pL.BingHealthCovid19StatsCard,i.pL.BingHealthFitnessCard,i.pL.BingVideoCarousel,i.pL.BreakingNewsNotification,i.pL.CasualGamesCarousel,i.pL.ChannelCarousel,i.pL.ChannelFilterCard,i.pL.CommunityCard,i.pL.CommuteCard,i.pL.CreatorSpotlight,i.pL.DailyBriefCard,i.pL.DailyGreetingCard,i.pL.DailyMomentsCard,i.pL.DailyMomentsCard1,i.pL.DailyMomentsCard2,i.pL.DailyMomentsCard3,i.pL.DailyQuizSdCard,i.pL.DailyWonderCard,i.pL.DailyWonderCopilotCard,i.pL.DailyWonderHeroVideo,i.pL.DailyWonderQuoteCard,i.pL.DailyWonderVideoListCard,i.pL.DigestCard,i.pL.DigestCardRuby,i.pL.DonationNpoCard,i.pL.DynamicFilteredChannel,i.pL.EdgeShoppingCard,i.pL.Elections,i.pL.EntertainmentPremierCard,i.pL.EsportsCasualGames,i.pL.EsportsCasualGamesMiniWidget,i.pL.EsportsLiveStream,i.pL.EsportsTournament,i.pL.EventSDCardElectionMIT1,i.pL.EventSDCardElectionMIT2,i.pL.EventSDCardElectionMIT3,i.pL.EventSDCardOscarsPrm,i.pL.EventSDCardShopping,i.pL.EventSDCardSportsMIT1,i.pL.EventSDCardSportsMIT2,i.pL.EventSDCardSportsMIT3,i.pL.EventSDCardWorldCup,i.pL.EventSDCardWorldCup2,i.pL.FinanceSpotlightHeroPrice,i.pL.FinanceSpotlightHeroMarket,i.pL.FinanceSpotlightHeroRadarGraph,i.pL.FinanceHeroCrypto,i.pL.FinanceHeroCurrencies,i.pL.FinanceHeroMarket,i.pL.FinanceHeroMarketChart,i.pL.FinanceHeroMovers,i.pL.FinanceHeroNews,i.pL.FinanceHeroSuggested,i.pL.FinanceHeroUpcomingEarnings,i.pL.FinanceHeroWatchlistIdeas,i.pL.FinanceHerowlsummary,i.pL.ForYouNotification,i.pL.GamingRecentlyPlayed,i.pL.GemCard,i.pL.GemArticle,i.pL.GemRiverCard,i.pL.Gem_Article_RelatedArticles,i.pL.Gem_Finance_GetCharts,i.pL.Gem_GenAIContent_InsightSummary,i.pL.Gem_Media_Image,i.pL.Gem_Prompts,i.pL.GemGreeting,i.pL.GemInsight,i.pL.GemPrompts,i.pL.GemShopping,i.pL.HealthTipCard,i.pL.Horoscope,i.pL.TopCommentsCard,i.pL.HotListCard,i.pL.Inspiration,i.pL.InterestManagementCard,i.pL.LinkedInCard,i.pL.LocalNewsFeed,i.pL.MangaCard,i.pL.MangaCarousel,i.pL.Marketplace,i.pL.MarketplaceEvent,i.pL.MiniWidgets,i.pL.MiTHeroAction,i.pL.MiTHeroContent,i.pL.MiTHeroFollow,i.pL.MiTHeroSpotlight,i.pL.MoneyCrypto,i.pL.MoneyInfo,i.pL.MoneyInfoMiniWidget,i.pL.MoneyMarketBrief,i.pL.MoneyPreWL,i.pL.MoneyTopicStripe,i.pL.MyBriefRiverCard,i.pL.NewsCreatorSpotlight,i.pL.NewsDailyWonderCard,i.pL.News_DigestDaily,i.pL.News_DigestGem,i.pL.News_DigestInfopane,i.pL.News_DigestTopics,i.pL.News_DigestTopStories,i.pL.News_DigestTopics_InfoPane,i.pL.News_DigestTopics_TrendingNow,i.pL.OnThisDay,i.pL.OnThisDaySDCard,i.pL.LocalEventsSDCard,i.pL.PrismCarouselCard,i.pL.Qna,i.pL.RealEstateCard,i.pL.RealEstateCarousel,i.pL.Recipes,i.pL.RecommendedInterests,i.pL.RelatedNewsCard,i.pL.Rewards,i.pL.RewardsDailySet,i.pL.RichCalendarCard,i.pL.RiverGem,i.pL.SavedContent,i.pL.SectionHeader,i.pL.Shopping1688Carousel,i.pL.ShoppingBWMCard,i.pL.ShoppingBWMCarousel,i.pL.ShoppingBannerSdCard,i.pL.ShoppingCard,i.pL.ShoppingCarousel,i.pL.ShoppingCarousel2,i.pL.ShoppingProng2c,i.pL.ShoppingRiver,i.pL.ShoppingRiver1,i.pL.ShoppingRiver2,i.pL.ShoppingRiver3,i.pL.ShoppingTopSectionCard,i.pL.SportsHeroFre,i.pL.SportsHeroLeagueTodaysEvents,i.pL.SportsHeroMatch1SeasonStats,i.pL.SportsHeroMatch1Stats,i.pL.SportsHeroMatch2SeasonStats,i.pL.SportsHeroMatch2Stats,i.pL.SportsHeroMatch3SeasonStats,i.pL.SportsHeroMatch3Stats,i.pL.SportsHeroMatchStatistics,i.pL.SportsSpotlight2Match1,i.pL.SportsSpotlight2Match2,i.pL.SportsHeroNews,i.pL.SportsHeroOneVsManyEventResult,i.pL.SportsHeroOneVsOneEventResult,i.pL.SportsHeroSeasonStatistics,i.pL.SportsHeroStandingsRankings,i.pL.SportsHeroTeamStandingWithEvents,i.pL.SportsHeroTeamStandingWithMedals,i.pL.SportsHeroTeamStandings,i.pL.SportsHeroTeamVsTeam,i.pL.SportsHeroTeamVsTeamEventResult,i.pL.SportsHeroMatchCard,i.pL.SportsHeroVideo,i.pL.SportsMatch,i.pL.SportsMatchMiniWidget,i.pL.SportsOlympics,i.pL.SportsTopicStripe,i.pL.SportsStackCard,i.pL.SpotlightStackCard,i.pL.PersonalFinanceStackCard,i.pL.StockQuote,i.pL.TabbedInfopaneCard,i.pL.TopSectionNews,i.pL.TopStories,i.pL.TopicFeed,i.pL.TrafficCameras,i.pL.TrafficCamerasWithSummary,i.pL.TrafficDelays,i.pL.TrafficIncidents,i.pL.TrafficInfo,i.pL.TrafficMap,i.pL.TrafficNews,i.pL.TrafficSummary,i.pL.TrafficTransit,i.pL.Transit,i.pL.TravelDestinationCard,i.pL.TravelDestinationCarouselCard,i.pL.TravelInspirationCard,i.pL.TravelTimes,i.pL.TravelTimesWithSummary,i.pL.Trending,i.pL.TrendingInTenMinutes,i.pL.TrendingSearchCard,i.pL.TrendingTopics,i.pL.Upsell,i.pL.UserInterestNTPProvider,i.pL.UserInterestProvider,i.pL.UserInterestTopic,i.pL.UserInterestTopicAndProvider,i.pL.VideoShoppingCarouselCard,i.pL.WatchGoldShorts,i.pL.WatchVideoCard,i.pL.WatchVideoHeavy,i.pL.WeatherCurrent,i.pL.WeatherForecast,i.pL.WeatherHero,i.pL.WeatherMap,i.pL.WeatherSummary,i.pL.WeatherSummaryMiniWidget,i.pL.WidgetsNotificationsCard,i.pL.quizcard,i.pL.CatchUpStack,i.pL.CopilotCard,i.pL.PublisherSpotlightCard,i.pL.FollowedPublishersCard,i.pL.LittleKnownFactsCard,i.pL.NewsLittleKnownFactsCard,i.pL.TopStoriesRuby,i.pL.NewsTopStories,i.pL.TrendingNowRuby,i.pL.NewsTrendingNow])},41820:function(t,e,n){n.d(e,{IT:function(){return h},JW:function(){return d},K5:function(){return a},QA:function(){return s},Wl:function(){return p},XE:function(){return c},bJ:function(){return i},lh:function(){return u},oN:function(){return g},qm:function(){return m},sL:function(){return f},xT:function(){return o}});const i={campaigns:"campaigns",feedLayout:"feed_layout",nonDAU7d:"non_dau_7d",nonDAU30d:"non_dau_30d",renderSingleColumn:"render_single_column",wpo:"wpo",wpoLytTmpl:"wpo_lyt_tmpl",topSites:"top_sites",recommendedSites:"recommended_sites",viewport:"viewport",wpo_nx:"wpo_nx",layoutPromotion:"layoutPromotion",layoutHistory:"layoutHistory",sptmarket:"sptmarket",userMuid:"user_muid",rubyTargetedVersion:"ruby_targeted_version",widgetsUpsell:"widgets_upsell",companionAutoOpenDismiss:"cmp_auto_open_dismiss",rubyCohortOptOutThreshold:"ruby_cohort_optout_threshold",rubyFlightHistory:"ruby_flight_history",recentlyViewedContent:"recently_viewed_content"};var r,o,s;!function(t){t.Ntp="ntp",t.Wpo="wpo"}(r||(r={})),function(t){t.MultiColumn="multi",t.SingleColumn="single"}(o||(o={})),function(t){t.apiError="api_error"}(s||(s={}));const a={tscollapsed:"tscollapsed",layout_mode:"layout_mode",left_rail:"left_rail",quick_links_options:"quick_links_options",single_column:"single_column",recommended_sites:"recommended_sites",news_below_searchbox:"news_below_searchbox",ntp_tips:"ntp_tips",search_history:"search_history",current_location_enabled:"current_location_enabled",enable_sponsored_content:"enable_sponsored_content",enable_pulse:"enable_pulse",seen_interest_fre_count:"seen_interest_fre_count",visited_following_feed:"visited_following_feed",dismiss_scroll_down_button:"dismiss_scroll_down_button",breaking_news_dismissed:"breaking_news_dismissed",topsites_open_in_new_tab:"ntp.topsites_open_in_new_tab",show_copilot_suggestions_toggle:"ntp.show_copilot_suggestions_toggle",ruby_ux_history:"ruby_ux_history",ruby_state_history:"ruby_state_history",is_ruby_page:"is_ruby_page",is_ruby:"ntp.is_ruby",ruby_cookie_change_history:"ruby_cookie_change_history",ruby_set_history:"ruby_set_history"};var c;!function(t){t.User="user",t.Wpo="wpo",t.Lpo="lpo",t.adminPortal="adPortal",t.ntpVisibleTab="ntpVisTab",t.rubyDefault="rubyDefault"}(c||(c={}));const u={0:"user",1:"wpo",2:"wpo",3:"adPortal",4:"ntpVisTab",5:"rubyDefault"},d={backgroundImageTypePolicy:"ntp.background_type_blocked_by_policy",currentBackgroundImageType:"ntp.background_image_type",hideDefaultTopSites:"ntp.hide_default_top_sites",customBackgroundImageInfo:"ntp.local_background_image",layout:"ntp.layout_mode",quickLinksDisplaySetting:"ntp.quick_links_options",imageOfTheDay:"ntp.show_image_of_day",feeds:"ntp.news_feed_display",greeting:"ntp.show_greeting",showSettings:"ntp.show_settings",verticalTabsCollapsed:"edge.vertical_tabs.collapsed",verticalTabsOpened:"edge.vertical_tabs.opened",singleColumnEnabled:"ntp.single_column.enabled",userNurturingUpdated:"ntp.user_nurturing",hasUserSeenNewFre:"new_device_fre.has_user_seen_new_fre",defaultBrowserSettingEnabled:"browser.default_browser_setting_enabled",showAppLauncher:"ntp.enable_app_launcher",userChoices:"ntp.record_user_choices",selectedFeedPivot:"ntp.selected_feed_pivot",widgetsRegion:"ntp.enable_widgets_region",recommendedWidgetsSettings:"ntp.recommended_widgets_region"};var l,h,f,p;!function(t){t.NotInChinaCoachMarkButton="notInChinaCoachMarkButton",t.FeedbackLink="feedbackLink"}(l||(l={})),function(t){t[t.focused=0]="focused",t[t.inspirational=1]="inspirational",t[t.informational=2]="informational",t[t.custom=3]="custom"}(h||(h={})),function(t){t.MANUAL="manual",t.WPO_OPEN="wpo_open",t.WPO_CLOSE="wpo_close",t.REVERT="revert"}(f||(f={})),function(t){t[t.MANUAL=0]="MANUAL",t[t.WPO_BEFORE_CLOSE=1]="WPO_BEFORE_CLOSE",t[t.WPO_CLOSED=2]="WPO_CLOSED",t[t.WPO_BEFORE_OPEN=3]="WPO_BEFORE_OPEN",t[t.WPO_OPENED=4]="WPO_OPENED",t[t.REVERT_WPO_CLOSE=5]="REVERT_WPO_CLOSE"}(p||(p={}));const g="ntps",m={tabInitialRid:"tab_initial_rid"}},41862:function(t,e,n){n.d(e,{G:function(){return i},J:function(){return r}});class i{constructor(){this.counts={}}qualifyKey(t){t||(t="NA");return t+this.qualifySuffix(t)}qualifySuffix(t){return r(this.addCount(t)-1)}reset(){this.counts={}}addCount(t){return this.counts[t]=(this.counts[t]||0)+1}}function r(t){return t<=0?"":"-"+(t+1)}},41917:function(t,e,n){n.d(e,{E:function(){return o},Z:function(){return r}});var i=n(94444);let r=new Map;function o(t,e){const n=r.get(t);return!n||n.currentState>=e}(0,i.x)(()=>{r=new Map})},42e3:function(t,e,n){n.d(e,{JW:function(){return a},VP:function(){return r},a_:function(){return i},hr:function(){return o}});const i="background_gallery_open_event",r="galleryToastCooldowns",o=new Set(["overlay","positioning-region"]);var s;!function(t){t.reducedMotion="reducedMotion"}(s||(s={}));new Map([["imageAndVideo",["Video","CMSImage","Iris"]],["bing",["Iris"]],["custom",["BrowserLocal"]],["theme",["Theme"]]]);const a={backgroundSelectionMetadata:{appliedTimestamp:1721339696654,configIndex:"24",provider:"CMSImage"},changeBackgroundDaily:!1,selectedVideoSetting:"balanced"}},42118:function(t,e,n){n.d(e,{_0:function(){return u}});var i=n(45181),r=n(79742),o=n(77246);let s,a=!1;const c=new Promise(t=>{s=t});async function u(){switch(await async function(){a||(i.n.subscribe(i.Y.CookieConsentStatus,t=>{t!==r.z.Unknown&&s()}),a=!0);const t=i.n.get(i.Y.CookieConsentStatus);return t!==r.z.Unknown?t:((0,o.S)()&&await c,i.n.get(i.Y.CookieConsentStatus))}()){case r.z.Required:return!0;case r.z.NotRequired:return!1;default:return}}},42140:function(t,e,n){n.d(e,{U:function(){return c},a:function(){return s}});var i=n(2603);var r=n(17501),o=n(45933);function s(t){!t||(0,o.P)()<=0||t.push({type:r.x.Automation,mapper:new i.V,transporterConfig:{callback:a}})}function a(t){c.dispatch({type:r.x.OneDS,payload:t})}const c=new class{constructor(){this.history=[],this.listeners=[]}dispatch(t){this.history.push(t),this.listeners.forEach(e=>e(t))}listen(t){return this.listeners.push(t),this.history.forEach(t),{remove:()=>{const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}}}}},42323:function(t,e,n){n.d(e,{M:function(){return d},O3:function(){return l},Vj:function(){return C},Vq:function(){return p},_8:function(){return a},a1:function(){return u},bX:function(){return c},iN:function(){return y},ik:function(){return S},nV:function(){return h},q_:function(){return g},tM:function(){return m},th:function(){return b},ts:function(){return v},xp:function(){return w},zC:function(){return f}});var i=n(22131),r=n(74849),o=n(39677),s=n(32257);const a=r.A`
    :host {
        --cstm-foreground-ctrl-neutral-primary-rest-filter: brightness(0) saturate(100%) invert(92%) sepia(2%) saturate(1678%) hue-rotate(190deg) brightness(95%) contrast(96%);
        --cstm-foreground-ctrl-neutral-primary-pressed-filter: brightness(0) saturate(100%) invert(64%) sepia(10%) saturate(836%) hue-rotate(188deg) brightness(89%) contrast(89%);
        --cstm-foreground-ctrl-neutral-secondary-rest-filter: brightness(0) saturate(100%) invert(56%) sepia(80%) saturate(138%) hue-rotate(190deg) brightness(85%) contrast(82%);
        --cstm-foreground-ctrl-on-subtle-rest-filter: brightness(0) saturate(100%) invert(92%) sepia(3%) saturate(1502%) hue-rotate(191deg) brightness(95%) contrast(97%);
        --cstm-subtle-button-border-color: rgba(255, 255, 255, 0.08);
    }
`,c=r.A`
    :host {
        --cstm-corner-media-outside-radius: calc(${o.y3Q} * ${o.MU6});
        --cstm-corner-media-inside-radius: calc(${o.xl2} * ${o.MU6});
        --cstm-corner-media-in-card: var(--cstm-corner-media-outside-radius) var(--cstm-corner-media-outside-radius) var(--cstm-corner-media-inside-radius) var(--cstm-corner-media-inside-radius);
        --cstm-border-on-squircle-px: 1px;
        --cstm-foreground-ctrl-neutral-primary-rest-filter: brightness(0) saturate(100%) invert(10%) sepia(8%) saturate(616%) hue-rotate(341deg) brightness(94%) contrast(88%);
        --cstm-foreground-ctrl-neutral-primary-pressed-filter: brightness(0) saturate(100%) invert(30%) sepia(4%) saturate(768%) hue-rotate(329deg) brightness(97%) contrast(86%);
        --cstm-foreground-ctrl-neutral-secondary-rest-filter: brightness(0) saturate(100%) invert(39%) sepia(2%) saturate(1223%) hue-rotate(335deg) brightness(91%) contrast(90%);
        --cstm-foreground-ctrl-on-subtle-rest-filter: brightness(0) saturate(100%) invert(10%) sepia(3%) saturate(2871%) hue-rotate(343deg) brightness(94%) contrast(88%);
        --cstm-status-danger-background-light: #AC1922;
        --cstm-status-danger-foreground-light: #FFFFFF;
        --cstm-subtle-button-border-color: rgba(0, 0, 0, 0.08);
        --cstm-background-flyout-linear-gradient: linear-gradient(0deg, ${s.RKA} 0%, ${s.RKA} 100%), 
            linear-gradient(0deg, ${s.Pgz} 0%, ${s.Pgz} 100%), 
            linear-gradient(0deg, ${s.oXU} 0%, ${s.oXU} 100%), ${o.vJX};
    }
`.withBehaviors((0,i.G2)(a)),u="var(--cstm-foreground-ctrl-neutral-primary-rest-filter)",d="var(--cstm-foreground-ctrl-neutral-primary-pressed-filter)",l="var(--cstm-foreground-ctrl-neutral-secondary-rest-filter)",h="var(--cstm-foreground-ctrl-on-subtle-rest-filter)",f="var(--cstm-background-flyout-linear-gradient)",p=`${o.ry_} ${o.kf9} ${o.Ws$} 0px ${o.Ci3}, \n    ${o.MSR} ${o.FeE} ${o.XES} 0px ${o.xEt}`,g="var(--cstm-border-on-squircle-px)",m="var(--cstm-corner-media-in-card)",w=`${o.yds} ${o.Tb$} ${o.ruk} ${o.FkA} ${o.fxR} inset, \n    ${o.wvE} ${o.pTq} ${o.XLk} 0px ${o.VVH}`,y=`${o.Y4F} ${o.Rqs} ${o.rOe} 0px ${o.JMw}, \n    0px ${o.qcT} ${o.cjA} 0px ${o.I5k}`,v="var(--cstm-subtle-button-border-color)",b=`${o._SK} ${o.Tex} ${o.Dpq} 0px ${o.ze9}`,S="var(--cstm-status-danger-background-light)",C="var(--cstm-status-danger-foreground-light)"},42494:function(t,e,n){n.d(e,{_n:function(){return a},fv:function(){return o}});var i=n(77195),r=n(26854);const o=()=>{const t=(0,r.qx)((t,e)=>[t,e]);return Object.fromEntries(t)},s=({region:t,position:e})=>{const n=[[i.X4.PlacementRegion,t],[i.X4.PlacementPosition,e]].filter(([t,e])=>e);return Object.fromEntries(n.map(([t,e])=>[i.u5.current[t],e]))},a=t=>{const{region:e,position:n}=t;return s({region:e,position:n})}},43375:function(t,e,n){n.d(e,{U:function(){return s},j:function(){return o}});var i=n(28828),r=n(98216);function o(t){let e;return null!=t&&(e=(0,i.B)(t),null!=e)?e:null}function s(t,e){if(!e.length)return;const n=e.filter(t=>"Viewed"===t.type),i=n.length>0?n[n.length-1].ts:0,o="layoutDemotion"===t?"Demotion":t;r.YT.addOrUpdateTmplProperty(`last${o}View`,i+"")}},43434:function(t,e,n){n.d(e,{$Z:function(){return w},A7:function(){return b},CH:function(){return k},DG:function(){return N},H1:function(){return E},Hg:function(){return D},IR:function(){return P},U9:function(){return F},UU:function(){return O},Vf:function(){return A},WP:function(){return v},cv:function(){return y},eP:function(){return S},j_:function(){return m},kc:function(){return T},nT:function(){return $},pg:function(){return M},qU:function(){return x},rS:function(){return R},wl:function(){return I},y7:function(){return _},yx:function(){return C}});var i=n(77246),r=n(17720),o=n(48309),s=n(7965),a=n(88294),c=n(98216),u=n(65022),d=n(89980),l=n(41820),h=n(98793),f=n(48172),p=n(55457);const g="__cachedConfigDataKey__";function m(){const t=r.vv.get(g);return t?Promise.resolve(t):new Promise(t=>{const e=(0,i.S)()&&window.chrome&&window.chrome.ntpSettingsPrivate;e&&e.getConfigData?e.getConfigData(e=>{if(void 0!==e){const n={enabledFeatures:e[o.qs.enabledFeatures],isAdblockerEnabled:e[o.qs.isAdblockerEnabled],IsDefaultSearchProviderLocked:e[o.qs.IsDefaultSearchProviderLocked],isEducationEnvironment:e[o.qs.isEducationEnvironment],isInYandexRegions:e[o.qs.isInYandexRegions],isNewTabGreetingEnabled:e[o.qs.isNewTabGreetingEnabled],inPageSearchBoxType:e[o.qs.inPageSearchBoxType],profileCreationTime:e[o.qs.profileCreationTime],showFeedSwitcher:e[o.qs.showFeedSwitcher],isChromePrimaryBrowserAtFre:e[o.qs.isChromePrimaryBrowserAtFre],isEnrolledInProjectEqual:e[o.qs.isEnrolledInProjectEqual],isEdgeSignInAllowed:e[o.qs.isEdgeSignInAllowed],isShowMicrosoftRewardsEnabled:e[o.qs.isShowMicrosoftRewardsEnabled],maxQuickLinks:e[o.qs.maxQuickLinks],channel:e[o.qs.channel],apiVersion:e[o.qs.apiVersion]};r.vv.set(g,n),t(n)}else a.v.logError("Failed to get config data from Chromium API."),t({})}):t({})})}function w(){return new Promise(t=>{const e=(0,i.S)()&&window.chrome&&window.chrome.ntpSettingsPrivate;e&&"function"==typeof e.getUserTopic?e.getUserTopic(e=>{t(e)}):t({})})}async function y(t,e,n=void 0){try{if(await T()&&e){const t=await h.Q.getPreferenceSetting(e);if(t&&void 0!==t.value)return JSON.parse(t.value.toString())}if(t){const e=(0,d.Lg)().getObject(t,void 0);if(void 0!==e)return JSON.parse(e)}return n}catch(t){return a.v.logError("Failed to parse the key."),!1}}async function v(){const t=await(e=s.JW.layout,new Promise(t=>{const n=window.chrome;if(n){const i=n.ntpSettingsPrivate;if(i&&"function"==typeof i.getPref)return void i.getPref(e,n=>{t(n&&n.key===e?n.value:null)})}t(null)}));var e;return null===t||isNaN(t)?null:s.E3[t]}function b(t){let e=[],n=[];const{layoutRecommended:i,tmpl:r,isControl:s,fromLayouts:a,fromFeeds:c,reTargetRecommendedLayout:u,selectedFeedDisplaySetting:d,source:l,coachmark:h,knobIdx:f,knobIdxPrefix:p,clientReceivedTimestamp:g,usermuidWhenReceived:m,requestIdWhenReceived:w,isPrerenderWhenReceived:y}=t;a&&(e=a.split(",")),c&&(n=c.split(","));return{recommendedLayout:i,tmpl:r,control:s,fromLayoutsArray:e.length>0?e:["inspirational"],fromFeedsArray:n.length>0?n:[],reTargetRecommendedLayout:u,selectedFeedDisplaySetting:d,source:l,coachmark:h,knobIdx:f,knobIdxPrefix:p,clientReceivedTimestamp:g,usermuidWhenReceived:m,requestIdWhenReceived:w,lypType:t.coachMarkId===o.EM?"demotion":"promotion",isPrerenderWhenReceived:y}}function S(t,e){const n={message:t,type:"information",pb:{...(0,u.Ukt)(),customMessage:e}};c.YT.sendClientLogEvent(n)}function C(t,e,n){c.YT.sendAppErrorEvent({...t,message:e,pb:{...t.pb,customMessage:n}})}function k(t,e,n,i,r,o){c.YT.sendAppErrorEvent({...t,message:e,pb:{...t.pb,customMessage:n,customBackgroundImageInfo:JSON.stringify(i),ntpTheme:JSON.stringify(r),currentLayout:o}})}async function T(){return await h.Q.isApiAvailableToUse()}function x(t,e){const n={setting:t,source:"ntp",timestamp:(new Date).getTime(),value:e};h.Q.savePreferenceSetting(t,n)}function A(t,e){if("off"===t||!e||!e.provider)return!1;const n=e.provider,i=p.vS.get(t);return!(i&&i.some(t=>t===n))}function $(t){if(!t||!t.ntpTheme)return!1;const e=t.ntpTheme.usingDefaultTheme,n=t.ntpTheme.backgroundColorRgba?.length>3,i=!!t.ntpTheme.imageUrl;return!e&&!i&&n}function I(t){if(!t||!t.ntpTheme)return!1;const e=t.ntpTheme.usingDefaultTheme,n=!!t.ntpTheme.imageUrl;return!e&&n}function P(t){if(!t||!t.length)return;const e=t.find(t=>t&&"background_setting_preferences"===t.key);return e&&e.value?e.value:void 0}function R(t){return p.NZ.get(t.provider)}function M(){const t=(0,d.Lg)().getObject("bkgdV");if(!t)return-1;const e=(new Date).getDay();return t&&t.schedule&&-1!==t.schedule[e]?t.schedule[e]:-1}function _(t){return t?M():-1}async function E(t,e){if(!t)return!1;if(!await f.f.isApiAvailableToUse())return!1;const n=e>=0?"Video":"Iris",i={...t,backgroundSelectionMetadata:{provider:n,configIndex:e,appliedTimestamp:Date.now()}};return f.f.savePreferenceSetting("background_setting_preferences",i)}async function F(t){if(!t)return;if(!await f.f.isApiAvailableToUse())return;const e=t.find(t=>t.key===l.bJ.widgetsUpsell)?.value;return e?f.f.savePreferenceSetting(l.bJ.widgetsUpsell,{},!0):void 0}function D(t){if(!t)return;const e=t.find(t=>t.key===l.bJ.widgetsUpsell)?.value,n=e?.seen||0;c.YT.addOrUpdateTmplProperty("wdgUpslFreqCapVal",n.toString())}function O(t,e){let n=1;switch(t.selectedFeedDisplaySetting){case"always":n|=8;break;case"headingsonly":n|=512;break;case"onscroll":n|=64;break;case"peek":n|=2048;break;default:n|=0}return t.imageOfTheDayEnabled&&(n|=32),t.greetingEnabled&&e&&(n|=256),"off"!==t.selectedQuickLinksDisplaySetting&&(n|=2),"custom"===t.currentLayout&&(n|=128),n}async function N(t){const e=await f.f.getPreferenceSetting("nurturing_campaigns",!1);if(!e?.value?.placementsInteractions)return 0;const n=e.value.placementsInteractions;if(n&&n[t]&&n[t].length>0){const e=n[t].filter(t=>"Viewed"===t.type);return e.length>0?e[e.length-1].ts:0}return 0}},43666:function(t,e,n){n.d(e,{J:function(){return r}});var i=n(7965);function r(t,e,n,r){if(!n||r)return"custom";const o=i.c_.focused,s=i.c_.informational,a=i.c_.inspirational;return t===o.feeds_position&&e===o.current_background_image_type?"focused":t===s.feeds_position&&e===s.current_background_image_type?"informational":t===a.feeds_position&&e===a.current_background_image_type?"inspirational":"custom"}},43889:function(t,e,n){n.d(e,{W9:function(){return a},sZ:function(){return s}});var i=n(19575),r=n(77246);class o extends i.g{constructor(){let t=null;if((0,r.S)())try{t="sessionStorage"in window&&window.sessionStorage}catch(t){}super(t)}}let s=new o;function a(){return s}},44369:function(t,e,n){n.d(e,{F:function(){return s},l:function(){return o}});class i{constructor(){this._signInState=0,this.initOverrides=()=>{}}getSignInState(){return this._signInState}setSignInState(t){this._signInState=t}useEnterpriseCompliance(){return!1}}i._instance=new i;let r=i._instance;function o(t){if(r!==i._instance||!t)return r;t()}function s(t){r=t}},44383:function(t,e,n){n.d(e,{Oq:function(){return qt},fb:function(){return jt},km:function(){return Ht}});var i=n(93468),r=n(65022),o=n(30817),s=n(36417),a=n(68399),c=n(98216),u=n(14586),d=n(97852),l=n(96048),h=n(14383),f=n(3304),p=n(24695),g=n(12870),m=n(97643),w=n(93532),y=n(82238),v=n(96851);const b=[];function S(){const t=g.Rb&&g.Rb.Diagnostics||{};return t&&(0,m.RC)(JSON.stringify(t))}function C(){const t=C;return new Promise(e=>{void 0!==t.cache&&e(t.cache);const n=i=>{i>3&&(t.cache=null,e(null));const r=document.getElementById("ntp-diagnostics");r&&r.innerText?(t.cache=r,e(r)):(i++,setTimeout(()=>n(++i),3e3))};n(0)})}async function k(t,e,n,o){try{(t||e)&&b.push({id:t,debug:e}),await Promise.all([(0,y.Qc)(),(0,v.GP)()]);const i=await C();if(i&&i.innerText){const t=JSON.parse(i.innerText);Object.assign(t,{traceInfo:b}),Object.assign(t,{prgDiagnostics:S()}),Object.assign(t,{authTrail:n}),Object.assign(t,{countryConfidenceFactor:(0,w.m)()}),o&&Object.assign(t,{ocvSource:o}),i.innerText=JSON.stringify(t)}}catch(t){(0,i.c_)(t,r.YTQ,"Error throwed during update idxid into diagnostic element")}}var T=n(41820),x=n(1732),A=n(77246),$=n(17720),I=n(27261),P=n(69189),R=n(19993),M=n(57759),_=n(17128),E=n(69816),F=n(40160),D=n(64065),O=n(49545),N=n(6092),L=n(74195),B=n(19548),U=n(96592),W=n(67387),V=n(76166),H=n(89980),z=n(83003),j=n(32395);const q=Symbol("__debugIdList__"),G=Symbol("__renderedCardIds__"),J=t=>{const{jsonResponse:e,heroSection:n,segment:o}=t,s=e.sections.find(t=>"cardData_hero"===t.region),a=s?.cards?.length??0;if(!a)return void(0,i.vV)(r.yK8,`Missing Card Data Hero Region - ${o}`,void 0,{...r.yK8.pb,segment:o,customMessage:`debugId: ${e.debugId}`});const c=tt[o].cardCounts.includes(a);let u=!0,d=!1;const l=X.get(o);if(s?.cards?.forEach(t=>{l.has(t.type)||(Y.includes(t.type)?d=!0:u=!1)}),d&&(0,i.vV)(r.qQs,`Hero card backfilled - ${o}`,void 0,{...r.qQs.pb,segment:o,receivedCardCount:a,cardsInResponse:JSON.stringify((s?.cards||[]).map(t=>t.type)),customMessage:`debugId: ${e.debugId}`,isCorrectCardCount:c,isValidCardTypes:u}),!c||!u)return void(0,i.vV)(r.yK8,`Invalid Card Data Hero Region - ${o}`,void 0,{...r.yK8.pb,segment:o,receivedCardCount:a,cardsInResponse:JSON.stringify((s?.cards||[]).map(t=>t.type)),customMessage:`debugId: ${e.debugId}`,isCorrectCardCount:c,isValidCardTypes:u,hasBackfilled:d});const h=(n?.subSections||[]).find(t=>5===t?.requestedColumnCount)?.subSections||[],f=h.filter(t=>"placeholder"!==t?.cards?.[0]?.type),p=f.length===a;let g=!0;const m=s?.cards?.map(t=>t.id);f.forEach(t=>{m.includes(t?.cards?.[0]?.id)||(g=!1)}),p&&g||(0,i.vV)(r.yK8,`Invalid Hero Waterfall Region - ${o}`,void 0,{...r.yK8.pb,segment:o,cardsInResponse:JSON.stringify(h.map(t=>`${t?.cards?.[0]?.id}|${t?.cards?.[0]?.type}`)),customMessage:`debugId: ${e.debugId}`,isCorrectCardCount:p,isValidCardIds:g})},Q=t=>{switch(t){case"weather":return r.wDb;case"sports":return r.rQn;case"finance":return r.UsN;case"traffic":return r.tnj;case"cegrowth":return r.WlW;default:return r.tDC}};var K;!function(t){t.weather="weather",t.traffic="traffic",t.finance="finance",t.sports="sports",t.cegrowth="cegrowth",t.videos="videos"}(K||(K={}));const X=new Map([["weather",new Set([z.pL.WeatherHero,z.pL.WeatherCurrent,z.pL.WeatherForecast,z.pL.WeatherMap])],["traffic",new Set([z.pL.TrafficIncidents,z.pL.TrafficCamerasWithSummary,z.pL.TrafficMap,z.pL.TrafficNews,z.pL.TravelTimes,z.pL.TravelTimesWithSummary,z.pL.TrafficCameras,z.pL.TrafficTransit,z.pL.TrafficSummary,z.pL.TopicFeed])],["cegrowth",new Set([z.pL.DailyMomentsCard1,z.pL.MiTHeroAction,z.pL.MiTHeroContent,z.pL.DailyMomentsCard2,z.pL.DailyMomentsCard3,z.pL.MiTHeroFollow,z.pL.MiTHeroSpotlight])],["sports",new Set([z.pL.SportsHeroFre,z.pL.SportsHeroLeagueTodaysEvents,z.pL.SportsHeroMatch1SeasonStats,z.pL.SportsHeroMatch1Stats,z.pL.SportsHeroMatch2SeasonStats,z.pL.SportsHeroMatch2Stats,z.pL.SportsHeroMatch3SeasonStats,z.pL.SportsHeroMatch3Stats,z.pL.SportsHeroMatchStatistics,z.pL.SportsHeroMatchCard,z.pL.SportsHeroNews,z.pL.SportsHeroOneVsManyEventResult,z.pL.SportsHeroOneVsOneEventResult,z.pL.SportsHeroSeasonStatistics,z.pL.SportsHeroStandingsRankings,z.pL.SportsHeroTeamStandings,z.pL.SportsHeroTeamStandingWithEvents,z.pL.SportsHeroTeamStandingWithMedals,z.pL.SportsHeroTeamVsTeam,z.pL.SportsHeroTeamVsTeamEventResult,z.pL.SportsHeroVideo,z.pL.SportsSpotlight2Match1,z.pL.SportsSpotlight2Match2])],["finance",new Set([z.pL.FinanceHeroMarket,z.pL.FinanceHeroMovers,z.pL.FinanceHeroSuggested,z.pL.FinanceHeroCrypto,z.pL.FinanceHeroCurrencies,z.pL.FinanceHeroUpcomingEarnings,z.pL.FinanceHeroNews,z.pL.FinanceHeroWatchlistIdeas,z.pL.FinanceHerowlsummary,z.pL.FinanceHeroMarketChart])],["videos",new Set([z.pL.DailyWonderQuoteCard,z.pL.DailyWonderHeroVideo,z.pL.DailyWonderVideoListCard,z.pL.DailyWonderCopilotCard])]]),Y=[z.pL.Article,z.pL.Video,z.pL.Slideshow],Z=new Map([["hero-section-one-row-1211",{cardCount:4,supportedSegments:["traffic","sports","finance"]}],["hero-section-one-row-11111",{cardCount:5,supportedSegments:["traffic","sports","finance"]}],["hero-section-one-row-122",{cardCount:3,supportedSegments:["weather","videos"]}],["hero-section-one-row-2111-b",{cardCount:4,supportedSegments:["cegrowth","videos"]}],["msft-full-wide-one-card-five-col",{cardCount:1,supportedSegments:["weather"]}]]),tt={weather:{cardCounts:[3,1]},traffic:{cardCounts:[4,5]},sports:{cardCounts:[4,5]},finance:{cardCounts:[4,5]},cegrowth:{cardCounts:[]},videos:{cardCounts:[]}},et=(t,e)=>{const n=t?.sections?.find(t=>"widgets"===t.region);if(!n||!n.subSections?.length)return e&&c.YT.addOrUpdateTmplProperty("widgetsCards",""),void((0,A.S)()?window.dispatchEvent(new CustomEvent("noWidgetsData",{detail:!0})):window.noWidgetsData=!0);window.noWidgetsData&&(window.noWidgetsData=!1)};const nt=(t,e,n)=>{const o=$.vv.get(q,()=>[]),s=$.vv.get(G,()=>new Map);if(0!==n&&2!==n||(o.length=0,s.clear()),!t||!t.length)return;const a=[],u=[];o.push(e),t?.forEach(t=>{"river"===t?.region&&t?.sections?.forEach(t=>{const e=function(t){const e={};if(!Array.isArray(t))return e;for(const n of t)if(Array.isArray(n))for(const t of n)if(t?.cards&&Array.isArray(t.cards))for(const n of t.cards)n?.wpoId&&(e[n.wpoId]=!0);return e}(t?.columnLayoutList);t?.cards?.forEach(t=>{if(t?.wpoId&&e[t.wpoId]){const{id:e,type:n}=t;e&&s.has(e)?(a.push(e),u.push(n)):s.set(e,n)}})})}),a.length&&(c.YT.addOrUpdateTmplProperty("dupecards",String(a.length)),(0,i.vV)(r.PWH,"Duplicate cards found in feed response",void 0,{cardIdList:a,cardTypeList:u,debugIdList:o}))};function it(t,e,i,r,o,s){const a=!t;!(r||(0,N.Lo)())||e||i||a||"undefined"!=typeof window&&"requestIdleCallback"in window&&setTimeout(()=>{window.requestIdleCallback(()=>function(t,e,i){(async()=>{const{tryCreateRubyFeedApiResponse:r}=await n.e("libs_feed-api-contracts_dist_index_js").then(n.bind(n,43342));r(t,e,i)})()}(t,o,s))},3e3)}var rt=JSON.parse('{"nextPageUrl":"","sections":[{"region":"river","subSections":[{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"filteredChannels","isLocalContent":false,"galleryItemCount":0,"subCards":[],"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false,"isShowSelectMoreMessage":false}]},{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"InterestManager","isLocalContent":false,"galleryItemCount":0,"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false}]}]}],"isPartial":false}'),ot=n(79426),st=n(41625),at=n(3772),ct=n(98288),ut=n(20392);const dt=new Set([z.pL.Article,z.pL.Slideshow,z.pL.Video]);function lt(t,e=!1){if(t.subCards)for(const n of t.subCards)lt(n,e);if(!e&&!dt.has(t.type)||!t.url)return t;let n;try{n=new URL(t.url)}catch(e){return(0,i.c_)(e,r.tRb,"Invalid Consumption Card Url",void 0,{url:t.url}),t}return n.searchParams.has(d.cs)||"www.msn.com"!==n.hostname&&"www.msn.cn"!==n.hostname||(n.searchParams.append(d.cs,"ruby"),t.url=n.toString()),t}var ht=n(11367),ft=n(88034),pt=n(63150);const gt="https://account.microsoft.com/privacy/ad-settings";function mt(t){return"river"===t?"cardData":`cardData_${t}`}class wt{constructor(t){this.adRiverRegion=N.T3.IsHeroNTP?"riverlock":"river",this.adInfopaneRegion=N.T3.IsHeroNTP?"infopanelock":"infopane",this.infoPaneCardCount=0,this.riverCardCount=0,this.heroCardCount=0,this.rightrailCardCount=0,this.railCardCount=0,this.denseRiverCardCount=0,this.widgetsCardCount=0,this.riverNativeAdRelativeCount=0,this.riverCmsAdRelativeCount=0,this.riverIntraNativeAdRelativeCount=0,this.infopaneCmsAdCount=0,this.sectionIndex=0,this.wpoIdResponseIndex=0,this.shoppingInfopaneAdV1=!1,this.isRubySelected=!1,this.userIsEligibleForRuby=!1,this.isFirstAdLogged=!1,this.mapRegionBasedWpoResponseForSuperFeed=(t,e,n,o,s,a,c,u,d,l,h)=>{if(!t||!t.sections||!t.sections.length)return{rawAdRegionTupleMap:yt()};this.rawAdRegionTupleMap=yt();const f={rawAdRegionTupleMap:this.rawAdRegionTupleMap},p=t.serviceContext?t.serviceContext.debugId:t.debugId,g=vt(t),{nextPageUrl:m,sections:w,pageContext:y,previews:v}=g;let b,S,C=this.riverCardCount;const k=[];let T=!1;const x=w.findIndex(t=>"cardData"===t.region),A=w.findIndex(t=>"widgets"===t.region),$=w.findIndex(t=>"subLayouts"===t.region);let I=w;if(x>-1){b=w[x].cards,u&&(this.wpoIdResponseIndex=0),C=100*this.wpoIdResponseIndex;const e=w.find(t=>"river"===t.region).subSections,n=bt(e,C);if(S=n.subSections,T=n.rowRendering,$>-1){const e=t?.sections?.[$].subSections;for(const t of e)t.wpoContainerId+=C,k.push({subSections:bt(t.subSections,C).subSections,wpoContainerId:t.wpoContainerId})}this.wpoIdResponseIndex++,c?.get("river")&&(this.riverNativeAdRelativeCount=c.get("river")),c?.get("resriver")&&(this.riverCmsAdRelativeCount=c.get("resriver")),c?.get("intranative")&&(this.riverIntraNativeAdRelativeCount=c.get("intranative"))}(x>-1||A>-1)&&(I=w.filter(t=>["cardData","subLayouts"].indexOf(t.region)<0));const P=I.findIndex(t=>"hero"===t.region),R=I.findIndex(t=>"widgets"===t.region);var M;return P>-1&&a&&(M=I[P],M?.subSections?.[0]?.dataTemplate||M?.subSections?.[0]?.layoutTemplate)&&I.splice(P,1),f.nextPageUrl=m,f.pageContext=y,f.previews=v,f.regions=I.map(c=>{const{subSections:u,region:f,requestedColumnCount:g}=c,y=void 0,v=void 0;let A;if(x>-1&&("river"===f||"hero"===f&&a)){if("river"===f){A=[{dataTemplate:y,layoutTemplate:v,cards:b.map(t=>this.convertCardForSuperFeed({...t,placement:void 0},f,p,void 0,e,n,o,s,C,d,l,h)),column:g,columnLayoutList:S,containerLayoutList:k}]}else if("hero"===f){const a=w.find(t=>t.region===mt("hero"))?.cards||[];if(a.length){const i=this.heroCardCount;A=[{dataTemplate:y,layoutTemplate:v,cards:a.map(t=>this.convertCardForSuperFeed({...t,placement:void 0},f,p,void 0,e,n,o,s,i)),column:g,columnLayoutList:bt(t?.sections?.[P].subSections,i).subSections}]}else(0,i.vV)(r.yK8,"Empty hero card data list",void 0,{...r.yK8.pb,customMessage:`debugId: ${p}, nextPageUrl: ${m}`}),A=[]}}else if("widgets"===f){const a=w.find(t=>t.region===mt("widgets"))?.cards||[];if(a.length){const i=this.widgetsCardCount;A=[{dataTemplate:y,layoutTemplate:v,cards:a.map(t=>this.convertCardForSuperFeed({...t,placement:void 0},f,p,void 0,e,n,o,s,i)),column:g,columnLayoutList:bt(t?.sections?.[R].subSections,i).subSections}]}else(0,i.vV)(r.DYU,"Empty widgets card data list",void 0,{...r.DYU.pb,customMessage:`debugId: ${p}, nextPageUrl: ${m}`}),A=[]}else A="notification"===f?u:u?.map(({dataTemplate:t,layoutTemplate:a,cards:c,column:u,isTopSection:g})=>{if(c){const i={dataTemplate:t,layoutTemplate:a,cards:c.map(t=>this.convertCardForSuperFeed({...t,placement:void 0},f,p,void 0,e,n,o,s,C,d,l,h)),column:u,isTopSection:g};return this.sectionIndex++,i}"river"===f&&(0,i.vV)(r.qSe,"No cards were sent from WPO in river",void 0,{...r.qSe.pb,customMessage:`debugId: ${p}, nextPageUrl: ${m}, column: ${u}, dataTemplate: ${t}, layoutTemplate: ${a}`})}).filter(t=>void 0!==t);return{region:f,requestedColumnCount:g,rowRendering:T,sections:A}}),f.raw1sAdRegionTupleMap=this._raw1sAdRegionTupleMap,f.debugId=p,f},this.mapRegionBasedWpoResponseForWidgets=(t,e)=>{const n=t.serviceContext?t.serviceContext.debugId:t.debugId,i=vt(t),{nextPageUrl:r,sections:o,pageContext:s,previews:a}=i;return{nextPageUrl:r,pageContext:s,regions:o.filter(t=>t.region===e).map(t=>{const{subSections:e,region:i,requestedColumnCount:r}=t,o=e?.map(({dataTemplate:t,layoutTemplate:e,cards:r,column:o,isTopSection:s})=>{if(r){const a={dataTemplate:t,layoutTemplate:e,cards:r.map(t=>this.convertCardForSuperFeed({...t,placement:void 0},i,n)),column:o,isTopSection:s};return this.sectionIndex++,a}}).filter(t=>void 0!==t);return{region:i,requestedColumnCount:r,rowRendering:false,sections:o}}),previews:a,debugId:n}},this.backfill1SAdWithNews=t=>{if(!t.sections?.length)return;const e=t.sections.find(t=>"backup"===t.region)?.subSections?.[0]?.cards,n=t.sections.find(t=>"river"===t.region)?.subSections?.[0]?.cards;n?.forEach((t,o)=>{(t.type===z.pL.NativeAd&&B._3.getQueryParameterByName("mockNo1SNative",window.location.href)||t.type===z.pL.CmsAd&&B._3.getQueryParameterByName("mockNo1SCms",window.location.href))&&(t.data=null),t.type!==z.pL.NativeAd&&t.type!==z.pL.CmsAd||t.data||((0,i.c_)(null,r.MtZ,`Ad for ${t.type} not found in feed response.`,`cardData: ${JSON.stringify(t)}`),e?.length?n[o]=e.shift():(0,i.c_)(null,r.q9J,"Empty backup region"))})},this.shoppingInfopaneAdV1=t}setRubyEverSelected(t){this.isRubySelected=t}get raw1sAdRegionTupleMap(){return this._raw1sAdRegionTupleMap||(this._raw1sAdRegionTupleMap=yt()),this._raw1sAdRegionTupleMap}convertCardForSuperFeed(t,e,n,o,s,a=0,c=0,u,d=0,l,h,f){let p;if((ht.gR.isRuby||this.checkIfUserIsEligibleForRuby())&&lt(t,ht.gR.isRuby),"river"===e?(this.riverCardCount++,p=this.riverCardCount):"rightrail"===e?(this.rightrailCardCount++,p=this.rightrailCardCount):"Rail"===e?(this.railCardCount++,p=this.railCardCount):"hero"===e?(this.heroCardCount++,p=this.heroCardCount):"widgets"===e&&this.widgetsCardCount++,(ht.gR.isRuby||(0,pt.oh)())&&function(t){(t.type===z.pL.Article||t.type===z.pL.Video||t.type===z.pL.Slideshow)&&t.newsNotificationType&&[at.O.News_BreakingNews,at.O.News_ForYouNews].includes(t.newsNotificationType)&&(t.type=t.newsNotificationType===at.O.News_BreakingNews?z.pL.BreakingNewsNotification:z.pL.ForYouNotification)}(t),void 0!==t.wpoRank&&(t.wpoRank+=d),void 0!==t.wpoId&&(t.wpoId+=d),void 0!==t.backupRelatedWpoId&&(t.backupRelatedWpoId+=d),t.type===z.pL.MiTHeroFollow&&0===t.subCards?.length&&(t=>{try{const e=JSON.parse(t.data);if(!e||!e.followList||!e.followList.length)return void(0,i.vV)(r.Sjf,"MiT Hero Parse Error");e.followList.forEach(e=>{t.subCards.push({id:e.topicId,images:[{title:e.title,url:e.imageUrl}],title:e.title,url:e.clickThroughUrl,type:z.pL.SuggestedInterest,provider:"provider"===e.type&&{profileId:e.topicId},isFollowed:e.isFollowed})})}catch(t){(0,i.vV)(r.Sjf,"MiT Hero Parse Error",JSON.stringify(t.errorMessage))}})(t),Object.values(z.pL).includes(t.type)||Object.values(z.Qf).some(e=>t.type?.startsWith(e))||(0,i.c_)(null,r.SdJ,`Region: ${e}, Type: ${t.type}, Id: ${t.id}, WpoId: ${t.wpoId}, WpoRank: ${t.wpoRank}. undefined error, it is not in OneServiceMetadataType`),t.wpoMetadata&&t.wpoMetadata.isGA&&(t.wpoMetadata.cFMetadataType=t.type),t.subCards){let e=st.sm.NotDenseCard;if(t.type===z.pL.Dense&&o===z.pL.Infopane?e=st.sm.IsInfopaneDenseCard:t.type===z.pL.Dense&&o!==z.pL.Infopane&&(e=st.sm.IsRiverDenseCard),t.type===z.pL.Infopane||t.type===z.pL.GroupedContent||t.type===z.pL.ColdStartArticleFreCard||t.type===z.pL.RewardsDailySet||t.type===z.pL.TabbedInfopaneCard||t.type===z.pL.CasualGamesCarousel&&t.subCards.length>0||t.type===z.pL.MiniWidgets&&t.subCards.length>0||t.type===z.pL.TopicFeed&&t.subCards.length>0&&t.id===st.G6||xt(t)||e!==st.sm.NotDenseCard)return this.convertComplexCardForSuperFeed(t,e,n,s,c);if(t.type===z.pL.WatchVideoHeavy)return this.convertVideoHeavyCardForSuperFeed(t);if(t.type===z.pL.NewsAnswerModule)return this.convertNewsGroupsCard(t)}if(st.es?.current?.includes(t.type))return t;if(z.N5.includes(t.type)){let n=p;if("river"===e){let e;l&&(h?.size&&(e=h?.get(this.wpoIdResponseIndex-1)),f?.size&&(e=f?.get(t.type)?.get(this.wpoIdResponseIndex-1))),t.type===z.pL.NativeAd?(this.riverNativeAdRelativeCount++,void 0!==t.wpoAdRank&&(l?l&&this.wpoIdResponseIndex>1&&e&&(t.wpoAdRank=t.wpoAdRank+e):t.wpoAdRank=this.riverNativeAdRelativeCount)):t.type===z.pL.CmsAd?this.riverCmsAdRelativeCount>=a?(t.type=z.pL.NativeAd,this.riverNativeAdRelativeCount++,void 0!==t.wpoAdRank&&(t.wpoAdRank=this.riverNativeAdRelativeCount)):(this.riverCmsAdRelativeCount++,void 0!==t.wpoAdRank&&(t.wpoAdRank=this.riverCmsAdRelativeCount)):t.type===z.pL.IntraNativeAd&&(this.riverIntraNativeAdRelativeCount++,void 0!==t.wpoAdRank&&(l?l&&this.wpoIdResponseIndex>1&&e&&(t.wpoAdRank=t.wpoAdRank+e):t.wpoAdRank=this.riverIntraNativeAdRelativeCount)),s&&(t.type===z.pL.FirstPartyAd?n=1:l?l&&(n=t.wpoAdRank):(n=t.type===z.pL.NativeAd?this.riverNativeAdRelativeCount:this.riverCmsAdRelativeCount,t.type===z.pL.IntraNativeAd&&(n=t.wpoAdRank)))}return this.convertCardForAds(t,e,n)}try{const{augments:e,type:i,isBreaking:r,locale:o,cardSize:s,category:a,images:c,topics:u=[],dataUrl:d,publishedDateTime:l,id:h,url:f,abstract:p="",title:g="",provider:m={},reasons:w,source:y,feed:v={},actions:b=[],externalVideoFiles:S=[],reactionStatus:C,commentStatus:k,reactionSummary:T,commentSummary:x,sourceId:A,topComments:$,topQuestions:I,highlights:P,colorSamples:R,isLocalContent:M,badges:_,relatedCards:E,recoDocMetadata:F,recoId:D,ri:O,offer:N,subType:L,videoMetadata:B,isWorkNewsContent:U,wpoMetadata:W,panoCaption:V,aiComments:H,height:j,wpoRank:q,wpoId:G,recoReasonTag:J,slides:Q,customTransitionSpeed:K,cardId:X,displayAttributes:Y,conversationStarters:Z,consumptionSummary:tt,backupRelatedWpoId:et,template:nt,teraTopics:it,keyTakeawaysLatest:rt,CmsBrandId:ot,dedupeIds:at}=t,ct=kt(c)||{},ut=u.find(t=>t.feedId===v.id&&t.locale===o),dt=i===z.pL.EventInfopaneShoppingAI?Ct(f,/[/?]/):Ct(f);let lt=St(m.logoUrl);!lt&&m.logo&&m.logo.url&&(lt=St(m.logo.url));const ht=b.map(t=>st.p?.current?.[t]||t);return _&&_.some(t=>"followedPublisher"===t.type)&&ht.push("followedPublisher"),{augments:e,id:h,type:i,height:j,wpoRank:q,wpoId:G,cardId:X,backupRelatedWpoId:et,template:nt,metadata:{abstract:p,abstractLength:p.length,titleLength:g.length,category:a||dt[4],subCategory:dt[5],primaryImage:{height:ct.height,width:ct.width},locale:o,feed:{id:v.id},kicker:[v],actions:ht,reactionStatus:C,commentStatus:k,reactionSummary:T,commentSummary:x,topComments:$,topQuestions:I,highlights:P,reasons:w,source:y,relatedCards:E,panoCaption:V,topics:u,recoDocMetadata:F,recoId:D,ri:O,debugId:n,videoFiles:S,videoMetadata:B,wpoMetadata:W,recoReasonTag:J,slides:Q,displayAttributes:Y,conversationStarters:Z,consumptionSummary:tt,teraTopics:it,keyTakeawaysLatest:rt,dedupeIds:at},cardContent:{id:h,type:Tt(i),title:g,aiComments:H,uriTitle:dt[6],abstract:p,isBreaking:r||0,tags:[ut||{}],provider:{id:m.id,name:m.name,logo:{id:lt},profileId:m.profileId,logoUrl:m.logoUrl,subscribable:!1,lightThemeSVGLogo:m.lightThemeSVGLogo,darkThemeSVGLogo:m.darkThemeSVGLogo},category:{product:a,label:void 0},locale:o,images:[{id:St(ct.url),height:ct.height,width:ct.width,caption:ct.title,focalRegion:ct.focalRegion,attribution:ct.attribution,url:ct.url,colorSamples:ct.colorSamples}],panoCaption:V,videoFiles:S,publishedDateTime:l,kicker:g,sourceHref:d,destinationUrl:f,sourceId:A,colorSamples:R,isLocalContent:M,isWorkNewsContent:U,badges:_,topics:u,customTransitionSpeed:K,CmsBrandId:ot},dynamicCardSize:s}}catch(e){return t}}convertCardForAds(t,e,n){if(t.type===z.pL.NativeAd){if("river"===e){if(void 0!==t.wpoAdRank&&t.wpoAdRank<=2){const e=t.data?"1sAds":"not1sAds";c.YT.addOrUpdateTmplProperty(`${e}-${t.wpoAdRank}`,"1")}else this.isFirstAdLogged||(c.YT.addOrUpdateTmplProperty("adIdx",`wpoAdRank:${t.wpoAdRank}-cardCount:${n}`),this.isFirstAdLogged=!0);t.data?this.raw1sAdRegionTupleMap.get(this.adRiverRegion).push(t.wpoAdRank||n):this.rawAdRegionTupleMap.get(this.adRiverRegion).push(t.wpoAdRank||n)}else"rightrail"===e?this.rawAdRegionTupleMap.get("rightrail").push(n):"Rail"===e&&this.rawAdRegionTupleMap.get("Rail").push(n);return t.data?{type:z.pL.NativeAd,regionIndex:t.wpoAdRank||n,data:t.data,id:t.id,height:t.height,wpoRank:t.wpoRank,wpoAdRank:t.wpoAdRank,wpoId:t.wpoId}:{type:z.pL.NativeAd,regionIndex:t.wpoAdRank||n,placement:{items:[]},height:t.height,wpoRank:t.wpoRank,wpoAdRank:t.wpoAdRank,wpoId:t.wpoId}}if(t.type===z.pL.CmsAd){if("river"===e){let e=this.adRiverRegion;"peekriver"===this.adRiverRegion&&(e="river"),t.data?this.raw1sAdRegionTupleMap.get(`res${e}`).push(t.wpoAdRank||n):this.rawAdRegionTupleMap.get(`res${e}`).push(t.wpoAdRank||n)}return t.data?{type:z.pL.CmsAd,regionIndex:t.wpoAdRank||n,data:t.data,id:t.id,height:t.height,wpoRank:t.wpoRank,wpoAdRank:t.wpoAdRank,wpoId:t.wpoId}:{type:z.pL.CmsAd,regionIndex:t.wpoAdRank||n,placement:{items:[]},height:t.height,wpoRank:t.wpoRank,wpoAdRank:t.wpoAdRank,wpoId:t.wpoId}}if(t.type===z.pL.IntraNativeAd){if("river"===e){const e="intranative";this.rawAdRegionTupleMap.get(`${e}`).push(t.wpoAdRank||n)}return{type:z.pL.IntraNativeAd,regionIndex:t.wpoAdRank||n,placement:{items:[]},height:t.height,wpoRank:t.wpoRank,wpoAdRank:t.wpoAdRank,wpoId:t.wpoId}}return t.type===z.pL.FirstPartyAd?("river"===e&&(t.data?this.raw1sAdRegionTupleMap.get("triver").push(t.wpoAdRank||n):this.rawAdRegionTupleMap.get("triver").push(t.wpoAdRank||n)),t.data?{type:z.pL.FirstPartyAd,regionIndex:t.wpoAdRank||n,data:t.data,id:t.id,height:t.height,wpoRank:t.wpoRank,wpoAdRank:t.wpoAdRank,wpoId:t.wpoId}:{type:z.pL.FirstPartyAd,regionIndex:t.wpoAdRank||n,placement:{items:[]},height:t.height,wpoRank:t.wpoRank,wpoAdRank:t.wpoAdRank,wpoId:t.wpoId}):t.type===z.pL.AmplifyAd||t.type===z.pL.BoostAdsBanner||t.type===z.pL.BoostAdsCoachmark||t.type===z.pL.EventSDCardAmplifyAds||t.type===z.pL.BoostAd?{type:t.type,regionIndex:t.wpoAdRank||n,data:t.data,id:`${t.type}-${t.section}-${n}`,wpoMetadata:t.wpoMetadata,height:t.height,wpoRank:t.wpoRank,wpoAdRank:t.wpoAdRank,wpoId:t.wpoId}:void 0}convertComplexCardForSuperFeed(t,e,n,i,r=0){const{id:o,type:s,title:a,wpoMetadata:c}=t;let u,d;try{u=t.subCards.map(t=>{if(e===st.sm.IsInfopaneDenseCard){if(t.type===z.pL.NativeAd)return this.rawAdRegionTupleMap.get("infopane-tab").push(this.infoPaneCardCount),{type:z.pL.NativeAd,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}else if(e===st.sm.IsRiverDenseCard){if(this.denseRiverCardCount++,t.type===z.pL.NativeAd)return this.rawAdRegionTupleMap.get("dense-river").push(this.denseRiverCardCount),{type:z.pL.NativeAd,regionIndex:this.denseRiverCardCount,placement:{items:[]}}}else{if(this.infoPaneCardCount++,t.type===z.pL.NativeAd)return this.rawAdRegionTupleMap.get(this.adInfopaneRegion).push(this.infoPaneCardCount),{type:z.pL.NativeAd,regionIndex:this.infoPaneCardCount,placement:{items:[]}};if(t.type===z.pL.CmsAd){let e=`res${this.adInfopaneRegion}`;return"peekinfopane"===this.adInfopaneRegion&&(e="resinfopane"),this.infopaneCmsAdCount>=r&&(t.type=z.pL.NativeAd,e=this.adInfopaneRegion),this.rawAdRegionTupleMap.get(e).push(this.infoPaneCardCount),{type:t.type,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}if(t.type===z.pL.BuyDirectAd){const e="infopane";return this.rawAdRegionTupleMap.get(e).push(this.infoPaneCardCount),{type:t.type,regionIndex:this.infoPaneCardCount,placement:{isBuyDirect:!0,items:[]}}}if(t.type===z.pL.ShoppingInfopaneAd1||t.type===z.pL.ShoppingInfopaneAd2||t.type===z.pL.ShoppingInfopaneAd3||t.type===z.pL.ShoppingInfopaneAd4)return this.getShoppingInfopaneAd(t);if(t.type===z.pL.EventInfopaneShoppingAI)try{const e=JSON.parse(t.data),n=(0,ut.A)(e);delete t.data,t={...n,...t}}catch(t){return}}if(t.type===z.pL.Dense||t.type===z.pL.TopicFeed||t.type===z.pL.TabbedInfopaneCardTab){let e=st.sm.IsInfopaneDenseCard;return s!==z.pL.Infopane&&s!==z.pL.TabbedInfopaneCard&&(e=st.sm.IsRiverDenseCard),this.convertComplexCardForSuperFeed(t,e,n,i)}return t.type||s!==z.pL.CasualGamesCarousel||(t.type=`${s}SubItem`),this.convertCardForSuperFeed(t,"none",n,s,i)})}finally{u=u?.filter(t=>!!t)||[],d={id:o,type:s,subItems:u,metadata:{title:a},wpoMetadata:c,height:t.height,wpoRank:t.wpoRank,wpoId:t.wpoId},(t.type===z.pL.TopicFeed||xt(t))&&(d={card:t,id:o,type:s,subItems:u,metadata:{title:a},wpoMetadata:c,feed:t.feed?t.feed:null,height:t.height,wpoRank:t.wpoRank,wpoId:t.wpoId})}return d}convertVideoHeavyCardForSuperFeed(t){const{id:e,type:n,title:i,wpoMetadata:r}=t;return{id:e,type:n,subItems:[t],metadata:{title:i},wpoMetadata:r,feed:t.feed??null,height:t.height,wpoRank:t.wpoRank,wpoId:t.wpoId}}convertNestedCard(t){return t.subCards[0].type=t.type,t.subCards[0].subType=t.subType,t=t.subCards[0]}convertNewsGroupsCard(t){return{id:t.id,type:t.type,subType:t.subType,subCards:t.subCards||[],wpoMetadata:t.wpoMetadata,height:t.height,wpoRank:t.wpoRank,wpoId:t.wpoId}}checkIfUserIsEligibleForRuby(){return!!this.userIsEligibleForRuby||!(!(this.isRubySelected&&(0,ft.O_)()&&(0,ft.aw)())||(0,ft.cz)()||ht.gR.isUserOptedOut||!ht.gR.isRubyEligible||ht.gR.isRejectedByEdgeExpIsolation)&&(this.userIsEligibleForRuby=!0,!0)}resetCardCountForSuperFeed(){this.infoPaneCardCount=0,this.riverCardCount=0,this.heroCardCount=0,this.rightrailCardCount=0,this.railCardCount=0,this.denseRiverCardCount=0,this.riverNativeAdRelativeCount=0,this.riverCmsAdRelativeCount=0,this.riverIntraNativeAdRelativeCount=0,this.widgetsCardCount=0}getShoppingInfopaneAd(t){if(!this.shoppingInfopaneAdV1)return{type:t.type,regionIndex:this.infoPaneCardCount,placement:{items:[],shoppingInfopaneAdData:t.data}};try{const e=JSON.parse(t.data),n=(0,ut.A)(e.shoppingEntities),i=n.clickPingUrl+`&PageId=${c.YT.getRequestId()}&ct=ShoppingNTPInfopane`,r={title:n.title,destinationUrl:i,imageUrl:n.imageInfo?.sourceImageUrl,providerName:n.seller,adChoiceIconUrl:gt};return{id:n.id??(0,ct.G)(),type:t.type,regionIndex:this.infoPaneCardCount,placement:{items:[r],privacyUrl:gt,isBackfill:!1,showAdLabel:!0,adLabelText:"",isShoppingInfopaneAd:!0}}}catch(e){return{type:t.type,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}}updateAdRegionToPeek(t){t?(this.adRiverRegion="peekriver",this.adInfopaneRegion="peekinfopane"):(this.adRiverRegion=N.T3.IsHeroNTP?"riverlock":"river",this.adInfopaneRegion=N.T3.IsHeroNTP?"infopanelock":"infopane")}updateWpoIdResponseIndex(t){this.wpoIdResponseIndex=t}}function yt(){return new Map([["rightrail",[]],["Rail",[]],["infopane",[]],["infopanelock",[]],["intranative",[]],["peekinfopane",[]],["river",[]],["riverlock",[]],["peekriver",[]],["resinfopane",[]],["resinfopanelock",[]],["respeekinfopane",[]],["resriver",[]],["resriverlock",[]],["respeekriver",[]],["infopane-tab",[]],["dense-river",[]],["triver",[]]])}function vt(t){return t?.sections?.[0]?.region?t:{nextPageUrl:t.nextPageUrl,sections:[{region:"river",subSections:t.sections}],previews:t.previews,pageContext:t.pageContext}}const bt=(t,e)=>{t||(t=[]);const n=[];let i=!1;for(const r of t)r?.requestedColumnCount&&(r?.subSections?.forEach(t=>{t.cards||(t.cards=[]),t.cards.forEach(t=>{if("placeholder"===t.type)return t.placeholderId+=e,void(i=!0);t.wpoId+=e,t.wpoRank+=e})}),n[r.requestedColumnCount-1]=r?.subSections);return{subSections:n,rowRendering:i}};function St(t){if(!t)return"";const e=t.split("/");return kt(e)&&e[e.length-1].replace(".img","")}function Ct(t,e="/"){return t?t.split(e):[]}function kt(t,e=0){if(t)return t[e]}function Tt(t){switch(t){case z.pL.Article:return"ArticlePreview";case z.pL.Video:return"VideoPreview";case z.pL.Slideshow:return"SlideshowPreview";case z.pL.WebContent:return"WebContentPreview";default:return""}}function xt(t){return t.type===z.pL.NewsWatchShorts||t.type===z.pL.NewsWatchVideo||t.type===z.pL.WatchNewsShorts}var At=n(29252),$t=n(8598),It=n(57226),Pt=n(7187),Rt=n(34713),Mt=n(87432),_t=n(2509),Et=n(77120),Ft=n(48114);const Dt=1e4,Ot="gaming",Nt="following",Lt="filteredChannels",Bt="dynamicfilteredchannels",Ut=["activityId","adminDisabled","adppc","apikey","backgroundImageIsSet","caller","cbypass","clientTimeStamp","column","copilotApiSupported","dhp","dprValue","edgExpMask","inEdgeFeatures","infopaneCount","memory","newDevFreTime","newProfFreTime","overlay","pgc","pgname","pgtype","prerender","promotion","retryAttempt","revertTimes","selection","skipRetry","timeOut","vpSize"];function Wt(t,e=[]){if(!t?.serviceContext)return;const n=e.filter(t=>g.Rb.CurrentFlightSet.has(t)),o=t.serviceContext.fdHead?.split(",")?.map(t=>t.trim())??[],s=n.filter(t=>!o.includes(t));s.length>0&&(0,i.vV)(r.mky,"",void 0,{...r.mky.pb,cetoRef:t.cetoRef,msEdgeRef:t.msEdgeRef,message:`Flight ids ${s.join(",")} missing in wpo fdhead.`})}function Vt(t,e){t.method="POST",t.body=JSON.stringify(e),t.headers||(t.headers={}),t.headers["Content-Type"]="application/json"}function Ht(){if(!(0,A.S)()||!window.ssrWpoData)return;if(window.staleSSRFeed)return void delete window.ssrWpoData;const t=window.ssrWpoData;Wt(t,["prg-wpo-bkpncbig","prg-wpo-ntpscssr"]);const{debugId:e,serviceContext:n,dddTmpl:o,userType:s,authFeatures:a}=t;if((0,At.Ig)(e,!0),n?.serviceActivityId){c.YT.addOrUpdateIdxId(n.serviceActivityId,!0);try{const t=(0,$t.U5)();k(n.serviceActivityId,e,t)}catch{(0,i.vV)(r.ptZ,"Error throwed when getCompressedRecords doesn't return anything for NTP")}}return c.YT.addOrUpdateTmplString(o),c.YT.addOrUpdateTmplProperty("1s-usertype",s),c.YT.addOrUpdateTmplProperty("1s-authFeatures",a),e&&c.YT.addOrUpdateCustomProperty("debugId",e),delete window.ssrWpoData,t}function zt(t){const e=(0,o.ZF)();e[t]=e[t]??(0,o.gU)()}class jt extends Error{constructor(t,e=!1){super(t),this.silentExit=e}}class qt{static get preloadedResponses(){return $.vv.get(this.preloadedResponsesKey,()=>({}))}static set preloadedResponses(t){$.vv.set(this.preloadedResponsesKey,t)}static get renderedSegments(){return $.vv.get(this.renderedSegmentsKey,()=>"")}static set renderedSegments(t){$.vv.set(this.renderedSegmentsKey,t)}static get fetchingLock(){return $.vv.get(this.fetchingLockKey)}static set fetchingLock(t){$.vv.set(this.fetchingLockKey,t)}static get isPrerenderDsiabled(){return $.vv.get(this.isPrerenderDsiabledKey,()=>!1)}static set isPrerenderDsiabled(t){$.vv.set(this.isPrerenderDsiabledKey,t)}constructor(t,e,n=5){this.shouldRetryInOtherDomain=!1,this.traceInfo=[],this.shouldResetRightRailPromise=!1,this.wpoRightRailPromise=new ot.e,this.shouldResetRailPromise=!1,this.wpoRailPromise=new ot.e,this.noContentRetryCount=0,this.maxContentRetryCount=5,this.isPartialResponse=t=>!!(t&&t.serviceContext&&t.serviceContext.preRenderDisabled),this.getAuthTrail=()=>{try{return(0,$t.U5)()}catch{(0,i.vV)(r.ptZ,"Error throwed when getCompressedRecords doesn't return anything for NTP")}},this.updateQSParam=(t,e)=>{const n=new RegExp("([?&])"+e+"=.*?(&|$)","i");return t.match(n)?t.replace(n,"&"):t},this.mapperHelper=new wt(t.shoppingInfopaneAdV1),this.config=t,this.initializeRequest(),this.isXFeed=e,this.maxContentRetryCount=n,window.isSSREnabled&&window.ssrRenderedSegments&&(qt.renderedSegments=window.ssrRenderedSegments,delete window.ssrRenderedSegments),this.config.feedCacheEnabled&&!window.isSSREnabled&&(this.feedResponseCache=(0,P.s)({cacheName:"wpo-feed",getCacheKey:t=>this.normalizeUrl(t.serviceUrl),maxAgeInMs:this.config.feedCacheMaxAgeInMs}))}static async ensureLock(t=5e3){for(;qt.fetchingLock&&!qt.fetchingLock.wasSet();)await qt.fetchingLock.getResultAsync();$.vv.get("ssrRequestClosed")||(qt.fetchingLock=new ot.e(t))}static releaseLock(){qt.fetchingLock&&qt.fetchingLock.set()}async fetch(t,e,n,o,s,a,c,u,d){let l,h=this.config.initialRequest;if(this.shouldResetRightRailPromise&&(this.wpoRightRailPromise=new ot.e,this.shouldResetRightRailPromise=!1),this.shouldResetRailPromise&&(this.wpoRailPromise=new ot.e,this.shouldResetRailPromise=!1),t&&(t.feedId||t.nextPageUrl||!h||(t.feedId=h.feedId),h={...h,...t}),!h)return(0,i.vV)(r.TwZ,"default WpoService fetch configuration was invalid"),this.responseStatus=E.EY.InvalidRequest,{status:this.responseStatus,isStatic:this.isStatic,regions:void 0,rawAdRegionTupleMap:new Map([["rightRail",[]],["Rail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]]])};await qt.ensureLock();try{l=await this.fetchRiverSectionFeedLayoutData(h,e,n)}finally{qt.releaseLock()}d&&l&&!l.isStatic&&d(l,l.sections,!1);const f=!(h.useNextPageUrl&&h.nextPageUrl);this.config.feedCacheEnabled&&f&&(this.isFeedFirstPageFromCache=(0,P.D)(l)),0===e&&l&&l.serviceContext&&((0,F.Z)(l.serviceContext),(0,D.g)(l.serviceContext),g.Rb.CurrentFlightSet.has("1s-ads-ntpriver")&&Wt(l,["1s-ads-ntpriver","prg-ad-ridoverride"])),0!==e||(0,A.S)()||(l?Et.V_.saveSSRPartResponse(l,"feed"):(0,i.vV)(r.OLu,"",void 0,{...r.OLu.pb,requestId:h.requestId})),(0,O.W)(l);const p=l?.serviceContext?.rubyEverSelected;return p&&this.mapperHelper.setRubyEverSelected(p),this.handleResponseMapForSuperFeed(h,e,l,o,s,a,c,u)}async fetchWidgets(t,e="widgets",n,o){let s,a=this.config.initialRequest;if(t&&(t.feedId||t.nextPageUrl||!a||(t.feedId=a.feedId),a={...a,...t}),!a)return(0,i.vV)(r.TwZ,"default WpoService widgets fetch configuration was invalid"),this.responseStatus=E.EY.InvalidRequest,{status:this.responseStatus,isStatic:this.isStatic,regions:void 0,rawAdRegionTupleMap:new Map};await qt.ensureLock();try{s=await this.fetchWidgetSectionFeedLayoutData(a,e,n,o)}finally{qt.releaseLock()}return 0!==n||(0,A.S)()||(s?Et.V_.saveSSRPartResponse(s,e):(0,i.vV)(r.OLu,"No response for widget request",void 0,{...r.OLu.pb,requestId:a.requestId})),this.handleResponseMapForWidgets(a,s,e,o)}overrideAppErrorSeverity(t){if("hub"===N.T3.AppType&&[r.PUH,r.iXH,r.Amp,r.wsO].includes(t))return s.A.Critical}sendAppErrorWithSeverityOverride(t,e){const n=this.overrideAppErrorSeverity(t);n&&(e.severity=n),e.pb.pageAge=Math.round(performance.now()),c.YT.sendAppErrorEvent(e)}handleResponseMapForSuperFeed(t,e,n,o,s,a,c,u){if(this.isPartialResponse(n))return{status:this.responseStatus,isStatic:!1,rawAdRegionTupleMap:new Map([["rightRail",[]],["Rail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]]]),isPartial:n.isPartial,serviceContext:n.serviceContext,previews:n.previews};const d=new Set(["msft-dense-nine-card"]);n?.sections?.length>0&&"river"===n.sections[0].region&&n.sections[0].subSections?.forEach((t,e)=>{t.layoutTemplate&&d.has(t.layoutTemplate)&&(n.sections[0].subSections[e].cards=[{type:"densetab",isLocalContent:!1,galleryItemCount:0,subCards:t.cards}]),t?.cards?.length>0&&t.cards.forEach((t,i)=>{if(t?.type===z.pL.Infopane&&t?.subCards?.[0]?.type===z.pL.TabbedInfopaneCardTab){const r=function(t){const e=[];let n=[];for(let i=0;i<t.length;i++){const r=t[i];if(r.type==z.pL.TabbedInfopaneCardTab)n.push(r);else if(r.type==z.pL.TopicFeed)n.push(r);else{if(n.length>0){const t={type:z.pL.TabbedInfopaneCard,subCards:n};e.push(t),n=[]}e.push(r)}}return e}(t?.subCards);n.sections[0].subSections[e].cards[i]={...t,subCards:r}}})});const l=c||u,h=0===e||2===e&&"winWidgets"===N.T3.AppType&&"ruby"===N.T3.UxMode||this.config.enableWpoAdRank&&2===e&&!l.size,f=this.mapperHelper.mapRegionBasedWpoResponseForSuperFeed(n,this.config.useRelativeAdPlacement,o,s,this.config.auctionRidOverride&&!(0,v.EZ)(),this.config.enableHeroWaterfall,a,h,this.config.enableWpoAdRank,c,u),{nextPageUrl:p,regions:g,rawAdRegionTupleMap:m,raw1sAdRegionTupleMap:w,previews:y,pageContext:b,debugId:S}=f;let C;this.responseStatus===E.EY.Success?(C={...t,nextPageUrl:p},qt.updateRenderedSegments(p),this.noContentRetryCount=0):this.responseStatus===E.EY.Failed?(C={...t},this.noContentRetryCount=0):this.responseStatus===E.EY.NoContent&&(this.noContentCannotRetry()||(C={...t},this.noContentRetryCount++),t.disableContent||(0,i.vV)(r.T8$,"",void 0,{...r.T8$.pb,isFirstPage:!t.nextPageUrl,url:t.nextPageUrl,requestId:t.requestId,status:this.responseStatus,noContentRetryCount:this.noContentRetryCount})),N.T3.IsHeroNTP&&C&&(C.segment=null,C.pageOcid=null,C.scenario=null),this.config.validateDuplicateCards&&(0,A.S)()&&nt(g,S,e);return{regions:g,nextPageRequest:C,rawAdRegionTupleMap:m,raw1sAdRegionTupleMap:w,status:this.responseStatus,isStatic:n?.isStatic||this.isStatic,traceIdIndex:n?.traceIdIndex,metadata:n?.metadata,userType:n?.userType,previews:y,pageContext:b,debugId:S,serviceContext:n?.serviceContext,responseSource:n?.responseSource,locationContextDictionary:n?.locationContextDictionary,isFromCache:n?.isFromCache,settings:n?.settings}}handleResponseMapForWidgets(t,e,n,i){if(!e)return;if(this.isPartialResponse(e))return{status:this.responseStatus,isStatic:!1,isPartial:e.isPartial,serviceContext:e.serviceContext,previews:e.previews};let r;r=i?this.mapperHelper.mapRegionBasedWpoResponseForSuperFeed(e):this.mapperHelper.mapRegionBasedWpoResponseForWidgets(e,n);const{nextPageUrl:o,regions:s,previews:a,pageContext:u,debugId:d}=r;let l;this.responseStatus===E.EY.Success?(l={...t,nextPageUrl:o},qt.updateRenderedSegments(o),this.noContentRetryCount=0):this.responseStatus===E.EY.Failed?(l={...t},this.noContentRetryCount=0):this.responseStatus===E.EY.NoContent&&(this.noContentCannotRetry()||(l={...t},this.noContentRetryCount++),c.YT.addOrUpdateTmplProperty(`${n}SectionEmpty`,"1")),N.T3.IsHeroNTP&&l&&(l.segment=null,l.pageOcid=null,l.scenario=null);return{regions:s,nextPageRequest:l,status:this.responseStatus,isStatic:this.isStatic,traceIdIndex:e?e.traceIdIndex:void 0,metadata:e?e.metadata:void 0,userType:e?e.userType:void 0,previews:a,pageContext:u,debugId:d,serviceContext:e?e.serviceContext:void 0,responseSource:e?e.responseSource:void 0}}async fetchRiverSectionFeedLayoutData(t,e,n){const s=g.Rb?.IsPrerender||this.config.disableWorker||N.T3.IsHeroNTP,a=0===e||2===e;if((0,A.S)()&&a){const e=Ht(),n=this.trySaveAndConsumePreloadedResponse(e,"feed");if(n)return n&&n&&n.sections&&n.sections.length>0?this.responseStatus=E.EY.Success:this.responseStatus=E.EY.NoContent,c.YT.addOrUpdateTmplProperty("SSRFeedConsumed","1"),$.vv.set("__isSSRWpoFeedConsumed__",!0),{...n,responseSource:E.Py.FromSSR};if(!$.vv.has("__isSSRWpoFeedConsumed__")&&window.ssrLayoutState?.selectedFeedDisplaySetting){const e=window.ssrLayoutState.selectedFeedDisplaySetting;["off","onscroll","headingsonly"].includes(e)||window.staleSSRFeed||(0,i.vV)(r.Gc0,"",void 0,{...r.Gc0.pb,requestId:t.requestId})}}if(0!==e||this.isXFeed||s||t.feedName===Ot&&t.dontUseWorkerForFeed)this.checkWebWorkerUrl=!1;else{this.checkWebWorkerUrl=!1;let e="myfeed";t.feedName===Ot&&(e="gaming"),t.feedName===Nt&&(e="following");const i=this.config.removeTimeoutWebworker?void 0:1e3;n&&n();const r=await(0,L.H$)({id:e},i),s=r&&r.payload;if(s){const t=T.xT.MultiColumn;if(T.xT.MultiColumn===t&&r.fetched){this.checkWebWorkerUrl=!0,this.responseStatus=E.EY.Success;(0,o.ZF)().isFeedFromWW=1;const t=s.traceId;if(s.traceIdIndex=this.addOrUpdateIdxId(t,a),(0,A.S)()){const t=this.getAuthTrail();k(s.traceId,s.debugId,t)}return s.tmpl&&c.YT.addOrUpdateTmplString(s.tmpl),l.g.publish(l.m.userIsSignedIn,{isSignedIn:s.isSignedIn,src:"WW-wcp"}),{...s,responseSource:E.Py.FromWW}}}}const d=(0,o.ZF)();if((Et.V_.enableEarlyMainFeedRequest||qt.preloadedResponses.feed)&&(0===e||2===e)){const e=(0,A.S)()?Dt:void 0,i=qt.preloadedResponses.feed?void 0:await Et.V_.getEarlyWpoFeedData(e),r=this.trySaveAndConsumePreloadedResponse(i,"feed");if(zt("earlyFeedCall"),this.responseStatus=r?.responseStatus,r&&r&&r.sections&&r.sections.length>0){this.responseStatus=E.EY.Success;const t=r.serviceContext?.serviceActivityId;t&&(r.traceIdIndex=this.addOrUpdateIdxId(t,a)),zt("earlyFeedSuccess")}else this.responseStatus=E.EY.NoContent;Et.V_.enableEarlyMainFeedRequest=!1;const o=N.T3.IsHeroNTP&&r?.isStatic,s=this.responseStatus!==E.EY.Success||o;if(t.skipRetry||!(0,A.S)()||!s)return zt("ssrEarlyFeedUsed"),d.responseSource=E.Py.FromEarlyResponse,(0,_t.DZ)(r?.authContext),{...r,responseSource:E.Py.FromEarlyResponse};{const e=await this.fetchFromWpoService(t,a,n,o,void 0,this.feedResponseCache);if(e)return d.responseSource=(0,P.D)(e)?E.Py.FromCache:E.Py.FromServer,{...e,responseSource:E.Py.FromServer}}}else{const i=await this.fetchFromWpoService(t,a,n,void 0,void 0,this.feedResponseCache,e);if(t.widgetsOn&&a&&this.trySaveAndConsumePreloadedResponse(i,"feed"),i)return d.responseSource=(0,P.D)(i)?E.Py.FromCache:E.Py.FromServer,{...i,responseSource:E.Py.FromServer}}if(this.shouldRetryInOtherDomain){t.domainOverride=u.iw,t.requestPathOverride=u.nm;const e=await this.fetchFromWpoService(t,a,void 0,!0);if(e)return d.responseSource=E.Py.FromServer,{...e,responseSource:E.Py.FromServer}}return this.getCachedResponse(t)}async fetchWidgetSectionFeedLayoutData(t,e,n,i){const r=0===n||2===n;if((0,A.S)()&&r&&!i){const t=Ht(),n=this.trySaveAndConsumePreloadedResponse(t,e);if(n)return n&&n&&n.sections&&n.sections.length>0?this.responseStatus=E.EY.Success:this.responseStatus=E.EY.NoContent,{...n,responseSource:E.Py.FromSSR}}const s=(0,o.ZF)();if((Et.V_.enableEarlyMainFeedRequest||qt.preloadedResponses[e])&&(0===n||2===n)&&!i){const n=(0,A.S)()?Dt:void 0,i=qt.preloadedResponses[e]?void 0:await Et.V_.getEarlyWpoFeedData(n);zt("earlyFeedCall");const o=this.trySaveAndConsumePreloadedResponse(i,e);this.responseStatus=o?.responseStatus,o&&o&&o.sections&&o.sections.length>0?(this.responseStatus=E.EY.Success,zt("earlyFeedSuccess")):this.responseStatus=E.EY.NoContent,Et.V_.enableEarlyMainFeedRequest=!1;const a=this.responseStatus!==E.EY.Success;if(t.skipRetry||!(0,A.S)()||!a)return zt("ssrEarlyFeedUsed"),s.responseSource=E.Py.FromEarlyResponse,{...o,responseSource:E.Py.FromEarlyResponse};{const e=await this.fetchFromWpoService(t,r);if(e)return s.responseSource=E.Py.FromServer,{...e,responseSource:E.Py.FromServer}}}else{const e=await this.fetchFromWpoService(t,r);if(e)return s.responseSource=E.Py.FromServer,{...e,responseSource:E.Py.FromServer}}if(this.shouldRetryInOtherDomain){t.domainOverride=u.iw,t.requestPathOverride=u.nm;const e=await this.fetchFromWpoService(t,r,void 0,!0);if(e)return s.responseSource=E.Py.FromServer,{...e,responseSource:E.Py.FromServer}}return this.getCachedResponse(t)}trySaveAndConsumePreloadedResponse(t,e){if(qt.preloadedResponses[e]){const t=qt.preloadedResponses[e];return delete qt.preloadedResponses[e],t}if(!t)return null;const n=t.sections,i=this.isPartialResponse(t),r=N.T3.IsHeroNTP&&!g.Rb.CurrentFlightSet.has("prg-hero-abnav")&&!((0,I.iA)()?.toLowerCase()?.includes("ocid=wind_spot_2")||(0,I.iA)()?.toLowerCase()?.includes("ocid=wind_spot_desktop")),o=t=>"widgets"===t||"cardData_widgets"===t,s=n?.filter(({region:t})=>r?!o(t):!o(t)&&"hero"!==t),a=n?.filter(({region:t})=>"hero"===t),c=n?.filter(({region:t})=>"widgets"===t);qt.preloadedResponses={feed:s?.length||i&&"feed"===e?{...t,sections:s}:null,hero:a?.length?{...t,sections:a}:null,widgets:c?.length?{...t,sections:c}:null};const u=qt.preloadedResponses[e];return delete qt.preloadedResponses[e],u}async fetchFromWpoService(t,e,n,s=!1,l,m,w){if($.vv.get("ssrRequestClosed"))throw new jt("Fetch aborted due to SSR request close",!0);const y=g.Rb?.IsPrerender,b=(0,v.EZ)();!(0,A.S)()&&this.config.requestToOrigin&&(t.domainOverride=u.iw,t.requestPathOverride=u.nm),this.config.enableResetServiceURL&&(t.domainOverride=u.Eh);const S=!e&&t.paginationTimeoutMs?t.paginationTimeoutMs:t.timeoutMs,C=b&&e?2e3:S,T=N.T3.ShouldUseFdheadQsp?N.T3.CurrentRequestTargetScope?.pageExperiments?.join(","):void 0;let x;c.YT.addOrUpdateTmplProperty("fdHeadWpoCardProv",N.T3.ShouldUseFdheadQsp?.toString()),(0,A.S)()&&(x=!(window&&window.chrome&&window.chrome.embeddedSearch),c.YT.addOrUpdateTmplProperty("privatew",`${x}`));const P=window&&`${window.innerWidth}x${window.innerHeight}`;qt.renderedSegments&&(t.renderedSegments=qt.renderedSegments);const F={...t,audienceMode:N.T3.CurrentRequestTargetScope?.audienceMode,enableRightRailColumn:t.powerRightRailWithWpo,fdhead:T,isXFeed:this.isXFeed,nextPageUrl:t.useNextPageUrl&&t.nextPageUrl,requestType:h.Yw.wpoService,timeoutMs:t.query&&t.customFeedTimeoutMs?t.customFeedTimeoutMs:C,refreshType:b?"bgtask":void 0,isDhp:this.isDhp(),isRetry:s,private:x,viewportSize:P,enableWpoAdPlacements:this.config.auctionRidOverride&&!b,adsTimeout:this.config.auctionRidOverride&&600,uxMode:N.T3.UxMode};if(e&&N.T3.IsHeroNTP){F.pageOcid=B._3.getQueryParameterByName("ocid",(0,I.iA)());const t=B._3.getQueryParameterByName("segment",(0,I.iA)());F.segment=t,("edgeChromium"===N.T3.AppType&&g.Rb.CurrentFlightSet?.has("ntp-cxtfd-hero")||"homePage"===N.T3.AppType&&g.Rb.CurrentFlightSet?.has("hp-cxtfd-hero"))&&(F.context=B._3.getQueryParameterByName("context",(0,I.iA)())??t),F.scenario=B._3.getQueryParameterByName("scenario",(0,I.iA)()),"wind_spot_2"!==F.pageOcid&&"wind_spot_desktop"!==F.pageOcid&&"cegrowth"!==F.segment?.toLowerCase()||(F.assetId=B._3.getQueryParameterByName("assetId",(0,I.iA)())),F.timeoutMs=this.config.heroTimeoutMs||1500;const e=B._3.getQueryParameterByName("Date",(0,I.iA)()),n=(0,It.PJ)(e,this.config.enableStartMonday);Array.isArray(n)&&n.length>0&&(F.calendarDate=e.split("-").join(""),F.calendarStartDate=n[0],F.calendarEndDate=n[1]),F.scenario&&(0,A.S)()&&"Weather"===F.segment&&"Calendar"!==F.scenario&&setTimeout(()=>{const t=this.updateQSParam(window.location.href,"scenario");window.history.replaceState({},"",t)},3e3)}if("winWidgets"===N.T3.AppType&&"ruby"===N.T3.UxMode)if("startfeed"!==g.Rb?.ClientSettings?.pagetype)F.enableRuby=!0;else{const t=Ft.F_.get(2)?"api":"bgRefresh";F.refreshType=0===w?"init":t}const D=B._3.getQueryParameterByName("ssrFeedTimeOut",window.location.href);!(0,A.S)()&&D&&(F.timeoutMs=parseInt(D)),F.dprValue=Math.round(100*(0,I.mZ)())/100;const O=await f.h.requestInit(F),z=await f.h.buildServiceRequestURL(F);g.Rb.CurrentFlightSet.has("1s-pagefeed-post")&&(t.enablePOSTFeedRequest?function(t){Vt(t,{}),c.YT.addOrUpdateTmplProperty("postfeedreq","1")}(O):t.enableContentSeenTracking&&await async function(t){const e=await(0,p.Q7)();e&&(Vt(t,e),c.YT.addOrUpdateTmplProperty("seenids",e.NewsImpressedDocIds.length.toString()),e.SegmentImpressedDocIds?.length&&c.YT.addOrUpdateTmplProperty("seensegids",e.SegmentImpressedDocIds.join(",")))}(O)),R.WR.addTelemetryTracingQueryParam(z);const q=decodeURIComponent(z.href);this.requestQueryParams=new U.m(z.search),t.serviceUrl=q;if("1"===B._3.getQueryParameterByName("logwporeq",window.location.href)){const t={};new Headers(O?.headers).forEach((e,n)=>{"Cookie"!==n&&(t[n]=e)}),(0,i.vV)(r.TBf,"",void 0,{...r.TBf.pb,headers:JSON.stringify(t),url:q,credentials:O.credentials,referrer:O.referrer})}const G=(0,o.ZF)();let K;if(G.WpoCallStart=Math.round((0,o.gU)()),(0,A.S)()||(G.wpoSSRCallStart=G.WpoCallStart),z.search=this.requestQueryParams.toString(),this.checkWebWorkerUrl){const t=(0,L.wJ)("WebWorkerInitFeedUrl");t&&t.payload&&t.payload!==z.href&&(0,i.vV)(r.$3R,"Wpo feed fetch url does not match web worker")}const tt=t.useNextPageUrl&&t.nextPageUrl,nt=!tt;let ot,st,at,ct,ut,dt;try{let u,h,f,p,g,w;if((0,A.S)()?(u=t?.overrideCSRTimeoutInMs||Dt,ut=Math.round(performance.now())):u=t?.overrideSSRTimeoutInMs||800,n&&n(),m&&(nt||this.isFeedFirstPageFromCache)&&"reload"!==performance.getEntriesByType("navigation")?.[0]?.type&&(h=await m.tryReadCache(t),nt&&(this.isFeedFirstPageFromCache=!!h)),!h){dt=(()=>{let t=0;const e=nt?r.ckq:r.mbM;return window.setInterval(()=>{t+=1,(0,i.vV)(e,`Request didn't finish in ${5e3*t}ms`,void 0,{...e.pb,url:q,isFirstPage:nt,activityId:N.T3.ActivityId,isPrerender:b})},5e3)})();"header"===$.vv.get("oneSvcUniTunMode")&&O&&O.headers&&(O.headers[W.aS.uniFeatTun]=await R.WR.getUniFeatTunHeader());const e=(0,M.w)((e,n)=>{const i=n||q;return(0,A.S)()?(0,M.Y)(i,O,u,t.skipRetry):(0,V.hv)(i,u,O,void 0,void 0,!0)},"WpoCardProvider.fetch",u,t.skipRetry,q);if(l&&setTimeout(()=>l.set(),0),h=await e,dt&&(clearInterval(dt),dt=null),(m||this.canUseWpoCache())&&h&&h.ok&&!Gt(h)){const e=h.clone();window.requestIdleCallback(()=>{this.addResponseToCache(q,e),m&&m.writeCache(e,t)})}}if(h){if("1"===B._3.getQueryParameterByName("logwpores",window.location.href)){const t={};h.headers?.forEach((e,n)=>t[n]=e),(0,i.vV)(r.faL,"",void 0,{...r.faL.pb,headers:JSON.stringify(t),reqHeaders:JSON.stringify(O.headers),ok:h.ok,status:h.statusText,body:h.body})}const{ok:n,status:o,statusText:s,headers:a}=h;if(ot=a&&a.get("ddd-debugid"),st=a&&a.get("x-ceto-ref"),at=a&&a.get("x-msedge-ref"),ct=a&&a.get("ddd-auth-features"),this.rawFetchCallResponse=`{ status: ${o}, url: ${h.url}, debugId: ${ot} }`,$.vv.set("OneServiceResponseDebugId",ot),t.feedName===Nt){const n=new URLSearchParams(z.search),s="activityId",a=n.get(s)||"";if(a&&a!=N.T3.ActivityId&&(0,i.vV)(r.jNX,"ActivityId mismatched",void 0,{...r.jNX.pb,clientActivityId:N.T3.ActivityId,serviceSideActivityId:a,debugId:ot}),(204===o||404===o)&&nt&&e&&!t.feedId){const t=rt;return 204===o&&t?.sections?.[0].subSections?.[0].cards?.[0]&&(t.sections[0].subSections[0].cards[0].isShowSelectMoreMessage=!0),t}}n?t.disableContent||204!==o||(f=nt?r.F2m:r.rWX,w=!1):(f=t.disableContent?r.AxD:nt?r.PUH:r.Upu,"outlookchannels"===t.feedName&&500===o&&(f=r.wvp),p=o,g=s,w=!0)}else f=t.disableContent?r.AxD:nt?r.PUH:r.Upu,w=!0;const v=Gt(h);if(f){const t=(0,Mt.A)(O,"headers.Authorization"),e=h?.headers?.get("ddd-auth-features"),n=e?.includes("IsBot:1"),i={...f,pb:{...f.pb,url:decodeURIComponent(z.href),requestHeaders:JSON.stringify(t&&t.headers),status:p,statusText:g,isFirstPage:nt,activityId:N.T3.ActivityId,isBot:n,isStatic:v,isInitializedAsPrerenderPage:y,isPrerender:b,isRetriedRequest:s,debugId:ot,requestStart:ut}};if(this.sendAppErrorWithSeverityOverride(f,i),w)return void(this.responseStatus=E.EY.Failed);if(!(0,A.S)()&&f===r.F2m)return void(this.responseStatus=E.EY.NoContent)}let S,C,T;if(h.headers){if(v){const e=h.headers&&h.headers.get("X-Staticfallback-Reason");let n=r.o2X;b?n=r.BTk:N.T3.IsHeroNTP&&!s&&(n=r.ah_),!t.disableContent&&(0,i.vV)(n,"Fell back to static content on the feeds call",void 0,{...n.pb,url:decodeURIComponent(z.href),isFirstPage:nt,activityId:N.T3.ActivityId,isPrerender:b,isInitializedAsPrerenderPage:y,debugId:ot,isRetriedRequest:s,staticsFallbackReason:e}),this.isStatic=!0}else{const t=h.headers?.get(W.pc.digitalId);(0,_t.DZ)(t)}if(C=h.headers.get(W.pc.userType),t.feedName!==Lt&&t.feedName!==Bt){c.YT.addOrUpdateCustomProperty("debugId",ot),c.YT.addOrUpdateTmplProperty("1s-usertype",C),c.YT.addOrUpdateTmplProperty("1s-authFeatures",ct);const t=h.headers.get(W.pc.traceId);if(S=this.addOrUpdateIdxId(t,e),(0,At.Ig)(ot,!1),(0,A.S)()){k(t,ot,this.getAuthTrail())}}e&&function(t){if(!t)return;const e=(0,o.ZF)(),n=t.match(/wpo;\s*dur=(\d+)(,|$)/)?.[1]||"";n&&(e.wpoServerTiming=parseInt(n));const i=t.match(/1s;\s*dur=(\d+)(,|$)/)?.[1]||"";i&&(e.oneServiceServerTiming=parseInt(i))}(h.headers.get("server-timing")||"")}if(!tt){const t=G.WpoCallStart,e=G.WpoResponseBack=Math.round((0,o.gU)());G["FeedRequest.FG"]=e-t,(0,a.Ww)({name:"FeedRequest.FG",startTime:t,endTime:e})}if(![r.F2m,r.rWX,r.JK9].includes(f)){const n=(0,A.S)()&&(0,o.gU)();if(K=await h.json(),G&&n&&(G.FeedResponseJsonReadTime=Math.round((0,o.gU)()-n)),(0,_t.DZ)(K?.authContext),K?.serviceContext){const{tmpl:t,responseCreationDateTime:n}=K.serviceContext;t&&(T=t,c.YT.addOrUpdateTmplString(T));const i=new Date(n).getTime();!isNaN(i)&&G&&(G.FeedResponseCreationTimestamp=i),e&&!(0,Rt.C6)()&&n&&(0,H.Lg)().setItem("ruby"===N.T3.UxMode?"RubyFeedGenTime":"NTPFeedGenTime",n)}if(K&&h&&(K.isFromCache=h.isFromCache),v&&(K.isStatic=!0),K?.swCacheEnabled){const t={url:decodeURIComponent(z.href),isFirstPage:nt,activityId:N.T3.ActivityId,isPrerender:b,isInitializedAsPrerenderPage:y,isRetriedRequest:s,cacheAgeSeconds:K.cacheAgeSeconds,originalStatusCode:K.originalStatusCode,originalDebugId:K.originalDebugId,requestMethod:K.requestMethod,cachedResponseDebugId:ot,staticsFallbackReason:K.staticsFallbackReason};(0,i.vV)(r.QFX,"Service Worker Cached Data Triggered",void 0,{...r.QFX.pb,...t});let e=null,n="";switch(K?.cacheTriggeredReason){case r.b6v.id:e=r.b6v,n="Service Worker Triggered due to fetch error: "+K.cacheTriggeredErrorMessage;break;case r.EuX.id:e=r.EuX,n="Service Worker Triggered due to wpo service error";break;case r.T0u.id:e=r.T0u,n="Service Worker Triggered due to Status 204 no content";break;case r.byY.id:e=r.byY,n="Service Worker Triggered due to static content loaded";break;case r.fIj.id:e=r.fIj,n="Service Worker Triggered due to wpo service returns empty section";break;case r.oOL.id:e=r.oOL,n="Service Worker Triggered due to static fallback returns empty section";break;case r.kwp.id:e=r.kwp,n="Service Worker Triggered due to network timeout"}e&&(0,i.vV)(e,n,void 0,{...e.pb,...t})}if(K.traceIdIndex=S,K.userType=C,K.debugId=ot,K.cetoRef=st,K.msEdgeRef=at,K.authFeatures=ct,K.dddTmpl=T,K.serviceContext?.debugInfo?.includes?.(d.hs)&&(0,i.vV)(r.L61,"WPO returned static layout fallback",void 0,{isFirstPage:nt,isPrerender:b,debugId:ot,isRetriedRequest:s,serviceContext:K.serviceContext}),t.feedName===Nt&&200===h.status&&nt&&e){const t=rt;if(!(K.sections&&K.sections.some(t=>"river"===t.region))&&K.sections&&t&&t.sections&&t.sections.length){const e=K.sections.filter(t=>"overlay"===t.region);e&&e.length&&K.sections.push(t.sections[0])}}if(t.feedName===Ot&&200===h.status&&nt&&e&&(0,A.S)()&&K.serviceContext?.tmpl&&!(0,H.Lg)().getObject("gaming-feed-engagement"))try{const t=Math.floor((new Date).getTime()/1e3),e=K.serviceContext.tmpl.split(";"),n={};for(let t=0;t<e.length;t++)e[t].includes("gamingFeedEngagementCount30D")&&e[t].split(",").forEach(t=>{const e=t.split(":"),[i,r]=e,o=r?Number.parseInt(r,10):null;"gamingFeedEngagementSum7D"!==i&&"gamingFeedEngagementCount7D"!==i&&"gamingFeedEngagementSum30D"!==i&&"gamingFeedEngagementCount30D"!==i||null===o||(n[i]=o)});n.lastUpdated=t;const i=5;Object.keys(n).length===i&&(0,H.Lg)().setObject("gaming-feed-engagement",n)}catch(t){}if(!(t.feedName===Nt||t.feedName===Lt||t.feedName===Bt||t.disableContent||this.isPartialResponse(K)||K.sections&&K.sections.length>0)){const t=v?r.M_y:r.T4e;(0,i.vV)(t,"Empty Section on the feed call",void 0,{...t.pb,url:decodeURIComponent(z.href),isFirstPage:nt,activityId:N.T3.ActivityId,isPrerender:b,isInitializedAsPrerenderPage:y,debugId:ot,isRetriedRequest:s})}}}catch(e){dt&&(clearInterval(dt),dt=null);const n=["Service Request Timed out","Fetch for https://"],i=["TypeError: Failed to fetch"];let o;const a=(0,_.dx)();if(this.shouldRetryInOtherDomain=nt&&!t.domainOverride&&!a&&!(!(0,A.S)()&&this.config.requestToOrigin),n.some(t=>e?.message?.includes(t))){const t=b?r.xlx:r.Amp;o=nt?t:r.GtY,o===r.Amp&&this.shouldRetryInOtherDomain&&!s&&(o=r.Dhq)}else o=i.some(t=>e?.message?.includes(t))?this.shouldRetryInOtherDomain?r.Ffs:r.iXH:this.shouldRetryInOtherDomain?r.bqh:r.wsO;const c=(0,Mt.A)(O,"headers.Authorization"),u={...o,message:"Error while fetching WpoService response",pb:{...o.pb,customMessage:`Error: ${e}`,url:decodeURIComponent(z.href),requestHeaders:JSON.stringify(c.headers),isFirstPage:nt,activityId:N.T3.ActivityId,isPrerender:b,isInitializedAsPrerenderPage:y,domainOverride:t.domainOverride??"",isRetry:this.shouldRetryInOtherDomain,debugId:ot,isRetriedRequest:s,isRetryBackupDomainFlight:a,requestStart:ut}};return this.sendAppErrorWithSeverityOverride(o,u),void(this.responseStatus=E.EY.Failed)}this.jsonResponseFromWPO=null;const lt=this.isPartialResponse(K);if(qt.isPrerenderDsiabled=lt,it(K,this.isStatic,lt,this.config.needValidateApiResp,ot,t.disableContent||Boolean(K?.serviceContext?.disableContent)),K&&K&&K.sections&&K.sections.length>0||lt){this.responseStatus=E.EY.Success;const n=K?.sections?.map((t,e)=>t?.region);this.jsonResponseFromWPO=JSON.stringify(n),!this.isStatic&&e&&"default"===t.feedName&&N.T3.IsHeroNTP&&((t,e)=>{const n=(B._3.getQueryParameterByName("segment",(0,I.iA)())||"").toLowerCase(),o=t.sections.find(t=>"hero"===t.region);if(!o||!o.subSections?.length){const r=t.sections.find(t=>"river"===t.region)?"Missing hero section in WPO response.":"Missing hero and river section in WPO response.",o=Q(n);if((0,i.vV)(o,"Missing Hero Region",`${r} Debug id: ${t.debugId}`,{...o.pb,requestUrl:e,statusCode:t.statusCode}),"homePage"===N.T3.AppType&&(0,j.Er)(g.Rb?.ClientSettings?.ocid)){const t=new URL(window.location.href),e=t.searchParams.get("cm");t.search="",t.searchParams.set("ocid","windirect"),e&&t.searchParams.set("cm",e),window.location.href=t.toString()}return}try{if((t=>!t?.subSections?.[0]?.dataTemplate&&!t?.subSections?.[0]?.layoutTemplate)(o))return J({jsonResponse:t,heroSection:o,segment:n,decodedServiceUrl:e});const s=o.subSections[0].layoutTemplate,a=Z.get(s),c=a?.supportedSegments?.includes(n),u=a?.cardCount===o.subSections[0].cards?.length,d=X.get(n);let l=!0,h=!1;o.subSections[0].cards?.map(t=>{d&&d.has(t.type)||(Y.includes(t.type)?h=!0:l=!1)}),h&&(0,i.vV)(r.qQs,`Hero card backfilled - ${n}`,void 0,{...r.qQs.pb,templateName:s,cardsInResponse:JSON.stringify(o.subSections[0].cards.map(t=>t.type)),debugId:t.debugId,isValidTemplateForThisSegment:c,isCorrectCardCount:u,isValidCardTypes:l}),c&&u&&l||(0,i.vV)(r.J$q,"Invalid Hero Response",void 0,{...r.J$q.pb,templateName:s,cardsInResponse:JSON.stringify(o.subSections[0].cards.map(t=>t.type)),debugId:t.debugId,isValidTemplateForThisSegment:c,isCorrectCardCount:u,isValidCardTypes:l,hasBackfilled:h})}catch(e){(0,i.vV)(r.J$q,"Invalid Hero Response",e.message,{...r.J$q.pb,debugId:t.debugId})}})(K,q),!this.isStatic&&t.widgetsOn&&!t.renderedSegments&&this.config?.enableWidgetsRegion&&(et(K,e),K.sections?.forEach(t=>{"widgets"===t.region&&t.subSections?.length&&t.subSections[0].cards?.length&&t.subSections[0].cards.length>0&&t.subSections[0].cards.length<5&&(t.subSections[0].dataTemplate+="-"+t.subSections[0].cards.length,t.subSections[0].layoutTemplate+="-"+t.subSections[0].cards.length)}))}else{this.responseStatus=E.EY.NoContent;const n=e&&t.disableContent&&t.widgetsOn&&!N.T3.IsHeroNTP;if(t.widgetsOn&&(!t.renderedSegments||n)&&this.config?.enableWidgetsRegion&&et(K,e),!(0,A.S)())return K?.serviceContext?.emptyFeedReasons?.includes("InsufficientResponseCausedByMutePub")?K:void 0}return!this.config.auctionRidOverride||(0,v.EZ)()||(0,A.S)()||this.mapperHelper.backfill1SAdWithNews(K),K}async getCachedResponse(t){if(this.canUseWpoCache())try{const e=await caches.open("edgenext-river-V1");if(!e)return;const n=this.normalizeUrl(t.serviceUrl),s=await e.keys()||[],a=s.filter(t=>t.url&&this.normalizeUrl(t.url)===n);for(const t of a)try{const n=await e.match(t.url);if(!n)return;const s=await n.json();if(s){const t=Date.parse(n.headers?.get("date")),e=isNaN(t)?"":(Date.now()-t)/1e3;return(0,i.vV)(r.O7A,"Cached WPO response returned in main thread",void 0,{...r.O7A.pb,cacheAgeSeconds:e}),this.responseStatus=E.EY.Success,(0,o.ZF)().responseSource=E.Py.FromCache,{...s,responseSource:E.Py.FromCache,appError:r.O7A}}}catch(t){}(0,i.vV)(r.sWn,"",void 0,{...r.sWn.pb,numCachedRequests:s.length,numMatches:a.length,serviceUrl:t.serviceUrl})}catch(e){(0,i.vV)(r.sWn,"An error occurred while retrieving a cached response. "+e.message,void 0,{...r.sWn.pb,isFirstPage:!t.nextPageUrl,url:t.serviceUrl,requestId:t.requestId,stack:e.stack})}}normalizeUrl(t){try{const e=new URL(t);Ut.forEach(t=>e.searchParams.delete(t));return decodeURIComponent(e.toString()).replace("/serviceak/","/service/").replace("api.msn.com/","assets.msn.com/").replace("api.msn.cn/","assets.msn.cn/")}catch(t){return""}}clearCache(){this.mapperHelper.resetCardCountForSuperFeed()}static clearRenderedSegments(){qt.renderedSegments=""}initializeRequest(){const{initialRequest:t}=this.config;null!==t&&(0,Pt.isNullOrUndefined)(t.useNextPageUrl)&&(t.useNextPageUrl=!0)}addOrUpdateIdxId(t,e){return c.YT.addOrUpdateIdxId(t,e)}getResponseStatus(){return this.responseStatus}getIsStatic(){return this.isStatic}_requestQueryParams(){return this.requestQueryParams}isDhp(){return window.location.search?.indexOf("startpage=1")>-1}noContentCannotRetry(){return this.noContentRetryCount>=this.maxContentRetryCount}static updateRenderedSegments(t){t&&(qt.renderedSegments=new URL(t).searchParams.get("renderedSegments"))}updateMapperHelperIsNTPPeek(t){this.mapperHelper.updateAdRegionToPeek(t)}getWpoIdResponseIndex(){return this.mapperHelper.wpoIdResponseIndex}addResponseToCache(t,e){this.canUseWpoCache()&&caches.open("edgenext-river-V1").then(n=>{if(!n)return;const i=this.normalizeUrl(t);n.put(i,e.clone())}).catch(()=>{})}canUseWpoCache(){return(0,A.S)()&&!!(0,x.Cw)()}}qt.preloadedResponsesKey=Symbol("preloadedResponses"),qt.renderedSegmentsKey=Symbol("renderedSegments"),qt.fetchingLockKey=Symbol("fetchingLock"),qt.isPrerenderDsiabledKey=Symbol("isPrerenderDsiabled");const Gt=t=>t?.headers?.get("X-Statics-Fallback")},44449:function(t,e,n){n.d(e,{TA:function(){return d},sx:function(){return u}});var i=n(93468),r=n(98216);function o(t){return!(!/^.*{\s*return __awaiter/.test(String(t))&&!/^\([\w_$,\s]*?\) => __awaiter/.test(String(t)))||"AsyncFunction"===t?.constructor?.name}function s(t,e,n,s,a,c){if(r.YT.sendAppErrorEvent((0,i.$5)(e,n||"",function(t,e){return`args: ${JSON.stringify(t)||""}\nerror: ${e?.stack||e?.message||""}`}(s,a))),!c)return;const u=c(...s,a);return o(t)?Promise.resolve(u):u}function a(t,e,n,i,r,a){try{return o(t)?t.call(this,...i).catch(o=>s(t,e,n,i,o,r)).finally(()=>{a?.(...i)}):t.call(this,...i)}catch(o){return s(t,e,n,i,o,r)}finally{o(t)||a?.(...i)}}function c(t,e){const n=Object.getOwnPropertyDescriptor(t.prototype,e);return n||{configurable:!0,enumerable:!0,writable:!0,value:t.prototype[e]}}const u=(t,e,n,i)=>(r,o,s)=>{const c=s?.value;if("function"==typeof r)return function(...o){return a.call(this,r,t,e,o,n,i)};if("function"!=typeof c)return s;if(!t)throw Error("Parameter baseError is missed");return s&&(s.value=function(...r){return a.call(this,c,t,e,r,n,i)}),s},d=(t,e,n,i)=>r=>{class o extends r{connectedCallback(){super.connectedCallback()}}const s={...Object.getOwnPropertyDescriptors(r.prototype),...Object.getOwnPropertyDescriptors(o.prototype)};for(const r in s){if("constructor"===r||!s[r]?.value)continue;if(!(o.prototype[r]instanceof Function))continue;const u=c(o,r),d=u.value;u.value=function(...r){return a.call(this,d,t,e,r,n,i)},Object.defineProperty(o.prototype,r,u)}return o}},44944:function(t,e,n){n.d(e,{G:function(){return ue},t:function(){return de}});var i=n(91532),r=n(83003),o=n(15098);const{TopicFeedCard:s,articleFreCard:a,autosCarouselCard:c,bingDailyQuizCard:u,bingVideoCarousel:d,boostAdCard:l,cashbackCarouselCard:h,casualGamesCard:f,casualGamesCarouselCard:p,casualGamesProng2CarouselCard:g,casualGamesStripeCarouselCard:m,channelFilterCard:w,comicsCarouselCard:y,communityCard:v,commuteCard:b,contentCard:S,contentGroupCard:C,creatorSpotlightCard:k,dailyBriefCard:T,dailyFixGamesCarouselCard:x,dailyGreetingCard:A,dailyMomentsCard:$,dailyWonderCard:I,dailyWonderCopilotCard:P,dailyWonderHeroVideo:R,dailyWonderQuoteCard:M,dailyWonderVideoListCard:_,denseCard:E,digestCard:F,displayAdCard:D,donationNpoCard:O,editorsPickCarouselCard:N,electionCard:L,electionsCard:B,entertainmentPremierCard:U,esportsCard:W,followingFREInlineCard:V,gamingRecentlyPlayedCard:H,gemGreetingCard:z,healthCard:j,healthFitnessCard:q,healthRiverCard:G,healthTipCard:J,horoscopeAnswerCard:Q,infopaneCard:K,interestManagementCard:X,localNewsCarCard:Y,mangaCard:Z,mangaCarousel:tt,marketplaceCard:et,mobileTrendingSearchCard:nt,momentInTimeHero:it,moneyCard:rt,moneyInfoCardWC:ot,moneyTopicStripeCarouselCard:st,nativeAdCard:at,nativeTopAdCard:ct,onThisDayCard:ut,placeholderCard:dt,pollsCard:lt,prismCard:ht,prismCarouselCard:ft,profileCarouselCard:pt,promotedAdCard:gt,publisherListCard:mt,qnaCard:wt,quizCard:yt,realEstateCard:vt,recipesCard:bt,recommendedInterestsCard:St,relatedNewsCard:Ct,rewardsCard:kt,richCalendarCard:Tt,sectionHeaderCard:xt,selectCarouselCard:At,serendipityCard:$t,sharedHeroNewsCard:It,shoppingBannerSdCard:Pt,shoppingBuyingGuidePremiumCard:Rt,shoppingCard:Mt,shoppingCarouselCard:_t,shoppingCarouselProngWC:Et,shoppingEventsDealCard:Ft,shoppingFashionCarouselWC:Dt,shoppingRiverCard:Ot,shoppingSdCard:Nt,shoppingTopSectionCard:Lt,shoppingVideoCarouselCard:Bt,shortsGrouping:Ut,sportsCard:Wt,sportsOlympicCard:Vt,sportsTopicStripeCarouselCard:Ht,spotlightCard:zt,tabbedInfopaneCard:jt,topCommentsCard:qt,topPicksCard:Gt,topStoriesCard:Jt,trafficCard:Qt,trafficHero:Kt,travelDestinationCard:Xt,travelDestinationCarouselCard:Yt,trendingNowCard:Zt,trendingSearchCard:te,videoGrouping:ee,weatherCard:ne,weatherHeroExperience:ie,weatherHeroExperienceCarouselCard:re,webContentCard:oe,widgetPlaceholderCard:se,widgetsNotificationsCard:ae,winAppCard:ce}=i.C,ue={[r.pL.DailyMomentsCard]:$,[r.pL.DailyMomentsCard1]:it,[r.pL.DailyMomentsCard2]:it,[r.pL.DailyMomentsCard3]:it,[r.pL.DailyWonderCard]:I,[r.pL.NewsDailyWonderCard]:I,[r.pL.DailyWonderCopilotCard]:P,[r.pL.DailyWonderHeroVideo]:R,[r.pL.DailyWonderQuoteCard]:M,[r.pL.DailyWonderVideoListCard]:_,[r.pL.ShoppingBannerSdCard]:Pt,[r.pL.DailyBriefCard]:T,[r.pL.DailyGreetingCard]:A,[r.pL.WidgetsNotificationsCard]:ae,[r.pL.NotificationCard]:ae,[r.pL.DonationNpoCard]:O,[r.pL.EntertainmentPremierCard]:U,[r.pL.EventSDCardOscarsPrm]:U,[r.pL.BingDailyQuizCard]:u,[r.pL.EventSDCardElectionMIT1]:L,[r.pL.EventSDCardElectionMIT2]:L,[r.pL.EventSDCardElectionMIT3]:L,[r.pL.RichCalendarCard]:Tt,[r.pL.CommunityCard]:v,[r.pL.TabbedInfopaneCard]:jt,[r.pL.MangaCard]:Z,[r.pL.MangaCarousel]:tt,[r.pL.RealEstateCard]:vt,[r.pL.RealEstateCarousel]:vt,[r.pL.PrismCarouselCard]:ft,[r.pL.TrendingSearchCard]:te,[r.pL.CommuteCard]:b,[r.pL.DigestCard]:F,[r.pL.RelatedNewsCard]:Ct,[r.pL.CopilotCard]:zt,[r.pL.CreatorSpotlight]:k,[r.pL.NewsCreatorSpotlight]:k,[r.pL.Article]:S,[r.pL.Slideshow]:S,[r.pL.Video]:S,[r.pL.Infopane]:K,[r.pL.GroupedContent]:C,[r.pL.UserInterestTopic]:C,[r.pL.UserInterestNTPProvider]:C,[r.pL.LittleKnownFactsCard]:C,[r.pL.NewsLittleKnownFactsCard]:C,[r.pL.UserInterestTopicAndProvider]:V,[r.pL.ColdStartArticleFreCard]:a,[r.pL.HalfPane]:null,[r.pL.HeadToHead]:null,[r.pL.Mosaic]:null,[r.pL.Triptych]:null,[r.pL.DenseList]:null,[r.pL.WebContent]:oe,[r.pL.ExternalLink]:null,[r.pL.TabbedInfopane]:null,[r.pL.TabbedInfopaneTab]:null,[r.pL.PlaceholderCard]:dt,[r.pL.BingHealthCovid19StatsCard]:j,[r.pL.BingHealthFitnessCard]:q,[r.pL.HealthTipCard]:J,[r.pL.HealthRiverCard]:G,[r.pL.AutosCarousel]:c,[r.pL.BingVideoCarousel]:d,[r.pL.CashbackAds]:h,[r.pL.CasualGamesCarouselSubItem]:f,[r.pL.CasualGamesCarousel]:p,[r.pL.CasualGamesProng2Carousel]:g,[r.pL.CasualGamesStripeCarousel]:m,[r.pL.ChannelFilterCard]:w,[r.pL.DynamicFilteredChannel]:w,[r.pL.WatchVideoCard]:W,[r.pL.EsportsCasualGames]:f,[r.pL.EsportsCasualGamesMiniWidget]:f,[r.pL.GamingRecentlyPlayed]:H,[r.pL.StockQuote]:rt,[r.pL.MoneyInfo]:ot,[r.pL.FinanceSpotlightHeroPrice]:ot,[r.pL.FinanceSpotlightHeroMarket]:ot,[r.pL.FinanceSpotlightHeroRadarGraph]:ot,[r.pL.FinanceHeroMarket]:ot,[r.pL.FinanceHeroMarketChart]:ot,[r.pL.FinanceHeroNews]:It,[r.pL.FinanceHeroMovers]:ot,[r.pL.FinanceHerowlsummary]:ot,[r.pL.FinanceHeroSuggested]:ot,[r.pL.FinanceHeroWatchlistIdeas]:ot,[r.pL.FinanceHeroUpcomingEarnings]:ot,[r.pL.FinanceHeroCurrencies]:ot,[r.pL.FinanceHeroCrypto]:ot,[r.pL.MoneyTopicStripe]:st,[r.pL.WeatherHero]:re,[r.pL.WeatherCurrent]:ie,[r.pL.WeatherForecast]:ie,[r.pL.WeatherMap]:ie,[r.pL.SportsTopicStripe]:Ht,[r.pL.MoneyPreWL]:ot,[r.pL.MoneyCrypto]:ot,[r.pL.MoneyMarketBrief]:ot,[r.pL.MoneyMoreForYouCard]:ot,[r.pL.SportsMatch]:Wt,[r.pL.SportsOlympics]:Vt,[r.pL.SportsHeroFre]:Wt,[r.pL.SportsHeroLeagueTodaysEvents]:Wt,[r.pL.SportsHeroMatch1SeasonStats]:Wt,[r.pL.SportsHeroMatch1Stats]:Wt,[r.pL.SportsHeroMatch2SeasonStats]:Wt,[r.pL.SportsHeroMatch2Stats]:Wt,[r.pL.SportsHeroMatch3SeasonStats]:Wt,[r.pL.SportsHeroMatch3Stats]:Wt,[r.pL.SportsHeroMatchStatistics]:Wt,[r.pL.SportsSpotlight2Match1]:Wt,[r.pL.SportsSpotlight2Match2]:Wt,[r.pL.SportsHeroNews]:It,[r.pL.SportsHeroOneVsManyEventResult]:Wt,[r.pL.SportsHeroOneVsOneEventResult]:Wt,[r.pL.SportsHeroSeasonStatistics]:Wt,[r.pL.SportsHeroStandingsRankings]:Wt,[r.pL.SportsHeroTeamStandings]:Wt,[r.pL.SportsHeroTeamStandingWithEvents]:Wt,[r.pL.SportsHeroTeamStandingWithMedals]:Wt,[r.pL.SportsHeroMatchCard]:Wt,[r.pL.SportsHeroTeamVsTeam]:Wt,[r.pL.SportsHeroTeamVsTeamEventResult]:Wt,[r.pL.SportsHeroVideo]:Wt,[r.pL.EventSDCardSportsMIT1]:Wt,[r.pL.EventSDCardSportsMIT2]:Wt,[r.pL.EventSDCardSportsMIT3]:Wt,[r.pL.MyBriefRiverCard]:Gt,[r.pL.TrafficDelays]:Qt,[r.pL.TrafficInfo]:Qt,[r.pL.Transit]:Qt,[r.pL.TrafficIncidents]:Kt,[r.pL.TrafficCameras]:Kt,[r.pL.TrafficCamerasWithSummary]:Kt,[r.pL.TravelTimes]:Kt,[r.pL.TravelTimesWithSummary]:Kt,[r.pL.TrafficMap]:Kt,[r.pL.TrafficNews]:Kt,[r.pL.TrafficTransit]:Kt,[r.pL.TrafficSummary]:Kt,[r.pL.WeatherSummary]:ne,[r.pL.ShoppingCard]:Nt,[r.pL.EdgeShoppingCard]:_t,[r.pL.ShoppingCarousel]:_t,[r.pL.ShoppingCarousel2]:_t,[r.pL.Shopping1688Carousel]:_t,[r.pL.ShoppingVideoCarousel]:Bt,[r.pL.ShoppingRiver]:Ot,[r.pL.ShoppingRiver1]:Ot,[r.pL.ShoppingRiver2]:Ot,[r.pL.ShoppingRiver3]:Ot,[r.pL.ShoppingTopSectionCard]:Lt,[r.pL.EventSDCardShopping]:Ft,[r.pL.ComicsCarousel]:y,[r.pL.SelectCarousel]:At,[r.pL.EditorsPickCarousel]:N,[r.pL.DailyFixGamesCarousel]:x,[r.pL.SageGroupedFeed]:F,[r.pL.TopicFeed]:s,[r.pL.NewsWatchShorts]:s,[r.pL.NewsWatchVideo]:s,[r.pL.WatchNewsShorts]:s,[r.pL.ShoppingProng2c]:Rt,[r.pL.ShoppingMerchantCategoryDeals]:Mt,[r.pL.ShoppingProngCardResponse]:Et,[r.pL.ShoppingProngTracking]:Et,[r.pL.ShoppingProngCarousel]:Dt,[r.pL.SectionHeader]:xt,[r.pL.TrendingInTenMinutes]:Zt,[r.pL.TopicFeedTrendingNow]:Zt,[r.pL.TopicFeedTopStories]:Zt,[r.pL.TopStories]:Jt,[r.pL.WorkHeadlines]:Jt,[r.pL.Trending]:$t,[r.pL.Horoscope]:Q,[r.pL.Elections]:B,[r.pL.RecommendedInterests]:St,[r.pL.MobileTrendingSearchCard]:nt,[r.pL.OnThisDay]:ut,[r.pL.Dense]:E,[r.pL.Qna]:wt,[r.pL.quizcard]:yt,[r.pL.Recipes]:bt,[r.pL.Inspiration]:ht,[r.pL.InterestManagementCard]:X,[r.pL.GemGreeting]:z,[r.pL.Rewards]:kt,[r.pL.TravelDestinationCard]:Xt,[r.pL.TravelDestinationCarouselCard]:Yt,[r.pL.LocalNewsFeed]:Y,[r.pL.BeaconProviderUpsell]:pt,[r.pL.Marketplace]:et,[r.pL.MarketplaceEvent]:et,[r.pL.PollsCard]:lt,[r.pL.PromotedAd]:gt,[r.pL.TopicFeedDiversity]:F,[r.pL.TopicFeedLearnSomethingNew]:F,[r.pL.TopicFeedWeekends]:F,[r.pL.TopicFeedMomentInTime1]:zt,[r.pL.TopicFeedShopping]:zt,[r.pL.TopicFeedWeather]:zt,[r.pL.WinAppAds]:ce,[r.pL.MiTHeroContent]:it,[r.pL.MiTHeroFollow]:C,[r.pL.MiTHeroAction]:it,[r.pL.MiTHeroSpotlight]:it,[r.pL.NativeAd]:at,[r.pL.CmsAd]:at,[r.pL.FirstPartyAd]:at,[r.pL.AmplifyAd]:at,[r.pL.EventSDCardAmplifyAds]:at,[r.pL.NativeTopAd]:ct,[r.pL.BoostAd]:l,[r.pL.Promotion]:h,[r.pL.DisplayAdBanner]:D,[r.pL.DisplayAdCard]:D,[r.pL.DisplayAd]:D,[r.pL.Calendar]:se,[r.pL.Entertainment]:se,[r.pL.Family]:se,[r.pL.M365]:se,[r.pL.Photos]:se,[r.pL.ThirdPartyWidget]:se,[r.pL.Tips]:se,[r.pL.ToDo]:se,[r.pL.XboxGamePass]:se,[r.pL.Tombstone]:se,[r.pL.UserInterestProvider]:mt,[r.pL.TopCommentsCard]:qt,[r.pL.OnThisDaySDCard]:zt,[r.pL.DailyQuizSdCard]:zt,[r.pL.LocalEventsSDCard]:zt,[r.pL.PublisherSpotlightCard]:zt,[r.pL.FollowedPublishersCard]:zt,[r.pL.WatchVideoHeavy]:ee,[r.pL.WatchGoldShorts]:Ut},de=(0,o.L)(()=>{const t=new le;for(const[e,n]of Object.entries(ue))t.set(e,n);return t});class le extends Map{set(t,e){return super.set(t.toLowerCase(),e)}get(t){return super.get(t.toLowerCase())}}},45084:function(t,e,n){n.d(e,{$s:function(){return u},JP:function(){return i},PZ:function(){return h},bf:function(){return f},eO:function(){return l},ey:function(){return r},qy:function(){return o},rQ:function(){return p},ux:function(){return c},vI:function(){return d}});const i=["HotelAd"],r={img:{required:1,img:{type:3}},title:{required:1,title:{len:100}},providerName:{required:1,data:{type:1}},logo:{required:0,img:{w:16,h:16,type:1}},disclaimer:{required:0,data:{type:513}}};var o;!function(t){t.PopupDisclaimer="popupDisclaimer",t.ReviewRatingItem="reviewRatingItem",t.WorkingHoursItem="workingHoursItem",t.Callout="callout"}(o||(o={}));const s={price:{required:0,data:{type:6}},city:{required:0,data:{type:9}},review:{required:0,data:{type:510}},disclaimer:{required:0,data:{type:513}},[o.Callout]:{required:0,data:{type:517}},workingHours:{required:0,data:{type:536}},[o.ReviewRatingItem]:{required:0,data:{type:556}},[o.WorkingHoursItem]:{required:0,data:{type:557}}},a={[o.PopupDisclaimer]:{required:0,data:{type:555}}},c={...r,...s,callToAction:{required:0,data:{type:12,len:15}},advertiserLogo:{required:0,img:{type:501,w:16,h:16}},cashback:{required:0,data:{type:516}},...a},u={city:"location.svg",destinationCity:"location.svg",serviceArea:"location.svg",fuelEfficiency:"gas-pump.svg",fuelType:"gas-can.svg",transmission:"transmission.svg",co2Emissions:"cloud.svg",interiorColor:"paint-bucket.svg",exteriorColor:"paint-bucket.svg",range:"battery.svg",trim:"vehicle-car-front.svg",bodyStyle:"vehicle-car-side.svg",autoCondition:"vehicle-car-side.svg",condition:"vehicle-car-side.svg",dealer:"building.svg",duration:"clock.svg",itineraryDays:"clock.svg",workingHours:"clock.svg",departureDestinationPort:"vehicle-ship.svg",debitCardMontlyServiceFee:"wallet-credit-card.svg",annualFee:"wallet-credit-card.svg",price:"money.svg",cardCategory:"money.svg",mileage:"odometer.svg",dealerName:"building.svg",year:"calendar.svg",debitCardCategory:"payment.svg",callout:"megaphone.svg",yearsOfExp:"person-star.svg",services:"briefcase.svg",languages:"local-language.svg",specialties:"ribbon-star.svg",category:"book.svg",serviceSubCategories:"book.svg",port:"vehicle-ship.svg",inclusion:"add-square.svg",toursActivityCategory:"ticket.svg",doctorClinicCategory:"doctor.svg"},d={price:t=>t.split(".")[0],review:t=>{const e=parseInt(t,10);if(e>=1e3){const t=["","k","M","B","T"],n=Math.floor(Math.log10(e)/3);return(e/Math.pow(1e3,n)).toFixed(1)+t[n]}return t.toString()}},l={providerName:"data-1",description:"data-2",rating:"data-3",likes:"data-4",price:"data-6",salePrice:"data-7",city:"data-9",callToAction:"data-12",installmentPrice:"data-500",priceDrop:"data-501",freeShipping:"data-502",viewed:"data-503",sold:"data-504",specialOffer:"data-505",eliteBadge:"data-506",condition:"data-507",localInventory:"data-508",curbsidePickup:"data-509",review:"data-510",shortTitle:"data-511",returnPolicy:"data-512",disclaimer:"data-513",cashback:"data-516",callout:"data-517",fuelEfficiency:"data-518",co2Emissions:"data-519",mileage:"data-520",bodyStyle:"data-521",dealerName:"data-522",fuelType:"data-523",interiorColor:"data-524",trim:"data-525",year:"data-526",exteriorColor:"data-527",transmission:"data-528",range:"data-529",autoCondition:"data-530",yearsOfExp:"data-533",services:"data-534",languages:"data-535",workingHours:"data-536",workingHoursStatus:"data-537",workingHoursIsOpen:"data-538",serviceArea:"data-539",serviceSubCategories:"data-540",specialties:"data-541",category:"data-542",port:"data-543",inclusion:"data-544",departureDestinationPort:"data-545",itineraryDays:"data-546",toursActivityCategory:"data-547",destinationCity:"data-548",duration:"data-549",cardCategory:"data-550",annualFee:"data-551",debitCardCategory:"data-552",debitCardMontlyServiceFee:"data-553",doctorClinicCategory:"data-554",popupDisclaimer:"data-555",reviewRatingItem:"data-556",workingHoursItem:"data-557",discount:"data-600",title:"data-601",logo:"image-1",img:"image-3",transparentImage:"image-500",advertiserLogo:"image-501"},h={font:"p1",shipping:"p2",ratings:"p3"},f=["specialOffer"],p=[l.disclaimer]},45181:function(t,e,n){n.d(e,{Y:function(){return i},n:function(){return u}});var i,r=n(16091),o=n(17720),s=n(79742),a=n(38467);!function(t){t[t.Initialized=1]="Initialized",t[t.CookieConsentProvider=2]="CookieConsentProvider",t[t.CookieConsentStatus=3]="CookieConsentStatus",t[t.ActiveCookieCategories=4]="ActiveCookieCategories"}(i||(i={}));const c=Symbol("cookieManagementState"),u=(0,r.G)({getInstance:()=>o.vv.get(c,()=>{const t=new a.E("CookieManagementStateKey");return t.set(i.Initialized,!1),t.set(i.CookieConsentStatus,s.z.Unknown),t})})},45494:function(t,e,n){var i;n.d(e,{f:function(){return i}}),function(t){t.C0001="C0001",t.C0002="C0002",t.C0003="C0003",t.C0004="C0004"}(i||(i={}))},45933:function(t,e,n){n.d(e,{P:function(){return o}});var i=n(77246),r=n(27261);const o=(0,n(18284).A)(()=>{if((0,i.S)()){const t=(0,r.iA)();if(t.includes("item=tvux:1"))return 4;if(t.includes("reqsrc=vp"))return t.includes("item=tvwp:1")?2:3;{const e=t.match(/item=tv:(\d+)/)?.[1];if(e)return parseInt(e)}}return 0})},46117:function(t,e,n){n.d(e,{I6:function(){return i},Ii:function(){return o},ri:function(){return r}});const i="MSCC",r="MUID",o="eupubconsent-v2"},46140:function(t,e,n){n.d(e,{uC:function(){return b}});var i=n(65022),r=n(93468),o=n(33107),s=n(38290),a=n(20205),c=n(22360),u=n(17268),d=n(82238),l=n(40371),h=n(35849),f=n(18284),p=n(68275),g=n(77246),m=n(17720);const w="WebComponentLoader.SkippedExperience",y="WebComponentLoader.LoadedExperience",v="WebComponentLoader.ModuleLoadPromiseMap",b=(0,g.S)()?(0,f.A)(C,t=>(0,c.Dw)(t.configRef)):C,S=()=>m.vv.get(y,()=>[]);async function C(t){try{const{configRef:e,configRef:{experienceType:i}}=t;if(m.vv.get(w,()=>new Set).has(i))return;const r=(0,d.WO)(i);r&&r.shouldResolve&&await r.shouldResolve();const a=(0,o.S9)(i,t.instanceId);if((0,g.S)()||S().push(t),window.customElements.get((0,l.lKb)(i)))return void await k(e,a);const c=k(e,a),u=function(t,e){const n=m.vv.get(v,()=>({}));let i=n[t];if(i)return i;return i=(0,o.m0)(()=>s.L.loadExperience(t),"scripts",e),n[t]=i,i}(i,a),h=(await Promise.all([c,u]))[1];await async function(t,e){const i=e[t],r=e[t+"Template"];let o=e[t+"Styles"];if(!(0,g.S)()){const n=e[t+"SSRStyles"];o=n||o}const s=(0,l.lKb)(t),a=(0,p.a)(t),c=await Promise.resolve().then(n.bind(n,23837));if(c.FASTElement.define(i,{name:s,template:r,styles:o,...i.definition}),a){class t extends i{}c.FASTElement.define(t,{name:a,template:r,styles:o,...i.definition})}}(i,h)}catch(e){const n={...i.crR};(0,r.c_)(e,n,"Loading web component experience failed.",void 0,{configInfo:t})}}async function k(t,e){const n=await(0,o.m0)(()=>a.L.getConfig(t),"config",e);if(!n)return;const i=n.properties;if(!i||!i.dataConnectors||i.dataConnectors.length<=0)return;const r=e&&e.startMeasure("loadDataConnectors").endMeasure,s=u.L.getChildrenDataConnectorConfigInfos(i).map(t=>(0,h.wv)(t));await Promise.all(s),r&&r()}},46534:function(t,e,n){n.d(e,{Hl:function(){return u},L$:function(){return r},M7:function(){return i},X1:function(){return s},fB:function(){return o},ii:function(){return a}});var i,r,o,s,a,c=n(40735);!function(t){t.Above="Above",t.Below="Below",t.Left="Left",t.Right="Right"}(i||(i={})),function(t){t.TopStart="TopStart",t.TopEnd="TopEnd",t.TopCenter="TopCenter",t.BottomStart="BottomStart",t.BottomEnd="BottomEnd",t.BottomCenter="BottomCenter"}(r||(r={})),function(t){t.Mini="Mini",t.Small="Small",t.Medium="Medium",t.Large="Large"}(o||(o={})),function(t){t.Adjacent="Adjacent",t.Center="Center",t.Opposite="Opposite"}(s||(s={})),function(t){t.Outside="Outside",t.Target="Target",t.OutsideAndTarget="OutsideAndTarget"}(a||(a={}));class u extends c.u{get IsValid(){return!!this.size}get surfaceType(){return"Coachmark"}}},47149:function(t,e,n){n.d(e,{$:function(){return o}});var i=n(29231),r=n(29582);class o{constructor(t,e,n){this.contract=t}static render(t){const e=r.W.compress(t);return{[i.i]:JSON.stringify(e)}}addChild(t){return new o(t,this)}addOrUpdateChild(t,e){return e?(e.contract=t,e):new o(t,this)}updateContract(t){this.contract=t}render(t){return o.render(this.contract)}getMetadataTag(){return JSON.stringify(this.getMetadata())}getMetadata(){return r.W.compress(this.contract)}}},47554:function(t,e,n){n.d(e,{C:function(){return s}});var i=n(30817),r=n(20431),o=n(89902);function s(t={}){const e={...(0,i.ZF)(),...(0,i.zq)()},n=[],o={WW:{pid:0},Resolver:{pid:1},Ads:{pid:2},Telemetry:{pid:3},"Content Preview":{pid:4},Images:{pid:5},JS:{pid:6},Statics:{pid:7},Configs:{pid:8},Services:{pid:9},nextPID:{pid:20}},s=100;!function(t,e,n){const i=[{name:"Ads",regex:/(\/srtb\.|taboola|outbrain)/i},{name:"Telemetry",regex:/(otf\.|\/c\.gif)/i},{name:"Content Preview",regex:/\/content\/view\/v[0-9]\/Preview\//i},{name:"Images",regex:/(img-s-msn-com|\.svg)/i},{name:"JS",regex:/\.js/i},{name:"Statics",regex:/statics/i},{name:"Configs",regex:/\/config/i},{name:"Services",regex:/(\/service\/|api|\/getappanoncookie|content|microsoftonline)/i}];let r=performance.getEntriesByType("resource").filter(e=>{const{duration:n,startTime:i}=e;return p(t,i,i+n)});i.forEach(t=>{h(t.name,n);const i=[];r.filter(e=>{const n=e.name.match(t.regex);return n||i.push(e),n}).forEach((n,i)=>{const r=new URL(n.name),o=r.pathname.length>1?r.pathname:r.hostname;e.push({async:!0,timelineName:t.name,coreName:o,idSuffix:`-${i}`,from:n.startTime,to:n.startTime+n.duration})}),r=i})}(t,n,o),function(t,e,n,i){n.forEach(n=>{const{async:r,timelineName:o}=n;r&&h(o,i),p(t,n.from,n.to)&&e.push(n)})}(t,n,(0,r.Is)(),o),l(t,n,e,o,/^WW\./,"WW");const g={...window._appTimings||{}};l(t,n,g,o,/.*/);const m=[];m.push(c(t,"Global","NavStart",s,0,"g")),Object.keys(e).filter(n=>n.match(/TT/)&&p(t,e[n])).sort((t,n)=>e[t]-e[n]).forEach(n=>m.push(c(t,"Global",n,s,e[n],"g"))),Object.keys(e).filter(n=>n.match(/^WW\./i)&&p(t,e[n])).sort((t,n)=>e[t]-e[n]).forEach(n=>m.push(c(t,"WW",n,o.WW.pid,e[n],"p"))),m.push(a("process_name",s,{name:"Main"})),m.push(a("process_sort_index",s,{sort_index:s}));const{uploadTrace:w}=t;return d(t,n,!0).forEach((e,n)=>{const{pid:i}=o[e.name];e.measures.forEach((e,r)=>{const{timelineName:o,coreName:s,idSuffix:a,from:c,to:d,customData:l}=e,h=("000"+r).substr(-3,3),f=s+a,p=w?function(t){const e=t.lastIndexOf("/");return e>=0?t.substr(e+1):t}(f):f,g=`${h}-${p}`;m.push(...function(t,e,n,i,r,o,s,a,c,d){return[u(t,e,n,d?"B":"b",i,r,s,{id:o}),u(t,e,n,d?"E":"e",i,r,a,{id:o,args:JSON.stringify(c)})]}(t,o,g,i,n,r,c,d,l))}),m.push(a("process_name",i,{name:e.name})),m.push(a("process_sort_index",i,{sort_index:i})),m.push(a("thread_name",i,{name:e.name},n)),m.push(a("thread_sort_index",i,{sort_index:n},n))}),d(t,n,!1).forEach((e,n)=>{const i=s;e.measures.forEach(e=>{const{timelineName:r,coreName:o,idSuffix:s,from:a,to:c,customData:d}=e,l=o+s;m.push(function(t,e,n,i,r,o,s,a){const c=f(s-o);return u(t,e,n,"X",i,r,o,{dur:c,args:JSON.stringify(a)})}(t,r,l,i,n,a,c,d))}),m.push(a("thread_name",i,{name:e.name},n)),m.push(a("thread_sort_index",i,{sort_index:n},n))}),m}function a(t,e,n,i){const r={name:t,ph:"M",pid:e,args:n};return null!=i&&(r.tid=i),r}function c(t,e,n,i,r,o){return u(t,e,n,"i",i,null,r,{s:o})}function u(t,e,n,i,r,o=null,s,a){const c={cat:e,name:n,ph:i,pid:r,tid:o,ts:f(s),...a};return null!=o&&(c.tid=o),c}function d(t,e,n){const i=(0,o.A)(e.filter(e=>!!e.async===n&&p(t,e.from,e.to)),t=>t.timelineName),r=[];let s=0;return Object.keys(i).forEach(t=>{const e=i[t].sort((t,e)=>t.from-e.from);s=Math.max(s,e[e.length-1].to),r.push({name:t,measures:e})}),r.sort((t,e)=>t.measures[0].from-e.measures[0].from)}function l(t,e,n,i,r,o){const s=/-?[Ss]tart$/,a={"-Start":"-End","-start":"-end",Start:"End",start:"end"},c=[];Object.keys(n).filter(t=>t.match(r)).forEach(r=>{const u=r.match(s);if(!u)return;let d=r.replace(s,"");const l=`${d}${a[u[0]]}`,h=u&&n[l];if(!h)return;c.push(r),c.push(l);let f=o;if(!f){const t=d.match(/(.+)\.(.+)/);if(!t)return;f=t[1],d=t[2]}const g=n[r];p(t,g,h)&&e.push({async:!!i[f],timelineName:f,coreName:d,idSuffix:"",from:g,to:h})});for(const t of c)delete n[t]}function h(t,e){if(!e[t])return e[t]={pid:e.nextPID.pid++},!0}function f(t){return Math.round(1e3*t)}function p(t,e,n){return!t.uploadTrace||!t.maxTime||(!e||e<=t.maxTime)&&(!n||n<=t.maxTime)}},48114:function(t,e,n){n.d(e,{F_:function(){return a},PQ:function(){return o},jA:function(){return s},nz:function(){return c}});var i=n(38467),r=n(13053);const o=new i.E("WidgetLoadTracker");function s(t){o.has(t)||("hidden"!==document.visibilityState?(0,r.D)(()=>o.set(t,!0)):o.set(t,!0))}const a=new i.E("WidgetAppState");var c;!function(t){t[t.IsDarkMode=1]="IsDarkMode",t[t.IsDashboardVisible=2]="IsDashboardVisible",t[t.ActionMenuStrings=3]="ActionMenuStrings",t[t.NonPeregrineWidgetTelemetryObject=4]="NonPeregrineWidgetTelemetryObject",t[t.FeedRegionWidgets=5]="FeedRegionWidgets",t[t.RecommendedWidgets=6]="RecommendedWidgets",t[t.DefaultPreviewType=7]="DefaultPreviewType",t[t.IsReauthRequired=8]="IsReauthRequired",t[t.IsWindowShown=9]="IsWindowShown",t[t.FeedRefreshPromise=10]="FeedRefreshPromise",t[t.Suspended=11]="Suspended",t[t.ClientLayoutVersion=12]="ClientLayoutVersion",t[t.IsLSCachedFeedUsed=13]="IsLSCachedFeedUsed",t[t.IsExpandedViewEnabled=14]="IsExpandedViewEnabled",t[t.DelayTtvrPromise=15]="DelayTtvrPromise",t[t.TaskbarLaunchState=16]="TaskbarLaunchState",t[t.IsPreferenceMigrationComplete=17]="IsPreferenceMigrationComplete",t[t.WidgetPinnedPreferences=18]="WidgetPinnedPreferences",t[t.IsFeedsShown=19]="IsFeedsShown",t[t.BoardsNavigationState=20]="BoardsNavigationState",t[t.DisablePinIcon=21]="DisablePinIcon",t[t.AllowedPeregrineWidgets=22]="AllowedPeregrineWidgets",t[t.DisableEarlyFetchWithNormalflow=23]="DisableEarlyFetchWithNormalflow",t[t.OverrideScrollOffset=24]="OverrideScrollOffset",t[t.Layout3InDiscover=25]="Layout3InDiscover",t[t.IsDMARegionAndEdgeNotDefault=26]="IsDMARegionAndEdgeNotDefault",t[t.TaskbarUpdateLaunchEventPromise=27]="TaskbarUpdateLaunchEventPromise",t[t.IsLinearFeed=28]="IsLinearFeed"}(c||(c={}))},48172:function(t,e,n){n.d(e,{f:function(){return g},r:function(){return p}});var i=n(16091),r=n(17720),o=n(65022),s=n(15507),a=n(79426),c=n(98216),u=n(77246),d=n(29307),l=n(6092);function h(t,e){return(t||[]).find(t=>t?.key===e)||null}function f(t,e){const{key:n,value:i,deleteKey:r=!1}=e;let o=t||[];if(r)o=o.filter(t=>t&&t?.key!==n);else{const t=o.findIndex(t=>t?.key===n);if(t>-1)o[t]={...o[t],value:i};else{const t={key:n,value:i};o.push(t)}}return o}class p extends s.M{constructor(){super("ntp.user_nurturing","key","value",{key:"default",value:"none"}),this._latestItems=[],this._initializeCachedItemsPromise=new a.e,this.disablePreferences="edgeChromium"!==(0,l.rA)().AppType}static getInstance(){return r.vv.get("__UserNurturingManager__",()=>new p)}async savePreferenceSetting(t,e,n=!1){if(this.disablePreferences)return!1;try{return await this._initializeCachedItems(),this._updateCachedItems({key:t,value:e,deleteKey:n}),await this._updatePersistedItems({key:t,value:e,deleteKey:n})}catch(e){const n="Failed to store user nurturing preference";return this.logAppError(o.NVY,n,`Key:${t}.Error:${e}`),!1}}async getPreferenceSetting(t,e){if(this.disablePreferences)return null;try{if(await this._initializeCachedItems(),e){const e=await this._getPersistedItemByKey(t);return this._updateCachedItems({key:t,value:e?.value,deleteKey:!1}),e}return this._getCachedItemByKey(t)}catch(e){const n=`Failed to find user preference key: ${t}`;return this.logAppError(o.r0p,n,e),null}}async getClonedPreferenceSetting(t,e){const n=await this.getPreferenceSetting(t,e);return(0,d.A)(n)}async _initializeCachedItems(){if(this._initializeCachedItemsPromise.wasSet())return this._initializeCachedItemsPromise.getResultAsync();try{this._items=await this.getPreferenceValueFromBrowser()||[],this.checkIfNurturingCampaignsExist(this._items,!0),this._latestItems=(0,d.A)(this._items)}catch(t){const e="Failed to initialize cached items for UserNurturingManager";this.logAppError(o.r0p,e,t)}this._initializeCachedItemsPromise.set(),this._listenToPreferenceChange()}_getCachedItemByKey(t){return h(this._items,t)}async _getPersistedItemByKey(t){return h(this._latestItems,t)}_updateCachedItems(t){this._items=f(this._items,t)}async _updatePersistedItems(t){const e=this._latestItems;return this.setAndSavePreferenceSetting(f(e,(0,d.A)(t)))}deleteKeyValueFromPSL(t){this.savePreferenceSetting(t,null,!0)}_listenToPreferenceChange(){(0,u.S)()&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onPrefsChanged.addListener(t=>{const e=(t||[]).find(t=>t?.key===this.prefSettingKey);e&&(this.checkIfNurturingCampaignsExist(e.value||[],!1),this._latestItems=(0,d.A)(e.value||[]))})}checkIfNurturingCampaignsExist(t,e){const n=t.find(t=>"nurturing_campaigns"===t?.key),i=n?"1":"0",r=n?.value?.trace_id||-1;e?c.YT.addOrUpdateTmplProperty("nf_usernurturing_init",`${i}_${r}`):c.YT.addOrUpdateTmplProperty("nf_usernurturing_changed_"+ +new Date,`${i}_${r}`)}}const g=(0,i.G)(p)},48309:function(t,e,n){var i,r,o;n.d(e,{$C:function(){return h},BS:function(){return g},DP:function(){return c},EM:function(){return y},I4:function(){return r},Km:function(){return d},MR:function(){return o},Y0:function(){return p},dZ:function(){return u},fu:function(){return w},hq:function(){return i},nT:function(){return f},of:function(){return a},pS:function(){return l},qs:function(){return s},qy:function(){return m},uu:function(){return v}}),function(t){t[t.BOOLEAN_AND_STRING_ENUM=0]="BOOLEAN_AND_STRING_ENUM",t[t.BOOLEAN=1]="BOOLEAN",t[t.STRING_ENUM=2]="STRING_ENUM"}(i||(i={})),function(t){t.redirect="redirect",t.bing="bing"}(r||(r={})),function(t){t[t.user=0]="user",t[t.wpoPrerenderTab=1]="wpoPrerenderTab",t[t.wpoVisibleTab=2]="wpoVisibleTab",t[t.adminPortalVisibleTab=3]="adminPortalVisibleTab",t[t.ntpVisibleTab=4]="ntpVisibleTab"}(o||(o={}));const s={enabledFeatures:"enabledFeatures",isAdblockerEnabled:"isAdblockerEnabled",IsDefaultSearchProviderLocked:"isInLockdownMode",isEducationEnvironment:"isEducationEnvironment",isInYandexRegions:"isInYandexRegions",isNewTabGreetingEnabled:"isNewTabGreetingEnabled",inPageSearchBoxType:"inPageSearchBoxType",profileCreationTime:"profileCreationTime",showFeedSwitcher:"showFeedSwitcher",isChromePrimaryBrowserAtFre:"isChromePrimaryBrowserAtFre",isEnrolledInProjectEqual:"isEnrolledInProjectEqual",isEdgeSignInAllowed:"isEdgeSignInAllowed",isShowMicrosoftRewardsEnabled:"isShowMicrosoftRewardsEnabled",maxQuickLinks:"maxQuickLinks",channel:"channel",apiVersion:"apiVersion"},a={hasImage:"has_image",resourceUrl:"resource_url",timestamp:"last_modified_time"},c={accountType:"account_type",accountId:"account_id",email:"email",firstName:"first_name",lastName:"last_name"};var u;!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CHROME=1]="CHROME",t[t.FIREFOX=2]="FIREFOX",t[t.IEXPLORER=4]="IEXPLORER",t[t.SAFARI=11]="SAFARI",t[t.EDGE=12]="EDGE",t[t.MSEDGE=13]="MSEDGE"}(u||(u={}));const d="quick_links_options",l={selected:94608e3,promoted:2592e3},h={STABLE:"",DEV:"dev",BETA:"beta",CANARY:"canary"},f="tscollapsed_to_off",p={promotionInfoIsNull:"0",isInEdgeExperience:"1",sameWithCurrentLayout:"2",feedsDisabledByAdmin:"3",isNotOneOfFromLayouts:"4",nurturingApiUnavailable:"5",isLayoutSelectedByUserWithinCoolDown:"6",layoutIsAlreadyApplied:"7",maxRetargetingThreshold:"8",isControlFlight:"9",isFREModalBackground:"10",noSavedWpoPromotionOptions:"11",isContentSelectedByUserWithinCoolDown:"12",canNotUseDom:"13",isNotOneOfFromFeeds:"14",isNotInPromotionV2:"15",userMuidMisMatch:"16",staleLayoutPromotion:"17",isFRE:"18",isENPCheckFailed:"19",isInEdgeNoAdsFlight:"20",widgetsRegionDisabled:"21"},g="00001",m="00002",w="00003",y="00004",v="01001"},48608:function(t,e,n){n.d(e,{A:function(){return u},Ki:function(){return d},Sb:function(){return c},ZW:function(){return a},_W:function(){return s},kh:function(){return o}});var i=n(74166),r=n(28828);const o="elt",s=()=>{const t=(0,i.Ux)(o,!0),e=t&&(0,r.B)(t),{access_token:n,account_type:s,login_hint:a,region_scope:c}=e||{};return(n||s||a||c)&&e},a=()=>{const t=s();if(t){if("MSA"===t.account_type)return"MSA";if("AAD"===t.account_type)return"AAD"}},c=()=>{const t=s();return t&&t.login_hint},u=()=>{const t=s();return t&&t.region_scope},d=()=>!!(0,i.Ux)(o)},48622:function(t,e,n){n.d(e,{d:function(){return C}});var i=n(88294),r=n(93468),o=n(65022),s=n(11917),a=n(69089),c=n(10307);class u extends Error{constructor(t){super(t)}}var d=n(6092),l=n(12870),h=n(19548),f=n(74195),p=n(94569),g=n(19993),m=n(74326),w=n(57759),y=n(98216),v=n(486),b=n(86948);class S{constructor(t){this.fetchImpl=t,this.userUpdateEndpoint="msn/user",this.pdpServiceEndpoint="graph/actions",this.locationsServiceEndPoint="v1/news/users/me/locations",this.userActionServiceEndPoint="news/users/me/actions",this.ocid="pdp-peregrine",this.ocidOverride=!0,this.marketQSPOverride=!1}getCommonParams(t,e,n=!1){return t?g.WR.getOneServiceParamsWithAuth(e??(0,d.rA)().UserId,this.ocid,!this.ocidOverride,null,!1,n):g.WR.getOneServiceParamsWithoutAuth(e??(0,d.rA)().UserId,this.ocid,!this.ocidOverride,null,!1,(0,v.wx)(),!1,n)}async getUserDefaultLocation(t){const e=await this.getRequestInit({method:"GET"}),n=(0,m.nI)(this.locationsServiceEndPoint);let i;[...g.WR.getCommonParams2(this.ocid,!this.ocidOverride),{key:"autodetect",value:t&&`${t}`}].forEach(t=>{t.value&&n.searchParams.set(t.key,t.value)});try{i=await(0,w.w)(async()=>{const t=await this.fetchImpl(n.href,e);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for actionType: getUserDefaultLocation}`;throw new Error(e)}return t},"getUserDefaultLocation")}catch(t){return i}return i}async addToFavoriteLocation(t,e){const n="Location",i="Follow",r=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:i,targetType:n,definitionName:e,degree:"FavoriteLocation",metaData:t})}),o=(0,m.nI)(this.pdpServiceEndpoint),s=2===await(0,b.XK)();let a;this.getCommonParams(s).forEach(t=>{t.value&&o.searchParams.set(t.key,t.value)});try{a=await(0,w.w)(async()=>{const t=await this.fetchImpl(o.href,r);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for actionType: ${i}, targetType: ${n}`;throw new Error(e)}return t.json()},"addToFavoriteLocation")}catch(t){return!1}return!0}async removeFavoriteLocation(t,e=!1){return await this.deleteFromPdp(s.y.Location,"definitionName",[t],void 0,void 0,void 0,void 0,void 0,e)}async removeLocation(t,e=!1){return await this.deleteFromPdp(s.y.Location,"definitionName",[t],void 0,void 0,void 0,void 0,void 0,e)}async updatePdpHomeLocation(t,e,n={},i,r=!1){const o=s.y.Location,a="Follow",c=await this.getRequestInit({method:"POST"},n,r);c.body=JSON.stringify({actionType:a,targetType:o,definitionName:e,degree:"DefaultLocation",metaData:t});const u=(0,m.nI)(this.pdpServiceEndpoint),d=2===await(0,b.XK)();return this.getCommonParams(d&&!r,i).forEach(t=>{t.value&&u.searchParams.set(t.key,t.value)}),await(0,w.w)(async()=>{const t=await this.fetchImpl(u.href,c);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for actionType: ${a}, targetType: ${o}`;throw new Error(e)}return t},"setPdpHomeLocation"),this.tryInvalidateBulkFetchedPdpTargetType(o),!0}async updateTrafficMyRoutes(t,e,n,r,o,a,c){const u=n.replace(/[^a-zA-Z0-9\-.,_]/g,""),d=s.y.Traffic,l="Follow",h=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:l,targetType:d,targetId:u,degree:t,definitionName:e,metadata:r,createdDateTime:a})},c),f=await this.getTrafficPdpUrl(null,null,o);try{await(0,w.w)(async()=>{const t=await this.fetchImpl(f.href,h);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for actionType: ${l}, targetType: ${d}`;throw new Error(e)}return t.json()},"updateTrafficMyRoutes");this.tryInvalidateBulkFetchedPdpTargetType(d)}catch(t){return i.v.logError(t.message),!1}return!0}async deleteTrafficMyRoutes(t,e,n){const i=await this.getRequestInit({method:"DELETE"}),r=await this.getTrafficPdpUrl(t,e,n);try{await(0,w.w)(async()=>{const t=await this.fetchImpl(r.href,i);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for actionType: Follow, targetType: ${s.y.Traffic}`;throw new Error(e)}return t},"deleteTrafficFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(s.y.Traffic)}catch(t){return!1}return!0}async getTrafficMyRoutes(t,e){const n=await this.getRequestInit({method:"GET"}),i=await this.getTrafficPdpUrl(t,null,e);try{const t=await(0,w.w)(async()=>{const t=await this.fetchImpl(i.href,n);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for actionType: Follow, targetType: ${s.y.Traffic}`;throw new Error(e)}return t},"getTrafficFromPdp"),e=(await t.json())?.value;return e}catch(t){return null}}async getTrafficPdpUrl(t,e,n,i="Follow",r){const o=(0,m.nI)(this.pdpServiceEndpoint),a=2===await(0,b.XK)(),c=(0,d.rA)().UserId,u=a?g.WR.getOneServiceParamsWithAuth(c,this.ocid,!this.ocidOverride):g.WR.getOneServiceParamsWithoutAuth(c,this.ocid,!this.ocidOverride);if(t||e){const n=`targetType eq '${s.y.Traffic}'`,a=t?`degree eq '${t}'`:"",c=e?`definitionName eq '${e}'`:"",u=r?`targetId eq '${r}'`:"";o.searchParams.set("$filter",`actionType eq '${i}' and (${n})${a?` and (${a})`:""}${c?` and (${c})`:""}${u?` and (${u})`:""}`)}return[...u,...n||[]].forEach(t=>{t.value&&o.searchParams.set(t.key,t.value)}),o}async addToWatchList(t,e=0,n={},i={}){const r=s.y.Finance,o="Follow",a=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:o,targetType:r,targetId:t,metadata:{securityType:e,tickerId:this.generateUUID(),...i}})},n),c=(0,m.nI)(this.pdpServiceEndpoint),u="zh-cn"!==(0,d.rA)().CurrentMarket,h=2===await(0,b.XK)(),f=(0,l.Th)().CurrentFlights?.split(",").filter(t=>t.includes("1s")).join(",")||"";let p;(h&&u?g.WR.getOneServiceParamsWithAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,f,!0):g.WR.getOneServiceParamsWithoutAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,f,!0)).forEach(t=>{t.value&&c.searchParams.set(t.key,t.value)});try{p=await(0,w.w)(async()=>{const t=await this.fetchImpl(c.href,a);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for actionType: ${o}, targetType: ${r}`;throw new Error(e)}return t.json()},"addToWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(r)}catch(t){return!1}return!0}async addListToWatchList(t,e={},n={}){const i=s.y.Finance,r="Follow",o=await this.getRequestInit({method:"POST",body:JSON.stringify(t.map(t=>({actionType:r,targetType:i,targetId:t.key,metadata:{securityType:t.value,tickerId:this.generateUUID(),...n}})))},e),a=(0,m.nI)(this.pdpServiceEndpoint),c="zh-cn"!==(0,d.rA)().CurrentMarket,u=2===await(0,b.XK)(),h=(0,l.Th)().CurrentFlights?.split(",").filter(t=>t.includes("1s")).join(",")||"";let f;(u&&c?g.WR.getOneServiceParamsWithAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,h,!0):g.WR.getOneServiceParamsWithoutAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,h,!0)).forEach(t=>{t.value&&a.searchParams.set(t.key,t.value)});try{f=await(0,w.w)(async()=>{const t=await this.fetchImpl(a.href,o);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for actionType: ${r}, targetType: ${i}`;throw new Error(e)}return t.json()},"addToWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(i)}catch(t){return!1}return!0}generateUUID(){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})}async sortWatchList(t,e={}){const n=s.y.Finance,i="Follow",r=(0,l.Th)().CurrentFlights?.split(",").filter(t=>t.includes("1s")).join(",")||"",o=[{key:"fdhead",value:r}],a=await C.readPdpWithTargetType(s.y.Finance,!0,200,e,!1,o),c=a&&a.value?.filter(t=>t.actionType===i&&t.targetId);if(!c||c.length<t.length)return!1;const u={};let h=t.length;c.forEach(e=>{let r=t.findIndex(t=>t===e.targetId);r<0&&(r=h,h++),u[e.targetId]=JSON.stringify({actionType:i,targetId:e.targetId,targetType:n,rank:r,metadata:e.metadata})});const f=await this.getRequestInit({method:"PUT",body:JSON.stringify(u)},e),p=(0,m.nI)(this.pdpServiceEndpoint);(2===await(0,b.XK)()?g.WR.getOneServiceParamsWithAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,r,!0):g.WR.getOneServiceParamsWithoutAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,r,!0)).forEach(t=>{t.value&&p.searchParams.set(t.key,t.value)});try{await(0,w.w)(async()=>{const t=await this.fetchImpl(p.href,f);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for actionType: ${i}, targetType: ${n}`;throw new Error(e)}return t.json()},"sortWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(s.y.Finance)}catch(t){return!1}return!0}async updateWeatherInterests(t,e,n={},r){const o=s.y.Weather,a=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:"Follow",targetType:o,targetId:t,metadata:e})},n),c=(0,m.nI)(this.pdpServiceEndpoint),u=2===await(0,b.XK)();this.getCommonParams(u,r).forEach(t=>{t.value&&c.searchParams.set(t.key,t.value)});try{const t=await this.fetchImpl(c.href,a);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for update weather interests call`;throw new Error(e)}}catch(t){return i.v.logError(t.message),!1}return!0}async getWeatherInterest(t={},e="",n){const i=await this.getRequestInit({method:"GET"},t),r=this.getWeatherInterestUrl(null,e),o=2===await(0,b.XK)();this.getCommonParams(o,n).forEach(t=>{t.value&&r.searchParams.set(t.key,t.value)});try{const t=await(0,w.w)(async()=>{const t=await this.fetchImpl(r.href,i);if(t.status>=400){const e=`returned error response. Status: ${t.status} for actionType: Follow, targetType: ${s.y.Weather}`;throw new Error(e)}return t},"getWeatherInterest"),e=(await t.json())?.value;return e}catch(t){return null}}getWeatherInterestUrl(t,e,n="Follow"){const i=(0,m.nI)(this.pdpServiceEndpoint),r=`targetType eq '${s.y.Weather}'`;return i.searchParams.set("$filter",`actionType eq '${n}' and (${r})${e?` and (${e})`:""}`),[...t||[]].forEach(t=>{t.value&&i.searchParams.set(t.key,t.value)}),i}async updateWeatherSettings(t,e,n={},i,r=!1){if(!t&&!e)return!0;let o="";o=t&&!e?'{"weatherDisplayUnit":"'+t+'"}':!t&&e?'{"userSettings":{"weatherLocationSettingMode":"'+e+'"}}':'{"weatherDisplayUnit":"'+t+'","userSettings":{"weatherLocationSettingMode":"'+e+'"}}';const s=await this.getRequestInit({method:"POST"},n,r);s.body=o;const a=(0,m.nI)(this.userUpdateEndpoint),c=2===await(0,b.XK)();this.getCommonParams(c&&!r,i).forEach(t=>{t.value&&a.searchParams.set(t.key,t.value)});const u=await this.fetchImpl(a.href,s);if(u.status>=400){const t=`OneService returned error response. Status: ${u.status} for update weather setting call`;throw new Error(t)}return!0}async updateHoroscopePreference(t,e={},n){const i=s.y.Horoscope,a=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:"Follow",targetType:i,targetId:t})},e),c=(0,m.nI)(this.pdpServiceEndpoint),u=2===await(0,b.XK)();this.getCommonParams(u,n).forEach(t=>{t?.key&&t?.value&&c.searchParams.set(t.key,t.value)});try{const t=await this.fetchImpl(c.href,a);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for update horoscope preference`;throw new Error(e)}}catch(t){return(0,r.c_)(t,o.mEX,t?.toString()),!1}return!0}async getHoroscopePreference(t={},e="",n){const i=await this.getRequestInit({method:"GET"},t),a=this.getHoroscopePreferenceUrl(null,e),c=2===await(0,b.XK)();this.getCommonParams(c,n).forEach(t=>{t?.key&&t?.value&&a.searchParams.set(t.key,t.value)});try{const t=await(0,w.w)(async()=>{const t=await this.fetchImpl(a.href,i);if(t.status>=400){const e=`returned error response. Status: ${t.status} for actionType: Follow, targetType: ${s.y.Horoscope}`;throw new Error(e)}return t},"getHoroscope"),e=(await t.json())?.value;return e}catch(t){return(0,r.c_)(t,o.mEX,t?.toString()),null}}getHoroscopePreferenceUrl(t,e,n="Follow"){const i=(0,m.nI)(this.pdpServiceEndpoint),r=`actionType eq '${n}'`,o=`targetType eq '${s.y.Horoscope}'`;return i.searchParams.set("$filter",`(${r}) and (${o})`),i.searchParams.set("top","1"),[...t||[]].forEach(t=>{t?.key&&t?.value&&i.searchParams.set(t.key,t.value)}),i}async updateFinanceInterests(t){if(!t)return!1;const e={financeInterests:t},n=JSON.stringify(e),i=await this.getRequestInit({method:"POST"});i.body=n;const r=(0,m.nI)(this.userUpdateEndpoint),o="zh-cn"!==(0,d.rA)().CurrentMarket,s=2===await(0,b.XK)(),a=(0,l.Th)().CurrentFlights?.split(",").filter(t=>t.includes("1s")).join(",")||"";(s&&o?g.WR.getOneServiceParamsWithAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,a,!0):g.WR.getOneServiceParamsWithoutAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,a,!0)).forEach(t=>{t.value&&r.searchParams.set(t.key,t.value)});const c=await this.fetchImpl(r.href,i);if(c.status>=400){const t=`OneService returned error response. Status: ${c.status} for update finance interests call`;throw new Error(t)}return!0}async updateUserSettings(t,e={},n){if(!t)return!0;const r=JSON.stringify({userSettings:t},(t,e)=>e??void 0),o=await this.getRequestInit({method:"POST"},e);o.body=r;const s=(0,m.nI)(this.userUpdateEndpoint),a=2===await(0,b.XK)()?g.WR.getOneServiceParamsWithAuth(n??(0,d.rA)().UserId,this.ocid,!this.ocidOverride):g.WR.getOneServiceParamsWithoutAuth(n??(0,d.rA)().UserId,this.ocid,!this.ocidOverride);for(const{key:t,value:e}of a)e&&s.searchParams.set(t,e);try{const t=await this.fetchImpl(s.href,o);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for update weather setting call`;throw new Error(e)}}catch(t){return i.v.logError(t.message),!1}return!0}setUserPrefData(t){this.userPreferenceData=t}getCachedUserPrefData(){return this.userPreferenceData}async getUserPrefData(t){if(this.userPreferenceData)return this.userPreferenceData;return await this.getPdpUserPreference(!0,t,void 0,"weather")}async getPdpUserPreference(t,e={},n,r){const o=await this.getRequestInit({method:"GET"},e),s=(0,m.nI)(this.userUpdateEndpoint),a=2===await(0,b.XK)()?g.WR.getOneServiceParamsWithAuth(n||(0,d.rA)().UserId,this.ocid,!this.ocidOverride):g.WR.getOneServiceParamsWithoutAuth(n||(0,d.rA)().UserId,this.ocid,!this.ocidOverride);for(const{key:t,value:e}of a)e&&s.searchParams.set(t,e);r&&s.searchParams.set("source",r);try{const t=await(0,w.w)(async()=>{const t=await this.fetchImpl(s.href,o);if(!t.ok){if(t.status>=400&&t.status<500&&408!=t.status)return t;throw Error(t.statusText)}return t},"readPDPData");if(!t.ok&&404!=t.status)throw Error(`code=${t.status}, ${t.statusText}`);const e={...await t.json(),is404:404==t.status};return this.setUserPrefData(e),e}catch(e){if(i.v.logError(e.message),t)throw Error(e.message);return null}}async updatePdpLayoutPreference(t){const e={method:"PUT",credentials:"include",body:JSON.stringify({dummyid:{userLayoutPreference:t}})},n=(0,m.nI)(this.userUpdateEndpoint);(2===await(0,b.XK)()?g.WR.getOneServiceParamsWithAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride):g.WR.getOneServiceParamsWithoutAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride)).forEach(t=>{t.value&&n.searchParams.set(t.key,t.value)});try{const t=await this.fetchImpl(n.href,e);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for update layout preference setting call`;throw new Error(e)}}catch(t){return i.v.logError(t.message),!1}return!0}async updateSegmentCardsEnableStatus(t,e=null){if(!t&&!t.length)return!0;const n=[];if(e){let t;for(t in e)null!=e[t]&&n.push('"'+t+'": '+JSON.stringify(e[t]))}const i=t.map(t=>t.cardType!=a.s.TopStoriesCard?`\\"${t.cardType}\\":${t.enabled?'\\"1\\"':'\\"0\\"'}`:"").join(","),r=n.length>0?'{"segmentCardSettings":"{'+i+'}","userSettings":{'+n.join(", ")+"}}":'{"segmentCardSettings":"{'+i+'}"}';return this.updateUserPreference(r)}async updateProductivityCardsEnableStatus(t){if(!t&&!t.length)return!0;const e=`{userSettings:{enterpriseCardsEnabled:"{${t.map(t=>`\\"is${t.cardType}Enabled\\":${t.enabled?"true":"false"}`).join(",")}}"}}`;return this.updateUserPreference(e)}async updateGamingCardsEnableStatus(t){if(!t&&!t.length)return!0;const e=`{userSettings:{gamingCards:"{${t.map(t=>`\\"is${t.cardType}Enabled\\":${t.enabled?"true":"false"}`).join(",")}}"}}`;return this.updateUserPreference(e)}async updateMorningDigestEnableStatus(t){if(!t&&!t.length)return!0;const e=`{userSettings:{WindowsShellMorningDigest:"{${t.map(t=>`\\"is${t.cardType}Enabled\\":${t.enabled?"true":"false"}`).join(",")}}"}}`;return this.updateUserPreference(e)}async updateCommunitySettingsOptOutStatus(t){if(!t&&!t.length)return!0;const e={};t.forEach(t=>{e[t.settingType]=t.optedOut?"1":"0"});const n={communitySettings:e};return this.updateUserPreference(JSON.stringify(n))}async updateWidgetSettings(t,e={},n){if(!t)return!1;const i=t.filter(t=>!t.region?.startsWith("wbcol")).map(t=>({actionType:"Follow",targetId:t.cardType,targetType:s.y.Widget,metadata:{prongsv2:{region:t.region,size:c.P[t.size],position:t.position,widgetDefinitionId:t.widgetDefinitionId}}}));return this.sendGenericActionRequest({additionalHeaders:e,endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(i),appError:n})}async muteWidget(t,e={},n){if(!t||!t.length)return!1;const i=t.map(t=>({actionType:"Mute",targetId:t,targetType:s.y.Widget}));return this.sendGenericActionRequest({additionalHeaders:e,endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(i),appError:n})}async disableSpotlightCard(t,e,n){if(!t)return!1;const i={actionType:"Disabled",definitionName:t,targetType:n||s.y.TopicFeed};return this.sendGenericActionRequest({endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(i),appError:e},!0)}async getDisabledActionCards(t,e){if(!t.length||!e.length)return[];const n=Array.from(new Set(e)),i=Array.from(new Set(t)),r=[{key:"$top",value:"100"},{key:"$filter",value:`actionType eq 'Disabled' and targetType eq '${`${n.join("' or targetType eq '")}`}' and definitionName eq '${`${i.join("' or definitionName eq '")}`}'`}],o=await this.getRequestInit({method:"GET"}),s=(0,m.nI)(this.pdpServiceEndpoint),a=2===await(0,b.XK)();[...r,...this.getCommonParams(a,null,!0)].forEach(t=>{t.value&&s.searchParams.set(t.key,t.value)});const c=await(0,w.w)(async()=>{const t=await this.fetchImpl(s.href,o);if(!t.ok){if(t.status>=400&&t.status<500&&408!=t.status)return t;throw Error(t.statusText)}return t},"readPDPData");if(!c.ok&&404!=c.status)throw Error(`code=${c.status}, ${c.statusText}`);return(await c.json()).value||[]}async sendGenericActionRequest(t,e=!1){const{additionalHeaders:n,additionalParams:i,endpoint:r,method:o,payload:s,appError:a}=t;if(!r||!o)return this.logError(new Error("Missing arguments: 'endpoint' and 'method' should be provided and valid"),a),!1;const c=(0,m.nI)(r),u=2===await(0,b.XK)();let d;this.getCommonParams(u,null,e).forEach(t=>{t.value&&c.searchParams.set(t.key,t.value)}),i&&i.forEach(t=>{t.value&&c.searchParams.set(t.key,t.value)});try{JSON.parse(s),d=s}catch(t){d=JSON.stringify(s)}const l=await this.getRequestInit({method:o,body:d},n),h="GET"==o;try{return await(0,w.w)(async()=>{const t=await this.fetchImpl(c.href,l);if(t.status>=400){const e=`OneService returned error response. Status: ${t.status} for payload: ${s}`;throw new Error(e)}return!h||await t.json()},"sendActions")}catch(t){return this.logError(t,a),!1}}async getUserActions(t){const e=[{key:"actionType",value:t}],n=await this.sendGenericActionRequest({additionalParams:e,endpoint:this.userActionServiceEndPoint,method:"GET"});return n&&n.value}async setUserAction(t,e,n){return!!await this.sendGenericActionRequest({endpoint:n?this.pdpServiceEndpoint:this.userActionServiceEndPoint,method:"POST",payload:{actionType:t,...e}},!0)}async enableCard(t,e){const n=await this.getRequestInit({method:"DELETE"}),i=(0,m.nI)(this.pdpServiceEndpoint),r=2===await(0,b.XK)(),o=this.getCommonParams(r,null,!0);o.forEach(t=>{t.value&&i.searchParams.set(t.key,t.value)});[...[{key:"$filter",value:`actionType eq 'Disabled' and targetType eq '${e}' and definitionName eq '${t}'`}],...o].forEach(t=>{t.value&&i.searchParams.set(t.key,t.value)});try{await(0,w.w)(async()=>{const t=await this.fetchImpl(i.href,n);if(t.status>=400){const n=`OneService returned error response. Status: ${t.status} for actionType: Disabled, targetType: ${e}`;throw new Error(n)}return t},"enableCard")}catch(t){return!1}return!0}async deleteUserAction(t,e){const n=[{key:"actionType",value:t},{key:"targetId",value:e.targetId},{key:"definitionName",value:e.definitionName}];return!!await this.sendGenericActionRequest({additionalParams:n,endpoint:this.userActionServiceEndPoint,method:"DELETE"})}async deleteUserActionRelatedTraffic(t,e){const n=await this.getRequestInit({method:"DELETE"}),i=await this.getTrafficPdpUrl("Default",null,null,t,e.targetId);try{await(0,w.w)(async()=>{const e=await this.fetchImpl(i.href,n);if(e.status>=400){const n=`OneService returned error response. Status: ${e.status} for actionType: ${t}, targetType: ${s.y.Traffic}`;throw new Error(n)}return e},"deleteActionRelatedTraffic"),this.tryInvalidateBulkFetchedPdpTargetType(s.y.Traffic)}catch(t){return!1}return!0}async updateUserPreference(t){const e=await this.getRequestInit({method:"POST"});e.body=t;const n=(0,m.nI)(this.userUpdateEndpoint),i=2===await(0,b.XK)();this.getCommonParams(i,null,!0).forEach(t=>{t.value&&n.searchParams.set(t.key,t.value)});try{const i=await this.fetchImpl(n.href,e);if(i.status>=400){const e=`OneService returned error response while updating user preference. Status: ${i.status}, payload: ${t}`;throw new Error(e)}}catch(t){return!1}return!0}setPdpTargetTypesForBulkLoad(t){t&&t.length&&!this.bulkGraphActionTargetTypes&&(this.bulkGraphActionTargetTypes=t)}async readPdpWithTargetType(t,e=!1,n=void 0,i={},s=!0,a=[],c=!1){if(s){const e=await this.getFromWebWorker(t);if(e)return e}if(this.bulkGraphActionTargetTypes&&this.bulkGraphActionTargetTypes.length)if(this.bulkGraphActionTargetTypes.indexOf(t)>=0){this.bulkGraphActionResultCache=this.bulkGraphActionResultCache||await(this.bulkGraphActionPromise||(this.bulkGraphActionPromise=this.fetchPdpWithTargetTypes(this.bulkGraphActionTargetTypes,e,n,i,a,c)));const r=this.bulkGraphActionResultCache.get(t);if(r)return{value:r}}else(0,r.vV)(o.Rk$,`Received an unknown target type "${t}" that was not in the bulk graph action target types list "${this.bulkGraphActionTargetTypes}". Falling back to new network call. Please update the EntryPoint config's "graphActionsToBulkLoad" property to include this type.`);const u=(await this.fetchPdpWithTargetTypes([t],e,n,i,a,c)).get(t);if(u)return{value:u}}async deleteFromPdp(t,e,n,i={},r=void 0,o="Follow",s,a=[],c=!1){const u=await this.getRequestInit({method:"DELETE"},i,c),d=(0,m.nI)(this.pdpServiceEndpoint),l=2===await(0,b.XK)(),h=this.getCommonParams(l&&!c),f=`targetType eq '${t}'`,p=n.map(t=>`${e} eq '${t}'`).join(" or ");let g=`actionType eq '${o}' and (${p}) and (${f})`;r&&(g+=` and (degree eq '${r}')`),d.searchParams.set("$filter",g),[...h,...a].forEach(t=>{t.value&&d.searchParams.set(t.key,t.value)});try{await(0,w.w)(async()=>{const e=await this.fetchImpl(d.href,u);if(e.status>=400){const n=`OneService returned error response. Status: ${e.status} for actionType: ${o}, targetType: ${t}`;throw new Error(n)}return e},"deleteFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(t)}catch(t){return s&&y.YT.sendAppErrorEvent({...s,pb:{...s.pb,actionType:o,error:t.message}}),!1}return!0}tryInvalidateBulkFetchedPdpTargetType(t){this.bulkGraphActionResultCache&&this.bulkGraphActionResultCache.delete(t)}async fetchPdpWithTargetTypes(t,e=!1,n=void 0,i={},r=[],o=!1){if(!t.length)return new Map;const a=t.map(t=>`targetType eq '${t}'`).join(" or "),c=[{key:"$top",value:`${n=n||10*t.length*2}`},{key:"$filter",value:`actionType eq 'Follow' and (${a})`}],d=await this.getRequestInit({method:"GET"},i);!0===e&&(d.cache="no-store");const l=(0,m.nI)(this.pdpServiceEndpoint),h=2===await(0,b.XK)();[...c,...this.getCommonParams(h),...r].forEach(t=>{t.value&&l.searchParams.set(t.key,t.value)});const f=await(0,w.w)(async()=>{const t=await this.fetchImpl(l.href,d);if(!t.ok){if(t.status>=400&&t.status<500&&408!=t.status)return t;throw Error(t.statusText)}return t},"readPDPData");if(!f.ok)throw Error(`code=${f.status}, ${f.statusText}`);if(o){const t=(f.headers.get("ddd-auth-features")||"").split(";");if(!t.includes("AadStateOrigin:AuthorizationJwtToken")&&!t.includes("MsaStateOrigin:AuthorizationJwtToken"))throw new u("user does not have valid auth token")}const p=new Map,g=await f.json();if(!g)return p;if(g.value)for(const t of g.value){let e=p.get(t.targetType);e||p.set(t.targetType,e=[]),e.push(t)}for(const e of t)if(p.get(e)||p.set(e,[]),e===s.y.Finance){if("all-cgcombo"===l.searchParams.get("interestType")){const t=p.get(s.y.CasualGame)||[];let n=p.get(s.y.Finance)||[];n=n.concat(t),p.set(e,n)}}return p}async updateMarketPreference(t){const e=await this.getRequestInit({method:"POST",credentials:"include",body:JSON.stringify({userSettings:{preferredMarket:t}})}),n=(0,m.nI)(this.userUpdateEndpoint);(2===await(0,b.XK)()?g.WR.getOneServiceParamsWithAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride):g.WR.getOneServiceParamsWithoutAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride)).forEach(t=>{t.value&&n.searchParams.set(t.key,t.value)});try{const i=await this.fetchImpl(n.href,e);if(!i.ok)throw new Error(`Failed to update market preference: Status: ${i.status}`);return this.marketQSPOverride&&window.history.pushState(null,"",h._3.updateSearchParam(new URL(window.location.href),"cm",t)),!0}catch(t){return i.v.logError(t.message),!1}}async updateFeedPreference(t){const e="winWidgets"===d.T3.AppType?"rubyProng2OptOut":"rubyOptOut",n=await this.getRequestInit({method:"POST",credentials:"include",body:JSON.stringify({userSettings:{[e]:t?"0":"1"}})}),r=(0,m.nI)(this.userUpdateEndpoint);(2===await(0,b.XK)()?g.WR.getOneServiceParamsWithAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride):g.WR.getOneServiceParamsWithoutAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride)).forEach(t=>{t.value&&r.searchParams.set(t.key,t.value)});try{const t=await this.fetchImpl(r.href,n);if(!t.ok)throw new Error(`Failed to update feed preference: Status: ${t.status}`);return!0}catch(t){return i.v.logError(t.message),!1}}async getFromWebWorker(t){let e=null;if(f.WD){const n=this.maptoWebWorkerId(t);if(n&&n.trim()){const n=await(0,f.H$)({id:this.maptoWebWorkerId(t)});n.fetched&&(e=n.payload)}}return e}maptoWebWorkerId(t){switch(t){case s.y.Location:return"weatherpdp";case s.y.League:return"sportsleaguepdp";case s.y.Player:return"sportsplayerpdp";case s.y.Team:return"sportsteampdp";case s.y.Finance:return"moneypdp";default:return""}}async getRequestInit(t={method:"GET"},e={},n=!1){const i=await g.WR.getOneServiceHeaders();return t.headers={...n?{}:i,...e},t.credentials="include",t}async getFollowedLists(){const t=await this.getRequestInit({method:"GET"}),e=(0,m.nI)(this.userUpdateEndpoint),n=2===await(0,b.XK)(),s=(0,l.Th)().CurrentFlights?.split(",").filter(t=>t.includes("1s")).join(",")||"",a=n?g.WR.getOneServiceParamsWithAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,s,!0):g.WR.getOneServiceParamsWithoutAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,s,!0);for(const{key:t,value:n}of a)n&&e.searchParams.set(t,n);try{const n=await(0,w.w)(async()=>{const n=await this.fetchImpl(e.href,t);if(!n.ok){if(n.status>=400&&n.status<500&&408!=n.status)return n;(0,r.c_)(null,o.OrI,"Error get followed list")}return n},"getFollowedLists");return n.ok||(0,r.c_)(null,o.OrI,"Error get followed list"),await n.json()}catch(t){return i.v.logError(t.message),null}}async addToFollowedLists(t){const e=s.y.Finance,n=await this.getRequestInit({method:"POST",body:JSON.stringify({financeListIds:t})}),i=(0,m.nI)(this.userUpdateEndpoint),r=2===await(0,b.XK)(),o=(0,l.Th)().CurrentFlights?.split(",").filter(t=>t.includes("1s")).join(",")||"";let a;(r?g.WR.getOneServiceParamsWithAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,o,!0):g.WR.getOneServiceParamsWithoutAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,o,!0)).forEach(t=>{t.value&&i.searchParams.set(t.key,t.value)});try{a=await(0,w.w)(async()=>{const t=await this.fetchImpl(i.href,n);if(t.status>=400){const n=`OneService returned error response. Status: ${t.status} for actionType: FollowList, targetType: ${e}`;throw new Error(n)}return t.json()},"addToFollowedLists")}catch(t){return!1}return!0}async deleteFromFollowedLists(t){const e=s.y.Finance,n=await this.getRequestInit({method:"DELETE"}),i=(0,m.nI)(this.userUpdateEndpoint),r=2===await(0,b.XK)(),o=(0,l.Th)().CurrentFlights?.split(",").filter(t=>t.includes("1s")).join(",")||"";let a;[...r?g.WR.getOneServiceParamsWithAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,o,!0):g.WR.getOneServiceParamsWithoutAuth((0,d.rA)().UserId,this.ocid,!this.ocidOverride,o,!0),...[{key:"financeListIds",value:t.toString()}]].forEach(t=>{t.value&&i.searchParams.set(t.key,t.value)});try{a=await(0,w.w)(async()=>{const t=await this.fetchImpl(i.href,n);if(t.status>=400){const n=`OneService returned error response. Status: ${t.status} for actionType: UnFollowList, targetType: ${e}`;throw new Error(n)}return t.json()},"deleteFromFollowedLists")}catch(t){return!1}return!0}logError(t,e){e?y.YT.sendAppErrorEvent({...e,pb:{...e.pb,error:t.message}}):i.v.logError(t.message)}}const C=new class extends S{constructor(){super((0,p.V)()),"windowsNewsPlus"===d.T3.AppType||"winWidgets"===d.T3.AppType?(this.ocid="winp2",this.ocidOverride=!0):"sharedWidgets"===d.T3.AppType?(this.ocid="hpwidget",this.ocidOverride=!0):"travel"===d.T3.AppType?(this.ocid="travel-verthp-feeds",this.ocidOverride=!0):"gaming"===d.T3.AppType?(this.ocid="authconstants-peregrine",this.ocidOverride=!0):"health"===d.T3.AppType?(this.ocid="health-verthp-feeds",this.ocidOverride=!0):"bingHomepage"===d.T3.AppType?(this.ocid="BingHp01",this.ocidOverride=!0):"windowsShellV2"===d.T3.AppType?(this.ocid="pdp-peregrine",this.ocidOverride=!0):"edgeChromium"===d.T3.AppType&&d.T3.IsHeroNTP&&(this.marketQSPOverride=!0)}}},49084:function(t,e,n){n.d(e,{$D:function(){return k},Aj:function(){return S},BL:function(){return O},FS:function(){return x},HN:function(){return F},LK:function(){return D},NY:function(){return R},SM:function(){return $},Sm:function(){return A},g_:function(){return B},lp:function(){return P},nf:function(){return I},op:function(){return U},wQ:function(){return _},x1:function(){return E}});var i=n(69259),r=n(10160),o=n(75776),s=n(67387),a=n(65432),c=n(59983),u=n(77246),d=n(27261),l=n(13113),h=n(74166),f=n(85889),p=n(15098);const g=(0,o.MI)()||{};let m=null;const w={winWidgets:1,webWidgets:1,windowsShell:1,windowsShellV2:1,distribution:1,superApp:1,channelmobile:1,edgeMobile:1},y={edgeChromium:1},v={winWidgets:1,webWidgets:1},b={edgeChromium:1,shopping:1,winWidgets:1,webWidgets:1,windowsShell:1,windowsShellV2:1,msn:1},S={edgeChromium:1,channelmobile:1,cgHomePage:1,distribution:1,winWidgets:1,webWidgets:1,windowsShell:1,windowsShellV2:1,superApp:1,edgeMobile:1},C=(0,p.L)(()=>g&&g.apptype),k=(0,p.L)(()=>(0,u.S)()&&C()in v),T=(0,p.L)(()=>(0,u.S)()&&!(0,f.JK)()&&!(C()in w)&&!P()&&!M()),x=(0,p.L)(()=>T()&&!(C()in y)),A=((0,p.L)(()=>T()&&(!(C()in y)||!(0,c.RZ)())),(0,p.L)(()=>T()&&!N()&&!L()));function $(){return!!(0,h.Ux)(s.kr)}const I=(0,p.L)(()=>L()||N()),P=(0,p.L)(()=>!(C()in b)&&U()&&function(){const t=new URLSearchParams((0,d.iA)()).get("ocid")||g?.ocid,e=t?.toLowerCase();if("homePage"==C()&&!s.dZ.has(e))return!0;if(s.B9.has(e))return!0;return!s.dZ.has(e)}()&&!function(){const t="homePage"==C()&&"hp"==(g&&g.pagetype)&&(0,d.$N)().includes(`${i.ei}`);return t}());function R(t){return!t&&(null===m&&(m=!function(){if(!(0,u.S)())return!1;const t=(0,d.$N)();return["vptest=1","reqsrc=vp","vpFreeze=1"].some(e=>t?.includes(e))}()),m)}const M=()=>(0,u.S)()&&document&&document.body&&document.body.getElementsByClassName(r.AF).length>0,_=()=>M()&&"bingHomepage"===C(),E=(0,p.L)(()=>C()in S||P());function F(){const t=(0,a.v3)();if(t)return t;const e=(0,a.fM)();return e||void 0}function D(t){const e={};return t&&(e[s.aS.authorization]=`Bearer ${t}`),e}function O(t){const e={};return t&&(e[s.aS.entAuthorization]=t),e}function N(){return x()&&(0,l.gV)()||function(){const t=x()&&!W()&&!(0,l.gV)()&&(0,c.Dm)()&&("expired"==(0,a.hF)()||(0,l.k4)());return t}()||(0,l.VH)()||(0,l.GQ)()}function L(){return x()&&!(0,c.Dm)()&&(0,l.LN)()}function B(){(0,c.GZ)(),x.cache.clear()}const U=(0,p.L)(()=>{const{browser:t}=g,{browserType:e="",detected:n={}}=t||{},{browserType:i=""}=n||{};return/edgeChromium/i.test(e)||/edgeAndroid/i.test(e)||/edgeiOS/i.test(e)||/edge/i.test(i)});(0,p.L)(()=>x()&&!P());const W=()=>{const t=(0,c.Dm)();if(!t)return!1;let e;switch(t.account_type){case"MSA":e=x()?s.kr:s.v1;break;case"AAD":e=x()?s.E1:s.j$;break;default:return!1}return!!(0,h.Ux)(e)}},49545:function(t,e,n){n.d(e,{W:function(){return r}});var i=n(55593);function r(t){if("object"==typeof t&&null!==t){const e=(0,i.a)()?.get("testRubyVersion");null!=e&&(t.serviceContext||(t.serviceContext={}),"dynamic"===e?t.serviceContext.rubyEverSelected=!0:t.serviceContext.rubyTargetedVersion=e,t.serviceContext.isTestRubyVersion=!0)}}},49813:function(t,e,n){n.d(e,{DE:function(){return i},DU:function(){return o},FL:function(){return r},JI:function(){return s},Mg:function(){return c},fO:function(){return a},gy:function(){return u},yE:function(){return d}});const i="edge://new-tab-page-online",r="https://localhost:3000",o="https://copilot-stg.com",s="https://www.copilot-stg.com",a="https://copilot.microsoft.com",c="https://localhost",u="https://www.staging-bing-int.com",d="https://www.bing.com"},50004:function(t,e,n){n.r(e),n.d(e,{TelemetryDataConnector:function(){return i.j},ToolingInfo:function(){return r}});var i=n(50999);const r={experienceConfigSchema:{}}},50091:function(t,e,n){n.d(e,{$1:function(){return J},$v:function(){return O},A:function(){return z},Bq:function(){return j},Fp:function(){return S},Gi:function(){return G},Ho:function(){return H},IQ:function(){return P},JC:function(){return R},Jx:function(){return m},LF:function(){return g},Li:function(){return W},MC:function(){return _},Mb:function(){return h},Np:function(){return U},OF:function(){return D},QH:function(){return N},QV:function(){return v},Tj:function(){return Q},U9:function(){return r},UM:function(){return F},W3:function(){return B},YC:function(){return q},Ze:function(){return x},_B:function(){return b},bL:function(){return d},fe:function(){return A},g9:function(){return C},gy:function(){return I},j5:function(){return l},j6:function(){return c},jw:function(){return E},lu:function(){return V},mk:function(){return M},nZ:function(){return k},oy:function(){return o},p$:function(){return w},pV:function(){return i},rq:function(){return f},sT:function(){return L},tU:function(){return p},uR:function(){return y},ve:function(){return $},wA:function(){return u},x4:function(){return T}});var i,r,o,s=n(27942),a=n(6092);!function(t){t.Enforced="ENFORCED",t.Recommended="RECOMMENDED"}(i||(i={})),function(t){t[t.CuratedTileSource=-5]="CuratedTileSource",t[t.UserAddedTileSource=4]="UserAddedTileSource",t[t.UserAddedTileSourceNewVal=3]="UserAddedTileSourceNewVal",t[t.AlgoGeneratedTileSource=0]="AlgoGeneratedTileSource",t[t.WPOPromotedTileSource=-4]="WPOPromotedTileSource",t[t.PromotedCuratedTileSource=-6]="PromotedCuratedTileSource",t[t.SponsoredPromotedCuratedTileSource=-7]="SponsoredPromotedCuratedTileSource",t[t.SponsoredCuratedTileSource=-8]="SponsoredCuratedTileSource",t[t.AffiliateAutoAppendTileSource=2]="AffiliateAutoAppendTileSource",t[t.NextSitesAlgoGeneratedTileSource=7]="NextSitesAlgoGeneratedTileSource",t[t.AlgoGeneratedCIPromotedMediaTileSource=8]="AlgoGeneratedCIPromotedMediaTileSource"}(r||(r={})),function(t){t[t.DragDrop=1]="DragDrop",t[t.DragDropUnpin=-1]="DragDropUnpin"}(o||(o={}));const c=282,u=386,d="130px",l=8,h=16,f=20,p=10,g=30,m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrsl7EJADAIBGPIEO4/nVt8SCFkgijhvhCsPNQHNUmjWnM0EBCpdYK7i07cSUTYy+I5ARaz705UuQR34A4ggAACCCCA4LL6qhPGV94JYgswAGXGEhq663zFAAAAAElFTkSuQmCC",w=320,y=176,v=1e4,b=1200,S=8,C=84,k=108,T="tsCollapsed",x="tsUnpinned",A="tsDragDrop",$="tsDragDropUnpin",I=32,P=/^(\/\?|\?|&|)/,R={topSitesContainerId:"TopSitesContainer",topSitesId:"TopSitesCommon",topSitesClassSelector:"topSitesCommon",topSiteActionMenuId:"tsam"},M={topSitesDarkOnBackgroundImage:"topSitesDarkOnBackgroundImage",topSitesLightOnBackgroundImage:"topSitesLightOnBackgroundImage",topSitesDark:"topSitesDark",topSitesLight:"topSitesLight",tenSites:"ten-sites",nineSites:"nine-sites",eightSites:"eight-sites",sixSites:"six-sites",twoRowSites:"two-row-sites",feeds3T1SearchBoxWidth:"f3t1tsb",feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled:"qbf3t1tsb",feeds3T1SearchBoxWidthWithAdditionalTile:"f3t1tsbwat",carouselSites:"all-one-line-sites",large:"Large",rubySites:"ruby-sites",rubyTenSites:"ruby-ten-sites"},_=["ntp.msn.com","ntp.msn.cn","microsoftedgewelcome.microsoft.com"],E={"go.microsoft.com":["Welcome to Microsoft Edge"],"msn.com":["MSN","MSN"]};var F;!function(t){t[t.topSiteAdLabelBig=0]="topSiteAdLabelBig",t[t.topSiteAdLabelSmall=1]="topSiteAdLabelSmall",t[t.topSiteAdTxtBig=2]="topSiteAdTxtBig",t[t.topSiteAdTxtSmall=3]="topSiteAdTxtSmall"}(F||(F={}));const D=[{title:"YouTube",url:"https://www.youtube.com/",faviconId:"AA1vaJY7"},{title:"Gmail",url:"https://www.gmail.com/",faviconId:"AA1xJdRt"},{title:"Facebook",url:"https://www.facebook.com/",faviconId:"AAbwoox"},{title:"WhatsApp",url:"https://www.whatsapp.com/",faviconId:"AA1xJga5"}],O=[{title:"YouTube",url:"https://www.youtube.com/",faviconId:"AA1vaJY7"},{title:"Facebook",url:"https://www.facebook.com/",faviconId:"AAbwoox"},{title:"WhatsApp",url:"https://www.whatsapp.com/",faviconId:"AA1xJga5"},{title:"Outlook",url:"https://www.outlook.com",faviconId:"AA1vaSFL"}],N=[{url:"https://www.bing.com",exc:["maps"]},{url:"https://www2.bing.com",exc:["maps"]},{url:"https://bing.com",exc:["maps"]},{url:"https://chat.bing.com"},{url:"https://www.google.co.jp",exc:["maps","photos","flights"]},{url:"https://google.com",exc:["maps","photos","flights","mail"]},{url:"https://www.google.com",exc:["maps","photos","flights"]},{url:"https://www.google.com.au",exc:["maps","photos","flights"]},{url:"https://www.google.com.br",exc:["maps","photos","flights"]},{url:"https://www.google.com.fr",exc:["maps","photos","flights"]},{url:"https://www.google.co.uk",exc:["maps","photos","flights"]},{url:"https://www.google.de",exc:["maps","photos","flights"]},{url:"https://www.yahoo.com"},{url:"https://search.yahoo.com"},{url:"https://uk.yahoo.com "},{url:"https://uk.search.yahoo.com"},{url:"https://de.yahoo.com"},{url:"https://de.search.yahoo.com"},{url:"https://fr.yahoo.com"},{url:"https://fr.search.yahoo.com"},{url:"https://ca.yahoo.com"},{url:"https://ca.search.yahoo.com"},{url:"https://au.yahoo.com"},{url:"https://www.yahoo.co.jp"},{url:"https://search.yahoo.co.jp"},{url:"https://www.baidu.com"},{url:"https://www.duckduckgo.com"},{url:"https://yandex.com"},{url:"https://www.yandex.com"},{url:"https://www.yandex.ru"},{url:"https://www.naver.com"},{url:"https://www.microsoft.com/en-us/edge/update"}],L={"https://www.office.com":"AA13Q6AL","https://www.office.com/":"AA13Q6AL"},B={"https://www.office.com":"Microsoft 365","https://www.office.com/":"Microsoft 365"},U={rid:1,dataGenerationTime:null,faviconUrl:"",domain:"",enforcement:void 0,title:"          ",tileSource:0,tileTitleSource:0,url:"",direction:"ltr"},W={onerow:{[s.j1.c1]:{default:{tile:4,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:4}},[s.j1.c2]:{default:{tile:6,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:6}},[s.j1.c3]:{default:{tile:7,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:7}},[s.j1.c4]:{default:{tile:10,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:10}},[s.j1.c5]:{default:{tile:10,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:10}}},tworows:{[s.j1.c1]:{default:{tile:8,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:4}},[s.j1.c2]:{default:{tile:12,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:6}},[s.j1.c3]:{default:{tile:14,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:7}},[s.j1.c4]:{default:{tile:20,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:10}},[s.j1.c5]:{default:{tile:20,class:M.feeds3T1SearchBoxWidth,maxRowTileCount:10}}}},V={onerow:{[s.j1.c1]:{default:{tile:8,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:4}},[s.j1.c2]:{default:{tile:10,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:5}},[s.j1.c3]:{default:{tile:3,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:3}},[s.j1.c4]:{default:{tile:6,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}},[s.j1.c5]:{default:{tile:6,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}}},tworows:{[s.j1.c1]:{default:{tile:8,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:4}},[s.j1.c2]:{default:{tile:10,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:5}},[s.j1.c3]:{default:{tile:6,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:3}},[s.j1.c4]:{default:{tile:12,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}},[s.j1.c5]:{default:{tile:12,class:M.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}}}},H={onerow:{[s.j1.c1]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[s.j1.c2]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[s.j1.c3]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[s.j1.c4]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[s.j1.c5]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}}},tworows:{[s.j1.c1]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[s.j1.c2]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[s.j1.c3]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[s.j1.c4]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}},[s.j1.c5]:{default:{tile:20,class:M.carouselSites,maxRowTileCount:20}}}},z={[s.j1.c1]:2,[s.j1.c2]:3,[s.j1.c3]:4,[s.j1.c4]:7,[s.j1.c5]:7},j={onerow:{[s.j1.c1]:{default:{tile:4,class:M.rubySites,maxRowTileCount:4}},[s.j1.c2]:{default:{tile:5,class:M.rubySites,maxRowTileCount:5}},[s.j1.c3]:{default:{tile:6,class:M.rubySites,maxRowTileCount:6}},[s.j1.c4]:{default:{tile:8,class:M.rubySites,maxRowTileCount:8}},[s.j1.c5]:{default:{tile:8,class:M.rubySites,maxRowTileCount:8}}},tworows:{[s.j1.c1]:{default:{tile:4,class:M.rubySites,maxRowTileCount:4}},[s.j1.c2]:{default:{tile:5,class:M.rubySites,maxRowTileCount:5}},[s.j1.c3]:{default:{tile:6,class:M.rubySites,maxRowTileCount:6}},[s.j1.c4]:{default:{tile:8,class:M.rubySites,maxRowTileCount:8}},[s.j1.c5]:{default:{tile:8,class:M.rubySites,maxRowTileCount:8}}}},q={onerow:{[s.j1.c1]:{default:{tile:10,class:M.rubyTenSites,maxRowTileCount:5}},[s.j1.c2]:{default:{tile:10,class:M.rubyTenSites,maxRowTileCount:7}},[s.j1.c3]:{default:{tile:10,class:M.rubyTenSites,maxRowTileCount:10}},[s.j1.c4]:{default:{tile:10,class:M.rubyTenSites,maxRowTileCount:10}},[s.j1.c5]:{default:{tile:10,class:M.rubyTenSites,maxRowTileCount:10}}},tworows:{[s.j1.c1]:{default:{tile:10,class:M.rubyTenSites,maxRowTileCount:5}},[s.j1.c2]:{default:{tile:10,class:M.rubyTenSites,maxRowTileCount:7}},[s.j1.c3]:{default:{tile:10,class:M.rubyTenSites,maxRowTileCount:10}},[s.j1.c4]:{default:{tile:10,class:M.rubyTenSites,maxRowTileCount:10}},[s.j1.c5]:{default:{tile:10,class:M.rubyTenSites,maxRowTileCount:10}}}},G="https://account.microsoft.com/privacy/ad-settings/",J=[{rid:1,faviconUrl:"//img-s-msn-com.akamaized.net/tenant/amp/entityid/BB1gpoOU.img",title:"BingMock",tileSource:-5,url:"https://www.bing.com",direction:"ltr",domain:"",tileTitleSource:0,dataGenerationTime:void 0,enforcement:""},{rid:2,faviconUrl:"https://img-s-msn-com.akamaized.net/tenant/amp/entityid/AAc9vHK.img",title:"eBayMock",tileSource:-8,url:"https://www.bing.com/alink/link?url=https%3A%2F%2Fwww.ebay.com%2F%3Fmkcid%3D1%26mkrid%3D711-53200-19255-0%26siteid%3D0%26campid%3D5338626679%26customid%3Denus-edge-topsites-dft%26toolid%3D10001%26mkevt%3D1&source=msn-ntp&h=QhO71UBMK%2F9MvItbnRuiijjTJEYqb5e7azgac4kLBco%3D&aff=p&p=mkt%3Aen-us%3Bf%3Afq0r%2F5Jk3xO%2FZ%2FSOOTjxAUleKOGKPn6MO6pkL%2B2ezaw%3D%3Btssls%3Awpod",isSponsored:!0,domain:"",tileTitleSource:0,dataGenerationTime:void 0,direction:"",enforcement:""},{rid:3,faviconUrl:"https://img-s-msn-com.akamaized.net/tenant/amp/entityid/BB1lFz6G.img",title:"QuickbooksMock",tileSource:-8,url:"https://www.bing.com/alink/link?url=https%3A%2F%2Fww55.affinity.net%2Fsssdomweb%3Fenk%3D6383dabdeb5e62aa12e566d10dce117627fcc3ca988d0acb52865e97f89910b5ef2c530cc0fe75dcd6ca59d2f106f2a93acec33b49c3549d297065f2975465e8f2c8d29d83cedfdb%26subid%3Denus-edge-topsites-dft&source=msn-ntp&h=tTk3Viyyso73ydo4a3f0n4rZPaAHAlsGldI2ALISiJM%3D&aff=p&p=mkt%3Aen-us%3Bf%3Afq0r%2F5Jk3xO%2FZ%2FSOOTjxAUleKOGKPn6MO6pkL%2B2ezaw%3D%3Btssls%3Awpod",isSponsored:!0,domain:"",tileTitleSource:0,dataGenerationTime:void 0,direction:"",enforcement:""},{rid:4,faviconUrl:"https://img-s-msn-com.akamaized.net/tenant/amp/entityid/BB1ncNsL.img",title:"WalmartMock",tileSource:-8,url:"https://www.bing.com/alink/link?url=https%3A%2F%2Fww55.affinity.net%2Fsssdomweb%3Fenk%3D6383dabdeb5e62aa12e566d10dce117627fcc3ca988d0acb276a49e0d9b54340bcfb90634a3d10e1b02644a6b1ad86cf3acec33b49c3549d297065f2975465e8f2c8d29d83cedfdb%26subid%3DEN-US-curated-edge-tiles&source=msn-ntp&h=Nj14yhxE2bBfxDkxA%2FneHafeLMFvtM7h9cSstUsvPE0%3D&aff=p&p=mkt%3Aen-us%3Bf%3Afq0r%2F5Jk3xO%2FZ%2FSOOTjxAUleKOGKPn6MO6pkL%2B2ezaw%3D%3Btssls%3Awpod",isSponsored:!0,domain:"",tileTitleSource:0,dataGenerationTime:void 0,direction:"",enforcement:""},{rid:5,faviconUrl:"//img-s-msn-com.akamaized.net/tenant/amp/entityid/AAdTRDX.img",title:"LinkedInMock",tileSource:-5,url:"https://www.linkedin.com?trk=msn-top",direction:"ltr",domain:"",tileTitleSource:0,dataGenerationTime:void 0,enforcement:""},{rid:6,faviconUrl:"//img-s-msn-com.akamaized.net/tenant/amp/entityid/AAcHSdq.img",title:"NetflixMock",tileSource:-5,url:"https://www.netflix.com/",direction:"ltr",domain:"",tileTitleSource:0,dataGenerationTime:void 0,enforcement:""}],Q=`${(0,a.rA)().StaticsUrl}latest/icons/office-icons/M365Copilot_24x.svg`},50115:function(t,e,n){n.d(e,{Db:function(){return l},Is:function(){return c},KD:function(){return u},Mr:function(){return f},U4:function(){return h},V$:function(){return o},hI:function(){return a},mp:function(){return s},nX:function(){return d}});var i=n(41820),r=n(48172);const o=async()=>{let t,e={v:"2"};return await r.f.isApiAvailableToUse()&&(t=(await r.f.getPreferenceSetting(i.bJ.wpo_nx))?.value,t&&(e="2"===t?.v?t:{lyp:t,v:"2"})),e},s=async()=>{const t=await o();if(t){return t.lyp}},a=async t=>{if(await r.f.isApiAvailableToUse()){const e=await o();if(!!e?.fdc==!!t)return;const n={lyp:e?.lyp,wgt:e?.wgt,cpt:e?.cpt,fdc:t?"1":void 0,rptf:e?.rptf,v:"2"};r.f.savePreferenceSetting(i.bJ.wpo_nx,n)}},c=async t=>{if(await r.f.isApiAvailableToUse()){const e=await o(),n={lyp:t,wgt:e?.wgt,cpt:e?.cpt,fdc:e?.fdc,rptf:e?.rptf,v:"2"};r.f.savePreferenceSetting(i.bJ.wpo_nx,n)}},u=async()=>{const t=await o();if(t){return t.wgt}},d=async t=>{if(await r.f.isApiAvailableToUse()){const e=await o(),n={lyp:e?.lyp,wgt:t,cpt:e?.cpt,fdc:e?.fdc,rptf:e?.rptf,v:"2"};r.f.savePreferenceSetting(i.bJ.wpo_nx,n)}},l=async()=>{const t=await o();if(t){return t.cpt}return!1},h=async t=>{if(await r.f.isApiAvailableToUse()){const e=await o(),n={lyp:e?.lyp,wgt:e?.wgt,cpt:t,fdc:e?.fdc,rptf:e?.rptf,v:"2"};r.f.savePreferenceSetting(i.bJ.wpo_nx,n)}},f=async(t=!0)=>{if(await r.f.isApiAvailableToUse()){const e=await o(),n={lyp:e?.lyp,wgt:e?.wgt,cpt:e?.cpt,fdc:e?.fdc,v:"2"};t&&(n.rptf="1"),r.f.savePreferenceSetting(i.bJ.wpo_nx,n)}}},50127:function(t,e,n){n.d(e,{m:function(){return o}});const i=1<<24,r=/\s+/g;const o=new class{rgbNumberToCssHexColor(t){let e=null;return"number"==typeof t&&t>=0&&t<i&&(e=this.rgbNumberToCssHexColorCore(t)),e}parseColor(t){if(t)return this.parseHexColor(t)||this.parseRgbaColor(t)}parsedColorToNumber(t,e){return t&&t.r<<16|t.g<<8|t.b||e}grayScale(t){const e=t.r,n=t.g,i=t.b;return this.isValidColorValue(e)&&this.isValidColorValue(n)&&this.isValidColorValue(i)?Math.min(255,Math.round(.299*e+.587*n+.114*i)):255}isValidColorValue(t){return!isNaN(t)&&null!=t&&t>=0&&t<=255}rgbNumberToCssHexColorCore(t){return"#"+(i|t).toString(16).slice(1)}parseHexColor(t){const e=t&&t.replace("#",""),n=parseInt(e,16);if(isNaN(n))return null;const i=e.length;return 3===i?{r:17*(n>>8),g:17*(n>>4&15),b:17*(15&n),a:1}:6===i||8===i?{r:n>>16&255,g:n>>8&255,b:255&n,a:6===i?1:(n>>24&255)/255}:null}parseRgbaColor(t){if(!t)return null;const e=t.replace(r,"").match(/^(?:rgba?)\(((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?)(?:,((:?\d*\.)?\d+))?\)$/);if(e){const t=e[4];return{r:this.normalizeColor(e[1],255,!0),g:this.normalizeColor(e[2],255,!0),b:this.normalizeColor(e[3],255,!0),a:t?this.normalizeColor(t,1,!1):1}}return null}normalizeColor(t,e,n){let i=parseFloat(t);return isNaN(i)?0:(i=t.indexOf("%")>=0?Math.max(0,Math.min(100,i))*e/100:Math.max(0,Math.min(e,i)),n?Math.round(i):Math.round(100*i)/100)}}},50130:function(t,e,n){n.d(e,{s4:function(){return l},Nr:function(){return d},nP:function(){return u}});var i=n(82286);const r=5131;let o;try{o=(()=>{const t=i.A.getAdbLoggedTime();return r+t%r})()}catch(t){o=r}const s=/(a)(d)/gi,a=t=>String.fromCharCode(t+97),c=(new Map,(t,e)=>{const n=(t=>{let e,n="";for(e=Math.abs(t);e>26;e=e/26|0)n=a(e%26)+n;return(a(e%26)+n).replace(s,"$1-$2")})(((t,e)=>(void 0===e&&(e=o),((t,e)=>{let n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return t})(e,t)))(t,e)>>>0);return n}),u=(t,e)=>`${f(t,e)}`,d=(t,e)=>`algo-${f(t,e)}`,l=(t,e,n)=>t&&i.A?.getAdbStatus()?u(e,n):e,h=new Map,f=(t,e)=>{const n=((t,e)=>(h.has(t)||h.set(t,c(t,e)),h))(t,e).get(t);return n}},50297:function(t,e,n){n.d(e,{e:function(){return V}});var i=n(88296),r=n(27942),o=n(99893),s=n(90831),a=n(45181),c=n(12870),u=n(6092),d=n(6736),l=n(49084),h=n(18731),f=n(89151),p=n(93468),g=n(65022),m=n(98216),w=n(22309),y=n(77255),v=n(2603),b=n(17501),S=n(6727);S.OL&&(window.telemetryEventsClear=()=>{window.telemetryEvents=[]},window.telemetryEventsFlush=()=>{const t={...window.telemetryEvents};return window.telemetryEventsClear(),t});const C=function(t){S.OL&&(window.telemetryEvents=window.telemetryEvents||[],window.telemetryEvents.push(t))},k=[{type:b.x.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.msn.com/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:b.x.Debug,mapper:new v.V,transporterConfig:{callback:C}},{type:b.x.Debug,mapper:new w.H,transporterConfig:{callback:C}},{type:b.x.Debug,mapper:new y.J,transporterConfig:{callback:C}}],T=[{type:b.x.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.msn.cn/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:b.x.Debug,mapper:new v.V,transporterConfig:{callback:C}},{type:b.x.Debug,mapper:new w.H,transporterConfig:{callback:C}},{type:b.x.Debug,mapper:new y.J,transporterConfig:{callback:C}}],x=[{type:b.x.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.microsoftstart.com/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:b.x.Debug,mapper:new v.V,transporterConfig:{callback:C}},{type:b.x.Debug,mapper:new w.H,transporterConfig:{callback:C}},{type:b.x.Debug,mapper:new y.J,transporterConfig:{callback:C}}],A=[{type:b.x.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.microsoftstart.cn/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:b.x.Debug,mapper:new v.V,transporterConfig:{callback:C}},{type:b.x.Debug,mapper:new w.H,transporterConfig:{callback:C}},{type:b.x.Debug,mapper:new y.J,transporterConfig:{callback:C}}],$=[{type:b.x.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],I=[{type:b.x.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.cn/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],P=[{type:b.x.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],R=[{type:b.x.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.msn.cn/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],M=[{type:b.x.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.microsoftstart.com/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],_=[{type:b.x.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.microsoftstart.cn/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],E=[{type:b.x.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.microsoftstart.com/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],F=[{type:b.x.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.microsoftstart.cn/OneCollector/1.0"}},{type:b.x.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:b.x.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],D=[{type:b.x.SuperApp,transporterConfig:{enableConsoleLog:!0}}],O=[{type:b.x.SuperAppBridge,transporterConfig:{enableConsoleLog:!0}}],N=[{type:b.x.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}}],L={};L.enterprise=P,L.enterpriseCN=R,L.enterpriseMicrosoftStart=E,L.enterpriseCNMicrosoftStart=F,L.int=k,L.intCN=T,L.intMicrosoftStart=x,L.intCNMicrosoftStart=A,L.prod=$,L.prodCN=I,L.prodMicrosoftStart=M,L.prodCNMicrosoftStart=_,L.superApp=D,L.superAppWeb=N,L.superAppBridge=O;var B=n(77246);var U=n(67536),W=n(42140);class V{static initPage(t,e,n){const i=c.Rb&&c.Rb.ClientSettings||{},{pageGenTime:r=null,detection:o=null}=i||{},{tier:s}=o||{};m.YT.initPage(t,n||u.T3.ActivityIdLowerCaseNoHypens,u.T3.BuildVersion,u.T3.FrontDoorMuid,r,s),e&&(0,f.dT)().then(()=>m.YT.initScrollPerformanceTrackers()),a.n.subscribe(a.Y.Initialized,H)}static getAppTypeTelemetryContract(t,e,n,i){const r=i?.syncStorage??d.YO;let o={aadState:t.userAadState,isSignedIn:t.userSignInStatus,isSso:t.userSsoStatus,loginState:t.userLoginState};if((0,l.NY)())try{const t=(0,d.S8)(r);if(t){const e=z(t);e&&(o={...o,...e})}}catch(t){(0,p.c_)(t,g.lXX,"digital-id: failed to retrieve digital ID cache")}return this.buildTelemetryContract(t,e,n,o,i)}static async getAppTypeTelemetryContractAsync(t,e,n,i){const r=i?.asyncStorage??(0,d.Z5)(d.rw);let o={aadState:t.userAadState,isSignedIn:t.userSignInStatus,isSso:t.userSsoStatus,loginState:t.userLoginState};if((0,l.NY)())try{const t=await(0,d.nx)(r);if(t){const e=z(t);e&&(o={...o,...e})}}catch(t){(0,p.c_)(t,g.lXX,"digital-id: failed to retrieve digital ID cache (async)")}return this.buildTelemetryContract(t,e,n,o,i)}static buildTelemetryContract(t,e,n,i,r){const o=c.Rb?.ClientSettings??{},s=c.Rb?.Diagnostics??{},{mc:a={}}=s||{},{geo_citycf:d,geo_countrycf:l,geo_subdivision:f,requestTrailInfo:p={},travelInfo:g={},detection:m={},modes:w}=o??{},{cdn:y=null}=p??{},{cnex:v=null}=g??{},{scrubbedIp:b,authType:S,authSCN:C,accountType:k,identityType:T,userID:x,cohortID:A,cohortDebugId:$}=m??{},I=function(t,e){let n;switch(t){case"explicit":{const t="homePage"===u.T3.AppType;n={cookieSource:t?"marketPref":"ntps",cookieValue:t?e&&e.marketPref:e&&e.ntps};break}case"implicitNew":case"implicitExisting":case"implicitReset":{const t=decodeURI(e?.spt)||"",[i,r]=function(t){if(!t)return["",""];const e=t.split("|");return[e[2]||"",e[7]||""]}(t);n={cookieSource:"sptmarket",cookieValue:t,mktgeoCountryCode:i,mktgeoCountryCodeCf:r};break}}return n}(u.T3.MarketDetectionType,a),P="true"===o.browser?.ismobile||"phone"===o.deviceFormFactor,R="true"===o.static_page,M=r?.locale??u.T3.CurrentMarket;let _;const E=r?.pageUrl??((0,B.S)()?document.URL:(0,h.e9)(e)),F=E&&(E.includes("vptest=1")||E.includes("reqsrc=vp")),D=V.hasFlight("prg-1sw-logbat"),O=V.hasFlight("tellog10")||void 0,N=w?.uxMode||void 0;return!F&&D&&(_={isRestrictClientLogSize:O,maxClientLogSize:6144}),{browser:{isMobile:P},flight:{id:void 0},locale:{mkt:M,lang:u.T3.MarketRequestInputLanguage,region:u.T3.MarketRequestInputRegion,geo_cc:u.T3.MarketRequestInputGeoCountry,mktReason:u.T3.MarketDetectionType},page:{appType:u.T3.AppType,canvas:t.pageCanvas,config:t.pageConfiguration,content:{title:r?.pageContentTitle??((0,B.S)()?document.title:""),...!j(t.pageContentCategory)&&{category:t.pageContentCategory},...!j(t.pageContentSubCategory)&&{subcategory:t.pageContentSubCategory},...!j(t.pageContentDomainId)&&{domainId:t.pageContentDomainId},...!j(t.pageContentId)&&{id:t.pageContentId},...!j(t.pageContentVertical)&&{vertical:t.pageContentVertical}},isAdEnabled:!1,isAutoRefresh:!1,isJSEnabled:!0,isStatic:R,name:t.pageName,ocid:t.pageOcid,product:t.pageProduct,type:r?.pageType||o.pagetype,url:E,viewType:r?.pageViewType??V.trackCallbacks(n),...!j(t.pageTheme)&&{theme:t.pageTheme},...!j(t.pageHas3PSearch)&&{has3PSearch:t.pageHas3PSearch},uxMode:N},debug:{cetoId:u.T3.ActivityIdLowerCaseNoHypens||null,cdn:y,geoCityCf:d,geoCountryCf:l,geoSubdivision:f,langMismatch:u.T3.MarketMismatchDetail||void 0,detectedDetails:I||void 0,hasTravelerException:v||void 0,detectedIP:b||void 0,detectedIT:S||void 0,detectedSCN:C||void 0,cohortAccountType:k,cohortIdentityType:T,cohortUserID:x,cohortID:A,cohortDebugId:$},...(!j(t.userSignInStatus)||!j(t.userSsoStatus)||!j(t.userAadState))&&{user:i},featureFlags:_}}static getAppTypeTrackingSystemConfig(t){const e=function(t,e,n,i){const r=t&&t.includes("microsoftstart.com")?"MicrosoftStart":"";let o;return o="prod"===e?i?"enterprise":"prod":"int",L[`${o}${n?"CN":""}${r}`]}(c.Rb&&c.Rb.ClientSettings&&c.Rb.ClientSettings.domain,u.T3.Environment,u.T3.IsChinaCompliance,t);return(0,W.a)(e),e}static trackCallbacks(t){let e="";switch((0,i.TU)().currentColumnArrangement){case t.singleColSupported&&r.j1.c1:e="size1column";break;case!t.singleColSupported&&r.j1.c1:case r.j1.c2:e="size2column";break;case r.j1.c3:e="size3column";break;case r.j1.c4:e="size4column";break;case t.fiveColSupported&&r.j1.c5:e="size5column"}return e}static hasFlight(t){const e=u.T3.CurrentRequestTargetScope&&u.T3.CurrentRequestTargetScope.pageExperiments,n=(0,U.Dl)(e);return n&&n.includes(t)}}function H(t){if(t){a.n.get(a.Y.CookieConsentProvider)===o.O.OneTrustBanner&&window.addEventListener(s.M,()=>{const t=m.YT.getPageMetadata();t&&t.contract&&t.contract.page&&(t.contract.page.consentChanged="occ")})}}function z(t){if(!t)return;const e=function(t){if(t)switch(t.at){case"AAD-AL":return"AAD-AL";case"AAD":return"AAD";case"MSA":return"MSA";case"NA":return"NA";default:return}}(t);return{...{aadState:"AAD"===e?1:0,isSignedIn:"MSA"===e,isSso:["AAD","AAD-AL","MSA"].includes(e)},loginState:e,wid:t.wid?t.wid.replace(/^m-/,"").toUpperCase():void 0}}function j(t){return null==t}},50369:function(t,e,n){n.d(e,{A:function(){return i}});const i=(0,n(98763).pV)(()=>({}))},50677:function(t,e,n){n.d(e,{CJ:function(){return f},FH:function(){return l},Wy:function(){return h}});var i=n(28006),r=n(27191),o=n(37805),s=n(96241),a=n(56408),c=n(65022),u=n(93468),d=n(12870);function l(t){const e=o.V.getInstance().rootReducer.connector(i._N);e&&s.$.forcePageReload.getActionSender(e).send(t||a.u.SettingsChange)}function h(t){const e=o.V.getInstance().rootReducer.connector(i._N);e&&s.$.timeForPageReveal.getActionSender(e).send(t)}function f(t){if(!d.Rb.IsPreload)return;if("windowsShell"===d.Rb.ClientSettings.apptype||"windowsShellV2"===d.Rb.ClientSettings.apptype)return t.Win10PerfDCREnabled=1,t[r.l]=t[r.$w],delete t[r.$w],delete t["TTVR.E2E"],delete t["TTVR.Client"],delete t["TTVR.E2E_internal_1"],delete t["TTVR.Client_internal_1"],delete t["TTVR.E2E_internal_2"],delete t["TTVR.Client_internal_2"],void delete t.launchType;const e=function(){const t=o.V.getInstance().rootReducer.connector(i._N);if(!t)return!1;return t.getCurrentState().didRenderStartInBackground}();e&&("edgeChromium"===d.Rb.ClientSettings.apptype?(t[r.le]=1,t[r.x8]=1):t[r.x8]=1);const n=t[r.v4],s=t[r.$w],a=t[r.Sg],l=t[r.RD];let h=!1;if((isNaN(s)||null===s)&&((0,u.vV)(c.ExE,"TTVR missing during preload."),h=!0),(isNaN(n)||null===n)&&((0,u.vV)(c.S6g,"TFPR missing during preload."),h=!0),h)return;const f=t[r.v4]=t[r.$w]=Math.min(n,s);e&&(t[r.l]=s),isNaN(a)||null===a?(0,u.vV)(c.xrv,"TTVR.SearchBox missing during preload."):t[r.Sg]=Math.min(f,a),isNaN(l)||null===l?(0,u.vV)(c.FK$,"TTF.SearchBox missing during preload."):t[r.RD]=Math.min(f,l)}},50759:function(t,e,n){n.d(e,{DV:function(){return g},ZC:function(){return w},f_:function(){return S},lF:function(){return y},rk:function(){return m}});var i=n(77246),r=n(17720),o=n(65022),s=n(93468),a=n(54761),c=n(12870),u=n(55593),d=n(41820),l=n(98793),h=n(69118);const f="__StoredTopSitesState__",p="__TopSitesCollapsibleControlConfig__";function g(t){t&&r.vv.set(p,t);const e=m();e&&r.vv.set(p,e)}function m(){try{const t=h.h.getWpoTreatmentsWithType(a.Ar.topsitesCollapse),e=h.h.getWpoTreatmentsWithType(a.Ar.topSites),n=[...t||[],...e||[]],i=n?.length>0&&n[0]?.properties?.topSitesCollapsibleControlConfig||void 0;return i?.promoteTopSites2Row&&window.isSSREnabled&&(i.promoteTopSites2Row=!1),r.vv.set(p,i),i||null}catch(t){const e="Error in getting wpo topSites config";(0,s.vV)(o.rSI,e,`error:${t}`)}return null}function w(){try{const t=h.h.getWpoTreatmentsWithType(a.Ar.topSitesPromotion),e=h.h.getWpoTreatmentsWithType(a.Ar.topSites),n=[...t||[],...e||[]];if(n?.length>0&&n[0].properties)return n[0].properties}catch(t){const e="Error in getting wpo topSites config";(0,s.vV)(o.rSI,e,`error:${t}`)}return null}async function y(t){const e=await l.Q.getPreferenceSetting(d.K5.tscollapsed),n=e?.value;(0,i.S)()||v(n);const o=b();if(void 0!==n||!o)return 1===n;const s=r.vv.get(f);if(void 0!==s)return s;let a=o.collapsibleControlIsDefaultCollapsed;return a&&o.collapseForDefaultInformational&&(a="always"===t.selectedFeedDisplaySetting),r.vv.set(f,!!a),!!a}function v(t){const e=c.Rb.EdgeNTPHeader?.tscollapsed;if(void 0!==e&&e!==t){"true"===(0,u.a)().get("mock-ntp-header")||(0,s.vV)(o.ZuI,"SSR - Edge header mismatch.",void 0,{...o.ZuI.pb,customMessage:`key: tsCollapsed, header: ${e}, state: ${t}`})}}function b(){return r.vv.get(p)||m()}async function S(){const t=await l.Q.getPreferenceSetting(d.K5.tscollapsed),e=t?.value;if((0,i.S)()||v(e),e===d.Wl.WPO_BEFORE_OPEN)return!0;if(e===d.Wl.WPO_CLOSED||e===d.Wl.WPO_BEFORE_CLOSE){const t=b();if(t?.expandForAllLayout)return!0}return!1}},50802:function(t,e,n){n.d(e,{BZ:function(){return m},WV:function(){return f},bH:function(){return v},n6:function(){return g},sv:function(){return w}});var i=n(89980),r=n(53626),o=n(65022),s=n(88294),a=n(93468),c=n(51267),u=n(63418),d=n(98216);let l,h;function f(){h=(0,u.ab)()||""}const p=t=>(t?(0,i.Lg)().removeObject(r.CQ):(0,i.Lg)().getObject(r.CQ))??void 0;function g(t=!0){const e=p(t);if(e){s.v.logObjects("pageRevealDelegate:isForceReloadRequested, time: "+new Date(e.time).toTimeString());const t=e.time;if(l=e.data,t>performance.timeOrigin)return!0;(0,a.vV)(o.Snd,"Can't reload page as the last invalidation time is not usable. no need to reload since content and request is latest",void 0,{...o.Snd.pb,time:t,timeOrigin:performance.timeOrigin,invalidationReason:l},!1)}return function(){const t=(0,u.ab)()||"";if(h!==t)return l=1,(0,i.Lg)().setItem(r.Z6,`Previous MUID: ${t}, New MUID: ${h}`),!0;return!1}()}function m(){const t=p(!1);return!!(t&&t.time>performance.timeOrigin)}function w(t,e=!1){!function(t){l&&((0,i.Lg)().setItem(r.T7,l+""),(0,i.Lg)().setItem(r.jK,Math.round(t-performance.timeOrigin).toString()))}(t),(0,c.J)({newUrl:y(e),invalidatePageCache:!1})}function y(t=!1){const e=location.href;return e?e.replace(/prerender(=\d)?/,"invalidaterender=1")+(t?"&stale=1":""):""}function v(){const t=(0,i.Lg)().removeItem(r.T7),e=(0,i.Lg)().removeItem(r.jK),n=(0,i.Lg)().removeItem(r.Z6);t&&d.YT.addOrUpdateCustomProperty(r.T7,t),e&&d.YT.addOrUpdateCustomProperty(r.jK,e),n&&(0,a.vV)(o.zFb,"",void 0,{...o.zFb.pb,customMessage:n},!1)}},50999:function(t,e,n){n.d(e,{j:function(){return h}});var i=n(98216),r=n(53384),o=n(67387),s=n(89980),a=n(41423),c=n(56485),u=n(26142);const d="tp";var l=n(77246);class h extends u.u{constructor(t,e){super(t,e);const n=(0,a.w)(),r=n.getSelectedPivot();if(r&&r.telemetryPivotCategory){let t;t.page.pivot=r.telemetryPivotCategory,i.YT.updatePageMetadata(t)}(0,l.S)()&&n.addSwitchListener(h.onPivotSwitch,c.M.Telemetry)}static onPivotSwitch(t){let e;const n=t.newSelection;if(n&&(i.YT.addOrUpdateCustomProperty(d,n.display),e={feed:{id:n.pivotId,name:n.display,type:"xfeed"===n.telemetryPageName?"category filter":void 0},page:{content:{topic:n.display},pivot:""}},n.telemetryPivotCategory&&(e.page.pivot=n.telemetryPivotCategory),n.telemetryVertical&&(e.page.content.vertical=n.telemetryVertical),n.telemetryPageType&&(e.page.type=n.telemetryPageType),"gaming"===n.pivotId&&(e.feed.id=`gaming/${(0,r.SQ)()}`),"following"===n.pivotId&&(e.feed.id=`following/${(0,r.SQ)()}`),i.YT.updatePageMetadata(e)),t.oldSelection||h.isPivotManagerSwitched){if(h.isPivotManagerSwitched=!1,n.telemetryPageName)e.page.name=n.telemetryPageName;else if(n.pivotId)switch(n.pivotId){case"productivityHub":e.page.name="entnewshp";break;case"myfeed":case"myFeed":e.page.name="default";break;case"myInterests":e.page.name="cinterests";break;case"gaming":e.page.name="gaming";break;case"play":e.page.name="play";break;case"navigationPage":e.page.name="navigationPage";break;case"following":e.page.name="following",e.feed.id=`following/${o.Cr.Manual}`}"gaming"===n.pivotId&&(e.feed.id=`gaming/${o.Cr.Manual}`,e.page.isCorePV=!0);const t="IsGamer",r="IsXboxGamer",a="IsPCGamer",c=(0,s.Lg)().getItem("userType");return i.YT.addOrUpdateTmplProperty(t,c&&c.includes(t)?"1":"0"),i.YT.addOrUpdateTmplProperty(r,c&&c.includes(r)?"1":"0"),i.YT.addOrUpdateTmplProperty(a,c&&c.includes(a)?"1":"0"),i.YT.updateRequestId(),i.YT.updatePageMetadata(e),void i.YT.sendPageView(null,!0)}}}h.isPivotManagerSwitched=!1},51267:function(t,e,n){n.d(e,{J:function(){return s},t:function(){return a}});var i=n(77246),r=n(89980);let o={};function s(t){t=t||{},(async()=>{const{newUrl:e,invalidatePageCache:n=!0}=t;if(n){const{invalidatePageCacheHandler:t}=o;if(t){const e=t();e&&e.then&&await e}}e?((0,r.Lg)().setItem("reloadPage","refreshPagewithNewUrl"),window.location.replace(e)):((0,r.Lg)().setItem("reloadPage","refreshPageNoNewUrl"),window.location.reload(n))})()}const a={resetHandlers:function(){o={}},setHandlers:function(t){(0,i.S)()&&t&&(o=t)}}},51275:function(t,e,n){n.d(e,{J:function(){return P},LJ:function(){return M},D4:function(){return y},f_:function(){return R},YF:function(){return _},xE:function(){return v},OA:function(){return $},pg:function(){return k},$3:function(){return T},Yt:function(){return I}});var i,r=n(84397),o=n(45084);!function(t){t.Image="image",t.Title="title",t.Data="data"}(i||(i={}));var s=n(93468),a=n(65022),c=n(77246),u=n(63456),d=n(8555),l=n(6383),h=n(21629),f=n(52063),p=n(18e3),g=n(12870),m=n(2429),w=n(98216);function y(t,e,n){return n?e||r.hO[t]||"Sponsored":e||r.TR[t]||"Ad"}function v(t,e){return g.Rb?.CurrentFlightSet?.has("prg-ad-mon-feedback")&&e?(w.YT.addOrUpdateTmplProperty("adFeedbackMonetizeEligible","1"),e):function(t){let e="";if(!t)return e;try{const n=JSON.parse(t).tcb;n&&Array.isArray(n)&&n.forEach(t=>{t.includes("srtb")&&(e=t.replace("notify/clicked","notify/feedback"))})}catch(t){e=""}return e}(t)}function b(t,e,n,i){try{const n=(0,u.A)(e,"data.ext.msft.msan_data");i(t,e,"string"==typeof n?JSON.parse(n):n)}catch(t){(0,s.vV)(a.eN3,`Ad response with invalid ${n} data`,void 0,{...a.eN3.pb,customMessage:`${t&&t.message}`,ext:(0,u.A)(e,"data")})}}function S(t,e){const n=e?.image??e?.img,i=(0,u.A)(e,"image.type")??(0,u.A)(e,"img.type"),r=(0,d.A)(o.eO,t=>t===`image-${i}`);return r&&(t[r]={w:n?.w,h:n?.h,url:n?.url,ext:n?.ext}),t}function C(t,e){return t.title=e.title.text,t}function k(t,e,n){if(n){const n=(0,l.A)(e,(t,e)=>{if(e?.data){const n=(0,u.A)(e,"data.type"),i=(0,d.A)(o.eO,t=>t===`data-${n}`);if(i)if(o.bf.includes(i))try{const n=(0,u.A)(e,"data.value")||"{}";t[i]=JSON.parse(n)}catch(n){(0,s.vV)(a.eN3,`Ad response with invalid ${i} compound data`,void 0,{...a.eN3.pb,customMessage:`${n&&n.message}`,compoundValue:(0,u.A)(e,"data.value")}),t[i]={}}else switch(i){case o.qy.PopupDisclaimer:!function(t,e,n){b(t,e,n,(t,e,i)=>{const r=(0,u.A)(e,"data.value");if(!r||0===r.length)throw new TypeError("Popup disclaimer title field is empty or missing");if(!i||!i.text||0===i.text.length)throw new TypeError("Popup disclaimer text field is empty or missing");const o={title:r,text:i.text,url:i.url};t[n]=o})}(t,e,i);break;case o.qy.WorkingHoursItem:!function(t,e,n){b(t,e,n,(t,e,n)=>{var i;t.workingHours=(0,u.A)(e,"data.value"),t.workingHoursStatus=n?.working_hours?.status,t.workingHoursIsOpen=(i=n?.working_hours?.is_open,"1"===i||"string"==typeof i&&"true"===i.toLowerCase())})}(t,e,i);break;case o.qy.ReviewRatingItem:!function(t,e,n){b(t,e,n,(t,e,n)=>{t.rating=(0,u.A)(e,"data.value"),t.review=n?.rating?.reviews})}(t,e,i);break;case o.qy.Callout:!function(t,e,n){b(t,e,n,(t,e,n)=>{const i=(0,d.A)(o.eO,t=>t===`data-${n.callout_data_type}`);if(!i)throw new TypeError("Invalid callout sub type");t[i]=(0,u.A)(e,"data.value")})}(t,e,i);break;default:{const n=(0,u.A)(e,"data.value");t[i]=n;break}}else(0,s.vV)(a.eN3,`Ad response with invalid ${i} data`,void 0,{...a.eN3.pb,customMessage:`No mapping found in assetKeyMap for data-${n}`,ext:(0,u.A)(e,"data")})}else e?.image||e?.img?S(t,e):e?.title&&C(t,e);return t},{});t.assets=n}else{const n=(0,l.A)(e,(t,e)=>{if(e?.data){const n=(0,u.A)(e,"data.type"),i=(0,d.A)(o.eO,t=>t===`data-${n}`);if(i)if(o.bf.includes(i)){const n=(0,u.A)(e,"data.value")||"{}";t[i]=JSON.parse(n)}else if("popupDisclaimer"==i)try{const n=(0,u.A)(e,"data.value"),r=(0,u.A)(e,"data.ext.msft.msan_data"),o=JSON.parse(r);if(!n||0===n.length)throw new TypeError("Popup disclaimer title field is empty or missing");if(!o||!o.text||0===o.text.length)throw new TypeError("Popup disclaimer text field is empty or missing");const s={title:n,text:o.text,url:o.url};t[i]=s}catch(t){(0,s.vV)(a.eN3,"Ad response with invalid popup disclaimer data",void 0,{...a.eN3.pb,customMessage:`${t&&t.message}`,ext:(0,u.A)(e,"data")})}else{const n=(0,u.A)(e,"data.value");t[i]=n}}else e?.image||e?.img?S(t,e):e?.title&&C(t,e);return t},{});t.assets=n}}function T(t,e,n){let i;if(e)i=t.imp[0];else{if(!t.data)return;try{i=JSON.parse(t.data)}catch(e){(0,s.vV)(a.BKY,"Invalid JSON sent to card mapper from WPO Boost",void 0,{...a.BKY.pb,customMessage:`${e&&e.message}`,wpoJson:t.data})}}const r=x(i,!0)?.promotions?.[0];return(0,c.S)()&&P(r,n),"11730609"===i.tagid?r.isProng2Promotion=!0:"11730608"==i.tagid&&(r.isProng1Promotion=!0),r}function x(t,e){if(!(t.Promotions&&t.Promotions.length>0))return;const n={promotions:[]};return e?n.promotions[0]=A(t.Promotions[0]):n.promotions=t.Promotions.map(t=>A(t)),n}function A(t){const{images:e,longTitle:n,title:i,description:r,displayUrl:o,targetUrl:s,Beacons:a,brand:c,merchantCategory:u,actionText:d,logo:l,adScenarioType:h,rebateValue:f,minPurchaseValue:p,valueType:g,nativeAdType:m,annotation:w,scope:y,priceCurrencySymbol:v,market:b,dealPrice:S,originalPrice:C}=t,{imageUrl:k}=e&&e[0],T=1==m||8==m,x=a.map(t=>t.MIFeedbackurl),A=a.map(t=>t.MVFeedbackurl),$=a.map(t=>t.EventUrl?.replace("{ACTION}","click")),I=a&&a[0]?.FeedbackUrl,P=S||C,R=JSON.stringify({tcb:$||[]}),M=JSON.stringify({tvb:A,trb:x,e:!0,tjb:[]});return{region:"rr_amp",regionIndex:void 0,destinationUrl:s||"",imageUrl:k||"",imageUrlFallback:e[1]?.imageUrl||k,tagLine:n||i,logoText:o||"",clickBeacons:R||"",beaconsJson:M||"",images:e,logo:l,brand:c||"",title:i||"",category:u||"",actionText:d||"",logoUrl:l?.imageUrl,adScenarioType:h,rebateValue:f,minPurchaseValue:p,valueType:g,isStoreWide:1==y,isTextAd:T,priceCurrencySymbol:v,market:b,priceTag:P||"",nativeAdType:m,isAffiliateOffer:16==m,annotation:w||"",adFeedbackUrl:I||""}}function $(t,e){if(!function(t,e=0){return t.Promotions&&t.Promotions.length>e}(t))return;const n=t.Promotions[0],{images:i,longTitle:r,title:o,description:s,displayUrl:a,targetUrl:c,Beacons:u}=n,{height:d,width:l,imageUrl:h}=i[0];let f="",p="";f=d&&d.toString(),p=l&&l.toString();const g=u.map(t=>t.MIFeedbackurl),m=u.map(t=>t.MVFeedbackurl),w=u.map(t=>t.EventUrl?.replace("{ACTION}","click")),y=JSON.stringify({tcb:w||[]}),v={region:"rr_amp",regionIndex:1,items:[],adServedUrls:g,visibilityUrls:m,beaconsJson:JSON.stringify({tvb:m,trb:g,e:!0,tjb:[]})},b={destinationUrl:c,imageHeight:f,imageUrl:h,imageWidth:p,title:r||o,description:s,prong2AmplifyBusinessName:a,clickBeacons:y};return v.items.push(b),v.imageHeight=f,v.imageWidth=p,v}function I(t,e,n){if(!t||!t.index||!t.region)return;const{adServedUrls:i,beaconsJson:o,index:u,items:d,jsTrackerUrls:l,locale:p,privacyUrl:w,providerId:b,region:S,visibilityUrls:C,crids:T,pageType:x,feedbackUrl:A}=t,$={adServedUrls:i,beaconsJson:o,crids:T,items:[],jsTrackerUrls:l,privacyUrl:w,providerId:b,region:S,regionIndex:u,visibilityUrls:C};$.adLabelText=y(p,"",n?.enableAdSponsoredText),$.isGreyAdsLabelEnabled=r.J8.includes(p);let I="",P="";return d.forEach(e=>{const{adChoicesUrl:i,adScenarioType:r,adSelectionCriteria:o,assets:u,clickBeacons:d,description:l,eventtrackers:p,imageHeight:g,imageWidth:w,imageUrl:y,originalImageHeight:b,originalImageWidth:S,sourceName:C,title:T,uniqueId:R,url:M,verificationParameters:_,ClickBeacons:E,adSelectionReason:F}=e;I=g&&g.toString(),P=w&&w.toString();const D={adChoiceIconUrl:i,adScenarioType:r,adSelectionCriteria:o,assets:u,clickBeacons:d,destinationUrl:M,description:l,feedbackUrl:A||(d||E)&&v(d??E,e?.feedback_url),imageHeight:I,imageUrl:y,imageWidth:P,originalImageHeight:b&&b.toString(),originalImageWidth:S&&S.toString(),providerName:C,title:T,uniqueId:R,verificationParameters:_,eventtrackers:p},O=(0,m.ul)(o,F);if(O&&(D.advertiserDomain=O),n?.readAdScenarioTypeFromMsnKv){const e=!!r,n=t?.msft?.msn_kv,i=(0,h.E)(n);if(e&&!!!i?.adScenarioType&&(0,s.vV)(a.QQG,"adScenarioType is missing in msn_kv","",{adScenarioType:r,wpoPlacement:JSON.stringify(t),csr:(0,c.S)()}),i){const t=i.adScenarioType;r&&(D.adScenarioType=t)}}!x||"edgechrntp"!==x&&"edgechrntpruby"!==x||(k(D,u,n?.passVAXandrMigrationSignals),n?.adTemplateConfig?.enableVAPhase2&&n?.adTemplateConfig?.supportedAdScenarioTypes.includes(D.adScenarioType)&&(0,f.JX)(D,u,n?.passVAXandrMigrationSignals)),$.items.push(D)}),$.imageHeight=I,$.imageWidth=P,g.Rb?.CurrentFlightSet?.has("prg-ad-rmauctype")||($.adAuctionType=t.adAuctionType),$}function P(t,e){if(t.beaconsJson){new p.m(e).sendBeaconForAdServed({beaconsJson:t.beaconsJson,beaconsSupportHttpPOST:t.beaconsSupportHttpPOST})}}function R(t,e){const n=[];if(e){const i=e.reduce((e,n,i)=>{const r=(0,d.A)(o.eO,t=>t===n);if(r){const n={...o.ux[r],id:i+1};"img"===r&&(n.img={w:t.img?.w,h:t.img?.h,...n.img}),e.push(n)}return e},[]);n.push(i)}return n}const M=t=>"resriver"===t||"resinfopane"===t?t.replace("res",""):t,_=t=>new Set(t.map(t=>t.assetId)).size!==t.length?((0,s.vV)(a.WsM,"duplicate DTS config assetId",void 0,t),!1):t.every(t=>t.assetId&&t.type?Object.values(i).includes(t.type)?t.type===i.Title||void 0!==t.subTypeId||((0,s.vV)(a.WsM,"invalid DTS asset type - subTypeId is required",void 0,t),!1):((0,s.vV)(a.WsM,"invalid DTS asset type",void 0,t),!1):((0,s.vV)(a.WsM,"DTS asset.assetId or asset.type is undefined",void 0,t),!1))},51518:function(t,e,n){n.d(e,{E:function(){return o}});var i=n(27261);const r=(0,n(98763).Xe)();!function(){const t=(0,i.$N)()?.match(/ems=([\d]+)/)?.[1];r.set(t&&parseInt(t)||5)}();const o=t=>Math.floor(101*Math.random())<=(t||r.get())},51600:function(t,e,n){n.d(e,{He:function(){return w},Ki:function(){return h},LV:function(){return p},Pz:function(){return l},Ro:function(){return f},Sv:function(){return k},XP:function(){return y},f5:function(){return d},oQ:function(){return b},uS:function(){return S}});var i=n(38796),r=n(7074);let o;const s="//img-s-msn-com.akamaized.net/tenant/amp/entityid/",a="//img-s.msn.cn/tenant/amp/entityid/",c="//prod-streaming-video-msn-com.akamaized.net/",u="//prod-streaming-video.msn.cn/";var d,l;!function(t){t.JPG="jpg",t.PNG="png",t.WEBP="webp"}(d||(d={})),function(t){t[t.None=0]="None",t[t.Letterbox=1]="Letterbox",t[t.Scale=2]="Scale",t[t.Stretch=3]="Stretch",t[t.Crop=4]="Crop",t[t.FocalCrop=5]="FocalCrop",t[t.FacialCrop=6]="FacialCrop"}(l||(l={}));const h=90,f="www.bing.com/th",p=new RegExp(/bing\.(com|net)\/th/),g=new RegExp(/copilot\.microsoft\.com/),m=new RegExp(/gettyimages\.com/);function w(t,e){return`${(0,i.HT)()?u:c}${t}.${e||"mp4"}`}function y(t,e){return b(((0,i.HT)()?a:s)+t,e)}const v=Math.ceil(4*Math.random())||4;function b(t,e,n=!1){if(t&&p.test(t))return function(t,e,n=!1){try{const i=C(new URL(t),e);return n&&!i.searchParams.has("pid")&&i.searchParams.set("pid","wdpv2"),i.href}catch(n){const i=C(new URL(`https://${t}`),e);return`//${i.host}${i.pathname}${i.search}`}}(t,e,n);if(t&&g.test(t))return k(t,e);if(t&&m.test(t)&&n)return t;const{focalRegion:i,backgroundColor:s}=e;let{width:a=0,height:c=0,format:u=d.JPG}=e,l="";if(i){const t=x(i.x1,i.x2),e=x(i.y1,i.y2);null!=t&&null!=e&&(l+=`&x=${t}&y=${e}`)}s&&(l+=`&b=${s}`);const f=null==e.mode?6:e.mode;if(6===f&&(l+="&u=t"),e.enableDpiScaling){if(!e.devicePixelRatio)throw new Error("A valid devicePixelRatio value must be provided when DPI scaling is enabled");const t=function(t){if(T()&&o)return o;if(t<1)return null;let e=t;(0,r.A)(4*e)||(e=Math.ceil(10*e)/10);e>3&&(e=3);T()&&(o=e);return e}(e.devicePixelRatio);t&&(a=Math.round(a*t),c=Math.round(c*t))}let w=e.quality||60;return e.enableWebpFormat&&(u=d.WEBP,w=e.quality||h,t=S(t)),`${t}?w=${a}&h=${c}&q=${w}&m=${f}&f=${u}${l}`}function S(t){return t&&(0,i.HT)()&&t.indexOf(s)>=0?t.replace(s,a):t}function C(t,e){(0,i.HT)()&&(t.hostname=`ts${v}.tc.mm.bing.net`);const{width:n=0,height:r=0}=e,o=e.quality||h,s=e.crop||0===e.crop?e.crop:1;if(t.searchParams.set("w",`${n}`),t.searchParams.set("h",`${r}`),t.searchParams.set("qlt",`${o}`),t.searchParams.set("c",`${s}`),t.searchParams.set("rs","1"),e.enableDpiScaling){t.searchParams.set("dpr",`${e.devicePixelRatio}`);const n=e.padding||0;t.searchParams.set("p",`${n}`)}return t}function k(t,e){const{width:n=0,height:i=0,format:r=d.JPG,crop:o=1,padding:s=0}=e;let a;try{a=new URL(t)}catch(e){return t}return a.searchParams.set("w",n.toString()),a.searchParams.set("h",i.toString()),a.searchParams.set("f",r.toString()),a.searchParams.set("c",o.toString()),a.searchParams.set("rs","1"),a.searchParams.set("p",s.toString()),a.toString()}function T(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function x(t,e){if(null!=t&&null!=e)return Math.floor((t+e)/2)}},51673:function(t,e,n){function i(t,e,n=!1){return!t||r(t,e)&&o(t,e)&&s(t,e)&&a(t,e)&&c(t,e)&&d(t,e,n)&&l(t,e)&&h(t,e)&&f(t,e)&&p(t,e)&&function(t,e){return!t.uxMode||e?.modes?.uxMode===t.uxMode}(t,e)}function r(t,e){return!t.audienceMode||e.audienceMode===t.audienceMode}function o(t,e){if(!t.browser)return!0;if(!e.browser)return!1;const{browserType:n,version:i}=e.browser,{browserType:r,version:o}=t.browser;if(r&&r!==n)return!1;if(!o)return!0;if("string"==typeof o)return i===o;if("object"==typeof o){const t=parseInt(i);let e;for(e in o){const n=o[e];if(null!=n)switch(e){case"equals":if(t!==n)return!1;break;case"greaterThan":if(!(t>n))return!1;break;case"lessThan":if(!(t<n))return!1;break;case"notEquals":if(t===n)return!1;break;case"oneOf":if(-1===n.indexOf(t))return!1;break;default:return!1}}return!0}return!1}function s(t,e){return!t.deviceFormFactor||e.deviceFormFactor===t.deviceFormFactor}function a(t,e){return!t.domain||e.domain===t.domain}function c(t,e){return e.pageExperiments=e.pageExperiments||[],"string"!=typeof t.experimentId||0===Object.keys(t.experimentId).length||e.pageExperiments.indexOf(t.experimentId)>=0}function u(t,e){return 0===(t||"").localeCompare(e||"",void 0,{sensitivity:"accent"})}function d(t,e,n){const i=t.locale;if(!i)return!0;let r;return e.locale&&(r=n?e.locale.display:e.locale.content),!!r&&!(i.language&&!u(i.language,r.language)||i.market&&!u(i.market,r.market)||i.script&&!u(i.script,r.script))}function l(t,e){return function(t,e){if(!t)return!0;if(!e)return!1;if("string"==typeof t&&u(t,e))return!0;if("object"!=typeof t)return!1;const n=e.toLowerCase();if(t.startsWith&&!n.startsWith(t.startsWith.toLowerCase()))return!1;if(t.endsWith&&!n.endsWith(t.endsWith.toLowerCase()))return!1;if(t.equals&&!u(t.equals,e))return!1;if(t.notEquals&&u(t.notEquals,e))return!1;if(t.contains&&!n.includes(t.contains.toLowerCase()))return!1;if(t.oneOf&&-1===t.oneOf.indexOf(e))return!1;return!0}(t.ocid,e.ocid)}function h(t,e){return!t.os||e.os===t.os}function f(t,e){const n=t.pageType;if(!n)return!0;const i=e.pageType;if(!i)return!1;if("string"==typeof n)return n===i;if(n.exact&&n.exact.toUpperCase()===i.toUpperCase())return!0;if(n.segments){const t=n.segments,e=i.split("::");if(e&&e.length>0){for(const n in t){const i=parseInt(n),r=t[n];if(!r||isNaN(i)||"string"!=typeof r||i>=e.length||r.toUpperCase()!==e[i].toUpperCase())return!1}return!0}}return!1}function p(t,e){return!t.platform||e.platform===t.platform}n.d(e,{Bu:function(){return o},HB:function(){return h},Hy:function(){return a},QQ:function(){return p},SN:function(){return c},Ui:function(){return l},_P:function(){return f},c$:function(){return u},eG:function(){return r},oH:function(){return i},vk:function(){return d},xW:function(){return s}})},51787:function(t,e,n){n.d(e,{cG:function(){return h}});var i=n(12870),r=n(98216),o=n(65022),s=n(93468),a=n(84397),c=n(77246);const u={180:"101",270:"102",360:"103",540:"104",720:"105",1080:"107"};function d(t,e,n,o,s,c){if(!t||!e)return;const u=t.target.parentElement,d=t.target.querySelector("video"),l=JSON.parse(u.attributes["data-t"]?.value).n,h=t.target.player,f=function(t){const e={AdStart:"AdPlayStarted",AdComplete:"AdPlayCompleted",EventPause:"Pause",ContentResume:"Resume",seeked:"Seek",error:"ContentError",canplay:"Canplay",canplaythrough:"Canplaythrough"};return e[t]&&(t=e[t]),a.cR[t]}(e.name),p=e.data??{PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"},g="video/mp4"===h?.currentType(),m={type:61,name:"nativeAds_"+l,ext:{videoCs:n,eventType:f,timeElasped:d.currentTime,videoFormatCode:g?Number(c?.format):1006,title:o,videoDuration:h?.duration(),fr:i.Rb?.ClientSettings?.geo_country+"_"+i.Rb?.ClientSettings?.geo_city+"_"+i.Rb?.Locale+"_"+s,pageGroup:"",playerInstanceId:t.target.id,playType:"pb",playerTech:p.PlayerTechnology,pluginVersion:p.PlayerTechnology,size:d.clientWidth+"x"+d.clientHeight,videoPlayerType:p.VideoPlayerType,playerType:p.PlayerTechnology,playDuration:d.currentTime,inline:!1,videoUrl:h?.src(),errorType:"error"===e.name?h?.error()?.code:null,errorDescription:"error"===e.name?h?.error()?.message:null,bandwidth:g?null:h?.tech_?.hls?.bandwidth,throughput:g?null:h?.tech_?.hls?.throughput,bufferWaitTime:e.data?.bufferTime}};r.YT.sendVideoPlayEvent(m,u,!0)}function l(t,e){t&&(t.bigPlayButton&&t.bigPlayButton.el_&&t.bigPlayButton.enabled_&&(t.bigPlayButton.el_.style.display="none"),t.loadingSpinner&&t.loadingSpinner.el_&&(t.loadingSpinner.el_.style.display="none"),e&&(e.style.display="none"))}function h(t,e,n=!0){if((0,c.S)()&&t&&t.items&&t.items.length>e&&t.items[e].video){const i=new DOMParser,r=function(){if(!(0,c.S)())return;if(!window.trustedTypes||!window.trustedTypes.createPolicy)return;const t=window.trustedTypePolicies||(window.trustedTypePolicies={});if(t.xmlPassThroughPolicy)return t.xmlPassThroughPolicy;const e=window.trustedTypes.createPolicy("xmlPassThroughPolicy",{createHTML:t=>t});return t.xmlPassThroughPolicy=e,e}(),a=r?r.createHTML(t.items[e].video):t.items[e].video,h=i.parseFromString(a,"application/xml"),f=t.region,p=h.getElementsByTagName("MediaFile"),g=Array.from(p).map(t=>{return{url:t.textContent,delivery:t.getAttribute("delivery"),id:t.getAttribute("id"),bitrate:Number(t.getAttribute("bitrate")),minBitrate:Number(t.getAttribute("minBitrate")),maxBitrate:Number(t.getAttribute("maxBitrate")),codec:t.getAttribute("codec"),scalable:!!Number(t.getAttribute("scalable")),maintainAspectRatio:!!Number(t.getAttribute("maintainAspectRatio")),width:Number(t.getAttribute("width")),height:Number(t.getAttribute("height")),contentType:t.getAttribute("type"),format:(e=t.getAttribute("type"),n=t.getAttribute("height"),"application/x-mpegURL"==e?"1006":u[n])};var e,n}),m=h.getElementsByTagName("Duration"),w=m.length>0?m[0].textContent:null,y=h.getElementsByTagName("Tracking"),v=Array.from(y).map(t=>({value:t.textContent,event:t.getAttribute("event"),offset:t.getAttribute("offset")})),b=h.getElementsByTagName("Ad"),S=b.length>0?Number(b[0].getAttribute("id")):null,C=h.getElementsByTagName("AdTitle"),k=C.length>0?C[0].textContent:"",T=h.getElementsByTagName("AdServingId"),x=T.length>0?T[0].textContent:"",A=h.getElementsByTagName("ClickThrough"),$=A.length>0?A[0].textContent:"",I=h.getElementsByTagName("Impression"),P=I.length>0?I[0].textContent:"",R=h.getElementsByTagName("Pricing");let M=null,_=null,E=null;R.length>0&&(M=Number(R[0].textContent),_=R[0].getAttribute("model"),E=R[0].getAttribute("currency"));let F=null,D=null;const O=x+"_"+S,N=async(t,e,n,i)=>{if("telemetry"===t?.type&&("ContentOpen"==e.name&&(F=Date.now(),D=F),d(t,e,O,k,f,i)),"error"===n)(0,s.vV)(o.G1m,e.error()?.message),d(t,{name:"error",data:{VideoDuration:w,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},O,k,f,i);else if(F&&"canplay"===n){const e=Date.now()-F;F=null,d(t,{name:n,data:{VideoDuration:w,bufferTime:e,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},O,k,f,i)}else if(D&&"canplaythrough"===n){const e=Date.now()-D;D=null,d(t,{name:n,data:{VideoDuration:w,bufferTime:e,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},O,k,f,i)}},L=document.createElement("div");L.id="nativeAdVideoMask",L.className="nativeAdVideoMask-mask",L.style.cssText="position:absolute;inset:0px;background-image:var(--mask-gradient, linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0,0,0,0) 176px));display:flex;";const B=(t,e)=>{let[i,r,o,s,a,c,u,d]=[null,null,null,null,null,null,null,null],[h,p,g]=[null,null,null];const m=!!t&&t.el_&&t.el_.querySelector("#nativeAdVideoMask");if(n?(h=!!t&&t.el_&&t.el_.getRootNode().host&&t.el_.getRootNode().host.getRootNode(),p=!!h&&h.host&&h.host.parentElement&&h.host.parentElement.querySelector("native-ad-video-controls")&&h.host.parentElement.querySelector("native-ad-video-controls").shadowRoot,g=!!h&&h.host&&h.host.parentElement&&h.host.parentElement.parentElement&&h.host.parentElement.parentElement.querySelector("native-ad-video-controls")&&h.host.parentElement.parentElement.querySelector("native-ad-video-controls").shadowRoot):(p=!!t&&t.el_&&t.el_.parentElement&&t.el_.parentElement.parentElement,g=!!p&&p.parentElement,h=p||g),h&&(u=h.querySelector(".video-ad-background-img-river"),d=h.querySelector(".video-ad-background-img-infopane")),p&&(s=p.querySelector("#nativead-video-replay-button-river"),a=p.querySelector("#nativead-video-learn-more-button-river")),g&&(i=g.querySelector("#nativead-video-play-button-infopane"),r=g.querySelector("#nativead-video-replay-button-infopane"),o=g.querySelector("#nativead-video-learn-more-button-infopane"),n?c=h.host.parentElement.parentElement.querySelector(".info-pane-slide-title"):"infopane"==f&&(c=g.nextElementSibling&&g.nextElementSibling.querySelector("h3"))),e&&"ended"==e.toLowerCase()&&(s&&(s.style.display="block"),r&&(r.style.display="block"),o&&(o.style.display="block"),a&&(a.style.display="block")),t&&t.errorDisplay&&t.errorDisplay.el_&&(t.errorDisplay.el_.style.display="none"),e&&"play"==e.toLowerCase()&&(s&&(s.style.display="none"),i&&(i.style.display="none"),r&&(r.style.display="none"),o&&(o.style.display="none"),a&&(a.style.display="none"),c&&(c.style.display="none"),m&&(m.style.display="none")),e&&"error"==e.toLowerCase()&&t&&"video/mp4"==t.currentType()&&l(t,i),e&&"pause"==e.toLowerCase()&&(c&&(c.style.display=null),m&&(m.style.display="flex")),e&&"ready"==e.toLowerCase()){if(u&&(u.style.display="none"),d&&(d.style.display="none"),i){i.style.display="block";const e=t&&t.posterImage&&t.posterImage.el_;if(e){const n=e.nextSibling;t.el_.insertBefore(L,n)}}t&&!t.currentSrc()&&l(t,i)}};return{VideoPlayerProps:{posterUrl:t.items[e].imageUrl,onMessage:(t,e,n,i)=>{B(e,n),N(t,e,n,i)},videoMetadataProps:{videoSources:g},playerConfigProps:{autoplay:"river"==f,inViewPlay:"river"==f,replayWhenInView:!1,outOfViewPause:!0,inViewPlayPercentage:.5,muted:!0,disableSeek:!0,disableSeekButtons:!0,useProgressiveVideoFallback:!0}},ViewabilityProps:{Duration:w,TrackingEvents:v},VideoAdProps:{AdId:S,AdTitle:k,AdServingId:x,ClickThrough:$,Impression:P,Price:M,PricingModel:_,Currency:E}}}return null}},51947:function(t,e,n){n.d(e,{UJ:function(){return r},V$:function(){return s},ZU:function(){return a},Zc:function(){return o}});var i=n(78606);const r="rd",o="OSATE",s="OSAT",a={ver:"0.1.0",spec:{innerWidth:{clientValue:()=>window.innerWidth},innerHeight:{clientValue:()=>window.innerHeight},outerWidth:{clientValue:()=>window.outerWidth},breakpoint:{clientValue:()=>function(t,e){for(let n=e.length-1;n>=0;n--)if(t>=e[n])return n}(window.innerWidth,i.f)},locationHash:{clientValue:()=>window.location.hash},locationHref:{clientValue:()=>window.location.href},locationHost:{clientValue:()=>window.location.host},locationHostName:{clientValue:()=>window.location.hostname},locationOrigin:{clientValue:()=>window.location.origin},locationPathName:{clientValue:()=>window.location.pathname},locationProtocol:{clientValue:()=>window.location.protocol},locationSearch:{clientValue:()=>window.location.search},screenTop:{clientValue:()=>window.screenTop},screenY:{clientValue:()=>window.screenY},canUseCssGrid:{clientValue:()=>window.CSS&&window.CSS.supports&&CSS.supports("display","grid")||!1},devicePixelRatio:{clientValue:()=>window.devicePixelRatio},language:{clientValue:()=>document.documentElement.lang},direction:{clientValue:()=>document.documentElement.dir}}}},51991:function(t,e,n){n.d(e,{$K:function(){return o},T2:function(){return a},kk:function(){return s}});var i=n(7965);const r=new Map;function o(t){if(!t)return"";const e=[],n=t.split(/\r?\n/);for(const t of n){const n=t.trim(),i=n.lastIndexOf(" ");if(!n||i<0||n.length<4)continue;const r=n.substring(3,i).split(".").slice(-1)[0];r&&l.has(r)&&e.push(r)}return e.slice(-1)[0]?e.slice(-1)[0]:""}function s(){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(!t)return;if(!t.setPref)return;const e=t.setPref;t.setPref=function(t,n,i){if(e(t,n,i),d.has(t))return;let s="";const a=(new Error).stack;u.has(t)&&(s=o(a)),s=s||"<unknown>";!function(t,e,n,i){if(!t||!i||!n)return;const o=r.get(e);if(!o)return;const s=i+";"+n+";"+Date.now();t(o,s)}(e,t,`${n}`||"<empty>",s)}}function a(t){c.forEach((e,n)=>{t[n]&&r.set(e,n)})}const c=new Map([[i.JW.layoutModeInstrumentation,i.JW.layout],[i.JW.newsFeedDsiplayInstrumentation,i.JW.feeds]]),u=new Set(["ntp.layout_mode","ntp.background_image_type","ntp.show_image_of_day","ntp.news_feed_display"]),d=new Set(["ntp.record_user_choices","ntp.user_nurturing"]),l=new Set(["updateLayout","updateFeeds","onUpdateFeedVisibility","onButtonUpdateFeedVisibility","onContentSelectChange","onLayoutModeSelectChange","updateToCustomLayoutMode","updateBackgroundImageType","updateLayoutAndBackgroundImageType","overrideLayoutPreferenceForPolicy","onCustomBackgroundRadioClick","migrateBackgroundPreference","wpoPromoteNewFeedDisplaySetting","wpoPromoteNewLayout"])},52063:function(t,e,n){n.d(e,{FM:function(){return d},JX:function(){return l},Ng:function(){return u}});var i=n(45084),r=n(65022),o=n(93468),s=n(8555),a=n(63456),c=n(87087);function u(t,e){const n=function(t){const e=["title","img","logo","providerName","disclaimer","popupDisclaimer","review","workingHoursStatus","workingHoursIsOpen"];return t.filter(t=>!e.includes(t))}(Object.keys(t));if(e&&Object.keys(e).length>0){const t=n.filter(t=>t in e),i=n.filter(t=>!(t in e)),r=function(t,e){return t.sort((t,n)=>e[t]-e[n])}(t,e);return[...r,...i]}return n}function d(t,e){Object.keys(t).forEach(n=>{!(n in i.vI)||!t[n]||e&&"price"===n||(t[n]=i.vI[n](t[n]))})}function l(t,e,n){if(n){const n=e.filter(t=>t?.data?.ext?.msft?.msan_data).reduce((t,e)=>{try{const n=(0,a.A)(e,"data.type"),u=(0,s.A)(i.eO,t=>t===`data-${n}`);if(u){if((0,c.A)(e,"data.ext.msft.msan_data")){const n=(0,a.A)(e,"data.ext.msft.msan_data"),r="string"==typeof n?JSON.parse(n):n;if(u==i.qy.ReviewRatingItem)t.rating=r?.va_attributes?.rank;else if(u==i.qy.WorkingHoursItem)t.workingHours=r?.va_attributes?.rank;else if(u==i.qy.Callout){t[(0,s.A)(i.eO,t=>t===`data-${r.callout_data_type}`)]=r?.va_attributes?.rank}else t[u]=r?.va_attributes?.rank}}else(0,o.vV)(r.eN3,`Ad response with unrecognized data type: ${n}`,void 0,{...r.eN3.pb,customMessage:`No mapping found in assetKeyMap for data-${n}`,ext:(0,a.A)(e,"data")})}catch(n){return(0,o.vV)(r.eN3,"Ad response with invalid asset rank data",void 0,{...r.eN3.pb,customMessage:`${n&&n.message}`,assetData:(0,a.A)(e,"data")}),t}return t},{});t.assetRanks=n}else{const n=e.filter(t=>t?.ext?.rank&&t?.data).reduce((t,e)=>{const n=(0,a.A)(e,"data.type"),r=(0,s.A)(i.eO,t=>t===`data-${n}`);return r&&(t[r]=(0,a.A)(e,"ext.rank")),t},{});t.assetRanks=n}}},52088:function(t,e,n){n.d(e,{W:function(){return u}});var i=n(98216),r=n(29231),o=n(6727),s=n(29582),a=n(47149),c=n(87440);class u{get _id(){return this.id}get _element(){return this.element}get combinedContract(){if(this.contract){const t=(this.contract.content=this.contract.content||{}).headline;this.contract.content.headline=t||(0,o.FD)(this.element)}return this.hasInheritedProperty?(0,c.A)({},this.superContract,this.contract,this.internalContract):(0,c.A)({},this.contract,this.internalContract)}get internalContract(){const{lineage:t,lineageOrdinal:e}=u.getLineage(this)||{},n=u.getInheritedProperties(this),i={placement:{id:this.id,lineage:t,lineageOrdinal:e},...n};return this.parentDOM&&this.parentDOM.id&&0!==this.parentDOM.id&&(i.placement.parentId=this.parentDOM.id,i.placement.ordinal=this.ordinal),i}constructor(t){this.hasInheritedProperty=!1,this.children=[],this.ordinal=0,this.ordinalCount=0,this.contract=t||{},this.ordinalCount=0,this.superContract={}}static addElement(t){if(!t)return;const e=this.parseContract(t);let n=this.get(t),i=!1;n&&n.id?e&&(n.contract=e):(n=new u(e),n.id=this.generateId(),this.set(t,n),i=!0);let s=t.parentElement;!s&&t.parentNode&&t.parentNode.host&&(s=t.parentNode.host);let a=s&&(0,o.QZ)(s,`[${r.i}]`),c=a&&this.get(a);return a&&!c&&((0,o.U4)("telemetrynodeadded",a),c=this.get(a)),n===c&&(a=a&&a.closest(`[${r.i}]`),c=a&&this.get(a)),n.parentDOM=c&&c!==n?c:u.getRoot(),this.inheritProperty(n),this.needUpdate=!0,i&&dispatchEvent(new CustomEvent("telemetrynodetrack",{detail:n})),n}static inheritProperty(t){if(!i.YT||!i.YT.config||i.YT.config.inheritByTraversingDOM||!t||!t.contract)return;const e=t.parentDOM&&t.parentDOM.contract,n=t.parentDOM&&t.parentDOM.superContract,r=t.contract,o=t.superContract;i.YT.config.inheritExt&&(e&&e.ext||n&&n.ext)&&(t.hasInheritedProperty=!0,o.ext={...n&&n.ext,...e&&e.ext,...r.ext})}getShouldTrackPartialContentUpdate(){return!this.element||!this.element.hasAttribute("data-nopartialcontentview")&&(void 0===this.memoizedParentShouldTrackPartialContentUpdate&&(this.memoizedParentShouldTrackPartialContentUpdate=this.parentDOM?.getShouldTrackPartialContentUpdate()??!0),this.memoizedParentShouldTrackPartialContentUpdate)}static isObject(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}static renderObject(t){return t.render()}static renderContract(t){return a.$.render(t)}static setAttribute(t,e,n){if(!t||!t.dataset)return;const i=this.renderContract(e||n&&n.contract);i&&(t.dataset.t=i[r.i])}static get(t,e=!0){const n=this.elementMap.get(t);if(n&&e){const e=this.parseContract(t);e&&(n.contract=e)}return n}static getLineage(t,e=">",n=!1){try{if(t&&t.parentDOM&&t.parentDOM!==u.root){const i=this.getLineage(t.parentDOM,e,n),{lineage:r,lineageOrdinal:o}=i||{};return{lineage:r+e+t.contract.name,lineageOrdinal:(o?o+e:"")+t.ordinal}}return t&&t.parentDOM&&t.parentDOM===u.root&&n?{lineage:t.contract.name,lineageOrdinal:`${t.ordinal}`}:{lineage:t&&t.contract.name}}catch(e){if(i.YT&&i.YT.config&&i.YT.config.logElementForLineageFailure){const{id:e,tagName:n}=t&&t.element||{};i.YT.sendAppErrorEvent({id:20203,severity:1,message:"Error while parsing lineage",pb:{customMessage:JSON.stringify({elementId:e,elementTag:n})}})}}}static getInheritedProperties(t){if(!i.YT||!i.YT.config||!t)return;const{inheritByTraversingDOM:e=!1,inheritPropertyList:n=[],memoizeInheritedProperties:r}=i.YT.config,o=e&&n;return o?r?this.getInheritedPropertiesWithMemoize(t,o):this.getInheritedPropertiesWithoutMemoize(t,o):void 0}static getInheritedPropertiesWithoutMemoize(t,e){let n=t;const i={};for(;n&&n!==u.root;){for(const t of e){const e=n.contract&&n.contract[t];void 0!==e&&(void 0===i[t]?i[t]=e:this.isObject(i[t])&&(i[t]={...e,...i[t]}))}n=n.parentDOM}return i}static getInheritedPropertiesWithMemoize(t,e){if(t.memoizedProperties)return t.memoizedProperties;const n={};for(const i of e){n[i]=t.contract[i];let e=t&&t.parentDOM;for(;e&&e!==u.root;){const t=e.memoizedProperties?e.memoizedProperties[i]:e.contract[i];if(void 0!==t&&(void 0===n[i]?n[i]=t:this.isObject(n[i])&&(n[i]={...t,...n[i]})),e.memoizedProperties)break;e=e.parentDOM}}return t.memoizedProperties=n,n}static getRoot(){return u.root}static getTelemetryObject(t){const e=this.get(t);if(e&&e.contract)return new a.$(e.contract)}static parseContract(t){try{const e=t&&t.getAttribute&&t.getAttribute(r.i);return e?this.parseAttribute(e):void 0}catch{}}static parseAttribute(t){try{const e=t&&JSON.parse(t);return this.parseMetadata(e)}catch{}}static parseMetadata(t){try{return t&&s.W.decompress(t)}catch{}}static set(t,e){e.element=t,this.elementMap.set(t,e)}static updateLayout(){if(!this.needUpdate)return;this.needUpdate=!1,this.root.ordinalCount=0;const t=(0,o.Ir)(document.documentElement);for(const e of t){let t=this.get(e);t&&t.parentDOM||((0,o.U4)("telemetrynodeadded",e),t=this.get(e)),t&&(t.ordinal=t.parentDOM?++t.parentDOM.ordinalCount:0,t.ordinalCount=0)}}static generateId(){return++this.lastId}}u.elementMap=new WeakMap,u.root=new u({name:"root"}),u.lastId=0,u.needUpdate=!1},52201:function(t,e,n){n.d(e,{v:function(){return r}});var i=n(22360);function r(t){return"string"==typeof(e=(0,i.QH)(t))?e:e.instanceSrc;var e}},52505:function(t,e,n){n.d(e,{_:function(){return h}});const i=/(?:Primary Error:\s)(\w+)/,r=/(?:Secondary Error:\s)(\w+)/,o=/(?:hex:)(\w+)/,s=/(?:Error code:\s)(\w+)/,a=/(?:error message:)(AADSTS\w+)/,c=/(?:Trace ID:\s)([0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12})/,u=/(?:Correlation ID:\s)([0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12})/,d=/(?:Timestamp:\s)([0-9]{4}-[0-9]{2}-[0-9]{2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}Z)/,l=/([\w.-]+)@([\w-]+)((\.(\w){2,3})+)/g;function h(t,e){const n={};try{if(n.requestedResource=e?.id,t&&t.internalError){const e=t.internalError;if(n.platformCode=e.platform_error_code||void 0,e.error_string){const t=e.error_string.replace(l,"");n.primaryError=t.match(i)?.[1]||"",n.secondaryError=t.match(r)?.[1]||"",n.aadErrorCode=t.match(a)?.[1]||"",n.errorCode=t.match(s)?.[1]||"",n.hexCode=t.match(o)?.[1]||"",n.traceId=t.match(c)?.[1]||"",n.correlationId=t.match(u)?.[1]||"",n.timestamp=t.match(d)?.[1]||""}}}catch(t){return n}return n}},52573:function(t,e,n){n.d(e,{V:function(){return s}});var i=n(14535),r=n(12870),o=n(11367);function s(){if(!r.Rb.IsPrerender)return!1;if(r.Rb.CurrentFlightSet?.has?.("ruby-ctrlnopre")&&o.gR.isRuby)return!0;if("c"!==r.Rb.ClientSettings?.detection?.tier)return!1;const t=(0,i.PV)(!0),{featUX:e=""}=t||{};return!1===((0,i.J4)(e)??{}).IsCSDAU7dSum}},52684:function(t,e,n){n.d(e,{$f:function(){return V},Nc:function(){return W}});var i=n(89980);const r="1adindices",o="1adcoords",s=(t,e=!0)=>{const n=(0,i.Lg)()?.getItem(t);return e?c(n):n},a=(t,e,n)=>{const r=JSON.stringify(t,u);r!==(0,i.Lg)().getItem(e)&&((0,i.Lg)()?.setItem(e,r),n?(0,i.Lg)()?.setItem(`${e}_CreationDateTime`,n):(0,i.Lg)()?.setItem(`${e}_date`,JSON.stringify(new Date)))},c=t=>{try{return JSON.parse(t,d)}catch{return null}},u=(t,e)=>e instanceof Map?{dataType:"Map",value:Array.from(e.entries())}:e,d=(t,e)=>"object"==typeof e&&null!==e&&"Map"===e.dataType?new Map(e.value):e;var l=n(75538),h=n(98216),f=n(12870);const p=(t,e,n)=>{g(n,void 0,`Config: ${t}, Response: ${e}`,!0)},g=(t,e,n,i)=>{const r={...t,pb:{...t.pb}};e&&(r.message=e),n&&r.pb&&(r.pb.customMessage=n),i&&r.pb&&(r.pb.isPrerender=f.Rb?.IsPrerender),h.YT.sendAppErrorEvent(r)};var m=n(28006),w=n(45084),y=n(20292),v=n(18e3),b=n(63147),S=n(4891),C=n(77246),k=n(17720),T=n(93468),x=n(65022),A=n(83078),$=n(78961),I=n(29307),P=n(8555),R=n(26587),M=n(23377),_=n(83003),E=n(79426),F=n(56639),D=n(96851),O=n(39619),N=n(6092),L=n(35849),B=n(1732);class U{constructor(t,e){this.cardsIndexList=[],this.nativeAdIndexList=[],this.cmsAdIndexList=[],this.intraNativeAdIndexList=[],this.infopanePlacementList=[],this.originalInfopaneRegion=new Map,this.isNTPPeek=!1,this.getCmsAdsConfig=()=>this.cmsAdsConfig,this.getAdRegionTupleListMap=()=>this.adRegionTupleListMap,this.getPlacementsBySectionIndex=(t,e)=>{const n=this.getAdIndexList(e)[this.config.auctionPreSectionsNum||0],i=U.isFilteredRegion[e]?(0,$.A)(t,t=>t<=n)+1:t.length,r=[];return t.forEach((t,e)=>{e<i&&r.push(t)}),r},this.getCmsRequestFromTuple=(t=0)=>{const e={placements:[]};return this.adRegionTupleListMap.forEach((n,i)=>{if(!n[0]){if(this.shouldDeferInfopaneAuctionOnPrerender(i,t))return;const r=n[1],o=this.getAdIndexList(i)[t]||-1,s=U.isFilteredRegion[i]?(0,$.A)(r,t=>t<=o)+1:r.length,a=r.splice(0,s);this.checkAndAddPlacement(e,!n[0],i,a)}}),e},this.fireCmsAuction=async(t=0)=>{let e;if(this.cmsRequest?.placements?.length?(e=this.cmsRequest,this.cmsRequest=void 0):e=this.getCmsRequestFromTuple(t),e&&e.placements.length)try{const{infopane:t,river:n,documentId:i}=this.cmsAdsConfig,r=e.placements.find(({region:t})=>t.includes("resinfopane")),o=e.placements.find(({region:t})=>t.includes("resriver")),s=t.splice(0,r?.indices.length??0),a=n.splice(0,o?.indices.length??0);this.isFirstCmsAdsBatch=!1,this.cmsRequestPromise=this.nativeAdService.fetchCmsAds(e,i,[...s,...a]);const{placements:c}=await this.cmsRequestPromise;return c}catch(t){(0,T.c_)(t,x.HjP,"Call to CMS Ad Service failed")}},this.getRegionImgForMobile=t=>{const{river:e,infopane:n}=this.overrideImageSize||{};switch(t){case"river":return e;case"infopane":return n;default:return}},this.fireFastHydrationAuction=async t=>{(0,y._F)(t,this.config,this.userSignalsForAdRequest),(this.config.passAdOcidRegSize||this.config.enableAddingAdCoords||this.config.passBrandSafetySignals)&&t.placements.forEach(t=>{(0,y.yS)(t,this.config)}),this.fastHydrationRequest=t;const e=this.nativeAdService.fetchSamAds(t,!0);this.fastHydrationRequestPromise=e,(0,O.Zx)(this.config)},this.fetchSamPredictContent=async(t=[])=>{if(this.isFirstSamAdsBatch){this.samPredictResponsePromise=new E.e;try{const e=this.getPredictedAdRequest();if(this.samRequest=e,!e||!e.placements||!e.placements.length)return;A.M.startMark("AdServiceCall.SuperFeed");const n=this.nativeAdService.fetchSamAds(e,!0,t,this.getIsPrerenderAds());this.samRequestPromise=n;const i=(0,O.Zx)(this.config);[this.predictSamResponse]=await Promise.all([n,i])}catch(t){(0,T.c_)(t,x.I8Q,"Call to SAM Ad Service failed")}finally{this.samPredictResponsePromise.set(),A.M.endMark("AdServiceCall.SuperFeed")}}},this.waitForSamPredictResponse=async()=>this.samPredictResponsePromise?.getResultAsync(),this.waitForSamAuctionCall=async()=>this.samRequestPromise,this.addToCallbackList=t=>{this.nativeAdService.addToCallbackList(t)},this.getFastHydrationSamAdsData=async()=>{if(!this.fastHydrationRequestPromise)return;const t=this.fastHydrationRequestPromise;this.fastHydrationRequestPromise=void 0;const e=await t;try{const t=this.getSamRequestFromTupleWithSectionIndex();return this.validateFastHydrationAdPlacement(t),this.samRequest=t,this.samRequest?.placements?.length&&(this.isFirstSamAdsBatch=!1),e}catch(t){if(this.config.enableWpoAdRank&&(0,T.vV)(x.qdn,"Failed to get fast hydration SAM ads data",void 0,{...x.qdn.pb,customMessage:`Failed to get fast hydration SAM ads data: ${t.message}; ${t.stack}`,isPrerender:f.Rb?.IsPrerender}),!this.config.enableWpoAdRank)throw t}},this.getSamRequestFromTupleWithSectionIndex=(t=0)=>{const e={placements:[],tmaxbidder:this.config.adsTmaxBidder&&f.Rb.IsPrerender&&this.isFirstSamAdsBatch?this.config.adsTmaxBidder:void 0};return this.adRegionTupleListMap.forEach((n,i)=>{if(n[0]){if(this.shouldDeferInfopaneAuctionOnPrerender(i,t))return;const r=n[1],o=this.getAdIndexList(i)[t]||-1,s=U.isFilteredRegion[i]?(0,$.A)(r,t=>t<=o)+1:r.length,a=r.splice(0,s);(i.startsWith("river")||i.startsWith("resriver")||i.startsWith("intranative"))&&a[0]&&h.YT.addOrUpdateTmplProperty(`servingAdsIndex-${i}`,`${t}-${a[0]}`),this.checkAndAddPlacement(e,n[0],i,a)}}),e},this.getSamRequestFromTuple=()=>{const t={placements:[]};return this.adRegionTupleListMap.forEach((e,n)=>{e[0]&&this.checkAndAddPlacement(t,e[0],n,e[1])}),t},this.shouldDeferInfopaneAuctionOnPrerender=(t,e)=>t.includes("infopane")&&(this.getIsPrerenderAds()&&0==e||this.config.deferInfopanePrerender&&f.Rb.IsPrerender&&this.isFirstSamAdsBatch),this.getAdIndexList=t=>!this.config.riverSectionCardProviderConfig?.useRelativeAdPlacement||"river"!==t&&"riverlock"!==t&&"peekriver"!==t?this.config.riverSectionCardProviderConfig?.useRelativeAdPlacement&&t.includes("resriver")?this.cmsAdIndexList:this.config.enableIntraNativeAds&&t.includes("intranative")?this.intraNativeAdIndexList:this.cardsIndexList:this.nativeAdIndexList,this.overrideTopAdSamRequest=(t,e)=>{const n=(0,F.cE)();return e?.isSuperAppTopAd&&this.config.enableTopAdCard&&n?.isOEM&&t[0]&&(t[0].region="top",t[0].img=this.config?.adTemplateConfig?.imageSizeConfig?.top),t},this.getSamAuctionRequest=(t,e,n)=>{let i;if(this.samRequest?.placements?.length?(i=this.samRequest,this.samRequest=void 0):i=this.config.enableNativeAdBatchCall?this.getSamRequestFromTuple():this.getSamRequestFromTupleWithSectionIndex(t),i&&i.placements.length){if(this.config.enableNativeAdXandr&&(i.enableNativeAdXandr=!0),this.config.overrideAdPartnerId&&(i.partnerId=this.config.overrideAdPartnerId),this.config.overrideAdPageType&&(i.pageType=this.config.overrideAdPageType),e)i={placements:this.overrideTopAdSamRequest(i.placements,e),pageType:e.pageType,locale:e.locale,adid:e.adid,anid:e.anid,muid:e.muid,sapphireid:e.sapphireid,appName:e.appName,clientVersion:e.clientVersion,packageName:e.packageName,tmax:e.tmax},"prime_mobile"===e.appName&&"mobilefeed"===e.pageType&&i.placements.forEach(t=>{t.isStrictIndices=!0});else if(i.tmaxbidder=this.config.adsTmaxBidder&&f.Rb.IsPrerender&&this.isFirstSamAdsBatch?this.config.adsTmaxBidder:void 0,(0,y._F)(i,this.config,this.userSignalsForAdRequest),n){const{selectedFeedDisplaySetting:e}=(0,L.zP)(m.h$)?.getCurrentState()??{},r=[];let a=!1;if(i.placements.forEach(i=>{n(i),i&&i.placementLevelSignals&&(this.config.batch8AdsOnPeak&&f.Rb.IsPrerender&&"peek"===e&&("river"===i.region||"resriver"===i.region||"peekriver"===i.region)&&Array.isArray(i.indices)&&i.indices?.includes(2)||(t&&i.placementLevelSignals.some(t=>!t||!t.coords||"number"!=typeof t.coords.x)&&r.push(`${i.region}-${i.indices}`),this.config.addAdBrandSafetySignals&&"intranative"!==i.region&&i.placementLevelSignals.some(t=>!t||!t.adjacentCardIds)&&(a=!0)))}),this.config.enableAddingAdCoords&&r.length){const t=s(o);t&&t.size&&(0,T.vV)(x.E7N,"Ads placement level signal missing coordinates",`{"missing_plcs": ${JSON.stringify(r)}, "coords_cache": ${JSON.stringify(Array.from(t.entries()))}, "placements": ${JSON.stringify(i.placements)}}`)}this.config.addAdBrandSafetySignals&&a&&(0,T.vV)(x.GTE,"Ad placement signal missing adjacentCardIds",JSON.stringify(i.placements),{shouldSampleErrorsForTreatement1:!0})}return i}},this.fireSamAuction=async(t=[],e,n,i,r,o,s)=>{const a=this.getSamAuctionRequest(e,n,r);if(a&&a.placements.length)return i&&await i.getResultAsync(),await this.fetchSamAds(a,t,o,s)},this.fetchSamAds=async(t,e=[],n,i)=>{try{A.M.startMark("AdServiceCall.SuperFeed");const{isFirstSamAdsBatch:r,nativeAdService:o}=this,s=r?e:[];this.isFirstSamAdsBatch=!1;const a=o.fetchSamAds(t,r,s,this.getIsPrerenderAds(),n,i);if(!this.config.loadAdTemplate)return await a;if(this.config.enableNativeAdWC||this.config.enableNativeAdWCInfopane){const[t]=await Promise.all([a,this.lazyLoadDRBundle(this.config?.adTemplateConfig?.configType)]);return t}{const[t]=await Promise.all([a,(0,O.Zx)(this.config)]);return t}}catch(t){(0,T.c_)(t,x.I8Q,"Get SAM data failed")}finally{A.M.endMark("AdServiceCall.SuperFeed")}},this.initNativeAdConfig(t),this.initAdRegionTupleListMap(),t?.riverSectionCardProviderConfig?.adRegionSpecificTupleListMap&&this.initAdRegionSpecificTupleListMap(t.riverSectionCardProviderConfig.adRegionSpecificTupleListMap),this.beaconService=new v.m(t?.adBeaconServiceConfig)}initNativeAdConfig(t){this.isFirstSamAdsBatch=!0,this.isFirstCmsAdsBatch=!0,this.config=(0,I.A)(t)||{},this.cmsAdsConfig=this.config?.cmsAds??{documentId:"",infopane:[],river:[]},this.tallAdProcessed=!this.config?.enableAdsWaterfall;const e={adPlacementMapper:this.config.adPlacementMapper,adPageType:this.config.adPageType,useEmptyPlacementsForNoContent:this.config.backfillContentForMissingPlacements,enablePrerenderAdsAuctionFlag:this.config.enablePrerenderAds&&this.config.enablePrerenderAuctionFlag,auctionTimeoutOverride:this.config.auctionTimeoutOverride,auctionRidOverride:this.config.auctionRidOverride,enableBuyDirectAd:this.config.enableBuyDirectAd,fixAuctionSrcUrl:this.config.fixAuctionSrcUrl,passExtraAdSignals:this.config.passExtraAdSignals,passAdOcidRegSize:this.config.passAdOcidRegSize,passRequestModelSignals:this.config.passRequestModelSignals,enableNativeAdXandr:this.config.enableNativeAdXandr,enableAdTargetingKeywords:this.config.adServiceConfig?.enableAdTargetingKeywords,passDTSignals:this.config.passDTSignals,dtsRequestConfig:this.config.dtsRequestConfig,enableNativeAdDTS:this.config.enableNativeAdDTS,nativeAdDTSRequestConfig:this.config.nativeAdDTSRequestConfig,passBrandSafetySignals:this.config.passBrandSafetySignals,readAdScenarioTypeFromMsnKv:this.config.readAdScenarioTypeFromMsnKv,enableAdSponsoredText:this.config.enableAdSponsoredText,passDeviceOS:this.config.passDeviceOS,passVAXandrMigrationSignals:this.config.passVAXandrMigrationSignals,sendAdBlockDetectionFromEdge:this.config.adServiceConfig?.sendAdBlockDetection,passCohortSignalsAds:this.config.passCohortSignalsAds};this.nativeAdService=(0,b.s)(this.config?.adTemplateConfig||{},e)}initAdRegionTupleListMap(){this.adRegionTupleListMap=new Map([["infopane",[!0,[],[]]],["infopanelock",[!0,[],[]]],["peekinfopane",[!0,[],[]]],["rightrail",[!0,[],[]]],["triver",[this.config?.enable1stRowAd,[],[]]],["river",[!0,[],[]]],["riverlock",[!0,[],[]]],["peekriver",[!0,[],[]]],["infopane-tab",[!0,[],[]]],["resinfopane",[this.config.enableInfopaneLeadgenNative,[],[]]],["resinfopanelock",[this.config.enableInfopaneLeadgenNative,[],[]]],["resriver",[this.config.enableRiverLeadgenNative,[],[]]],["resriverlock",[this.config.enableRiverLeadgenNative,[],[]]],["dense-river",[!0,[],[]]],["rivert",[this.config.enableAdsWaterfall||this.config.enableNTPAdaptiveImage,[],[]]],["resrivert",[this.config.enableNTPAdaptiveImage,[],[]]],["infopane1u",[this.config.enableInfopane1uCard,[],[]]],["intranative",[this.config.enableIntraNativeAds,[],[]]]])}initAdRegionSpecificTupleListMap(t){0!==t.length&&(this.adRegionTupleListMap=new Map(t.map(t=>[t,[!0,[],[]]])))}loadCmsBackfillList(){return this.nativeAdService.loadCmsBackFillList()}fillAdsMap(t){if(!t)return;const{adLabelText:e,isGreyAdsLabelEnabled:n}=this.nativeAdService.getAdTagStyleByLocale(),i=(0,l.nY)({adLabelText:e,isGreyAdsLabelEnabled:n,...this.config},t),r=(0,F.cE)();this.adRegionTupleListMap.forEach((t,e)=>{("river"===e||"riverlock"===e||"peekriver"===e)&&this.config.enableTopAdCard&&r?.isOEM&&i.top&&t[2].push(...i.top),t[2].push(...i[e]??[])})}createNativeAdCardMetadata(t,e,n,i,r,o,s,a,c,u,d){let l=t.includes("resinfopane")||t.includes("resriver")?_.pL.CmsAd:_.pL.NativeAd;if(this.config?.enableIntraNativeAds&&"intranative"===t&&(l=_.pL.IntraNativeAd),this.config?.enableAdsWaterfall&&"river"===t&&e===this.config?.tallAdsIndex&&(t="rivert"),this.config?.enable1stRowAd&&o===_.pL.FirstPartyAd&&(t="triver",l=_.pL.FirstPartyAd),this.config?.enableInfopane1uCard&&S.IT.includes(t)&&(t="infopane1u"),this.config?.adPlacementMapper){const n=this.config.adPlacementMapper.find(n=>{const i=n.region===t,r=!n.indices||n.indices.includes(e);return i&&r});t=n?.mappedRegion||t}let h=this.adRegionTupleListMap.get(t)?.[2],f=h?.find(t=>t.regionIndex===e);return this.config.adsPlacementForPeekView&&!f&&("peekriver"===t&&(h=this.adRegionTupleListMap.get("river")?.[2]),"river"===t&&(h=this.adRegionTupleListMap.get("peekriver")?.[2]),"peekinfopane"===t&&(h=this.adRegionTupleListMap.get("infopane")?.[2]),"infopane"===t&&(h=this.adRegionTupleListMap.get("peekinfopane")?.[2]),f=h?.find(t=>t.regionIndex===e)),f?{type:l,regionType:t,regionIndex:e,id:this.getNativeAdId(t,f.regionIndex,f),placement:f,wpoRank:n,wpoAdRank:i,wpoId:r,adjacentCardIds:s,isPartialBrandSafety:a,column:c,row:u,colSpan:d}:{type:l,regionType:t,regionIndex:e,placement:{items:[]},wpoRank:n,wpoAdRank:i,wpoId:r,adjacentCardIds:s,isPartialBrandSafety:a,column:c,row:u,colSpan:d}}getPredictCmsAdsData(){if(!this.isFirstCmsAdsBatch)return;const t=this.getCmsRequestFromTuple();if(this.predictCmsResponse&&this.validateCmsAdPlacementConfig(t),this.cmsRequest=t,this.cmsRequest?.placements?.length&&(this.isFirstCmsAdsBatch=!1),this.predictCmsResponse){const t=this.predictCmsResponse;return this.predictCmsResponse=void 0,t}}async waitForCmsAuction(){if(this.cmsRequestPromise)if(this.config.enableWpoAdRank)try{await this.cmsRequestPromise}catch(t){(0,T.vV)(x.qdn,"CMS auction failed",void 0,{...x.qdn.pb,customMessage:`CMS auction failed: ${t.message}; ${t.stack}`,isPrerender:f.Rb?.IsPrerender})}else await this.cmsRequestPromise}getAssets(t,e){const n=[];if(e){const i=e.reduce((e,n,i)=>{const r=(0,P.A)(w.eO,t=>t===n);if(r){const n={...w.ux[r],id:i+1};"img"===r&&(n.img={...this.getRegionImg(t),...n.img}),e.push(n)}return e},[]);n.push(i)}return n}getVAAssets(t){const e=this.config.adTemplateConfig?.supportedVAAssets;return this.getAssets(t,e)}getNativeAdAssets(t){const e=this.config.adTemplateConfig?.auctionCallAssets;if(this.config.assetConfigRefactor){if("infopane-tab"===t)return;if(e&&e.length>0)return this.getAssets(t,e)}else if(this.config.adTemplateConfig?.enableVA&&"rightrail"!==t)return this.getVAAssets(t)}checkAndAddPlacement(t,e,n,r){if(t&&e&&r.length){let e=this.getRegionImg(n);if(this.config.overrideSAMAdImageSize&&this.overrideImageSize){const t=this.getRegionImgForMobile(n);t&&(e=t)}const o={assets:this.getNativeAdAssets(n),region:n,indices:r.splice(0),img:e};this.config.addAdCoordsOnPredicted&&((0,y._F)(t,this.config,this.userSignalsForAdRequest),(0,y.yS)(o,this.config,void 0,t=>{const e=this.getCoordsCache(t),n="true"===(0,i.Lg)()?.getItem(B.Ph);return e?{...e,isCoordsInvalidated:n}:{}})),(this.config.enableSAMAdStrictIndices||N.T3.IsHeroNTP||this.config.enable1stRowAd&&"triver"===n||this.config.adsPlacementForPeekView&&("peekriver"===n||"peekinfopane"===n)&&this.isNTPPeek||this.config.enableIntraNativeAds&&"intranative"===n)&&(o.isStrictIndices=!0),this.config.adsPlacementForPeekView&&"peekinfopane"===n&&this.isNTPPeek&&(o.indices=o.indices.map(t=>{const e=this.getPeekInfopaneMappingList().indexOf(t);return-1!==e?e:t})),t.placements.push(o)}}mapStrictPeekRegionIndexToAbsoluteRegionIndex({placeholderPlacements:t,samPlacements:e}){t?.forEach(t=>{if("peekinfopane"===t.region){const e=this.getPeekInfopaneMappingList()[t.regionIndex];void 0!==e&&(t.relativeRegionIndex=t.regionIndex,t.regionIndex=e)}}),e?.forEach(t=>{if("peekinfopane"===t.region&&void 0!==t.index){const e=this.getPeekInfopaneMappingList()[t.index];void 0!==e&&(t.relativeIndex=t.index,t.index=e)}})}async fetchCmsPredictContent(){if(!this.isFirstCmsAdsBatch)return;const t=this.getPredictedAdRequest(!0);if(this.cmsRequest=t,t.placements.length)try{const{infopane:e,river:n,documentId:i}=this.cmsAdsConfig,r=t.placements.find(({region:t})=>t.includes("resinfopane")),o=t.placements.find(({region:t})=>t.includes("resriver")),s=e.splice(0,r?.indices.length??0),a=n.splice(0,o?.indices.length??0),{placements:c}=await this.nativeAdService.fetchCmsAds(t,i,[...s,...a]);return this.predictCmsResponse=c,c}catch(t){(0,T.c_)(t,x.HjP,"Call to CMS Ad Service failed")}}lazyLoadDRBundle(t){switch(t){case"prg-ad-like":return n.e("na-like-button").then(n.bind(n,10047));case"prg-trending":return n.e("na-trending").then(n.bind(n,78021));case"prg-ad-ctav2":case"prg-ad-ctav3":return n.e("na-call-to-action").then(n.bind(n,83261));case"prg-ad-sh-v1":return n.e("nas-highlight-v1").then(n.bind(n,89859));case"prg-ad-sh-v3":case"prg-ad-sh-v4":return Promise.all([n.e("nas-highlight-v3v4").then(n.bind(n,57418)),n.e("nas-highlight-v3v4").then(n.bind(n,10144))]);case"prg-ad-combo":return Promise.all([n.e("na-decoration-combo").then(n.bind(n,77020)),n.e("na-decoration-combo").then(n.bind(n,4723)),n.e("na-decoration-combo").then(n.bind(n,29777)),n.e("na-decoration-combo").then(n.bind(n,59840))])}}getPredictedAdRequest(t){const e={placements:[],tmaxbidder:!f.Rb.IsPrerender&&!this.config.auctionRidOverride&&this.isFirstSamAdsBatch&&this.config.adsTmaxBidder?this.config.adsTmaxBidder:void 0};return this.config.overrideAdPartnerId&&(e.partnerId=this.config.overrideAdPartnerId),this.config.overrideAdPageType&&(e.pageType=this.config.overrideAdPageType),this.adRegionTupleListMap.forEach((n,i)=>{const r=t?this.getCmsIndices(i):this.getSamIndices(i),o=t?!n[0]:n[0];o&&r?.length&&this.checkAndAddPlacement(e,o,i,r)}),e}getPredictSamAdsData(){if(!this.isFirstSamAdsBatch)return;const t=this.getSamRequestFromTupleWithSectionIndex();if(this.predictSamResponse&&this.validateSamAdPlacementConfig(t),this.samRequest=t,this.samRequest?.placements?.length&&(this.isFirstSamAdsBatch=!1),this.predictSamResponse){const t=this.predictSamResponse;return this.predictSamResponse=void 0,t}}getSamRequest(){return this.samRequest}shouldPrefetchInfopaneSamAds(t){return-1!==this.infopanePlacementList.findIndex(({index:e})=>e===t+l.Sx)}prefetchInfopaneSamAds(t){const e=this.getAndUpdateInfopanePrefetchPlacementList(t);if(e.length)return this.fetchSamAdsInPlacementList(e)}getAndUpdateInfopanePrefetchPlacementList(t){if(!this.config.infopaneViewOptAdCount)return[];const e=this.infopanePlacementList.findIndex(({index:e})=>e>t);return-1===e?[]:this.infopanePlacementList.splice(e,this.config.infopaneViewOptAdCount)}mapViewOptimizationRegion(t){if(this.config.infopaneViewOptAdCount&&!this.config.infopaneCacheNormalPlacement){t.placements.forEach(t=>{S.Tv.includes(t.region)&&(1===this.config.infopaneViewOptAdCount?t.region=S.wM[0]:2===this.config.infopaneViewOptAdCount&&(t.region=S.wM[1]))});const e={};t.placements.forEach(t=>{const n=t.region;e[n]?e[n].indices.push(...t.indices):e[n]={...t}}),t.placements=Object.values(e)}}mapSamAdRegionToOriginal(t){this.config.infopaneViewOptAdCount&&(t?.samResponse?.placements&&t.samResponse.placements.forEach(t=>{const{index:e}=t;this.originalInfopaneRegion.get(e)&&(t.region=this.originalInfopaneRegion.get(e))}),t?.placeHolderResponse?.placements&&t.placeHolderResponse.placements.forEach(t=>{const{regionIndex:e}=t;this.originalInfopaneRegion.get(e)&&(t.region=this.originalInfopaneRegion.get(e))}))}async fetchSamAdsInPlacementList(t){const e={placements:[]};(0,l.lc)(t).forEach((t,n)=>{this.checkAndAddPlacement(e,!0,n,t)}),this.mapViewOptimizationRegion(e);const n=await this.fetchSamAds(e);return this.mapSamAdRegionToOriginal(n),n}fireServedTrackingCallForPlacements(t){if(!t)return;const e=this.beaconService.sendBeaconForAdServed.bind(this.beaconService);t.map(({beaconsJson:t,bingTrackerUrls:e=[],videoViewabilityData:n,beaconsSupportHttpPOST:i})=>!t||e.length>0&&n?null:{beaconsJson:t,beaconsSupportHttpPOST:i}).filter(t=>!(!t||!t.beaconsJson)).forEach(e)}appendAdRegionIndices(t,e){const n=this.adRegionTupleListMap.get(t);n&&Array.isArray(n[1])?n[1].push(...e.sort((t,e)=>t-e)):this.adRegionTupleListMap.set(t,[!0,e.sort((t,e)=>t-e),[]])}updateAdRegionTupleListMap(t){const{adRegionTupleListMap:e}=this;e.forEach((e,n)=>{const i=e[1],r=this.config.adPlacementMapper?.find(t=>t.region===n);if(r){let e=[],i=[];if(r.indices){const o=t.get(n)??[];i=(0,R.A)(o,r.indices),e=(0,M.A)(o,r.indices)}else i=t.get(n)??[];this.appendAdRegionIndices(r.region,e),this.appendAdRegionIndices(r.mappedRegion,i)}else i.push(...(t.get(n)??[]).sort((t,e)=>t-e))}),this.config?.enableAdsWaterfall&&!1===this.tallAdProcessed&&this.updatePlacementsForTallAd(e,this.config.tallAdsIndex),this.config?.infopaneViewOptAdCount&&this.updatePlacementsForInfopane(e),this.config?.enableInfopane1uCard&&this.updatePlacementsForInfopane1u(t)}updatePlacementsForTallAd(t,e=0){if(0===e)return;const n=this.getOrDefault(t,"rivert",[!0,[],[]]),i=this.getOrDefault(t,"river",[!0,[],[]]),r=[e],o=this.removeItemFromPlacementArray(i[1],e);t.set("river",[i[0],o,i[2]]),t.set("rivert",[n[0],r,n[2]]),this.tallAdProcessed=!0}updatePlacementsForInfopane(t){t.forEach((t,e)=>{t[0]&&S.Tv.includes(e)&&(t[1].forEach(t=>{this.infopanePlacementList.push({region:e,index:t}),this.originalInfopaneRegion.set(t,e)}),t[1]=[])}),this.infopanePlacementList.sort((t,e)=>t.index-e.index)}updateRiverInfopanePlacementsToNormal(){const{adRegionTupleListMap:t}=this,e=t?.get("peekriver")?.[1],n=t?.get("peekriver")?.[2];if(e?.length){const n=t?.get("river");n&&(n[1]=[...n[1],...e]);const i=t?.get("peekriver");i&&(i[1]=[])}if(n?.length){const e=t?.get("river");e&&(e[2]=[...e[2],...n]);const i=t?.get("peekriver");i&&(i[2]=[])}const i=t?.get("peekinfopane")?.[1],r=t?.get("peekinfopane")?.[2];if(i?.length){const e=t?.get("infopane");e&&(e[1]=[...e[1],...i]);const n=t?.get("peekinfopane");n&&(n[1]=[])}if(r?.length){const e=t?.get("infopane");e&&(e[2]=[...e[2],...r]);const n=t?.get("peekinfopane");n&&(n[2]=[])}}updatePlacementsForInfopane1u(t){let e=[];for(const n of S.IT)e=e.concat(t.get(n)??[]),this.adRegionTupleListMap.set(n,[!1,[],[]]);e=e.sort((t,e)=>t-e),this.adRegionTupleListMap.set(S.Tp.infopane1u,[!0,e,[]])}removeItemFromPlacementArray(t,e){return t?.filter(t=>t!==e)}getOrDefault(t,e,n){return t.get(e)??n}updateAdCache(t){if(!this.isFirstSamAdsBatch)return;const e=new Map;this.adRegionTupleListMap.forEach((n,i)=>{const r=[...t?.get(i)??[],...n[1]],o=this.getPlacementsBySectionIndex(r,i);e.set(i,o)}),a(e,r)}updateCoordsCacheForPredicted(t,e){const n=(s(o)||new Map).set(t,e);a(n,o)}getCoordsCache(t){return s(o)?.get(t)}isAdsMapEmpty(){let t=!0;return this.adRegionTupleListMap.forEach(e=>{e[2].length>0&&(t=!1)}),t}getRegionImg(t){if(this.config.adTemplateConfig?.imageSizeConfig&&this.config.adTemplateConfig?.imageSizeConfig[t])return this.config.adTemplateConfig?.imageSizeConfig[t];switch(t){case"resriver":case"river":case"riverlock":case"resriverlock":case"triver":case"rightrail":case"peekriver":return this.config.adTemplateConfig?.imageSizeConfig?.river;case"infopane":case"resinfopane":case"infopanelock":case"resinfopanelock":case"peekinfopane":return this.config.adTemplateConfig?.imageSizeConfig?.infopane;case"infopane-tab":return this.config.adTemplateConfig?.imageSizeConfig?.infopaneTab;case"infopane1u":return this.config.adTemplateConfig?.imageSizeConfig?.infopane1u;case"rivert":return this.config.adTemplateConfig?.imageSizeConfig?.rivert;case"inarticlecarousel":return this.config.adTemplateConfig?.imageSizeConfig?.inarticlecarousel;case"inarticle":case"intranative":return this.config.adTemplateConfig?.imageSizeConfig?.inarticle;default:return}}refresh(){this.initNativeAdConfig(this.config),this.initAdRegionTupleListMap(),this.cardsIndexList=[],this.nativeAdIndexList=[],this.cmsAdIndexList=[],this.intraNativeAdIndexList=[]}updateCardsIndexPersection(t){t.map(t=>{const e=this.cardsIndexList[this.cardsIndexList.length-1]||0;this.cardsIndexList.push(e+(t.cards?.length||0))})}updateRelativeAdIndexPersection(t){t.forEach(t=>{const e=this.nativeAdIndexList[this.nativeAdIndexList.length-1]||0,n=t.cards?.filter(t=>"nativead"===t.type);let i=e+(n.length||0);if(this.config.enableDynamicWaterfall&&this.config.enableAdRankTrackers){const t=n.map(t=>t.wpoAdRank).filter(t=>t);if(t?.length){const e=Math.max(...t);e>i&&(i=e)}}this.nativeAdIndexList.push(i);const r=this.cmsAdIndexList[this.cmsAdIndexList.length-1]||0,o=t.cards?.filter(t=>"cmsad"===t.type).length||0;this.cmsAdIndexList.push(r+o);const s=this.intraNativeAdIndexList[this.intraNativeAdIndexList.length-1]||0,a=t.cards?.filter(t=>"intra-nativead"===t.type).length||0;this.intraNativeAdIndexList.push(s+a)})}overrideNativeAdIndexPersection(t){this.nativeAdIndexList=t}overrideCmsAdIndexPersection(t){this.cmsAdIndexList=t}overrideIntraNativeAdIndexPersection(t){this.intraNativeAdIndexList=t}updateAndFilterSamAdResponse(t,e){const{placements:n}=this.nativeAdService.updateSamAdResponse(t,e,this.getIsPrerenderAds());return n.filter(t=>t.items.length)}getAdIndices(t){return s(r)?.get(t)||[]}getSamIndices(t){return this.config.avoidPredictInfopaneAd&&t.toLowerCase().indexOf("infopane")>-1?[]:this.config.shouldUseAdCache?this.getAdIndices(t):[]}getPredictedSamIndices(t){return this.samRequest?.placements?.find(e=>e.region===t)?.indices||[]}getCmsIndices(t){return this.config.avoidPredictInfopaneAd&&t.toLowerCase().indexOf("resinfopane")>-1?[]:this.config.shouldUseAdCache?this.getAdIndices(t):[]}getPredictedCmsIndices(t){return this.cmsRequest?.placements?.find(e=>e.region===t)?.indices||[]}getFastHydrationIndices(t){return this.fastHydrationRequest?.placements?.find(e=>e.region===t)?.indices||[]}validateSamAdPlacementConfig(t){const e=[],n=new Map;for(const i of t.placements){const t=i.region,r=this.getPredictedSamIndices(t);if(!r||!r.length){e.push(i);continue}const o=r.filter(t=>i.indices.indexOf(t)>=0),s=i.indices.filter(t=>o.indexOf(t)<0);i.indices=s,s.length&&e.push(i),n.set(t,o)}let i=e;if(e.length&&this.config.avoidPredictInfopaneAd&&(i=i.filter(t=>t.region.toLowerCase().indexOf("infopane")<0)),i.length?(p(JSON.stringify(this.samRequest?.placements),JSON.stringify(t.placements),x.pn9),h.YT.addOrUpdateTmplProperty("edge_ntp.adMismatched","1")):h.YT.addOrUpdateTmplProperty("edge_ntp.adMatched","1"),t.placements=e,this.predictSamResponse?.samResponse?.placements?.length){const t=[];this.predictSamResponse.samResponse.placements.forEach(e=>{const i=e.region&&n.get(e.region);e.index&&i&&i.indexOf(e.index)>-1&&t.push(e)}),this.predictSamResponse.samResponse.placements=t}}validateCmsAdPlacementConfig(t){const e=[],n=new Map;for(const i of t.placements){const t=i.region,r=this.getPredictedCmsIndices(t);if(!r||!r.length){e.push(i);continue}const o=r.filter(t=>i.indices.indexOf(t)>=0),s=i.indices.filter(t=>o.indexOf(t)<0);i.indices=s,s.length&&e.push(i),n.set(t,o)}let i=e;if(e.length&&this.config.avoidPredictInfopaneAd&&(i=i.filter(t=>t.region.toLowerCase().indexOf("infopane")<0)),i.length&&p(JSON.stringify(this.cmsRequest?.placements),JSON.stringify(t),x.FmL),t.placements=e,this.predictCmsResponse&&this.predictCmsResponse.length){const t=[];this.predictCmsResponse?.forEach(e=>{const i=n.get(e.region);i&&i.indexOf(e.regionIndex)>-1&&t.push(e)}),this.predictCmsResponse=t}}validateFastHydrationAdPlacement(t){const e=[],n=new Map;for(const i of t.placements){const t=i.region,r=this.getFastHydrationIndices(t);if(!r||!r.length){e.push(i);continue}const o=r.filter(t=>i.indices.indexOf(t)>=0),s=i.indices.filter(t=>o.indexOf(t)<0);i.indices=s,s.length&&e.push(i),n.set(t,o)}let i=e;e.length&&this.config.avoidPredictInfopaneAd&&(i=i.filter(t=>t.region.toLowerCase().indexOf("infopane")<0)),i.length?h.YT.addOrUpdateTmplProperty("fastHydrationAdMismatched","1"):h.YT.addOrUpdateTmplProperty("fastHydrationAdMatched","1"),t.placements=e}getNativeAdId(t,e,n){if("peekinfopane"===t&&n){const{relativeRegionIndex:e}=n;return`nativead-${t}-${e}`}return`nativead-${t}-${e}`}getIsPrerenderAds(){return!!(this.config.enablePrerenderAds&&(0,D.EZ)()&&(0,C.S)()&&"hidden"===document.visibilityState)}async createMetaTags(t){return new Promise(e=>{t.forEach(t=>{if("infopane"===t.region||"river"===t.region||"infopanelock"===t.region||"riverlock"===t.region||"peekriver"===t.region||"peekinfopane"===t.region){const e=t.items&&t.items[0]?.adSelectionReason;if(e){const n=this.getNativeAdId(t.region,t.regionIndex,t);let i;switch(t.region){case"infopane":case"infopanelock":case"peekinfopane":i=`tab_panel_${n}`;break;case"river":case"riverlock":case"peekriver":i=`native_ad_${n}`;break;default:return}try{const t=JSON.parse(e).ads[0].id,n=e.replace(t,i),r=document.head,o=document.createElement("meta");o.name="AdsMetadata",o.content=n,r.appendChild(o)}catch(t){return void(0,T.c_)(t,x.Obl,"Failed to add WhyThisAd meta tag to head")}}}}),e()})}async loadBuyDirectAd(){await this.nativeAdService.loadBuyDirectAd()}getPeekInfopaneMappingList(){return this.config.useRelativeIndexJKRegion?U.PeekInfopaneIndexMappingListJKRegion:U.PeekInfopaneIndexMappingList}setUserCohortSignals(t){this.config.passCohortSignalsAds&&(this.userSignalsForAdRequest=t)}}U.isFilteredRegion={river:!0,resriver:!0,riverlock:!0,resriverlock:!0,peekriver:!0,intranative:!0},U.PeekInfopaneIndexMappingList=[0,3,6,11,15],U.PeekInfopaneIndexMappingListJKRegion=[0,5];const W=(t,e,n=!1)=>{const i="NATIVE_AD_HELPER_INSTANCE";let r=k.vv.get(i);return r&&!n||(r=new U(t,e),k.vv.set(i,r)),r},V=t=>t===_.pL.NativeAd||t===_.pL.CmsAd||t===_.pL.FirstPartyAd},53310:function(t,e,n){n.d(e,{Kk:function(){return u}});var i=n(65022),r=n(30817),o=n(98216),s=n(76014),a=n(32633),c=n(52505);const u=(t,e)=>{((t,e)=>{if(!t||!o.YT)return;let n;if(!t.error)return;switch(t.error.status){case a.f.InteractionRequired:case s.f.CnDomain:case s.f.UnsupportedSovereignty:case s.f.AccountInfoUnavailable:n=i.ile;break;case s.f.OtherValidationError:case a.f.OtherError:n=i.ZFX;break;case a.f.AuthPrivateNotSupportedForMAM:default:return}const r={...(0,c._)(t.error,t.resource),authPrivateApi:e?"acquireAccessTokenWithUserInteraction":"acquireAccessTokenSilently",resource:t.resource?.friendlyName},u={id:t.callerId||"",status:!1,name:t.resource?.friendlyName||"",info:{...n,message:t.error.message,pb:{...n.pb,customMessage:JSON.stringify(r)}}};o.YT.sendAuthEvent(u)})(t,e),((t,e)=>{if(!t||!o.YT)return;if(!t.error)return;let n;switch(t.error.status){case a.f.InteractionRequired:case s.f.AccountInfoUnavailable:n=i.ile;break;case s.f.OtherValidationError:case a.f.OtherError:n=i.ZFX;break;default:return}const r={...(0,c._)(t.error,t.resource),authPrivateApi:e?"acquireAccessTokenWithUserInteraction":"acquireAccessTokenSilently",resource:t.resource?.friendlyName};o.YT.sendAppErrorEvent({...n,message:t.error.message,pb:{...n.pb,customMessage:JSON.stringify(r)}})})(t,e),(t=>{if(!t)return;const e=`Auth.AcquireAccessToken.${t.callerId}`,n=`${e}.Start`,i=`${e}.End`,{startTime:o,endTime:s}=t.performance||{},a=(0,r.ZF)();a&&(a[n]=t.performance?.startTime||-1,a[i]=t.performance?.endTime||-1,a[e]=s&&o?s-o:-1)})(t)}},53384:function(t,e,n){n.d(e,{G2:function(){return g},KI:function(){return p},QN:function(){return f},S:function(){return w},SQ:function(){return m},hG:function(){return l},kP:function(){return h}});var i=n(67387),r=n(89980),o=n(77246),s=n(55593),a=n(12870),c=n(6092);const u="ntp.selected_feed_pivot",d="selectedPivot";function l(){f("myFeed")}function h(){let t=a.Rb?.SelectedFeedPivot;const e=(0,s.a)().get("selectedNavItemMock");if(e&&(t=e),(0,o.S)()){const e=(0,r.Lg)().getItem(d);t&&e!==t?f(t):t=e}const n=t?.toLowerCase();return["myfeed","productivityhub","iframe.office","stripe.myfeed"].includes(n)||(t="myFeed",f(t)),(0,c.rA)()?.IsChinaCompliance&&"productivityhub"==n&&(t="myFeed",f(t)),t}function f(t){if(g(t),(0,o.S)()){const e="undefined"!=typeof window&&window&&window.chrome&&window.chrome.ntpSettingsPrivate;e&&e.setPref&&e.setPref(u,t)}a.Rb.SelectedFeedPivot=t,(0,r.Lg)().setItem(d,t)}function p(){return(0,r.Lg)().getItem(i.I1)}function g(t){(0,r.Lg)().setItem(i.I1,t)}function m(){return(0,r.Lg)().getItem(i.VR)??i.Cr.Init}function w(t){(0,r.Lg)().setItem(i.VR,t)}},53626:function(t,e,n){n.d(e,{$w:function(){return d},CQ:function(){return a},RD:function(){return u},SM:function(){return w},Sg:function(){return l},T7:function(){return r},WP:function(){return i},Z6:function(){return s},aW:function(){return g},fn:function(){return c},jK:function(){return o},l:function(){return h},le:function(){return p},rQ:function(){return m},x8:function(){return f}});const i="epdu",r="ppreload",o="ppage",s="ppmuid",a="fpr",c="TTPR",u="TTF.SearchBox",d="TTVR",l="TTVR.SearchBox",h="TTVR.BackgroundExecution",f="backgroundpreload",p="prerender",g="TTPV",m="TTVR.E2E",w="ReasonForTTPR"},53685:function(t,e,n){n.d(e,{Bt:function(){return f},CS:function(){return l},CV:function(){return u},GO:function(){return d},Ng:function(){return h},O1:function(){return p},R0:function(){return a},S7:function(){return m},ZY:function(){return i},aW:function(){return r},jy:function(){return v},ly:function(){return g},m6:function(){return s},oC:function(){return w},q:function(){return b},xA:function(){return o},xF:function(){return c},yE:function(){return y}});const i="E2E",r="TTPV",o="TTVR",s="TTVS",a="htmlCached",c="pageRevealStart",u="pageRevealComplete",d="getTabTimingsTime",l="protocolLaunchStart",h="FromProtocolLaunchStart",f="userAgentStart",p="FromUserAgentStart",g="PCSToJSStart",m="JSStartToOnLoad",w="TTJSStart",y="timeToOnLoad",v="timeToFirstByte",b="FCP_Old"},53709:function(t,e,n){n.d(e,{Rd:function(){return h},SS:function(){return g},aL:function(){return p},fi:function(){return f}});var i=n(1732),r=n(7469),o=n(21599),s=n(98216),a=n(12870);const c="layoutPromotion",u=["msNurturingMetadataTemplate","msNurturingOnboardNTPToCE"],d={[o.z.FreOverlay]:"ntp_profile_scope_tab_functional_notification",[o.z.FeedLayoutPromotions]:"ntp_profile_scope_tab_functional_notification",[o.z.NurturingFunctional]:"ntp_profile_scope_tab_functional_notification",[o.z.NurturingPromotions]:"ntp_profile_scope_tab_functional_notification"},l={[o.R.Engaged]:"PrimaryCTA_Clicked",[o.R.Dismissed]:"DismissedCTA_Clicked",[o.R.Ignored]:"Notification_Ignored"};async function h(){const{enabled:t,disabled:e}=await(0,i.hb)();return u.every(n=>t.includes(n)||e.includes(n))}async function f(t,e){r.uq.updateCTA(t,l[e])}const p=(t,e)=>async n=>{const i=function(t,e){if(t)return d[e.placementGroup];if(e.placementId===c)return"ntp_profile_scope_tab_pure_functional_notification";let n=0;try{n=parseInt(a.Rb?.ClientSettings?.browser?.version||"",10)}catch(t){}return n>=130?"ntp_profile_scope_tab_feature_campaign":d[e.placementGroup]}(!t&&!e||!!e&&void 0!==e.find(t=>n.id.indexOf(t)>-1),{placementId:n.id,placementGroup:n.priorityGroup});s.YT.addOrUpdateTmplProperty(`ovl_enp_tmp_${i}`,"1");const o=await r.uq.getToken(n.id,i);return!!o?.success||s.YT.addOrUpdateTmplProperty(`ovl_enp_cld_${n.id}`,"1"),!!o?.success};const g=async()=>{const t=`${c}_PreCheck`,e="ntp_profile_scope_tab_feature_campaign";s.YT.addOrUpdateTmplProperty(`ovl_enp_tmp_${e}`,"1");const n=await r.uq.getToken(t,e),i=!!n?.success;return i||s.YT.addOrUpdateTmplProperty(`ovl_enp_cld_${t}`,"1"),i}},53788:function(t,e,n){n.d(e,{LI:function(){return f},X1:function(){return u},ms:function(){return h},vs:function(){return a}});var i=n(79222),r=n(92502);const o=(t,e)=>n=>n>=t&&n<=e,s={start:-1/0,end:1/0},a={timeFilter:s,spanFilterFn:()=>!0,spanMapperFn:(t,e,n)=>d(t,e,n),timeMapperFn:t=>t,timeFilterFn:()=>!0},c={timeFilter:{start:1/0,end:-1/0},spanFilterFn:()=>!1,spanMapperFn:()=>{},timeMapperFn:()=>{},timeFilterFn:()=>!1};function u(t,{timeFilter:e},n,a){if(t&&n&&e!==s){const{start:s,end:c}=e;if(a){const e=(0,i.A)(t,{[n]:s},n),o=(0,r.A)(t,{[n]:c},n);t=t.slice(e,o)}else{const e=o(s,c);t=t.filter(t=>e(t[n]))}}return t}function d(t,e,n,i){if(null!=t&&(null!=e&&(n=e-t),null!=n&&n>=0)){if(i&&null==(t=i(t)))return;return[f(t),f(n)]}}function l(t,e){return(n,i,r)=>{if(t(n,i,r))return d(n,i,r,e)}}function h(t){if(!t)return a;const{start:e,end:n}=t;if(null==e||null==n||e>n)return c;const i=o(e,n),r=t=>f(t-e),s=function(t){const{start:e,end:n}=t;return(t,i,r)=>{if(null==t)return!1;let o;if(null!=i)o=i;else{if(null==r)return!1;o=t+r}return!(o<t)&&t<=n&&o>=e}}(t);return{timeFilter:t,spanFilterFn:s,spanMapperFn:l(s,r),timeMapperFn:r,timeFilterFn:t=>i(t)}}const f=t=>t<5?Math.round(10*t)/10:Math.round(t)},53829:function(t,e,n){n.d(e,{nB:function(){return u}});var i=n(89980);"undefined"!=typeof window&&window.location.href;const r="timestamp_",o="force_timestamp_",s="_jssMap",a="keys_",c="lastKnown_";function u(){(0,i.Lg)().supported&&((0,i.Lg)().removeSubstringKeys(c),(0,i.Lg)().removeSubstringKeys(r),(0,i.Lg)().removeSubstringKeys(o),(0,i.Lg)().removeSubstringKeys(a),(0,i.Lg)().removeSubstringKeys(s))}},53978:function(t,e,n){n.d(e,{Wz:function(){return o},Z2:function(){return i},hR:function(){return c},pg:function(){return a},qd:function(){return r},xW:function(){return s}});const i="csux_evt",r="csux_evt-",o=9e5,s=new Map([["BackgroundImageWC",864e5],["SuperNav",9e5]]),a=new Map([["BackgroundImageWC",12096e5],["SuperNav",12096e5]]),c={start_year:2023,start_month:1,start_day:31,end_year:2099,end_month:12,end_day:31}},54030:function(t,e,n){n.d(e,{N:function(){return s},u:function(){return a}});var i=n(47149),r=n(61522),o=n(94706);function s(...t){return new i.$((0,o.R)(...t))}function a(...t){if(!t||t.length<2||!(0,r.P5)(t[t.length-1]))throw new Error("Invalid arguments");const e=t.pop(),n=(0,o.R)(...t),s=Object.assign(n,e);return new i.$(s)}},54193:function(t,e,n){var i,r;n.d(e,{p:function(){return d},Y:function(){return u}}),function(t){t[t.DTS_2u_r100_1=1]="DTS_2u_r100_1",t[t.DTS_2u_r150_2=2]="DTS_2u_r150_2",t[t.DTS_2u_r191_3=3]="DTS_2u_r191_3",t[t.DTS_2u_r201_4=4]="DTS_2u_r201_4"}(i||(i={})),function(t){t.title_main="title_main",t.img_main="img_main",t.img_logo="img_logo",t.data_callToAction="data_callToAction",t.data_providerName="data_providerName",t.data_price="data_price",t.data_disclaimer="data_disclaimer",t.data_callout_1="data_callout_1",t.data_callout_2="data_callout_2",t.data_callout_3="data_callout_3",t.data_callout_4="data_callout_4",t.data_popupDisclaimer="data_popupDisclaimer",t.data_reviewRatingItem="data_reviewRatingItem",t.data_workingHoursItem="data_workingHoursItem"}(r||(r={}));var o=n(93468),s=n(65022),a=n(693);function c(t,e,n){n&&("object"==typeof n&&(0,a.A)(n)||(t[e]=n))}function u(t,e){if(!e||!t)return null;const n=e.toLowerCase();return t[t.regionNameMapping?.[n]||n]}function d(t,e){const n=u(t,e);if(!n?.templates?.length)return[];const i=[];for(const t of n.templates){const e=l(t);if(null===e)return[];i.push(e)}return i}function l(t){const e=[],n={},i={},r={},a={},u={value:1};if(!function(t,e,n,i,r){if(!f(t,"titleAssets"))return!1;if(!t)return!0;for(const o in t){const s=t[o],a=r.value++;i[o]=a;const u={required:s.required?1:0,id:a,title:{len:s.length}};c(n,a,s.lineLen),e.push(u)}return!0}(t.titleAssets,e,i,a,u))return null;if(!function(t,e,n,i,r){if(!f(t,"imageAssets"))return!1;if(!t)return!0;for(const o in t){const s=t[o],a=r.value++;i[o]=a;const u={required:s.required?1:0,id:a,img:{w:s.width,h:s.height,type:s.typeId}};c(n,a,h(s)),e.push(u)}return!0}(t.imageAssets,e,r,a,u))return null;if(!function(t,e,n,i,r){if(!f(t,"dataAssets"))return!1;if(!t)return!0;for(const o in t){const s=t[o],a=r.value++;i[o]=a;const u={required:s.required?1:0,id:a,data:{type:s.typeId}};c(u.data,"len",s.length),c(n,a,s.lineLen),e.push(u)}return!0}(t.dataAssets,e,i,a,u))return null;const[d,l]=function(t,e){if(!t||0===t.length)return[!0,[]];for(const n of t)for(const t of n.assetKeys)if(!(t in e))return(0,o.vV)(s.o1l,`Asset key '${t}' referenced in lineCountConstraints but not found in template assets. Available keys: ${Object.keys(e).join(", ")}`),[!1,[]];const n=t.map(t=>({assetkeys:t.assetKeys.map(t=>e[t]),lclimit:t.lineCountLimit}));return[!0,n]}(t.lineCountConstraints,a);if(!d)return null;c(n,"asset_linelen_map",i),c(n,"img_crop_map",r),c(n,"lc_contraints",l);const p={id:t.templateId,assets:e};return Object.keys(n).length>0&&(p.template_kv=JSON.stringify(n)),p}function h(t){const e={};return c(e,"ratio_filter_tol",t.imageFitRatioTolerance),c(e,"disable_padding",t.imageFitDisablePadding),Object.keys(e).length>0?e:null}function f(t,e){if(!t)return!0;for(const n in t)if(!Object.values(r).includes(n))return(0,o.vV)(s.o1l,`Invalid asset key '${n}' in ${e}. Valid keys: ${Object.values(r).join(", ")}`),!1;return!0}},54361:function(t,e,n){n.d(e,{p:function(){return p}});var i=n(67387),r=n(12870),o=n(85766),s=n(74166),a=n(48608),c=n(44369),u=n(16091),d=n(17720),l=n(97406),h=n(76980);class f extends l.g{async getState(){const t=2===(0,c.l)().getSignInState(),e=await this.getAccountInfo();let n="UNSUPPORTED_SOVEREIGNTY";"AAD"===e?.accountType?n="AAD":"MSA"===e?.accountType&&(n="MSA");const u=r.Rb.ClientSettings;return{isSignedIn:t,accountType:n,signedInAccounts:e?await this.getSignedInAccounts(e):void 0,storage:{elt:+!!(0,s.Ux)(a.kh),lt:+!!(0,s.Ux)(o.wj),aace:+!!(0,s.Ux)(i.v1),ace:+!!(0,s.Ux)(i.kr),app_anon:+!!(0,s.Ux)(i.CR),anon:+!!(0,s.Ux)("ANON"),app_wid:+!!(0,s.Ux)(i.j$,!0)},appType:u&&u.apptype,pageType:u&&u.pagetype}}async getAccountInfo(){const t=window?.chrome?.authPrivate?.getPrimaryAccountInfo;return new Promise(e=>{t?t(t=>{if(t){const n={accountId:t.account_id,accountType:t.account_type,firstName:t.first_name,lastName:t.last_name};e(n)}else e({})}):e({})})}async getSignedInAccounts(t){return null===t?[-1]:[(0,h.tW)(t?.firstName)]}getCompressedResult(t){return t?t.match(/\bsuccess\b/i)?"S":t.match(/\bfailure\b/i)?"F":t.toString():null}static getInstance(){return d.vv.get("__NtpAuthRecordManagerInstance__",()=>new f)}}const p=(0,u.G)(f)},54423:function(t,e,n){var i;n.d(e,{$:function(){return i}}),function(t){t.AFDProtocolKey="afdprotocol",t.BackfillContentDueToSSRAdsFailed="__backfillContentDueToSSRAdsFailed__",t.DelayNtpSSRFeedDuration="__DelayNtpSSRFeedDuration__",t.ErrorLogHistory="__ErrorLogHistory__",t.HydrationPromise="__hydrationPromise__",t.IsSSRWpoFeedConsumed="__isSSRWpoFeedConsumed__",t.NavEventEnabled="__navEventEnabled__",t.OriginalRequest="__originalRequest__",t.PlaceHolderResponse="__placeHolderResponse__",t.XmlBuilder2Import="__XmlBuilder2Import__",t.CustomSVGBuilder="__CustomSVGBuilder__",t.WeatherDataConnectorPromise="__WeatherDataConnectorPromise__",t.CopilotAPISupported="__CopilotAPISupported__"}(i||(i={}))},54761:function(t,e,n){var i;n.d(e,{Ar:function(){return i}}),function(t){t.eventGleam="eventGleam",t.topSites="topsites",t.layoutPromotion="layoutPromotion",t.topSitesPromotion="topsitesPromotion",t.topsitesCollapse="topsitesCollapse",t.recommendedsitesCollapse="recommendedsitesCollapse",t.bellCoachMark="bellCoachMark",t.backupRegionStatus="backupRegionStatus",t.searchBoxCollapse="searchBoxCollapse",t.followedTopics="followedTopics",t.feedContextualFeedback="feedContextualFeedback",t.wpoSignal="wpoSignal",t.animationControl="animationControl",t.pinProngCoachMark="pinProngCoachMark",t.shorelineTrigger="shorelineTrigger",t.topNavPivotsPromotion="pivotNav",t.uxMessage="uxMessage",t.widget="widget",t.edgeSignal="edgeSignal",t.isLinearFeedEnabled="IsLinearFeedEnabled"}(i||(i={}))},55457:function(t,e,n){n.d(e,{$e:function(){return r},NZ:function(){return a},VR:function(){return d},et:function(){return s},lD:function(){return i},mR:function(){return o},vS:function(){return c},vb:function(){return u}});const i="background_setting_preferences",r="ntp.background_image";var o;!function(t){t.changeBackgroundDaily="changeBackgroundDaily",t.selectedVideoSetting="selectedVideoSetting",t.backgroundSelectionMetadata="backgroundSelectionMetadata",t.disableRubyBackground="disableRubyBackground"}(o||(o={}));const s=850,a=new Map([["BrowserLocal","custom"],["Iris","bing"],["Theme","theme"],["Video","imageAndVideo"],["CMSImage","imageAndVideo"]]),c=new Map([["imageAndVideo",["Video","CMSImage","Iris"]],["bing",["Iris"]],["custom",["BrowserLocal"]],["theme",["Theme"]]]),u=Object.freeze({dataDark:[{attribution:"Microsoft",image:{i100:"AA1yQQ8v",i240:"AA1yQQ8v",i720:"AA1yQIZK",i1080:"AA1yQLvP",i1440:"AA1yQLvR",i2160:"AA1yQLvU"}},{attribution:"Microsoft",image:{i100:"AA1yQSyx",i240:"AA1yQSyx",i720:"AA1yQGXp",i1080:"AA1yQNKa",i1440:"AA1yQIZM",i2160:"AA1yQGXt"}},{attribution:"Microsoft",image:{i100:"AA1yQLvQ",i240:"AA1yQLvQ",i720:"AA1yQEJm",i1080:"AA1yQNKc",i1440:"AA1yQIZP",i2160:"AA1yQEJo"}},{attribution:"Microsoft",image:{i100:"AA1yQIZL",i240:"AA1yQIZL",i720:"AA1yQQ8y",i1080:"AA1yQQ8A",i1440:"AA1yQEJn",i2160:"AA1yQNKd"}},{attribution:"Microsoft",image:{i100:"AA1yQQ8w",i240:"AA1yQQ8w",i720:"AA1yQQ8x",i1080:"AA1yQQ8z",i1440:"AA1yQLvS",i2160:"AA1yQNKb"}},{attribution:"Microsoft",image:{i100:"AA1yQIZJ",i240:"AA1yQIZJ",i720:"AA1yQC58",i1080:"AA1yQC59",i1440:"AA1yQC5a",i2160:"AA1yQC5c"}},{attribution:"Microsoft",image:{i100:"AA1yQNK9",i240:"AA1yQNK9",i720:"AA1yQGXq",i1080:"AA1yQGXs",i1440:"AA1yQGXr",i2160:"AA1yQLvT"}}],dataLight:[{attribution:"Microsoft",image:{i100:"AA1yQSwh",i240:"AA1yQSwh",i720:"AA1yQC3g",i1080:"AA1yQLta",i1440:"AA1yQLta",i2160:"AA1yQC3l"}},{attribution:"Microsoft",image:{i100:"AA1yQC3h",i240:"AA1yQC3h",i720:"AA1yQLt9",i1080:"AA1yQEG0",i1440:"AA1yQGVM",i2160:"AA1yQGVN"}},{attribution:"Microsoft",image:{i100:"AA1yQEG3",i240:"AA1yQEG3",i720:"AA1yQNHj",i1080:"AA1yQLtb",i1440:"AA1yQNHn",i2160:"AA1yQLtg"}},{attribution:"Microsoft",image:{i100:"AA1yQEG1",i240:"AA1yQEG1",i720:"AA1yQGVL",i1080:"AA1yQEG4",i1440:"AA1yQEG5",i2160:"AA1yQLtf"}},{attribution:"Microsoft",image:{i100:"AA1yQC3j",i240:"AA1yQC3j",i720:"AA1yQNHl",i1080:"AA1yQQ5s",i1440:"AA1yQNHo",i2160:"AA1yQIWR"}},{attribution:"Microsoft",image:{i100:"AA1yQGVK",i240:"AA1yQGVK",i720:"AA1yQIWO",i1080:"AA1yQC3i",i1440:"AA1yQC3k",i2160:"AA1yQLte"}},{attribution:"Microsoft",image:{i100:"AA1yQIWQ",i240:"AA1yQIWQ",i720:"AA1yQLtd",i1080:"AA1yQSwj",i1440:"AA1yQNHm",i2160:"AA1yQSwi"}}]}),d=Object.freeze({dataLight:[{attribution:"Microsoft",image:{i100:"AA1Ps1bp",i240:"AA1Ps1bp",i720:"AA1PsdB8",i1080:"AA1Ps6xI",i1440:"AA1PrUxg",i2160:"AA1PrUk8"}},{attribution:"Microsoft",image:{i100:"AA1Ps3Nm",i240:"AA1Ps3Nm",i720:"AA1PrX5C",i1080:"AA1PrX7n",i1440:"AA1PsglX",i2160:"AA1PrYEe"}},{attribution:"Microsoft",image:{i100:"AA1PrYKL",i240:"AA1PrYKL",i720:"AA1PrYOf",i1080:"AA1Ps3RS",i1440:"AA1Ps8Lz",i2160:"AA1Psb1q"}},{attribution:"Microsoft",image:{i100:"AA1PsgdA",i240:"AA1PsgdA",i720:"AA1Ps8Ij",i1080:"AA1Ps8Ku",i1440:"AA1Ps3T1",i2160:"AA1PrWU7"}},{attribution:"Microsoft",image:{i100:"AA1Psit8",i240:"AA1Psit8",i720:"AA1PrYOe",i1080:"AA1PsdCv",i1440:"AA1Ps3SU",i2160:"AA1PrWU5"}},{attribution:"Microsoft",image:{i100:"AA1PsdxE",i240:"AA1PsdxE",i720:"AA1Ps1eZ",i1080:"AA1PrX7m",i1440:"AA1PrNb3",i2160:"AA1Ps14B"}},{attribution:"Microsoft",image:{i100:"AA1Ps8EC",i240:"AA1Ps8EC",i720:"AA1Ps6vw",i1080:"AA1Psiy7",i1440:"AA1PsglU",i2160:"AA1PsdrS"}},{attribution:"Microsoft",image:{i100:"AA1PrYKM",i240:"AA1PrYKM",i720:"AA1Ps8Ie",i1080:"AA1Psgkp",i1440:"AA1Ps1h8",i2160:"AA1Psb1r"}},{attribution:"Microsoft",image:{i100:"AA1Ps3Nk",i240:"AA1Ps3Nk",i720:"AA1Ps8Id",i1080:"AA1Ps1go",i1440:"AA1Ps8Lv",i2160:"AA1Ps3GG"}},{attribution:"Microsoft",image:{i100:"AA1PrX1i",i240:"AA1PrX1i",i720:"AA1PrUu8",i1080:"AA1PrYQr",i1440:"AA1Ps6za",i2160:"AA1PrYEg"}},{attribution:"Microsoft",image:{i100:"AA1Ps8ED",i240:"AA1Ps8ED",i720:"AA1Psbdp",i1080:"AA1Psgks",i1440:"AA1PrX8i",i2160:"AA1Ps14y"}}],dataDark:[{attribution:"Microsoft",image:{i100:"AA1Psgdx",i240:"AA1Psgdx",i720:"AA1Ps3Qa",i1080:"AA1Psiy8",i1440:"AA1PsglW",i2160:"AA1PrUk9"}},{attribution:"Microsoft",image:{i100:"AA1PrX1g",i240:"AA1PrX1g",i720:"AA1Psgi8",i1080:"AA1Psbfr",i1440:"AA1PrYRz",i2160:"AA1Ps14A"}},{attribution:"Microsoft",image:{i100:"AA1PrN3F",i240:"AA1PrN3F",i720:"AA1PrYOg",i1080:"AA1PsdCx",i1440:"AA1PrNb4",i2160:"AA1Psg4J"}},{attribution:"Microsoft",image:{i100:"AA1Ps1br",i240:"AA1Ps1br",i720:"AA1PsiwA",i1080:"AA1Psiye",i1440:"AA1PrYRy",i2160:"AA1PrYEf"}},{attribution:"Microsoft",image:{i100:"AA1PrYKN",i240:"AA1PrYKN",i720:"AA1Ps1eX",i1080:"AA1PrN9F",i1440:"AA1PsdDw",i2160:"AA1PrSl2"}},{attribution:"Microsoft",image:{i100:"AA1Ps6qy",i240:"AA1Ps6qy",i720:"AA1Psiwy",i1080:"AA1Psiyd",i1440:"AA1Ps1ha",i2160:"AA1Ps8ym"}},{attribution:"Microsoft",image:{i100:"AA1Ps1bq",i240:"AA1Ps1bq",i720:"AA1Ps6vx",i1080:"AA1Ps8Kt",i1440:"AA1PrX8l",i2160:"AA1PsdrT"}},{attribution:"Microsoft",image:{i100:"AA1PrX1h",i240:"AA1PrX1h",i720:"AA1PrN7Q",i1080:"AA1PrYQo",i1440:"AA1PsizJ",i2160:"AA1Ps3GH"}},{attribution:"Microsoft",image:{i100:"AA1Psgdz",i240:"AA1Psgdz",i720:"AA1PrUu7",i1080:"AA1Psgkt",i1440:"AA1Ps6z8",i2160:"AA1Ps8yk"}},{attribution:"Microsoft",image:{i100:"AA1Ps6qz",i240:"AA1Ps6qz",i720:"AA1Ps3Qe",i1080:"AA1PrN9I",i1440:"AA1Psbh0",i2160:"AA1Psg4K"}},{attribution:"Microsoft",image:{i100:"AA1PrN3G",i240:"AA1PrN3G",i720:"AA1PrX5D",i1080:"AA1Psgkv",i1440:"AA1PrX8o",i2160:"AA1Ps14C"}}]})},55593:function(t,e,n){n.d(e,{a:function(){return o}});var i=n(77246);let r;function o(){return(0,i.S)()?(r||(r=new URLSearchParams(window?.location.search)),r):new URLSearchParams(window?.location.search)}},55956:function(t,e,n){n.d(e,{R:function(){return b}});var i=n(24678),r=n(23768),o=n(76991),s=n(3371),a=n(88294);function c(){return p(r.m.updatePageComplete,()=>!0)}function u(){return p(r.m.updateAboveTheFoldVisuallyReady,()=>!0)}function d(){return p(r.m.updateBelowTheFoldTransitionStart,()=>!0)}function l(t){return f(t,s.Y.resolvedForLoad)}function h(t){return f(t,s.Y.resolvedForRender)}function f(t,e){return p(r.m.updateExperienceCurrentState,n=>((n.params||[])[0]||[]).some(n=>n.currentState===e&&n.experienceType===t))}function p(t,e){return new Promise((n,i)=>{try{t.registerObserver(t=>{e(t)&&n(!0)})}catch(t){a.v.logError(t),i(!1)}})}function g(){return new Promise((t,e)=>{try{r.m.updateHydrationComplete.registerObserver(()=>{t(!0)})}catch(t){a.v.logError(t),e(!1)}})}var m=n(16414),w=n(8092);class y{static updateExperienceCurrentState(t,e,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(t,e,i,r);o&&(o.currentState=n)}static updateMilestoneTiming(t,e,n,i,r,a,c){const u=this.getOrCreateExperienceInstanceMilestone(t,e,a,c);let d;if(u)switch(n){case o.e.initialized:d=u.initializationTime;break;case o.e.rendered:d=u.renderTime;break;case o.e.visuallyReady:d=u.visuallyReadyTime;break;case o.e.domComplete:d=u.domCompleteTime;break;case o.e.startLoading:return void(d=u.startLoadingTime);case o.e.error:return void(u.currentState=s.Y.error);case o.e.mediaContentReady:d=u.mediaContentReadyTime;break;default:throw new Error("Invalid Argument: Unrecognized eventType")}if(!d)throw new Error(`Invalid experience time object while processing timing update for ${n}`);i&&(d.startTime=i),r&&(d.endTime=r)}static updateHydrationComplete(t,e){if(!t)throw new Error(y.invalidMilestoneModelMessage);t.hydrationComplete=e}static updateBelowTheFoldTransitionStart(t,e){if(!t)throw new Error(y.invalidMilestoneModelMessage);t.belowTheFoldTransitionStart=e}static updateMilestonePlugin(t,e){if(!t)throw new Error(y.invalidMilestoneModelMessage);t.plugins&&0!==t.plugins.length?t.plugins=t.plugins.concat(e):t.plugins=e}static updateAboveTheFoldVisuallyReady(t,e){if(!t)throw new Error(y.invalidMilestoneModelMessage);if(!t.aboveTheFoldVisuallyReady)throw new Error("AboveTheFold start not set");t.aboveTheFoldVisuallyReady.startTime=0,t.aboveTheFoldVisuallyReady.endTime=e}static updatePageComplete(t,e){if(!t)throw new Error(y.invalidMilestoneModelMessage);if(!t.aboveTheFoldVisuallyReady)throw new Error("AboveTheFold start not set");t.pageCompleteTiming.startTime=0,t.pageCompleteTiming.endTime=e}static deferExperienceLoad(t,e,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(t,e,i,r);o.loadAfter={experienceType:n.experienceType,experienceGroup:n.experienceGroup,eventType:n.eventType},y.updateLoadDeferralHandler(o,e)}static deferExperienceRender(t,e,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(t,e,i,r);o.renderAfter={experienceType:n.experienceType,experienceGroup:n.experienceGroup,eventType:n.eventType},y.updateRenderDeferralHandler(o,e)}static getOrCreateExperienceMilestone(t,e,n){if(!e)throw new Error("Invalid Argument: experienceType");t||(t={aboveTheFoldVisuallyReady:void 0,pageCompleteTiming:void 0,perExperienceMilestones:void 0}),t.perExperienceMilestones||(t.perExperienceMilestones=new Map);let i=t.perExperienceMilestones.get(e);return i||(i={experienceType:e,experienceGroup:n,perInstanceMilestones:new Map},t.perExperienceMilestones.set(e,i)),i}static getOrCreateExperienceInstanceMilestone(t,e,n,i){const r=this.getOrCreateExperienceMilestone(t,e,n),o=i||m.D;let a=r.perInstanceMilestones.get(o);return a||(a={currentState:s.Y.notStarted,initializationTime:{endTime:m.o,startTime:m.o},loadAfter:{experienceType:void 0,eventType:void 0},renderAfter:{experienceType:void 0,eventType:void 0},renderTime:{endTime:m.o,startTime:m.o},visuallyReadyTime:{endTime:m.o,startTime:m.o},startLoadingTime:{endTime:m.o,startTime:m.o},mediaContentReadyTime:{endTime:m.o,startTime:m.o},domCompleteTime:{endTime:m.o,startTime:m.o}},r.perInstanceMilestones.set(o,a)),a}static updateLoadDeferralHandler(t,e){switch(t.loadAfter.eventType){case w.R$.pageVisuallyReady:t.shouldLoad=c;break;case w.R$.aboveTheFoldVisuallyReady:t.shouldLoad=u;break;case w.R$.belowTheFoldTransitionStart:t.shouldLoad=d;break;case w.R$.hydrationComplete:t.shouldLoad=g;break;default:return void(t.shouldLoad=l.bind(this,e))}}static updateRenderDeferralHandler(t,e){switch(t.renderAfter.eventType){case w.R$.aboveTheFoldVisuallyReady:t.shouldRender=u;break;case w.R$.belowTheFoldTransitionStart:t.shouldRender=d;break;case w.R$.hydrationComplete:t.shouldRender=g;break;default:return void(t.shouldRender=h.bind(this,e))}}}y.invalidMilestoneModelMessage="Invalid Argument: milestoneModel";var v=n(7187);class b{reduce(t,e){let n;if(n=t?{...t}:{aboveTheFoldVisuallyReady:{endTime:m.o,startTime:m.o},pageCompleteTiming:{endTime:m.o,startTime:m.o},perExperienceMilestones:new Map},!e)return n;let i=!1;return i=i||this.handlePageLevelActions(i,e,n),i=i||this.handleExperienceLevelActions(i,e,n),n||t}handleExperienceLevelActions(t,e,n){return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t||i.n.handleAction(e,r.m.updateInitTiming,t=>this.updateTiming(o.e.initialized,n,t)))||i.n.handleAction(e,r.m.updateRenderTiming,t=>this.updateTiming(o.e.rendered,n,t)))||i.n.handleAction(e,r.m.updateVisuallyReadyTiming,t=>this.updateTiming(o.e.visuallyReady,n,t)))||i.n.handleAction(e,r.m.updateStartLoadingTiming,t=>this.updateTiming(o.e.startLoading,n,t)))||i.n.handleAction(e,r.m.updateMediaContentReadyTiming,t=>this.updateTiming(o.e.mediaContentReady,n,t)))||i.n.handleAction(e,r.m.updateDomCompleteTiming,t=>this.updateTiming(o.e.domComplete,n,t)))||i.n.handleAction(e,r.m.updateExperienceLoadDeferralState,t=>t.forEach(({deferralInfo:t,experienceType:e,experienceGroup:i,experienceInstance:r})=>{t&&e&&y.deferExperienceLoad(n,e,t,i,r)})))||i.n.handleAction(e,r.m.updateExperienceRenderDeferralState,t=>t.forEach(({deferralInfo:t,experienceType:e,experienceGroup:i,experienceInstance:r})=>{t&&e&&y.deferExperienceRender(n,e,t,i,r)})))||i.n.handleAction(e,r.m.updateExperienceCurrentState,t=>t.forEach(({experienceType:t,currentState:e,experienceGroup:i,experienceInstance:r})=>{e&&t&&y.updateExperienceCurrentState(n,t,e,i,r)})))||i.n.handleAction(e,r.m.updateExperiencePublicState,t=>{})}handlePageLevelActions(t,e,n){return t=(t=(t=(t=(t=t||i.n.handleAction(e,r.m.updatePageComplete,t=>y.updatePageComplete(n,t)))||i.n.handleAction(e,r.m.updateAboveTheFoldVisuallyReady,t=>y.updateAboveTheFoldVisuallyReady(n,t)))||i.n.handleAction(e,r.m.updateBelowTheFoldTransitionStart,t=>{(0,v.isNullOrUndefined)(t)||y.updateBelowTheFoldTransitionStart(n,t)}))||i.n.handleAction(e,r.m.updateHydrationComplete,()=>{y.updateHydrationComplete(n,!0)}))||i.n.handleAction(e,r.m.updateMilestonePlugins,t=>{t.length>0&&y.updateMilestonePlugin(n,t)})}updateTiming(t,e,n){const{startTime:i,endTime:r,experienceType:o,experienceGroup:s,experienceInstance:a}=n;y.updateMilestoneTiming(e,o,t,i,r,s,a)}}},56018:function(t,e,n){n.d(e,{E:function(){return i}});const i=t=>"function"==typeof window.requestIdleCallback?window.requestIdleCallback(t):window.setTimeout(t,0)},56046:function(t,e,n){function i(t,e=!1){return""}n.d(e,{C:function(){return i}})},56085:function(t,e,n){var i;function r(t,e,n=performance.now()){const i=window?.chrome?.embeddedSearch?.newTabPage;i&&(i.logEventWithTimestamp?i.logEventWithTimestamp(t,n,e):i.logEvent(t))}n.d(e,{B:function(){return r}}),function(t){t[t.NTP_ALL_TILES_LOADED=11]="NTP_ALL_TILES_LOADED",t[t.NTP_BACKGROUND_IMAGE_LOADED=60]="NTP_BACKGROUND_IMAGE_LOADED",t[t.NTP_VISUALLY_READY=62]="NTP_VISUALLY_READY",t[t.NTP_SEARCH_BOX_VISUALLY_READY=63]="NTP_SEARCH_BOX_VISUALLY_READY",t[t.NTP_NATIVE_AD_VISUALLY_READY=64]="NTP_NATIVE_AD_VISUALLY_READY"}(i||(i={}))},56098:function(t,e,n){n.d(e,{c:function(){return d}});var i=n(90565),r=n(65022),o=n(93468),s=n(49813),a=n(79426);const c=new Map,u=new Set([s.DE,s.FL,s.DU,s.JI,s.fO,s.Mg,s.gy,s.yE]);class d{static bind(t,e=[d.defaultOrigin]){const n=e.filter(t=>"string"==typeof t&&t.length>0);if(!t||!n||!n.length)return(0,o.vV)(r.cSA,"Parent window and origin must be provided."),null;if(t===window)return(0,o.vV)(r.cSA,"Parent window cannot be the same as the current window."),null;if(c.has(t)){const e=c.get(t);return e.origin=n,e}const i=new d(t,n);return c.set(t,i),i}static getInstance(t=window.parent){return c.has(t)&&c.get(t)||null}constructor(t,e=[d.defaultOrigin]){this.fromUCSettablePromise=null,this.origin=[d.defaultOrigin],this.parent=null,this.callbacks={},this.interceptors={},this.listen=t=>{if(!this.origin.includes(t.origin)||t.origin===s.Mg&&!t.data?.type)return;const e=this.validateMessage(t.data);if(!e||!e.type)return void(0,o.vV)(r.UfE,"Received invalid message from parent page",JSON.stringify({origin:this.origin,data:t.data}));const n=this.callbacks[e.type];if(n&&n.length>0)try{n.forEach(t=>t(e.data))}catch(t){(0,o.vV)(r.WjD,`Error with event callback for event type ${e.type}`,t instanceof Error?t.message:String(t))}},this.resolveUCPromise=(t,e)=>{let n={top:0,height:0};switch(t){case"modal":n=this.getModalOverridesForUCImmersiveMode(e);break;case"cookieBanner":n={top:0,height:0}}this.fromUCSettablePromise?.set(n)},this.parent=t,this.origin=e,window.addEventListener("message",this.listen)}cleanUp(){this.callbacks={},this.interceptors={},window.removeEventListener("message",this.listen)}validateMessage(t){if("object"!=typeof t||!t||"string"!=typeof t.type)return;const e=t.type,n=t.data;switch(e){case"onUCHeightChanged":return n&&"height"in n&&Object.keys(n).length<=3?t:void 0;case"onUCWheel":return n&&"deltaY"in n&&1===Object.keys(n).length?t:void 0;case"onUCTouchMove":return n&&"clientY"in n&&1===Object.keys(n).length?t:void 0;case"onUCImmersiveModeEntered":return n&&"innerHeight"in n&&"scrollY"in n&&Object.keys(n).length<=3?t:void 0;case"onDialogOpening":return n&&"type"in n&&"innerHeight"in n&&"scrollY"in n&&3===Object.keys(n).length?t:void 0;case"onUCImmersiveModeHeightChanged":return n&&"innerHeight"in n&&"scrollY"in n&&2===Object.keys(n).length?t:void 0;case"onUCPageDownKeyPress":case"onUCPageUpKeyPress":case"onUCDownKeyPress":case"onUCUpKeyPress":case"onUCSpaceKeyPress":case"onUCShiftSpaceKeyPress":case"onUCImmersiveModeExited":case"onUCCookieBannerModeEntered":return!n||n&&0===Object.keys(n).length?t:void 0;default:return}}intercept(t,e){Object.values(i.m2).includes(t)?this.interceptors[t]=e:(0,o.vV)(r.WjD,`Cannot intercept unknown event type ${t}`)}unintercept(t){this.interceptors[t]&&delete this.interceptors[t]}emit(t){const e=this.validateToUCMessage(t);if(e){if(t=e,this.interceptors[t.type])try{return this.interceptors[t.type](t.data)}catch(e){(0,o.vV)(r.WjD,`Error with interceptor for event type ${t.type}`,e instanceof Error?e.message:String(e))}this.parent?this.origin.forEach(e=>{u.has(e)&&this.parent.postMessage(t,e)}):(0,o.vV)(r.Ox9,"Post message unable to send, parent window is not defined",`Type: ${t.type} Origin list: ${this.origin?.toString()}`)}else(0,o.vV)(r.UfE,"Attempted to send invalid message to Unified Composer",`Type: ${t?.type} Data: ${JSON.stringify(t?.data)}`)}validateToUCMessage(t){if("object"!=typeof t||!t||"string"!=typeof t.type)return;const e=t.type,n=t.data;switch(e){case i.m2.OnCookieBannerModeExited:case i.m2.OnFeedHeightChanged:return n&&"height"in n&&1===Object.keys(n).length?t:void 0;case i.m2.OnFeedPageScrolled:return n&&"pageYOffset"in n&&1===Object.keys(n).length?t:void 0;case i.m2.OnFeedReadyToDisplay:return!n||n&&"displayString"in n&&"market"in n&&"supported"in n&&3===Object.keys(n).length?t:void 0;case i.m2.OnTTVRMarked:return n&&"timestamp"in n&&"timeOrigin"in n&&2===Object.keys(n).length?t:void 0;case i.m2.OnCriticalErrorEncountered:return n&&"errorCode"in n&&1===Object.keys(n).length?t:void 0;case i.m2.OnFeedNavigation:return n&&"url"in n&&1===Object.keys(n).length?t:void 0;case i.m2.OnLocationDataReady:return n&&"location"in n&&1===Object.keys(n).length?t:void 0;case i.m2.OnCookieBannerModeEntering:case i.m2.OnImmersiveModeEntering:case i.m2.OnImmersiveModeExiting:case i.m2.OnImmersiveModeEntered:case i.m2.OnImmersiveModeExited:case i.m2.OnContentReload:case i.m2.OnFeedListenersReady:case i.m2.OnFeedRepositioned:return!n||n&&0===Object.keys(n).length?t:void 0;default:return}}async awaitOnce(t,e){if(this.fromUCSettablePromise)return;const n=this.resolveUCPromise.bind(this,t);this.callbacks[e]=[...this.callbacks[e]||[],n],this.fromUCSettablePromise=new a.e;const i=await this.fromUCSettablePromise.getResultAsync();return this.fromUCSettablePromise=null,this.callbacks[e]=this.callbacks[e].filter(t=>t!==n),i}on(t,e){if("function"!=typeof e)throw new Error("Callback must be a function.");this.callbacks[t]=[...this.callbacks[t]||[],e]}off(t,e){if("function"!=typeof e)throw new Error("Callback must be a function.");this.callbacks[t]&&(this.callbacks[t]=this.callbacks[t].filter(t=>t!==e))}offAll(t){this.callbacks[t]&&delete this.callbacks[t]}notify(t,e){this.emit({type:t,data:e})}notifyAfterRepaint(t){window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{this.emit({type:t})})})}getModalOverridesForUCImmersiveMode(t){return{top:(t?.innerHeight??0)/2+(t?.scrollY??0),height:.9*(t?.innerHeight??0)}}canAwaitUCEvent(t){return void 0===this.callbacks[t]||this.callbacks[t]&&0===this.callbacks[t].length}}d.defaultOrigin=s.DE},56227:function(t,e,n){n.d(e,{a:function(){return r}});var i=n(37805);const r=()=>{const t=i.V.getInstance().rootReducer.connectors().find(t=>t.namespace.indexOf("ExperienceTracker")>=0);if(!t)return null;const e=t.getCurrentState().visuallyReadyDependencies;return e&&0!==e.size?[...e.keys()]:null}},56408:function(t,e,n){var i;n.d(e,{u:function(){return i}}),function(t){t[t.StalePage=1]="StalePage",t[t.SettingsChange=2]="SettingsChange",t[t.MuidChange=3]="MuidChange",t[t.GizmoSettingChange=4]="GizmoSettingChange",t[t.TopSites=5]="TopSites",t[t.PivotSwitch=6]="PivotSwitch",t[t.SignInStateChange=7]="SignInStateChange",t[t.MutePublisher=8]="MutePublisher",t[t.UnMutePublisher=9]="UnMutePublisher",t[t.Dislike=10]="Dislike",t[t.Like=11]="Like",t[t.Save=12]="Save",t[t.Hide=13]="Hide",t[t.KidsMode=14]="KidsMode",t[t.MarketChange=15]="MarketChange",t[t.InterestsSdCardSettingChange=16]="InterestsSdCardSettingChange",t[t.InterestsChange=17]="InterestsChange",t[t.WeatherChange=18]="WeatherChange",t[t.MoneyCardChange=19]="MoneyCardChange",t[t.Disabled=20]="Disabled"}(i||(i={}))},56485:function(t,e,n){var i;n.d(e,{M:function(){return i}}),function(t){t[t.Telemetry=0]="Telemetry",t[t.Monetization=1]="Monetization",t[t.LoadContent=2]="LoadContent",t[t.AfterLoadContent=3]="AfterLoadContent"}(i||(i={}))},56541:function(t,e,n){n.d(e,{qn:function(){return g}});var i=n(87032),r=n(6092),o=n(19548),s=n(12870),a=n(77246),c=n(27261),u=n(63418),d=n(7187);class l{constructor(t,e,n,i,r){this.autoSuggestProperties=t,this.osMarket=e,this.osLanguage=n,this.requestId=i,this.isDarkMode=r}addAutoSuggest(t){if(!(0,a.S)())return!1;if(r.T3.CurrentRequestTargetScope&&"kids"===r.T3.CurrentRequestTargetScope.audienceMode)return!1;const e=this.isDisabled(),n=window[l.globalObjectName];if(n)return n.enable(!e),this.updateAutoSuggestSessionId(),!0;if(e)return!1;const i=this.getCompleteUrl(),o=(0,c.C7)(i,void 0,!0,"use-credentials");o.onload=t;return document.getElementsByTagName("head")[0].appendChild(o),!0}invokeCookieSharing(){h((0,u.Ri)(l.sharedCookieName),5)||(0,u.Ub)(l.sharedCookieName,"SID=00",365,l.cookieDomain,"/")}isDisabled(){return new RegExp("\\b"+l.cookieCrumb+"=0\\b","i").test((0,u.Ri)(l.cookieName))}updateAutoSuggestSessionId(){const t=/SID=[\da-z]+/i;if(!this.partnerSessionId){const e=(0,u.Ri)(l.sharedCookieName);if(h(e,4)){const n=e.match(t);n&&h(n[0],5)&&(this.partnerSessionId=n[0].substr(4))}}const e=window[l.globalObjectName];if(e){const t=e["sid"];"function"==typeof t&&t(this.partnerSessionId)}}getCompleteUrl(){let t="";const e=o._3.getParamsFromUrl(location.search);return e.find(t=>"autosuggest_hook"===t.key)?this.getHookUrl(e):(t=this.autoSuggestProperties.useMarketBasedUrl?this.getMarketBasedUrl():this.getUrl(),this.shouldInitializeAutoSuggestOnPageLoad()&&(t+="&onload=1"),this.isDarkMode&&(t+="&rt=1"),(0,d.isNullOrUndefined)(this.autoSuggestProperties.zeroInputItemCount)||(t+=`&zict=${this.autoSuggestProperties.zeroInputItemCount}`),this.autoSuggestProperties.disableSearchHistory&&(t+="&shdis=1"),(0,d.isNullOrUndefined)(this.autoSuggestProperties.maxItemCount)||(t+=`&itemCount=${this.autoSuggestProperties.maxItemCount}`),t)}shouldInitializeAutoSuggestOnPageLoad(){return this.autoSuggestProperties.delayBind===i.ov.Immediately||this.autoSuggestProperties.delayBind===i.ov.OnPageLoad||this.autoSuggestProperties.delayBind===i.ov.OnBusinessSearchResultsReady&&this.autoSuggestProperties.businessSearchResultsEnabled}getMarketBasedUrl(){const t=this.osMarket||"US",e=this.osLanguage||"en-US",n=this.autoSuggestProperties.partnerEndpoint||"msnedgentp",i=(0,s.Th)().Locale;let r=["https","://www.bing.com/as/init?","pt="+n,this.osLanguage?"&setlang="+e:"",this.osMarket?"&cc="+t:"","&refig="+this.requestId].join("");return"en-us"!==e.toLowerCase()&&(r+="&endpt=1"),r+=this.getFeatures(),r+=this.autoSuggestProperties.businessSearchResultsEnabled?"&msbqf=true":"&msbqf=false",this.autoSuggestProperties.disableSuggestionFetchOnEmpty&&i&&"en-us"!==i.toLowerCase()&&(r+="&dfoe=1"),r+=this.getAutosuggestWCMobile(),r}getHookUrl(t){const e="muidflt9-ismsft",n=(0,s.Th)().CurrentFlights,i=t.find(t=>"fdhead"===t.key),r=i?i.value:"",o=t.find(t=>"asinturl"===t.key),a=o&&o.value;if((n.indexOf(e)>-1||r.indexOf(e)>-1)&&a){return decodeURIComponent(a)}return this.getUrl()}getUrl(){const t=(0,s.Th)().Locale||"en-us";let e=["https","://www.bing.com/as/init?mkt=",t,"&pt=",this.autoSuggestProperties.partnerEndpoint,"&refig=",this.requestId].join("");return this.autoSuggestProperties.enableNewSnrUrl||"en-us"===t.toLowerCase()||(e+="&endpt=1"),e+=this.getAutosuggestWCMobile(),e}getFeatures(){return this.autoSuggestProperties.enableFeatures&&(this.autoSuggestProperties.features||""===this.autoSuggestProperties.features)?"&features="+this.autoSuggestProperties.features:""}getAutosuggestWCMobile(){return this.autoSuggestProperties.enableAutoSuggestforWCMobile?"&asrt=1":""}}function h(t,e){return"string"==typeof t&&(!e||t.length>=e)}l.cookieCrumb="AS",l.globalObjectName="sa_inst",l.cookieName="SRCHHPGUSR",l.sharedCookieName="_SS",l.cookieDomain="msn.com";var f=n(52088),p=n(11372);function g(t){if(!t||t.disableAutoSuggest)return;const{autoSuggestProperties:e,requestId:n,isDarkMode:r,searchBoxContext:o,startPerfMarkerHandler:s}=t,{osMarket:a,osLanguage:c,useMarketBasedUrl:u,delayBind:d,businessSearchResultsEnabled:h,cookieSharingDelayInSeconds:f}=e,p=new l(e,u&&a,u&&c,n,r);if(d===i.ov.OnUserInteraction||d===i.ov.OnBusinessSearchResultsReady&&!h){o.autoSuggestEventHandler=m.bind(o,p),o.registerAutoSuggestOnSearchEventHandler=w.bind(o,t);const e=v(o.inputRef);e?.addEventListener("keyup",o.autoSuggestEventHandler),e?.addEventListener("click",o.autoSuggestEventHandler)}else d!==i.ov.Immediately&&d!==i.ov.OnPageLoad&&d!==i.ov.OnBusinessSearchResultsReady||(s&&s(i.bH),o.registerAutoSuggestOnSearchEventHandler=w.bind(o,t),p.addAutoSuggest(o.registerAutoSuggestOnSearchEventHandler));1===f&&p.invokeCookieSharing()}function m(t,e){if("keyup"===e.type){const t=e.key;if("Tab"===t||"Escape"===t)return}if(t.addAutoSuggest(this.registerAutoSuggestOnSearchEventHandler)){const t=v(this.inputRef);t.removeEventListener("click",this.autoSuggestEventHandler),t.removeEventListener("keyup",this.autoSuggestEventHandler)}}function w(t){const{autoSuggestProperties:e,endPerfMarkerHandler:n,searchBoxContext:o,searchOpenInNewWindow:s,action:c,telemetryCallback:u,enableDetailLogs:d,suggestionClickCallback:l}=t,{delayBind:h}=e;if(h!==i.ov.OnUserInteraction&&h!==i.ov.OnPageLoad&&h!==i.ov.OnBusinessSearchResultsReady||n&&n(i.bH),s)return;const g=window.sj_evt,m=g&&g.fire;m&&(g.fire=function(...t){const[e,n]=t||[];if("AS.Navigate"===e){if(!n)return;const t=v(o.formRef);if(t&&t.attributes&&t.attributes["data-t"]){let e=f.W.get(t);if(!e&&(0,a.S)()&&(window.dispatchEvent(new CustomEvent("telemetrynodeadded",{detail:{element:t}})),e=f.W.get(t)),e.contract.content.type=function(t){if(!t)return p.b5.Undefined;const e=t.toLowerCase();if("hs"===e)return p.b5.SearchHistory;if("pn"===e)return p.b5.TrendingSearch;return p.b5.AutoSuggestSearch}(n.stype),d&&!0===d){const t=n.query??"";if((0,r.rA)().isAadAccountUser){if(c&&c.startsWith("https://www.bing.com/")){let t=c;const i=n.stype??"",r=new URL(t);r.searchParams.set("astycn",i.toString()),r.searchParams.set("qltype","ccaad"),t=r.href.toString(),e.contract.overrideDestinationUrl=t}}else{let i="";if(n.url&&n.url.length>0&&n.url.startsWith("http")?i=n.url.toString():c&&c.startsWith("https://www.bing.com/")&&(i=c),i&&i.length>0){const n=new URL(i);n.searchParams.set("assgl",t.length.toString()),n.searchParams.set("qltype","ccnotaad"),n.searchParams.set("q",""),i=n.href.toString(),e.contract.overrideDestinationUrl=i}}}f.W.setAttribute(t,e.contract)}}"onSearch"===e&&(o.onAutoSuggestSuggestionClickHandler=y.bind(o,c,u,d,l),o.onAutoSuggestSuggestionClickHandler()),m.apply(o,t)})}function y(t,e,n,i){let r=t;const o=v(this.formRef);if(r){const t=(-1!==r.indexOf("?")?"&":"?")+"msnst=AS";if(r+=t,o.attributes&&o.attributes["data-t"]){const t=f.W.get(o);if(n&&!0===n){const e=t.contract.overrideDestinationUrl;if(e&&e.length>0){const t=(-1!==e.indexOf("?")?"&":"?")+"msnst=AS";r=e+t}}t.contract.overrideDestinationUrl=r,f.W.setAttribute(o,t.contract)}}e(o,p.EG.Submit,p.MS.TextSearch),i?.()}function v(t){return t&&t.current?t.current:t}},56639:function(t,e,n){n.d(e,{Mo:function(){return a},cE:function(){return d},s_:function(){return s},vk:function(){return h}});var i=n(77246),r=n(17720);const o="__SapphireUserInformation__",s=()=>r.vv.get(o,()=>null),a=t=>{r.vv.set(o,t)},c="__SapphireSSRUserConfig__",u="__SapphireUserConfig__",d=t=>(0,i.S)()?r.vv.get(u,()=>t):(0,i.S)()?null:r.vv.get(c,()=>null),l="__SapphireUserConfigReady__",h=()=>r.vv.get(l,()=>!1)},56644:function(t,e,n){n.d(e,{Z:function(){return h}});var i=n(56911),r=n(65022),o=n(98216),s=n(16091),a=n(17720),c=n(60815),u=n(79426),d=n(29252);class l{constructor(){this.wpoNotificationPreviewData=new u.e,this.notificationMiniCardDismissed=!1,this.dismissNotificationMiniCard=t=>{this.notificationMiniCardDismissed=!0,o.YT?.addOrUpdateTmplProperty("NotificationMiniCardDismissed",t)}}static getInstance(){return a.vv.get("__WpoPreview__",()=>new l)}storeWpoNotificationPreviewData(t){if(!t)return;if(this.wpoNotificationPreviewData.wasSet())return;const e={};try{for(const n of t.previews?.simplePreviews||[]){for(const t of n.cards)for(const n of t.elements)switch(n.id){case"Icon":e.icon=n.url;break;case"Title":e.title=n.text;break;case"Tooltip":e.tooltip=n.text;break;case"Summary":e.summary=n.text;break;case"Detail":e.detail=n.text}n.previewType&&(e.previewType=n.previewType),n.url&&(e.url=n.url)}const n=Object.keys(e).length;if(0===n)return;if(n>0&&7!==n){const n="Invalid notification preview data.",i=`Parsed data: ${JSON.stringify(e)}. ReceivedPreviewData: ${JSON.stringify(t.previews?.simplePreviews).substring(0,32768)}.`;return void this.logAppError(r.fU,n,i)}this.wpoNotificationPreviewData.set(e),o.YT?.addOrUpdateTmplProperty("previewDataReady","1")}catch(e){const n=`Failed to parse notification preview data.Error:${e}`,i=`ReceivedPreviewData: ${JSON.stringify(t.previews?.simplePreviews).substring(0,32768)}`;this.logAppError(r.C1u,n,i)}}subscribe(t){this.wpoNotificationPreviewData.getResultAsync().then(t)}logAppError(t,e,n=""){o.YT.sendAppErrorEvent({...t,message:e,pb:{...t.pb,customMessage:n,debugId:(0,d.Xq)()}})}}(0,i.Cg)([c.sH],l.prototype,"notificationMiniCardDismissed",void 0);const h=(0,s.G)(l)},57226:function(t,e,n){n.d(e,{EO:function(){return s},PJ:function(){return a},aM:function(){return r},en:function(){return o},sE:function(){return i}});const i=[0,1,2,3,4,5,6],r=[1,2,3,4,5,6,0];const o=(t,e,n,r=!1)=>{const o=i.length,s=function(t,e){return new Date(t,e,0).getDate()}(t,e),a=new Date(t,e-1,1);if(r)return[a,new Date(t,e-1,s)];let c=a.getDay();const u=s+c,d=u%o;let l=d?o-d:0;l=u+l>=5*o?l:l+o,n&&(c>0?(c-=1,l+=1):(c+=6,l+=1));return[new Date(t,e-1,1-c),new Date(t,e-1,s+l)]},s=(t,e)=>e?`${t.getFullYear()}${`0${t.getMonth()+1}`.slice(-2)}${`0${t.getDate()}`.slice(-2)}`:`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`,a=(t,e)=>{if(!t)return null;try{const n=t.split("-");if(!Array.isArray(n)||3!=n.length)return null;const i=o(Number(n[0]),Number(n[1]),e);return Array.isArray(i)&&2==i.length?[s(i[0],!0),s(i[1],!0)]:null}catch{return null}}},57759:function(t,e,n){n.d(e,{Y:function(){return v},w:function(){return b}});var i=n(76166),r=n(65022),o=n(59448),s=n(98216),a=n(77246);class c{constructor(t,e,n,i,r,s,u){if(!t)throw new Error("loggingService is required for ExponentialBackoffRetry.");const d=new o.L(t);this.logInvalidParams(d,e,n,i,r,u),this.loggingService=t,this.maxRetries=e||c.defaultMaxRetries,this.baseRetryDelayInMs=n||c.defaultBaseRetryDelayInMs,this.maxRetryDelayInMs=i||c.maxAllowedRetryDelayInMs,this.factor=r||c.defaultFactor,this.minOffsetInMs=s||c.defaultMinOffsetInMs,this.maxOffsetInMs=u||c.defaultMaxOffsetInMs,(0,a.S)()&&this.loggingService.infoCallback(()=>"ExponentialBackoffRetry has been configured.",null,{maxRetries:e,minTimeout:n,maxTimeout:i,factor:r})}async executeRequest(t,e,n,i,r,o){return new Promise(async(s,a)=>{await this.tryRequest(t,s,a,0,e,n,i,r,o)})}logInvalidParams(t,e,n,i,r,o){e&&(e<1||e>c.maxAllowedRetries)&&t.fatal(`maxRetries should be at least 1 and less than ${c.maxAllowedRetries}.`),n&&n<c.defaultBaseRetryDelayInMs&&t.fatal("baseRetryDelay has to be a positive value greater than or equal to 100."),n&&o&&n<=o&&t.fatal("baseRetryDelay must not be smaller than the maximum delay offset."),i&&(i<=0||i>c.maxAllowedRetryDelayInMs)&&t.fatal(`maxRetryDelay has to be a positive value less than ${c.maxAllowedRetryDelayInMs}.`),r&&r<=0&&t.fatal("factor has to be a positive value.")}async tryRequest(t,e,n,i,o,c,u,d,l){const h=()=>(0,a.S)()&&i<this.maxRetries&&!d;let f=l||"";if(f&&i>0)try{const t=new URL(f);t.searchParams.set("retryAttempt",i.toString()),f=t.toString()}catch(t){}try{const n=u||1e4;let r=null;r=u&&u<0?await t(i,f):await this.timeoutServiceRequest(n,t(i,f)),e(r)}catch(a){if(h()){const r=3,s=parseFloat((Math.random()*(this.minOffsetInMs-this.maxOffsetInMs)+this.maxOffsetInMs).toFixed(r)),h=.5,f=Math.random()<h?-1:1,p=Math.min(this.baseRetryDelayInMs*Math.pow(this.factor,i),this.maxRetryDelayInMs)+s*f;this.loggingService.warnCallback(()=>`Retrying the request in ${p} milliseconds.`,c,{error:a,currentRetry:i+1,requestInfo:o}),setTimeout(()=>this.tryRequest(t,e,n,i+1,o,c,u,d,l),p)}else{if(s.YT&&s.YT.sendAppErrorEvent){const t=("string"==typeof a?a:a.message)||"";s.YT.sendAppErrorEvent({...r.s$M,pb:{...r.s$M.pb,retryAttemptsMade:i,serviceFailed:c&&c.Message,maxRetries:this.maxRetries,customMessage:`${this.getActivityName(c)}. Error details: '${t}'. All retry attempts failed.`}},!1)}this.loggingService.errorCallback(()=>h()?`ExponentialBackoffRetry has exceeded maximum retries ${this.maxRetries}`:"Request has failed.",c,{error:a,currentRetry:i,requestInfo:o}),n(a)}}}async timeoutServiceRequest(t,e){return new Promise(async(n,i)=>{const r=setTimeout(()=>i(new Error(`Service Request Timed out after ${t} milliseconds!`)),t);try{n(await e),clearTimeout(r)}catch(t){i(t),clearTimeout(r)}})}getActivityName(t){return`Activity name: '${t&&t.Message||"None"}'`}}c.defaultBaseRetryDelayInMs=100,c.defaultFactor=2,c.defaultMaxOffsetInMs=25,c.defaultMaxRetries=5,c.defaultMinOffsetInMs=1,c.maxAllowedRetries=10,c.maxAllowedRetryDelayInMs=2e3;var u=n(17128),d=n(79095),l=n(41589),h=n(48257),f=n(17075),p=n(19993),g=n(88294);let m,w;const y=3;function v(t,e={},n,r=!1){return(0,u.dx)()?(0,u.Ps)(t,e,n,r):(0,i.hv)(t,n,e)}async function b(t,e,n,i,r){const o=S().activityLoggingService.createActivity(e);return i=i||(0,u.Ve)(),await p.WR.serviceRequestOnComplete(()=>function(){if(w)return w;return w=new c(S().loggingService,y),w}().executeRequest(t,null,o,n,i,r),()=>S().activityLoggingService.endActivity(o))}function S(){if(m)return m;const t=d.w.getInstance("ExperienceActivityLogger");return(0,a.S)()&&g.v.isDebug()&&t.addAppender(new l.F(f.$.Activity)),m=new h._(g.v.getLoggingService(),t),m}},57863:function(t,e,n){n.d(e,{al:function(){return d},XN:function(){return c},No:function(){return u}});var i=n(28868),r=n(1350);function o(t,e){if(function(t){try{return t?.needHeader??!1}catch(t){a(`Failed to get feed needHeader Failed with exception : ${t}`)}}(t))try{const t=JSON.parse(e),n=JSON.parse(t?.header??null),i=n?.["ddd-activityid"]??null;i&&async function(t){const e=window.localStorage.getItem(s);if(void 0!==e&&""!==e&&null!==e){const n=e.split(",");return void(n.length<10&&!n.includes(t)&&window.localStorage.setItem(s,`${e},${t}`))}window.localStorage.setItem(s,t)}(i)}catch(t){a(`Failed to get feed needHeader Failed with exception : ${t}`)}}const s="activityIds";function a(t){(0,i.RH)()&&function(t){new Promise((e,n)=>{!function(t,e){(0,i.lA)("logEvent",t,e)}(t,t=>{e(t)})})}({appId:r.H7,type:"Debug",name:"HP_WEBVIEW_SERVER_LOG",data:{message:t}})}function c(t){return new Promise((e,n)=>{!function(t,e){(0,i.lA)("getHttp",t,e)}(t,n=>{e(n),o(t,n)})})}function u(t){return new Promise((e,n)=>{!function(t,e){(0,i.lA)("postHttp",t,e)}(t,t=>{e(t)})})}function d(t){return new Promise((e,n)=>{!function(t,e){(0,i.lA)("deleteHttp",t,e)}(t,t=>{e(t)})})}},57865:function(t,e,n){var i,r;n.d(e,{wX:function(){return o}}),function(t){t.Anon="ANON",t.AppAnon="APP_ANON",t.Unknown=""}(i||(i={})),function(t){t.AnonCookieExists="ace",t.AppAnonCookieExists="aace"}(r||(r={}));const o="child"},58242:function(t,e,n){function i(t,e,n){if(!t||!e)throw new Error("PlacementInteractionLimit: Invalid parameters.");return(i,r)=>{if(!i)return!1;let o=r?.[i.id]||[];const{relatedPlacementIds:s,repeat:a}=n||{};if(s?.length){const t=s.filter(t=>t!==i.id).flatMap(t=>r?.[t]||[]);o=[...o,...t]}const c=o?.filter(e=>e.type===t);if(!c.length)return!0;if(!a)return c.length<e;const{lookbackIntervalMS:u,repeatsNumber:d}=a;return!(c.length>=d*e)&&o.filter(t=>t.ts>Date.now()-u).length<e}}n.d(e,{n:function(){return i}})},58533:function(t,e,n){n.d(e,{eA:function(){return v},hq:function(){return b}});var i=n(98216),r=n(6736),o=n(49084),s=n(85766),a=n(74166),c=n(67387),u=n(13113),d=n(4865),l=n(61803),h=n(2509),f=n(30158),p=n(86948),g=n(6092),m=n(48608);var w=n(6727);let y=!1;async function v(t,e=r.YO){let n,h,w,y="app";if(t)n=t.isMsa,h=t.isAAD,w=t.isSSO;else if((0,o.lp)()){const t=(0,s.eM)();w=2===t.isSignedIn,n="MSA"===t.accountType,h="AAD"===t.accountType,y="edgeId"}else if((0,o.FS)()){const t=(0,p.NP)();n="MSA"===t||!!(0,a.XJ)(c.kr),h="AAD"===t||!!(0,a.XJ)(c.E1),w=["AAD","MSA"].includes(t)&&!(0,u.gV)(),y="web"}else if((0,f.$O)()){const t=await(0,f.f7)();n=!!t?.tokenValue,w=n}else n=2===await(0,p.XK)(),w=n;const v={aadState:h?1:0,isSignedIn:n,isSso:w},T=function(t,e){let n;const i=(0,d.p)(),r=i===d.j.Web?"anon":"app_anon",o=!!e&&(0,l.pu)(r);n=o?"AAD-AL":e?"AAD":t?"MSA":"NA";return n}(n,h),A={...v,loginState:T},$=await x(e);if((0,o.NY)()){let t;t=$?await(0,r.nx)(e):(0,r.S8)(e),t&&(A.loginState=S(t),$?await k(t,e):C(t,e)),b(e)}return i.YT?.addOrUpdateCustomProperty("AuthCookies",function(t="app"){const e={aace:+!!(0,a.Ux)(c.v1),app_anon:+!!(0,a.Ux)(c.CR),ace:+!!(0,a.Ux)(c.kr),anon:+!!(0,a.Ux)("ANON"),authCookieName:g.T3.AuthCookieName,lt:+!!(0,a.Ux)(s.wj),osat:+!!(0,a.Ux)(c.V$),app_wid:+!!(0,a.Ux)(c.j$,!0),wid:+!!(0,a.Ux)(c.E1,!0),it:t};if((0,o.op)()){const t={elt_account:(0,m._W)()?.account_type,elt_token:+!!(0,m._W)()?.access_token};Object.assign(e,t)}return JSON.stringify(e)}(y)),A}const b=async(t=r.YO)=>{(0,o.NY)()&&(y||(y=!0,h.X4.subscribe(h.wE.DigitalIdUpdate,async e=>{await x(t)?await k(e,t):C(e,t)})))};function S(t){if(t)return["AAD","AAD-AL","MSA","NA"].includes(t.at)?t.at:void 0}function C(t,e=r.YO,n){T(t,e,n,!1)}async function k(t,e=r.rw){await T(t,e,void 0,!0)}async function T(t,e,n,o=!1){o&&(n=await(0,r.nx)(e));const{shouldUpdateTelemetry:s,reason:a}=function(t,e){if(!t)return{shouldUpdateTelemetry:!1,reason:"No digital ID provided"};let n=!1;const r=["MSA","AAD-AL"].includes(t.at?.trim().toUpperCase());e&&(n=function(t,e){if(!t||!e)return!1;return["muid","anid","wid","at","picassoId"].every(n=>(t[n]||"")===e[n])}(e,t));const o=!n||r;let s=0;n||(s|=1);r&&(s|=2);const a=[];1&s&&a.push("changed digital ID");2&s&&a.push("forced update due to account type");return i.YT?.addOrUpdateCustomProperty("DigitalIdUpdate",JSON.stringify({areDigitalIdsEqual:+n,shouldUpdateTelemetry:+o,reasonNumber:s})),{shouldUpdateTelemetry:o,reason:a.join(", ")}}(t,n);if(!s)return;!function(t){if("NA"===t.at&&t.muid){const e=t.muid.replace(/^m-/,"").toUpperCase();(0,w.Hi)(e)}}(t),function(t){if(["MSA","AAD-AL"].includes(t.at)&&t.anid){const e="A="+t.anid.toUpperCase().replace(/^A-/,"");i.YT?.applyAnidOverride(e)}}(t),function(t){if(t.at){const e=function(t){if(!t)return;const e=S(t),n={aadState:"AAD"===e?1:0,isSignedIn:"MSA"===e,isSso:["AAD","AAD-AL","MSA"].includes(e),loginState:e,wid:t.wid?t.wid.replace(/^m-/,"").toUpperCase():void 0},i=t.picassoId??void 0;return i&&(n.picassoId=i),n}(t);i.YT?.updatePageMetadata({user:e},!0)}}(t);const c=function(t){const e={...t,lastUpdated:(new Date).toISOString()},n={NA:["anid","wid"],AAD:["anid"],MSA:["wid"]};return n[t.at]?.forEach(t=>delete e[t]),e}(t);o?await(0,r.ZT)(c,e):(0,r.Wh)(c,e)}const x=async t=>{const e=t?.getItem("");return e instanceof Promise}},58559:function(t,e,n){var i;n.d(e,{N:function(){return i}}),function(t){t.Android="android",t.Ios="ios",t.Linux="linux",t.Macos="macos",t.Windows="windows",t.Xbox="xbox"}(i||(i={}))},59121:function(t,e,n){n.d(e,{Au:function(){return b},Dg:function(){return y},Uo:function(){return A},k9:function(){return v}});var i=n(65022),r=n(93468),o=n(67387),s=n(6092),a=n(89980),c=n(43889),u=n(28828),d=n(85766),l=n(48608),h=n(63418),f=n(8597),p=n(33930),g=n(51267),m=n(17720);function w(){k(),T(),C(f.Z8)}function y(t=null){const e=decodeURIComponent((0,h.Ri)("aace")),n=(0,h.Ri)(o.wX),{child:i}=e&&(0,u.B)(e)||{};if(("edgeChromium"!=s.T3.AppType||!e||0!=i)&&e&&(1===i||n)){const e=s.T3.CurrentRequestTargetScope;e&&"kids"!==e.audienceMode&&(t&&t(),(0,g.J)())}}async function v(t,e=null,n=!1){const i=(0,h.Ri)(o.v1),r=!!(0,h.Ri)(d.wj);if(n){if(i)return S(),void await I(e,!1,!0,"signInStateChanged");await I(e,r,!1,"signInStateChanged")}else if(t){if(r||(0,h.Ub)(d.wj,t,1,s.T3.HostPage.topDomain,"/",!0),!i)return void await I(e,!0,!1,"get appAnon cookie");w()}else{if(S(),i)return void await I(e,!1,!0,"no token");w()}}function b(){if((0,c.W9)().getItem(f.Ln))return k(),void x();$()?R(f.N7):x(),R(f.Ln)}function S(){const t=s.T3.HostPage.topDomain;(0,h.Ub)(d.wj,"",-1,t,"/",!0),(0,a.Lg)().removeItem(f.os)}function C(t){(0,c.W9)().removeItem(t)}function k(){C(f.I7)}function T(){C(f.Ln)}function x(){C(f.N7)}function A(){const t=parseInt((0,c.W9)().getItem(f.h6));return C(f.h6),Number.isInteger(t)?t:0}function $(){return!!(0,c.W9)().getItem(f.I7)}async function I(t,e,n,s){if(e!==n&&await(0,p.AA)(),$())return(0,r.vV)(i.uG3,`Auth refresh blocked. TokenExists: ${e}, CookieExists: ${n}.`,void 0,{shouldSampleErrorsForTreatement1:!0}),void w();if((0,c.W9)().supported){if(T(),P(),function(){const t=Date.now()-Math.round(window.performance.now());R(f.h6,t.toString())}(),m.vv.set("authRefreshing",!0),(0,r.vV)(i.mw7,`Sign In Refresh Required. TokenExists: ${e}, CookieExists: ${n}.`,"",{reason:s,appAnonCookieExists:!!(0,h.Ri)(o.v1),ltCookieExists:!!(0,h.Ri)(d.wj),edgeLoginTokenCookieExists:(0,l.Ki)(),shouldSampleErrorsForTreatement1:!e&&n}),t){const{skipRefresh:e}=t()||{};if(!0===e)return}R(f.Z8),(0,g.J)()}else w()}function P(){R(f.I7)}function R(t,e="1"){(0,c.W9)().setItem(t,e)}},59239:function(t,e,n){n.d(e,{Cl:function(){return d},GR:function(){return c},Tj:function(){return a},d1:function(){return u}});var i=n(46117),r=n(1215),o=n(77246),s=n(63418);function a(){return(0,o.S)()&&null!=document.getElementById(r.W)}function c(){return a()&&null===(0,s.Ri)(i.I6)}function u(){return(0,o.S)()&&null!=document.getElementById(r.$)}function d(){return(0,o.S)()?u()&&null===(0,s.Ri)(i.Ii):!!window.__tcfapi&&null===(0,s.Ri)(i.Ii)}},59721:function(t,e,n){var i;n.d(e,{P:function(){return i}}),function(t){t[t.Banner=999999]="Banner",t[t.CookieWall=1100]="CookieWall",t[t.Dialog=900]="Dialog",t[t.Flyout=700]="Flyout",t[t.Overlay=600]="Overlay",t[t.Nav=500]="Nav",t[t.Over=300]="Over",t[t.Above=100]="Above",t[t.Default=0]="Default",t[t.Below=-1]="Below",t[t.Buried=-2]="Buried"}(i||(i={}))},59957:function(t,e,n){n.d(e,{e:function(){return a}});var i=n(56911),r=n(60815),o=n(65022),s=n(44449);class a{constructor(t){this.propertyName=t}connectedCallback(t){r.cP.getNotifier(t.source).subscribe(this,this.propertyName)}disconnectedCallback(t){this.styles&&t.source.$fastController.removeStyles(this.styles)}handleChange(t,e){this.styles&&t.$fastController.removeStyles(this.styles),this.styles=t[e],t.$fastController.addStyles(this.styles)}}(0,i.Cg)([(0,s.sx)(o.SuG,"PropertyBehavior.Bind")],a.prototype,"connectedCallback",null),(0,i.Cg)([(0,s.sx)(o.SuG,"PropertyBehavior.Unbind")],a.prototype,"disconnectedCallback",null),(0,i.Cg)([(0,s.sx)(o.SuG,"PropertyBehavior.HandleChange")],a.prototype,"handleChange",null)},59983:function(t,e,n){n.d(e,{Dm:function(){return c},GZ:function(){return d},RZ:function(){return u},o8:function(){return a},qM:function(){return s}});var i=n(74166),r=n(15098),o=n(28828);const s="currentaccount",a=365,c=(0,r.L)(()=>{const t=(0,i.Ux)(s,!0),e=t&&(0,o.B)(t),{login_hint:n}=e||{};return n&&e}),u=(0,r.L)(()=>!!(0,i.Ux)(s));function d(){u.cache.clear(),c.cache.clear()}},60124:function(t,e,n){n.d(e,{H:function(){return c}});var i=n(98216),r=n(6092),o=n(43889);const s=`reloadCount_${"undefined"!=typeof window?window.location.href:""}`;function a(t,e,n){if(i.YT.sendAppErrorEvent({...t,message:"Navigating to local ntp page on exception.",pb:{...t.pb,customMessage:e,stack:n&&n.stack}}),r.T3.IsDebug)return;const o=new URLSearchParams;t&&o.set("ntperror",t.id);const s=i.YT.getRequestId();s&&o.set("rid",s),i.YT.flush(!0,"AppError"),setTimeout(()=>{location.replace("chrome-search://local-ntp/local-ntp.html?"+o.toString())},2e3)}const c={tryReloadNtpPage:function(t,e,n,r){if(!o.sZ.supported)return void a(e,`sessionStorage is not supported. ${n}`);if(o.sZ.getItem(s)){const t=o.sZ.getItem(s),i=t&&parseInt(t)||0;if(!(i<2))return void a(e,`Max reload count (2) reached. ${n}`,r);o.sZ.setItem(s,i+1+"")}else o.sZ.setItem(s,"1");i.YT.sendAppErrorEvent({...t,message:"Reloading NTP page on exception.",pb:{...t.pb,customMessage:n,stack:r&&r.stack}}),i.YT.flush(!0,"AppError"),setTimeout(()=>{location.reload()},2e3)},redirectToLocalNtp:a}},60791:function(t,e,n){n.d(e,{a:function(){return o},j:function(){return r}});var i=n(56639);function r(){return(0,i.vk)()}function o(){return(0,i.cE)()}},61204:function(t,e,n){n.d(e,{_H:function(){return b},wy:function(){return v},lK:function(){return y}});var i=n(93468),r=n(65022),o=n(15003),s=n(56098),a=n(90565),c=n(6092),u=n(51267);const d="ntps",l="marketPref",h=182;var f=n(63418),p=n(98216),g=n(48622),m=n(98793);const w=["windowsShell","windowsShellV2","winWidgets"];async function y(t,e=()=>{}){const n=c.T3.AppType;g.d.updateMarketPreference(t).then(async d=>{d||(0,i.vV)(r.VsV,"PDP Service failed to update market preference from CommonSettings",`market: ${t}`),w.includes(n)?e():(c.T3.IsUCBased&&s.c.getInstance()?.notify(a.m2.OnContentReload),await v(t),function(t){const e=c.T3.AppType,n=c.T3.CurrentMarket,i=location.href.includes(`/${n}`);if("edgeChromium"==e)return function(t){const e=`/${c.T3.CurrentMarket}/`;if(!location.pathname.startsWith(e))return void(0,u.J)();const n=new URL(location.href);n.pathname=n.pathname.replace(e,`/${t}/`),(0,u.J)({newUrl:n.href})}(t),void(0,o.TI)(2);i?location.href=location.href.replace(`/${n}`,`/${t}`):location.assign(`${location.origin}/${t}${location.search}`)}(t))})}async function v(t,e){const[n,i,r]=function(t,e){const n=`.${c.T3.HostPage.topDomain}`,i=b(e),r="homePage"===c.T3.AppType||e?t:JSON.stringify({m:t});return[n,i,r]}(t,e),o=c.T3.AppType;(0,f.Ub)(i,"",-1),(0,f.Ub)(i,"",-1,void 0,"/edge"),(0,f.Ub)(i,r,h,n,"/"),"edgeChromium"==o&&(await m.Q.savePreferenceSetting(i,{setting:i,source:"ntp",timestamp:(new Date).getTime(),value:r}),p.YT.addOrUpdateTmplProperty("marketSetToExplicitSelection","1")),e||"homePage"==c.T3.AppType||(0,f.Ri)(l)&&v(t,!0)}function b(t){return"homePage"===c.T3.AppType||t?l:d}},61522:function(t,e,n){n.d(e,{P5:function(){return i},Rx:function(){return o},pF:function(){return r}});const i=s.bind(null,"object"),r=s.bind(null,"number"),o=s.bind(null,"string");function s(t,e){return("object"!=typeof e||null!==e)&&typeof e===t}},61803:function(t,e,n){n.d(e,{Qm:function(){return h},_C:function(){return f},pu:function(){return d}});var i=n(67387),r=n(6092),o=n(38796),s=n(74166),a=n(15098),c=n(28828),u=n(63418);function d(t){const e=t||(0,o.eU)()||"al_app_anon",n=l();return!!(n&&(["anon","al_anon"].includes(e)&&n.AL_ANON||["app_anon","al_app_anon"].includes(e)&&n.AL_APP_ANON))}const l=(0,a.L)(()=>{const t=(0,s.Ux)(i.dW,!0);return(0,c.B)(t)});function h(){(0,u.Ub)(i.dW,"",-1,r.T3.HostPage.topDomain,"/"),f()}function f(){l.cache.clear()}},62117:function(t,e,n){n.d(e,{h:function(){return C}});var i=n(32633),r=n(15373),o=n(6092),s=n(6727);const a=404,c=429,u="Authorization",d="Content-Type",l="Retry-After",h="application/json; charset=utf-8";var f=n(52505),p=n(93468);const g="color:white;background-color:green;border-radius:6px;padding:2px 5px;font-weight:bold;text-align:center",m=t=>{const e=new Date(Date.now()),n=e.toISOString?e.toISOString():e.toString();if(!t)return{utcNow:n,invalidReason:"NoToken"};let i;try{i=JSON.parse(atob(t.split(".")[1]))}catch{return{utcNow:n,invalidReason:"InvalidToken"}}if(!i?.exp)return{utcNow:n,invalidReason:"NoExpiration"};const r=1e3*i.exp,o=new Date(r),s=o.toISOString?o.toISOString():o.toString();return{isExpired:o<e,expiration:s,expirationMilliseconds:r,utcNow:n}},w=(t,e,n,i,r,o,s=void 0,a=void 0,c=void 0)=>{const u=new Date(Date.now()),d=u.toISOString?u.toISOString():u.toString();return{id:t,type:e,message:n,apiName:r.apiName,name:r.name,clientRequestId:i,retryCount:o,utcNow:d,tokenExpiration:m(s),authenticationMilliseconds:a,fetchMilliseconds:c}},y=t=>{(0,p.vV)(t.id,t.message,JSON.stringify(t),{},!1)},v=t=>{((t,...e)=>{console.error(`%c${t}`,g,...e)})(`${t.apiName}.${t.name}`,t.message,t)},b=t=>new Promise(e=>setTimeout(e,t)),S=async t=>{const e=performance.now(),n=await t(),i=performance.now();return{result:n,durationMilliseconds:Math.round(i-e)}},C=async t=>(async(t,e,n,i=3)=>{if(i<1)throw new Error("Maximum number of retries must be more than zero.");let r;for(let o=0;o<i&&(r=await t(o),e(r));++o){const t=n(o,r);await b(t)}return r})(e=>k(t,e),t=>t.error?.authenticationStatus===i.f.MaySucceedOnRetry||t?.status===c,T,3),k=async(t,e)=>{const n=(0,s.DA)();if(await(0,o.rA)().unsupportedEnterpriseCloud){const i=((t,e,n)=>{const i=w(e.errors.unsupportedEnterpriseCloud,"UnsupportedCloud","Unsupported enterprise cloud.",t,e,n);return y(i),v(i),i})(n,t,e);return{clientRequestId:n,ok:!1,error:i,url:t.url,retryCount:e}}let p,g,m;try{const{result:o,durationMilliseconds:s}=await S(()=>(0,r.uc)()?.getAuthData(t.authentication));if(p=o,g=s,p.error){const r=((t,e,n,r,o)=>{let s,a,c;r.error?.status===i.f.InteractionRequired?(s=e.errors.authenticationUserInteractionRequired,a="UserInteractionRequired",c="Failed to authenticate. User interaction required."):r.error?.status===i.f.AuthProviderNotSupported?(s=e.errors.authenticationProviderNotSupported,a="AuthenticationProviderNotSupported",c="Failed to authenticate. Authentication provider is not supported."):(s=e.errors.authenticationError,a="AuthenticationFailed",c="Failed to authenticate.");const u={...w(s,a,c,t,e,n,r.authToken,o),authenticationStatus:r.error?.status};y(u);const d={...u,authenticationError:r.error?(0,f._)(r.error,e.authentication):void 0,authenticationErrorString:r.error?.internalError?.error_string};return v(d),d})(n,t,e,p,g);return{clientRequestId:n,ok:!1,error:r,url:t.url,retryCount:e}}p.authToken&&(t.headers={[u]:`Bearer ${p.authToken}`,...t.headers}),t.content&&(t.body=JSON.stringify(t.content),t.headers={[d]:h,...t.headers});const{result:b,durationMilliseconds:C}=await S(()=>globalThis.fetch(t.url.toString(),t));m=C;const k=$(t,b);let T,I,P;return k?T=await x(t,b):I=await A(t,b),b.status===c?P=((t,e,n,i,r,o,s)=>{const a={...w(e.errors.tooManyRequests,"TooManyRequests","Too many requests.",t,e,i,r,o,s),retryAfterHttpHeader:n.headers.get(l)};return y(a),v(a),a})(n,t,b,e,p.authToken,g,m):k||(P=((t,e,n,i,r,o,s,c)=>{const u=e.errors.notFoundStatusCode&&c===a?e.errors.notFoundStatusCode:e.errors.unsuccessfulStatusCode,d={...w(u,"UnsuccessfulStatusCode","Unsuccessful status code returned.",t,e,n,i,r,o),contentErrorCode:s?.error?.code};return y(d),v(d),d})(n,t,e,p.authToken,g,m,I,b.status)),{ok:b.ok,headers:b.headers,redirected:b.redirected,status:b.status,statusText:b.statusText,type:b.type,url:t.url,clientRequestId:n,content:T,contentError:I,error:P,retryCount:e}}catch(i){const r=((t,e,n,i,r,o,s)=>{const a={...w(e.errors.unhandledException,"UnhandledException","Unhandled exception thrown.",t,e,n,r,o,s),exceptionMessage:i?.message};return y(a),v(a),a})(n,t,e,i,p?.authToken,g,m);return{clientRequestId:n,ok:!1,error:r,url:t.url,retryCount:e}}},T=(t,e)=>{try{const t=e.headers?.get(l);if(t)return 1e3*parseInt(t)}catch{}return 1e3*(2^t)},x=async(t,e)=>{if(e.body)return t.transform?await t.transform(e):await e.json()},A=async(t,e)=>{if(e.body)return t.transformError?await t.transformError(e):await e.json()},$=(t,e)=>t.isSuccess?t.isSuccess(e):e.ok},62120:function(t,e,n){n.d(e,{$:function(){return T}});var i=n(48309),r=n(46534),o=n(58242),s=n(16813),a=n(28006),c=n(84855),u=n(93342),d=n(35849),l=n(27597),h=n(69583),f=n(41820),p=n(98793),g=n(48172),m=n(50759),w=n(87405),y=n(70487),v=n(88294),b=n(89151),S=n(23768),C=n(98216),k=n(16611);class T extends u.Q{constructor(t,e){super(t,e,{actualRowCount:void 0,maxTiles:8});const n=(0,d.zP)(a.h$);g.f.getPreferenceSetting(i.nT).then(t=>{const e=t?.value;!1===e?.quickLinkSettingsChanged&&(0,k.e1)().then(()=>{C.YT?.addOrUpdateTmplProperty("tscollapsed_to_off","1")})});let r=!1,o=!1;try{(0,l.vQ)(a.h$,async t=>{t.isLoadCompleted&&(r||(r=!0,(0,m.lF)(t).then(e=>{if(e){const e=t.selectedQuickLinksDisplaySetting;n.updateQuickLinksDisplayOption("off",f.sL.WPO_CLOSE),this.triggerWpoCloseTopSitesCoachMark(e),(0,d.SV)(a.TE).then(t=>{window.setTimeout(()=>{(0,b.yi)(c.v$w,!0),S.m.updateVisuallyReadyTiming.getActionSender(t).send({experienceType:c.v$w,endTime:performance.now()})})}),(0,k.e1)().then(()=>{C.YT?.addOrUpdateTmplProperty("tscollapsed_to_off","1")})}r=!1})),o||(o=!0,(0,m.f_)().then(t=>{t&&n.updateQuickLinksDisplayOption("onerow",f.sL.WPO_OPEN),o=!1})),p.Q.getPreferenceSetting(f.K5.tscollapsed).then(t=>{t&&C.YT.addOrUpdateTmplProperty(f.K5.tscollapsed,`${t?.value}|${t?.source}|${t?.timestamp}`)}))})}catch(t){v.v.log(t)}}updateMaxTiles(t){this.updateState("maxTiles",t)}updateActualRowCount(t){window.setTimeout(()=>this.updateState("actualRowCount",t))}async triggerWpoCloseTopSitesCoachMark(t){const e=(0,d.zP)(a.h$),n=await(0,w.TW)(y.u.settingsButton),i={id:"topSitesCloseByWpo",group:"Default",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:r.fB.Large,dismissAfterSeconds:10,position:{coachmarkAnchor:n,anchoringPosition:r.M7.Below,hasPointer:!0,pointerPosition:r.X1.Opposite}},contentModel:{title:this.config?.localizedStrings?.WpoCloseTopSitesCoachMark?.title??"",description:this.config?.localizedStrings?.WpoCloseTopSitesCoachMark?.description??"",contentType:s.r.CallToAction,dismissContentAction:{label:this.config?.localizedStrings?.WpoCloseTopSitesCoachMark?.dismissContentActionLabel??"",actionDelegate:()=>{e.updateQuickLinksDisplayOption(t,f.sL.REVERT)}},engageContentAction:{label:this.config?.localizedStrings?.WpoCloseTopSitesCoachMark?.engageContentActionLabel??"",actionDelegate:()=>{}}}},c=[(0,o.n)("Viewed",1)];(0,h.sn)().then(t=>{t.sendInternalPlacement(i,c)})}}},62310:function(t,e,n){n.d(e,{R:function(){return P},Z:function(){return R}});var i=n(88294);var r=n(92528),o=n(87405);const s=t=>(0,r.a)(t)?(0,o.pr)(t):null,a=t=>{const e=s(t);if(!e)return{actionCompleted:!1,status:`TargetId [${t}] was not found.`};const n=(t=>{const e=t&&t.click;return!(!e||"function"!=typeof e||(t.click.call(t),0))})(e);return{actionCompleted:n,status:`Click status: TargetId [${t}] == ${n}`}},c="clickAddTileButton",u="clickMyFeedPivotButton",d="clickOffice365Button",l="clickPersonalizeButton",h="clickSettingsAdvancedButton",f="clickSettingsButton",p="clickSettingsCloseButton",g="clickSettingsCustomButton",m="clickSettingsFocusedButton",w="clickSettingsInformationalButton",y="clickSettingsInspirationalButton",v="clickVoiceSearchButton",b="clickWaffleButton",S="openEdgeBrowserNewWindow",C="focusOnSearchBar",k="clickRewardsButton",T={[c]:()=>a("AddTopSiteButton"),[u]:()=>a("MyFeedPivotButton"),[d]:()=>a("office365"),[l]:()=>a("PersonalizeButton"),[h]:()=>a("SettingsAdvancedButton"),[f]:()=>a("SettingsButton"),[p]:()=>a("settingsCloseButton"),[g]:()=>a("SettingsCustomButton"),[m]:()=>a("SettingsFocusedButton"),[w]:()=>a("settingsInformationalButton"),[y]:()=>a("SettingsInspirationalButton"),[v]:()=>a("searchBoxVoiceButton"),[S]:async t=>t&&t.text&&(0,r.a)(t.text)?(window.open(t.text,"_blank").focus(),{actionCompleted:!0,status:"Window opened"}):{actionCompleted:!1,status:"No url provided"},[b]:()=>a("waffle"),[C]:()=>(t=>{const e=s(t);if(!e)return{actionCompleted:!1,status:`TargetId [${t}] was not found.`};const n=(t=>{const e=t&&t.focus;return!(!e||"function"!=typeof e||(t.focus.call(t),0))})(e);return{actionCompleted:n,status:`Focus status: TargetId [${t}] == ${n}`}})("searchBoxInput"),[k]:()=>a("rewardsIcon")};var x,A,$=n(28006),I=n(35849);!function(t){t.pinMsnews="pinMsnews",t.tryInformationalMode="tryInformationalMode",t.tryInformationalModeDirect="tryInformationalModeDirect",t.tryInformationalModeProg="tryInformationalModeProg",t.tryPersonalizations="tryPersonalizations",t.focusOnSearchBar="focusOnSearchBar",t.tryOffice365="tryOffice365"}(x||(x={})),function(t){t.setDefaultBrowser="setDefaultBrowser"}(A||(A={}));const P=()=>async()=>{let t;const e=T[d];return e&&(t=await e({})),i.v.log(`Action completed: ${t.actionCompleted} status: ${t.status}`),t},R=()=>async()=>M("always");async function M(t){const e={actionCompleted:!1},n=await(0,I.SV)($.h$);if(!n)return e.status="ChromiumPageSettingsConnector not found",e;const i=n.getCurrentState();if("custom"!==i.currentLayout){const t={...i,originalLayout:i.currentLayout,currentLayout:"custom"};n.updateLayout(t)}return n.updateFeeds(t,i.selectedFeedDisplaySetting),e.actionCompleted=!0,e.status=`Feed toggle changed to ${t}`,e}},62586:function(t,e,n){function i(t,e){const{audienceMode:n="",locale:i={},pageType:r=""}=e||{},o=i.content??i,{language:s,market:a}=o;return`wpo_data_ ${n}_${s}_${a}_${r}_${t}`}n.d(e,{$:function(){return i}})},63069:function(t,e,n){n.d(e,{y:function(){return o}});var i=n(6092),r=n(12870);class o{constructor(t,e,n){this.vt=t,this.bt=e,this.St=n}connectedCallback(t){const{source:e}=t;"zh-cn"===i.T3.CurrentMarket?this.St&&r.Rb.CurrentFlightSet.has(this.St)?(e.$fastController.addStyles(this.bt),e.$fastController.removeStyles(this.vt)):(e.$fastController.addStyles(this.vt),e.$fastController.removeStyles(this.bt)):(e.$fastController.removeStyles(this.vt),e.$fastController.removeStyles(this.bt))}}},63147:function(t,e,n){n.d(e,{_:function(){return le},s:function(){return he}});var i,r=n(56911),o=n(93468),s=n(65022),a=n(89151),c=n(53685),u=n(30817),d=n(84397),l=n(8701),h=n(9192),f=n(27261),p=n(77246),g=n(17720),m=n(6092),w=n(98216);!function(t){t.success="success",t.leadgen="leadgen",t.cmsBackfill="cmsBackfill",t.fail="fail",t.collapse="collapse"}(i||(i={}));const y={},v=(t,e)=>{m.T3.CurrentRequestTargetScope?.pageExperiments?.includes("prg-ad-cms-cnt")&&(y[e]||(y[e]={[i.success]:0,[i.leadgen]:0,[i.cmsBackfill]:0,[i.fail]:0,[i.collapse]:0}),y[e][t]++,w.YT.sendClientLogEvent({pb:{clientLogName:"NativeAdCMSBackfillCount",region:e,...y[e]}}))};var b,S=n(19548),C=n(12870),k=n(2429),T=n(51275),x=n(68613),A=n(63456),$=n(18e3),I=n(67878),P=n(51600);!function(t){t.SlideshowPreview="ss",t.ArticlePreview="ar",t.VideoPreview="vi"}(b||(b={}));var R=n(57759);class M{constructor(){this.cmsProviderCache=new Map}async getCMSList(t,e){if(!t)return void(0,o.vV)(s.Qnp,"Get CMSAd content failed",`No backfill id found, listId: ${t}`,{shouldSampleErrorsForTreatement1:!0});let n={};try{const i={method:"GET",headers:{}},r=await(0,R.w)(async()=>{const e=new URL(`${d.B3.CMSListServiceUrl}${t}${this.getContentServiceUrlBase().search}`,`${this.getContentServiceUrlBase()}`),r=g.vv.get("afdprotocol");r&&e.searchParams.set("afdprotocol",r);const a=await fetch(e.toString(),i);if(n={url:a.url,status:a.status,statusText:a.statusText},a.ok)return a.json();(0,o.vV)(s.Qnp,"Get CMSAd content failed",`Invalid response from CMS, listId: ${t}`,{shouldSampleErrorsForTreatement1:!0,...n})},"getCMSList");if(!r)return void(0,o.vV)(s.Qnp,"Get CMSAd content failed",`Invalid response.json(), listId: ${t}`,{shouldSampleErrorsForTreatement1:!0,...n});const a=r;return this.translateToCMSItem(a,t,e,d.QR.PrivacyUrl)}catch(e){return void(e instanceof TypeError?(0,o.vV)(s.Qnp,"Get CMSAd content failed",`Contruct URL failed  ${e}, id: ${t}`,{shouldSampleErrorsForTreatement1:!0,...n,baseUrl:m.T3.ContentServiceUrlBase,path:d.B3.CMSListServiceUrl}):(0,o.vV)(s.Qnp,"Get CMSAd content failed",`Error while fetching CMS Native Ad ${e}, id: ${t}`,{shouldSampleErrorsForTreatement1:!0,...n}))}}async translateToCMSItem(t,e,n,i){if(!t||!t.list||0===t.list.length)return void(0,o.vV)(s.Qnp,"Get CMSAd content failed",`No CMS Response returned from ${e}`,{shouldSampleErrorsForTreatement1:!0});const r=[];for(const e of t.list){let t=!1;const o=e.extendedProperties;if(o)for(const e of o)if(e.key&&e.key.indexOf("is_content")>-1&&e.values&&e.values.indexOf("true")>-1){t=!0;break}let s;if(null!=e.link&&null!=e.link.title&&e.link.href&&null!=e.link.image&&null!=e.link.image.href){const n=this.getCMSContentId(e.link.image.href);let r,o;if(e.link.ad)if(e.link.ad.providerHref&&e.link.ad.providerHref.href){const t=this.getCMSContentId(e.link.ad.providerHref.href);t?r=await this.fetchProviderName(t):e.link.ad.sponsorText&&(r=e.link.ad.sponsorText)}else e.link.ad.sponsorText&&(r=e.link.ad.sponsorText);o=r||(null!=e.link.kicker?e.link.kicker:d.B3.DefaultProviderName),s={title:e.link.title,url:e.link.href,provider:{name:o},imageUrl:n?(0,P.XP)(n,{width:624,height:350,enableDpiScaling:!1}):e.link.image.href,isContent:t,privacyUrl:i}}else if(null!=e.reference&&null!=e.reference.href){const r=this.getCMSContentId(e.reference.href);if(null!=r){const e=await this.getCMSContent(r);if(!e)continue;s={title:e.title,url:this.constructDestinationUrl(e,n),provider:this.constructProvider(e),imageUrl:this.constructImageUrl(e),isContent:t,privacyUrl:i}}}s&&s.title&&s.imageUrl&&s.url&&r.push(s)}return{id:t._id,items:r}}async getCMSContent(t){try{const e=new URL(this.getContentServiceUrlBase().search,`${this.getContentServiceUrlBase()}${d.B3.CMSContentServiceURl}${t}/`),n=await fetch(e.toString());if(!n||!n.ok)return void(0,o.vV)(s.Qnp,"Get CMSAd content failed",`Failed to fetch CMS content, cmsId: ${t}`,{shouldSampleErrorsForTreatement1:!0});const i=await n.json();return i||void(0,o.vV)(s.Qnp,"Get CMSAd content failed",`Invalid JSON response to get CMS content, cmsId: ${t}`,{shouldSampleErrorsForTreatement1:!0})}catch(e){return void(0,o.vV)(s.Qnp,"Get CMSAd content failed",`Error while fetching CMS content ${e}, cmsId: ${t}`,{shouldSampleErrorsForTreatement1:!0})}}constructDestinationUrl(t,e){const{category:n}=t,i=n&&n.product||"news",r=n&&n.label||"other",o=b[t.type]||"xx";return`https://www.msn.com/${e}/${S._3.encodeURIComponentForPrime(i||"")}/${S._3.encodeURIComponentForPrime(r||"")}/${S._3.encodeURIComponentForPrime(t.title||"")}/${o}-${t.id}`}constructProvider(t){const{name:e,logo:n}=t.provider;return{name:e,logo:n&&n.id?{src:`${I.h.prod}${n.id}?w=16&h=16`,alt:e}:void 0}}constructImageUrl(t){if(t.images&&!(t.images.length<1)&&t.images[0].id)return(0,P.XP)(t.images[0].id,{width:624,height:350,focalRegion:t.images[0].focalRegion,enableDpiScaling:!1})}getCMSContentId(t){return t&&t.indexOf("cms/api/amp")>-1?t.substring(t.lastIndexOf("/")+1):null}async fetchProviderName(t){try{if(this.cmsProviderCache.get(t))return this.cmsProviderCache.get(t);const e={method:"GET",headers:{}},n=await(0,R.w)(async()=>{const n=new URL(`${d.B3.CMSListServiceUrl}${t}${this.getContentServiceUrlBase().search}`,`${this.getContentServiceUrlBase()}`),i=await fetch(n.toString(),e);if(i.ok)return i.json();(0,o.vV)(s.Qnp,"Get CMSAd content failed",`Invalid response from CMS. status: ${i.status}, statusText: ${i.statusText}, url: ${i.url}`,{shouldSampleErrorsForTreatement1:!0})},"getProviderName");if(!n)return void(0,o.vV)(s.Qnp,"Get CMSAd content failed",`Invalid response.json(), cmsId: ${t}`,{shouldSampleErrorsForTreatement1:!0});const i=n;return i?(this.cmsProviderCache.set(t,i.displayName),i.displayName):void(0,o.vV)(s.Qnp,"Get CMSAd content failed",`Failed to parse JSON response, cmsId: ${t}`,{shouldSampleErrorsForTreatement1:!0})}catch(e){return void(0,o.vV)(s.Qnp,"Get CMSAd content failed",`Error while fetching Provider name  ${e}, cmsId: ${t}`,{shouldSampleErrorsForTreatement1:!0})}}getContentServiceUrlBase(){let t=m.T3.ContentServiceUrlBase;return t&&!t.toString().includes("localhost")||(t=new URL(d.QR.DefaultContentServiceBaseUrl)),t}}var _=n(19993),E=n(63418),F=n(29784);class D{async getLeadgenAds(t){if(!t||!t.placements||t.placements.length<1)return void w.YT.sendAppErrorEvent((0,o.$5)(s.tD3,"Get Leadgen content failed","No placements found in the request"));let e;try{const n=m.T3.HostPage.originalUrl;e=(0,F._Y)(n);const i=this.getMuid(t.muid),r=(0,C.Th)().CurrentFlights,{w:a,h:c}=t.placements[0].img||{},u={id:e,url:n,scoreCategories:t.scoreCategories,market:t.locale,user:i,fdhead:r,w:a,h:c},l=JSON.stringify(u),h=new URL(d.QR.LeadgenEndpoint,`${m.T3.AssetsUrl}/service/Finance/`),f="finance-utils-peregrine",p=_.WR.getOneServiceParamsWithoutAuth(null,f,!1);h.search=S._3.keyValueArrayToQueryString(p);const g=(0,R.w)(async()=>{const t=await fetch(h,{method:"POST",body:l,timeoutMs:d.QR.LeadgenAdServiceTimeout});if(t.ok)return t.json();w.YT.sendAppErrorEvent((0,o.$5)(s.tD3,"Get Leadgen content failed",`Invalid response from Leadgen, ${t.statusText}, contentId: ${e}`))},"getLeadgenAds"),y=await g;if(!y)return void w.YT.sendAppErrorEvent((0,o.$5)(s.tD3,"Get Leadgen content failed",`contentId: ${e}`));return y.items}catch(t){return void w.YT.sendAppErrorEvent((0,o.$5)(s.tD3,"Get Leadgen content failed",`Error while fetching Leadgen Ad  ${t}, contentId: ${e}`))}}getMuid(t){return t||(0,E.ab)()}}var O=n(85889),N=n(67387),L=n(33918),B=n(28006),U=n(37805),W=n(77195),V=n(26854);const H=t=>{const{region:e}=t;return(({region:t})=>[[W.X4.PlacementRegion,t]].filter(([t,e])=>e).map(([t,e])=>({key:W.u5.current[t],value:Array.isArray(e)?e:[e]})))({region:e})};var z,j,q=n(41423),G=n(56485),J=n(60791),Q=n(16091);!function(t){t[t.adFetchInitializedCnt=0]="adFetchInitializedCnt",t[t.adRequestedCnt=1]="adRequestedCnt",t[t.adAvailableCnt=2]="adAvailableCnt",t[t.adNobidCnt=3]="adNobidCnt",t[t.adErrorCnt=4]="adErrorCnt",t[t.adRequestFailureCnt=5]="adRequestFailureCnt",t[t.adBadRequestCnt=6]="adBadRequestCnt",t[t.adTimeoutCnt=7]="adTimeoutCnt",t[t.adResponseReceivedCnt=8]="adResponseReceivedCnt",t[t.adBeforeFetchCnt=9]="adBeforeFetchCnt"}(z||(z={})),function(t){t[t.adRequestedCnt=0]="adRequestedCnt",t[t.adAvailableCnt=1]="adAvailableCnt",t[t.adNoBidCnt=2]="adNoBidCnt",t[t.adTimeoutCnt=3]="adTimeoutCnt",t[t.adErrorCnt=4]="adErrorCnt",t[t.adReturnedFromCacheCnt=5]="adReturnedFromCacheCnt",t[t.adEmptyResponseErrorCnt=6]="adEmptyResponseErrorCnt",t[t.adResponseFormatErrorCnt=7]="adResponseFormatErrorCnt",t[t.adInvalidResponseCnt=8]="adInvalidResponseCnt"}(j||(j={}));class K{constructor(){this.hasRegisteredEventListener=!1,this.xdrLogValues=[],this.msxLogValues=[],this.adReqCnt=0,this.adReqTimeoutCnt=0,this.reportXandrAdsRequestBeforeUnload=()=>{w.YT?.sendLoadTimeEvent&&w.YT.sendLoadTimeEvent({markers:{naAdReq:this.adReqCnt,xdrna:this.xdrLogValues.join("-"),msxna:this.msxLogValues.join("-"),adReqTimeoutCnt:this.adReqTimeoutCnt}})},this.logCount=(t,e=1)=>{if(0===this.xdrLogValues.length){const t=Object.values(z).filter(t=>"number"==typeof t).length;this.xdrLogValues=new Array(t).fill(0)}this.registerLogFlushEventListenerIfNeeded(),t in z&&(this.xdrLogValues[t]+=e)},this.logCountForMSX=(t,e=1)=>{if(0===this.msxLogValues.length){const t=Object.values(j).filter(t=>"number"==typeof t).length;this.msxLogValues=new Array(t).fill(0)}this.registerLogFlushEventListenerIfNeeded(),t in j&&(this.msxLogValues[t]+=e)},this.logRequestLevelCount=()=>{this.registerLogFlushEventListenerIfNeeded(),this.adReqCnt+=1},this.logRequestLevelTimeoutCount=()=>{this.registerLogFlushEventListenerIfNeeded(),this.adReqTimeoutCnt+=1}}static getInstance(){return g.vv.get("__LogHelper__",()=>new K)}registerLogFlushEventListenerIfNeeded(){this.hasRegisteredEventListener||(this.hasRegisteredEventListener=!0,window.addEventListener("beforeunload",this.reportXandrAdsRequestBeforeUnload,{once:!0}))}}const X=(0,Q.G)(K);var Y=n(79426),Z=n(6727),tt=n(31843);const et=t=>!t&&C.Rb?.CurrentFlightSet?.has(L.L2)?"https://irtb.msn.com":"https://ib.msn.com",nt=t=>`${et(t)}/ut/v3`;var it=n(88294);const rt=(t,e,n,i,r)=>{if(!e||!n)return;if(e.divid=e.divid||e.divName,e.msnSdkName=i,r){if(n[t]&&n[t].length)for(let i=0;i<n[t].length;i++)n[t][i](e);return}let o=5;const s=setInterval(()=>{if(n[t]&&n[t].length){for(let i=0;i<n[t].length;i++)n[t][i](e);clearInterval(s)}else o--||clearInterval(s)},500)};var ot;!function(t){t.AdReturned="adAvailable",t.AdNotReturned="adNotReturned"}(ot||(ot={}));const st=new Map;let at=!1;const ct=(t,e,n)=>{st.has(t)||st.set(t,new Map),st.get(t).set(e,n)},ut=(t,e)=>st.get(t)?.get(e);var dt=n(42494),lt=n(45181),ht=n(99893),ft=n(9774);class pt{constructor(){this.fetchCalled=!1,this.baseUrl="https://api.msn.com/msn/v0/pages/LiveRamp/getLiveRampId",this.oneServiceOcid="peregrine",this.noEnvelopeIdConst="_"}static getInstance(){return g.vv.get("__LiverampService__",()=>new pt)}fetchAndOutputEnvelopeId(){if(this.fetchCalled)return;if(this.fetchCalled=!0,C.Rb?.CurrentFlightSet?.has(L.HN))return;const t=this.hasAdvertisingConsent();if(!(0,E.Ri)(d.wf.LiverampEnvelopeId)&&this.isCookieSetAllowed())if(t){const t=this.fetchEnvelopeIdFromObjectStore();this.liverampCookieSetPromise=this.setCookie(d.wf.LiverampEnvelopeId,t)}else this.deleteCookie(d.wf.LiverampEnvelopeId)}getEnvelopeIdFromCookie(){const t=(0,E.Ri)(d.wf.LiverampEnvelopeId);return t===this.noEnvelopeIdConst?null:t}async finishLiverampCookieSet(){this.liverampCookieSetPromise&&await this.liverampCookieSetPromise}async getRampIdAsync(){this.fetchAndOutputEnvelopeId(),await this.finishLiverampCookieSet();const t=this.getEnvelopeIdFromCookie();return t&&t!==this.noEnvelopeIdConst?t:void 0}async fetchEnvelopeIdFromObjectStore(){const t={method:"GET",headers:await _.WR.getOneServiceHeaders(),credentials:"include"},e=this.getServiceUrl();let n,i;try{n=await(0,R.w)(async()=>{const n=await fetch(e.href,t);if(i=n.headers.get("ddd-debugid"),200!=n.status)return 404==n.status||204==n.status||(0,o.vV)(s.vyN,`Unexpected response from OneService call. Status: ${n.status}`,void 0,{...s.vyN.pb,debugId:i}),null;try{const t=await n.text();let e=JSON.parse(t).liveRampId;return e&&'"'===e.charAt(0)&&'"'===e.charAt(e.length-1)&&(e=e.substr(1,e.length-2)),e}catch{return(0,o.vV)(s.vyN,"OneService response is not in expected format.",void 0,{...s.vyN.pb,debugId:i}),null}},"liverampObjectStoreCall")}catch(t){return(0,o.vV)(s.vyN,`Error sending OneService request. Error: ${t}`,void 0,{...s.vyN.pb,debugId:i}),null}return n}async setCookie(t,e){let n=await e;n||(n=this.noEnvelopeIdConst);(0,E.Ub)(t,n,1,".msn.com","/",!0)||(0,o.vV)(s.Ozz,"Unable to set LiverampEnvelopeId Cookie.",void 0,{...s.vyN.pb})}deleteCookie(t){try{(0,E.Ub)(t,"",-1,".msn.com","/",!0)}catch(t){(0,o.vV)(s.Ozz,"Unable to delete LiverampEnvelopeId Cookie.",void 0,{...s.Ozz.pb})}}getServiceUrl(){const t=new URL(this.baseUrl);return[..._.WR.getCommonParams2(this.oneServiceOcid,!0)].forEach(e=>{e.value&&t.searchParams.set(e.key,e.value)}),t.searchParams.set("ocid",this.oneServiceOcid),t}isCookieSetAllowed(){try{return(0,E.Ub)(d.wf.LiverampEnvelopeId,this.noEnvelopeIdConst,1,".msn.com","/",!0)}catch(t){return!1}}hasAdvertisingConsent(){try{if(this.getBrowserOptoutStatus())return!1;if(!lt.n.get(lt.Y.Initialized))return!0;if(lt.n.get(lt.Y.CookieConsentProvider)===ht.O.OneTrustBanner){const t=lt.n.get(lt.Y.ActiveCookieCategories);if(!t||0===t.length)return!1;return t.includes(ft.j.Advertising)}return!0}catch(t){return(0,o.vV)(s.Ozz,"Error checking advertising consent, denying access",void 0,{...s.Ozz.pb}),!1}}getBrowserOptoutStatus(){const t=(0,E.Ri)(d.wf.BrowserOptOut);return!(!t||"1"!==t)}}const gt=(0,Q.G)(pt),mt="https://account.microsoft.com/privacy/ad-settings";var wt=n(89284);const yt=(t,e,n)=>{e&&t.push({id:e,source:n})},vt=t=>{if(!t)return"";return t.split("-")[0]},bt=t=>{const{anid:e,bidTimeout:n,bidExtensionTimeout:i,enableContent:r,enableDevice:o,enablePrivateAuction:s,envelopeId:a,disable1pXandrDomainEndpoint:c,isMobile:u,keywords:l,locale:h,msft:p,muid:g,oathAsid:m,trackingManagement:w,publisherId:y,use3pMeasurementScripts:v}=t||{},b=wt.eE.maskIdentifiers(e),C=wt.eE.maskIdentifiers(g),k={publisherId:null,auctionDeadline:null,auctionTimeout:null,member:d.Y$,user:{...C&&{externalUid:C},externalImpId:m,userIds:[]},keywords:l,trackingManagement:null,msft:p,test:null,use1pEndpoint:null,topics:null,privateAuction:null,use3pMeasurementScripts:null,...r&&{content:{language:vt(h)}},...o&&{device:{deviceType:u?"1":"2",useragent:(0,f.$t)()}}};y&&(k.publisherId=y);const T=S._3.getParamsWithItems(location.search,!0,"citem").find(({key:t})=>"testAds"===t);T&&"true"===T.value&&(k.test=!0);const x=((t,e)=>{const n=[];return yt(n,t,"msft_muid"),yt(n,e,"msft_anid"),n})(C,b);return x?.length>0&&k.user.userIds.push({type:"extendedIDs",eids:x}),a&&k.user.userIds.push({type:"liveramp",id:a}),n>0&&(k.auctionDeadline=n),i>0&&(k.auctionTimeout=i),c||(k.use1pEndpoint=!0),w&&(k.trackingManagement=w),s&&(k.topics={enabled:!0},k.privateAuction={enabled:!0,sellerTimeout:500}),"boolean"==typeof v&&(k.use3pMeasurementScripts=v),k},St=["ads-msxmsankokr"],Ct=t=>{const{pageType:e,rid:n,locale:i,enableAdTargetingKeywords:r}=t||{};let o={page_type:e,rid:n,user_locale:i,rebroadcast_origin:"MSN",is_supply_migration:1};const s=C.Rb?.CurrentFlightSet?.has(L.L2);return s||(o.flight=(()=>{const t=["ads-xdr-","prg-ad-xan-"];return Array.from(C.Rb.CurrentFlightSet).filter(e=>t.some(t=>e.startsWith(t))||St.includes(e))})()),r&&(o={...o,...(0,dt.fv)()||{}}),o};function kt(t){const e=gt.getEnvelopeIdFromCookie(),n=(new Date).getTime()+"|"+(9*Math.random()+1)*Math.pow(10,17),i=Ct(t),r=(t=>{const{verticalName:e,audienceMode:n,ocid:i,impressedCrids:r,browserOptout:o,authCookieName:s,request_msan_kv:a}=t||{},c={vertical:e,audience_mode:n,ocid:i,impressed_crids:r||[],toptout:o?1:0},u=C.Rb?.CurrentFlightSet?.has(L.L2);return u||(c.flights=C.Rb.AdsNumberLines),s&&(c.auth_cookie_name=s),a&&(c.msan_kv=a),c})(t),o={publisherId:1002164,anid:t.anid,bidTimeout:t.bidTimeout,bidExtensionTimeout:t.bidExtensionTimeout,disable1pXandrDomainEndpoint:!0,enableContent:!0,enableDevice:!0,use3pMeasurementScripts:!1,envelopeId:e,isMobile:t.isMobile,keywords:i,locale:t.locale,msft:r,muid:t.muid,oathAsid:n,trackingManagement:{native:{loadViewabilityScriptAt:"impression"}}};return bt(o)}var Tt=n(45084);const xt=(t,e)=>"tg:"+t+";p:7HD66FC;r:"+e;function At(t,e){const{img:n,assets:i,targetId:r,tagCode:o,region:s,regionIndex:a,tag_msan_kv:c}=t,{enableAdTargetingKeywords:u,rid:l}=e,h=function(t,e){const n={ver:"1.2",privacy:1,assets:[]};return t?.length?n.assets=t.map((t,e)=>({id:e+1,required:t.required?1:0,...t.title&&{title:{len:140}},...t.img&&{img:{type:t.img.type,w:t.img.w,h:t.img.h}},...t.data&&{data:{type:t.data.type,len:t.data.len}}})):(n.assets.push({id:1,required:1,title:{len:140}}),n.assets.push({id:2,required:1,data:{type:Tt.ux.providerName.data.type}}),e?.w>0&&e?.h>0&&n.assets.push({id:3,required:1,img:{type:Tt.ux.img.img.type,w:e.w,h:e.h}})),{ortb:n}}(i?.[0],n),f={targetId:r,member:d.Y$,invCode:o,native:h,extInvCode:m.T3?.LocaleContentMarket?.market||"CO",allowSmallerSizes:!1,nobidIfUnsold:!0,trafficSourceCode:xt(o,l)};return u&&(f.keywords=((t,e)=>({pos:t,...(0,dt._n)({region:e,position:t?.toString()})||{}}))(Number(a),s)),c&&(f.msft_tag={msan_kv:c}),f}class $t{constructor(){this.events=[]}static getInstance(){return g.vv.get("__NativeAdXandrWrapper__",()=>new $t)}async loadSdkAsync(){return(0,tt.rL)()?Promise.resolve(!0):(0,tt.o9)().then(()=>!!(0,tt.rL)()).catch(()=>!1)}setEndpoint(t){globalThis.apntag.setEndpoint(t)}configPlacements(t,e){const n=kt(e);this.runCommand(()=>globalThis.apntag.setPageOpts(n));const i=(0,tt.Ej)();i&&this.runCommand(()=>globalThis.apntag.setTrkjsEndpoint(i));const r=[];return t.forEach(t=>{this.runCommand(()=>this.removeAllEventListeners(t.targetId));const n=At(t,e);r.push(n),this.runCommand(()=>globalThis.apntag.defineTag(n)),this.attachEventHandlers(t.targetId,e.isPrerenderAdBeforeReveal)}),r}startAdServerCalls(t){globalThis&&globalThis.apntag&&this.runCommand(()=>{const e=!0===C.Rb.IsPrerender?performance.now()-(0,a.W4)(c.xF):performance.now();t.forEach(t=>ct(t.targetId,"NAdInitiate",e)),globalThis.apntag.loadTags(t.map(t=>t.targetId))})}fireServeBeacon(t){globalThis&&globalThis.apntag&&globalThis.apntag.fireImpressionTrackers(t)}addEventListener(t,e){((t,e,n,i=!1)=>{i?n[t]?n[t].push(e):n[t]=[e]:t&&"function"==typeof e&&n&&(it.v.log(`DisplayAd: addEventListener eventName: ${t} callback: ${e} events: ${n}`),n[t]&&n[t][0].toString()!=e.toString()?n[t].push(e):n[t]=[e])})(t,e,this.events)}removeAllEventListeners(t){["adRequested","adAvailable","adError","adRequestFailure","adNoBid"].forEach(e=>{globalThis.apntag.offEvent(e,t)})}attachEventHandlers(t,e){const n=this.events;globalThis.apntag.onEvent("adRequested",t,()=>{ct(t,e?"TTNativeAd.Background.Request":"TTNativeAd.Request",(0,h.tZ)(C.Rb.IsPrerender&&!e,performance.now())),X.logCount(z.adRequestedCnt)}),globalThis.apntag.onEvent("adAvailable",t,i=>{ct(t,"TTNativeAd.Response",(0,h.tZ)(C.Rb.IsPrerender&&!e,performance.now())),((t,e=!1)=>{if(at)return;const n=nt(),i=performance?.getEntriesByName?.(n)?.[0];if(i){const t=i.serverTiming?.[0]?.duration;t&&(0,a.tD)("NAdServerLatency",t)}const r=ut(t,"TTNativeAd.Response");if(r){at=!0;let n=!0;const i=ut(t,"NAdInitiate"),c=e?"TTNativeAd.Background.Request":"TTNativeAd.Request",u=ut(t,c);i&&u||((0,o.vV)(s.Ivu,"Unable to find cached request marker for a new ad response"),n=!1),(0,a.tD)("TTNativeAd.Response",r),n&&((0,a.tD)("NAdInitiate",i),(0,a.tD)(c,u),(0,a.tD)("NAdInitiateToReq",u-i),(0,a.tD)("NAdFetch",r-u),(0,a.tD)("NativeAd.ApiDuration",r-u))}else(0,o.vV)(s.Ivu,"Unable to find cached response marker for a new ad response")})(t,e),X.logCount(z.adAvailableCnt),rt(ot.AdReturned,i,n,"xandr",!0)}),globalThis.apntag.onEvent("adError",t,t=>{this.adNotReturned(t,n),X.logCount(z.adErrorCnt)}),globalThis.apntag.onEvent("adRequestFailure",t,t=>{this.adNotReturned(t,n),X.logCount(z.adRequestFailureCnt)}),globalThis.apntag.onEvent("adNoBid",t,t=>{this.adNotReturned(t,n),X.logCount(z.adNobidCnt)}),globalThis.apntag.onEvent("adBadRequest",t,t=>{this.adNotReturned(t,n),X.logCount(z.adBadRequestCnt)})}adNotReturned(t,e){rt(ot.AdNotReturned,t,e,"xandr")}runCommand(t){globalThis.apntag.anq.push(t)}}const It=(0,Q.G)($t);class Pt{constructor(){this.groupedAdRequests={},this.adRequestsInfoById={},this.initialized=!1,this.handleAdNotReturned=t=>{const e=t.targetId;if(!e||!this.adRequestsInfoById[e])return;const{_groupKey:n,_cancelled:i}=this.adRequestsInfoById[e];i||(this.adRequestsInfoById[e]={...this.adRequestsInfoById[e],_fetched:!0,fetchedData:null},this.updateGroupInfoOnAdUpdate(n))},this.handleAdReturned=t=>{const e=t.targetId;if(!e||!this.adRequestsInfoById[e])return;const{_groupKey:n,_onAvailable:i,_cancelled:r}=this.adRequestsInfoById[e];if(r)return;const o=i&&i(this.adRequestsInfoById[e].initialData,t);this.adRequestsInfoById[e]={...this.adRequestsInfoById[e],_fetched:!0,fetchedData:o},this.updateGroupInfoOnAdUpdate(n)}}initialize(t){this.initialized||(this.sdkWrapper=t,this.sdkWrapper.addEventListener(ot.AdReturned,this.handleAdReturned),this.sdkWrapper.addEventListener(ot.AdNotReturned,this.handleAdNotReturned),this.initialized=!0)}registerPlacements(t,e,n){const i=[];let r=0;t.forEach(t=>{const{targetId:e}=t||{};r+=1,i.push(e)});const o=(()=>{if(window.location.href.includes("xdruuid="))return window.location.href.split("xdruuid=")[1].split("&")[0];let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})})();this.groupedAdRequests[o]={targetIds:i,pendingCount:r,onCompleteAll:e},t.forEach(t=>{const{targetId:e}=t;this.adRequestsInfoById[e]={initialData:{...t},fetchedData:null,_fetched:!1,_groupKey:o,_onAvailable:n,_cancelled:!1}})}unregisterPlacements(t){let e;return t.forEach(t=>{const{targetId:n}=t;n&&(this.sdkWrapper&&this.sdkWrapper.removeAllEventListeners(n),this.adRequestsInfoById[n]._cancelled=!0,e||(e=this.adRequestsInfoById[t.targetId]._groupKey))}),this.collectGroupResults(e)}collectGroupResults(t){if(!t)return null;const e=this.groupedAdRequests[t];if(!e||!e.targetIds||0==e.targetIds.length)return null;const n={data:[]};return e.targetIds.forEach(t=>{const e=this.adRequestsInfoById[t];if(e&&e._fetched){const t={initialData:e.initialData,fetchedData:e.fetchedData};n.data.push(t)}}),n}updateGroupInfoOnAdUpdate(t){const e=this.groupedAdRequests[t];e.pendingCount-=1,0===e.pendingCount&&e.onCompleteAll(this.collectGroupResults(t))}}const Rt=(t,e,n)=>t&&0!==t.length?t.filter(t=>t.event===e&&t.method===n).map(t=>t.url):[],Mt=t=>{const e=(n=t.imptrackers,i=t.eventtrackers,n?.length>0?n:Rt(i,1,1));var n,i;const r=((t,e)=>{if(t)return[(t=>{const e=t.match(/<script.*?src=["'](.*?)["']/i);return e?e[1]:t})(t)];return Rt(e,1,2)})(t.jstracker,t.eventtrackers),o=(t=>Rt(t,2,1))(t.eventtrackers),s=(t=>t&&0!==t.length?t.filter(t=>555===t.event&&2===t.method):[])(t.eventtrackers);return{impressionTrackers:e,javascriptTrackers:r,viewabilityTrackers:o,iasDvTrackers:s}},_t=(t,e)=>{((t,e)=>{const n=t.assets.filter(t=>1===t.required).filter(t=>!e.assets.find(e=>e.id===t.id));n.length>0&&(0,o.vV)(s.fGC,"Missing required assets in response","",{missingRequiredAssets:n,requestAssets:t.assets,responseAssets:e.assets})})(e,t);const{impressionTrackers:n,javascriptTrackers:i,viewabilityTrackers:r,iasDvTrackers:a}=Mt(t),c=[],u={clickUrl:t.link.url,clickTrackers:t.link.clicktrackers,impressionTrackers:n,javascriptTrackers:i,iasDvTrackers:a,privacyLink:t.privacy,transformedAssets:c,viewabilityTrackers:r,title:"",image:{w:0,h:0,url:""},providerName:""},d={};return e.assets.forEach(({id:t,data:e,img:n,title:i,required:r})=>{e?d[t]={type:"data",subType:e.type,required:r}:n?d[t]={type:"img",subType:n.type,required:r}:i&&(d[t]={type:"title",required:r})}),t.assets.forEach(t=>{const e=d[t.id];if(e){const{type:n,subType:i,required:r}=e,a=t[n];"title"===n?u.title=a?.text:"img"===n&&i===Tt.ey.img.img.type?u.image=a:"data"===n&&i===Tt.ey.providerName.data.type&&(u.providerName=a?.value),a&&0!==Object.keys(a).length||(0,o.vV)(s.fGC,"Missing or empty asset content","",{asset:t,reqInfo:e}),c.push({...t,required:r,[n]:{...i&&{type:i},...a}})}else(0,o.vV)(s.fGC,"Unable to find matched request info","",{asset:t})}),u};class Et{static getInstance(){return g.vv.get("__NativeAdSdkService__",()=>new Et)}async fetchAds(t,e){return t&&t.placements&&0!==t.placements.length?It.loadSdkAsync().then(n=>{if(!n)return null;(0,tt.qu)(),It.setEndpoint(et()),this.eventHub||(this.eventHub=new Pt,this.eventHub.initialize(It));const i=this.buildPlacementsToFetch(t,e),r=It.configPlacements(i,e),a=this.buildPlacementsRegisteredToEventHub(i,r,e),c=this.getRequestTimeout(e),u=new Y.e(c);if(this.eventHub.registerPlacements(a,t=>u.set(t),this.calculateUpdates),"undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("resource")){const t=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.name===nt()&&(e.duration>c&&(0,o.vV)(s.TqQ,"Xandr endpoint timed out",`duration: ${e.duration}`),t.disconnect())})});t.observe({entryTypes:["resource"]})}return It.startAdServerCalls(i),X.logCount(z.adFetchInitializedCnt,i.length),u.getResultAsync().then(t=>{if(void 0===t){const t=this.eventHub.unregisterPlacements(a);return this.logResponseTimeout(i,t?.data||[],c),this.formatAdResponse(t)}return X.logCount(z.adResponseReceivedCnt,t?.data?.length||0),0===t?.data?.length&&(this.logResponseEmpty(a),(0,o.vV)(s.ikd,"Empty response from Xandr sdk","")),this.formatAdResponse(t)})}).catch(t=>((0,o.c_)(t,s.hYJ,""),null)):((0,o.vV)(s.BEl,"Empty placements in ad request"),Promise.resolve(null))}buildPlacementsToFetch(t,e){const n=[];return t.placements.forEach(t=>{const{indices:i,img:r,region:o,allIndices:s,diceRoll:a,tag_msan_kvs:c}=t;let{adContainerIds:u,assets:d}=t;u||(u=i.map(t=>`${e.pageType}-${o}-${t}-${(0,Z.DA)()}`)),i&&i.length&&u&&u.length&&i.forEach((t,i)=>{const l=Number(t);n.push({region:o,regionIndex:t,mappedPosition:l,targetId:u[i],img:r,allIndices:s,diceRoll:a,assets:d,tagCode:`${e.pageType}-${o}-${l}`.toLowerCase(),tag_msan_kv:c&&c[i]})})}),n}buildPlacementsRegisteredToEventHub(t,e,n){const i=[];return t.forEach((t,r)=>{const{region:o,regionIndex:s,targetId:a,tagCode:c}=t;i.push({targetId:a,region:o,index:Number(s),relativeIndex:r+1,pageType:n.pageType,id:`extcontentsponcon_${n.pageType}_${o}_${s}`,rid:n.rid,locale:n.locale,tagCode:c,tagObject:e[r]})}),i}calculateUpdates(t,e){return((t,e)=>{const n=e?.native?.ortb;if(!n)return(0,o.vV)(s.fGC,"Unexpected data in Xandr native ad response","missing ortb"),!1;if(!n?.link?.url)return(0,o.vV)(s.fGC,"Unexpected data in Xandr native ad response","missing click url"),!1;if(!n.assets||!t?.native?.ortb?.assets)return(0,o.vV)(s.fGC,"Unexpected data in Xandr native ad response","missing assets"),!1;const i=t.native.ortb.assets,r=n.assets;return!i.filter(t=>1===t.required).some(n=>{const i=r.find(t=>t.id===n.id);return i?!!(n.data&&!i.data||n.img&&!i.img||n.title&&!i.title)&&((0,o.vV)(s.fGC,"Unexpected data in Xandr native ad response","assets error",{mismatchAssetId:n.id,tag:JSON.stringify(t),adObj:JSON.stringify(e)}),!0):((0,o.vV)(s.fGC,"Unexpected data in Xandr native ad response","assets error",{missingAssetId:n.id,tag:JSON.stringify(t),adObj:JSON.stringify(e)}),!0)})})(t?.tagObject,e)?((t,e)=>{const{title:n,providerName:i,image:r,clickUrl:o,clickTrackers:s,privacyLink:a,impressionTrackers:c,javascriptTrackers:u,viewabilityTrackers:d,iasDvTrackers:l,transformedAssets:h}=_t(t.native?.ortb,e.tagObject?.native?.ortb),f={url:o,sourceName:i,title:n,imageUrl:r.url,uniqueId:t.targetId,adChoicesUrl:a||mt,clickBeacons:JSON.stringify({tcb:s}),assets:h,adSelectionCriteria:t.msft?.ad_selection_criteria,adSelectionReason:t.msft?.ad_selection_reason};return l&&l.length>0&&(f.eventtrackers=[...l]),{beaconsJson:JSON.stringify({e:!0,tjb:u,trb:c,tvb:d}),crids:t.msft?.crids||[],feedbackUrl:t.feedbackUrl,id:e.id,imageWidth:r.w,imageHeight:r.h,index:e.index,items:[f],locale:e.locale,msft:t.msft,pageType:e.pageType,privacyUrl:mt,region:e.region}})(e,t):{}}formatAdResponse(t){return{placements:(t?.data||[]).map(t=>t.fetchedData).filter(t=>t&&Object.keys(t).length>0)}}getRequestTimeout(t){return t.fetchTimeout>0?t.fetchTimeout:d.GD.Timeout}logResponseTimeout(t,e,n){const i=t.filter(t=>!e.find(e=>e.targetId===t.targetId)).map(t=>t.targetId);(0,o.vV)(s.inK,"Timeout calling Xandr sdk",`missing placements: (${i.join(",")}) timeout: ${n}ms`),X.logRequestLevelTimeoutCount(),X.logCount(z.adTimeoutCnt,i.length)}logResponseEmpty(t){const e=t.map(t=>`${t.region}-${t.index}`).join(",");(0,o.vV)(s.ikd,"Empty response from Xandr sdk",e)}}const Ft=(0,Q.G)(Et);var Dt=n(9835),Ot=n(42118),Nt=n(54193),Lt=n(94020),Bt=n(4891);const Ut=(t,e,n,i)=>{try{const r=[];return e?.indices&&Array.isArray(e.indices)&&e.indices.forEach((o,s)=>{let a={};a=Wt(t,e,s,a,n,i),r.push(JSON.stringify(a))}),r}catch(t){return[]}},Wt=(t,e,n,i={},r,o)=>{const s=e?.placementLevelSignals?.[n],a=t?.auctionLevelSignals;if(r?.passExtraAdSignals&&(s&&(i.modelSignals={coords:s?.coords?{x:s.coords.x,y:s.coords.y}:void 0,isCoordsInv:s?.isCoordsInvalidated||void 0,cardSize:s?.cardSize||void 0,pageRegion:s?.pageRegion||void 0}),a&&!r.passRequestModelSignals&&(i.requestModelSignals={vpSize:a?.vpSize?{w:a?.vpSize?.w,h:a?.vpSize?.h}:void 0,isPrerender:a?.isPrerender||void 0,isSSR:a?.isSSR||void 0,ocid:r?.passAdOcidRegSize&&a?.ocid||void 0})),r?.passBrandSafetySignals&&(i.brandSafety={adjCardIds:s?.adjacentCardIds?.length?[...s.adjacentCardIds]:void 0,isPartialAdjList:s?.isPartialBrandSafety||void 0}),r?.passDTSignals){const t=(0,T.LJ)(e.region),n=r.dtsRequestConfig?.find(e=>e.region===t);n?.dtsTemplateConfig&&(i.dts=Vt(n.dtsTemplateConfig))}return zt(i),t?.passUnstableGalleryAdSignal&&e.region===Bt.Tp.interstitialgallery&&jt(i,!t?.isStableGAInterstitialAds),a?.userSignals&&r.passCohortSignalsAds&&(i.userSignals=a.userSignals),i},Vt=t=>({templates:t.map(({dtsTemplateId:t,assets:e,lineCountConstraints:n})=>{const i={id:t,assets:(0,T.YF)(e)?e.map(Ht):[]};return Array.isArray(n)&&(i.lcconstrs=n.map(({assetIds:t,lineCountLimit:e})=>({assetkeys:t,lclimit:e}))),i})}),Ht=t=>{switch(t.type){case"title":return{id:t.assetId,required:t.required,title:{len:t.length,ext:{linelen:t.lineLen}}};case"image":return{id:t.assetId,required:t.required,img:{type:t.subTypeId,w:t.imageSize.w,h:t.imageSize.h}};default:return{id:t.assetId,required:t.required,data:{type:t.subTypeId,len:t.length,ext:{linelen:t.lineLen}}}}},zt=t=>{t.device={pxratio:Math.round(100*(0,f.mZ)())/100}},jt=(t,e)=>{t.modelSignals=t.modelSignals||{},t.modelSignals={...t.modelSignals,isUnstableGAAd:e}};var qt=n(39092),Gt=n(71507),Jt=n(89980);const Qt=async(t,e,n,i,r,a,c,u)=>{if(r){const t=r.serverTiming&&r.serverTiming[0]?.duration;if(t&&c("NAdServerLatency",t),i>-1){const t=(0,h.tZ)(e&&!n,r.requestStart),o=t-i;c("NAdInitiateToReq",o>0?o:0),a||u(n?"TTNativeAd.Background.Request":"TTNativeAd.Request",0,t)}c("TTNativeAd.Response",(0,h.tZ)(e&&!n,r.responseEnd)),r.isApproximate||u("NAdFetch",r.fetchStart,r.responseEnd),c("NativeAd.ApiDuration",r?.duration)}else"winWidgets"!==m.T3.AppType&&(0,o.vV)(s.aNS,"Unable to find performance entry for RTB request","",{shouldSampleErrorsForTreatement1:!0})};function Kt(){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})}var Xt=n(34185),Yt=n(63150);const Zt=()=>(()=>{const t=m.T3?.CurrentMarket?.toLowerCase();return m.T3?.IsChinaCompliance||"CN"===C.Rb?.ClientSettings?.geo_country?.toUpperCase()||"zh-cn"===t||"zh-hk"===t})()||(0,Yt.oh)(),te=()=>!!C.Rb?.CurrentFlightSet?.has(L.s$)&&!Zt(),ee=t=>!!t&&!Zt();class ne{get sourceUrl(){if(this._sourceUrl)return this._sourceUrl;if((0,O.mJ)())return this._sourceUrl="https://int.msn.com",this._sourceUrl;this._sourceUrl=m.T3.HostPage.originalUrl;const t=m.T3.CurrentRequestTargetScope.pageType,e=m.T3.HostPage.verticalKey;if(t&&e&&(!this.config?.fixAuctionSrcUrl||!this._sourceUrl)){const n=t.toLowerCase();(n.indexOf("dhp")>-1||n.indexOf("ntp")>-1)&&(this._sourceUrl="https://"+m.T3.HostPage.hostName+"/"+e+"/"+t)}return this._sourceUrl}get pageType(){if(this._pageType)return this._pageType;const t=m.T3.CurrentRequestTargetScope.pageType,e=m.T3.CurrentRequestTargetScope.ocid;switch(m.T3.AppType){case"edgeChromium":this._pageType="edgechrntp";break;case"views":if((0,O.RH)()&&["article","gallery","video","videoinf"].includes(t)){const e=(0,J.a)();"article"===t?this._pageType="iOS"===e?.platform?"saiar":"saaar":"gallery"===t?this._pageType="iOS"===e?.platform?"saiga":"saaga":"video"===t?this._pageType="iOS"===e?.platform?"saiwatch":"saawatch":"videoinf"===t&&(this._pageType="iOS"===e?.platform?"saivi":"saavi")}else if("article"===t)this._pageType=this.isWindowsViewsPage(e)?"winar":"webcompar";else if("gallery"===t)this._pageType=this.isWindowsViewsPage(e)?"winga":"webcompga";else if("video"==t||"video-widget"==t&&m.T3.IsChinaCompliance)this._pageType="watch";else{new Set(["topic","source"]).has(t)&&(this._pageType="vlp")}break;case"gaming":case"hub":case"sports":this._pageType="vlp";break;case"windows":location.href.includes("feed/interest/following")?this._pageType="Winweb":this._pageType=t;break;case"winWidgets":return"gallery"===t?"prongga":"prongar";default:this._pageType=t}return this._pageType}constructor(t){this.config=t,this.riverNativeAdCount=0,this.reservedRiverNativeAdCount=0,this.dualWideRiverNativeAdCount=0,this.halfRiverNativeAdCount=0,this.isAdblockerEnabled=!1,this.isXandrMigrationControlFlight=ee(C.Rb?.CurrentFlightSet?.has("ads-xandr-c")),this.beaconService=new $.m,this.cookieService=new Lt.O,this.ecasession=d.QR.Ecasession,this.isNativeDisplayAdPassAnidEnabled=C.Rb?.CurrentFlightSet?.has(L.IY)??!1;const e=U.V.getInstance().rootReducer;if("edgeChromium"===m.T3.AppType){const t=e.connector(B.h$);t&&(this.anaheimPageLayout=t.getCurrentState().currentLayout,this.config?.sendAdBlockDetectionFromEdge&&(this.isAdblockerEnabled=t.getCurrentState()?.configData?.isAdblockerEnabled??!1))}this._pageType=t?.adPageType,(0,q.w)().addSwitchListener(this.onPivotSwitch.bind(this),G.M.Monetization)}validEdgeChromiumPageType(t){return"edgechrntp"===t||"edgechrntpruby"===t}async fetchSAMAds(t,e=!1,n=!1,i=null,r,u,l,h){if(!t||!t.placements||t.placements.length<1)return void(0,o.vV)(s.TYv,"Invalid request to fetch native ads","No placements found in the request");const f=t.pageType||this.pageType;if(!f)return void(0,o.vV)(s.TYv,"Invalid request to fetch native ads","No page type found");const g="ru-xl"===t.locale?"en-xl":t.locale,w=m.T3?.HostPage?.verticalKey,y=m.T3?.CurrentRequestTargetScope?.audienceMode,v=this.riverNativeAdCount,b=this.reservedRiverNativeAdCount,S=this.dualWideRiverNativeAdCount,k=this.halfRiverNativeAdCount;this._isSuperAppPage=this.isSuperAppPage(f,t.appName),this._isChannelAppPage=this.isChannelAppPage(f,t.appName),this._isMsnHpMobileAppPage=this.isMsnHpMobileAppPage(f,t.appName);const T=this._isSuperAppPage||this._isChannelAppPage||this._isMsnHpMobileAppPage||!(!C.Rb.ClientSettings||!C.Rb.ClientSettings.deviceFormFactor||"phone"!==C.Rb.ClientSettings.deviceFormFactor),x=this.getImpressionId(),A=!this._isSuperAppPage&&this.cookieService.getBrowserOptoutStatus(),$=!this._isSuperAppPage&&await(0,Ot._0)(),{muidForRequest:I,anidForRequest:P,authCookieNameForRequest:R}=this.resolveAuthIdentifiersForRequest({muid:t.muid,anid:t.anid,isCookieWallPresent:$}),M=te()||ee(t.enableNativeAdXandr||this.config?.enableNativeAdXandr),_=await this.buildRequestLevelSignal(t,M);if((this.isXandrMigrationControlFlight||M)&&(X.logRequestLevelCount(),M))return this.fetchAdsFromXandrSdk(t,{anid:P,audienceMode:y,browserOptout:A,enableAdTargetingKeywords:this.config?.enableAdTargetingKeywords,impressionId:x,isCookieWallPresent:$,isMobile:T,isPrerenderAdBeforeReveal:r,locale:g,muid:I,pageType:f,requestLevelSignal:_,verticalName:w});const F=this.isNotMyFeed(),D=t.partnerId||m.T3.CurrentRequestTargetScope.pageType,{anaheimColLayout:O}=t,N=!!window.__tcfapi;$||this._isSuperAppPage||!e||(this.ecasession=(0,E.Ri)(d.wf.TaboolaSessionCookieName)||this.ecasession),void 0===this.isAdBlock&&(this.config&&this.config.sendAdBlockDetection?this.isAdBlock=function(){if((0,Jt.Lg)().supported){const t=(0,Jt.Lg)().getObject("BT_AA_DETECTION",void 0);if(void 0!==t)return!1===t.acceptable}return!1}():this.isAdBlock=!1);const L={adRefreshVariant:t.adRefreshVariant??"",locale:g,rid:x,partnerId:D,content:{sourceUrl:this.sourceUrl,pageType:f,previousReservedRiverNativeAdCount:b,previousRiverDualWideNativeAdCount:S,previousRiverHalfNativeAdCount:k,previousRiverNativeAdCount:v,verticalName:w,anaheimPageLayout:this.anaheimPageLayout,anaheimColLayout:O,isXfeed:F,audienceMode:y},user:{browserOptOut:A,isAdblock:this.isAdBlock,gdpr:N,...I&&{muid:I}},placements:this.getPlacements(t,f),extensions:this.getExtensions(this.lastResponseMetadata,this.ecasession),isCookieWallPresent:$,isPeregrine:!0,device:{isMobile:T}};(0,Dt.A)(t.tmax)&&(L.tmax=t.tmax),(0,Dt.A)(t.tmaxbidder)&&(L.tmaxbidder=t.tmaxbidder);this.config&&this.config.enablePrerenderAdsAuctionFlag&&(0,p.S)()&&(L.content.prerender=r?1:0);const B=(0,E.Ri)(d.GD.BCPCookieKey);"bingHomepage"===m.T3.AppType&&B&&(L.user.bcp=B),this.isNativeDisplayAdPassAnidEnabled&&P&&(L.user.anid=P),this._isSuperAppPage&&(L.app={adid:t.adid,muid:t.muid,sapphireid:t.sapphireid,version:t.clientVersion,bundle:t.packageName},this.isNativeDisplayAdPassAnidEnabled||(L.app.anid=t.anid)),(0,p.S)()&&(C.Rb?.CurrentFlightSet?.has("prg-ads-dupe-ck")?L.extensions.impressedCrids=Gt.x.getDedupeIds(t?.placements[0]?.region,f):L.extensions.impressedCrids=Gt.x.getDedupeIds(t?.placements[0]?.region),C.Rb?.CurrentFlightSet?.has("prg-ads-dupe-hit")&&(t.impressedCrids=L.extensions.impressedCrids)),_&&(L.extensions.msan_kv=_),this.config?.enableAdTargetingKeywords&&(L.keywords=(0,V.qx)((t,e)=>({key:t,value:Array.isArray(e)?e:[e]})));const U=i||d.QR.SamDomain,W=n?d.QR.SamOpenRtbEndpoint:d.QR.SamEndpoint,H=new URL(W,U),z=n?this.createOpenRtbRequest(L):L,q=JSON.stringify(z),G=!0===C.Rb.IsPrerender?performance.now()-(0,a.W4)(c.xF):performance.now();(0,a.tD)("NAdInitiate",G),this.stampSamRequestIndices(t.placements);const J=t.placements.reduce((t,e)=>t+e.indices.length,0);return this.isXandrMigrationControlFlight&&X.logCountForMSX(j.adRequestedCnt,J),this.fetchSAMAdsCSR(q,g,I,H.href,f,z,r,n,u,l,h,J,R)}fetchAdsFromXandrSdk(t,e){const n=this.getAnidIfNoCookieWall(e.anid,e.isCookieWallPresent),i=e.isCookieWallPresent?null:this.getAuthCookieName(),{bidTimeout:r,bidExtensionTimeout:o}=this.getTmaxValuesForXandr(t),s=this.config?.auctionTimeoutOverride??d.GD.Timeout,a=this.getMuidIfNoCookieWall(e.muid,e.isCookieWallPresent),c=m.T3?.CurrentRequestTargetScope?.ocid,u={anid:n,audienceMode:e.audienceMode,authCookieName:i,bidTimeout:r,bidExtensionTimeout:o,browserOptout:e.browserOptout,enableAdTargetingKeywords:e.enableAdTargetingKeywords,fetchTimeout:s,impressedCrids:Gt.x.getDedupeIds(),isMobile:e.isMobile,isPrerenderAdBeforeReveal:e.isPrerenderAdBeforeReveal,locale:e.locale,muid:a,ocid:c,pageType:e.pageType,request_msan_kv:e.requestLevelSignal,rid:e.impressionId,verticalName:e.verticalName},l=this.getPlacementsForXandr(t);return X.logCount(z.adBeforeFetchCnt,l.reduce((t,e)=>t+e.indices.length,0)),Ft.fetchAds({placements:l},u)}async buildRequestLevelSignal(t,e){const n={};return n.isAppTraffic=this._isSuperAppPage,n.enablePageObject=!0,this.config?.sendAdBlockDetectionFromEdge&&(n.isAdblockerEnabled=this.isAdblockerEnabled),e&&(n.pageLayout=this.anaheimPageLayout),this.config?.passDeviceOS&&await this.getDeviceOSInfo(n),(0,qt.XP)(this.config,n,t)}async getDeviceOSInfo(t){const e=await navigator.userAgentData.getHighEntropyValues(["architecture","platform","platformVersion"]),{platformVersion:n,architecture:i,platform:r}=e||{};n&&i&&r||(0,o.vV)(s.LTf,"Fail to retrieve OS info [Request_level_MSAN_KV]",null,{platformDetails:e}),t.device={osv:e?.platformVersion,arch:e?.architecture,os:e?.platform}}stampSamRequestIndices(t){let e="";t.forEach(t=>t.indices.forEach(n=>{e+=`${t.region}-${n}|`})),w.YT.addOrUpdateTmplString(e)}processAdResponse(t,e,n){if(200!==t.status)return 204===t.status?((0,o.vV)(s.zML,"Get 204 error from SAMRTB Ajax",`Status: ${t.status}, StatusText: ${t.statusText}, request: ${e}`,{shouldSampleErrorsForTreatement1:!0}),this.isXandrMigrationControlFlight&&X.logCountForMSX(j.adNoBidCnt,n),this.config&&this.config.useEmptyPlacementsForNoContent?{placements:[]}:void 0):((0,o.vV)(s.PTf,"Invalid response from SAMRTB Ajax",`Status: ${t.status}, StatusText: ${t.statusText}, request: ${e}`,{shouldSampleErrorsForTreatement1:!0}),void(this.isXandrMigrationControlFlight&&X.logCountForMSX(j.adInvalidResponseCnt,n)));try{const e=JSON.parse(t.response);if(!e)return(0,o.vV)(s.mbj,"Invalid json response from SAMRTB",`Status: ${t.status}, Invalid json: ${t.response}`),void(this.isXandrMigrationControlFlight&&X.logCountForMSX(j.adEmptyResponseErrorCnt,n));const i=e.metaData;if(this.processMetaData(i),this.beaconService.fireRequestLevelBeacons(i.requestLevelBeaconUrls),this.isXandrMigrationControlFlight){const t=e.placements.length;X.logCountForMSX(j.adAvailableCnt,t),t<n&&X.logCountForMSX(j.adNoBidCnt,n-t)}return e}catch(e){return(0,o.c_)(e,s._3Z,"Failed to process SAMRTB response",`Status: ${t.status}, json: ${t.response}`),void(this.isXandrMigrationControlFlight&&X.logCountForMSX(j.adResponseFormatErrorCnt,n))}}processOpenRtbAdResponse(t,e){if(200!==e.status)return 204===e.status?((0,o.vV)(s.zML,"Get 204 error from SAMRTB Ajax",`Status: ${e.status}, StatusText: ${e.statusText}`,{shouldSampleErrorsForTreatement1:!0}),this.config&&this.config.useEmptyPlacementsForNoContent?{placements:[]}:void 0):void(0,o.vV)(s.PTf,"Invalid response from SAMRTB Ajax",`Status: ${e.status}, StatusText: ${e.statusText}`,{shouldSampleErrorsForTreatement1:!0});try{const n=JSON.parse(e.response);if(!n)return void(0,o.vV)(s.mbj,"Invalid json response from SAMRTB",`Status: ${e.status}, Invalid json: ${e.response}`);const i=this.convertOpenRtbResponseToNativeAdResponse(t,n),r=i.metaData;return this.processMetaData(r),this.beaconService.fireRequestLevelBeacons(r.requestLevelBeaconUrls),i}catch(t){return void(0,o.c_)(t,s._3Z,"Failed to process SAMRTB response",`Status: ${e.status}, json: ${e.response}`)}}createOpenRtbRequest(t){const e=JSON.stringify({native:{assets:[{id:1,img:{type:3}}]}});let n=1;const i=t.placements.flatMap(i=>i.indices.map(r=>({id:(n++).toString(),tagid:`${t.content.pageType}-${i.region}-${r}`,native:{request:e},ext:{msn:{index:r,region:i.region}}}))),r={url:t.content.sourceUrl,ext:{locale:t.locale,msn:{pageType:t.content.pageType,verticalName:t.content.verticalName,anaheimPageLayout:t.content.anaheimPageLayout,isXfeed:t.content.isXfeed,audienceMode:t.content.audienceMode,isPeregrine:t.isPeregrine,previousReservedRiverNativeAdCount:t.content.previousReservedRiverNativeAdCount,previousRiverDualWideNativeAdCount:t.content.previousRiverDualWideNativeAdCount,previousRiverHalfNativeAdCount:t.content.previousRiverHalfNativeAdCount,previousRiverNativeAdCount:t.content.previousRiverNativeAdCount,partnerId:t.partnerId}}},o={id:d.QR.PublisherId},s={id:Kt(),imp:i,user:{dnt:t.user.browserOptOut?1:0,ext:{anid:"",muid:t.user?.muid,msn:{isCookieWallPresent:t.isCookieWallPresent,bcp:t.user.bcp}}},device:{devicetype:t.device.isMobile?1:2,ext:{isAdBlock:t.user.isAdblock}},ext:{sessionId:t.rid,admConfiguration:{useAdmObject:!0,useMultipleAdms:!0,maxAdmCount:999},msn:{adRefreshVariant:t.adRefreshVariant,metadata:t.extensions}}};return this._isSuperAppPage?s.app={id:d.QR.AppId,bundle:t.app.bundle,ver:t.app.version,content:r,publisher:o,ext:{msn:{adid:t.app.adid,sapphireId:t.app.sapphireid}}}:s.site={content:r,publisher:o},s}createSamRtbXmlHttpRequest(t,e,n,i){const r=new XMLHttpRequest;if(r.open(d.GD.Method,n,!0),r.withCredentials=!0,r.timeout=this.config&&this.config.auctionTimeoutOverride?this.config.auctionTimeoutOverride:d.GD.Timeout,r.setRequestHeader(d.GD.ContentTypeKey,d.GD.ContentType),C.Rb.CurrentFlightSet?.has(L.r7)||r.setRequestHeader(d.GD.FlightIdKey,C.Rb.CurrentFlights),r.setRequestHeader(d.GD.AdsNumberLineKey,C.Rb.AdsNumberLines),r.setRequestHeader(d.GD.CacheControlKey,d.GD.CacheControl),r.setRequestHeader(d.GD.MarketKey,t),this.isNativeDisplayAdPassAnidEnabled)e&&r.setRequestHeader(d.GD.ClientIdKey,e),i&&r.setRequestHeader(d.GD.AuthCookieNameKey,i);else{const t=(0,Xt.b)(e);t&&r.setRequestHeader(d.GD.ClientIdKey,t);const n=this.getAuthCookieName();n&&r.setRequestHeader(d.GD.AuthCookieNameKey,n)}return r}async fetchSAMAdsCSR(t,e,n,i,r,c,u,d,l,h,f,p,g){if(h&&!d&&f){const e=await h.tryReadCache(t,C.Rb.CurrentFlights,i,u);if(e){this.isXandrMigrationControlFlight&&X.logCountForMSX(j.adReturnedFromCacheCnt,p);try{return this.processAdResponse(await(async t=>({status:t.status,statusText:t.statusText,response:await t.text()}))(e),t,p)}catch(t){(0,o.c_)(t,s._3Z,"Failed to read cached response from SAMRTB call",`pageType: ${r}`)}}}return new Promise(f=>{try{const m=this.createSamRtbXmlHttpRequest(e,n,i,g);m.onload=()=>{(async(t,e,n=!1)=>{const i=performance.getEntriesByName&&performance.getEntriesByName(t)&&performance.getEntriesByName(t)[0],r=(0,a.yE)("NAdInitiate");Qt(0,e,n,r,i,!1,(t,e)=>{(0,a.tD)(t,e)},(t,e,n)=>{(0,a.IJ)(t,e,n)})})(i,C.Rb.IsPrerender,u),d?f(this.processOpenRtbAdResponse(c,m)):(h&&200===m.status&&requestIdleCallback(()=>h.writeCache((t=>{const e={};return t.getAllResponseHeaders().split("\n").forEach(t=>{const[n,i]=t.split(": ");n&&i&&(e[n]=i)}),new Response(t.responseText,{status:t.status,statusText:t.statusText,headers:new Headers(e)})})(m),t,C.Rb.CurrentFlights,i,u)),f(this.processAdResponse(m,t,p)))},m.ontimeout=()=>{(0,o.vV)(s.Fa2,"Timeout calling SAMRTB Ajax",`pageType: ${r}, status: ${m.status}, StatusText: ${m.statusText}, StartTime: ${w}, EndTime: ${(new Date).toISOString()}, url: ${i}`,{shouldSampleErrorsForTreatement1:!0}),this.isXandrMigrationControlFlight&&(X.logRequestLevelTimeoutCount(),X.logCountForMSX(j.adTimeoutCnt,p)),f(void 0)},m.onerror=()=>{(0,o.vV)(s.PTf,"Error calling SAMRTB Ajax",`pageType: ${r}, status: ${m.status}, StatusText: ${m.statusText}, StartTime: ${w}, EndTime: ${(new Date).toISOString()}, url: ${i}`,{shouldSampleErrorsForTreatement1:!0}),this.isXandrMigrationControlFlight&&X.logCountForMSX(j.adErrorCnt,p),f(void 0)};const w=(new Date).toISOString();m.send(t),l&&l()}catch(t){(0,o.c_)(t,s._3Z,"Failed to get response from SAMRTB call",`pageType: ${r}, url: ${i}`),f(void 0)}})}convertOpenRtbResponseToNativeAdResponse(t,e){const n=e.seatbid?.flatMap(t=>t.bid)?.filter(t=>t.ext.admObjects.length>0)??[],i=new Map;t.imp.forEach(t=>i.set(t.id,t));return{placements:n.map(t=>{const e=t.ext.admObjects[0].native.ext.msn.mappedRegion,n=t.ext.admObjects.flatMap(t=>t.native.eventtrackers),{geminiViewabilityDataJson:r,beaconsSupportHttpPOST:o}=t.ext.admObjects[0].native.ext.msn,s=t.ext.admObjects[0].native.privacy,a=[],c=[],u=[],d=[];n?.forEach(t=>{t.ext?.msn?.isBingTracker&&2==t.event?d.push(t.url):2==t.method?u.push(t.url):1==t.event&&1==t.method?a.push(t.url):2==t.event&&1==t.method&&c.push(t.url)});const l=t.ext.admObjects.flatMap(t=>t.native.link.clicktrackers),h=t.ext.admObjects[0].native.ext.msn.fireEncodedBeacons,f=JSON.stringify({tvb:c,trb:a,tcb:l,tjb:u,p:t.ext.bidderId,e:h}),p=t.ext.admObjects.map(t=>{const e=t.native,n={title:null,adSelectionReason:e.ext.msn.adSelectionReason,description:null,url:e.link.url,sourceName:null,adChoicesUrl:e.ext.adChoicesUrl,imageUrl:null,imageHeight:null,imageWidth:null,images:null,clickBeacons:null,uniqueId:e.ext.msn.uniqueId,beaconsJson:null,originalImageWidth:null,originalImageHeight:null,verificationParameters:e.ext.msn.verificationParameters,ext:e.ext.msn.ext,assets:[],eventtrackers:e?.ext?.msn?.eventtrackers};return n.clickBeacons=JSON.stringify({tcb:e.link.clicktrackers}),t.native.assets.forEach(t=>{if(t.ext.msn.isRtbAsset)t.img?n.assets.push({w:t.img.w,h:t.img.h,url:t.img.url,alt:t.img.ext.alt,ext:t.img.ext.msn}):n.assets.push(t);else if(t.data){const e=t.data.value;switch(t.data.type){case 1:n.sourceName=e;break;case 2:n.description=e}}else if(t.img){const{url:e,w:i,h:r}=t.img;switch(t.img.type){case 3:n.imageUrl=e,n.imageWidth=i,n.imageHeight=r,n.originalImageHeight=t.img.ext.msn.originalImageHeight,n.originalImageWidth=t.img.ext.msn.originalImageWidth;break;case 600:n.images||(n.images=[]),n.images.push({url:e,alt:t.img.ext.alt,ext:t.img.ext.msn})}}else null!=t.title&&(n.title=t.title.text)}),n}),g=i.get(t.impid);return{items:p,privacyUrl:s,adServedUrls:a,jsTrackerUrls:u,visibilityUrls:c,beaconsJson:f,bingTrackerUrls:d,beaconsSupportHttpPOST:o,geminiViewabilityDataJson:r,region:e,index:g.ext.msn.index}}),metaData:e.ext?.msn?.metadata}}updatePlacementStrictIndices(t,e){Bt.DX.includes(t.region)&&(e.isStrictIndices=!0),void 0!==t.isStrictIndices&&(e.isStrictIndices=t.isStrictIndices)}updateRequestedPlacementsInfo(t){const e=t.region.toLocaleLowerCase();e===d.QR.RiverRegion?this.riverNativeAdCount+=t.indices.length:e===d.QR.ReservedRiver?this.reservedRiverNativeAdCount+=t.indices.length:e===d.QR.RiverDoubleWide?this.dualWideRiverNativeAdCount+=t.indices.length:e!==d.QR.RiverHalf&&e!==d.QR.RiverHalfTextOnly||(this.halfRiverNativeAdCount+=t.indices.length)}getPlacementsForXandr(t){const e=[];return t.placements.forEach(n=>{if(n.region&&n.indices&&n.indices.length){const{adContainerIds:i,indices:r,img:o,assets:s,region:a}=n,c={region:a,indices:r,img:o,adContainerIds:i,assets:s};c.tag_msan_kvs=Ut(t,n,this.config),e.push(c)}}),e}getTmaxValuesForXandr(t){let e=t.tmaxbidder??t.tmax??0,n=0;const i=t=>C.Rb?.CurrentFlightSet?.has(t);return i(L.Hm.Treatment1)||i(L.Hm.Treatment2)?(e=900,n=400):i(L.Hm.Treatment3)||i(L.Hm.Treatment4)?(e=1200,n=500):i(L.Hm.Treatment5)?(e=950,n=300):i(L.Hm.Treatment6)&&(e=900,n=300),{bidTimeout:e,bidExtensionTimeout:n}}getPlacements(t,e){const n=[];return t.placements.forEach(i=>{if(i.region&&i.indices&&i.indices.length){const{assets:r,indices:o,img:s,extensions:a}=i;let c=i.region;const u=this.config?.adPlacementMapper?.some(t=>t.mappedRegion===i.region);u||(c=this.validEdgeChromiumPageType(e)&&d.oi[i.region]||i.region);const l=s?{assets:r,region:c,indices:o,img:s}:{assets:r,region:c,indices:o};if(a&&(l.extensions=a),this.config?.enableAdTargetingKeywords&&(l.keywords=H({region:c})),this.updatePlacementStrictIndices(i,l),n.push(l),this.updateRequestedPlacementsInfo(i),l.msan_kvs=Ut(t,i,this.config),this.config?.enableNativeAdDTS&&this.config?.nativeAdDTSRequestConfig){const t=(0,Nt.p)(this.config.nativeAdDTSRequestConfig,i.region);t&&t.length>0&&(l.dtsRequests=[t])}}}),n}processMetaData(t){if(this._isSuperAppPage||this._isChannelAppPage||this._isMsnHpMobileAppPage)return;const e=t&&t.taboola&&t.taboola.sessionId;!this.isCookieWallPresent&&e&&(0,E.Ub)(d.wf.TaboolaSessionCookieName,e,.042),this.lastResponseMetadata=this.mergeMetadata(this.lastResponseMetadata,t),this.cookieService.updateMsaOptOutCookie(t)}mergeMetadata(t,e){return t?e?(e.taboola=this.mergePartnerMetadata(t.taboola,e.taboola),e):t:e}mergePartnerMetadata(t,e){return e=e||{},t&&t.sessionId&&!e.sessionId&&(e.sessionId=t.sessionId),e}getImpressionId(){return this.config&&this.config.auctionRidOverride&&m.T3.ActivityIdLowerCaseNoHypens?m.T3.ActivityIdLowerCaseNoHypens:this.lastResponseMetadata&&this.lastResponseMetadata.pageViewId?this.lastResponseMetadata.pageViewId:w.YT.getRequestId()}clearPreviousInfo(){this.riverNativeAdCount=0,this.reservedRiverNativeAdCount=0,this.dualWideRiverNativeAdCount=0,this.halfRiverNativeAdCount=0,this.lastResponseMetadata?.pageViewId&&delete this.lastResponseMetadata.pageViewId}getExtensions(t,e){const n={taboola:(t=t||{taboola:{}}).taboola};return n.taboola.sessionId||(n.taboola.sessionId=e),n}resolveAuthIdentifiersForRequest({muid:t,anid:e,isCookieWallPresent:n}){let i,r,o;return this.isNativeDisplayAdPassAnidEnabled?({muidForRequest:i,anidForRequest:r,authCookieNameForRequest:o}=(0,Xt.N)({muid:t,anid:e,isCookieWallPresent:n})):(i=wt.eE.maskIdentifiers(this.getMuid(t)),r=wt.eE.maskIdentifiers(e)),{muidForRequest:i,anidForRequest:r,authCookieNameForRequest:o}}getMuid(t){return this.isCookieWallPresent?null:t||(0,Xt.b)()}getMuidIfNoCookieWall(t,e){return e?null:t||(0,Xt.b)()}getAnidIfNoCookieWall(t,e){return e?null:t||null}getAuthCookieName(){return!this._isSuperAppPage&&(0,E.Ri)(d.wf.AppAnonCookieExist)?wt.eE.maskIdentifiers(N.CR):null}onPivotSwitch(t){if(!t.oldSelection)return;const e=t.newSelection.pivotId;e&&e.toLowerCase()!==d.LQ.EditInterestPivotId&&(this.pivotId=e)}isNotMyFeed(){return!!this.pivotId&&this.pivotId.toLowerCase()!==d.LQ.MyFeedPivotId&&this.pivotId.toLowerCase()!==d.LQ.StripeMyFeedPivotId}isWindowsViewsPage(t){return!!t&&("windirect"===(t=t.toLowerCase())||t.startsWith("winp"))}isSuperAppPage(t,e){return!!(t&&["saa","sai","mmx","mobilefeededge"].includes(t.toLowerCase())&&["SuperAppHP","SuperAppViews"].includes(e))}isChannelAppPage(t,e){return!(!t||!["outlookfeed"].includes(t.toLowerCase())||"Channel"!==e)}isMsnHpMobileAppPage(t,e){return!(!t||!["mobilefeed"].includes(t.toLowerCase())||"prime_mobile"!==e)}}var ie=n(99271),re=n(51787),oe=n(44449),se=n(52063);const ae=new class{constructor(){this.requestQueue=[],this.isProcessing=!1}async enqueueTask(t,...e){return new Promise((n,i)=>{this.requestQueue.push(async()=>{try{const i=await t(...e);n(i)}catch(t){i(t)}}),this.processQueue()})}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.requestQueue.length>0;){const t=this.requestQueue.shift();t&&await t()}this.isProcessing=!1}}};var ce=n(96851),ue=n(21629);const de=(t,e)=>{t?.impressedCrids?.length&&e?.placements?.length&&e.placements.forEach(e=>{if(!e?.crids?.length)return;const n=e.crids?.filter(e=>t.impressedCrids?.includes(e));if(n.length>0){(t=>{(0,o.vV)(s.Kyk,"Dupe crids from MSX detected",void 0,{...s.Kyk.pb,ext:t},!1)})({dupeCrids:n.join(","),region:e?.region,index:e?.index,imageUrl:e?.items?.[0]?.imageUrl,title:e?.items?.[0]?.title,url:e?.items?.[0]?.url,adRequestCrids:t?.impressedCrids?.join(",")})}})};class le{constructor(t,e,n){this.adTemplateConfig=t,this.adServiceConfig=e,this.adBeaconServiceConfig=n,this.beaconService=new $.m(this.adBeaconServiceConfig),this.cmsService=new M,this.leadgenAdService=new D,this.samService=new ne(this.adServiceConfig),this.templateService=new ie.I,this.shouldUseXandrForRequest=ee(this.adServiceConfig?.enableNativeAdXandr),this.shouldUseXandr=te()||this.shouldUseXandrForRequest,this.cmsNativeAdsItemsMap=new Map,this.cmsRetryCount=0,this.backfillIndex=0,this.leadgenIndex=0,this.cmsAdsCounter=0,this.callbackFnPlacementList=[],this.callbackList=[]}resetNativeAdService(){this.backfillIndex=0,this.leadgenIndex=0,this.cmsAdsCounter=0,this.callbackFnPlacementList.length=0,this.callbackList.length=0,this.samService.clearPreviousInfo()}async fetchNativeAds(t,e,n=!1,i){if(!t||!t.placements||0===t.placements.length)return void(0,o.vV)(s.y0q,"Fetch NativeAd failed","No placements found in the request");const r=S._3.getParamsWithItems((0,f.iA)(),!0,"citem"),a="true"===r.find(({key:t})=>"nativeAdDebug"===t)?.value;if(t.locale||(t.locale=C.Rb.Locale),"ru-xl"===t.locale&&(t.locale="en-xl"),!t.locale)return void(0,o.vV)(s.y0q,"Fetch NativeAd failed",`No locale found, headData.Locale: ${C.Rb.Locale}, adRequest.locale: ${t.locale}`);this.shouldUseXandrForRequest&&(t.enableNativeAdXandr=!0);const c=this.buildAdResponse(t);!this.leadgenItems&&t.enableNativeAdLeadgen&&(this.leadgenItems=await this.leadgenAdService.getLeadgenAds(t));const u=!this.leadgenItems||0==this.leadgenItems.length;let h=m.T3.IsChinaCompliance?"https://srtb.msn.cn/":null;!m.T3.IsChinaCompliance&&C.Rb.CurrentFlightSet.has("prg-ads-ipv6dmn")&&(h="https://srtb-ax.msn.com/");const{enableBlockingQueue:p}=this.adTemplateConfig||{},g=()=>this.samService.fetchSAMAds(t,!1,!1,h,null,e,i);let w;w=p?ae.enqueueTask(()=>g().then(this.updateCridsInDedupeManager.bind(this))):u?g():Promise.resolve(void 0);const y=t.locale,v=d.F3[y];if(!this.cmsItems&&!n){const t=await this.cmsService.getCMSList(v,y);t&&(this.cmsItems=t.items)}const b=await w;return C.Rb.CurrentFlightSet.has("prg-ads-dupe-hit")&&de(t,b),this.updateAdResponse(c,this.leadgenItems,this.cmsItems,v,t,b,n),a?{...c,debugInfo:{adRequest:t}}:(!C.Rb?.CurrentFlightSet?.has("prg-ad-rmauctype")&&(C.Rb?.CurrentFlightSet?.has("prg-ad-view-bdupe")||C.Rb?.CurrentFlightSet?.has("prg-ad-wea-bdupe"))&&p&&c?.placements?.forEach(t=>{t.adAuctionType=l.T.clientAuctionAd}),c)}updateCridsInDedupeManager(t){return(0,p.S)()&&t?.placements&&t.placements.forEach(t=>{Gt.x.addDedupeIds(t?.crids)}),t}updateAdResponse(t,e,n,r,u,d,h){const f=!n||0==n.length,p=!d||!d.placements||0==d.placements.length,g=!e||0==e.length,{enableNativeAdXandr:m,enableExtraImageData:y,enableNativeAdLeadgen:b}=u;if(f&&!h)if(b){if(g&&p)return void(0,o.vV)(s.ic_,"Fetch NativeAd failed",`Unable to retrieve backfill list id: ${r}, SAM response and Leadgen response`);g?(0,o.vV)(s.tD3,"Fetch Leadgen ads failed",`Unable to retrieve backfill list id: ${r} and Leadgen response`):(0,o.vV)(s.ic_,"Unable to retrieve backfill list",`Backfill list id: ${r}`)}else{if(p)return void(0,o.vV)(s.ic_,"Fetch NativeAd failed",`Unable to retrieve backfill list id: ${r} and SAM response`);(0,o.vV)(s.ic_,"Unable to retrieve backfill list",`Backfill list id: ${r}`)}const S=this.mapSAMPlacements(d);return t.pageViewId=d&&d.metaData&&d.metaData.pageViewId,t.placements.forEach(r=>{const u=r.region+r.regionIndex,d=S.get(u);let p;if(this.adServiceConfig?.enableBuyDirectAd&&"infopane"==r.region&&this.buyDirectItems&&(p=t.buyDirectAdIndex?.findIndex(t=>t===r.regionIndex)),this.adServiceConfig?.enableBuyDirectAd&&"infopane"==r.region&&this.buyDirectItems&&"number"==typeof p&&-1!=p&&this.buyDirectItems?.[p]){const t=this.buyDirectItems[p],e={title:t.title,destinationUrl:t.url+`&PageId=${w.YT.getRequestId()}&ct=ShoppingNTPInfopane`,imageUrl:this.updateImageUrl(r,t.imageUrl),providerName:t.provider?.name||"Buy with Microsoft"};r.items.push(e),r.privacyUrl=t.privacyUrl,r.isBackfill=!1}else if(!g&&e[this.leadgenIndex%e.length]){const t=e[this.leadgenIndex%e.length];this.leadgenIndex++;const n={title:t.title,destinationUrl:t.url,imageUrl:t.imageUrl,providerName:t.sourceName,noAdLabel:t.noAdLabel};r.items.push(n),this.updateTemplate(r),v(i.leadgen,u)}else if(d&&d.items&&d.items.length>0){d.items.forEach(t=>{const e={title:t.title,description:t.description,destinationUrl:t.url,imageUrl:t.imageUrl,providerName:t.sourceName,adChoiceIconUrl:t.adChoicesUrl,originalImageHeight:t.originalImageHeight,originalImageWidth:t.originalImageWidth,imageHeight:t.imageHeight,imageWidth:t.imageWidth,clickBeacons:t.clickBeacons,uniqueId:t.uniqueId,feedbackUrl:this.shouldUseXandr?d.feedbackUrl:(0,T.xE)(t.clickBeacons??t?.ClickBeacons,t?.feedback_url),verificationParameters:t.verificationParameters,cashback:t.cashback,noAdLabel:t.noAdLabel,privacyUrl:d.privacyUrl,eventtrackers:t?.eventtrackers,advertiserDomain:void 0,adScenarioType:t.adScenarioType};(0,T.pg)(e,t.assets,this.adServiceConfig?.passVAXandrMigrationSignals);const n=(0,k.ul)(t.adSelectionCriteria,t.adSelectionReason);n&&(e.advertiserDomain=n),this.adTemplateConfig?.enableVAPhase2&&this.adTemplateConfig?.supportedAdScenarioTypes?.includes(t.adScenarioType)&&(w.YT.addOrUpdateTmplProperty("va_v2_response","1"),(0,se.JX)(e,t.assets,this.adServiceConfig?.passVAXandrMigrationSignals)),y&&(e.originalImageHeight=t.originalImageHeight,e.originalImageWidth=t.originalImageWidth,e.providerId=d.providerId,e.isProductAd=Boolean(e.assets?.price),e.images=t.images),r.items.push(e)}),r.privacyUrl=d.privacyUrl,r.adServedUrls=d.adServedUrls,r.jsTrackerUrls=d.jsTrackerUrls,r.visibilityUrls=d.visibilityUrls,r.beaconsJson=d.beaconsJson,r.bingTrackerUrls=d.bingTrackerUrls,r.beaconsSupportHttpPOST=d.beaconsSupportHttpPOST,r.geminiViewabilityDataJson=d.geminiViewabilityDataJson,r.providerId=d.providerId,r.crids=d.crids,r.iasId=Kt(),this.updateDTSTemplates(r,d),this.updateTemplate(r),this.beaconService.sendBeaconForAdServed({beaconsJson:r.beaconsJson,beaconsSupportHttpPOST:r.beaconsSupportHttpPOST}),this.beaconService.fireJSTrackers(d.beaconsJson,t.shouldUseWindowVisibilityTrackingForXandr);const e=!0===C.Rb.IsPrerender?performance.now()-(0,a.W4)(c.xF):performance.now();(0,a.tD)("TTNativeAd.Serve",e),v(i.success,u)}else if(f)h?v(i.collapse,u):((0,o.vV)(s.dIV,"Unable to backfill invalid sam placement",`Placement key: ${u}`),this.updateTemplate(r),v(i.fail,u));else{const t=this.backfillIndex++%n.length,e=n[t],o={title:e.title,destinationUrl:e.url,imageUrl:this.updateImageUrl(r,e.imageUrl),providerName:e.provider?e.provider.name:"",isCMSAd:!0};r.items.push(o),r.privacyUrl=e.privacyUrl,this.updateTemplate(r),v(i.cmsBackfill,u)}!C.Rb?.CurrentFlightSet?.has("prg-ad-rmauctype")&&r.isBackfill&&(r.adAuctionType=l.T.cmsAd)}),t}updateTemplate(t){t.items?.length>0&&this.templateService.updateTemplate(t,this.adTemplateConfig)}updateDTSTemplates(t,e){if(this.adServiceConfig?.enableNativeAdDTS){const n=(0,Nt.Y)(this.adServiceConfig.nativeAdDTSRequestConfig,t.region);n?.templates?.length>0&&(t.dtsTemplateId=e.msft?.template_id)}}addToCallbackList(t){t&&t.length>0&&this.callbackList.push(...t)}async fetchSamAds(t,e=!1,n,i,r,a){if(!t||!t.placements||0===t.placements.length)return void(0,o.vV)(s.y0q,"Fetch NativeAd failed","No placements found in the request");if(t.locale||(t.locale=C.Rb.Locale),"ru-xl"===t.locale&&(t.locale="en-xl"),!t.locale)return void(0,o.vV)(s.y0q,"Fetch NativeAd failed",`No locale found, headData.Locale: ${C.Rb.Locale}, adRequest.locale: ${t.locale}`);this.addToCallbackList(n),this.locale=t.locale;let c=m.T3.IsChinaCompliance?"https://srtb.msn.cn/":null;!m.T3.IsChinaCompliance&&C.Rb.CurrentFlightSet.has("prg-ads-ipv6dmn")&&(c="https://srtb-ax.msn.com/");const{enableBlockingQueue:u}=this.adTemplateConfig||{},d=()=>this.samService.fetchSAMAds(t,e,!1,c,i,null,r,a);let h;h=u?ae.enqueueTask(()=>d().then(this.updateCridsInDedupeManager.bind(this))):d();const f=this.buildAdResponse(t),p=await h;return C.Rb?.CurrentFlightSet?.has("prg-ads-dupe-hit")&&de(t,p),C.Rb?.CurrentFlightSet?.has("prg-ad-rmauctype")||C.Rb?.CurrentFlightSet?.has("prg-ads-deref-rf")||!u||p?.placements?.forEach(t=>{t.adAuctionType=l.T.clientAuctionAd}),{placeHolderResponse:f,samResponse:p}}async fetchCmsAds(t,e,n){if(!t||!t.placements||0===t.placements.length)return void(0,o.vV)(s.y0q,"Fetch NativeAd failed","No placements found in the request");let i=C.Rb.Locale;if("ru-xl"===i&&(i="en-xl"),!this.cmsNativeAdsItemsMap.has(e)){const t=await this.cmsService.getCMSList(e,i);t&&t.id&&t.items&&this.cmsNativeAdsItemsMap.set(e,t.items)}const r=this.buildAdResponse(t),a=this.cmsNativeAdsItemsMap.has(e)?this.cmsNativeAdsItemsMap.get(e):[];for(const t of r.placements){const e=n.shift();let r,o;if(e){let t=parseInt(e,10);if(t)t=Math.max(t-1,0),t=t<a.length?t:t%a.length,r=a[t];else{if(!this.cmsNativeAdsItemsMap.has(e)){const t=await this.cmsService.getCMSList(e,i);t&&t.id&&t.items&&this.cmsNativeAdsItemsMap.set(e,t.items)}const t=this.cmsNativeAdsItemsMap.has(e)?this.cmsNativeAdsItemsMap.get(e):[];r=(0,x.A)(t)[0],r||(r=a[this.cmsAdsCounter%a.length])}}else r=a[this.cmsAdsCounter%a.length];r&&(o={title:r.title,destinationUrl:r.url,imageUrl:this.updateImageUrl(t,r.imageUrl),providerName:r.provider?r.provider.name:""},t.items.push(o),t.privacyUrl=r.privacyUrl),this.updateTemplate(t),this.cmsAdsCounter++}return r}updateSamAdResponse(t,e,n){const i=this.cmsItems,r=this.mapSAMPlacements(e),c=!i||0==i.length;return t.pageViewId=e&&e.metaData&&e.metaData.pageViewId,t.placements.forEach(e=>{this.adServiceConfig?.enableAdsWaterfall&&"river"===e.region&&e.regionIndex===this.adServiceConfig?.tallAdsIndex&&(e.region="rivert");const d=e.region+e.regionIndex,f=r.get(d);let g;if(this.adServiceConfig?.enableBuyDirectAd&&"infopane"==e.region&&this.buyDirectItems&&(g=t.buyDirectAdIndex?.findIndex(t=>t===e.regionIndex)),this.adServiceConfig?.enableBuyDirectAd&&"infopane"==e.region&&this.buyDirectItems&&"number"==typeof g&&-1!=g&&this.buyDirectItems?.[g]){const t=this.buyDirectItems[g],n={title:t.title,destinationUrl:t.url+`&PageId=${w.YT.getRequestId()}&ct=ShoppingNTPInfopane`,imageUrl:this.updateImageUrl(e,t.imageUrl),providerName:t.provider?.name||"Buy with Microsoft"};e.items.push(n),e.privacyUrl=t.privacyUrl,e.isBackfill=!1}else if(f&&f.items&&f.items.length>0){f.items.forEach(t=>{const n={title:t.title,adSelectionReason:t.adSelectionReason,adSelectionCriteria:t.adSelectionCriteria,description:t.description,destinationUrl:t.url,providerName:t.sourceName,adChoiceIconUrl:t.adChoicesUrl,imageUrl:t.imageUrl,imageHeight:t.imageHeight,imageWidth:t.imageWidth,images:t.images,clickBeacons:t.clickBeacons,uniqueId:t.uniqueId,beaconsJson:t.beaconsJson,feedbackUrl:(0,T.xE)(t.clickBeacons??t?.ClickBeacons,t?.feedback_url),originalImageWidth:t.originalImageWidth,originalImageHeight:t.originalImageHeight,verificationParameters:t.verificationParameters,ext:t.ext,adScenarioType:t.adScenarioType,cashback:t.cashback,noAdLabel:t.noAdLabel,eventtrackers:t?.eventtrackers},i=f?.msft?.msn_kv,r=(0,ue.E)(i);if(this.adServiceConfig?.readAdScenarioTypeFromMsnKv){if(!!n.adScenarioType&&!!!r?.adScenarioType&&(0,o.vV)(s.QQG,"adScenarioType is missing in msn_kv","",{adScenarioType:n.adScenarioType,samPlacement:JSON.stringify(f),csr:(0,p.S)()}),r){const t=r.adScenarioType;t&&(n.adScenarioType=t)}}r?.dts&&(n.dts=r.dts),le.updateAssetVideoField(n,t.assets),(0,T.pg)(n,t.assets,this.adServiceConfig?.passVAXandrMigrationSignals);const a=(0,k.ul)(t.adSelectionCriteria,t.adSelectionReason);a&&(n.advertiserDomain=a),this.adTemplateConfig?.enableVAPhase2&&this.adTemplateConfig?.supportedAdScenarioTypes?.includes(t.adScenarioType)&&(w.YT.addOrUpdateTmplProperty("va_v2_response","1"),(0,se.JX)(n,t.assets,this.adServiceConfig?.passVAXandrMigrationSignals)),this.shouldUseXandr&&(n.feedbackUrl=f.feedbackUrl),e.items.push(n)});const t=(0,re.cG)(e,0);e.videoViewabilityData=t?t.ViewabilityProps:null,e.privacyUrl=f.privacyUrl,e.adServedUrls=f.adServedUrls,e.jsTrackerUrls=f.jsTrackerUrls,e.visibilityUrls=f.visibilityUrls,e.beaconsJson=f.beaconsJson,e.bingTrackerUrls=f.bingTrackerUrls,e.beaconsSupportHttpPOST=f.beaconsSupportHttpPOST,e.geminiViewabilityDataJson=f.geminiViewabilityDataJson,e.providerId=f.providerId,e.crids=f.crids,C.Rb?.CurrentFlightSet?.has("prg-ad-rmauctype")||(e.adAuctionType=f.adAuctionType),this.updateDTSTemplates(e,f);const i=(0,h.tZ)(C.Rb.IsPrerender&&!n);n?((0,a.tD)("TTNativeAd.Background.Serve",i),(0,ce.GP)().then(()=>{const t=(0,u.ZF)().TTPR;t?(0,a.tD)("TTNativeAd.Serve",t):(0,o.vV)(s.aNS,"Could not find TTPR to set TimeToServeAd","",{shouldSampleErrorsForTreatement1:!0})})):(0,a.tD)("TTNativeAd.Serve",i)}else if(c)this.handleCmsStandyPlacement(e);else{const t=this.backfillIndex++%i.length,n=i[t],r={title:n.title,destinationUrl:n.url,imageUrl:this.updateImageUrl(e,n.imageUrl),providerName:n.provider?n.provider.name:""};e.items.push(r),e.privacyUrl=n.privacyUrl,e.isBackfill=!0,C.Rb?.CurrentFlightSet?.has("prg-ad-rmauctype")||(e.adAuctionType=l.T.cmsAd)}this.updateTemplate(e)}),t}handleCmsStandyPlacement(t){if(this.cmsItems){const e=this.cmsItems;for(const n of this.callbackFnPlacementList){const i=e[this.backfillIndex++%e.length];if(i){const e={title:i.title,destinationUrl:i.url,imageUrl:this.updateImageUrl(t,i.imageUrl),providerName:i.provider?i.provider.name:""};n.items.push(e),n.privacyUrl=i.privacyUrl,n.isBackfill=!0,C.Rb?.CurrentFlightSet?.has("prg-ad-rmauctype")||(n.adAuctionType=l.T.cmsAd),this.updateTemplate(n)}}this.callbackList.forEach(t=>{t(this)}),this.callbackList=[],this.callbackFnPlacementList=[]}else t&&this.callbackFnPlacementList.push(t)}loadCmsBackFillList(){let t=this.locale?this.locale:C.Rb.Locale;"ru-xl"===t&&(t="en-xl");const e=d.F3[t];if(e&&!this.cmsItems&&this.cmsService.getCMSList(e,t).then(t=>{t?(this.cmsItems=t.items,this.handleCmsStandyPlacement()):++this.cmsRetryCount<10&&this.loadCmsBackFillList()}),this.adServiceConfig?.enableBuyDirectAd){const t=this.locale?this.locale:C.Rb.Locale;let e="AA13DgW5";"zh-cn"==t&&(e="BB1m89wA"),this.cmsService.getCMSList(e,t).then(t=>{t&&(this.buyDirectItems=t.items)})}}async tryGetCmsList(t=0){let e=this.locale?this.locale:C.Rb.Locale;"ru-xl"===e&&(e="en-xl");const n=d.F3[e];if(!n||!e)return;const i=await this.cmsService.getCMSList(n,e);return i||(t<5?await this.tryGetCmsList(++t):void 0)}mapSAMPlacements(t){const e=new Map;return t&&t.placements&&t.placements.forEach(t=>{t.region&&t.index&&e.set(t.region+t.index,t)}),e}buildAdResponse(t){const e=[];t.placements.forEach(t=>{t.region&&t.indices&&t.indices.length&&t.indices.forEach(n=>{const i={region:t.region,regionIndex:n,imageHeight:t.img&&t.img.h&&t.img.h.toString(),imageWidth:t.img&&t.img.w&&t.img.w.toString(),items:[]};e.push(i)})});const n=m.T3.LocaleDisplayLanguageString;return{placements:e,adLabelText:(0,T.D4)(n,this.adServiceConfig?.overrideAdLabelText,this.adServiceConfig?.enableAdSponsoredText),isGreyAdsLabelEnabled:d.J8.includes(t.locale),shouldUseWindowVisibilityTrackingForXandr:Boolean(t.shouldUseWindowVisibilityTrackingForXandr),privacyUrl:d.QR.PrivacyUrl}}async loadBuyDirectAd(){const t=this.locale?this.locale:C.Rb.Locale;if(!this.buyDirectItems){let e="AA13DgW5";"zh-cn"==t&&(e="BB1m89wA");const n=await this.cmsService.getCMSList(e,t);n&&(this.buyDirectItems=n.items)}}updateImageUrl(t,e){return t&&t.imageWidth&&t.imageHeight&&e?e.replace("w=624","w="+t.imageWidth).replace("h=350","h="+t.imageHeight):e}static updateAssetVideoField(t,e){e&&e.length>0&&e.forEach(e=>{const n=(0,A.A)(e,"video.vasttag");n&&(t.video=n)})}getAdTagStyleByLocale(t){const e=m.T3.LocaleDisplayLanguageString;let n=t??C.Rb.Locale;return"ru-xl"===n&&(n="en-xl"),{adLabelText:(0,T.D4)(e,this.adServiceConfig?.overrideAdLabelText,this.adServiceConfig?.enableAdSponsoredText),isGreyAdsLabelEnabled:d.J8.includes(n)}}}(0,r.Cg)([(0,oe.sx)(s.WQp,"fetchNativeAds")],le.prototype,"fetchNativeAds",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"updateAdResponse")],le.prototype,"updateAdResponse",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"updateTemplate")],le.prototype,"updateTemplate",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"fetchSamAds")],le.prototype,"fetchSamAds",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"fetchCmsAds")],le.prototype,"fetchCmsAds",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"updateSamAdResponse")],le.prototype,"updateSamAdResponse",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"handleCmsStandyPlacement")],le.prototype,"handleCmsStandyPlacement",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"loadCmsBackFillList")],le.prototype,"loadCmsBackFillList",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"tryGetCmsList")],le.prototype,"tryGetCmsList",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"mapSAMPlacements")],le.prototype,"mapSAMPlacements",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"buildAdResponse")],le.prototype,"buildAdResponse",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"updateImageUrl")],le.prototype,"updateImageUrl",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"getAdTagStyleByLocale")],le.prototype,"getAdTagStyleByLocale",null),(0,r.Cg)([(0,oe.sx)(s.WQp,"updateAssetVideoField")],le,"updateAssetVideoField",null);const he=(0,oe.sx)(s._0l,"getNativeAdService")((t,e)=>{const n=g.vv.get("__NativeAdServiceInstance__",()=>new le(t||{},e));return n.resetNativeAdService(),n})},63150:function(t,e,n){n.d(e,{U0:function(){return i},ce:function(){return u},ns:function(){return c},oh:function(){return d}});var i,r=n(6092),o=n(12870),s=n(5044),a=n(27261);function c(){const t="msnStudio"===(0,r.rA)().AppType&&(0,a.$N)().includes("uxmode=ruby");return"ruby"===o.Rb?.ClientSettings?.modes?.uxMode||t}function u(){return"ruby"===o.Rb?.ClientSettings?.bundleInfo?.variant}function d(){return c()||(0,s.K7)()||u()}!function(t){t.isDhpPage=function(){return"dhp"===o.Rb.ClientSettings.pagetype},t.isNtpPage=function(){return"ntp"===o.Rb.ClientSettings.pagetype},t.fiveColSupported=function(){return r.T3.EnableFiveColLayout}}(i||(i={}))},63418:function(t,e,n){n.d(e,{Ri:function(){return w},Ti:function(){return v},Ub:function(){return b},ab:function(){return y}});var i=n(99893),r=n(79742),o=n(26474),s=n(46117),a=n(9774),c=n(92261),u=n(65022),d=n(93468),l=n(45181),h=n(77246),f=n(27261),p=n(67629),g=n(98216),m=n(18605);function w(t){const e=(0,f.gH)();return(0,m._)(e,t)}function y(){return w(s.ri)}function v(){return w(s.Ii)}function b(t,e,n,s,f,m,w){try{if(!l.n.get(l.Y.Initialized))return(0,h.S)()&&(0,d.vV)(u.Y1k,""),!1;if(void 0===n||n>0){if(!function(t){if(!(0,h.S)())return!1;const e=l.n.get(l.Y.CookieConsentStatus),n=l.n.get(l.Y.CookieConsentProvider),s=l.n.get(l.Y.ActiveCookieCategories);let c=!1;switch(n){case i.O.MSCCBanner:case i.O.OneTrustBanner:case i.O.WidgetHost:return function(t,e){for(const n of e){if(o.a[n].includes(t))return!0}let n=!1;const i=Object.keys(o.a).filter(t=>!e.includes(a.j[t]));for(const e of i){if(o.a[e].includes(t)){n=!0;break}}n||(0,d.vV)(u.lVo,`Attempting to write a cookie: "${t}" not present in the cookie category mapping.`);return!1}(t,s);default:c=e===r.z.NotRequired,c||(0,d.vV)(u.djn,`Consent status should be '2' (NotRequired), but is set to '${e}'`)}return c}(t))return!1;if(null==e)return(0,d.vV)(u.Iig,`Cookie value is being set to either 'undefined' or 'null'. cookie name: "${t}", cookie value: "${e}"`),!1;const s=typeof e;"string"!==s&&(e=JSON.stringify(e),(0,d.vV)(u.mVb,`Cookie value is not of string type. observed type: "${s}". cookie name: "${t}"`));for(const n of p.Pe)if(t.includes(n)||e.includes(n))return(0,d.vV)(u.Iig,`Cookie name and/or value contains invalid character: '${n}'. cookie name: "${t}"`),!1;n>365&&(0,d.vV)(u.w0w,`Cookie expiration time: ${n} days is greater than suggested max duration of 365 days (1 year). cookie name: "${t}"`);const c=t.length+(e&&e.length||0);c>1e3&&!p.LD.includes(t)&&(0,d.vV)(u.k_z,`Cookie size: "${c} Bytes" is too big (> 1000 Bytes). cookie name: "${t}"`)}return function(t,e,n,i,r,o,s){let a;const u=[t,"=",e];if(n<0)a="Fri, 31 Dec 1999 23:59:59 GMT";else if(n){const t=new Date;t.setTime(t.getTime()+864e5*n),a=t.toUTCString()}a&&u.push(";expires=",a);i&&u.push(";domain=",i);r&&u.push(";path=",r);o&&u.push(";secure");s&&s!==c.a.Lax&&(u.push(";samesite=",s.toString()),s!==c.a.None||o||u.push(";secure"));document&&(/muid/i.test(t)&&g.YT&&g.YT.addOrUpdateTmplProperty(`cookie_muid_set_${t}_${+new Date}`,"1"),document.cookie=u.join(""))}(t,e,n,s,f,m,w),!0}catch(e){return(0,d.vV)(u.yAh,`trySetCookie() failed with error: "${e.message}". cookie name: "${t}"`),!1}}},63581:function(t,e,n){n.d(e,{L:function(){return i}});const i={_60x60:{width:60,height:60},_82x82:{width:82,height:82},_100x100:{width:100,height:100},_104x84:{width:104,height:84},_141x250:{width:141,height:250},_180x88:{width:180,height:88},_203x114:{width:203,height:114},_216x114:{width:216,height:114},_220x124:{width:220,height:124},_220x178:{width:220,height:178},_238x120:{width:238,height:120},_240x129:{width:240,height:129},_240x253:{width:240,height:253},_242x144:{width:242,height:144},_242x176:{width:242,height:176},_300x156:{width:300,height:156},_300x169:{width:300,height:169},_300x174:{width:300,height:174},_300x179:{width:300,height:179},_300x180:{width:300,height:180},_300x200:{width:300,height:200},_300x225:{width:300,height:225},_300x282:{width:300,height:282},_300x304:{width:300,height:304},_300x326:{width:300,height:326},_300x462:{width:300,height:462},_306x174:{width:306,height:174},_306x197:{width:306,height:197},_385x225:{width:385,height:225},_362x272:{width:362,height:272},_406x304:{width:406,height:304},_486x304:{width:486,height:304},_468x304:{width:468,height:304},_604x296:{width:604,height:296},_612x304:{width:612,height:304},_612x326:{width:612,height:326},_612x328:{width:612,height:328},_612x462:{width:612,height:462},_628x372:{width:628,height:372}}},63607:function(t,e,n){n.d(e,{v:function(){return it}});var i=n(29231),r=n(17501),o=n(11372);var s=n(6727);class a{constructor(t,e){this.contentViewCallback=t,this.overrideScrollOffset=e,this.scrollChanged=!0,this.sizeChanged=!0,this.newScrollLeft=null,this.newScrollTop=null,this.firstScrolledMargin=10,this.forceScrollFiring=!1,this.viewportEventIntervalDelayMs=200,this.viewportLeft=0,this.viewportTop=0,this.viewportWidth=0,this.viewportHeight=0,this.userInteracted=!1,this.eventTimerId=0,this.eventTimeoutMS=1e3,this.scrollPerformanceTrackers={},this.contentContainerElementFromCustomEvent=null,this.contentContainerClientRect=null,this.contentViewedArea=-1,this.syntheticTelemetryScrollCallback=(t,e)=>{t&&(this.userInteracted=!0,this.updateMechanism=i.ym.Scroll,this.scrollChanged=!0,this.triggerCallback(),e(t),this.forceScrollFiring=!0)},this.viewportOffset=0}initListener(t){const e=this.throttle(this.update.bind(this),this.viewportEventIntervalDelayMs);e(),this.scrollContainer=t,this.attachEvent("resize",t=>{this.userInteracted=!0,this.updateMechanism=i.ym.Resize,this.sizeChanged=!0,this.triggerCallback(),e(t)}),this.attachEvent("scroll",t=>{t&&!t.preventDefaultScroll&&(this.userInteracted=!0,this.updateMechanism=i.ym.Scroll,this.scrollChanged=!0,this.triggerCallback(),e(t))}),s.OL&&(window.addEventListener("telemetryscroll",t=>{this.syntheticTelemetryScrollCallback(t,e)}),window.addEventListener("telemetryregistercontentcontainer",t=>{t.detail&&t.detail.element&&t.detail.element instanceof HTMLElement&&(this.contentContainerElementFromCustomEvent=t.detail.element,this.getContentViewArea())}))}resetViewportOffset(){this.viewportOffset=this.overrideScrollOffset?this.overrideScrollOffset():(0,s.xI)(this.scrollContainer)}triggerCallback(){this.dispatchEvent("telemetryviewportupdated",this.updateMechanism)}dispatchEvent(t,e){const n=new CustomEvent(t,{detail:{mech:e}});dispatchEvent(n)}throttle(t,e=1e3){let n=0,i=!1;return r=>{if(i)return;const o=(new Date).getTime(),s=o-n;s>e?(n=o,t(r)):(i=!0,setTimeout(()=>{i=!1,t()},e-s))}}update(t){let e=this.sizeChanged,n=this.scrollChanged;const i=this.viewportWidth,r=this.viewportHeight,o=this.viewportLeft,s=this.viewportTop;this.updateCurrentViewportValues(),e=e&&(r!==this.viewportHeight||i!==this.viewportWidth),n=n&&(o!==this.viewportLeft||s!==this.viewportTop),(this.forceScrollFiring||e||n)&&(this.scheduleViewportEvent(t),this.forceScrollFiring=!1)}updateCurrentViewportValues(){this.scrollChanged&&(this.viewportLeft=this.newScrollLeft||this.getScrollLeft(),this.viewportTop=this.newScrollTop||this.getScrollTop(),this.newScrollLeft=this.newScrollTop=null,!this.firstScroll&&this.viewportTop>this.firstScrolledMargin&&(this.firstScroll=!0)),this.sizeChanged&&(this.viewportWidth=window.innerWidth||document.documentElement.clientWidth,this.viewportHeight=window.innerHeight||document.documentElement.clientHeight),this.scrollChanged=this.sizeChanged=!1}scheduleViewportEvent(t){if(this.userInteracted&&(c(t)&&(this.lastScrollStarted||(this.lastScrollStarted=t&&t.timeStamp||performance.now()),this.scrollPerformanceTrackers.endOfFeedTimeTracker&&this.scrollPerformanceTrackers.endOfFeedTimeTracker.startOrContinue(t),this.scrollPerformanceTrackers.appResponsivenessTracker&&this.scrollPerformanceTrackers.appResponsivenessTracker.startOrContinue(t)),this.eventLastScheduleTime=+new Date,!this.eventTimerId)){const e=()=>{this.eventTimerId=this.userInteracted=!1;const n=Date.now()-this.eventLastScheduleTime;if(n>this.eventTimeoutMS)if(c(t)){const t=performance.now()-this.lastScrollStarted;let e,n,i;this.lastScrollStarted=void 0,this.scrollPerformanceTrackers.scrollInputTracker&&(e=this.scrollPerformanceTrackers.scrollInputTracker.getPendingPotentialInputType(),n=this.scrollPerformanceTrackers.scrollInputTracker.getAndResetPotentialMissedScrollInput(),i=this.scrollPerformanceTrackers.scrollInputTracker.getScrollInstanceData());const r={scrollInputType:e,potentialMissedScrollInput:n,scrollDuration:t,endOfFeedTime:this.scrollPerformanceTrackers.endOfFeedTimeTracker&&this.scrollPerformanceTrackers.endOfFeedTimeTracker.stop(),calculateAri:this.scrollPerformanceTrackers.appResponsivenessTracker&&this.scrollPerformanceTrackers.appResponsivenessTracker.stop(),scrollInstanceData:i,contentViewedArea:this.getContentViewArea()};this.contentViewCallback(this.updateMechanism,this.isMeaningfulScroll(),r)}else this.contentViewCallback(this.updateMechanism,this.isMeaningfulScroll());else this.eventTimerId=setTimeout(e,this.eventTimeoutMS-n)};this.eventTimerId=setTimeout(e,this.eventTimeoutMS)}}isMeaningfulScroll(){if(this.updateMechanism!==i.ym.Scroll)return!1;const t=this.overrideScrollOffset?this.overrideScrollOffset():(0,s.xI)(this.scrollContainer),e=(0,s.AE)(this.scrollContainer);return(t>this.viewportOffset&&t-this.viewportOffset>e/2||t<this.viewportOffset&&this.viewportOffset-t>e/2)&&(this.viewportOffset=t,!0)}getScrollTop(){if(this.scrollContainer)return this.scrollContainer.scrollTop;if("undefined"!=typeof pageYOffset)return pageYOffset;{const t=document.body;let e=document.documentElement;return e=e.clientHeight?e:t,e.scrollTop}}getScrollLeft(){if(void 0!==window.pageXOffset)return window.pageXOffset;{const t=document.body;let e=document.documentElement;return e=e.clientWidth?e:t,e.scrollLeft}}attachEvent(t,e){window.addEventListener(t,e,!1),this.scrollContainer&&this.scrollContainer.addEventListener(t,e,!1)}initScrollPerformanceTrackers(t){const{endOfFeedTimeTracker:e,appResponsivenessTracker:n,scrollInputTracker:i}=t;e&&(this.scrollPerformanceTrackers.endOfFeedTimeTracker=e),n&&(this.scrollPerformanceTrackers.appResponsivenessTracker=n),i&&(this.scrollPerformanceTrackers.scrollInputTracker=i,i.start())}getContentViewArea(){const t=this.contentContainerElementFromCustomEvent;if(!t)return;this.contentContainerClientRect||(this.contentContainerClientRect=t.getBoundingClientRect());const e=this.getScrollTop(),n=Math.max(0,this.contentContainerClientRect.top),i=this.viewportHeight-n+e,r=t.clientWidth;return this.contentViewedArea=Math.max(this.contentViewedArea,Math.floor(i*r)),this.contentViewedArea}}function c(t){return t&&(t.type===i.ym.Scroll||"telemetryscroll"===t.type)}var u=n(36417);let d,l=new Promise(t=>d=t);const h=new Map;function f(){h.clear()}const p=t=>Math.floor(101*Math.random())<=t;let g,m=new Promise(t=>g=t),w=0;const y=new Map;var v=n(18806),b=n(25194);class S{static start(){this.startTime=Date.now(),this.isPause=!1,this.isPauseV2=!1,this.started=!0}static pause(){this.started&&!this.isPause&&(this.isPause=!0,this.dwellTimeElapse+=Date.now()-this.startTime)}static pauseV2(){this.started&&!this.isPauseV2&&(this.isPauseV2=!0,this.dwellTimeElapseV2+=Date.now()-this.startTime)}static getDwellTime(){if(this.isPause){return this.dwellTimeElapse}if(0!==this.startTime&&this.started){return this.dwellTimeElapse+(Date.now()-this.startTime)}return 0}static getDwellTimeV2(){if(this.isPauseV2){return this.dwellTimeElapseV2}if(0!==this.startTime&&this.started){return this.dwellTimeElapseV2+(Date.now()-this.startTime)}return 0}static setDwellTime(t,e){this.startTime=t,this.dwellTimeElapse=e}static setDwellTimeV2(t,e){this.startTime=t,this.dwellTimeElapseV2=e}static reset(){this.dwellTimeElapse=0,this.dwellTimeElapseV2=0,this.startTime=0,this.isPause=!1,this.isPauseV2=!1,this.started=!1}static getIsActive(){return this.started&&!this.isPause}}S.started=!1,S.startTime=0,S.dwellTimeElapse=0,S.dwellTimeElapseV2=0,S.isPause=!1,S.isPauseV2=!1;const C=`[${i.i}]`,k=t=>(0,s.U4)("telemetrynodeadded",t);class T{constructor(){this.mutationObserver=new MutationObserver(this.mutationCallback.bind(this)),this.processMutatedNode=this.processMutatedNode.bind(this),document.documentElement&&this.processAddedSubtreeAndDispatchEvent(document.documentElement);const t=HTMLElement.prototype.attachShadow;if(t){const e=this;HTMLElement.prototype.attachShadow=function(n){const i=t.call(this,n);return this.shadowRoot&&e.observe(this.shadowRoot),i}}}observe(t){t!==window&&this.mutationObserver.observe(t,{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:[i.i]})}unobserve(t){}mutationCallback(t){setTimeout(()=>this.processMutationRecord(t),10)}processMutationRecord(t){for(const e of t){const{addedNodes:t}=e;t?.length?t.forEach(this.processMutatedNode):"attributes"===e.type&&this.processMutatedNode(e.target)}}processMutatedNode(t){((0,s.DO)(t)||1===t.nodeType&&"SCRIPT"!==t.tagName)&&this.processAddedSubtreeAndDispatchEvent(t)}processAddedSubtreeAndDispatchEvent(t){(0,s.i4)(t)&&k(t),function(t){t.shadowRoot?.querySelectorAll(C).forEach(k),t.querySelectorAll(C).forEach(k)}(t)}}var x=n(52088),A=n(47149);var $=n(87440);class I{get requestId(){return this.requestIdInternal}get combinedContract(){this.eventIndexInternal=this.eventIndexInternal+1,this.tmplString=this.generateStringFromKeyValueObject(this.tmplProps);const t=this.joinIdProps&&Object.keys(this.joinIdProps).length>0?JSON.stringify(this.joinIdProps):void 0,e=Object.keys(this.customProps).length>0?JSON.stringify(this.customProps):void 0;this.customString=e;try{const t=window;void 0!==t&&t.navigator&&void 0!==typeof t.navigator.globalPrivacyControl&&(this.globalPrivacyControl=t.navigator.globalPrivacyControl)}catch{}const n={page:{...this.contract.page,url:(0,s.s8)((0,s.pO)(this.contract.page.url,this.contract.page.ocid),this.qspToScrubbed),referral:(0,s.s8)(this.contract.page.referral||s.OL&&document.referrer,this.qspToScrubbed),content:this.contract.page.content?{...this.contract.page.content}:void 0,dwellTime:S.getDwellTime(),dwellTimeV2:this.getDwellTimeV2(),viewType:this.contract.page.viewType||this.viewTypeCallback&&this.viewTypeCallback()},browser:{...this.contract.browser,width:(0,s.td)(),height:(0,s.AE)(),screenSize:s.OL?[screen.width,screen.height].join("x"):"0x0",clientId:(0,s.fp)(this.activityIdInternal),scrollOffset:"function"==typeof this.overrideScrollOffset&&this.overrideScrollOffset()||(0,s.xI)(),anoncknm:this.anonCookieName||"app_anon",cookieEnabled:s.OL&&navigator.cookieEnabled,globalPrivacyControl:this.globalPrivacyControl,hiddenOnce:this.browserHiddenOnce,muid:(0,s.W6)()||void 0,cookies:(0,s.hD)(this.cookiesToCollect)||void 0},flight:{...this.contract.flight,tmpl:this.tmplString},integration:{...this.contract.integration,joinIds:t},request:{activityId:this.activityIdInternal,requestId:this.requestIdInternal,afdMuid:this.afdMuidInternal,pageGenTime:this.pageGenTime,tier:this.tier},timestamp:+Date.now(),eventIndex:this.eventIndexInternal,sdk:{name:"peregrine",ver:"1.0.21",schemaVer:"1.0.21"},user:this.contract.user,locale:this.contract.locale,feed:this.contract.feed,gallery:this.contract.gallery,custom:this.customString,build:this.buildNumber,ext:this.contract.ext},i=(0,s.nN)();return i&&(n.browser.isWin11=i),this.isPvEvent&&(n.debug=this.contract.debug),n}constructor(t,e,n,i,r,o,a,c,u,d,l){this.eventIndexInternal=0,this.cookiesToCollect=["TOptOut","OptanonConsent","eupubconsent-v2","wid","app_wid"],this.qspToScrubbed=["anid","email","login_hint","q","referer","tid","upn","user","username"],this.isPvEvent=!1,this.shouldResetClientId=!0,this.shouldResetClientId=void 0===d||d,this.contract=t,this.updateActivityId(e),this.anonCookieName=n,this.enableDwelltimeV2=c,this.buildNumber=i||"",this.afdMuidInternal=a,this.customProps={},this.tmplProps={},this.joinIdProps={},this.eventIndexInternal=0,this.browserHiddenOnce=!1,this.overrideScrollOffset=r,this.viewTypeCallback=o,this.pageGenTime=u,this.tier=l,s.OL&&document.addEventListener("visibilitychange",this.browserVisibilityCallback.bind(this))}static mergeContract(t,e){if(!t||!e)return t||e;const n=Object.keys(e),i={...t};for(let t=0;t<n.length;t++){const r=n[t];i[r]={...i[r],...e[r]}}return t.page&&t.page.content&&e.page&&e.page.content&&(i.page.content={...t.page.content,...e.page.content}),t.user&&e.user&&(i.user={...t.user,...e.user}),t.ext&&e.ext&&(i.ext=(0,$.A)(t.ext,e.ext)),i}update(t,e=!1){t&&(e?this.contract=I.mergeContract(this.contract,t):this.updatedContract=I.mergeContract(this.updatedContract,t))}updateActivityId(t){this.activityIdInternal=t;const e=this.contract&&this.contract.page&&this.contract.page.isStatic&&"true"===this.contract.page.isStatic.toString().toLowerCase()?(0,s.DA)():t;this.updateRequestId(e)}getEventIndexInternal(){return this.eventIndexInternal}updateRequestId(t,e){this.eventIndexInternal=e||0,this.shouldResetClientId&&(0,s._Q)(),this.requestIdInternal=t||(0,s.DA)()}updateAfdMuid(t){this.afdMuidInternal=t||""}updateContract(){this.contract=I.mergeContract(this.contract,this.updatedContract),delete this.updatedContract}addOrUpdateCustomProperty(t,e){this.customProps[t]=e}removeCustomProperty(t){t&&delete this.customProps[t]}addOrUpdateTmplProperty(t,e){this.tmplProps[t]=e}removeTmplProperty(t){delete this.tmplProps[t]}addOrUpdateJoinIdProperty(t,e){this.joinIdProps[t]=e}getJoinId(t){return this.joinIdProps[t]}updatePageConfiguration(t){this.update({page:{config:t}})}get JoinIdProps(){return this.joinIdProps}browserVisibilityCallback(){(document.hidden||"hidden"===document.visibilityState)&&(this.browserHiddenOnce=!0)}IsPvEvent(t){this.isPvEvent=t}generateStringFromKeyValueObject(t){const e=[];return t&&Object.keys(t).forEach(n=>{t[n]?e.push(n+":"+t[n]):e.push(n)}),e.length>0?e.join(";"):void 0}getDwellTimeV2(){if(this.enableDwelltimeV2)return S.getDwellTimeV2()}}var P=n(5926),R=n(41922),M=n(16198);class _{get disable(){return this.config.disable}set disable(t){this.config.disable=t}applyAnidOverride(t){/^A=[0-9A-F]+FFFFFFF$/i.test(t)?this.config.anidOverride=t:window.console.error(`Invalid ANID format: ${t}`)}constructor(t){this.config=t}}var E=n(88206),F=n(693);class D extends _{constructor(t){super(t),this.transporterReady=!1,setTimeout(()=>{this.collectorChannelPlugin=new R.A,this.appInsightsCore=new P.A;const e=new M.A,n={populateBrowserInfo:!1,populateOperatingSystemInfo:!1,enableApplicationInsightsTrace:!1,enableDistributedTracing:!0,enableApplicationInsightsUser:!1,sessionRenewalMs:18e5,sessionExpirationMs:18e5,userConsentCookieName:"OptanonAlertBoxClosed"},i={instrumentationKey:t.key,channels:[[this.collectorChannelPlugin]],extensionConfig:[e],disablePageUnloadEvents:["visibilitychange"]},r=[];if(s.OL||(i.extensionConfig[this.collectorChannelPlugin.identifier]={httpXHROverride:{sendPOST:(e,n,i)=>{delete e.headers["cache-control"],delete e.headers["content-type"];const r={method:"POST",credentials:"include",body:e.data,headers:e.headers};e.data.length>64e3?this.sendRequest(t,e.urlString,r).then(t=>{n(t.status)}).catch(t=>{n(0,{})}):(this.sendRequest(t,e.urlString,{...r,keepalive:!0}).then(t=>{}).catch(t=>{}),n(200,{}))}}}),t.addNoResponse){const t={addNoResponse:!1};i.extensionConfig[this.collectorChannelPlugin.identifier]=t}if(s.OL&&(i.extensionConfig[e.identifier]=n,r.push(e)),t&&t.anonCookieName&&(i.anonCookieName=t.anonCookieName),t?.ignoreClientAnidCookies&&(i.cookieCfg={ignoreCookies:["ANON"]}),t.endpoint&&(i.endpointUrl=t.endpoint),this.appInsightsCore.initialize(i,r),t&&t.enableTraceGenerator)try{E.T.getTraceInstance().setTraceObj(this.appInsightsCore)}catch{}this.transporterReady=!0},100)}sendRequest(t,e,n){return t.abortableFetch?t.abortableFetch(e,t.timeout??1e3,n,void 0,void 0,void 0,!0):fetch(e,n)}transport(t,e=!0,n=0){!t||(0,F.A)(t)||this.config.disable||(this.transporterReady&&this.appInsightsCore&&this.appInsightsCore.isInitialized&&this.appInsightsCore.isInitialized()&&this.collectorChannelPlugin&&this.collectorChannelPlugin.isInitialized&&this.collectorChannelPlugin.isInitialized()?this.appInsightsCore.track(t):n<50&&setTimeout(()=>this.transport(t,e,n+1),200))}applyAnidOverride(t,e=0){if(!t||!/^A=[0-9A-F]+FFFFFFF$/i.test(t))return void window.console.error(`Invalid ANID format: ${t}`);if(!(this.transporterReady&&this.appInsightsCore&&this.appInsightsCore.isInitialized&&this.appInsightsCore.isInitialized()&&this.collectorChannelPlugin&&this.collectorChannelPlugin.isInitialized&&this.collectorChannelPlugin.isInitialized()))return void(e<50?setTimeout(()=>this.applyAnidOverride(t,e+1),200):window.console.error("applyAnidOverride: Max retries reached. Required components not initialized."));this.appInsightsCore.addTelemetryInitializer(e=>{e.ext=e.ext||{},e.ext.intweb=e.ext.intweb||{},e.ext.intweb.anid=t})}}class O extends _{constructor(t){super(t)}transport(t){if(!t||!this.config.endpoint||this.config.disable)return;const e=this.generateUrl(this.config.endpoint+"?",t);this.generatePixelBeacon(e)}generatePixelBeacon(t){(new Image).src=t.replace(/&amp;/gi,"&")}generateUrl(t,e){const n=[];let i=t;return Object.keys(e).forEach(t=>{let i=e[t];"object"==typeof i&&i&&(i=JSON.stringify(i)),n.push(this.encodeURIComponent(t)+"="+this.encodeURIComponent(i))}),i=t+n.join("&").replace(/%20/g,"+"),i}encodeURIComponent(t){return null!=t&&encodeURIComponent(t)||""}}class N extends _{constructor(t){super(t),this.logEventAsync=t?.callbackData?.callback,this.sapphireId=t?.callbackData?.data?.sapphireId,this.productId=t?.callbackData?.data?.productId}transport(t){if(!t||this.config.disable)return;let e;try{e=this.flattenObj(t),e.isCoreView=!0,e.platform="app",this.sapphireId&&(e["browser.muid"]=this.sapphireId),e["page.product"]=this.productId||"SuperAppHP",e["page.ocid"]="superappdhp",e["page.canvas"]="App",e["flight.tmpl"]=this.appendString(e["flight.tmpl"],";","sa-is-web:1")}catch(t){return void window.console.error("Error occured while flatterning telemetry payload :",t)}t.name&&this.logEventAsync({type:t.eventType,name:t.name,app_id:"0067acd6d05f4168b92f510d33b9ed74",data:{oneds:e}})}flattenObj(t){const e={},n=(t,i)=>{Object.keys(t).forEach(r=>{let o="";o=""===i?`${r}`:`${i}.${r}`,"object"==typeof t[r]&&t[r]?n(t[r],o):e[this.formatKey(o)]=t[r]})};return n(t,""),e}formatKey(t){return t?"eventType"===t?"type":t.startsWith("data.")?t.substring(5,t.length):t:t}appendString(t,e,n){return(t?t+e:"")+n}}class L extends _{constructor(t){super(t),this.logEventAsync=t?.callbackData?.callback,this.sapphireId=t?.callbackData?.data?.sapphireId,this.productId=t?.callbackData?.data?.productId}transport(t){if(!t||this.config.disable)return;let e;try{e=this.flattenObj(t),e.isCoreView=!0,e.platform="app",this.sapphireId&&(e["browser.muid"]=this.sapphireId),e["page.product"]=this.productId||"SuperAppHP",e["page.ocid"]="superappdhp",e["page.canvas"]="App"}catch(t){return void window.console.error("Error occured while flatterning telemetry payload :",t)}if(t.name){const n=this.transformPayload(e);this.logEventAsync({type:t.eventType,name:t.name,app_id:"0067acd6d05f4168b92f510d33b9ed74",data:{...n}})}}flattenObj(t){const e={},n=(t,i)=>{Object.keys(t).forEach(r=>{let o="";o=""===i?`${r}`:`${i}.${r}`,"object"==typeof t[r]&&t[r]?n(t[r],o):e[this.formatKey(o)]=t[r]})};return n(t,""),e}formatKey(t){return t?"eventType"===t?"type":t.startsWith("data.")?t.substring(5,t.length):t:t}transformPayload(t){const e={"app.custom.content.targetContentType":"targetContentType","client.hScrollOffset":"hScrollOffset","client.scrollOffset":"scrollOffset",contentViewType:"contentViewType","page.name":"pageName","page.pageId":"pageId","page.type":"pageType","locale.mkt":"localeMkt","extSchema.pb.build":"extSchemaBuild","request.requestId":"requestId",actionType:"actionType","object.content.id":"contentId","object.name":"objectName","object.type":"objectType","object.content.type":"objectContentType","object.placement.lineage":"objectPlacementLineage","object.content.category":"objectContentCategory",object:"batchObjects"},n={};return Object.keys(e).forEach(i=>{t[i]&&(n[e[i]]=t[i])}),n}}var B=n(22309);class U extends _{constructor(t){super(t)}transport(t){t&&!this.config.disable&&this.config.callback(t)}}var W=n(77255),V=n(2603),H=n(91326),z=n(39598);class j extends V.V{createEvent(t,e,n,i=0){return{name:this.getSuperAppOneDSEventName(v.E0[t]),eventType:this.getSuperAppOneDSEventType(v.E0[t]),data:e,baseType:v.E0.Base,latency:n,sync:i}}createContentViewPayload(t,e,n){if(!e)return;const r=[];t.forEach(t=>{r.push(this.mapTelemetryObject(t))});let o;(0,s.mm)()&&(o={content:{docHeight:(0,s.mm)()}});let a=null;try{a=JSON.stringify(r)}catch(t){a=r}const c={...e,...o,object:a,contentViewType:n.contentViewType};if(n.contentViewType===i.ym.Scroll&&(c.isMeaningfulScroll=n.isMeaningfulScroll),!(0,F.A)(r)){return this.createEvent("ContentView",c,H.XA.RealTime)}}reConstructLiteTelemetryPayload(t){const e=this.getSuperAppOneDSEventName(t.name),n=this.getSuperAppOneDSEventType(t.name);return Object.assign(t,{name:e,eventType:n,data:{...t.data,name:e,object:{...t.data.object,ext:t.ext}}}),t}mapTelemetryObject(t){let e;const n=t&&t.content&&t.content.type;(n||t.behavior)&&(e=(0,z.k)(n,t.behavior));const i={...t};return delete i.action,delete i.behavior,delete i.overrideId,i}getSuperAppOneDSEventType(t){switch(t){case v.E0.PageView:return"Microsoft.Windows.MsnApps.PageView";case v.E0.UserAction:return"Microsoft.Windows.MsnApps.PageAction";case v.E0.AppError:return"Microsoft.Windows.MsnApps.Failure";case v.E0.AppPerfTrace:return"Microsoft.Windows.MsnApps.ClientPerf";case v.E0.ContentView:return"Microsoft.Windows.MsnApps.ContentView";case v.E0.LoadTime:case v.E0.Unload:return"Microsoft.Windows.MsnApps.AppLifeCycle";case v.E0.VideoPlay:return"Microsoft.Windows.MsnApps.VideoPlay";case v.E0.TraceInfo:return"Microsoft.Windows.MsnApps.TraceInfo";case v.E0.ClientLog:return"Microsoft.Windows.MsnApps.ClientLog";default:return null}}getSuperAppOneDSEventName(t){switch(t){case v.E0.PageView:return"PAGE_VIEW_HP_WEBVIEW";case v.E0.UserAction:return"PAGE_ACTION_HP_WEBVIEW_CLICK";case v.E0.AppError:return"HP_WEBVIEW_APP_ERROR";case v.E0.AdFeedback:return"PAGE_ACTION_HP_WEBVIEW_AD_FEEDBACK";case v.E0.AdImpression:return"HP_WEBVIEW_AD_IMPRESSION";case v.E0.AppPerfTrace:return"HP_WEBVIEW_APP_PERF_TRACE";case v.E0.Base:return"PAGE_VIEW_HP_WEBVIEW_BASE";case v.E0.ContentView:return"CONTENT_VIEW_HP_WEBVIEW";case v.E0.Feedback:return"PAGE_ACTION_HP_WEBVIEW_FEEDBACK";case v.E0.LoadTime:return"HP_WEBVIEW_LOAD_TIME";case v.E0.ServerLog:return"HP_WEBVIEW_SERVER_LOG";case v.E0.Unload:return"HP_WEBVIEW_UNLOAD";case v.E0.VideoAdPlay:return"CONTENT_VIEW_HP_WEBVIEW_VIDEO_AD";case v.E0.VideoPlay:return"CONTENT_VIEW_HP_WEBVIEW_VIDEO";case v.E0.TraceInfo:return"DIAGNOSTIC_HP_WEBVIEW_TRACEINFO";case v.E0.ClientLog:return"DIAGNOSTIC_HP_WEBVIEW_CLIENTLOG";default:return t}}}class q{static getTrackingSystem(t,e){switch(t.type){case r.x.OneDS:return{transporter:new D(t.transporterConfig),mapper:new V.V(t.transporterConfig.enableEventsBatching),type:t.type};case r.x.CTag:return{transporter:new O(t.transporterConfig),mapper:new B.H,type:t.type};case r.x.Comscore:return{transporter:new O(t.transporterConfig),mapper:new W.J,type:t.type};case r.x.Debug:case r.x.Automation:return{transporter:new U(t.transporterConfig),mapper:t.mapper,type:t.type};case r.x.SuperApp:return{transporter:new N(t.transporterConfig),mapper:new j,type:t.type};case r.x.SuperAppBridge:return{transporter:new L(t.transporterConfig),mapper:new j,type:t.type};default:return{transporter:new D(t.transporterConfig),mapper:new V.V,type:t.type}}}}class G{constructor(){this.trackingSystems=[]}add(t){this.trackingSystems.push(t)}sendPageViewEvent(t,e=r.x.All){this.trackingSystems.forEach(n=>{if((e===r.x.All||e===n.type)&&n.mapper.createPageViewPayload){const e=n.mapper.createPageViewPayload(t);n.transporter.transport(e)}})}fireCTagTrackingPixel(t){this.trackingSystems.forEach(e=>{if(e.type===r.x.CTag&&e.mapper.createPageViewPayload){const n=e.mapper.createPageViewPayload(t);e.transporter.transport(n)}})}sendContentViewEvent(t,e,n={contentViewType:i.ym.Partial},r,o){this.trackingSystems.forEach(i=>{if(i.mapper.createContentViewPayload){const s=i.mapper.createContentViewPayload(t,e,n,r,o);i.transporter.transport(s)}})}sendActionEvent(t,e,n,i){this.trackingSystems.forEach(r=>{if(r.mapper.createActionPayload){const o=r.mapper.createActionPayload(t,e,n,i);r.transporter.transport(o)}})}sendEventPayload(t,e,n){this.trackingSystems.forEach(i=>{if(i.mapper.createEventPayload){const r=i.mapper.createEventPayload(t,e,n);i.transporter.transport(r)}})}sendSSREventPayload(t){this.trackingSystems.forEach(e=>{if(e.mapper.reConstructLiteTelemetryPayload){const n=e.mapper.reConstructLiteTelemetryPayload(t);e.transporter.transport(n)}})}sendCustomEvent(t,e,n){this.trackingSystems.forEach(i=>{if(i.mapper.createCustomEventPayload){const r=i.mapper.createCustomEventPayload(t,e,n);i.transporter.transport(r)}})}disable(t=r.x.All){this.trackingSystems.forEach(e=>{t!==r.x.All&&t!==e.type||(e.transporter.disable=!0)})}enable(t=r.x.All){this.trackingSystems.forEach(e=>{t!==r.x.All&&t!==e.type||(e.transporter.disable=!1)})}applyAnidOverride(t){this.trackingSystems.forEach(e=>{e.type===r.x.OneDS&&e.transporter.applyAnidOverride(t)})}}var J=n(98216);const Q=[3e3,5e3,8e3,15e3,2e4,3e4];class K{constructor(){this.currentIndex=0}async start(){this.timeHandler||(this.timeHandler=window.setInterval(()=>{if(this.currentIndex>=Q.length)return void window.clearInterval(this.timeHandler);const t=J.YT.getDwellTime(),e=Q[this.currentIndex];t<e||(J.YT.sendHeartBeatEvent({type:"SATCI",metrics:{SATCI:e}}),this.currentIndex++)},200))}}function X(){let t;return new Promise(e=>{const n=J.YT.config?.startDwellOnPageVisible;t=()=>{const t=n&&"visible"===document.visibilityState||document.hasFocus();return t&&e(),t},t()||(document.addEventListener("visibilitychange",t),window.addEventListener("focus",t))}).finally(()=>{t&&(document.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t))})}const Y=new Set,Z=new Set;function tt(t,e){return t.id?t.id:e?.contract?.id?e.contract.id:e?.contract?.content?.id?e.contract.content.id:void 0}function et(t){return["NativeAd"].includes(t)}const nt=new Set;s.OL&&function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}}();class it{constructor(t){this.internalErrors=[],this.eventQueue=[],this.contentUpdateQueue=new Set,this.partialContentUpdateQueue=new Set,this.contentViewTriggerSource=i.ym.Load,this.contentViewTimeout=1e3,this.contentViewTimer=null,this.contentViewDelay=200,this.scheduledContentViewType=null,this.contentViewTimePassed=0,this.contentViewLastExecution=0,this.contentUpdateDebugQueue=new Set,this.intersectionObserverOptions={root:null,rootMargin:"0px",threshold:0},this.intersectionObserver25PercentOptions={root:null,rootMargin:"0px",threshold:.25},this.vCardContentCount=0,this.vCardContentCount25=0,this.vCardAdCount=0,this.vCardAdCount25=0,this.adsViewedArea=0,this.traceIdIndex=-1,this.maxScrollLoadTimeEvents=10,this.contentViewBeaconSent=!1,this.pageViewBeaconSent=!1,this.offsetCalculationCallback=null,this.vpOffsetFlagIsValidCallback=null,this.yieldElementsCount=20,this.hoverTimes=new Map,this.createContentVisibilityCallback=t=>e=>{this.contentVisibilityCallback(e,t)},this.onFocusCallback=()=>{this._useVisForDwell||this.contentLoaded&&this.toggleDwellTime(!0)},this.onBlurCallback=()=>{this._useVisForDwell||(this.sendPageOutOfFocusEvent({}),this.toggleDwellTime(!1))},this.toggleDwellTime=t=>{if(this.config.disableAutoCalculateDwellTime)return;let e;t?(S.start(),e="dwellTimeFocusStart"):(S.pause(),e="dwellTimePause"),this.pageMetadata.addOrUpdateTmplProperty(e,"true")},this.visibilityChangeCallback=()=>{if(!this._useVisForDwell)return;const t="visible"===document.visibilityState;this.toggleDwellTime(t)},this.batchSendScrollLoadTimeEvent=({scrollInputType:t,scrollDuration:e,endOfFeedTime:n,potentialMissedScrollInput:i,calculateAri:r,scrollInstanceData:o})=>{if(this.scrollLoadTimeEventsBatcher)this.scrollLoadTimeEventsBatcher.defer();else{const t=t=>{let e,n,i,r,s=0;if(t.forEach(t=>{null!=t.eoft&&(e=(e||0)+t.eoft),null!=t.ari&&t.duration&&(n=(n||0)+t.ari*t.duration),t.duration&&(s+=t.duration),t.inputType&&(i||(i={}),i[t.inputType]=(i[t.inputType]||0)+1),!r&&t.potentialMissedScrollInput&&(r=t.potentialMissedScrollInput)}),s<=0||null==e&&null==n)return;const a={scrollDuration:Math.round(s)};i&&(a.scrollInputs=i),r&&(a.potentialMissedScrollInput=r),null!=e&&(a.scrollEoft=Math.round(e/s*1e4)),null!=n&&(a.scrollAri=Math.round(n/s*1e4)),o&&o.length&&(a.scrollInstanceData=[...o],o.length=0),this.sendLoadTimeEvent({markers:a})};this.scrollLoadTimeEventsBatcher=function(t,e){const{autoFlushIntervalInMs:n,maxFlushes:i}={...e};let r,o=[],s=0;const a=()=>{(null==i||s<i)&&(s++,o.length&&(t(o),o=[]))},c=()=>{n&&(r&&clearTimeout(r),r=setTimeout(a,n))};return{enqueue:t=>{o.push(t),c()},flush:a,defer:c}}(t,{maxFlushes:this.maxScrollLoadTimeEvents}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.scrollLoadTimeEventsBatcher.flush()}),window.addEventListener("beforeunload",()=>this.scrollLoadTimeEventsBatcher.flush()),this.subscribeToAppHidden&&this.subscribeToAppHidden(()=>this.scrollLoadTimeEventsBatcher.flush())}const s=r&&r();this.scrollLoadTimeEventsBatcher.enqueue({eoft:n,ari:s,duration:e,inputType:t,potentialMissedScrollInput:i})};try{this.config=t,this.config.autoCaptureContentView=void 0===t.autoCaptureContentView||t.autoCaptureContentView,this.config.beacons=t.beacons||{},this.config.beacons.PageOutOfFocus=this.config.beacons.PageOutOfFocus||{},this.config.beacons.PageOutOfFocus.disable=void 0===this.config.beacons.PageOutOfFocus.disable||this.config.beacons.PageOutOfFocus.disable,s.OL&&(this.config.disableLayoutEventManager||(this.layoutEventManager=new T,this.layoutEventManager.observe(document.documentElement)),this.clickEventManager=new b.S4,t.hydrationPromise&&t.hydrationPromise instanceof Promise?this.config.hydrationPromise.then(()=>{this.clickEventManager.observe(window,this.config.disableContextMenu)}):this.clickEventManager.observe(window,this.config.disableContextMenu),t.enableAutoHeartbeats&&!this.hbScheduler&&(this.hbScheduler=function(){const t=new K;return Promise.allSettled([X(),new Promise(t=>window.setTimeout(t,2e3))]).then(()=>{t.start()}),t}()),window.addEventListener("beforeunload",this.unloadEventCallback.bind(this)),window.addEventListener("telemetrynodeadded",t=>{if(t&&t.detail&&t.detail.element){x.W.addElement(t.detail.element);this.getActiveIntersectionObservers().forEach(e=>{e.observe(t.detail.element)})}}),window.addEventListener("telemetrynodremoved",t=>{if(t&&t.detail&&t.detail.element){this.getActiveIntersectionObservers().forEach(e=>{e.unobserve(t.detail.element)})}}),window.addEventListener("telemetryclick",this.clickEventHandler.bind(this)),window.addEventListener("focus",this.onFocusCallback),window.addEventListener("blur",this.onBlurCallback),document.addEventListener("visibilitychange",this.visibilityChangeCallback)),this.trackingSystemList=new G,t.clientLogMaxCount=t.clientLogMaxCount||10,t.trackingSystems.forEach(e=>{e.transporterConfig.abortableFetch=t.abortableFetch,e.transporterConfig.anonCookieName=t.anonCookieName,e.transporterConfig.addNoResponse=t.addNoResponse,e.transporterConfig.ignoreClientAnidCookies=t.ignoreClientAnidCookies,e.transporterConfig.enableTraceGenerator=t.enableTraceGenerator,e.transporterConfig.enableEventsBatching=t.enableEventsBatching,e.transporterConfig.timeout=t.timeout,this.trackingSystemList.add(q.getTrackingSystem(e))})}catch(t){this.internalErrors.push({message:"Error in Telemetry Lib constructor.",error:t})}}getTrackingSystemList(){return this.trackingSystemList}setContentViewTimeout(t){this.contentViewTimeout=t}resetContentViewTimeout(){this.contentViewTimeout=v.Hb}renderTelemetryAttribute(t,e,n){return new A.$(t).render(e)}observeSingleElement(t){}observeElementTree(t){}observeShadowRoot(t){this.layoutEventManager?.observe(t)}setOffsetCalculationCallback(t){this.offsetCalculationCallback=t}setVPOffsetFlagIsValidCallback(t){this.vpOffsetFlagIsValidCallback=t}getIntersectionObserverMode(){return this.config.intersectionObserverMode||"ZeroPercentOnly"}getActiveIntersectionObservers(){const t=[];switch(this.getIntersectionObserverMode()){case"TwentyFivePercentOnly":this.viewport25PercentIntersectionObserver&&t.push(this.viewport25PercentIntersectionObserver);break;case"Both":this.viewportIntersectionObserver&&t.push(this.viewportIntersectionObserver),this.viewport25PercentIntersectionObserver&&t.push(this.viewport25PercentIntersectionObserver);break;default:this.viewportIntersectionObserver&&t.push(this.viewportIntersectionObserver)}return t}initPage(t,e,i,r,o,c){if(this.pageMetadata=new I(t,e,this.config.anonCookieName,i,this.config.overrideScrollOffset,this.config.viewTypeCallback,r,this.config.enableDwelltimeV2,o,this.config.shouldResetClientId,c),s.OL){if("IntersectionObserver"in n.g){switch(this.getIntersectionObserverMode()){case"ZeroPercentOnly":{const t=this.config.cvIntersectionObserverDelay?{...this.intersectionObserverOptions,delay:this.config.cvIntersectionObserverDelay}:this.intersectionObserverOptions;this.viewportIntersectionObserver=new IntersectionObserver(this.createContentVisibilityCallback(!1),t);break}case"TwentyFivePercentOnly":{const t=this.config.cvIntersectionObserverDelay?{...this.intersectionObserver25PercentOptions,delay:this.config.cvIntersectionObserverDelay}:this.intersectionObserver25PercentOptions;this.viewport25PercentIntersectionObserver=new IntersectionObserver(this.createContentVisibilityCallback(!0),t);break}case"Both":{const t=this.config.cvIntersectionObserverDelay?{...this.intersectionObserverOptions,delay:this.config.cvIntersectionObserverDelay}:this.intersectionObserverOptions;this.viewportIntersectionObserver=new IntersectionObserver(this.createContentVisibilityCallback(!1),t);const e=this.config.cvIntersectionObserverDelay?{...this.intersectionObserver25PercentOptions,delay:this.config.cvIntersectionObserverDelay}:this.intersectionObserver25PercentOptions;this.viewport25PercentIntersectionObserver=new IntersectionObserver(this.createContentVisibilityCallback(!0),e);break}}this.contentVisibilityCallbackPromise=(0,s.Ym)()}this.runContentVisibilityCallbacksPromise=this.config.deferContentViewIntersectionCallbacks?(0,s.Ym)():(0,s.Ym)(!0),this.viewportEventManager=new a((t,e,n)=>{this.config.autoCaptureContentView&&(this.autoSendContentViewEvent({contentViewType:t,isMeaningfulScroll:e}),n&&(null!=n.endOfFeedTime||n.calculateAri)&&this.batchSendScrollLoadTimeEvent(n))},this.config.overrideScrollOffset),window.addEventListener("telemetryviewportupdated",t=>{t&&t.detail&&t.detail.mech&&(this.contentViewTriggerSource=t.detail.mech)}),this.viewportEventManager.initListener()}}sendPageView(t=null,e=!1,n=null,o=r.x.All,a=!1){this.queueEvent("PageView",()=>{this.config.beacons&&this.config.beacons.PageView&&this.config.beacons.PageView.disable||!this.pageMetadata||(this.config.resetAppErrorCounterOnPageView&&f(),t=t||{},(0,s.uj)(t),this.contentLoaded=!1,this.config.disableAutoCalculateDwellTime||S.reset(),this.pageMetadata.update(t),n?this.pageMetadata.updateActivityId(n):e||this.updateRequestId(),this.pageMetadata.updateContract(),this.viewportEventManager.resetViewportOffset(),this.updatePageMetadata({page:{isMonetized:!1}},!0),this.pageMetadata.IsPvEvent(!0),this.trackingSystemList.sendPageViewEvent(this.pageMetadata.combinedContract,o),this.pageMetadata.IsPvEvent(!1),this.pageViewBeaconSent=!0,!a||o!==r.x.All&&o!==r.x.Comscore||fetch(v.tK),e||(this.contentViewTriggerSource=i.ym.Load,setTimeout(()=>{this.autoSendContentViewEvent({contentViewType:i.ym.Load})},1e3)),this.dispatchEvent(i.RJ,{requestId:this.pageMetadata.requestId}))})}fireCTagPixelBeacon(){this.trackingSystemList.fireCTagTrackingPixel(this.pageMetadata.combinedContract)}getRequestId(){return this.pageMetadata.requestId}getCurrentEventIndex(){return this.pageMetadata.getEventIndexInternal()}updateRequestId(t,e){this.pageMetadata.updateRequestId(t,e)}disableTrackingSystem(t=r.x.All){this.trackingSystemList.disable(t)}enableTrackingSystem(t=r.x.All){this.trackingSystemList.enable(t)}disableBeacon(t){this.config.beacons[t]||(this.config.beacons[t]={}),this.config.beacons[t].disable=!0}enableBeacon(t){this.config.beacons[t]||(this.config.beacons[t]={}),this.config.beacons[t].disable=!1}disableAutoUnloadCallback(){this.ignoreAutoUnloadCallback=!0}enableAutoUnloadCallback(){this.ignoreAutoUnloadCallback=!1}updatePageConfiguration(...t){let e;t.forEach(t=>{e|=t}),this.pageMetadata.updatePageConfiguration(e)}updatePageMetadata(t,e=!1){t&&this.pageMetadata.update(t,e)}addOrUpdateCustomProperty(t,e){this.pageMetadata.addOrUpdateCustomProperty(t,e)}removeCustomProperty(t){this.pageMetadata.removeCustomProperty(t)}addOrUpdateJoinIdProperty(t,e){this.pageMetadata.addOrUpdateJoinIdProperty(t,e)}addOrUpdateTmplProperty(t,e){this.pageMetadata.addOrUpdateTmplProperty(t,e)}removeTmplProperty(t){this.pageMetadata.removeTmplProperty(t)}addOrUpdateTmplString(t){if(!t)return;const e=t.split(";");for(let t=0;t<e.length;t++){const n=e[t].split(":");2===n.length?this.addOrUpdateTmplProperty(n[0],n[1]):1===n.length&&this.addOrUpdateTmplProperty(n[0])}}removeTmplString(t){if(!t)return;const e=t.split(";");for(let t=0;t<e.length;t++){const n=e[t].split(":");n&&n.length&&this.pageMetadata.removeTmplProperty(n[0])}}useVisForDwell(t){if(this._useVisForDwell===t)return;t&&this.pageMetadata.addOrUpdateTmplProperty("useVisForDwell","1"),this._useVisForDwell=t;const e=this.isDwellTimeActive();t&&!e&&"visible"===document.visibilityState?this.toggleDwellTime(!0):t||!e||document.hasFocus()||this.toggleDwellTime(!1)}addOrUpdateIdxId(t,e){if(t){e&&(delete this.pageMetadata.JoinIdProps[i.kN],this.traceIdIndex=-1);const n=this.pageMetadata.getJoinId(i.kN),r=n?`${n},${t}`:t;return this.pageMetadata.addOrUpdateJoinIdProperty(i.kN,r),this.traceIdIndex+=1,this.traceIdIndex}}sendActionEvent(t,e,n,r,a){let c=null;const{enableMouseDwellTime:u,mouseDwellCardTypePrefixs:d=[],enableVPOffsetOnClick:l,cardsForVPOffset:h}=this.config;u&&d.some(e=>t.tagName.startsWith(e))&&(c=(0,s.zm)(t,!0),"mouseenter"===e)?this.hoverTimes.set(c,Date.now()):this.queueEvent("UserAction",()=>{if(!(this.config.beacons&&this.config.beacons.UserAction&&this.config.beacons.UserAction.disable)&&this.pageMetadata&&t){const f=t;x.W.updateLayout();const p=this.clickEventManager.getTelemetryClickTarget(t);let g;p&&(t=p),g=t.getAttribute&&t.getAttribute(i.i),t.parentElement&&!g&&(g=(t=t.parentElement).getAttribute&&t.getAttribute(i.i));let m=x.W.get(t);if(!m){const t=x.W.parseAttribute(g);t&&(m=new x.W(t))}if(this.pageMetadata&&m){a&&((0,s.J1)(f,this.pageMetadata.contract.page.ocid),(0,s.eq)(f,this.pageMetadata.contract.page.partnerTrackingCode),(0,s.UG)(f,this.pageMetadata.requestId,this.config.useRidAsCvid),(0,s.YC)(f,this.pageMetadata.contract.page.uxMode),(0,s.yO)(f,this.pageMetadata.getEventIndexInternal()+1)),this.config.destinationUrlHash&&(0,s.KS)(f,this.config.destinationUrlHash);const i=t.getAttribute("action")||t.form&&t.form.getAttribute("action"),p=e||m.contract.action,g=void 0===n?m.contract.behavior:n;let w=m.contract.overrideDestinationUrl||(0,s.AY)(r)&&r||t.getAttribute("href")||i;if(this.config.customProtocolOverride&&((0,s.gk)(f,this.config.customProtocolOverride,w),t.hasAttribute("originalhref")&&(w=t.getAttribute("originalhref"))),w&&!w.startsWith("mailto:")?!0===m.contract.overrideEmailIdScrubbing||(0,s.O8)(w)?m.contract.destinationUrl=w:(m.contract.destinationUrl="",this.sendAppErrorEvent({id:54301,severity:0,message:"Email found in the destination url",pb:m.combinedContract})):m.contract.destinationUrl="",p===o.EG.RightClick&&g===o.MS.ContextMenu&&!(m&&m.contract&&m.contract.destinationUrl))return;if(u&&"mouseleave"===e&&d.some(t=>f.tagName.startsWith(t))){if(!this.hoverTimes.has(c))return;const t=Date.now()-this.hoverTimes.get(c);this.hoverTimes.delete(c),m.contract.ext=m.contract.ext||{},m.contract.ext.mouseDwellTime=t}if(l&&null==p&&this.offsetCalculationCallback){const e=t.getRootNode();if(e instanceof ShadowRoot){const t=e.host;if(t instanceof HTMLElement){const e=[[t,m]];this.offsetCalculationCallback(e,{cardsForVPOffset:h})}}}this.trackingSystemList.sendActionEvent(m.combinedContract,this.pageMetadata.combinedContract,null==p?o.EG.Click:p,null==g?o.MS.Navigate:g),m.contract&&m.contract.triggerPageView&&g===o.MS.Navigate&&this.sendPageView(null,!1)}}})}scheduleContentViewEvent(t=i.ym.Partial,e){if(!s.OL)return;const n=(new Date).getTime();this.contentViewTimePassed=n-this.contentViewLastExecution,this.contentViewTimePassed<=this.contentViewDelay&&t!==i.ym.Partial||(this.contentViewLastExecution=n,this.contentViewTimer&&this.scheduledContentViewType===t&&window.clearTimeout(this.contentViewTimer),this.contentViewTimer=window.setTimeout(()=>this.autoSendContentViewEvent({contentViewType:t}),e||this.contentViewTimeout),this.scheduledContentViewType=t)}sendContentViewEvent(t,e=i.ym.Partial,n=!0){this.queueEvent("ContentView",()=>{if(this.config.beacons&&this.config.beacons.ContentView&&this.config.beacons.ContentView.disable||!this.pageMetadata)return;x.W.updateLayout();const i=(0,s.Ir)(t),r=[];if(i&&i.length>0){for(let t=0;t<i.length;t++){const e=i[t],o=x.W.get(e);o&&(!n||this.contentUpdateQueue.has(e)||this.partialContentUpdateQueue.has(e))&&(this.setIsMonetizedFlag(o.combinedContract),r.push(o.combinedContract))}this.trackingSystemList.sendContentViewEvent(r,this.pageMetadata.combinedContract,{contentViewType:e})}this.contentLoaded||(this.contentLoaded=!0,this.pageMetadata.addOrUpdateTmplProperty("dwellTimeContentLoaded","true"),this.startAutoDwellTime())})}sendAppErrorEvent(t,e=!0){if(this.config.ignoreAppErrorCounter||!function(t){if(!t||!t.id)return!0;h.has(t.id)||h.set(t.id,0);const e=h.get(t.id)+1;return h.set(t.id,e),3===t.severity&&e>25||3!==t.severity&&e>10}(t))if(function(t){if(!t)return!1;const{pb:e,severity:n=u.A.Alert}=t;if(e&&e.shouldSampleErrorsForTreatement1)switch(n){case u.A.Deprecated:return p(1);case u.A.Alert:return p(10);default:return!0}const i=e&&e.isDebugPage||!1,r=e&&e.samplePct||0;if(!i){if(n===u.A.Deprecated)return p(1);if(r>0)return p(r)}return!0}(t)||this.config.shouldNotSampleErrors){if(!(this.config.beacons&&this.config.beacons.AppError&&this.config.beacons.AppError.disable)&&this.pageMetadata)if(function(t){const{pb:e,severity:n=1}=t;return 3!==n&&!(!e||!e.shouldDelayUntilLoadTime)}(t)){const n={...t,pb:{...t.pb,delayed:1}};l.then(()=>{this.queueAppErrorEvent(n,e)})}else this.queueAppErrorEvent(t,e)}else e&&(console.error(JSON.stringify(t)),console.error(`This App error Id: ${t.id} will not be sent due to app error sampling!`));else e&&(console.error(JSON.stringify(t)),console.error(`App errors throttled for Id: ${t.id}`))}sendLoadTimeEvent(t){if("undefined"!=typeof window&&!0===window.__throttleLoadTime){const e=this.getRequestId(),n=this.config.loadTimeMaxCount??5;if(function(t,e,n=5,i=10){if(!t||!e)return!0;const r=Math.min(Math.max(n,1),i);y.has(e)||y.set(e,0);const o=(y.get(e)||0)+1;return y.set(e,o),o>r}(t,e,n,10))return void(console&&console.error&&console.error(`LoadTime event throttled for request ID: ${e}. Maximum allowed: ${Math.min(n,10)} events per request ID.`))}const e=this.config.enableCustomDiagnostic?"LoadTimeDiag":"LoadTime";this.sendEvent(e,t),d(),g()}sendFeedbackEvent(t){this.sendEvent("Feedback",t)}sendAdImpressionEvent(t){this.sendEvent("AdImpression",t)}sendAdFeedbackEvent(t){this.sendEvent("AdFeedback",t)}sendVideoPlayEvent(t,e,n=!1){if(this.config.beacons&&this.config.beacons.VideoPlay&&this.config.beacons.VideoPlay.disable)return;const i=n?"VideoAdPlay":"VideoPlay";e&&x.W.updateLayout();const r=e?x.W.get(e):void 0,o=r?r.combinedContract:{};if(t){const e={...o,...t};return void this.trackingSystemList.sendEventPayload(i,{object:e},this.pageMetadata.combinedContract)}e&&this.pageMetadata&&r&&this.trackingSystemList.sendEventPayload(i,{object:o},this.pageMetadata.combinedContract)}sendGamePlayEvent(t,e){if(!(this.config.beacons&&this.config.beacons.GamePlay&&this.config.beacons.GamePlay.disable)&&e){x.W.updateLayout();const n=x.W.get(e);if(this.pageMetadata&&n){const e={object:{...n.combinedContract,...t}};this.trackingSystemList.sendEventPayload("GamePlay",e,this.pageMetadata.combinedContract)}}}sendAudioPlayEvent(t,e){if(!(this.config.beacons&&this.config.beacons.AudioPlay&&this.config.beacons.AudioPlay.disable)&&e){x.W.updateLayout();const n=x.W.get(e);if(this.pageMetadata&&n){const e={object:{...n.combinedContract,...t}};this.trackingSystemList.sendEventPayload("AudioPlay",e,this.pageMetadata.combinedContract)}}}sendServerLogEvent(t){this.sendEvent("ServerLog",t)}sendAppPerfTraceEvent(t){this.sendEvent("AppPerfTrace",t)}sendAuthEvent(t){this.sendEvent("Auth",t)}sendHeartBeatEvent(t){this.sendEvent("HeartBeat",t)}sendClientLogEvent(t){if(this.config.enableSendClientLogEvent){const{isRestrictClientLogSize:n,maxClientLogSize:i}=this.pageMetadata?.contract?.featureFlags||{};if(!n){if(!function(t,e){try{return(t&&JSON.stringify(t)?.length||0)<=e}catch(t){return!0}}(t,"number"==typeof i?i:6144))return void this.sendEvent("ClientLog",t)}if(!this.pageMetadata?.contract?.featureFlags?.throttleClientLogs)return void this.sendEvent("ClientLog",t);if(!s.OL)return void this.sendEvent("ClientLog",t);e=this.config.clientLogMaxCount,w++,w>e||m.then(()=>{this.sendEvent("ClientLog",t)})}var e}sendPageOutOfFocusEvent(t){this.queueEvent("PageOutOfFocus",()=>{this.config.beacons&&this.config.beacons.PageOutOfFocus&&this.config.beacons.PageOutOfFocus.disable||!this.pageMetadata||this.trackingSystemList.sendEventPayload("PageOutOfFocus",null,this.pageMetadata.combinedContract)})}sendUnloadEvent(){this.queueEvent("Unload",()=>{this.config.beacons&&this.config.beacons.Unload&&this.config.beacons.Unload.disable||!this.pageMetadata||"undefined"!=typeof window&&!1===window.__sendUnloadTelemetry||this.trackingSystemList.sendEventPayload("Unload",null,this.pageMetadata.combinedContract)})}sendTraceInfoEvent(t){this.queueEvent("TraceInfo",()=>{this.config.beacons&&this.config.beacons.TraceInfo&&this.config.beacons.TraceInfo.disable||!this.pageMetadata||this.sendEvent("TraceInfo",t)})}getPageMetadata(){return this.pageMetadata}flush(t=!0,e,n){const i=t=>!(e&&e!==t.eventType||n&&n===t.eventType);for(const t of this.eventQueue)"function"==typeof t.callback&&i(t)&&t.callback();this.eventQueue=this.eventQueue.filter(t=>!i(t)),this.config.useEventQueue=!t}empty(){this.eventQueue=[]}enableEventQueue(){this.config.useEventQueue=!0}disableEventQueue(){this.config.useEventQueue=!1}addEventTypeToForceQueueList(t){this.config.forceUseEventQueueList||(this.config.forceUseEventQueueList=[]),this.config.forceUseEventQueueList.push(t)}removeEventTypeFromForceQueueList(t){this.config.forceUseEventQueueList&&(this.config.forceUseEventQueueList=this.config.forceUseEventQueueList.filter(e=>e!==t))}startDwellTime(){S.start()}pauseDwellTime(){S.pause()}pauseDwellTimeV2(){S.pauseV2()}resetDwellTime(){S.reset()}isDwellTimeActive(){return S.getIsActive()}setDwellTime(t,e){S.setDwellTime(t,e)}setDwellTimeV2(t,e){S.setDwellTimeV2(t,e)}getDwellTime(){return S.getDwellTime()}clickEventHandler(t){if(t&&t.detail&&t.detail.element&&this.pageMetadata){const e=t.detail.element;this.sendActionEvent(e,t.detail.action,t.detail.behavior,void 0,!0),e.attributes&&e.attributes.href&&e.attributes.href.value&&e.attributes.href.value.startsWith&&"function"==typeof e.attributes.href.value.startsWith&&e.attributes.href.value.startsWith("mailto:")&&(this.ignoreUnload=!0)}}queueAppErrorEvent(t,e=!0){let n="AppError";this.config.enableCustomDiagnostic&&!this.config.shouldAppErrorEscapeCustomDiagnostic?.(t)&&(n="AppErrorDiag"),this.queueEvent(n,()=>{if(this.trackingSystemList.sendCustomEvent(n,t,this.pageMetadata.combinedContract),e){const e=new Date+": "+ +new Date+" "+JSON.stringify(t);console.error(e)}this.dispatchEvent(i.xB,{error:t})})}unloadEventCallback(){this.ignoreAutoUnloadCallback||this.config.beacons&&this.config.beacons.Unload&&this.config.beacons.Unload.disable||(this.pageMetadata&&!this.ignoreUnload&&this.sendUnloadEvent(),this.ignoreUnload=!1)}setIsMonetizedFlag(t){t&&t.isMonetized&&this.updatePageMetadata({page:{isMonetized:!0}},!0)}autoSendContentViewEvent(t){this.queueEvent("ContentView",()=>{if(this.pageMetadata){let e;if(x.W.updateLayout(),t.contentViewType!==i.ym.Partial&&this.contentUpdateQueue&&this.contentUpdateQueue.size>0?e=this.contentUpdateQueue:this.partialContentUpdateQueue&&this.partialContentUpdateQueue.size>0&&(e=this.partialContentUpdateQueue),e){const{enableViewportOffset:n,cardsForVPOffset:r}=this.config,o=[];let s=[];const a=n&&!!this.vpOffsetFlagIsValidCallback&&this.vpOffsetFlagIsValidCallback();if([...e].forEach(e=>{const n=x.W.get(e);if(n&&(t.contentViewType!==i.ym.Partial||!n.isCaptured)){n.isCaptured=!0;const t=n.combinedContract;this.setIsMonetizedFlag(t),a?o.push(n):t&&s.push(t)}}),a&&this.offsetCalculationCallback&&o.length>0){const t=o.map(t=>[t.element,t]);this.offsetCalculationCallback(t,{cardsForVPOffset:r}),s=o.map(t=>t.combinedContract).filter(t=>t)}const c={},u={};let d=!1,l=!1;this.viewportEventManager?.contentViewedArea>0&&(u.contentViewedArea=this.viewportEventManager.contentViewedArea,l=!0),this.adsViewedArea>0&&(u.adViewedArea=this.adsViewedArea,l=!0),this.vCardContentCount>0&&(c.vCardContentCount=this.vCardContentCount,d=!0),this.vCardContentCount25>0&&(c.vCardContentCount25=this.vCardContentCount25,d=!0),this.vCardAdCount>0&&(c.vCardAdCount=this.vCardAdCount,d=!0),this.vCardAdCount25>0&&(c.vCardAdCount25=this.vCardAdCount25,d=!0);d||l?this.trackingSystemList.sendContentViewEvent(s,this.pageMetadata.combinedContract,t,d?c:void 0,l?u:void 0):this.trackingSystemList.sendContentViewEvent(s,this.pageMetadata.combinedContract,t),this.contentViewBeaconSent=!0,this.partialContentUpdateQueue.clear(),this.contentViewTriggerSource=null}this.contentLoaded||(this.contentLoaded=!0,this.pageMetadata.addOrUpdateTmplProperty("dwellTimeContentLoaded","true"),this.startAutoDwellTime())}})}runContentVisibilityCallbacks(){this.runContentVisibilityCallbacksPromise?.resolve()}applyAnidOverride(t){this.trackingSystemList.applyAnidOverride(t)}updateCustomProtocolOverride(t){this.config.customProtocolOverride=t}yieldAsync(){return new Promise(t=>setTimeout(t,0))}trackVCardElement(t,e){const n=function(t,e,n,i){if(!e&&!n)return;const r=x.W.get(t),o=tt(t,r);if(!o)return;const s=i?Z:Y;if(!s.has(o)&&r){const t=r.contract?.name||"";if(e&&et(t))return s.add(o),{type:"ad"};const i=r.contract?.ext?.ct1s||"";if(n&&function(t,e){if(["ContentCard","SuperSDCard","BingVideo_Carousel","RiverGem"].includes(t))return!0;const n=[{name:"destination",ct1s:"DigestCard"}];for(const i of n)if(i.name===t&&i.ct1s===e)return!0;return!1}(t,i))return s.add(o),{type:"content"}}}(t,this.config.advCardTracking,this.config.contentvCardTracking,e);if(!n)return;const i="ad"===n.type;e?i?this.vCardAdCount25++:this.vCardContentCount25++:i?this.vCardAdCount++:this.vCardContentCount++}trackAdViewAreaElement(t){if(!this.config.enableAdDensityTracking)return;const e=function(t){const e=x.W.get(t),n=tt(t,e);if(n&&!nt.has(n)&&e&&e.contract&&et(e.contract.name||"")){const t=(e.contract.ext?.height||0)*(e.contract.ext?.width||0);if(t>0)return nt.add(n),t}}(t);e&&(this.adsViewedArea+=e)}contentVisibilityCallback(t,e){const n=async n=>{const r="Both"!==this.getIntersectionObserverMode()||!e;for(let i=0;i<t.length;i++){n&&i>0&&i%this.yieldElementsCount===0&&await this.yieldAsync();const o=t[i];o.isIntersecting?(r&&this.contentUpdateQueue.add(o.target),this.trackVCardElement(o.target,e),this.trackAdViewAreaElement(o.target),!r||this.contentViewTriggerSource||this.config.enableNoPartialContentView&&!(x.W.get(o.target)?.getShouldTrackPartialContentUpdate?.()??1)||this.partialContentUpdateQueue.add(o.target)):r&&(this.contentUpdateQueue.delete(o.target),this.partialContentUpdateQueue.delete(o.target))}r&&!this.contentViewTriggerSource&&this.config.autoCaptureContentView&&this.scheduleContentViewEvent(i.ym.Partial,500),this.contentUpdateQueue.size&&this.contentVisibilityCallbackPromise&&this.contentVisibilityCallbackPromise.resolve()};this.config.deferContentViewIntersectionCallbacks&&this.runContentVisibilityCallbacksPromise?.promise?this.runContentVisibilityCallbacksPromise.promise.then(()=>n(this.config.shouldYieldCVCallback)):n(this.config.shouldYieldCVCallback)}sendEvent(t,e){this.queueEvent(t,()=>{this.config.beacons&&this.config.beacons[t]&&this.config.beacons[t].disable||!this.pageMetadata||this.trackingSystemList.sendCustomEvent(t,e,this.pageMetadata.combinedContract)})}queueEvent(t,e){this.config.eventTypeAllowList&&!this.config.eventTypeAllowList.includes(t)||(this.config.useEventQueue||this.config.forceUseEventQueueList&&this.config.forceUseEventQueueList.includes(t)?this.eventQueue.push({eventType:t,callback:e}):e())}dispatchEvent(t,e){s.OL&&setTimeout(()=>dispatchEvent(new CustomEvent(t,{detail:e})),0)}startAutoDwellTime(){(document.hasFocus()||this.config.startDwellOnPageVisible&&"visible"===document.visibilityState)&&!this.config.disableAutoCalculateDwellTime&&(document.hasFocus()||this.pageMetadata.addOrUpdateTmplProperty("dwellTimeStartedWithoutFocus","true"),S.start(),this.pageMetadata.addOrUpdateTmplProperty("dwellTimeStart","true"))}waitForContentVisibilityObserverInit(){return this.contentVisibilityCallbackPromise?this.contentVisibilityCallbackPromise.promise:Promise.resolve()}isEventInQueue(t){return this.eventQueue.some(e=>e.eventType===t)}getQueuedEventCount(){return this.eventQueue.length}isContentViewBeaconSent(){return this.contentViewBeaconSent}isPageViewBeaconSent(){return this.pageViewBeaconSent}initScrollPerformanceTrackers(t){if(!this.viewportEventManager)return;t?.scrollContainer&&this.viewportEventManager.initListener(t?.scrollContainer),this.subscribeToAppHidden=t?.subscribeToAppHidden;n.e("scrollPerfMetricTrackers").then(n.bind(n,19171)).then(({createEndOfFeedTimeTracker:e,createAppResponsivenessTracker:n,createScrollInputTracker:i})=>{const r=e({scrollContainer:t?.scrollContainer,scrollEventName:t?.scrollEventName}),o=n(),s=t?.enableScrollInputTracking&&i&&i(t?.enableMissedScrollTracking,t?.enableSectionScrollTracking,t.scrollContainer);this.viewportEventManager.initScrollPerformanceTrackers({endOfFeedTimeTracker:r,appResponsivenessTracker:o,scrollInputTracker:s})})}}},63608:function(t,e,n){n.d(e,{Y:function(){return o},y:function(){return r}});var i=n(88294);function r(t){const e=[];return t&&s(t,e),e.join(",")}function o(t){return t&&!t.startsWith("_")}function s(t,e,n=""){const r=Object.keys(t).filter(o).sort();for(const o of r){const r=t[o];if(null==r)continue;const a=`${n}${n?".":""}${o}`;if("object"==typeof r)s(r,e,a);else{if(!(e.length<100)){i.v.logError("getSortedObjectKeyValuesDeep: circular reference suspect");break}e.push(`${a}=${r.toString().toLowerCase()}`)}}}},63988:function(t,e,n){n.d(e,{MV:function(){return R},d7:function(){return I},j5:function(){return M}});var i=n(45084),r=n(26555),o=n(693),s=n(6383),a=n(5283),c=n(65022),u=n(4891),d=n(27791),l=n(44449),h=n(98216),f=n(6092);const p=(0,l.sx)(c._0l,"checkConfigType")((t,e)=>e.template.configType===t.configType),g=(0,l.sx)(c._0l,"checkRegion")((t,e)=>t.region.includes(e.region)),m=(0,l.sx)(c._0l,"checkAllAssets")((t,e)=>!!(0,o.A)(t.requiredAssetsAll)||t.requiredAssetsAll.every(t=>!(0,o.A)(e?.items[0]?.assets)&&Object.keys(e?.items[0]?.assets).some(e=>t===i.eO[e]))),w=(0,l.sx)(c._0l,"checkAnyAssets")((t,e)=>!!(0,o.A)(t.requiredAssetsAny)||t.requiredAssetsAny.some(t=>!(0,o.A)(e?.items[0]?.assets)&&Object.keys(e?.items[0]?.assets).some(e=>t===i.eO[e]))),y=(0,l.sx)(c._0l,"checkAdCount")((t,e)=>e.items.length<=(t.maxAdCount||1)),v=(0,l.sx)(c._0l,"checkMultiImage")((t,e)=>!t.multiImage||e.items[0]?.images?.length>1),b=(0,l.sx)(c._0l,"checkDiscountThreshold")((t,e)=>!t.discountThreshold||!e.items[0]?.assets||t.discountThreshold<=e.items[0].assets.discount),S=(0,l.sx)(c._0l,"checkRatio")((t,e)=>!t.supportedImageRatios||t.supportedImageRatios?.includes(e?.template?.desiredRatio)),C=(0,l.sx)(c._0l,"setTemplate")((t,e)=>{e.template.templateType=t.template instanceof Function?t.template(t,e):t.template,e.template.dynamicRenderingConfig=t.dynamicRenderingConfig&&t.dynamicRenderingConfig(e)}),k=(0,l.sx)(c._0l,"filterAssets")((t,e)=>{if(e?.template?.enableVA||e?.template?.enableVAPhase2)return;const n=(0,a.A)([...i.rQ,...e?.template?.allowedAssets||[],...e?.template?.auctionCallAssets||[],...t.supportedAssets||[],...t.requiredAssetsAll||[],...t.requiredAssetsAny||[]]);(0,r.A)(e.items,t=>{if((0,o.A)(n)||(0,o.A)(t?.assets))return void delete t.assets;const e=(0,s.A)(t.assets,(t,e,r)=>(n.includes(i.eO[r])&&(t[r]=e),t),{});t.assets=e})}),T=(0,l.sx)(c._0l,"updateImageRatio")((t,e)=>{if(!t.supportedImageRatios||!t.targetImageRatio)return;let n;const i=u.IT.includes(e.region)?"infopane":"river";e.items.forEach(e=>{const o=(0,d.GZ)(e,t.targetImageRatio,!1,i);n||(n=o),e.images&&(0,r.A)(e.images,e=>{e.ext&&e.ext.originalImageWidth&&e.ext.originalImageHeight&&(0,d.GZ)(e,t.targetImageRatio,!0,i)})}),n?.h&&n?.w&&(e.template.desiredHeight=n.h.toString(),e.template.desiredWidth=n.w.toString())}),x=(0,l.sx)(c._0l,"trimProviderName")((t,e)=>{e&&e.items&&e.items.forEach(t=>{t.providerName&&(t.providerName=I(t.providerName,t.destinationUrl))})}),A=f.T3.CurrentRequestTargetScope&&f.T3.CurrentRequestTargetScope.pageExperiments,$=A&&A.includes("prg-ad-ivq"),I=(0,l.sx)(c._0l,"trimProviderNameHelper")((t,e)=>{if(!t)return"";$&&h.YT.sendClientLogEvent({message:"Before trimming provider name",pb:{providerName:t},type:"information"});const n=t.trim();try{let i=n;n.startsWith("http://")||n.startsWith("https://")||(i="https://"+n),new URL(i);const r=n.match(/^(www\.)?([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+)/);return r?n.length-r[2].length===1?n:($&&r[2]!==n&&h.YT.sendClientLogEvent({message:"After trimming provider name",pb:{providerNameBeforeTrimming:t,providerNameAfterTrimming:r[2],adUrl:e},type:"information"}),r[2]):n}catch(t){return n}}),P=(0,l.sx)(c._0l,"updateLayoutColor")((t,e)=>{e&&e.items&&e.items.forEach(t=>{t.images&&t.images.forEach(t=>{t&&t.ext&&t.ext.layoutColor&&(t.ext.layoutColor.startsWith("#")||(t.ext.layoutColor="#"+t.ext.layoutColor))})})}),R=[p,g,m,w,y,b,v,S],M=[C,k,T,x,P]},64065:function(t,e,n){n.d(e,{g:function(){return c}});var i=n(65022),r=n(93468),o=n(51518),s=n(77246),a=n(12870);function c(t){const{tier:e}=t||{},{ClientSettings:n}=a.Rb;if(!(0,s.S)()||!n||n.static_page||!(0,o.E)(5))return;const c=n.detection?.tier;c&&e&&c!==e&&(0,r.vV)(i.AEE,"Traffic tier mismatch between PCS and 1S",void 0,{pcsTrafficTier:c,oneServiceTrafficTier:e})}},64281:function(t,e,n){n.d(e,{BA:function(){return s},Gy:function(){return l},L5:function(){return d},Wh:function(){return c},aU:function(){return o},cs:function(){return a},kw:function(){return i},zo:function(){return u}});class i{}i.byName=t=>e=>e?.name===t;class r{}function o(t,e,n=r.identity()){return h(t,[{condition:e,action:n}])}function s(t,e,n){return o(t,i.byName(e),r.replaceWith(n))}function a(t,e,n){const o=[];for(let t=0;t<e.length;t++)o.push({condition:i.byName(e[t]),action:r.replaceWith(n[t])});return h(t,o)}function c(t,e,n){return o(t,i.byName(e),r.extendFields(n))}function u(t,e,n){const o=[];for(let t=0;t<e.length;t++)o.push({condition:i.byName(e[t]),action:r.extendFields(n[t])});return h(t,o)}function d(t,e,n,s){return o(t,i.byName(e),r.spliceChildren(n,s))}function l(t,e,n,s=[],a){return o(t,i.byName(e),r.spliceChildren(n,s,a))}function h(t,e){if((t=e.reduce((t,e,n,i)=>{const{condition:r,action:o}=e;return r(t)?(i[n]=null,o(t)):t},t)).children){const n=t.children.map(t=>h(t,e.filter(t=>t)));return{...t,children:n}}return t}r.identity=()=>t=>t,r.replaceWith=t=>()=>t,r.extendFields=t=>e=>({...e,...t}),r.spliceChildren=(t,e=[],n)=>i=>{const r=[...i.children||[]];return r.splice(t,n,...e),{...i,children:r}}},64405:function(t,e,n){n.d(e,{U:function(){return E}});var i=n(1350),r=n(93468),o=n(65022),s=n(6092),a=n(12870),c=n(28868);function u(t){return new Promise((e,n)=>{!function(t,e){(0,c.lA)("getUserInfo",t,e)}(t,t=>{e(t)})})}var d=n(56639);const l=(t,e)=>new URL(e).searchParams.get(t)||null;var h=n(90454);function f(t,e){(0,h.Rl)({type:"Failure",name:"HP_WEBVIEW_APP_ERROR",error:e,data:{error:t,customMessage:e}})}function p(t){return new Promise((e,n)=>{!function(t,e){(0,c.lA)("loadData",t,e)}(t,t=>{e(t)})})}function g(t){return new Promise((e,n)=>{!function(t,e){(0,c.lA)("saveData",t,e)}(t,t=>{e(t)})})}var m=n(89980);var w=n(61825);const y="mobileAccessToken",v=(0,m.Lg)();async function b(){if(!$())return null;try{let t=v.getItem(y);if(!t)try{t=await function(t,e,n=new Error("Promise timed out")){const i=new Promise((t,i)=>{setTimeout(()=>{i(n)},e)});return Promise.race([t,i])}(p({TOKEN_CACHE_KEY:y}),800).then(t=>t?JSON.parse(t).value:null)}catch(t){(0,r.c_)(t,o.zhT,"Exception occurred while parsing JSON from native cache"+y)}if(!t)return null;const e=JSON.parse(t);if(function(t){if(!t.token)return!1;if(!function(t){const e=(0,d.s_)();if(e?.userId&&t.userId)return e.userId===t.userId;if(e?.userEmail&&t.userEmail)return e.userEmail===t.userEmail;return A()===t.muid}(t))return!1;return!C(t.expiresOn)}(e)){window.performance.mark("EdgeMobileValidCachedToken",{startTime:1});return{...e,token:w.o4.decode(e.token)}}e.token&&(window.performance.mark("EdgeMobileInvalidCachedToken",{startTime:1}),S({token:""}))}catch(t){(0,r.c_)(t,o.ukq,"Exception occurred while reading content from cache"+y)}return null}function S(t){if(!$())return;const{userId:e,userEmail:n}=(0,d.s_)()??{};try{const i={...t,token:w.o4.encode(t.token),userId:e,userEmail:n,muid:A()},s=JSON.stringify(i);v.setItem(y,s),g({TOKEN_CACHE_KEY:y,value:s}).catch(t=>{(0,r.c_)(t,o.hyX,"Exception occurred while writing content to native cache"+y)})}catch(t){(0,r.c_)(t,o.hyX,"Exception occurred while writing content to cache"+y)}}function C(t){const e=(new Date).getTime();return!t||t<=e}let k,T,x;function A(){if(void 0===k){const t=I();k=t.fd_muid}return k}function $(){if(void 0===T){const{browser:t}=I(),{browserType:e=""}=t||{};T=/edgeiOS/i.test(e)}return!!T}function I(){if(void 0===x)try{const t=document.head?.getAttribute("data-client-settings");x=t?JSON.parse(t):void 0}catch(t){}return x??{}}let P=!1;async function R(t,e=!1){const n=await async function(){try{return(0,d.s_)()||await async function(){const t=await u({});try{const e=JSON.parse(t),n=window.location.href,i=e.accountType??Object.values(e).find(t=>"MSA"===t||"AAD"===t),r=e.isSignedIn??(i&&("MSA"===i||"AAD"===i)),s="true"===l("isSignedIn",n);if(void 0===window._isSignedInMismatchReported&&(window._isSignedInMismatchReported=!1),!1===window._isSignedInMismatchReported&&s!==r&&(window._isSignedInMismatchReported=!0,Array.isArray(window._EMDelayedErrorLogs))){const t={type:o.x4r,message:"QSP vs UserInfo mismatch",customMessage:`isSignedIn (QSP: ${s}, bridge: ${r}); accountType: ${i}`};window._EMDelayedErrorLogs.push(t)}(0,d.Mo)({...e,accountType:i,isSignedIn:r})}catch(t){f(t,"SapphireUserConfig.getUserInformationInternal: Failed to parse response")}}(),(0,d.s_)()??{}}catch(t){return(0,r.c_)(t,o.Zir,"getUserInfoAsyncFailed: Failed to retrieve user information",`Error message: ${t.message}`),{}}}();if(!Object.keys(n).length)return null;if(n.isSignedIn){if(!(e||!n.accessToken||n.accessTokenExpiresOn&&C(n.accessTokenExpiresOn)))return{token:n.accessToken};{if(!e&&"MSA"===n.accountType){const t=await b();if(t)return t}if(P)return null;if(!n.accountType){(0,r.vV)(o.y$v,"getAccessTokenByOAuth: Received empty accountType","Account type is missing in user information.");return f(new Error("received empty accountType"),"empty accountType"),null}let i;try{i=await u({refresh:!0,accountType:n.accountType,type:"AccessToken",scope:t})}catch(t){return(0,r.c_)(t,o.Zir,"getAccessTokenByOAuth: Failed to retrieve user info asynchronously",`Error message: ${t.message}`),null}try{const t=JSON.parse(i);if(!t||!1===t.succeed)return(t?.reason??"").includes("InteractionRequired")&&(P=!0),(0,r.vV)(o.cCu,"getAccessTokenByOAuth: Failed to retrieve access token",`Access token info: ${JSON.stringify(t)}`),null;if(t.succeed){if(t.expiresOn&&C(t.expiresOn))return(0,r.vV)(o.fhS,"getAccessTokenByOAuth: access token is expired",`Access token info: ${JSON.stringify(t)}`),null;const e=t.accessToken.startsWith("t=")?t.accessToken.substring(2):t.accessToken;e&&(0,d.Mo)({...n,accessToken:e});const i={token:e,expiresOn:t.expiresOn};return i.expiresOn&&("MSA"===n.accountType&&S(i),n.accessTokenExpiresOn=i.expiresOn),i}if(Object.keys(t).length>0){let e=Object.values(t).find(t=>t&&"boolean"!=typeof t&&"AAD"!==t)||null;return e&&(e=e.startsWith("t=")?e.substring(2):e,(0,d.Mo)({...n,accessToken:e})),{token:e}}}catch(t){(0,r.c_)(t,o.V77,"getAccessTokenByOAuth: Failed to parse access token",`Failed to parse ${n.accountType} access token`),f(t,`SapphireUserConfig.getAccessTokenByOAuth: Failed to parse ${n.accountType} access token`)}}}return!1!==n.isSignedIn&&(0,r.vV)(o.cCu,"getAccessTokenByOAuth: User is signed in but access token does not exist or is empty",`User information: ${JSON.stringify(n)}`),null}var M=n(77246);let _;async function E(t=!1,e=!1){if(void 0===_&&(_="edgeMobile"===s.T3?.AppType),_&&"bingHomepageMobile"!=a.Rb.ClientSettings.pagetype)return await async function(){const t={};t.SiteName="www.msn."+(s.T3?.IsChinaCompliance?"cn":"com");const e=await R(i.Vq);return e&&(t.Authorization="Bearer "+e.token),s.T3?.UserId&&s.T3?.CurrentRequestTargetScope?.pageExperiments?.includes("1s-r-user-qsp")&&(t.Muid=s.T3.UserId),t}();const n=await async function(t=!1,e=!1){const n={},s=t&&e;try{const t=await async function(t){const e=(0,d.cE)();if(!(0,M.S)()){const{accountType:t,ssrAccessToken:n}=e||{};return"AAD"===t&&n?`Bearer ${n}`:"MSA"===t&&n?n:null}const n=(0,d.s_)()??{};if(n.isSignedIn&&"AAD"===n.accountType){try{const t=await u({accountType:"AAD",type:"AccessToken",resource:"9ea1ad79-fdb6-4f9a-8bc3-2b70f96e34c7"}),e=JSON.parse(t);if(e.accessToken&&e.accessToken.length>0)return(0,d.Mo)({...n,accessToken:e.accessToken}),`Bearer ${e.accessToken}`;(0,r.vV)(o.bwM,`Sapphire.getAccessToken: AAD token request failed - ${JSON.stringify(e)}`)}catch(t){(0,r.vV)(o.cCu,"Sapphire.getAccessToken: Failed to get or parse AAD access token"),f(t,"SapphireUserConfig.getAccessToken: Failed to parse AAD access token")}return n?.accessToken?`Bearer ${n.accessToken}`:null}if(n.isSignedIn&&"MSA"===n.accountType){try{const e=await u({accountType:"MSA",type:"AccessToken",scope:t}),i=JSON.parse(e);if(i.succeed)return(0,d.Mo)({...n,accessToken:i.accessToken}),i.accessToken;(0,r.vV)(o.bwM,`Sapphire.getAccessToken: MSA token request failed - ${JSON.stringify(i)}`)}catch(t){(0,r.vV)(o.cCu,"Sapphire.getAccessToken: Failed to get or parse MSA access token."),f(t,"SapphireUserConfig.getAccessToken: Failed to parse MSA access token")}return n.accessToken}return null}(function(t){return t?i.im:i.Az}(s)),{accountType:e,isSignedIn:a}=(0,d.cE)()??{};if(!t)return a&&(n.needCookie=!0),n;s?n.Authorization=t:"MSA"===e?n.UserAuthToken=t:"AAD"===e&&(n.Authorization=t)}catch(t){(0,r.vV)(o.wxp,"Error occured while getting access token.")}return n}(t,e),{muid:c,accountType:l,anid:h}=(0,d.cE)()??{};return!(0,M.S)()&&"MSA"===l&&h&&(n.Cookie=`APP_ANON=A=${h};`),c&&(n.MUID=c),n}},65022:function(t,e,n){n.d(e,{UQC:function(){return iy},bBc:function(){return ny},xCs:function(){return ay},HqF:function(){return sy},mjF:function(){return ry},kbl:function(){return oy},aY_:function(){return cy},Tyw:function(){return uy},ZFX:function(){return Cs},ile:function(){return ks},aNS:function(){return gi},fwK:function(){return pu},Tp9:function(){return gu},adh:function(){return au},DHN:function(){return mu},zLA:function(){return du},sM5:function(){return uu},ACu:function(){return cu},_0l:function(){return Zn},PDj:function(){return Yn},Gq_:function(){return di},MxD:function(){return li},qdn:function(){return NT},ys:function(){return Xn},WLY:function(){return ri},cIK:function(){return ii},qvM:function(){return ui},SuG:function(){return ei},AIN:function(){return Y},nom:function(){return ll},Qhr:function(){return Dw},HDZ:function(){return Pi},OAF:function(){return Ri},gr2:function(){return Ii},ptZ:function(){return ns},uG3:function(){return Wo},ASD:function(){return es},vsI:function(){return ts},zWC:function(){return Ho},Urt:function(){return Go},PI7:function(){return zo},o9x:function(){return jo},FQt:function(){return is},mw7:function(){return Vo},mD0:function(){return qo},Me9:function(){return Yo},n5z:function(){return Ko},TwO:function(){return Zo},MkP:function(){return Xo},LwN:function(){return Qo},$Ck:function(){return Jo},QlG:function(){return os},HpO:function(){return rs},gsf:function(){return Rg},dIV:function(){return Gn},a7_:function(){return Jf},WDU:function(){return ap},G08:function(){return cp},yHB:function(){return up},Y7T:function(){return pp},nHy:function(){return hp},ztq:function(){return wp},D04:function(){return mp},tRj:function(){return dp},qDs:function(){return gp},JxG:function(){return fp},VZt:function(){return lp},Q33:function(){return yp},xnd:function(){return Xf},peh:function(){return Yf},Ez4:function(){return tp},gfd:function(){return ep},QBS:function(){return np},hdR:function(){return Zf},Gi4:function(){return op},zjD:function(){return No},wvT:function(){return oi},QfK:function(){return Af},Jwb:function(){return Eg},YGv:function(){return _g},Dad:function(){return Fg},cK1:function(){return Sk},UcN:function(){return Jw},Azd:function(){return xb},kBB:function(){return Ab},H77:function(){return fi},ZP0:function(){return As},UUo:function(){return $s},bap:function(){return Bd},$Vh:function(){return zd},Bk0:function(){return Hd},u_6:function(){return Vd},qYp:function(){return Ld},UsP:function(){return jd},cWV:function(){return Dd},Mue:function(){return Od},pOs:function(){return Nd},e1I:function(){return Ud},f9Q:function(){return Wd},QZG:function(){return rt},kOp:function(){return nt},lbM:function(){return ot},OZt:function(){return st},lZi:function(){return at},Bik:function(){return it},UwZ:function(){return ct},HN5:function(){return et},Kq6:function(){return ut},NTi:function(){return bw},jNl:function(){return vw},EeC:function(){return Ca},i$e:function(){return nr},j3i:function(){return or},n32:function(){return ir},EMc:function(){return rr},wvp:function(){return rb},F8b:function(){return cb},wJU:function(){return ab},Hmx:function(){return ib},$Nv:function(){return lb},bgL:function(){return ub},mXd:function(){return db},jQ7:function(){return hb},wEz:function(){return nb},eVs:function(){return ob},_JL:function(){return Nc},A2U:function(){return Oc},jnO:function(){return Fc},GNn:function(){return Lc},yV:function(){return Dc},PE0:function(){return sb},p96:function(){return RS},nDJ:function(){return MS},qh6:function(){return IS},Jb2:function(){return PS},_lp:function(){return $S},bLC:function(){return _S},xIZ:function(){return ES},yGR:function(){return Le},cy9:function(){return Nl},Ivt:function(){return Bl},bBS:function(){return Cl},rnL:function(){return US},bHM:function(){return BS},EYz:function(){return VS},$Us:function(){return WS},YcK:function(){return jS},KGt:function(){return zS},JVc:function(){return HS},lZ:function(){return ig},CsG:function(){return eg},OwW:function(){return rg},Xqb:function(){return tg},m5R:function(){return ng},IOA:function(){return Pb},Bl_:function(){return $C},zI3:function(){return IC},dc8:function(){return PC},nrk:function(){return AC},o4$:function(){return MC},XyC:function(){return RC},qP1:function(){return _C},xdH:function(){return Ee},MLm:function(){return De},HYs:function(){return _e},jPo:function(){return Fe},QZH:function(){return xf},Af4:function(){return Ue},vDy:function(){return Pw},E7x:function(){return Tw},q6p:function(){return xw},Re$:function(){return Mw},zDq:function(){return Iw},rZ0:function(){return Aw},vmx:function(){return $w},PSI:function(){return Rw},GWd:function(){return Ew},Y9e:function(){return Fw},Rpw:function(){return _w},UH4:function(){return I},VCm:function(){return ft},AC2:function(){return pt},lC3:function(){return dt},GEu:function(){return lt},B49:function(){return ht},djn:function(){return Ct},w0w:function(){return bt},Y1k:function(){return St},lVo:function(){return wt},k_z:function(){return vt},rIB:function(){return mT},S3d:function(){return IT},Ynm:function(){return PT},RUw:function(){return $T},CfG:function(){return AT},sq9:function(){return HT},pLV:function(){return TT},Nqo:function(){return kT},nan:function(){return xT},JWS:function(){return ki},aVy:function(){return Ai},s$M:function(){return xi},E45:function(){return Ti},KFp:function(){return $f},PbZ:function(){return CT},fze:function(){return bk},tpw:function(){return kk},KdH:function(){return pk},E2i:function(){return pv},SdS:function(){return fv},BgJ:function(){return gv},ceT:function(){return lv},_bc:function(){return dv},ztZ:function(){return hv},wIS:function(){return uv},XDZ:function(){return gk},d9_:function(){return yk},cvX:function(){return mk},DwE:function(){return wk},bLg:function(){return xr},CO2:function(){return as},JYg:function(){return ss},lXX:function(){return cs},iUO:function(){return us},Opc:function(){return fC},QsG:function(){return pC},a$P:function(){return vl},WqK:function(){return Jt},Kyk:function(){return Vn},o6d:function(){return fT},cnX:function(){return hT},Gmj:function(){return gT},v$_:function(){return vT},seI:function(){return pT},fhS:function(){return gb},x4r:function(){return fb},AQ$:function(){return Vg},dEQ:function(){return pn},wRX:function(){return rn},s2F:function(){return nn},C9e:function(){return ln},S6p:function(){return gn},m6M:function(){return fn},WOV:function(){return on},jLR:function(){return sn},zfD:function(){return hn},l7i:function(){return dn},t4m:function(){return cn},ig1:function(){return an},gpM:function(){return un},wVi:function(){return yT},Q1$:function(){return JS},DTP:function(){return QS},Pd_:function(){return zf},VNh:function(){return ds},d7h:function(){return wa},h6H:function(){return ur},gSt:function(){return ba},QAi:function(){return ya},DB3:function(){return va},ON9:function(){return Qs},g3e:function(){return lC},vJx:function(){return hC},P_C:function(){return tt},Bgb:function(){return Z},LcB:function(){return Pf},mAZ:function(){return If},_6x:function(){return ip},RnM:function(){return rp},Wrb:function(){return nv},qV8:function(){return iv},HaU:function(){return ov},YNh:function(){return sv},LCg:function(){return rv},To0:function(){return So},SdT:function(){return Co},QoC:function(){return Fo},QOe:function(){return Ao},tG1:function(){return $o},OFQ:function(){return _o},UmO:function(){return ko},sms:function(){return To},cXs:function(){return Be},qwf:function(){return Sp},DFL:function(){return kl},LTf:function(){return Bn},Uoi:function(){return Me},nOI:function(){return yl},YHC:function(){return Nn},OvD:function(){return cr},NVc:function(){return Se},FEs:function(){return Ie},yhg:function(){return Ce},JSM:function(){return pe},Ikd:function(){return si},n0j:function(){return qf},r_H:function(){return J},CgA:function(){return j},q6J:function(){return q},EtG:function(){return G},ufw:function(){return re},PzM:function(){return Wa},zZP:function(){return Ia},TJS:function(){return Ra},vnd:function(){return Pa},F3o:function(){return Zh},T4B:function(){return ef},vGW:function(){return tf},jKP:function(){return Kh},R$T:function(){return Yh},z2i:function(){return Xh},_gF:function(){return Na},kyM:function(){return Ba},IEz:function(){return La},OrI:function(){return Va},c98:function(){return Cf},UsN:function(){return FC},CYA:function(){return Fa},ok3:function(){return Oa},GPf:function(){return Da},$u$:function(){return xa},zSi:function(){return $a},vce:function(){return Aa},xco:function(){return Ua},vqE:function(){return Ma},TYe:function(){return Ea},TQI:function(){return _a},$6m:function(){return rf},ne8:function(){return sf},ver:function(){return of},VLN:function(){return Xv},RxE:function(){return ev},hic:function(){return tv},abW:function(){return bl},qn3:function(){return Il},z1p:function(){return AS},hAd:function(){return $l},CGD:function(){return Tl},ksK:function(){return Sl},Jd2:function(){return xl},LPv:function(){return qd},Fs0:function(){return Gd},x7V:function(){return Jd},iYT:function(){return Kd},$JZ:function(){return Qd},L_w:function(){return Xd},Az4:function(){return Yd},O01:function(){return Qy},GfB:function(){return Zy},weh:function(){return Yy},$te:function(){return Ky},IUP:function(){return Xy},BDE:function(){return Pe},l6z:function(){return Xw},O2z:function(){return Qw},z7v:function(){return Gw},lqW:function(){return Kw},Wyl:function(){return tu},Qnp:function(){return On},tD3:function(){return Kn},y0q:function(){return Fn},ic_:function(){return Dn},zML:function(){return Un},TYv:function(){return Hn},PTf:function(){return zn},_3Z:function(){return qn},mbj:function(){return jn},Fa2:function(){return Wn},K8O:function(){return Bs},n9w:function(){return Ns},KwS:function(){return Ls},fS0:function(){return ml},cDn:function(){return _i},dyB:function(){return Ei},kSJ:function(){return il},wZh:function(){return nl},TPS:function(){return ol},xUP:function(){return rl},NpW:function(){return dl},cjm:function(){return al},dXd:function(){return cl},QlV:function(){return sl},NG5:function(){return ul},eMt:function(){return mC},ZOT:function(){return wC},JlB:function(){return dy},Om4:function(){return ly},qQs:function(){return UC},yK8:function(){return WC},VX6:function(){return _l},kRb:function(){return Pl},Yh1:function(){return Rl},yTG:function(){return Ml},icq:function(){return vk},BNF:function(){return Ck},YKQ:function(){return iT},Ztd:function(){return wi},WsM:function(){return yi},IKI:function(){return kp},zfe:function(){return oS},hm6:function(){return z},tAV:function(){return bS},YJH:function(){return yS},UnU:function(){return wS},fa5:function(){return CS},D4l:function(){return vS},cAT:function(){return SS},TZZ:function(){return fe},lr4:function(){return he},g07:function(){return ee},llR:function(){return xe},hhL:function(){return $e},yus:function(){return ue},oXD:function(){return de},EgB:function(){return le},NO3:function(){return me},_xy:function(){return Yt},mRv:function(){return Te},Yd6:function(){return Zt},RCZ:function(){return oe},r1G:function(){return ce},LQS:function(){return se},H8T:function(){return ie},QGc:function(){return Xt},_NJ:function(){return Qt},T38:function(){return Kt},KWo:function(){return te},KH4:function(){return ae},PXf:function(){return ne},Epe:function(){return Ae},ytL:function(){return ve},bwM:function(){return eb},eN3:function(){return vi},pwC:function(){return pi},Iig:function(){return yt},J$q:function(){return LC},BKY:function(){return Qn},m7c:function(){return sp},X8D:function(){return Wf},oEU:function(){return Hf},WQo:function(){return Vf},Ma1:function(){return Fl},ZO$:function(){return Dl},PAg:function(){return Ol},z_N:function(){return wr},i8B:function(){return fl},bMt:function(){return hl},VOd:function(){return af},NB9:function(){return MT},crR:function(){return We},R5F:function(){return Oe},B0t:function(){return Ne},hPD:function(){return yg},xCk:function(){return Tk},JvU:function(){return xk},gQ_:function(){return GT},GZv:function(){return ma},F6z:function(){return iS},rGp:function(){return Nb},sDt:function(){return Ob},NHc:function(){return qS},QXg:function(){return GS},vqP:function(){return Ll},f12:function(){return Hw},XcU:function(){return Vw},Lln:function(){return X},kjR:function(){return K},Sjf:function(){return ok},WlW:function(){return BC},QAk:function(){return wl},IYc:function(){return bi},jyZ:function(){return rT},KT2:function(){return hk},ukq:function(){return Bt},hyX:function(){return Ut},yoW:function(){return uk},W8g:function(){return ck},L36:function(){return sk},G1W:function(){return ak},zhT:function(){return Wt},B8p:function(){return mn},A0k:function(){return yn},MpT:function(){return wn},mi4:function(){return vn},Ozz:function(){return bn},EGl:function(){return Tn},vyN:function(){return Sn},eI8:function(){return Cn},ne$:function(){return kn},kwH:function(){return YS},nB:function(){return ZS},lCZ:function(){return KS},f9i:function(){return tC},XK_:function(){return B},npu:function(){return Lp},w6o:function(){return Jp},u6V:function(){return Vp},r_l:function(){return Dp},V8E:function(){return Np},Bof:function(){return Qp},ZUy:function(){return Wp},Ahq:function(){return Yp},PBN:function(){return dg},IZh:function(){return Bp},pV8:function(){return hg},YlL:function(){return Up},zbv:function(){return lg},$B_:function(){return jp},ygO:function(){return zp},GGk:function(){return sg},trI:function(){return Kp},b1m:function(){return Gp},ycZ:function(){return Op},v60:function(){return Hp},u6T:function(){return Xp},QIV:function(){return qp},iVk:function(){return ag},_07:function(){return ug},IfH:function(){return fg},SDt:function(){return pg},PTu:function(){return qk},SzM:function(){return Ok},fk2:function(){return _k},T$A:function(){return nT},xjR:function(){return Dk},YwJ:function(){return Ak},HAH:function(){return Hk},$gI:function(){return Xk},rI4:function(){return Lk},_bC:function(){return Qk},rru:function(){return Pk},JxL:function(){return Rk},WyS:function(){return $k},dR1:function(){return Ik},cKj:function(){return Mk},lfg:function(){return Vk},Nnl:function(){return Wk},pSc:function(){return Zk},YPx:function(){return Kk},Mfz:function(){return Yk},ziL:function(){return Bk},R53:function(){return Fk},fN6:function(){return jk},I7f:function(){return Uk},gf5:function(){return Nk},K9N:function(){return zk},PPI:function(){return Ek},Vrx:function(){return eT},O3F:function(){return Yv},cgf:function(){return LT},i1G:function(){return ai},nxh:function(){return ni},$2y:function(){return JC},o1l:function(){return En},fnC:function(){return xn},VQr:function(){return hi},tBu:function(){return QC},GTE:function(){return GC},E7N:function(){return qC},WQp:function(){return ti},hYJ:function(){return Rn},Ivu:function(){return Mn},BEl:function(){return An},fGC:function(){return In},ikd:function(){return $n},inK:function(){return Pn},TqQ:function(){return _n},C8f:function(){return ci},MxK:function(){return xS},Hu3:function(){return TS},zrw:function(){return kS},qSe:function(){return hw},mVb:function(){return kt},Xag:function(){return lr},_Y1:function(){return hr},HRt:function(){return fr},Qh3:function(){return pr},fU:function(){return mr},C1u:function(){return gr},P1Y:function(){return Zp},hWz:function(){return Uv},tqL:function(){return kd},cZD:function(){return Cd},r6S:function(){return Sd},tH8:function(){return mS},mSk:function(){return Ag},qo_:function(){return $g},upN:function(){return Tg},aYH:function(){return xg},$M1:function(){return Ig},Vmu:function(){return Sg},tHb:function(){return Pg},T81:function(){return kg},ZtV:function(){return Cg},QPw:function(){return bg},Ffm:function(){return Cb},bV3:function(){return Sb},wHQ:function(){return bb},May:function(){return yb},Jjk:function(){return vb},DQR:function(){return kb},N5T:function(){return Tb},TPN:function(){return xs},QPc:function(){return Ts},RJK:function(){return qy},pNg:function(){return ST},aDz:function(){return Hy},Xz3:function(){return jy},HEo:function(){return Jy},bkZ:function(){return Gy},Xtg:function(){return zy},z_2:function(){return ta},AwO:function(){return ea},NhE:function(){return Ys},p1T:function(){return Zs},lLY:function(){return Gs},Qfn:function(){return Js},RQB:function(){return Ul},uyY:function(){return b},xw8:function(){return C},Bx$:function(){return T},z9c:function(){return k},auz:function(){return A},zqw:function(){return v},TOE:function(){return S},oxQ:function(){return x},fTG:function(){return $},CPX:function(){return Pc},tF9:function(){return Mc},KxB:function(){return Ic},vD4:function(){return _c},OZP:function(){return Rc},HWF:function(){return gt},AnY:function(){return mt},VsV:function(){return H},xqF:function(){return wf},bk4:function(){return Tr},CUJ:function(){return Zv},G1m:function(){return Jn},V9L:function(){return Xe},Lt_:function(){return Ye},YEW:function(){return Ze},o6N:function(){return tn},d2O:function(){return qe},UzJ:function(){return Ge},bl5:function(){return Je},por:function(){return je},WxD:function(){return en},uRh:function(){return Qe},Wg2:function(){return Ke},g5U:function(){return Q},pUO:function(){return $d},vd4:function(){return Rd},Syp:function(){return Td},NVY:function(){return Ad},huQ:function(){return Id},r0p:function(){return xd},W5k:function(){return Pd},S6g:function(){return Ps},FK$:function(){return Ms},ExE:function(){return Is},xrv:function(){return Rs},kvG:function(){return Ws},zFb:function(){return Hs},Snd:function(){return zs},uVD:function(){return Os},doX:function(){return Us},kKm:function(){return Vs},v_x:function(){return Ds},UDQ:function(){return Es},u1d:function(){return _s},lwg:function(){return Fs},muh:function(){return Lb},l44:function(){return Qb},Cm:function(){return Wb},F5s:function(){return Bb},Qy5:function(){return Ub},SK2:function(){return Xb},Bsc:function(){return Zb},feh:function(){return Kb},hjY:function(){return Yb},HA5:function(){return Hb},uKk:function(){return jb},jmV:function(){return Vb},aUL:function(){return Jb},lXi:function(){return qb},iRJ:function(){return zb},$u8:function(){return Gb},QZE:function(){return tS},dmk:function(){return Jk},YEX:function(){return tl},JSE:function(){return el},d_q:function(){return Zd},mS4:function(){return ke},H6Q:function(){return Mg},Ffx:function(){return Ib},GSz:function(){return ro},cxK:function(){return Mo},Mcc:function(){return Ro},yJQ:function(){return io},xVU:function(){return Oo},d4I:function(){return oo},rs0:function(){return Po},lL9:function(){return Lo},Dje:function(){return Bo},mqA:function(){return Uo},zBI:function(){return Qm},wL_:function(){return Km},AbT:function(){return cw},nPW:function(){return we},WwE:function(){return cv},iO_:function(){return av},bxT:function(){return Nw},KpS:function(){return ye},vJB:function(){return js},hvL:function(){return qs},Gvl:function(){return Fb},pfw:function(){return Db},fKW:function(){return Ch},TQ$:function(){return kh},BeD:function(){return kC},xbh:function(){return TC},F9C:function(){return xC},_7:function(){return uf},k_$:function(){return df},a2L:function(){return zw},PfM:function(){return jw},fnS:function(){return XS},SF3:function(){return El},JLI:function(){return cS},Okb:function(){return uS},qog:function(){return aS},ymo:function(){return Et},zV8:function(){return Mt},VSj:function(){return It},mks:function(){return Pt},M5I:function(){return Rt},U0N:function(){return Ft},J1$:function(){return Nt},E7O:function(){return _t},u0w:function(){return Ot},sDU:function(){return Dt},Y5W:function(){return Lt},H6o:function(){return _p},HRN:function(){return Fp},gpE:function(){return xp},Qq_:function(){return Tp},XDX:function(){return Ap},q9p:function(){return $p},Pho:function(){return Rp},mEX:function(){return Pp},WYB:function(){return Mp},D6U:function(){return Ep},KPK:function(){return Uw},MtZ:function(){return mi},qaz:function(){return wu},FXl:function(){return wT},GdJ:function(){return UT},O2D:function(){return WT},w0y:function(){return ty},jb:function(){return Zw},Gp$:function(){return ey},T62:function(){return Gk},S8B:function(){return tT},H3C:function(){return Yw},_uC:function(){return oT},WEY:function(){return Fh},DrH:function(){return Dh},uBi:function(){return Eh},hC4:function(){return Oh},nyv:function(){return _h},BL9:function(){return ms},b9w:function(){return bs},pHQ:function(){return ws},hF2:function(){return gs},BZ4:function(){return Ar},DeH:function(){return ps},ZuI:function(){return ls},rbF:function(){return hs},X5D:function(){return fs},ejj:function(){return Ss},T1W:function(){return ys},YTd:function(){return vs},cPt:function(){return VT},o29:function(){return gf},eb7:function(){return yu},EVF:function(){return be},tDC:function(){return EC},Vy1:function(){return Xi},u5P:function(){return qi},$n:function(){return Gi},hfI:function(){return Qi},NNm:function(){return Yi},KLj:function(){return Ki},dDC:function(){return Ji},ehW:function(){return gS},QFX:function(){return Th},fIj:function(){return Ph},oOL:function(){return Rh},b6v:function(){return xh},kwp:function(){return Mh},byY:function(){return Ih},T0u:function(){return $h},EuX:function(){return Ah},d7X:function(){return pS},QHO:function(){return Sf},AWs:function(){return fS},nGT:function(){return kf},yAh:function(){return Tt},$ab:function(){return gl},d9t:function(){return V},JLo:function(){return U},Xnf:function(){return W},gSu:function(){return nf},V4H:function(){return Fy},Rs1:function(){return Ly},XkM:function(){return By},NVb:function(){return Oy},XbI:function(){return Ny},JL_:function(){return Dy},AVg:function(){return Ey},w$_:function(){return Wy},hkw:function(){return Uy},M5X:function(){return Vy},$e1:function(){return Of},PQn:function(){return ff},Xj2:function(){return lf},zHP:function(){return hf},ajd:function(){return Ks},TpA:function(){return Xs},v47:function(){return Wi},D6P:function(){return Ui},WTc:function(){return nS},StB:function(){return eS},d78:function(){return gC},H44:function(){return ar},o8A:function(){return Bg},Odo:function(){return Bi},NiT:function(){return HC},Fjq:function(){return Di},xkP:function(){return Fi},c7V:function(){return Ni},dMO:function(){return Oi},ECJ:function(){return Li},IG9:function(){return VC},_sn:function(){return sr},Wbw:function(){return mb},v9g:function(){return Ug},q4D:function(){return Wg},y$I:function(){return Ng},MnR:function(){return Lg},Yv0:function(){return Og},Qje:function(){return Dg},VZn:function(){return zC},UMt:function(){return wb},WaH:function(){return jC},ISx:function(){return YC},H4J:function(){return KC},KpV:function(){return XC},ufo:function(){return ZC},OUO:function(){return tk},$$G:function(){return Ga},NPP:function(){return ac},Z1s:function(){return fc},aKE:function(){return pc},vpF:function(){return qa},h3O:function(){return lc},jjJ:function(){return hc},Sd6:function(){return uc},_oM:function(){return rc},t$8:function(){return wc},LsK:function(){return oc},q8y:function(){return Xa},_F6:function(){return cc},aNj:function(){return Qa},c0M:function(){return sc},oCh:function(){return nc},T0U:function(){return Za},eyV:function(){return Ya},aJi:function(){return dc},VKJ:function(){return Ka},G_w:function(){return ec},oFo:function(){return ic},p_3:function(){return tc},Y2P:function(){return mc},tWP:function(){return gc},_Rq:function(){return vc},p2F:function(){return yc},tb_:function(){return ja},bxt:function(){return Ja},jZN:function(){return Sc},mEY:function(){return bc},YzD:function(){return Ha},ugc:function(){return Bf},Ghz:function(){return Nf},tdA:function(){return Lf},M6r:function(){return Uf},vGm:function(){return za},_i:function(){return uC},FKe:function(){return aC},NT7:function(){return cC},CF0:function(){return dC},MYT:function(){return L},Air:function(){return Nu},bV9:function(){return nd},P8$:function(){return td},Ax6:function(){return Zu},s8u:function(){return id},tDy:function(){return sd},mgw:function(){return rd},haX:function(){return Cv},jX7:function(){return Dv},mx1:function(){return ju},QjV:function(){return zu},HWy:function(){return Yu},Guj:function(){return Gu},s6q:function(){return Xu},PY2:function(){return Ku},njN:function(){return Ju},M58:function(){return od},Fw6:function(){return ed},Y0P:function(){return qu},Nf7:function(){return Qu},pVA:function(){return Hu},lbz:function(){return Lu},R_t:function(){return Bu},sIL:function(){return Du},r4$:function(){return Fu},vy$:function(){return Uu},QkA:function(){return Ou},MX7:function(){return Wu},ONV:function(){return Vu},r6X:function(){return cg},EfP:function(){return Lv},khl:function(){return Bv},rQn:function(){return NC},Y_G:function(){return fd},Xqh:function(){return yd},jR4:function(){return bd},x1J:function(){return ad},J2L:function(){return cd},KLz:function(){return ld},zVM:function(){return dd},TEk:function(){return hd},YJI:function(){return vd},hqB:function(){return ud},dSi:function(){return gd},lPv:function(){return wd},KbD:function(){return pd},Ba9:function(){return mv},PWr:function(){return Mv},YXi:function(){return _v},BYQ:function(){return Ev},qyQ:function(){return kv},hsv:function(){return Tv},Mp5:function(){return xv},Zuk:function(){return $v},i4G:function(){return Av},MnK:function(){return Iv},vYK:function(){return Fv},s23:function(){return Rv},rKF:function(){return Pv},Z9n:function(){return Sv},AM8:function(){return vv},ZTI:function(){return bv},a_g:function(){return yv},D13:function(){return wv},BfS:function(){return Ov},K0b:function(){return Nv},D8P:function(){return md},QO2:function(){return LS},$F5:function(){return bT},sTv:function(){return dS},wEP:function(){return hS},GtS:function(){return lS},M0z:function(){return lw},L61:function(){return cf},tY5:function(){return og},vYE:function(){return fk},O2G:function(){return Gf},u0g:function(){return Fd},YUK:function(){return _d},LFJ:function(){return Md},OuN:function(){return Ed},WZp:function(){return Mr},wxp:function(){return jt},pen:function(){return rS},ubn:function(){return pf},Ayc:function(){return sw},P75:function(){return lm},pHh:function(){return pm},m3I:function(){return ow},HjP:function(){return Hg},PU3:function(){return Yg},Ov9:function(){return qm},F8Z:function(){return em},ABd:function(){return Tm},Z1_:function(){return $m},FmL:function(){return rm},O_4:function(){return xm},GdV:function(){return zm},mgZ:function(){return hm},ODw:function(){return Lw},JQU:function(){return Bm},vq$:function(){return Vm},V$N:function(){return Wm},fHH:function(){return Im},$UT:function(){return Pm},vJN:function(){return Um},pQh:function(){return Rm},acy:function(){return ym},IKV:function(){return Om},NRf:function(){return Dm},LRf:function(){return mm},oup:function(){return _m},y09:function(){return Mm},aSm:function(){return wm},f6:function(){return Zm},SXF:function(){return Fm},Bz_:function(){return Em},gCQ:function(){return Nm},qlj:function(){return Lm},nJZ:function(){return Ym},IBt:function(){return gm},bHU:function(){return Zg},ZLG:function(){return Jg},Rhq:function(){return Gg},Lvw:function(){return Qg},DIe:function(){return Kg},fyC:function(){return Jm},naH:function(){return om},xHX:function(){return fm},eik:function(){return bm},q9J:function(){return Sm},JN:function(){return Cm},I8Q:function(){return zg},Cpl:function(){return Bw},tFD:function(){return Gm},Deh:function(){return tw},jwY:function(){return nm},sFb:function(){return dm},N84:function(){return jm},Db6:function(){return vm},cwh:function(){return sm},TBj:function(){return uw},agw:function(){return Am},iv3:function(){return kw},isL:function(){return cm},ijP:function(){return Hm},qNq:function(){return am},yTZ:function(){return um},ESk:function(){return ew},YeZ:function(){return nw},rIz:function(){return jg},Cdh:function(){return qg},Ej7:function(){return Xm},pn9:function(){return im},dis:function(){return rw},Tuh:function(){return Cw},t9r:function(){return tm},Mwi:function(){return km},xCv:function(){return yw},mue:function(){return iw},Obl:function(){return Xg},N2u:function(){return qw},hbk:function(){return ka},e4F:function(){return Ta},GHx:function(){return Wh},LnQ:function(){return Lh},WRP:function(){return Nh},RhI:function(){return Bh},M_r:function(){return Vh},YOq:function(){return Uh},rH9:function(){return qh},XAs:function(){return zh},V$E:function(){return Hh},_el:function(){return Qh},Z5n:function(){return Gh},ULP:function(){return Jh},lj4:function(){return jh},vkh:function(){return FS},jWv:function(){return dT},TT_:function(){return cT},ATb:function(){return uT},thp:function(){return lT},noR:function(){return aT},FE0:function(){return sT},eFv:function(){return m},TUW:function(){return g},JN4:function(){return p},FeD:function(){return f},b04:function(){return y},N1:function(){return w},_f3:function(){return Zi},s5R:function(){return tr},Nm$:function(){return er},TRi:function(){return Ow},XrR:function(){return Re},WR_:function(){return ge},I$6:function(){return Hc},tBT:function(){return qc},hij:function(){return iu},eOr:function(){return Gc},ZVM:function(){return Jc},P6K:function(){return Kc},Bks:function(){return Uc},kiL:function(){return Wc},a1u:function(){return su},ZJT:function(){return jc},HWh:function(){return eu},hvw:function(){return ru},yOe:function(){return ou},e7T:function(){return Qc},tk5:function(){return nu},hbg:function(){return ek},jGQ:function(){return rk},$pp:function(){return ik},dfM:function(){return nk},tnj:function(){return OC},VFl:function(){return Vc},Hz$:function(){return Bc},jN:function(){return zc},AEE:function(){return tb},jxT:function(){return Zc},mN8:function(){return Yc},Qlm:function(){return Xc},OV:function(){return vp},J2j:function(){return hy},Hq:function(){return Iy},ndc:function(){return $y},bY0:function(){return Py},Bzz:function(){return vy},tZR:function(){return yy},eVm:function(){return py},NlC:function(){return ky},bAc:function(){return fy},HTy:function(){return Sy},ajg:function(){return Ty},mhE:function(){return _y},CDp:function(){return wy},ZM1:function(){return gy},OzB:function(){return Ry},Mpy:function(){return Cy},xHK:function(){return by},ke$:function(){return My},JRy:function(){return xy},XVX:function(){return my},kzh:function(){return Ay},il2:function(){return bp},Rzg:function(){return OT},g5x:function(){return _b},t1_:function(){return Eb},jwE:function(){return Mb},_SJ:function(){return ze},pkK:function(){return Ve},SgR:function(){return He},Z2S:function(){return sC},NRk:function(){return oC},JhR:function(){return rC},KSf:function(){return eC},Jqm:function(){return Al},Ucx:function(){return jT},r4U:function(){return iC},Fwv:function(){return nC},oPR:function(){return Sa},kZg:function(){return mg},HBg:function(){return gg},cSA:function(){return RT},Ox9:function(){return DT},WjD:function(){return FT},zlq:function(){return _T},UfE:function(){return ET},Rk$:function(){return Cc},Ys5:function(){return Rb},MBe:function(){return wg},Uti:function(){return hu},wGx:function(){return fu},N$p:function(){return lu},r_M:function(){return vg},QQG:function(){return Ln},d_w:function(){return Qf},cke:function(){return Kf},FPh:function(){return sS},zWZ:function(){return qt},yc5:function(){return Gt},yLU:function(){return Eu},csj:function(){return Au},kTg:function(){return Pu},fX9:function(){return bu},p6h:function(){return $u},JR:function(){return vu},TmI:function(){return Cu},mTR:function(){return Ru},JuQ:function(){return Mu},u39:function(){return Su},Zdj:function(){return Tu},oO$:function(){return Iu},fbJ:function(){return ku},A0q:function(){return _u},g3N:function(){return xu},ANf:function(){return $t},u0X:function(){return At},ImC:function(){return xt},Rvj:function(){return Ec},N61:function(){return Cr},Fdr:function(){return kr},dDt:function(){return BT},zY:function(){return Tf},kyo:function(){return mw},YfR:function(){return fw},khp:function(){return dw},L$h:function(){return gw},AX3:function(){return pw},EgO:function(){return aw},rZC:function(){return ww},aIL:function(){return Sw},bGx:function(){return jf},_kG:function(){return N},QF4:function(){return Or},VBB:function(){return Wr},YDP:function(){return SC},ooP:function(){return Kr},adl:function(){return Ur},QRs:function(){return Rr},Jaj:function(){return bC},am7:function(){return Vr},Gv7:function(){return Gr},gB:function(){return Jr},QzP:function(){return mf},IRE:function(){return zr},XSb:function(){return Zr},vZ_:function(){return Ir},I92:function(){return yC},I7:function(){return vC},wDb:function(){return DC},nVy:function(){return DS},lI:function(){return OS},IO:function(){return F},Va3:function(){return R},Ggx:function(){return Br},p4_:function(){return Fr},QxS:function(){return Nr},CRO:function(){return Xr},azY:function(){return Yr},pZQ:function(){return Qr},n1j:function(){return vf},zfX:function(){return NS},iBX:function(){return Lr},Lc2:function(){return E},yeQ:function(){return _},E9G:function(){return M},Z9U:function(){return D},HyQ:function(){return Pr},x_r:function(){return yf},tPd:function(){return P},bJE:function(){return to},f9r:function(){return Er},bjD:function(){return _r},Ljz:function(){return O},YfN:function(){return qr},NQ7:function(){return $r},YLz:function(){return Dr},z_l:function(){return CC},dvE:function(){return jr},Sdo:function(){return Hr},R94:function(){return no},zdY:function(){return eo},oXQ:function(){return bf},uDq:function(){return yr},fo8:function(){return Sr},Xf:function(){return br},HxO:function(){return vr},J$b:function(){return Ff},jeG:function(){return Rf},NWl:function(){return Ef},tou:function(){return Mf},L4S:function(){return _f},KN:function(){return Df},V8S:function(){return Cp},Y$i:function(){return pl},LUz:function(){return xo},DYU:function(){return Ww},wDo:function(){return $b},KuI:function(){return xc},p_N:function(){return Tc},kjK:function(){return $c},$GJ:function(){return kc},QY0:function(){return Ac},Y3F:function(){return vo},YOy:function(){return fo},YzV:function(){return ao},A04:function(){return yo},sl_:function(){return mo},S6Q:function(){return lo},TWH:function(){return wo},F0B:function(){return Ip},Ylx:function(){return Eo},T7w:function(){return uo},yji:function(){return go},S_y:function(){return po},Hi3:function(){return ho},WaV:function(){return co},QqZ:function(){return bo},Jyo:function(){return zi},k7V:function(){return ji},KT4:function(){return Hi},s2B:function(){return Wv},Qao:function(){return so},$hk:function(){return $i},yrQ:function(){return Io},wi4:function(){return Do},sWn:function(){return ph},O7A:function(){return fh},tRb:function(){return Sh},PWH:function(){return bh},Gc0:function(){return mh},jNX:function(){return hh},wsO:function(){return ah},bqh:function(){return oh},TwZ:function(){return Vl},OLu:function(){return gh},Amp:function(){return Wl},Dhq:function(){return dh},GtY:function(){return Yl},xlx:function(){return Zl},o2X:function(){return zl},BTk:function(){return th},ah_:function(){return jl},iXH:function(){return sh},Ffs:function(){return rh},YTQ:function(){return eh},mky:function(){return wh},v0W:function(){return Hl},TBf:function(){return yh},T8$:function(){return lh},faL:function(){return vh},JK9:function(){return ql},F2m:function(){return Ql},rWX:function(){return Xl},ckq:function(){return ch},mbM:function(){return uh},T4e:function(){return nh},M_y:function(){return ih},PUH:function(){return Jl},Upu:function(){return Kl},$3R:function(){return Gl},b5B:function(){return ha},rSI:function(){return na},nwt:function(){return ga},KVr:function(){return pa},DdZ:function(){return ia},qcK:function(){return la},wzS:function(){return ua},q_v:function(){return sa},Aio:function(){return da},AxD:function(){return fa},_$C:function(){return ca},Yhr:function(){return aa},De:function(){return zT},SdJ:function(){return ra},vLE:function(){return oa},zwc:function(){return lk},R1m:function(){return dk},Bhy:function(){return dr},ic4:function(){return qT},V77:function(){return pb},Ukt:function(){return d},Zir:function(){return Ht},V_P:function(){return Mi},cCu:function(){return Vt},y$v:function(){return zt},ao8:function(){return Jv},o6X:function(){return Hv},BZI:function(){return Vv},YJY:function(){return Kv},X1L:function(){return Qv},MLR:function(){return qv},yHp:function(){return Gv},Ikj:function(){return zv},bCS:function(){return jv},Y_s:function(){return Si},M6N:function(){return Ci},RWs:function(){return u}});var i=n(36417);const r=i.A.Alert,o=i.A.Deprecated,s=i.A.HighImpact,a=i.A.Critical,c=(i.B.Fallback,i.B.Exceptional,{build:""});function u(t){Object.assign(c,t)}function d(){return c}function l(t,e=i.A.Alert,n,r,o){const s={id:t,severity:e,pb:void 0===n?c:n};return void 0!==r&&(s.message=r),void 0!==o&&(s.source=o),s}function h(t,e){return{build:"",userImpacting:t,errorBehavior:e}}const f=l(8017),p=l(8018),g=l(8021),m=l(8022),w=l(8027),y=l(8028),v=l(8029),b=l(8030),S=l(8031,s),C=l(8032,s),k=l(8033,s),T=l(8034),x=l(8035),A=l(8036),$=l(8037),I=l(8047),P=l(8100,s,h(!0)),R=l(8101,o),M=l(8102,o),_=l(8103,r,h(!0)),E=l(8104,r,h(!0)),F=l(8105,o),D=l(8107,o),O=l(8108,r,h(!0)),N=l(8109,o),L=l(8126),B=l(8137),U=l(8190),W=l(8191),V=l(8192),H=l(8203),z=l(8204),j=l(8222),q=l(8223),G=l(8225),J=l(8226),Q=l(8230),K=l(8260,o),X=l(8261,s),Y=l(8350),Z=l(8380),tt=l(8381),et=l(8601),nt=l(8602),it=l(8603),rt=l(8604),ot=l(8605),st=l(8606),at=l(8607),ct=l(8608,o),ut=l(8611),dt=l(8810,s),lt=l(8811,s),ht=l(8812,s),ft=l(8813,s),pt=l(8814,s),gt=l(8815,a,c,"Cookie Banner Element is missing"),mt=l(8817,o,c,"Fixed TCF string in US locale failed"),wt=l(8841,s),yt=l(8842,a),vt=l(8843),bt=l(8844),St=l(8845,a),Ct=l(8846,a),kt=l(8847),Tt=l(8848,s),xt=l(9035),At=l(9036),$t=l(9055),It=l(9425),Pt=l(9426),Rt=l(9427),Mt=l(9428),_t=l(9429),Et=l(9430),Ft=l(9431),Dt=l(9432),Ot=l(9433),Nt=l(9434),Lt=l(9437),Bt=l(9734),Ut=l(9735),Wt=l(9781),Vt=l(9787,o),Ht=l(9789,o),zt=l(9790,o),jt=l(9798),qt=l(9904),Gt=l(9906),Jt=l(11103),Qt=l(13e3),Kt=l(13001),Xt=l(13100),Yt=l(13101),Zt=l(13102),te=l(13103),ee=l(13104),ne=l(13105),ie=l(13108),re=l(13109),oe=l(13110),se=l(13114),ae=l(13115),ce=l(13116),ue=l(13117),de=l(13119),le=l(13120),he=l(13121),fe=l(13122,s),pe=l(13125),ge=l(13126),me=l(13127),we=l(13128),ye=l(13129),ve=l(13131),be=l(13132),Se=l(13133),Ce=l(13134),ke=l(13135),Te=l(13136),xe=l(13137),Ae=l(13138),$e=l(13140),Ie=l(13141),Pe=l(13142),Re=l(13143,o),Me=l(13144),_e=l(14e3),Ee=l(14001),Fe=l(14003),De=l(14004),Oe=l(14006),Ne=l(14007),Le=l(14008),Be=l(14100,s),Ue=l(14101),We=l(14102),Ve=l(15410),He=l(15411),ze=l(15412,o),je=l(18100),qe=l(18103),Ge=l(18104),Je=l(18105),Qe=l(18106),Ke=l(18107),Xe=l(18108),Ye=l(18109),Ze=l(18110),tn=l(18111),en=l(18113),nn=l(19e3),rn=l(19001),on=l(19004,a,h(!0)),sn=l(19006),an=l(19010),cn=l(19013),un=l(19014),dn=l(19016),ln=l(19019),hn=l(19021),fn=l(19023),pn=l(19024),gn=l(19025),mn=l(20007,o),wn=l(20008),yn=l(20009),vn=l(20018),bn=l(20066),Sn=l(20068),Cn=(i.A.Deprecated,l(20074)),kn=l(20082,o),Tn=l(20088),xn=l(20139),An=l(20140),$n=l(20141),In=l(20142),Pn=l(20143),Rn=l(20144),Mn=l(20220),_n=l(21100),En=l(20138),Fn=l(20150),Dn=l(20151),On=l(20152),Nn=l(20153),Ln=l(20168),Bn=l(20169),Un=l(20165),Wn=l(20166),Vn=l(20167),Hn=l(20154),zn=l(20155),jn=l(20156),qn=l(20157),Gn=l(20158),Jn=l(20159),Qn=l(20162,s),Kn=l(20164),Xn=l(20171),Yn=l(20172),Zn=l(20173),ti=l(20174),ei=l(20175),ni=l(20176),ii=l(20177),ri=l(20178),oi=l(20179),si=l(20180),ai=l(20223,s),ci=l(20224),ui=l(20181),di=l(20182),li=l(20184),hi=l(20186),fi=l(20188),pi=l(20189),gi=l(20190,o),mi=l(20191,o),wi=l(20194,s),yi=l(20195,s),vi=l(20196),bi=l(20197),Si=l(20198),Ci=l(20199),ki=l(20204,o),Ti=l(20205,o),xi=l(20209,o,c,"Service request failed all retries"),Ai=l(20210,o,c,"1S request (assets.msn.*) failed. Retrying using backup domain (assets2.msn.*)"),$i=l(20222),Ii=l(20302),Pi=l(20303),Ri=l(20304),Mi=l(21015),_i=l(22029,a),Ei=l(22030,a),Fi=(i.A.Deprecated,l(24520)),Di=l(24521),Oi=l(24522),Ni=l(24523),Li=l(24524),Bi=l(24526),Ui=l(24573),Wi=l(24574),Vi="WindowsShellAccountManager.connector.ts",Hi=l(24580,o,c,void 0,Vi),zi=l(24583,r,c,void 0,Vi),ji=l(24584),qi=l(24601),Gi=l(24602),Ji=l(24603),Qi=l(24606),Ki=l(24607),Xi=l(24608),Yi=l(24609),Zi=l(24611),tr=l(24612),er=l(24613),nr=l(28100,o),ir=l(28101),rr=l(28102),or=l(28103),sr=l(28110),ar=l(28111),cr=l(28213,o),ur=l(28216),dr=l(28217),lr=l(28410),hr=l(28411,o),fr=l(28414),pr=l(28415),gr=l(28420),mr=l(28421),wr=l(28500),yr=l(29e3),vr=l(29001),br=l(29002,o),Sr=l(29003),Cr=l(29100,s),kr=l(29101),Tr=l(29102),xr=l(29103),Ar=l(29105,o),$r=l(29499,a,h(!0)),Ir=l(29503,o),Pr=l(29507,r,h(!0)),Rr=l(29508,r,h(!0)),Mr=l(29526,r,h(!0)),_r=l(29530,o),Er=l(29532,o,h(!1)),Fr=l(29533,r,h(!0)),Dr=l(29535,s,h(!0)),Or=l(29541,o,h(!1)),Nr=l(29543,r,h(!0)),Lr=l(29544,o,h(!0)),Br=l(29545,s,h(!0)),Ur=l(29547,r,h(!0)),Wr=l(29548,s,h(!0)),Vr=l(29549,r,h(!0)),Hr=l(29557,r,h(!0)),zr=l(29565,r,h(!0)),jr=l(29566,o,h(!1)),qr=l(29569,r,h(!0)),Gr=l(29580,s,h(!0)),Jr=l(29582,r,h(!0)),Qr=l(29585,o,h(!1)),Kr=l(29586,r,h(!0)),Xr=l(29590,r,h(!0)),Yr=l(29591,o,h(!0)),Zr=l(29593,o,h(!1)),to=l(29599,o,h(!0)),eo=l(295005,o,h(!0)),no=l(295006,o,h(!0)),io=l(29610,o),ro=l(29625,o),oo=l(29635),so=l(29729,o),ao=l(29854),co=l(29855),uo=l(29856),lo=l(29857),ho=l(29858),fo=l(29860),po=l(29861),go=l(29862),mo=l(29863),wo=l(29864),yo=l(29865),vo=l(29866),bo=l(29867),So=l(29901),Co=l(29903),ko=l(29904),To=l(29905),xo=l(29910),Ao=l(29923),$o=l(29924),Io=l(29952),Po=l(29959),Ro=l(29960),Mo=l(29961),_o=l(29971),Eo=l(29972),Fo=l(29977),Do=l(29980),Oo=l(29992),No=l(29993),Lo=l(31100),Bo=l(31102),Uo=l(31104),Wo=l(33e3,o),Vo=l(33012),Ho=l(33013,o),zo=l(33014),jo=l(33015,o),qo=l(33018,o),Go=l(33016,o),Jo=l(33020),Qo=l(33100),Ko=l(33102),Xo=l(33103),Yo=l(33105),Zo=l(33110),ts=l(33113,o),es=l(33130,a,h(!0)),ns=l(33140),is=l(33151),rs=l(33160,a,h(!0)),os=l(33161,a,h(!0)),ss=l(33170,a,h(!0)),as=l(33171,a,h(!0)),cs=l(33175,a,h(!0)),us=l(33176,a,h(!0)),ds=l(34012,s),ls=l(34013,o),hs=l(34014,s),fs=l(34015,s),ps=l(34016,o),gs=l(34022,s),ms=l(34024),ws=l(34027),ys=l(34028,o),vs=l(34032),bs=l(34033),Ss=l(34034),Cs=l(35201),ks=l(35203,o),Ts=l(35401,o),xs=l(35402),As=l(35403,o),$s=l(35404,o),Is=l(35600,o),Ps=l(35601,o),Rs=l(35602,o),Ms=l(35603,o),_s=l(35604,o),Es=l(35605,o),Fs=l(35606,o),Ds=l(35607,o),Os=l(35608,o),Ns=l(35609,o),Ls=l(35610,o),Bs=l(35611,o),Us=l(35613,o),Ws=l(35614,o),Vs=l(35615,o),Hs=l(35616,o),zs=l(35617,o),js=l(35700),qs=l(35701),Gs=l(36105),Js=l(36106),Qs=l(36107),Ks=l(36108),Xs=l(36109,o),Ys=l(36111),Zs=l(36113),ta=l(36121,o),ea=l(36122),na=l(36300),ia=l(36302),ra=l(36309),oa=l(36311),sa=l(36313),aa=l(36314,o),ca=l(36315),ua=l(36317,o),da=l(36319,o),la=l(36320,o),ha=l(36321),fa=l(36322),pa=l(36323,o),ga=l(36324,o),ma=l(36402),wa=l(36600),ya=l(36601),va=l(36602),ba=l(36603),Sa=l(36604),Ca=l(36605),ka=l(36606),Ta=l(36607),xa=l(36904),Aa=l(36905),$a=l(36906),Ia=l(36908),Pa=l(36909),Ra=l(36910),Ma=l(36911),_a=l(36912),Ea=l(36913),Fa=l(36917),Da=l(36918),Oa=l(36919),Na=l(36920),La=l(36921),Ba=l(36922),Ua=l(36936),Wa=l(36962,a,h(!0)),Va=l(36991,r,h(!1)),Ha=l(37001),za=l(37014,r,h(!0)),ja=l(37020),qa=l(37021),Ga=l(37022),Ja=l(37023),Qa=l(37024),Ka=l(37025),Xa=l(37026),Ya=l(37028),Za=l(37029),tc=l(37030),ec=l(37031),nc=l(37032),ic=l(37033),rc=l(37035),oc=l(37036),sc=l(37037),ac=l(37038),cc=l(37039),uc=l(37040),dc=l(37041),lc=l(37042),hc=l(37043),fc=l(37044),pc=l(37045),gc=l(37046),mc=l(37047),wc=l(37048),yc=l(37049),vc=l(37050),bc=l(37074),Sc=l(37075),Cc=l(37300,o),kc=(i.A.Deprecated,l(37550)),Tc=l(37551),xc=l(37552),Ac=l(37553),$c=l(37554,o),Ic=l(37560),Pc=l(37561),Rc=l(37562,a),Mc=l(37563),_c=l(37566),Ec=l(37568),Fc=l(37571,r,h(!0)),Dc=l(37573,r),Oc=l(37576),Nc=l(37583,o),Lc=l(37584),Bc=l(37601),Uc=l(37604),Wc=l(37605),Vc=l(37609),Hc=l(37610),zc=l(37611),jc=l(37612,r,h(!0)),qc=l(37613),Gc=l(37614),Jc=l(37629),Qc=l(37631),Kc=l(37632),Xc=l(37634,o),Yc=l(37635,o),Zc=l(37636,o),tu=l(37637),eu=l(37638),nu=l(37639),iu=l(37640),ru=l(37641),ou=l(37642),su=l(37644),au=l(38e3),cu=l(38001,o),uu=l(38002,o),du=l(38003,o),lu=l(38005),hu=l(38006,o),fu=l(38007,o),pu=l(38008,o),gu=l(38009,o),mu=l(38004),wu=l(38046,a),yu=l(38055),vu=l(38105),bu=l(38116),Su=l(38117),Cu=l(38118),ku=l(38119,o),Tu=l(38120),xu=l(38125),Au=l(38127),$u=l(38129),Iu=l(38130),Pu=l(38132,o),Ru=l(38133),Mu=l(38138),_u=l(38139,o),Eu=l(38142),Fu=l(38300,s,h(!0)),Du=l(38301,s,h(!0)),Ou=l(38302),Nu=l(38303),Lu=l(38304),Bu=l(38305),Uu=l(38306),Wu=l(38307),Vu=l(38318),Hu=l(38319,s,h(!0)),zu=l(38320),ju=l(38321,s,h(!0)),qu=l(38322,s,h(!0)),Gu=l(38323),Ju=l(38324),Qu=l(38325),Ku=l(38327,s),Xu=l(38328),Yu=l(38329),Zu=l(38331,s,h(!0)),td=l(38334,r,h(!0)),ed=l(38342),nd=l(38344),id=l(38345),rd=l(38346),od=l(38347),sd=l(38348),ad=l(38360),cd=l(38362),ud=l(38363),dd=l(38364),ld=l(38365,a),hd=l(38366),fd=l(38367),pd=l(38369),gd=l(38370),md=l(38373),wd=l(38375),yd=l(38377),vd=l(38378),bd=l(38381),Sd=(i.A.Deprecated,l(38600)),Cd=l(38601),kd=l(38602),Td=l(38603),xd=l(38604),Ad=l(38605),$d=l(38606),Id=l(38607),Pd=l(38608,o),Rd=l(36809),Md=l(38800),_d=l(38801),Ed=l(38802),Fd=l(38803),Dd=l(38903),Od=l(38904),Nd=l(38905),Ld=l(38906),Bd=l(38907),Ud=l(38908),Wd=l(38909),Vd=l(38910),Hd=l(38911),zd=l(38912),jd=l(38913),qd=l(39006),Gd=l(39007),Jd=l(39008),Qd=l(39009),Kd=l(39010),Xd=l(39011),Yd=l(39012),Zd=l(39205),tl=l(39210),el=l(39211),nl=l(39230),il=l(39231),rl=l(39232),ol=l(39233),sl=l(39234,o),al=l(39235,o),cl=l(39236),ul=l(39237,o),dl=l(39238,o),ll=l(39300),hl=l(39361,o),fl=l(39362,o),pl=l(39400),gl=l(39500),ml=l(39501),wl=l(39502),yl=l(39508),vl=l(39509),bl=l(39510),Sl=l(39511),Cl=l(39512),kl=l(39513),Tl=l(39514),xl=l(39515),Al=l(39517),$l=l(39518),Il=l(39519),Pl=l(39600),Rl=l(39601),Ml=l(39602),_l=l(39603),El=l(39708,o),Fl=l(39712),Dl=l(39713,o),Ol=l(39714),Nl=l(39717),Ll=l(39720),Bl=l(39722),Ul=l(39901),Wl=l(40301,s),Vl=l(40302,s),Hl=l(40303,o),zl=l(40304,s),jl=l(40305,s),ql=l(40308),Gl=l(40310,o),Jl=l(40312,s),Ql=l(40313,s),Kl=l(40314),Xl=l(40315),Yl=l(40318),Zl=l(40319),th=l(40320),eh=l(40321,o),nh=l(40322,s),ih=l(40323,s),rh=l(40324,o),oh=l(40325,o),sh=l(40326,s),ah=l(40327,s),ch=l(40328,o),uh=l(40329,o),dh=l(40331),lh=l(40332),hh=l(40333,o),fh=l(40334,o),ph=l(40335,o),gh=l(40336,s),mh=l(40337,s),wh=l(40338,o),yh=l(40339,o),vh=l(40340,o),bh=l(40341,o),Sh=l(40342),Ch=l(40500),kh=l(40520,o),Th=l(40600,o),xh=l(40601),Ah=l(40604),$h=l(40605),Ih=l(40606),Ph=l(40607),Rh=l(40608),Mh=l(40609),_h=l(40700),Eh=l(40701),Fh=l(40702),Dh=l(40703),Oh=l(40704),Nh=l(41e3),Lh=l(41001),Bh=l(41002),Uh=l(41003),Wh=l(41005),Vh=l(41006),Hh=l(41007),zh=l(41009),jh=l(41010,o),qh=l(41011,o),Gh=l(41012,o),Jh=l(41013,o),Qh=l(41014),Kh=l(41216),Xh=l(41217),Yh=l(41218),Zh=l(41224),tf=l(41225),ef=l(41226),nf=l(41271,a),rf=l(41273,a),of=l(41274,a),sf=l(41275,a),af=l(41350),cf=l(41356),uf=l(41406),df=l(41407),lf=l(41415),hf=l(41416),ff=l(41417,o),pf=l(41611),gf=l(41900),mf=l(42602),wf=l(42603),yf=l(42604),vf=l(42605),bf=l(42606),Sf=l(43e3),Cf=l(43011),kf=l(43012,o),Tf=l(43225),xf=l(43310),Af=l(43500),$f=l(43511),If=l(43600),Pf=l(43601),Rf=l(43700),Mf=l(43701),_f=l(43702),Ef=l(43703),Ff=l(43705),Df=l(43706,o),Of=l(43801),Nf=l(43968),Lf=l(43970),Bf=l(43985),Uf=l(43986),Wf=l(40001),Vf=l(40002),Hf=l(40003),zf=l(44003),jf=l(44200),qf=l(44201,a),Gf=l(44300),Jf=l(44700),Qf=l(44701),Kf=l(44702),Xf=l(44703),Yf=l(44704),Zf=l(44705),tp=l(44706),ep=l(44707),np=l(44708),ip=l(44709),rp=l(44710),op=l(44712),sp=l(44713),ap=l(44720),cp=l(44721),up=l(44722),dp=l(44724),lp=l(44725),hp=l(44726),fp=l(44727,o),pp=l(44728,o),gp=l(44729,o),mp=l(44730,o),wp=l(44731,o),yp=l(44732),vp=l(45700),bp=l(45706,r,h(!0)),Sp=l(46216,a),Cp=l(46222,a),kp=l(46243,o),Tp=(i.A.Deprecated,l(47701,a)),xp=l(47702,a),Ap=l(47703,a),$p=l(47704,a),Ip=l(47705,a),Pp=l(47706,a),Rp=l(47707,a),Mp=l(47710,s,h(!0)),_p=l(47712,s,h(!0)),Ep=l(47713,s,h(!0)),Fp=l(47716,s,h(!0)),Dp=l(50001),Op=l(50003),Np=l(50005),Lp=l(50008),Bp=l(50011,a),Up=l(50017),Wp=l(50025,a),Vp=l(50027),Hp=l(50030),zp=l(50031),jp=l(50032),qp=l(50033),Gp=l(50041),Jp=l(50042),Qp=l(50043),Kp=l(50045),Xp=l(50046),Yp=l(50049),Zp=l(50050),tg=l(50053,a),eg=l(50054),ng=l(50061),ig=l(50062),rg=l(50063),og=l(50065),sg=l(50066),ag=l(50067),cg=l(50068),ug=l(50069),dg=l(50072),lg=l(50073),hg=l(50074),fg=l(50075),pg=l(50076),gg=l(50100),mg=l(50101),wg=l(50400,o),yg=l(50402),vg=l(50403),bg=l(53101),Sg=l(53102),Cg=l(53103),kg=l(53104,o),Tg=l(53105),xg=l(53106,o),Ag=l(53107),$g=l(53108),Ig=l(53111),Pg=l(53112,o),Rg=l(53322),Mg=l(53700),_g=l(53800,r,c,void 0,"libs/feed-layout/.../healthFitnessCardDataMapper.ts"),Eg=l(53801),Fg=l(53802),Dg=l(53944),Og=l(53952),Ng=l(53972),Lg=l(54401),Bg=l(54437),Ug=l(54440),Wg=l(54441),Vg=l(60004),Hg=l(60101),zg=l(60102),jg=l(60103),qg=l(60104),Gg=l(60105),Jg=l(60106),Qg=l(60107),Kg=l(60108),Xg=l(60109),Yg=l(60110),Zg=l(60111),tm=l(60114),em=l(60115),nm=l(60116),im=l(60117,o),rm=l(60118,o),om=l(60119),sm=l(60120),am=l(60125),cm=l(60126),um=l(60127),dm=l(60128),lm=l(60510),hm=l(60129),fm=l(60130),pm=l(60132,o),gm=l(60134,o),mm=l(60135,o),wm=l(60136,o),ym=l(60137,o),vm=l(60138,a),bm=l(60139,o),Sm=l(60140,o),Cm=l(60141,o),km=l(60142,s),Tm=l(60143),xm=l(60145,o),Am=l(60146,o),$m=l(60147),Im=l(60148),Pm=l(60149),Rm=l(60150),Mm=l(60151,s),_m=l(60152,s),Em=l(60153,o),Fm=l(60154,s),Dm=l(60155,o),Om=l(60156,s),Nm=l(60157,o),Lm=l(60158,o),Bm=l(60160,o),Um=l(60161,s),Wm=l(60162,o),Vm=l(60163,o),Hm=l(60165),zm=l(60166),jm=l(60168,o),qm=l(60169),Gm=l(60170),Jm=l(60171),Qm=l(60228),Km=l(60237),Xm=l(60239),Ym=l(60240),Zm=l(60241,o),tw=l(60242),ew=l(60243),nw=l(60244),iw=l(60245),rw=l(60246),ow=l(60247,a),sw=l(60250,o),aw=l(60252,o),cw=l(60254),uw=l(60259),dw=l(60260,o),lw=l(60261,o),hw=l(60262,o),fw=l(60265),pw=l(60266),gw=l(60267),mw=l(60268),ww=l(60269),yw=l(60270),vw=l(60271),bw=l(60272),Sw=l(60281),Cw=l(60282,o),kw=l(60285),Tw=l(60400),xw=l(60401),Aw=l(60403),$w=l(60404),Iw=l(60406),Pw=l(60407),Rw=l(60408),Mw=l(60409),_w=l(60410),Ew=l(60413),Fw=l(60414),Dw=l(60421),Ow=l(60430),Nw=l(60475),Lw=l(60500),Bw=l(60550),Uw=l(60551),Ww=l(60552),Vw=l(60800),Hw=l(60801),zw=l(60900),jw=l(60901),qw=l(61e3),Gw=l(65e3,o),Jw=l(65001),Qw=l(65002),Kw=l(65003),Xw=l(65004),Yw=l(65103,o),Zw=l(65101,o),ty=l(65102),ey=l(65104,o),ny=l(7e4,s),iy=l(70001,s),ry=l(70010),oy=l(70011),sy=l(70012),ay=l(70013),cy=l(70014,a),uy=l(70015,a),dy=l(70100),ly=l(70101),hy=l(70202),fy=l(70203),py=l(70204),gy=l(70205),my=l(70206),wy=l(70209),yy=l(70210),vy=l(70211),by=l(70212),Sy=l(70213),Cy=l(70214),ky=l(70216),Ty=l(70217),xy=l(70218),Ay=l(70219),$y=l(70221),Iy=l(70222),Py=l(70223),Ry=l(70224),My=l(70225),_y=l(70227),Ey=l(70400),Fy=l(70401),Dy=l(70402),Oy=l(70403),Ny=l(70404),Ly=l(70406,i.A.Deprecated),By=l(70407,i.A.Deprecated),Uy=l(70408),Wy=l(70409),Vy=l(70410,i.A.Deprecated),Hy=l(70602),zy=l(70603),jy=l(70604),qy=l(70605),Gy=l(70606),Jy=l(70607),Qy=(i.A.Deprecated,l(73021)),Ky=l(73030),Xy=l(73033),Yy=l(73040),Zy=l(73065,o),tv=l(73078),ev=l(73079),nv=l(73100),iv=l(73101),rv=l(73102),ov=l(73104),sv=l(73105),av=l(73116),cv=l(73117),uv=l(73121),dv=l(73122),lv=l(73123),hv=l(73124),fv=l(73125),pv=l(73126),gv=l(73127),mv=l(73209,r,h(!1)),wv=l(73210,r,h(!0)),yv=l(73211),vv=l(73212,s),bv=l(73213,s),Sv=l(73215,r,h(!0)),Cv=l(73253,s,h(!1)),kv=l(73255,s,h(!0)),Tv=l(73256,s,h(!0)),xv=l(73257,s,h(!0)),Av=l(73258,s,h(!0)),$v=l(73259,s,h(!1)),Iv=l(73260),Pv=l(73261,r,h(!0)),Rv=l(73262,s,h(!0)),Mv=l(73263,s,h(!0)),_v=l(73264,s,h(!1)),Ev=l(73265),Fv=l(73266,s,h(!1)),Dv=l(73267,s,h(!1)),Ov=l(73307),Nv=l(73308),Lv=(i.A.HighImpact,i.A.HighImpact,i.A.HighImpact,i.A.HighImpact,l(77025,s)),Bv=l(77026,r),Uv=l(80105),Wv=l(90108,o),Vv=l(90300),Hv=l(90301,o),zv=l(90303),jv=l(90305),qv=l(90306),Gv=l(90307),Jv=l(90308,o),Qv=l(90309,o),Kv=l(90310,o),Xv=l(91002),Yv=l(91005),Zv=l(91006),tb=l(91007),eb=l(92001),nb=l(100004),ib=l(100011),rb=l(100036),ob=l(100042),sb=l(100054),ab=l(101200),cb=l(101201),ub=l(101203),db=l(101204),lb=l(101208),hb=l(101209),fb=l(102003,o),pb=l(102300,o),gb=l(102302,o),mb=l(110043),wb=l(110044,o),yb=l(111001,o),vb=l(111030,o),bb=l(111043,o),Sb=l(111050,o),Cb=l(111051,o),kb=l(111060,o),Tb=l(111070,o),xb=l(111100),Ab=l(111103),$b=l(111106),Ib=l(111110),Pb=l(111300),Rb=l(112001,o),Mb=l(120001),_b=l(120002),Eb=l(120003),Fb=l(120010),Db=l(120011),Ob=l(125001),Nb=l(125002),Lb=l(130002),Bb=l(130003),Ub=l(130004,o),Wb=l(130005,o),Vb=l(130006,o),Hb=l(130007,o),zb=l(130008,o),jb=l(130009,o),qb=l(130010,o),Gb=l(130011,o),Jb=l(130012,o),Qb=l(130013,o),Kb=l(130014,o),Xb=l(130015,o),Yb=l(130016,o),Zb=l(130017,o),tS=l(130018,o),eS=l(133100),nS=l(133101),iS=l(134e3),rS=l(135020),oS=l(135021),sS=l(135022),aS=l(135040,o),cS=l(135041,o),uS=l(135043),dS=l(135063,o),lS=l(135064,o),hS=l(135065,o),fS=l(136015),pS=l(136016),gS=l(136018),mS=l(14e4),wS=(i.A.Deprecated,l(140100)),yS=l(140101),vS=l(140102),bS=l(140103),SS=l(140104),CS=l(140110),kS=l(140105),TS=l(140106),xS=l(140107),AS=l(140200),$S=l(143e3,o),IS=l(143001,a),PS=l(143007,a),RS=l(143002,a),MS=l(143003,a),_S=l(143005,a),ES=l(143006,a),FS=l(144e3),DS=l(146e3,r,h(!0)),OS=l(146001,o),NS=l(146002,r,h(!0)),LS=l(222223),BS=l(223e3),US=l(223001),WS=l(223002),VS=l(223004),HS=l(223005),zS=l(223006),jS=l(223007),qS=l(223060),GS=l(223062,o),JS=l(223100),QS=l(223101),KS=l(223200),XS=l(223201),YS=l(223202),ZS=l(223203,a),tC=l(223204),eC=l(223300,o),nC=l(223301),iC=l(223302),rC=l(223303,o),oC=l(223304,o),sC=l(223305,o),aC=l(224100,a,h(!0)),cC=l(224101),uC=l(224102),dC=l(224103),lC=l(224200),hC=l(224201),fC=l(224300),pC=l(224301),gC=l(224302,a),mC=l(224500,a,h(!0)),wC=l(224502),yC=l(295103,o),vC=l(295104,o),bC=l(295100,o),SC=l(295101,o),CC=l(295102),kC=l(295200),TC=l(295201),xC=l(295202),AC=l(300001),$C=l(30002),IC=l(30003,i.A.Deprecated),PC=l(30004,i.A.Deprecated),RC=l(30005),MC=l(30006),_C=l(30007,i.A.Deprecated),EC=l(295205),FC=l(295206),DC=l(295207),OC=l(295208),NC=l(295209),LC=l(295210),BC=l(295211),UC=l(295212),WC=l(295220),VC=l(295254),HC=l(295255),zC=l(295256),jC=l(295257),qC=l(295300),GC=l(295301),JC=l(295302),QC=l(295303),KC=l(295402),XC=l(295406),YC=l(295407),ZC=l(295408),tk=l(295409),ek=l(295500,a),nk=l(295501),ik=l(295502),rk=l(295503),ok=l(295504),sk=l(1600,s),ak=l(1602,s),ck=l(1606,s),uk=l(1612),dk=l(1614,s),lk=l(1615,s),hk=l(1616),fk=l(345e3,s),pk=l(35e4),gk=l(351e3),mk=l(351001),wk=l(351002),yk=l(351010),vk=l(41e4),bk=l(410001),Sk=l(410002),Ck=l(410003),kk=l(410004),Tk=l(43e4),xk=l(430001),Ak=l(420050,s),$k=l(420051,s),Ik=l(420053,s),Pk=l(420052,s),Rk=l(420054),Mk=l(420063),_k=l(420100,s),Ek=l(420101,s),Fk=l(420102,s),Dk=l(420103,s),Ok=l(420055,s),Nk=l(420056,s),Lk=l(420057,s),Bk=l(420058,s),Uk=l(420059,s),Wk=l(420060,s),Vk=l(420061,s),Hk=l(420062),zk=l(420064,s),jk=l(420065),qk=l(420066),Gk=l(420104,s),Jk=l(420105,s),Qk=l(420106,s),Kk=l(420107),Xk=l(420108),Yk=l(420109),Zk=l(420111),tT=l(420112),eT=l(420113),nT=l(420116),iT=l(440001),rT=l(440003),oT=l(440004),sT=l(45e4,s,h(!0)),aT=l(450001,s,h(!0)),cT=l(450002,s,h(!0)),uT=l(450003,s,h(!0)),dT=l(450004,s,h(!0)),lT=l(450005,s,h(!0)),hT=l(46e4),fT=l(460001),pT=l(460002),gT=l(460003),mT=l(460004),wT=l(460005),yT=l(460011),vT=l(460012),bT=l(48e4),ST=l(49e4),CT=l(5e5,r,h(!0)),kT=l(51e4,o),TT=l(511e3,o),xT=l(512e3,o),AT=l(513e3,o),$T=l(513001,o),IT=l(513002,o),PT=l(513003,o),RT=l(52e4),MT=l(520001),_T=l(520002),ET=l(520003),FT=l(520004),DT=l(520005),OT=l(55e4),NT=l(56e4),LT=l(560001),BT=l(57e4,r,h(!0)),UT=l(58e4),WT=l(580001),VT=l(590002,s),HT=l(590001),zT=l(6e5,a),jT=l(61e4,o),qT=l(610005),GT=l(64e4,o)},65199:function(t,e,n){n.d(e,{_:function(){return r}});var i=n(90206);class r{constructor(){this.AuthDataMap={}}async getAuthDataFromCache(t){if(!t?.id)return{authToken:void 0,resource:t,error:{message:"inMemoryAuthCacheStrategy Resource Id is missing",status:i.L.OtherCacheError}};const e=Math.round(performance.now()),n=this.AuthDataMap[t.id],r=Math.round(performance.now());return n?this.isJwtTokenExpired(n.authToken)?{authToken:void 0,resource:t,error:{message:"inMemoryAuthCacheStrategy Cache is expired",status:i.L.CacheExpired},performance:{startTime:e,endTime:r}}:{resource:t,authToken:n.authToken,performance:{startTime:e,endTime:r}}:{authToken:void 0,resource:t,error:{message:"inMemoryAuthCacheStrategy Cache is missing",status:i.L.CacheMissing},performance:{startTime:e,endTime:r}}}async setAuthDataToCache(t,e){if(!t?.id)return{resource:t,error:{message:"setAuthDataToCache Resource Id is missing",status:i.L.OtherCacheError}};const{authToken:n}=e,r=Math.round(performance.now());this.AuthDataMap[t.id]={authToken:n};return{resource:t,performance:{startTime:r,endTime:Math.round(performance.now())}}}async removeAuthDataFromCache(t){if(!t?.id)return{resource:t,error:{message:"removeAuthDataFromCache Resource Id is missing",status:i.L.OtherCacheError}};const e=Math.round(performance.now());delete this.AuthDataMap[t.id];return{resource:t,performance:{startTime:e,endTime:Math.round(performance.now())}}}isJwtTokenExpired(t){if(!t)return;let e;try{e=JSON.parse(atob(t.split(".")[1]))}catch(t){return}return e?.exp?1e3*e.exp<Date.now():void 0}}},65431:function(t,e,n){var i,r,o,s;n.d(e,{Hv:function(){return a},Nh:function(){return c}}),function(t){t._lowerBound="invalid",t._1by191="1x1.91",t._9by16="9x16",t._3by4="3x4",t._1by1="1x1",t._4by3="4x3",t._16by9="16x9",t._191by1="1.91x1"}(i||(i={})),function(t){t.Adult="adult",t.Enterprise="enterprise"}(r||(r={})),function(t){t.AdFeedV2="feedv2-template",t.Default="msft-content-card",t.PatternOverlay="msn-pattern-overlay-card",t.PseudoVideo="msn-pseudo-video-card",t.Slideshow="msn-slideshow-card",t.ZIndex="msn-z-index-card",t.AdCarousel="msn-ad-carousel",t.AnimatedImagery="msn-animated-imagery",t.InfopaneHorizontal_1by1="msn-info-pane-horizontal-1-by-1",t.InfopaneHorizontal_3by4="msn-info-pane-horizontal-3-by-4",t.InfopaneHorizontal_4by3="msn-info-pane-horizontal-4-by-3",t.InfopaneHorizontal_9by16="msn-info-pane-horizontal-9-by-16",t.InfopanePatternOverlay_1by1="msn-info-pane-pattern-overlay-1-by-1",t.InfopanePatternOverlay_4by3="msn-info-pane-pattern-overlay-4-by-3",t.InfopaneDoubleCard_19by10="msn-card-19-by-10",t.RiverAnimatedImagery_9by16="msn-river-animated-imagery-9-by-16",t.RiverZIndex_9by16="msn-river-z-index-9-by-16",t.RiverZIndex_3by4="msn-river-z-index-3-by-4",t.HotspotSingle="msn-hotspot-single",t.BrandStory="msn-brand-story",t.CallToAction="msn-ad-cta",t.CallToActionLearnMore="msn-ad-cta-learn-more",t.CallToActionDarkMode="msn-ad-cta-learn-more-dark-mode",t.CallToActionIcon="msn-ad-cta-icon",t.CallToActionShortTitle="msn-ad-cta-short-title",t.CallToActionMaskMode="msn-ad-cta-mask-mode",t.ContentReveal="msn-content-reveal",t.DiscountScribble="msn-discount-scribble",t.BrandStoryNoDeco="msn-brand-story-no-deco",t.BrandStoryNoProgressiveDisplay="msn-brand-story-no-progressive-display",t.Gamification="msn-gamification",t.HighlightRating="msn-highlight-rating-card",t.DecorationDynamic="msn-decoration-dynamic",t.TitleMaxLine2="msn-title-max-line-2",t.TitleMaxLine2C="msn-title-max-line-2-c",t.InfopaneDynamicRendering="msn-info-pane-dynamic-rendering",t.Logo="msn-native-ad-logo",t.LogoWithBorderRadius="msn-native-ad-logo-radius",t.ShortTitle="msn-native-ad-short-title",t.Spotlight="msn-spotlight-image",t.Disclaimer="msn-ad-disclaimer",t.ZIndexV2Original="msn-ad-zindex-v2-original",t.ZIndexV2Polygon="msn-ad-zindex-v2-polygon",t.AdSlugV3="msn-ad-slug-v3",t.AdSlugV4="msn-ad-slug-v4",t.DrPerf="msn-ad-dr-perf",t.Video="msn-video",t.VideoIAS="msn-video-ias",t.Amplify="msn-amplify",t.SpecialOfferNonDR="msn-special-offer-nondr",t.SpecialOfferNonDRWithExp="msn-special-offer-nondr-with-exp",t.RatingHighlightRedNonDR="msn-highlight-rating-nondr-red",t.RatingHighlightYellowNonDR="msn-highlight-rating-nondr-yellow",t.RatingHighlightYellowNonDRStatic="msn-highlight-rating-nondr-yellow-static",t.RatingDefaultYellowNonDRStatic="msn-default-rating-nondr-yellow-static",t.FreeShippingPlainTextNonDR="msn-freeshipping-plain-text-nondr",t.FreeShippingInlineNonDR="msn-freeshipping-inline-nondr",t.FreeShippingTopLeftNonDR="msn-freeshipping-top-left-nondr",t.FreeShippingTopRightNonDR="msn-freeshipping-top-right-nondr",t.FreeShippingDR="msn-freeshipping-dr",t.ConditionNonDR="msn-condition-nondr",t.ConditionNonDRControl="msn-condition-nondr-c",t.ReturnPolicyNonDR="msn-return-policy-nondr",t.ReturnPolicyNonDRControl="msn-return-policy-nondr-c",t.SoldNonDR="msn-sold-nondr",t.SoldNonDRControl="msn-sold-nondr-c",t.EliteBadge="msn-elite-badge",t.RatingDR="msn-rating-dr",t.Trending="msn-trending",t.LikeButton="msn-like-button",t.SaleHighlightV1="msn-sale-highlight-v1",t.SaleHighlightV1Control="msn-sale-highlight-v1-c",t.SaleHighlightV3="msn-sale-highlight-v3",t.SaleHighlightV4="msn-sale-highlight-v4",t.SaleHighlightV3V4Control="msn-sale-highlight-v3v4-c",t.ShortTitleControl="msn-short-title-c",t.SpecialOfferControl="msn-special-offer-c",t.LogoControl="msn-logo-c",t.FreeShippingControl="msn-freeshipping-c",t.ZIndexControl="msn-z-index-c",t.RatingControl="msn-rating-c",t.TrendingControl="msn-trending-c",t.CallToActionControl="msn-cta-c",t.HoverEffectControl="msn-hover-effect-c",t.HoverEffect="msn-hover-effect",t.ComboRating="msn-combo-rating",t.ComboFreeShipping="msn-combo-freeshipping",t.ComboSpecialOffer="msn-combo-special-offer",t.ComboRatingNonDR="msn-combo-rating-nondr",t.ComboFreeShippingNonDR="msn-combo-freeshipping-nondr",t.ComboSpecialOfferNonDR="msn-combo-special-offer-nondr",t.ComboSaleHighlightNonDR="msn-combo-sale-highlight-nondr",t.ComboRatingNonDRControl="msn-combo-rating-nondr-c",t.ComboFreeShippingNonDRControl="msn-combo-freeshipping-nondr-c",t.ComboSpecialOfferNonDRControl="msn-combo-special-offer-nondr-c",t.ComboSaleHighlightNonDRControl="msn-combo-sale-highlight-nondr-c",t.CallToActionV2="msn-call-to-action-v2",t.CallToActionV3="msn-call-to-action-v3",t.CallToActionV3PA="msn-call-to-action-v3-pa",t.PESeasonalAds="msn-pe-seasonal",t.PESeasonalAdsV1="msn-pe-seasonal-v1",t.PESeasonalAdsV1P="msn-pe-seasonal-v1p",t.PESeasonalAdsControl="msn-pe-seasonal-control",t.ComboSoldNonDR="msn-combo-sold-nondr",t.ComboReturnPolicyNonDR="msn-combo-return-policy-nondr",t.ComboConditionNonDR="msn-combo-condition-nondr",t.ComboSoldNonDRControl="msn-combo-sold-nondr-c",t.ComboReturnPolicyNonDRControl="msn-combo-return-policy-nondr-c",t.ComboConditionNonDRControl="msn-combo-condition-nondr-c",t.ResponsiveImageSizing="msn-responsive-image-sizing",t.ResponsiveDescription="msn-responsive-description",t.GeometricAdWaves1="msn-geometric-ad-waves-1",t.GeometricAdWaves3="msn-geometric-ad-waves-3",t.GeometricAdWaves4="msn-geometric-ad-waves-4",t.GeometricAdNature3="msn-geometric-ad-nature-3",t.GeometricAdSparkles1="msn-geometric-ad-sparkles-1",t.GeometricAdSparkles2="msn-geometric-ad-sparkles-2",t.GeometricAdSparkles3="msn-geometric-ad-sparkles-3",t.GeometricAdSparkles4="msn-geometric-ad-sparkles-4",t.GeometricAdSparkles5="msn-geometric-ad-sparkles-5",t.GPTTitle="msn-native-ad-gpt-title",t.AlignmentRF="msn-native-ad-align-rf",t.AIImg="msn-native-ad-ai-img",t.VAPhase2="msn-native-ad-va-phase2"}(o||(o={})),function(t){t.ScaleUp="scale-up",t.ScaleDown="scale-down",t.ScaleUpDown="scale-up-down"}(s||(s={}));const a={infopane:{w:612,h:304},riverdb:{w:612,h:304},river:{w:300,h:304}},c={templateType:"msft-content-card",animatedImage:"",landscapeOverlay:!1,allowedAssets:null,nativeAdMode:"adult",adCarousel:!1,progressiveDisplay:!1,discountThreshold:1,imageSizeConfig:{infopane:{w:604,h:296},river:{w:300,h:174}},badgeStyle:"blendedIn",useClickInGamify:!0,configType:void 0}},65432:function(t,e,n){n.d(e,{HY:function(){return l},fM:function(){return c},hF:function(){return u},v3:function(){return h}});var i=n(89980);const r="1s-tokens";var o;let s,a;function c(){return s=d(),s&&s.accessToken?s:void 0}function u(){if(s=d(),!s)return"notAvailable";const t=s.expiresOn,e=new Date(t),n="expired";if(!e.getTime())return n;return e>new Date?"valid":n}function d(){return s=s||void 0===s&&(0,i.Lg)().getObject(r)||null,s}function l(t){s=void 0,a=t;const{accessToken:e,expiresOn:n}=t||{};e&&n?(0,i.Lg)().setObject(r,{accessToken:e,expiresOn:n}):(0,i.Lg)().removeItem(r)}function h(){return a}!function(t){t.NotAvailable="notAvailable",t.Expired="expired",t.Valid="valid"}(o||(o={}))},65444:function(t,e,n){n.d(e,{y:function(){return r}});var i=n(68480);class r{}r.addVisuallyReadyDependencies=new i.P("AddVisuallyReadyDependencies"),r.markVisuallyReadyComplete=new i.P("MarkVisuallyReadyComplete")},67387:function(t,e,n){n.d(e,{Ah:function(){return s},B9:function(){return H},CR:function(){return y},Cr:function(){return W},Dg:function(){return w},E1:function(){return x},GH:function(){return $},I1:function(){return L},Jp:function(){return g},Ju:function(){return z},MK:function(){return i},MQ:function(){return p},Nn:function(){return m},Nu:function(){return N},OS:function(){return U},PO:function(){return l},Rs:function(){return h},Tp:function(){return f},V$:function(){return C},VR:function(){return B},Xp:function(){return o},Zc:function(){return S},aS:function(){return P},dW:function(){return T},dZ:function(){return V},gR:function(){return a},j$:function(){return A},js:function(){return d},k2:function(){return E},kr:function(){return b},lP:function(){return I},oC:function(){return r},pc:function(){return R},pq:function(){return u},q9:function(){return O},v1:function(){return v},wX:function(){return k},y_:function(){return c}});const i="msnewsroot",r={html:"html",head:"head",body:"body"},o="data-canvas-info",s="data-client-settings",a="data-diagnostics",c="dir",u="data-info",d="data-js",l="data-pagetype",h="data-service-url",f="data-telemetry-id",p="data-page-product",g="data-page-type",m="data-ads-numberline",w=2,y="APP_ANON",v="aace",b="ace",S="OSATE",C="OSAT",k="child",T="AL_STATE",x="WID",A="APP_WID",$="search-history-enabled",I="left-rail-enabled",P={activityId:"x-client-activityid",adsReferer:"ads-referer",authorization:"Authorization",entAuthorization:"Ent-Authorization",muid:"MUID",rpsToken:"UserAuthToken",taboolaSessionId:"taboola-sessionId",xboxToken:"s-xbox-token",traceParent:"traceparent",uniFeatTun:"OneSvc-Uni-Feat-Tun"},R={traceId:"ddd-activityid",debugId:"ddd-debugid",afdRefStr:"x-msedge-ref",userType:"ddd-usertype",isStatic:"X-Statics-Fallback",authFeatures:"ddd-auth-features",akamai_cache_status:"akamai-cache-status",akamai_grn:"akamai-grn",akamai_request_bc:"akamai-request-bc",akamai_request_id:"akamai-request-id",akamai_server_ip:"akamai-server-ip",digitalId:"X-1S-Digital-ID"};var M,_;!function(t){t.Presentation="presentation"}(M||(M={})),function(t){t.Unknown="Unknown",t.Portrait="Portrait",t.Landscape="Landscape"}(_||(_={}));const E={pageVersions:"pageVersions"},F={instanceId:"InterestsWC",configRef:{experienceType:"InterestsWC",instanceSrc:"default"}},D={instanceId:"InterestsWC",configRef:{experienceType:"InterestsWC",instanceSrc:"default",sharedNs:"msn-ns"}},O=t=>{let e;switch(t){case"default":e=F;break;case"shared":e=D;break;default:e=void 0}return e},N="https://microsoftnews.msn.com/",L="switchedPivot",B="pivotSelectionSource";var U,W;!function(t){t[t.Undefined=0]="Undefined",t[t.Basic=1]="Basic",t[t.Advanced=2]="Advanced",t[t.Premium=3]="Premium"}(U||(U={})),function(t){t.Init="init",t.Config="config",t.Targeted="targeted",t.Sticky="sticky",t.NoSticky="no_sticky",t.Admin="admin",t.Forced="forced",t.Manual="manual"}(W||(W={}));const V=new Set(["finance-app-win","weather-app-win","winpstoreapp"]),H=new Set(["hpmsn"]),z=new Set(["chromentpnews"])},67450:function(t,e,n){n.r(e),n.d(e,{EdgeChromiumPageWC:function(){return kn},EdgeChromiumPageWCCommonLightTemplate:function(){return fi},EdgeChromiumPageWCCommonTemplate:function(){return hi},EdgeChromiumPageWCInlineStyles:function(){return Ri},EdgeChromiumPageWCStyles:function(){return Mi},EdgeChromiumPageWCTemplate:function(){return pi},EdgeChromiumPageWCWithJSDependencyStyles:function(){return Ii},OverlapState:function(){return O},SpotlightIcon:function(){return xi},ToolingInfo:function(){return _i},getAnaheimLayoutPromotionAndContentSelection:function(){return en.d1},getBackgroundImageIsSet:function(){return en.aC},getHeaderHeightForSSRPrefetch:function(){return en.hh},getLayoutState:function(){return en.Sf},getPrefetchRequest:function(){return en.FA},getPrefetchRequestOverride:function(){return en.Bi},getWidgetLayoutTemplateBundle:function(){return bn},getWidgetsManager:function(){return yn},getWidgetsRegionQSP:function(){return en.qC},isFeedDisabled:function(){return en.vp},prefetchAndStoreMainFeed:function(){return en.jp},shouldEarlyFeedCallInSSR:function(){return en.Sp},shouldPrefetch:function(){return en.Rk},ssrHeaderHeightKey:function(){return en.mk}});var i=n(47096),r=n(56911),o=n(28006),s=n(12951),a=n(84855),c=n(89710),u=n(12870),d=n(6092),l=n(89980),h=n(13937),f=n(71967),p=n(28611),g=n(59721),m=n(18731),w=n(53384),y=n(3762),v=n(20205),b=n(19548),S=n(80924),C=n(7965),k=n(43666),T=n(69913),x=n(48309),A=n(34299),$=n(43434),I=n(79426),P=n(18750),R=n(88296),M=n(51267),_=n(27942);const E="background",F="solidHeader",D="launchChannelStore";var O;!function(t){t[t.NoOverlap=0]="NoOverlap",t[t.PartialOverlap=1]="PartialOverlap",t[t.CompleteOverlap=2]="CompleteOverlap"}(O||(O={}));const N="ssrBasePageCachingFeatureActive",L="BgRightClickMenuEditBackgroundImage",B="BgRightClickMenuViewBackgroundImage",U="BgRightClickMenuRefreshPage",W="BgRightClickContextMenue",V="WidgetsUpsellButton";var H;!function(t){t.weather="weather",t.traffic="traffic",t.finance="finance",t.sports="sports",t.cegrowth="cegrowth"}(H||(H={}));const z="productivityHub";var j=n(59239),q=n(63418),G=n(88312),J=n(11372),Q=n(98216),K=n(65022),X=n(93468),Y=n(89151),Z=n(30817),tt=n(53685),et=n(15387),nt=n(68399),it=n(3920),rt=n(87637),ot=n(1732),st=n(41820),at=n(48172),ct=n(50115),ut=n(24685),dt=n(56085),lt=n(98793),ht=n(55593);async function ft(){const t="vp"===(0,ht.a)().get("reqsrc")||!!(0,ht.a)().get("vptest");if(!window.caches||-1!=location.href?.indexOf("enableForceCache=true")||t)return;const e=Date.now(),n=await async function(){let t="";const e=await gt("edgenext-base-V1");e&&e.length>0||(t="edgenext-base-v1-empty.");const n=t?[]:e.filter(t=>t.url&&function(t,e){if(!t||!e)return!1;const n=wt(new URL(t)),i=wt(new URL(e));if(!n||!i)return!1;return n.href==i.href}(t.url,location.href));t||n&&0!=n.length||(t="edgenext-base-v1-missing.");const i=await caches.open("edgenext-base-fallback-V1");if(t){const e=mt(new URL(location.href));try{return await i.add(e),t+" NetworkCall"}catch(e){return t+" "+e}}const r=n[0],o=await caches.match(r.url);if(!o)return"Empty cache entry.";const s=mt(new URL(r.url));return await i.put(s,o),"saved."}(),i=Date.now(),r={r:n,ic:await pt(),te:i-e};(0,l.Lg)().setObject("FallbackNavigationResult",r)}async function pt(){const t=await gt("edgenext-base-fallback-V1");if(!(t&&t.length>0))return!1;const e=mt(new URL(location.href)),n=t.filter(t=>t.url&&t.url===e.toString());return!!(n&&n.length>0)}async function gt(t){if(!window.caches)return[];const e=await caches.open(t);return e&&await e.keys()||[]}function mt(t){return(t=wt(t)).searchParams.append("enableForceCache","true"),t}function wt(t){return t.searchParams.delete("prerender"),t.searchParams.delete("startpage"),t.searchParams.delete("PC"),t.searchParams.delete("dsp"),t.searchParams.delete("sp"),t.searchParams.delete("adppc"),t.searchParams.delete("ucpdpc"),t.searchParams.delete("fre"),t.searchParams.delete("isFREModalBackground"),t.searchParams.delete("firstlaunch"),t}var yt=n(11367),vt=n(29320);const bt={SSRBasePageNetworkRequestFailed:K.AWs,SSRBasePageCacheMatchFailed:K.ehW,PrerenderBasePageNetworkRequestFailed:K.d7X};var St=n(88034),Ct=n(41423),kt=n(56485),Tt=n(22011),xt=n(78981),At=n(78481),$t=n(98719),It=n(90905),Pt=n(66600),Rt=n(87405),Mt=n(70487),_t=n(10615),Et=n(9612),Ft=n(52573),Dt=n(50759),Ot=n(14535),Nt=n(46140),Lt=n(77479),Bt=n(37805);var Ut,Wt=n(81618),Vt=n(28422),Ht=n(15003),zt=n(96851),jt=n(34713),qt=n(71776),Gt=n(16611),Jt=n(71470),Qt=n(29231);let Kt;!function(t){t.topStories="topstory",t.breakingNews="breakingnews",t.socialReplies="socialreplies",t.socialReactions="socialreactions",t.socialFollowers="socialfollowers",t.socialAchievements="socialachievements",t.socialAlerts="socialalerts"}(Ut||(Ut={}));class Xt{constructor(t){this.resolvePushNotificationsSubscription=async(t,e,n,i,r,o,s)=>{const a=await this.swRegistration.pushManager.getSubscription();if("denied"===Notification.permission)return;if(o.size<1&&(!a||"granted"!==Notification.permission))return;if(a)return void Xt.updateSubscriptions(a,t,o);let c="granted"===Notification.permission;const d=c;let l="";const{defaultNotification:h,defaultNotificationPromptAllow:f,defaultNotificationPromptBlock:p,defaultNotificationPromptDefault:g}=Xt.buildDefaultNotificationPermissionPromptTelemetryElement(s);if(!c){let t;switch(Q.YT.sendContentViewEvent(h,Qt.ym.View),l=await Notification.requestPermission(),l){case"granted":t=f,c=!0;break;case"denied":t=p;break;default:t=g}Q.YT.sendActionEvent(t,J.EG.Click,J.MS.Undefined)}if(!c)return;if(fetch(t+"/webpush/key").then(async e=>{if(e.ok){const n=await this.swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xt.urlB64ToUint8Array((await e.json()).key)});Xt.updateSubscriptions(n,t,o)}else Q.YT.sendAppErrorEvent({...K.vJB,message:"Error fetching key for subscribing to push notifications endpoint",pb:{...K.vJB.pb,customMessage:`HTTP Status: ${e.status}`}})}),!d){const t={body:n,tag:"web-notification",icon:r,data:{url:b._3.getAbsoluteUrl(i)}};"edge"===u.Rb.ClientSettings.browser.browserType?this.swRegistration.showNotification(e,t):new Notification(e,t)}},this.swRegistration=t}static getInstance(){return Kt}static initializePushSubscriptionManager(t){"string"==typeof t?this.initializeFromScope(t):this.initializeFromRegistration(t)}static initializeFromRegistration(t){Kt=new Xt(t)}static async initializeFromScope(t){await navigator.serviceWorker.ready,Xt.initializePushSubscriptionManager(await navigator.serviceWorker.getRegistration(t))}static urlB64ToUint8Array(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=atob(e),i=new Uint8Array(n.length);for(let t=0;t<n.length;++t)i[t]=n.charCodeAt(t);return i}static addTelemetryTagsToElement(t,e,n){const i={name:n},r=e?e.addOrUpdateChild(i):null,o=r.render();return Object.keys(o).forEach(e=>{t.setAttribute(e,o[e])}),r}static buildDefaultNotificationPermissionPromptTelemetryElement(t){const e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");e.appendChild(n),e.appendChild(i),e.appendChild(r);const o=Xt.addTelemetryTagsToElement(e,t,"browserNativeNotificationPermissionPrompt");return Xt.addTelemetryTagsToElement(n,o,"Accept"),Xt.addTelemetryTagsToElement(i,o,"Block"),Xt.addTelemetryTagsToElement(r,o,"Default"),{defaultNotification:e,defaultNotificationPromptAllow:n,defaultNotificationPromptBlock:i,defaultNotificationPromptDefault:r}}static async updateSubscriptions(t,e,n){const i=Object.values(Ut).filter(t=>!n.has(t));[{segment:"subscribe",tags:[...n]},{segment:"unsubscribe",tags:i}].forEach(async n=>{if(n.tags.length<1)return;const i=n.tags.join(";"),r=e+"/webpush/news/"+u.Rb.Locale+"/v1/webpush/"+n.segment+"?scn=MSNRPSAuth",o=await fetch(r,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Tags:i},body:JSON.stringify({subscription:t})});o.ok?o.json().then(t=>{"Success"!==t.message&&Q.YT.sendAppErrorEvent({...K.hvL,message:"Response contained unexpected value when subscribing or unsubscribing from push notifications endpoint",pb:{...K.hvL.pb,customMessage:`Expected response message to be 'Success' but instead was ${t.message} when receiving response from endpoint at ${r}`}})}):Q.YT.sendAppErrorEvent({...K.hvL,message:"HTTP error when making subscribe or unsubscribe call from push notifications endpoint",pb:{...K.hvL.pb,customMessage:`Response status was ${o.status} when attempting to communicate with the endpoint at ${r}`}})})}}var Yt=n(50999),Zt=n(82238),te=n(23768);const ee=(0,f.P)(function(){window.pageYOffset>0&&ie()},0);let ne=!1;function ie(){const t=(0,Zt.Kl)();t&&te.m.updateBelowTheFoldTransitionStart.getActionSender(t).send(!0),ne=!0,window.removeEventListener("scroll",ee)}const re={initialize:function(){window.addEventListener("scroll",ee,{passive:!0})},handleSettingUpdate:function(t){ne||"always"!==t&&"headingsonly"!==t&&"peek"!==t||ie()}};var oe=n(27261),se=n(77246),ae=n(17720),ce=n(44594),ue=n(60815),de=n(27597),le=n(35849),he=n(14588),fe=n(10610),pe=n(3200),ge=n(38405),me=n(56644),we=n(77120),ye=n(44383),ve=n(28024),be=n(55457),Se=n(24),Ce=n(38135),ke=n(41377),Te=n(13312),xe=n(37416),Ae=n(5044),$e=n(81760),Ie=n(77454),Pe=n(69583),Re=n(16813),Me=n(22272),_e=n(58242);var Ee=n(46534),Fe=n(32886);let De;var Oe=n(96950);async function Ne(t){const{config:e,isSignedOutPromise:n,isFromWidgetLockScreen:i}=t,r=[];if(e){if(e.enableLangExpBanner&&function(){const t={id:"LanguageExplainingBanner",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"HorizontalBanner",position:"Top"},contentModel:{title:"Language Explaining Banner",description:"     ?     ,         .",contentType:Re.r.CallToAction,dismissContentAction:{label:"."}}},e=[(0,Me.A)("Dismissed",1728e5),(0,_e.n)("Dismissed",3)];(0,Pe.sn)().then(n=>{n.sendInternalPlacement(t,e)})}(),e.enableTcfConsentExpireBanner){const t="TcfConsentCheckResult",e=2592e6,n=JSON.parse((0,l.Lg)().getItem(t)||"{}");n?.shouldShowBanner&&(Date.now()-n.cleanDate<e?(Q.YT.addOrUpdateTmplProperty("TCFRevokeBannerShowed","1"),function(){const t="Customize your ad experience, including personalized ads settings, on your ",e=(0,l.Lg)(),n={actionDelegate:()=>{e.removeItem("TcfConsentCheckResult")}},i=Oe.qy`
        <div class="tcf-leadText">
        ${t} <a 
            href="https://account.microsoft.com/privacy/ad-settings" 
            class="clickableLeadText" 
            target="_blank"
            @click=${(t,e)=>{Q.YT.addOrUpdateTmplProperty("TCFRevokeBannerPrivacyClicked","1"),n.actionDelegate(),t.removeBanner()}}
        >${"Microsoft Privacy Dashboard"}</a>
    </div>
    `,r={id:"tcfConsentExpireBanner",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"HorizontalBanner",position:"Top",bannerType:"LegalCompliance",closeSurfaceAction:n,displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{Q.YT.addOrUpdateTmplProperty("TCFRevokeBannerDismissed","1")}}},contentModel:{title:t,description:i,contentType:Re.r.CallToAction}};(0,Pe.sn)().then(t=>{t.sendInternalPlacement(r)})}()):(0,l.Lg)().removeItem(t))}return e.termOfUseBannerConfig?.enabled&&await n&&function(t){const e=!!t.termOfUseBannerConfig?.isSecondBanner,n=t?.termOfUseBannerConfig?.termOfUseBanner1Description||t?.localizedStrings?.termOfUseBanner1Description||"We're updating our Terms of Use",i=e?t?.termOfUseBannerConfig?.termOfUseBanner2Description||t?.localizedStrings?.termOfUseBanner2Description||"We've updated our Terms of Use":n,r={id:e?"TermOfUseBanner2":"TermOfUseBanner1",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"HorizontalBanner",position:"Top",bannerType:"LegalCompliance",displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}},closeSurfaceAction:{label:"Close"}},contentModel:{title:i,description:i,contentType:Re.r.CallToAction,logoImage:{url:`${d.T3.StaticsUrl}/latest/nurturing/img/i-logo.png`,altText:"Image Alt Text"},dismissContentAction:{label:t?.termOfUseBannerConfig?.termOfUseBannerDismBtnLabel||t?.localizedStrings?.termOfUseBannerDismBtnLabel||"Dismiss"},engageContentAction:{label:t?.termOfUseBannerConfig?.termOfUseBannerEngageBtnLabel||t?.localizedStrings?.termOfUseBannerEngageBtnLabel||"Learn more",actionDelegate:()=>{window.open("https://go.microsoft.com/fwlink/?LinkID=2092201","_blank")}}}},o=e?864e5:6048e5,s=[(0,Me.A)("Viewed",o),(0,_e.n)("Dismissed",1),(0,_e.n)("Closed",1),(0,_e.n)("Engaged",1)];(0,Pe.sn)().then(t=>{t.sendInternalPlacement(r,s)})}(e),i&&await async function(t){const{config:e}=t;await(0,ot.$W)();const n=await(0,ot._L)();if(!n||!n.length)return;await async function(t){let e=!1;const n=new URLSearchParams(window.location.search);n?.get("forceLocationCoachmark")&&(e=!0);const i=await(0,Rt.TW)(Mt.u.weatherHeroExperience);if(!i)return;if(De=(0,le.zP)(o.BS),!De)return;const r=De.getCurrentState();if(r&&1==r?.locationDetectionSetting)Q.YT.addOrUpdateTmplProperty("LockScreenLocationTypeRevIp","1");else if(!e)return;const{title:s,engageContentActionLabel:a,dismissContentActionLabel:c}=t.localizedStrings.LockScreenLocationCoachmark,u={id:"lockScreenLocationCoachmark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:Ee.fB.Small,position:{coachmarkAnchor:i,anchoringPosition:Ee.M7.Above,hasPointer:!0,pointerPosition:Ee.X1.Adjacent}},contentModel:{title:s||"Did we get your location right?",description:"",contentType:Re.r.CallToAction,engageContentAction:{label:a,actionDelegate:()=>{}},dismissContentAction:{label:c,actionDelegate:()=>{window.dispatchEvent(new CustomEvent("openWeatherHeroLocationEdit"))}}}},d=[(0,_e.n)("Viewed",3),(0,Me.A)("Viewed",3*Fe.$),(0,_e.n)("Dismissed",1),(0,_e.n)("Closed",3),(0,_e.n)("Engaged",1)];(0,Pe.sn)().then(t=>{t.sendInternalPlacement(u,d)})}(e)}(t),()=>{r.forEach(t=>{t()})}}}var Le=n(5751);function Be(){return(b._3.getQueryParameterByName("segment",(0,oe.iA)())||"").toLowerCase()}function Ue(t){const e=t.selectedQuickLinksDisplaySetting;switch(t.selectedFeedDisplaySetting){case"headingsonly":case"off":return"onerow"===e?170:"tworows"===e?85:192;case"peek":return 84;default:return 12}}function We(){return 344+("cegrowth"===Be()?27:0)}function Ve(t,e){return t?Ue(e)+We():0}function He(t){if(!d.T3.IsHeroNTP||"wind_spot_2"===(0,Ae.En)())return!1;const e="0"===(0,ht.a)().get("dsp");return t.showSearchBoxForHero?.enableTmpl&&(Q.YT.addOrUpdateTmplProperty("showSearchBoxForHero_hero","1"),e&&Q.YT.addOrUpdateTmplProperty("showSearchBoxForHero_nbe","1")),!!t.showSearchBoxForHero?.enabled&&(!t.showSearchBoxForHero?.onlyNonBingSearchEngine||e)}const ze=t=>{const e=!t.isRecommendedSitesEnabled||"off"===t.recommendedSitesDisplaySetting;return t.isFeedAlways&&e&&!t.isTopSitesDisabled},je=t=>{let e=16;if(t.isFeedAlways&&!t.isTopSitesDisabled)e-=16;else if(t.isTopSitesDisabled&&t.isRecommendedSitesEnabled&&"off"!==t.recommendedSitesDisplaySetting)return 10;return e},qe=t=>{let e=10+t.topBannerOffsetHeight;return t.enableOneColumn&&(e=56),e},Ge=t=>{let e=16;return ze(t)&&(e=10),e},Je=t=>{const{isTwoRowTopSites:e,isOneRowTopSites:n}=((t,e)=>{let n,i;if(e?.actualRowCount){const{actualRowCount:t}=e;n=2===t,i=1===t}else n="tworows"==t,i="onerow"==t;return{isTwoRowTopSites:n,isOneRowTopSites:i}})(t.layoutState.selectedQuickLinksDisplaySetting,t.topSitesLayoutState);return n?60:e?130:0},Qe=t=>ze(t)?10:(t=>{const e=!t.isRecommendedSitesEnabled||"off"===t.recommendedSitesDisplaySetting;return t.isFeedAlways&&e&&t.isTopSitesDisabled})(t)?6:t.isRecommendedSitesEnabled?"off"!==t.layoutState.currentBackgroundImageType&&t.childRefs.weatherOneLiner&&"off"===t.layoutState.selectedFeedDisplaySetting?80:0:30;var Ke=n(77328);const Xe=new Set(["thumb-down","infopane-flips","scroll-wo-click"]),Ye=async(t,e,n)=>{if(!t||!Xe.has(n))return;const i=await(0,Rt.TW)(Mt.u.personalizeButton);if(!i)return;Q.YT.addOrUpdateTmplProperty("cs-cm","1"),Q.YT.addOrUpdateTmplProperty(`cs-cm-${n}`,"1"),window.removeEventListener("launchChannelStoreCoachmark",e);const r=await Ze();!r&&void 0===r||0!==r.length||(Q.YT.addOrUpdateTmplProperty("cs-cm-fol","1"),t.enableChannelStoreCoachMark&&function(t,e){const{localizedStrings:n}=e;let i;const r=function(t){const e=t.getBoundingClientRect(),n=new m.bb,i=(0,m.KP)(n.data.innerHeight,"innerHeight"),r=(0,m.KP)(n.data.innerWidth,"innerWidth");return e.top>=0&&e.left>=0&&e.bottom<=i&&e.right<=r}(t);i=r?{coachmarkAnchor:t,anchoringPosition:Ee.M7.Above,hasPointer:!0,pointerPosition:Ee.X1.Opposite}:Ee.L$.BottomEnd;const o={url:`${d.T3.StaticsUrl}latest/channel-store/coachmark-bg-2.png`,altText:""},{persNegSigCoachmark:s}=n||{},a=s?.title||"",c=s?.description||"",u=s?.engageBtnLabel||"",l=s?.dismBtnLabel||"",h={id:"personalizeManageText",group:"Default",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:Ee.fB.Medium,position:i,enableGradientBorderBottom:!0},contentModel:{title:a,description:c,contentImage:r?void 0:o,contentType:Re.r.CallToAction,engageContentAction:{label:u,actionDelegate:()=>{window.dispatchEvent(new CustomEvent("launchChannelStore"))}},dismissContentAction:{label:l}}},f=2592e6,p=[(0,Me.A)("Viewed",f),(0,_e.n)("Viewed",2),(0,_e.n)("Engaged",1)];(0,Pe.sn)().then(t=>{t.sendInternalPlacement(h,p)})}(i,t))};const Ze=async()=>{const t={feedName:"filteredChannels"};let e;try{e=await(Ke.$Q?.fetchChannelFilter("SuperNav",t))}catch(t){return}return e?.subCards||[]};var tn=n(39152),en=n(854),nn=n(73920),rn=n(87518),on=n(54030),sn=n(90831);function an(t,e,n){const{selectedQuickLinksDisplaySetting:i}=t,r="tworows"==i;return"off"==i?0:(e>=_.j1.c3||n)&&!r?60:130}function cn(t,e=!1){const n=function(t){let e=0;t.layoutState.imageOfTheDayEnabled?(t.hideTopSectionSSRHero||(e+=78),e+=46,e+=32,t.shouldRenderSuggestionPrompts&&(e+=52),t.hideTopSectionSSRHero||(e+=an(t.layoutState,t.columnArrangement,t.isWorkFeed),t.childRefs.recommendedSites&&"off"!==t.recommendedSitesDisplaySetting&&("off"!==t.layoutState.selectedQuickLinksDisplaySetting&&(e+=16),e+=t.recommendedSitesHeight))):(t.hideTopSectionSSRHero||(e+=0,e+=48,e+=72),e+=46,e+=32,e+=32,t.shouldRenderSuggestionPrompts&&(e+=52),t.hideTopSectionSSRHero||(e+=an(t.layoutState,t.columnArrangement,t.isWorkFeed),t.childRefs.recommendedSites&&"off"!==t.recommendedSitesDisplaySetting&&("off"!==t.layoutState.selectedQuickLinksDisplaySetting&&(e+=16),e+=t.recommendedSitesHeight))),t.displayWidgetsRegion&&(e+=146),t.showHeroAboveNav?(!t.isRecommendedSitesEnabled&&t.isTopSitesDisabled||(e+=24),e+=Ve(t.showHeroAboveNav,t.layoutState)+Ue(t.layoutState)):e+=30;return e}(t),i=t.config.maxPeekViewport??262;let r=i;t.config.peekViewportRatio&&t.config.minPeekViewportForRatio&&t.config.maxPeekViewportForRatio&&window.innerHeight>1080&&(r=Math.max(t.config.minPeekViewportForRatio,Math.min(t.config.maxPeekViewportForRatio,window.innerHeight*t.config.peekViewportRatio)),r=Math.round(r),r>i&&Q.YT.addOrUpdateTmplProperty("PeekViewportRatioChanged",r.toString()),t.config.justPeekViewRatioTMPL&&(r=i)),t.isWorkFeed&&!e&&(r=t.config.enableWorkTabV2?434:402);let o=window.innerHeight-S.$L-r;return o<n&&(o=n),o}var un=n(84970),dn=n(99124);var ln=n(24695),hn=n(47149),fn=n(52088);class pn{constructor(){this.mockPrefix="mock-out-of-focus",this.mockElement=null,this.visibilityChangeListener=null}initialize(){(0,se.S)()&&this.setupVisibilityListener()}sendOutOfFocusContentView(){this.mockElement||(this.mockElement=this.createMockElement(this.mockPrefix)),Q.YT.sendContentViewEvent(this.mockElement,Qt.ym.OutOfFocus,!1)}dispose(){this.visibilityChangeListener&&(window.removeEventListener("visibilitychange",this.visibilityChangeListener),this.visibilityChangeListener=null,this.mockElement=null)}setupVisibilityListener(){this.visibilityChangeListener||(this.visibilityChangeListener=()=>{"visible"!==document.visibilityState&&this.sendOutOfFocusContentView()},window.addEventListener("visibilitychange",this.visibilityChangeListener))}createMockElement(t){const e=new hn.$({name:`${t}`}),n=document.createElement("div"),i=document.createElement("div");return i.setAttribute("data-t",e.getMetadataTag()),n.appendChild(i),fn.W.addElement(i),n}}const gn="localhost.msn.com"===(0,oe.VQ)(),mn="gaming",wn=(0,it.HL)("feedManager",()=>Promise.all([n.e("common-others"),n.e("common-windows-widget-shared"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("libs_core_dist_widgets_SharedWidgetUtils_js-libs_experiences-telemetry_dist_object-mappings_C-3a830c"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("libs_feed-layout_dist_card-templates_responsive-ad-card_ResponsiveAdCardDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_feed-layout_dist_card-templates_boost-ad-card_BoostAdCard_js-libs_feed-layout_dist_card--fa9230"),n.e("libs_experiences-base_dist_utilities_CountdownPromise_js-libs_oneservice-card-provider_dist_O-882d3a"),n.e("libs_super-feed_dist_feed-manager_FeedManagerWithClientAd_js"),n.e("experiences_edge-chromium-page-wc_dist_lazy-loadings_feedManager_js")]).then(n.bind(n,84721)).then(t=>t.FeedManagerWithClientAd)),yn=(0,it.HL)("widgetManager",()=>Promise.all([n.e("common-others"),n.e("common-windows-widget-shared"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("libs_core_dist_widgets_SharedWidgetUtils_js-libs_experiences-telemetry_dist_object-mappings_C-3a830c"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("libs_feed-layout_dist_card-templates_responsive-ad-card_ResponsiveAdCardDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_feed-layout_dist_card-templates_boost-ad-card_BoostAdCard_js-libs_feed-layout_dist_card--fa9230"),n.e("libs_experiences-base_dist_utilities_CountdownPromise_js-libs_oneservice-card-provider_dist_O-882d3a"),n.e("libs_super-feed_dist_feed-manager_FeedManagerWithClientAd_js"),n.e("experiences_edge-chromium-page-wc_dist_lazy-loadings_feedManager_js")]).then(n.bind(n,84721)).then(t=>t.FeedManagerForNtpWidgets)),vn=(0,it.HL)("layoutTemplates",()=>n.e("feedDependencies").then(n.bind(n,36081)).then(t=>t.AnaheimLayoutTemplateMap)),bn=(0,it.HL)("widgetLayoutTemplates",()=>n.e("experiences_edge-chromium-page-wc_dist_lazy-loadings_widgetLayoutTemplateMaps_js").then(n.bind(n,21417)).then(t=>t.AnaheimWidgetsLayoutTemplateMap)),Sn=(0,it.HL)("feedDependenciesGaming",()=>Promise.all([n.e("common-others"),n.e("common-windows-widget-shared"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("libs_core_dist_widgets_SharedWidgetUtils_js-libs_experiences-telemetry_dist_object-mappings_C-3a830c"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("libs_feed-layout_dist_card-templates_responsive-ad-card_ResponsiveAdCardDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_feed-layout_dist_card-templates_boost-ad-card_BoostAdCard_js-libs_feed-layout_dist_card--fa9230"),n.e("libs_experiences-base_dist_utilities_CountdownPromise_js-libs_oneservice-card-provider_dist_O-882d3a"),n.e("libs_super-feed_dist_feed-manager_FeedManagerWithClientAd_js"),n.e("experiences_edge-chromium-page-wc_dist_feedDependenciesGaming_js")]).then(n.bind(n,1067))),Cn=(0,it.HL)("waterfallCardMappers",()=>Promise.all([n.e("common-others"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("libs_core_dist_widgets_SharedWidgetUtils_js-libs_experiences-telemetry_dist_object-mappings_C-3a830c"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("libs_feed-layout_dist_card-templates_responsive-ad-card_ResponsiveAdCardDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_feed-layout_dist_card-templates_boost-ad-card_BoostAdCard_js-libs_feed-layout_dist_card--fa9230"),n.e("experiences_edge-chromium-page-wc_dist_lazy-loadings_waterfallCardMappers_js")]).then(n.bind(n,55520)));class kn extends Tt.U{constructor(){super(...arguments),this.isWeatherOneLinerMapped=!1,this.showFeedTranslucent=!0,this.showDarkIcon=!1,this.needDarkThemeIcons=!1,this.enableHiddenRecommendedSitesStyles=!1,this.isTtvrFiredAndCanUseDom=!1,this.showBreakingNews=!1,this.enableSpotlightButton=!1,this.widgetsRegionRequiresTtvrCallback=!1,this.isSignedInMSAUser=!1,this.hideComplianceLink=!1,this.enableCopilotDiscoverHeaderSetting=!1,this.enableCopilotDiscoverSuperNavSetting=!1,this.isAppLauncherAllowedByPolicy=!0,this.haveUpdateFeedStateOnScroll=!1,this.onScrollSettablePromise=new I.e,this.onSocialBarReactedSettablePromise=new I.e,this.className="",this.canaryFlightEnabled=!1,this.displayConditionalBanner=!1,this.displayNetworkErrorBanner=!1,this.isOnPersonalizeOrM365Page=!1,this.nowPivotId="",this.hideQuickLinks=!1,this.isNewTabPageContentManagedByPolicy=!1,this.hideWidgets=!0,this.pulseData=[],this.pulseOnHover=!1,this.showSpotlightBackgroundGalleryCard=!1,this.showSpotlightButton=!1,this.showSpotlightHoverMask=!1,this.showSpotlightButtonByHover=!1,this.headerCoreOffset=0,this.stickyHeaderHeight=S.e4,this.enableNotificationAnimation=!1,this.searchStickyBreakpoint=0,this.scrollCanTrigChannelStoreCoachmark=!1,this.numInfopaneTabChangeClicks=0,this.numFeedRefreshes=0,this.requiresExtraWidth=!1,this.gridRowsMap=new Map,this.enableHiddenWelcomeGreeting=!1,this.displayNetworkErrorWhenFeedDependenciesFailed=!1,this.topSitesQuickLinkEndMarginUsedPadding=0,this.museumCardShown=!1,this.scrollIsPastStyleThreshold=!0,this.userScrolled=!1,this.invisibleTopSites=!1,this.invisibleSearchBox=!1,this.invisibleRecommendedSites=!1,this.invisibleHero=!1,this.msNtpExpBitmask="",this.headingsOnlyHeightReduction=0,this.overriddenFeedConfig=null,this.overlapState={state:0,feedbackState:0},this.isFeedRendered=!1,this.feedHasLoaded=!1,this.shouldRenderToastWC=!1,this.telemetryTags={},this.showRightClickMenu=!1,this.ntpTypeToSearch=!1,this.deferBGIfOffFlightEnabled=u.Rb.CurrentFlightSet.has("ntp-bgdsbl-dfr"),this.pageHiddenStartTime=null,this.headerGridHidden=!1,this.hasChangedFeed=!1,this.pageLoadedWithContentDisabled=!1,this.isPageLoadedWithWidgets=!1,this.isHero=d.T3.IsHeroNTP,this.showHeroAboveNav=d.T3.IsHeroNTP&&this.config?.showHeroAboveNav,this.showWidgetsUpsellButton=!1,this.mousemoveListenerRemoved=!1,this.hideWidgetsBasedOnPolicy=!1,this.flyoutOpen=!1,this.noWidgetsData=!1,this.lifecycleExceptionToThrowErrorOnServerSide=!0,this.pivotsNavigated=[],this.widgetsLazyLoaded=!1,this.oneTrustConsentHandler=null,this.animationIconVisibile=!0,this.shouldAutoScroll=!1,this.shouldShrinkHeader=!1,this.windowInnerWidth=0,this.windowInnerHeight=0,this.bgRightClickMenuWidth=0,this.bgRightCLickMenuHeight=0,this.hideSearchSuggestionPrompts=!1,this.suggestionPromptsHeight=52,this.checkNetworkStatus=()=>{const t=window.navigator.connection;t&&0==t.downlink&&this.showNetworkErrorToast()},this.checkNetworkRelatedError=t=>{[44700,22031,22012,223e3,8108,40701,41611,50017,35004,35132,36908,135040,9904,36904,40326,135040,135041].includes(t?.detail?.errorId??0)&&this.showNetworkErrorToast()},this.showNetworkErrorToast=()=>{(0,se.S)()&&!u.Rb.IsPrerender&&(this.config.enableNetworkErrorCF||(this.displayNetworkErrorBanner=!0,this.onConditionalBannerDisplayChange(!0),this.networkErrorBannerCloseTelemetry=(0,rn.g)("NetErrBanner",{headline:"Close",type:J.b5.Banner},J.MS.Close,J.EG.Click,{destinationUrl:""})),window.setTimeout(()=>{window.removeEventListener("appError",this.checkNetworkRelatedError),window.removeEventListener("offline",this.showNetworkErrorToast);navigator.connection.removeEventListener("change",this.checkNetworkStatus)},300),Q.YT.addOrUpdateTmplProperty("netErrToast","1"),(0,l.Lg)()?.setItem("netErrToast","1"))},this.skeletonObserverCallback=()=>{this.isFeedContentDisplayed()&&(this.showSkeleton=!1,this.skeletonEleFromSSR&&(this.skeletonEleFromSSR.remove(),this.skeletonEleFromSSR=null),this.skeletonObserver?.disconnect())},this.recommendedSitesSelection=t=>{t?.detail&&(this.recommendedSitesDisplaySetting=t?.detail.key??this.recommendedSitesDisplaySetting,this.updateHeaderGrid(),this.refreshHeaderHeight(),this.calculateTopAndBackgroundStickyBreakpoints())},this.checkThemeColorIcons=()=>{if(this.needDarkThemeIcons=!1,"dark"===d.T3.CanvasTheme&&"hero"===this.layoutState.displayBackgroundImageType)return;if(!(0,se.S)()){const t=u.Rb.EdgeNTPHeader?.backgroundImage;return void(t&&"Theme"==t.provider&&t.darkIcons&&(this.needDarkThemeIcons=t.darkIcons))}if("theme"!=this.layoutState.currentBackgroundImageType||!this.layoutState.ntpTheme)return;const t=this.layoutState.configData,e=t&&t.enabledFeatures&&t.enabledFeatures.includes("msAllowThemeInstallationFromChromeStore"),n=this.layoutState.ntpTheme&&this.layoutState.ntpTheme.usingDefaultTheme;e&&!n&&(this.needDarkThemeIcons=!this.layoutState.ntpTheme.isNtpBackgroundDark)},this.updateDarkIconValue=t=>{t&&(this.showDarkIcon=!(!t.detail||!this.config.enableHolidayBg||(0,P.ud)()))},this.turnOffWidgetsRegion=()=>{this.pageSettingsDataConnector?.updateFeedsForWidgetsToggle(!1)},this.updateWidgetsRegion=t=>{t&&this.noWidgetsData!==t.detail&&(this.noWidgetsData=t.detail,this.displayWidgetsRegion=!t.detail,this.updateHeaderGrid(),this.refreshHeaderHeight())},this.manageWidgetsRegion=()=>{if("off"===this.layoutState.selectedFeedDisplaySetting){const t=new URL(tn.By.replace(tn.li,d.T3.CurrentMarket),tn.dU),e=(0,Ae.En)();return e&&t.searchParams.set("ocid",e),void window.open(t.href,"_blank")}"myInterests_experienceSettings"===this.nowPivotId?this.scrollToShowFeed():ke.bN.getInstance().attemptNavItemChange("myInterests_experienceSettings")},this.widgetsRefresh=()=>{this.config?.enableWidgetsRegion&&this.layoutState?.enableWidgetsRegion&&!this.hideWidgetsBasedOnPolicy&&!d.T3.IsHeroNTP?this.widgetsRefreshHandler(!1):(this.widgetsChangedWhileHidden=!0,window.dispatchEvent(new CustomEvent("unblockToggles")))},this.widgetsRefreshHandler=(t=!0)=>{this.widgetsFeedManager?.feedEventAggregator?this.widgetsFeedManager.callRefreshRegionsData({invalidateCache:!0,scrollToTop:t,skipBitMasking:!0},!0).then(()=>{window.dispatchEvent(new CustomEvent("unblockToggles"))}):this.feedManager?.feedEventAggregator&&"off"!==this.layoutState.selectedFeedDisplaySetting&&this.feedManager?.callRefreshRegionsData({invalidateCache:!0,scrollToTop:t,skipBitMasking:!0},!0).then(()=>{window.dispatchEvent(new CustomEvent("unblockToggles"))})},this.displayQuickLinks=()=>{this.hideQuickLinks=!1,this.topSitesHolder.style.visibility="",this.updateAfterWheelingToDisplayMore()},this.updateFeedLayoutFromDropdown=t=>{const e=t.detail,n=this.layoutState?this.layoutState.currentLayout:C.lk.currentLayout,i=this.layoutState?.selectedFeedDisplaySetting;let r=(0,k.J)(e,this.layoutState.currentBackgroundImageType,this.layoutState.greetingEnabled,this.layoutState.hideDefaultTopSites);if(this.backgroundGalleryEligibility&&"off"!==this.layoutState.currentBackgroundImageType&&(r=fe.K.shouldOverrideLayoutToCustomCache()?"custom":r),n!==r){let t;if("custom"!==r){const i=C.c_[r];t={currentBackgroundImageType:i.current_background_image_type,originalLayout:n,currentLayout:r,greetingEnabled:i.greeting,imageOfTheDayEnabled:"off"!==i.current_background_image_type,hideDefaultTopSites:i.hide_promoted_links,selectedFeedDisplaySetting:e}}else t={...this.layoutState,originalLayout:n,currentLayout:r,selectedFeedDisplaySetting:e};this.pageSettingsDataConnector?.updateLayout(t,x.MR.user,!0,!0)}else this.pageSettingsDataConnector?.updateFeeds(e,i)},this.onMouseenter_backgroundButton=t=>{t?.stopPropagation(),this.closeGalleryTimeout&&window.clearTimeout(this.closeGalleryTimeout),this.showSpotlightBackgroundGalleryCard=!0,this.openBackgroundGallery(),this.maskHoverTimeout&&window.clearTimeout(this.maskHoverTimeout)},this.onMouseout_backgroundButton=t=>{t?.stopPropagation(),this.closeGalleryTimeout&&window.clearTimeout(this.closeGalleryTimeout),this.closeGalleryTimeout=window.setTimeout(()=>{if(this.showSpotlightBackgroundGalleryCard=!1,this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!1),this.bgMask&&t){const{x:e,y:n,height:i,width:r}=this.bgMask.getBoundingClientRect(),{clientX:o,clientY:s}=t;o&&s&&(o<e||o>e+r||s<n||s>n+i)&&(this.maskHoverTimeout&&window.clearTimeout(this.maskHoverTimeout),this.showSpotlightButtonByHover=!1)}},500)},this.onMouseenter_backgroundMask=t=>{const e=this.headerCoreRef?.shadowRoot?.querySelector?.("common-settings-edgenext")?.shadowRoot?.querySelector?.("cs-common-settings-dialog")?.shadowRoot?.querySelector?.("fluent-button");e?.className?.includes?.("active")||(this.maskHoverTimeout&&window.clearTimeout(this.maskHoverTimeout),this.showSpotlightButtonByHover=!0)},this.onMouseout_backgroundMask=t=>{this.maskHoverTimeout&&window.clearTimeout(this.maskHoverTimeout),this.maskHoverTimeout=window.setTimeout(()=>{this.showSpotlightButtonByHover=!1},500)},this.updateAfterWheelingToDisplayMore=()=>{this.calculateStickyBreakpoints(),this.refreshHeaderHeight(),window.removeEventListener("wheel",this.quickLinksToggle)},this.updatePulseOnHover=t=>{this.pulseOnHover=t.detail},this.quickLinksToggle=t=>{if("always"!==this.layoutState.selectedFeedDisplaySetting)return;const{selectedQuickLinksDisplaySetting:e}=this.layoutState;if(!["onerow","tworows"].includes(e))return;0===(document.documentElement?document.documentElement:document.body).scrollTop&&t.deltaY<0&&this.hideQuickLinks&&this.displayQuickLinks()},this.dismissNotificationMiniCard=(t="manual")=>{me.Z.dismissNotificationMiniCard(t)},this.areNavTopSitesOverlapping=(0,It.A)(()=>{if("hidden"===document.visibilityState||!this.nav||!this.topSitesHolder||"hidden"===this.topSitesHolder.style.visibility||!this.topSitesHolder.children.length||"1"!==this.topSitesHolder.style.opacity&&""!==this.topSitesHolder.style.opacity)return;if(this.topSitesHolder.children[0]&&0===this.topSitesHolder.children[0].offsetHeight)return;const t=this.nav.getBoundingClientRect(),e=this.topSitesHolder.getBoundingClientRect();this.checkAndLogRectsOverlapping(t,e)},500),this.getWidgetsQSPForBitmasking=()=>{if(this.sharedFeedManager&&this.config.enableWidgetsRegion)return this.sharedFeedManager.widgetsQSPForBitmasking},this.initFeedDependencies=(t,e=!1)=>{this.displayNetworkErrorWhenFeedDependenciesFailed=!1;const n=this.getWidgetsQSPForBitmasking();this.updatePivotsNavigatedAndStampTmpl(t,e);const i=()=>Cn().then(t=>t.getCardMappers());if(t===mn)this.getFeedDependencyPromise=Promise.all([Sn(),i()]).then(([{FeedManagerWithClientAd:t,GamingLayoutTemplateMap:e},n])=>{const i=e,r=new t({disablePreloadLikelyExperiences:"informational"!==this.layoutState.currentLayout,...n});return this.msNtpExpBitmask&&(r.edgExpMask=this.msNtpExpBitmask),(0,Ft.V)()&&r.setPrerenderFeedCallDisabled(!0),{feedManager:r,layoutTemplateMap:i}});else if(this.isWaterfallFeed(t)&&!e){const e=d.T3.IsHeroNTP||this.widgetsRegionDependencyPromise?bn:()=>Promise.resolve(void 0);this.getFeedDependencyPromise=Promise.all([wn(),e(),i()]).then(([e,n,i])=>{const r=n,o="informational"!==this.layoutState.currentLayout,s=this.getWidgetsQSPForBitmasking(),a=this.shouldUseSharedFeedManager(t)?this.sharedFeedManager:new e({disablePreloadLikelyExperiences:o,rubyConsumptionOnCohort:(0,dn.S)(this.config),widgetsQSPForBitmasking:s,...i});return a.isShared=this.shouldShareFeedManager(t),Q.YT.addOrUpdateTmplProperty("waterfallFeed_sharedFeedManager",a.isShared?"1":"0"),this.setSharedFeedManager(a),this.msNtpExpBitmask&&(a.edgExpMask=this.msNtpExpBitmask),(0,Ft.V)()&&a.setPrerenderFeedCallDisabled(!0),this.feedManager=a,{feedManager:a,importLayoutTemplateMap:bn,layoutTemplateMap:r}})}else if(e&&this.config.useDedicatedWidgetsManager)this.widgetsRegionDependencyPromise=Promise.all([yn(),bn(),i()]).then(([t,e,n])=>{const i=new t(n);return this.msNtpExpBitmask&&(i.edgExpMask=this.msNtpExpBitmask),(0,Ft.V)()&&i.setPrerenderFeedCallDisabled(!0),this.widgetsFeedManager=i,{feedManager:i,layoutTemplateMap:e}});else if(e){const e=bn;this.widgetsRegionDependencyPromise=Promise.all([wn(),e(),i()]).then(([i,r,o])=>{const s=r,a="informational"!==this.layoutState.currentLayout,c=this.shouldUseSharedFeedManager(t)?this.sharedFeedManager:new i({disablePreloadLikelyExperiences:a,widgetsQSPForBitmasking:n,...o});return c.isShared=this.shouldShareFeedManager(t),Q.YT.addOrUpdateTmplProperty("widgetsFeed_sharedFeedManager",c.isShared?"1":"0"),this.setSharedFeedManager(c),this.msNtpExpBitmask&&(c.edgExpMask=this.msNtpExpBitmask),(0,Ft.V)()&&c.setPrerenderFeedCallDisabled(!0),this.widgetsFeedManager=c,{feedManager:c,importLayoutTemplateMap:e,layoutTemplateMap:s}})}else this.getFeedDependencyPromise=Promise.all([wn(),vn(),i()]).then(([t,e,n])=>{const i=e,r=new t({disablePreloadLikelyExperiences:"informational"!==this.layoutState.currentLayout,rubyConsumptionOnCohort:(0,dn.S)(this.config),...n});return this.msNtpExpBitmask&&(r.edgExpMask=this.msNtpExpBitmask),(0,Ft.V)()&&r.setPrerenderFeedCallDisabled(!0),{feedManager:r,layoutTemplateMap:i}});this.tryLoadFeedModuleBundle();(this.enableWidgetsFeedManager&&e?this.widgetsRegionDependencyPromise:this.getFeedDependencyPromise).catch(e=>{const n={...K.m3I.pb,stack:e.stack};(0,Se.J)(K.m3I.id),(0,X.vV)(K.m3I,`Failed to load feedDependencies bundle for ${t}. ${e.message||""}`,void 0,n),this.displayNetworkErrorWhenFeedDependenciesFailed=!0})},this._scrollToShowFeed=async(t={withRefresh:!1,scrollOnlyAboveTheTargetPosition:!1,withAnimation:!0,disableScroll:!1,showRefreshLoading:!1})=>{t={withRefresh:!1,scrollOnlyAboveTheTargetPosition:!1,withAnimation:!0,disableScroll:!1,showRefreshLoading:!1,...t??{}};const e=(0,At.lB)("top");if(e&&!t.disableScroll&&(t?.scrollOnlyAboveTheTargetPosition&&document.documentElement.scrollTop>e-8||window.scrollTo({top:e-8,behavior:t?.withAnimation?"smooth":"auto"})),t?.withRefresh){t.showRefreshLoading&&(this.config.enableLoaderWhenRefreshFlight?this.showSkeleton=!0:this.showPivotRefreshButton=!0);const e=this.enableWidgetsFeedManager&&this.displayWidgetsRegion?await this.widgetsRegionDependencyPromise:await this.getFeedDependencyPromise;if(e?.feedManager){const n=e.feedManager.callRefreshRegionsData({invalidateCache:!0,scrollToTop:!1});this.config.prerenderFeedRefresh&&n.finally(()=>{e.feedManager.isLastResponseSuccessful()?((0,Ht.du)(8),Q.YT.addOrUpdateTmplProperty("invalidfeedforprerender","0")):Q.YT.addOrUpdateTmplProperty("invalidfeedforprerender","1")}),t.showRefreshLoading&&n.finally(()=>{this.config.enableLoaderWhenRefreshFlight?this.showSkeleton=!1:this.showPivotRefreshButton=!1})}else t.showRefreshLoading&&window.setTimeout(()=>{this.config.enableLoaderWhenRefreshFlight?this.showSkeleton=!1:this.showPivotRefreshButton=!1},1e3);Q.YT.sendPageView({page:{name:"IAR",isAutoRefresh:!1}}),window.dispatchEvent(new CustomEvent("RefreshPillResetAbsoluteTimer"))}},this.scrollToShowFeed=()=>{this._scrollToShowFeed()},this.changeContentOffToVisible=()=>{const t=(0,le.zP)(o.h$);t&&t.updateFeeds("always","off","scrollDownButton")},this.getExperienceConfigInfo=(t,e=t,n="default")=>({instanceId:t,configRef:{experienceType:e,instanceSrc:n}}),this.setShowWeatherOneLiner=t=>{this.showWeatherOneLiner=t},this.widgetsUpsellButtonClicked=()=>{this.widgetsRegionRequiresTtvrCallback=!0,this.showWidgetsUpsellButton=!1,this.updateHeaderGridForNonAlways(),this.pageSettingsDataConnector?.updateFeedsForWidgetsToggle(!0)},this.topSitesIntersectionObserverCallback=t=>{if(this.topSitesHolder){if("off"===this.layoutState.selectedQuickLinksDisplaySetting)return this.topSitesHolder.style.opacity="0",void(this.topSitesHolder.style.visibility="hidden");this.topSitesHolder.style.opacity="1",this.topSitesHolder.style.pointerEvents="",this.topSitesHolder.style.zIndex=""}},this.setupTopSitesIntersectionObserver=()=>{if(!this.topSitesHolder)return;const t={root:null,rootMargin:"-117px 0px 0px 0px",threshold:[.99]};this.topSitesObserver=new IntersectionObserver(this.topSitesIntersectionObserverCallback,t),this.topSitesObserver.observe(this.topSitesHolder)},this.getReservedHeaderHeights=()=>{let t=0;const e=this.gridRowsMap.values();for(const n of e){const e=Number(n.split("px")?.[0]);isNaN(e)||(t+=e)}t+=Je(this),this.headerHeightNeeded=this.isFeedAlways?this.gridRowHeights.reduce((t,e)=>t+e,0):t},this.refreshTranslucentMode=()=>{const t=this.layoutState.displayBackgroundImageType||this.layoutState.currentBackgroundImageType;if(this.config.translucentFeed&&"off"!==t){this.showFeedTranslucent=!0;const t=this.config.translucentFeed?.enableBlur&&["always","peek","headingsonly"].includes(this.layoutState?.selectedFeedDisplaySetting)&&this.navIsSticky,e=this.config.translucentFeed?.enableBlur&&"myFeed"===this.nowPivotId;this.feedOverrideStyles="",this.recommendedSitesOverrideStyles="",t?this.feedOverrideStyles+="":this.config.translucentFeed?.feedOpacity&&(0,P.ud)()?this.feedOverrideStyles+="background-color: rgb(36 36 36 / "+(e?"0.5":this.config.translucentFeed?.feedOpacity)+");":this.config.translucentFeed?.feedOpacity&&!(0,P.ud)()&&(this.feedOverrideStyles+="background-color: rgb(247 247 247 /"+(e?"0.5":this.config.translucentFeed?.feedOpacity)+");"),this.feedOverrideStyles+=this.config.translucentFeed?.feedSidePadding?`padding-left: ${this.config.translucentFeed?.feedSidePadding}; padding-right: ${this.config.translucentFeed?.feedSidePadding};`:"";const n=!(this.childRefs?.recommendedSites&&!this.invisibleRecommendedSites)||this.showHeroAboveNav;this.feedOverrideStyles+=this.config.translucentFeed?.feedBorderRadius&&n?`border-radius: ${this.config.translucentFeed?.feedBorderRadius};`:"",this.feedOverrideStyles+=this.boxShadowStyles,this.recommendedSitesOverrideStyles+=this.isRecommendedSitesEnabled&&this.showHeroAboveNav?`border-radius: ${this.config.translucentFeed?.feedBorderRadius};`:"";return void((0,se.S)()&&"informational"==this.layoutState.currentLayout&&(0,ot.h_)()||(0,h.Nf)("backgroundImage","displayed"))}this.feedOverrideStyles="",this.recommendedSitesOverrideStyles="",this.showFeedTranslucent=this.scrollIsPastStyleThreshold&&this.layoutState.imageOfTheDayEnabled&&("headingsonly"===this.layoutState.selectedFeedDisplaySetting||"peek"===this.layoutState.selectedFeedDisplaySetting),(0,h.Nf)("backgroundImage",this.showFeedTranslucent?"displayed":"hidden")},this.onResize=()=>{this.refreshHeaderHeight(),this.calculateStickyBreakpointsDebounced(),this.renderBackgroundGallery&&this.checkGalleryPageFitAndDisplayToast(),this.renderMarketLanguageToggle&&this.checkMarketToggleFitOnPage(),this.overlapStateChange(),(0,l.Lg)()?.setItem(ot.Ph,"true"),Q.YT.addOrUpdateTmplProperty("vp-h",`${window?.innerHeight}`),this.debouncedFeedWidthCheck()},this.onScroll=(0,f.P)(()=>{this.handleHideRightClickMenu(),this.config.enableWidgetsRegion&&"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&!this.haveUpdateFeedStateOnScroll&&(A.U.updateFeedStateOnScroll.getActionSender(this.pageSettingsDataConnector).send(!0),this.haveUpdateFeedStateOnScroll=!0),this.onScrollSettablePromise.set();const t=window.scrollY<100,e=window.scrollY>S.gH;if(t==this.scrollIsPastStyleThreshold&&e==this.navIsSticky||(this.scrollIsPastStyleThreshold=t,this.navIsSticky=e,this.refreshTranslucentMode()),this.scrollCanTrigChannelStoreCoachmark){const t=1252;window.scrollY>t&&this.triggerChannelStoreCoachmark("scroll-wo-click")}this.navIsSticky&&Q.YT.addOrUpdateTmplProperty("StickyBreakpointTriggered","1");const n=(0,se.S)()&&"informational"==this.layoutState.currentLayout&&(0,ot.h_)();this.config.translucentFeed&&"off"!==this.layoutState.currentBackgroundImageType&&"theme"!==this.layoutState.currentBackgroundImageType&&!n&&(0,h.Nf)("backgroundImage","displayed"),this.config.complianceHyperlink&&this.updateComplianceLinkStyleOnScroll(),this.updateHeaderCoreOffset();const i=this.headerCoreRef?.shadowRoot?.querySelector?.(".header-end"),r=window.getComputedStyle(i)?.direction,o=i?.getBoundingClientRect(),s="ltr"===r?o?.left:o?.right,a=this.headerCoreRef?.search?.getBoundingClientRect(),c="ltr"===r?a?.right:a?.left,u="ltr"===r?s<c:s>c;(window.innerHeight<this.headerHeight||u)&&window.scrollY>0?this.headerGrid?.classList.add("headerIcon_hidden"):this.headerGrid?.classList.remove("headerIcon_hidden"),this.config.showCodexBingIcon&&this.updateHeaderCoreSearchData(),("focused"===this.layoutState.currentLayout||"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType)&&this.focusFeedBorderScrollFade(),this.overlapStateChange()}),this.onMouseMove=t=>{const e=window.innerHeight;if(!e)return;if(e-Math.floor(e/3)<t.clientY){if(Q.YT.addOrUpdateTmplProperty("edgChrmPgLwrThrd","1"),this.mousemoveListenerRemoved=!0,!this.config.enableWidgetsUpsellButton||this.displayWidgetsRegion||this.showWeatherOneLiner||this.feedHasLoaded)return void window.removeEventListener("mousemove",this.onMouseMove);if(void 0===this.showWeatherOneLiner&&this.weatherOnelinerConditionCheck)return;window.removeEventListener("mousemove",this.onMouseMove),(0,nn.Uk)(this.config.widgetsUpsellFrequencyCap).then(t=>{t&&(this.telemetryTags.widgetsUpsellButton=(0,rn.l)(V,{headline:V},J.MS.Open,J.EG.Click)?.getMetadataTag?.(),this.showWidgetsUpsellButton=!0,this.updateHeaderGridForNonAlways(),(0,nn.I0)())})}},this.onClickForTrigChannelStoreCoachmark=t=>{if(this.scrollCanTrigChannelStoreCoachmark){t.composedPath().find(t=>"A"===t.tagName)&&(window.removeEventListener("click",this.onClickForTrigChannelStoreCoachmark),this.scrollCanTrigChannelStoreCoachmark=!1)}},this.onClickInfopaneFlipperTab=()=>{this.numInfopaneTabChangeClicks+=1,2===this.numInfopaneTabChangeClicks&&this.triggerChannelStoreCoachmark("infopane-flips")},this.channelStoreOpened=()=>{window.removeEventListener("launchChannelStore",this.channelStoreOpened),window.removeEventListener("launchChannelStoreCoachmark",this.registerChannelStoreCoachmarkCallback)},this.registerChannelStoreCoachmarkCallback=async t=>{const e=t&&t.detail;await Ye(this.config,this.registerChannelStoreCoachmarkCallback,e)},this.onClickInfopaneAnchor=()=>{window.removeEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.removeEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor)},this.buildFocusBorderStyleClasses=()=>"focused"===this.layoutState.currentLayout||"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType?"navAndContent_border_shadow "+(0!=window.scrollY?"navAndContent_noshadow":""):"",this.openBackgroundGallery=()=>{this.backgroundDataConnector&&this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0)},this.updateQuickLinksDisplayOption=t=>{this.pageSettingsDataConnector&&t&&(this.pageSettingsDataConnector.updateQuickLinksDisplayOption(t,st.sL.MANUAL),(0,$.qU)(st.K5.quick_links_options,t))},this.updateComplianceLinkStyleOnScroll=()=>{const t=window.scrollY>0;t!==this.hideComplianceLink&&(this.hideComplianceLink=t,this.hideComplianceLink?this.complianceHyperlink&&this.complianceHyperlink.classList.add("complianceHyperlink_hide"):this.complianceHyperlink&&this.complianceHyperlink.classList.remove("complianceHyperlink_hide"))},this.calculateStickyBreakpointsDebounced=(0,It.A)(this.calculateStickyBreakpoints,300),this.getCompanyLogoFromLocalStorage=()=>{const t=(0,l.Lg)().supported&&(0,l.Lg)().getObject("companyLogo",null);if(!t||!t.default_logo)return"";return!this.layoutState.imageOfTheDayEnabled||!t.light_logo?t.default_logo||"":t.light_logo||""},this.onFlyoutEvent=(t,e)=>{let n;switch(this.flyoutOpen=e,t){case p.xV.settings:case p.xV.feedSettings:case p.xV.signInControl:case p.xV.editWelcomeGreeting:n=this.headerCoreRef?.end;break;case p.xV.search:case p.xV.imageSearch:n=this.headerCoreRef?.core;break;case p.xV.waffle:n=this.headerCoreRef?.start;break;case p.xV.addTopSite:case p.xV.editTopSite:case p.xV.topSiteOverflowPanel:n=this.topSitesHolder;break;case p.xV.museumCard:this.museumCardShown=e;break;case p.xV.locationMarkerCard:n=this.shadowRoot?.getElementById?.("locationMarkerHolder");break;case p.xV.recommendedSitesSetting:n=this.shadowRoot?.getElementById?.("recommendedSites")}if(n&&(n.style.zIndex=e?g.P.Flyout.toString():null),n&&t===p.xV.settings&&(n.style.zIndex=e?g.P.Flyout.toString():null),t===p.xV.topSiteOverflowPanel&&(n.style.zIndex=e?(g.P.Flyout+1).toString():null),t!==p.xV.hamburgerMenu&&t!==p.xV.navOverflow&&t!==p.xV.rewardsDialog&&t!==p.xV.rewardsSignInDialog||this.headerCoreRef&&(this.headerCoreRef.style.zIndex=e?"302":(g.P.Nav+2).toString()),t===p.xV.toast&&(this.topSitesHolder.style.zIndex=e?(g.P.Nav+1).toString():(g.P.Over+3).toString()),t===p.xV.actionMenuOpen){const t=this.shadowRoot?.getElementById?.("g_nav");t?.style&&(t.style.zIndex=e?"0":"")}if(this.displayWidgetsRegion){const t=this.shadowRoot?.getElementById?.("widgets");t?.style&&(t.style.zIndex=e?"1":(g.P.Nav+2).toString())}},this.switchListenerCallback=t=>{Q.YT.addOrUpdateTmplProperty("fl","1"),this.isOnPersonalizeOrM365Page=!1,this.isOnM365Page=!1;const e=this.nowPivotId;this.nowPivotId=t?.newSelection?.pivotId||"",this.showHeroAboveNav=d.T3.IsHeroNTP&&this.config?.showHeroAboveNav&&"myFeed"===this.nowPivotId,this.hasChangedFeed=!!e&&e!==this.nowPivotId;const n=this.config.enableNoWorkFeed&&this.hasChangedFeed&&(e===z||this.nowPivotId===z);if(this.refreshTranslucentMode(),(d.T3.IsHeroNTP&&this.showHeroAboveNav||n)&&(this.updateHeaderGrid(),this.refreshHeaderHeight()),t&&t.newSelection){const e=t.newSelection;Q.YT.addOrUpdateTmplProperty("fl","2"),this.config.enableGridViewFeed||Q.YT.addOrUpdateTmplProperty("pagepivot_selectedPivot",JSON.stringify(e.pivotId)),this.startContentLoad(e.configIndexRef,e.context,void 0,e.pivotId),this.isOnM365Page="productivityhub"===e.pivotId.toLocaleLowerCase(),this.isOnPersonalizeOrM365Page="myInterests"===e.pivotId||this.isOnM365Page||"navigationPage"===e.pivotId}!t.oldSelection||this.transitionFromContentOff||this.isWorkFeed||window.requestAnimationFrame(()=>{this.scrollToShowFeed()}),this.transitionFromContentOff=!1},this.handleColumnArrangementChange=t=>{if(this.columnArrangement=t,this.enableOneColumn=this.config.enableOneColumn&&"c1"===this.columnArrangement,Q.YT.addOrUpdateTmplProperty("pageColumn",this.columnArrangement),(0,se.S)()){const t=this.shadowRoot?.querySelector?.("background-image");t&&(t.recommendedSitesHeight=this.recommendedSitesHeight)}Q.YT.updatePageMetadata({page:{viewType:(0,R.ne)()}},!0),this.config.companyLogo&&(this.showCompanyLogo=!("c1"===this.columnArrangement||"c2"===this.columnArrangement)),this.updateHeaderGrid(),this.refreshHeaderHeight(),this.updateHeaderCoreData()},this.getClassicCoachmarkStrings=()=>{const t={classicCoachmarkTitle:this.strings?.classicCoachmarkTitle,classicCoachmarkDescription:this.strings?.classicCoachmarkDescription,classicCoachmarkCloseButton:this.strings?.classicCoachmarkCloseButton};return this.config.enableAIString&&(t.classicCoachmarkTitle=this.strings?.aiCoachmarkTitle),t},this.getRubyToggleStrings=()=>this.config.enableAIString&&!this.config.enableRubyDiscoverFeedStrings?{copilotDiscoverTooltip:this.strings?.copilotDiscoverAITooltip??"is on. Turn off to go back to the previous feed.",copilotDiscover:this.strings?.copilotDiscoverAI??"AI Discover",copilotDiscoverPreview:this.strings?.copilotDiscoverAIPreview??"Preview"}:{copilotDiscoverTooltip:this.strings?.copilotDiscoverTooltip??"is on. Turn off to go back to the previous feed.",copilotDiscover:this.strings?.copilotDiscover??"{entityName}",copilotDiscoverPreview:this.strings?.copilotDiscoverPreview??"{entitySuffix}"},this.onHeaderSpaceHolderTransitionEnd=()=>{Jt.W.headerTransitionEnd.getActionSender(this.pageSettingsDataConnector).send()},this.onMarketValueChange=async t=>{this.pageSettingsDataConnector||(this.pageSettingsDataConnector=(0,le.zP)(o.h$)),t&&this.pageSettingsDataConnector&&(A.U.marketUpdated.getActionSender(this.pageSettingsDataConnector)?.send(t),(0,Ht.TI)(2))},this.checkAndUpdateLanguageToggle=()=>{if("marketmismatch"===d.T3.LanguageRegionMismatch||"marketmismatch"===d.T3.LanguageRegionMismatchExplicit){if("language"==d.T3.MarketMismatchDetail.type){const t=this.targetLanguageOnMismatch(s.n);t&&(this.renderMarketLanguageToggle=!0,this.localeMarket=t,"marketmismatch"===d.T3.LanguageRegionMismatchExplicit?Q.YT.addOrUpdateTmplProperty("marketMismatchToggleForExplicitMismatch","1"):"marketmismatch"===d.T3.LanguageRegionMismatch&&Q.YT.addOrUpdateTmplProperty("marketMismatchForToggle","1"))}}},this.setOverriddenFeedConfig=t=>{this.overriddenFeedConfig={...t}},this.savePrefsBeforeUnload=()=>{this.saveViewportInPref(),this.saveCopilotSupportedInPref()},this.saveViewportInPref=()=>{if((0,se.S)()){const{innerWidth:t,innerHeight:e}=window;at.f.savePreferenceSetting(st.bJ.viewport,{width:t,height:e},!1)}},this.saveCopilotSupportedInPref=t=>{(0,se.S)()&&(t?(0,ct.U4)(t):(0,un.P)().then(t=>{(0,ct.U4)(t)}))},this.saveViewportForBgRightClickMenu=()=>{if((0,se.S)()){const{innerWidth:t,innerHeight:e}=window;this.windowInnerHeight=e,this.windowInnerWidth=t,this.ref_rightClickMenu&&(this.bgRightClickMenuWidth=this.ref_rightClickMenu.clientWidth,this.bgRightCLickMenuHeight=this.ref_rightClickMenu.clientHeight)}},this.focusControlOnWheel=t=>{this.blurGridViewWhenActive(t.target)},this.focusControlOnScrollKeyUp=t=>{"PageDown"!=t.key&&"PageUp"!=t.key||this.blurGridViewWhenActive(t.target)},this.handleSocialBarReaction=t=>{const{id:e,reactionType:n}=t.detail;e&&n&&[G.hr.upvote,G.hr.downvote].includes(n)&&this.onSocialBarReactedSettablePromise.set()},this.openChannelStore=t=>{this.renderChannelStoreEvent=t,window.removeEventListener(D,this.openChannelStore)},this.overlapStateChange=(0,It.A)(async()=>{if(!(0,se.S)()||!this.navAndContentFeedRef)return void(this.overlapState={state:0,feedbackState:0});const t=((0,m.KP)((new m.bb).data.innerWidth,"innerWidth")-this.navAndContentFeedRef.getBoundingClientRect().width)/2,e=await(0,Rt.TW)(Mt.u.floatButtonGroupWC),n=e?e.getBoundingClientRect().width+12:42;let i,r,o;const s=(0,m.KP)((new m.bb).data.innerHeight,"innerHeight"),a=s-this.navAndContentFeedRef.getBoundingClientRect().top,c=e?e.getBoundingClientRect().height:68;o=s-(e?e.getBoundingClientRect().top:945)-c+5>a?0:1,r=t>=n?0:t<=0?2:1,i=t>=42?0:t<=0?2:1,this.overlapState={state:i&&o,feedbackState:r}},10),this.lowEndDeviceHandler=t=>{this.isLowEndDevice=t?.detail?.isLowEndDevice??!1},this.handleSearchSuggestionPrompts=t=>{this.hideSearchSuggestionPrompts=t?.detail?.hide,this.updateHeaderGrid(),this.refreshHeaderHeight(),this.updateHeaderCoreSearchData()},this.handleFeedRefreshWhenPageHiddenVisibilityChange=()=>{if(this.lastDocumentVisibilityState!=document.visibilityState)if(this.lastDocumentVisibilityState=document.visibilityState,"hidden"===document.visibilityState&&null===this.pageHiddenStartTime)this.pageHiddenStartTime=Date.now();else if("visible"===document.visibilityState&&this.pageHiddenStartTime){const t=Date.now()-this.pageHiddenStartTime;let e=0;this.config.pageRefreshIntervalTimeS&&this.config.pageRefreshIntervalTimeS>0&&(e=1e3*this.config.pageRefreshIntervalTimeS),e>0&&"headingsonly"!==this.layoutState.selectedFeedDisplaySetting&&"off"!==this.layoutState.selectedFeedDisplaySetting&&t>=e&&(Q.YT.addOrUpdateTmplProperty("FeedReferesh","1"),this._scrollToShowFeed({withRefresh:!0,disableScroll:!this.headerGridHidden,showRefreshLoading:!0})),this.pageHiddenStartTime=null}},this.handleFeedRefreshForPrerender=()=>{"hidden"===document.visibilityState&&(0,zt.EZ)()&&"headingsonly"!==this.layoutState.selectedFeedDisplaySetting&&"off"!==this.layoutState.selectedFeedDisplaySetting&&(this.numFeedRefreshes++,this._scrollToShowFeed({withRefresh:!0,disableScroll:!this.headerGridHidden,showRefreshLoading:!1})),Q.YT.addOrUpdateTmplProperty("numfeedrefreshes",this.numFeedRefreshes.toString())},this.isFullPageBlur=()=>!!(this.config.translucentFeed?.enableBlur&&this.showFeedTranslucent&&["always","peek","headingsonly"].includes(this.layoutState?.selectedFeedDisplaySetting)&&this.navIsSticky)||this.showDarkIcon,this.getTheme=()=>this.needDarkThemeIcons?"lightTitle":this.layoutState?.imageOfTheDayEnabled&&!this.isFullPageBlur()?"darkOnBackgroundImage":(0,P.ud)()?"darkTitle":"lightTitle",this.updateWidgetsDisplayAndStampTmpl=t=>{Q.YT.addOrUpdateTmplProperty("widgets",t?"1":"0"),Q.YT.addOrUpdateTmplProperty("widgetsPref",t?"1":"0"),this.displayWidgetsRegion=t&&!(this.noWidgetsData||window.noWidgetsData)},this.updateWidgetsDisplayAfterHydration=()=>{this.displayWidgetsRegion=this.displayWidgetsRegion&&!window.ssrNoWidgetsData},this.onCloseSpotlight=()=>{this.showSpotlightBackgroundGalleryCard=!1},this.toggleBgRightClickMenu=t=>{const e=t?.detail?.event;if(Q.YT.addOrUpdateTmplProperty("background_image_right_click","1"),e&&this.ref_rightClickMenu){const t=e.composedPath(),n=t?.[0];if(n.classList.contains("header-core")||n.classList.contains("navAndContent")||n.classList.contains("overlayGradient")||n.classList.contains("overlay_hide")){this.showRightClickMenu=!0,this.windowInnerWidth&&this.windowInnerHeight&&this.bgRightClickMenuWidth&&this.bgRightCLickMenuHeight||this.saveViewportForBgRightClickMenu();const t=e.clientY+this.bgRightCLickMenuHeight+20>this.windowInnerHeight?e.clientY-this.bgRightCLickMenuHeight:e.clientY,n=e.clientX+this.bgRightClickMenuWidth+20>this.windowInnerWidth?e.clientX-this.bgRightClickMenuWidth:e.clientX;return this.ref_rightClickMenu.style.top=`${t}px`,this.ref_rightClickMenu.style.left=`${n}px`,Q.YT.sendActionEvent(this.ref_rightClickMenu,J.EG.RightClick,J.MS.Open),!1}this.handleHideRightClickMenu()}return!0},this.handleViewImage=()=>{window.dispatchEvent(new CustomEvent("backgroundImageWCToggle"))},this.handleEditImage=()=>{window.dispatchEvent(new CustomEvent("backgroundImageWCEdit"))},this.handleRefreshPage=()=>{window.location.reload()},this.handleHideRightClickMenu=()=>{this.showRightClickMenu=!1,this.ref_rightClickMenu&&(this.ref_rightClickMenu.style.top="0px",this.ref_rightClickMenu.style.left="-1000px")},this.handleContentCardRightClick=t=>{const{detail:e={}}=t,{actionState:n,event:i,initCardAction:r}=e;this.ref_contentCardActionMenuAnchor&&(this.ref_contentCardActionMenuAnchor.style.top=`${i.pageY}px`,this.ref_contentCardActionMenuAnchor.style.left=`${i.pageX}px`,n.buttonElement=this.ref_contentCardActionMenuAnchor,r(n))},this.seenContentHandler={onCardSeenHandler:t=>{(0,ln.Q_)(t)},addCardToPendingList:t=>{(0,ln.sY)(t)}},this.changeRenderFODStatus=t=>{this.updatedFeedDisplaySetting=t.detail?.updatedFeedDisplaySetting}}get isFeedAlways(){return"always"===this.layoutState?.selectedFeedDisplaySetting&&!this.config?.disableFeed&&!this.isWorkFeed}get isWorkFeed(){return this.config.enableNoWorkFeed&&(this.isOnM365Page||this.nowPivotId===z||(0,w.kP)()===z)}get topBannerOffsetHeight(){return this.displayConditionalBanner?46:0}get responsiveSupported(){return this.config.enableResponsiveFeed}get shouldRenderSkeleton(){return(this.config.enableLoaderFlight||this.config.enableLoaderWhenRefreshFlight)&&this.showSkeleton&&!this.isOnM365Page&&("headingsonly"===this.layoutState.selectedFeedDisplaySetting&&this.contentConfigInfo||"headingsonly"!==this.layoutState.selectedFeedDisplaySetting)}get shouldRenderSuggestionPrompts(){const t=this.config?.ntpCSPExp,e=this.config?.enableTurboInteg,n=this.config?.enableNtpCSP,i=this.config?.turboIntegExp,r=this.config?.enableStaticAgentPrompts,o=this.config?.staticAgentPrompts,s=this.config?.enableAnimationPill,a=this.config?.enableTurboAgentPrompts,c=this.config?.turboAgentPrompts,u=this.showSearchSuggestionPrompts,d=this.config?.enablePromptsInSidebar,l=this.config?.promptsInSidebar;return!(!(t||i||l||o||s||c||u)||!this.layoutState?.isCodexBingUpsellEnabledByPolicy)&&(s?Q.YT.addOrUpdateTmplProperty("enableAnimationPill","1"):i?Q.YT.addOrUpdateTmplProperty("turboIntegExp","1"):t?Q.YT.addOrUpdateTmplProperty("ntpCSPExp","1"):l?Q.YT.addOrUpdateTmplProperty("promptsInSidebar","1"):o?Q.YT.addOrUpdateTmplProperty("staticAgentPrompts","1"):c?Q.YT.addOrUpdateTmplProperty("turboAgentPrompts","1"):u&&Q.YT.addOrUpdateTmplProperty("enableSearchSuggestionPrompts","1"),this.layoutState?.showSuggestions&&(n||e||d||r||s||a||u))}get enableWidgetsFeedManager(){return this.config?.enableWidgetsRegion||this.showHeroAboveNav}get disableWeatherInHeader(){return this.config?.disableGreetInLowEndNoFeed&&(0,ot.h_)()&&["headingsonly","off"].includes(this.layoutState?.selectedFeedDisplaySetting)}get enableMouseMoveListener(){return this.config?.enableWidgetsUpsellListener&&("headingsonly"===this.layoutState?.selectedFeedDisplaySetting||"off"===this.layoutState?.selectedFeedDisplaySetting)&&!this.showHeroAboveNav}get topSitesHeightBelowSearchBoxForPeekMode(){return an(this.layoutState,this.columnArrangement,this.isWorkFeed)}get isRecommendedSitesEnabled(){return this.childRefs.recommendedSites&&!this.showSearchBoxForHero&&!(this.showHeroAboveNav&&!(0,se.S)())}get recommendedSitesHeight(){return function(t,e){if(!t)return 0;switch(e){case"onerow":return 52;case"tworows":return 88;case"threerows":return 124;default:return 0}}(this.isRecommendedSitesEnabled,this.recommendedSitesDisplaySetting)}get heroSegmentType(){return Be()}get hideTopSectionSSRHero(){return this.showHeroAboveNav&&this.shouldAutoScroll&&!(0,se.S)()}get showNavAndContentTemplate(){return"off"!==this.layoutState.selectedFeedDisplaySetting&&!this.config.disableFeed}get weatherOnelinerConditionCheck(){return!this.isNewTabPageContentManagedByPolicy&&!this.disableWeatherInHeader&&this.showWeatherInFeedOff&&!this.childRefs.pulseEdgenext&&this.layoutState.greetingEnabled&&!this.shouldShowNotificationMiniCard&&this.childRefs.weatherOneLiner&&("headingsonly"===this.layoutState.selectedFeedDisplaySetting||"off"===this.layoutState.selectedFeedDisplaySetting)&&!this.feedHasLoaded&&!this.displayWidgetsRegion&&!this.showHeroAboveNav&&!this.showWidgetsUpsellButton}get showSearchBoxForHero(){return He(this.config)}get isTopSitesDisabled(){return function(t,e,n){const{selectedQuickLinksDisplaySetting:i}=e,r=n&&t.showSearchBoxForHero?.hideTopSites;return"off"===i||r}(this.config,this.layoutState,this.showSearchBoxForHero)}get fixedSearchBox(){return this.showSearchBoxForHero&&this.config?.showSearchBoxForHero?.keepScroll&&!this.userScrolled}get showSearchSuggestionPrompts(){if(!this.config?.enableSearchSuggestionPrompts&&!this.config?.searchSuggestionPromptsTmpl||!this.layoutState||this.hideSearchSuggestionPrompts)return!1;const{enableWidgetsRegion:t,selectedFeedDisplaySetting:e,selectedQuickLinksDisplaySetting:n}=this.layoutState,i="off"===n,r="off"===this.recommendedSitesDisplaySetting;return"off"===e||"headingsonly"===e||("peek"===e?!t||i||r:"always"===e&&(!t&&i&&r))}recommendedSitesDisplaySettingChanged(){this.config?.enableSearchSuggestionPrompts&&this.updateHeaderCoreSearchData()}async experienceConnected(){if(this.testSSRCrashOnVPtest(),Q.YT.addOrUpdateTmplProperty("isNTPLowEndDevice",(0,ot.h_)()?"1":"0"),Q.YT.addOrUpdateTmplProperty("isEdgeLowEndDevice",(0,ot.R8)()?"1":"0"),(this.config?.enableSearchSuggestionPrompts||this.config?.searchSuggestionPromptsTmpl)&&document.addEventListener("searchSuggestionPrompts",this.handleSearchSuggestionPrompts),this.showHeroAboveNav=d.T3.IsHeroNTP&&this.config?.showHeroAboveNav,(this.config.earlyLoadSuperComponentConfig||this.config.enableWidgetsRegion)&&await xe.D.initConfig(),this.enableCopilotDiscoverSuperNavSetting=await this.checkRubyToggleEligibility(this.config.enableRubyToggleSuperNav),(0,se.S)()){const t=(0,ot.lV)();$e.t.setMetadatas(t);const{oneSvcUniTunMode:e}=this.config;e?((0,l.Lg)().setItem("oneSvcUniTunMode",e.toString()),ae.vv.set("oneSvcUniTunMode",e)):((0,l.Lg)().removeItem("oneSvcUniTunMode"),ae.vv.delete("oneSvcUniTunMode"))}window.shouldResetDwellTimer=d.T3.IsHeroNTP,this.updateStickyHeaderHeight(),(0,Y.Ak)(!u.Rb.IsPrerender,"Header");const t=(0,Dt.rk)();if(t&&(this.config.topSitesCollapsibleControlConfig=t),this.config.enableLoaderFlight)if((0,se.S)()){this.skeletonEleFromSSR=document?.body?.querySelector("edge-chromium-page").shadowRoot?.querySelector?.("#skeleton-loader");const t=this.isFeedContentDisplayed();this.skeletonEleFromSSR&&t&&(this.skeletonEleFromSSR.remove(),this.skeletonEleFromSSR=null),t||(this.skeletonEleFromSSR||(this.showSkeleton=!0),this.skeletonObserver=new MutationObserver(this.skeletonObserverCallback),this.skeletonObserver.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0}))}else this.showSkeleton=!0;if(this.childRefs=this.config.childRefs,this.childRefs.feedOffDialog&&window.addEventListener("showFeedOffDialog",this.changeRenderFODStatus),this.updateHeaderCoreSearchData(),this.pageSettingsDataConnector=(0,le.zP)(o.h$),(0,se.S)()){if((0,ut.i)(t=>this.onMarketValueChange(t),Ce.x),this.initializeDevTools(),"true"!==u.Rb.ClientSettings.static_page){const t=(0,_t.X)(2);(0,Et.M)(gn?"service-worker.js":"./ntp/service-worker.js",{enableEnterprisePrecache:u.Rb.IsBlendedEnterprise,...this.config.serviceWorker,...(0,ot.Cw)()},t,!1,async()=>{Xt.initializePushSubscriptionManager(t)},ot.TK)}this.enableSpotlightButton=this.config.enableSpotlightButton,this.reportPerfMarkers(),(this.config?.appendGoogleSites||this.config?.isGoogleTopSitesCtrl)&&"1"===(0,l.Lg)()?.getItem("tsAlternate")&&Q.YT.addOrUpdateTmplProperty("no_mv_sites","1")}!function(t){if(!t.useEnterpriseCompliance)return;const e=Bt.V.getInstance().rootReducer.connector(o.bn),n=Lt.p.useEnterpriseCompliance.getActionSender(e);n&&n.send(!0)}(this.config),(0,Y.dT)().then(t=>{if(this.isTtvrFiredAndCanUseDom=(0,se.S)(),(0,se.S)()&&this.shouldAutoScroll&&("peek"!==this.layoutState.selectedFeedDisplaySetting||"off"!==this.quickLinksDisplaySetting||window.isSSRCompleted||this.shouldAutoScroll&&(0,se.S)()&&this.scrollDownOnLoad(),this.shouldAutoScroll=!1,window.setTimeout(()=>{window.addEventListener("scroll",()=>{this.invisibleTopSites=!1,this.userScrolled=!0,this.recommendedSitesHolder&&(this.invisibleRecommendedSites=!1,this.updateNavFeedBorderRadius()),this.invisibleSearchBox=!1},{once:!0})},0)),u.Rb.IsPrerender)(0,zt.GP)().then(()=>{const t=(0,Z.ZF)().TTVR+(0,Y.W4)(tt.xF);(0,dt.B)(62,u.Rb.IsPrerender,!isNaN(t)&&t||performance.now())});else{const e=t.find(t=>"TTVR"===t[0])?.[1];(0,dt.B)(62,u.Rb.IsPrerender,e)}this.renderMarketLanguageToggle&&Q.YT.addOrUpdateTmplProperty("marketToggleLoaded",this.checkMarketToggleFitOnPage()?"1":"0"),(0,se.S)()&&(this.updateHeaderGrid(),this.refreshHeaderHeight(),this.config?.enableTcfConsentExpireBanner&&"us"===u.Rb?.ClientSettings?.geo_country?.toLocaleLowerCase()&&"california"!==u.Rb?.ClientSettings?.geo_subdivision?.toLocaleLowerCase()&&"connecticut"!==u.Rb?.ClientSettings?.geo_subdivision?.toLocaleLowerCase()&&(0,Ie.BS)())}),(0,p.vs)(this.onFlyoutEvent),this.columnArrangement=(0,R.TU)().currentColumnArrangement,this.enableOneColumn=this.config.enableOneColumn&&"c1"===this.columnArrangement,Q.YT.addOrUpdateTmplProperty("pageColumn",this.columnArrangement),(0,R.TU)().subscribe(this.handleColumnArrangementChange),re.initialize(),this.recommendedSitesDisplaySetting=await async function(t){if(!t.childRefs.recommendedSites)return;let e=!1;const n=(0,le.zP)(o.h$);if(n&&n.getPageSettingsStateAsync){const t=await(n.getPageSettingsStateAsync?.());e=["headingsonly","off"].includes(t?.selectedFeedDisplaySetting||"")}return(0,Le.F7)({enableRecommendedSitesSelection:!0,showDefault3Rows:e})}(this.config);const e=(0,le.zP)(o.ql),i=e&&e.getCurrentState();i&&i.settings&&(this.hideWidgetsBasedOnPolicy=!i.settings.isShowCompanyAndIndustry);let r=!1;const s=new I.e;let a=!1;(0,de.vQ)(o.h$,async t=>{if(!t.isLoadCompleted)return;this.layoutState||(this.shouldAutoScroll=function(t,e){let n=d.T3.IsHeroNTP&&t.shouldAutoScrollHero&&!(t.heroNoPromoLayout&&["headingsonly","off"].includes(e.selectedFeedDisplaySetting));return He(t)&&(n=n&&t?.showSearchBoxForHero?.keepScroll),n}(this.config,t)),!(0,se.S)()||this.widgetsLazyLoaded||!t.enableWidgetsRegion||"off"!==t.selectedFeedDisplaySetting&&"headingsonly"!==t.selectedFeedDisplaySetting||(this.widgetsLazyLoaded=!0,await Promise.all([n.e("common-feed-libs"),n.e("widgets-region")]).then(n.bind(n,53250))),s.set();const e=this.layoutState;this.layoutState=t,(this.config.enableNtpCSP||this.config.enableTurboInteg||this.config.enableAnimationPill||this.config.enablePromptsInSidebar||this.config.enableStaticAgentPrompts||this.config.enableTurboAgentPrompts||this.config.enableSearchSuggestionPrompts||this.config.searchSuggestionPromptsTmpl)&&this.updateHeaderCoreSearchData(),!e&&t.enableWidgetsRegion&&(this.isPageLoadedWithWidgets=!0),this.pageLoadedWithContentDisabled=this.config.enableWidgetsRegion&&e&&"off"===e.selectedFeedDisplaySetting;const i=this.getShowWidgets();if(this.config.enableWidgetsRegion&&!e&&this.updateWidgetsDisplayAndStampTmpl(i),!e&&!a&&window.ssrLayoutState?.selectedFeedDisplaySetting&&window.ssrLayoutState.selectedFeedDisplaySetting!==t.selectedFeedDisplaySetting){const{primaryAccountInfo:e,...n}=t;(0,X.vV)(K.hF2,"SSR Layout mismatch CSR Layout",void 0,{...K.hF2.pb,customMessage:`SSR Layout:${window.ssrLayoutState?.selectedFeedDisplaySetting}; CSR Layout:${t.selectedFeedDisplaySetting}; edgeHeader: ${JSON.stringify(window.edgeNTPHeader)}`,stateInfo:`${JSON.stringify(n)}`}),a=!0}this.config.disableFeed&&(this.layoutState.selectedFeedDisplaySetting="off",this.layoutState.currentLayout="custom"),"off"===t.selectedFeedDisplaySetting&&(this.isFeedRendered=!1),this.shouldRenderToastWC="off"===t.selectedFeedDisplaySetting||"headingsonly"===t.selectedFeedDisplaySetting&&!this.isFeedRendered,this.isAlwaysMode="always"===t.selectedFeedDisplaySetting,this.config.showCodexBingIcon&&this.updateHeaderCoreSearchData(),!this.isAlwaysMode&&this.hideQuickLinks&&this.displayQuickLinks(),this.quickLinksDisplaySetting=t.selectedQuickLinksDisplaySetting,Q.YT.addOrUpdateTmplProperty("tsLayout",`${this.quickLinksDisplaySetting}`),this.shouldShrinkHeader="peek"===this.layoutState.selectedFeedDisplaySetting||"onerow"===this.quickLinksDisplaySetting||"tworows"===this.quickLinksDisplaySetting||"off"!==this.recommendedSitesDisplaySetting,this.shouldAutoScroll&&this.shouldShrinkHeader&&((0,se.S)()||"off"===this.quickLinksDisplaySetting||(this.invisibleSearchBox=!0),this.invisibleTopSites=!0,"off"!==this.recommendedSitesDisplaySetting&&(this.invisibleRecommendedSites=!0,this.updateNavFeedBorderRadius()));let o,c=!1,u=!1,h=!1,f=!1,p=!1,g=!1;if(e){if(c=e.selectedQuickLinksDisplaySetting!==t.selectedQuickLinksDisplaySetting,u=e.selectedFeedDisplaySetting!==t.selectedFeedDisplaySetting,h=e.imageOfTheDayEnabled!==t.imageOfTheDayEnabled,f=e.currentLayout!==t.currentLayout,p=e.currentBackgroundImageType!==t.currentBackgroundImageType,g=e.showSuggestions!==t.showSuggestions,this.transitionFromContentOff="off"===e.selectedFeedDisplaySetting&&"off"!==t.selectedFeedDisplaySetting,o=this.isWorkFeed&&("always"===e.selectedFeedDisplaySetting&&"peek"===t.selectedFeedDisplaySetting||e.selectedFeedDisplaySetting===t.selectedFeedDisplaySetting),c){const e="onerow"===t.selectedQuickLinksDisplaySetting||"tworows"===t.selectedQuickLinksDisplaySetting;this.handleTopSitesVisibleChange(e,t),(0,l.Lg)()?.setItem(ot.Ph,"true")}g&&this.updateHeaderGrid(),this.config.enableWidgetsUpsellListener&&(this.enableMouseMoveListener&&!this.mousemoveListenerRemoved?window.addEventListener("mousemove",this.onMouseMove):"headingsonly"!==t.selectedFeedDisplaySetting&&"off"!==t.selectedFeedDisplaySetting?(this.showWidgetsUpsellButton=!1,window.removeEventListener("mousemove",this.onMouseMove)):t.enableWidgetsRegion&&(this.showWidgetsUpsellButton=!1,this.mousemoveListenerRemoved=!0,window.removeEventListener("mousemove",this.onMouseMove))),this.config?.enableWidgetsRegion&&this.feedManager&&"off"===t.selectedFeedDisplaySetting&&!this.widgetsFeedManager?.widgets?.[0]&&!this.feedManager?.widgets?.[0]&&(this.feedManager=void 0,this.getFeedDependencyPromise=void 0);let n=!1;if(this.config?.enableWidgetsRegion&&e.enableWidgetsRegion!==t.enableWidgetsRegion&&!e.enableWidgetsRegion&&(this.config.useDedicatedWidgetsManager?(n=!0,window.setTimeout(async()=>{this.updateWidgetsDisplayAndStampTmpl(i),await this.ensureWidgetsManagerLoaded(),this.widgetsFeedManager.skipInitialRender=!0,this.refreshWidgetsAndFeed(),this.updateHeaderGrid(),this.refreshHeaderHeight()},0)):this.widgetsChangedWhileHidden?(this.widgetsRefreshHandler(),this.widgetsChangedWhileHidden=!1):this.feedManager?.widgets?.[0]||(n=!0,window.setTimeout(async()=>{this.updateWidgetsDisplayAndStampTmpl(i),await this.ensureWidgetsManagerLoaded(),this.feedManager?.feedEventAggregator&&!this.widgetsFeedManager?.widgets?.[0]&&"off"!==t.selectedFeedDisplaySetting&&this.feedManager?.callRefreshRegionsData({invalidateCache:!0,scrollToTop:!0},!0),this.widgetsFeedManager?.feedEventAggregator&&!this.widgetsFeedManager?.widgets?.[0]&&this.widgetsFeedManager.callRefreshRegionsData({invalidateCache:!0,scrollToTop:!0},!0),this.updateHeaderGrid(),this.refreshHeaderHeight()},0))),n||this.updateWidgetsDisplayAndStampTmpl(i),this.config.enableWidgetsRegion&&!this.feedManager&&this.pivotManager&&"off"!==t.selectedFeedDisplaySetting){const{selectedPivot:t}=this.getViewFeedConfigAndPivot();"myFeed"==t&&(Q.YT.addOrUpdateTmplProperty("feedReinit","1"),this.pageLoadedWithContentDisabled=!0,this.initFeedDependencies(t))}this.config?.enableWidgetsRegion&&!this.config.useDedicatedWidgetsManager&&!this.feedManager?.waterfall?.[0]&&this.feedManager?.feedEventAggregator&&"off"!==e.selectedFeedDisplaySetting&&this.feedManager.callRefreshRegionsData(),u&&(Q.YT.addOrUpdateTmplProperty("feedChanged","1"),(0,l.Lg)()?.setItem(ot.Ph,"true"),window.setTimeout(()=>{re.handleSettingUpdate(t.selectedFeedDisplaySetting)},0)),f&&(Q.YT.addOrUpdateTmplProperty("layoutChanged","1"),(0,l.Lg)()?.setItem(ot.Ph,"true"))}this.config.enableWidgetsRegion&&Promise.all([(0,Y.dT)()]).then(async()=>{this.hideWidgets=!1}),this.isNewTabPageContentManagedByPolicy=this.layoutState.isContentFeedManagedByPolicy,this.isAppLauncherAllowedByPolicy=!1!==this.layoutState.isAppLauncherEnabledByPolicy,o&&!h||(this.updateHeaderGrid(),this.refreshHeaderHeight(),this.refreshTranslucentMode(),this.updateHeaderCoreData(),this.updateHeaderCoreOffset(),this.checkThemeColorIcons(),(0,$t.MR)(r),r=!0),(0,se.S)()&&(e&&((c||u||h)&&(this.fireLayoutAnimationComplete(),scrollTo(0,0),await(0,y.jh)(400)),await(0,xt.P)(),this.calculateStickyBreakpoints()),this.config.companyLogo&&this.layoutState.isCompanyLogoEnabledByPolicy&&this.getCompanyLogo(),await(0,xt.P)(),window.setTimeout(()=>this.overlapStateChange()),this.layoutState.configData?.channel&&Q.YT.addOrUpdateTmplProperty("edgch",this.layoutState.configData?.channel),this.config.enableNetworkErrorToast||this.config.enableNetworkErrorToastVpTest||this.config.enableNetworkErrorCF?(0,Y.dT)().then(()=>{"1"===(0,l.Lg)()?.getItem("netErrToast")&&Q.YT.addOrUpdateTmplProperty("netErrToast","1"),window.addEventListener("appError",this.checkNetworkRelatedError),window.addEventListener("offline",this.showNetworkErrorToast);navigator.connection.addEventListener("change",this.checkNetworkStatus),this.config.enableNetworkErrorToastVpTest&&window.setTimeout(()=>{window&&window.dispatchEvent(new CustomEvent("appError",{detail:{errorId:44700}}))},5e3)}):(0,Y.dT)().then(()=>{(0,l.Lg)()?.removeItem("netErrToast")}),"headingsonly"!==t.selectedFeedDisplaySetting&&"off"!==t.selectedFeedDisplaySetting||"off"===t.currentBackgroundImageType?(this.showSpotlightButton=!1,this.showSpotlightHoverMask=!1):(this.config.enableSpotlightButton&&(this.showSpotlightButton=!0),this.config.enableSpotlightHover&&(this.showSpotlightHoverMask=!0)),(u||p||c)&&(0,Ht.lw)(),(this.headerCoreTopEndData?.showRubyToggleClassic||this.headerCoreTopEndData?.showRubyToggleFeedDisplaySetting)&&(this.headerCoreTopEndData.isFeedOffMode="off"===t.selectedFeedDisplaySetting,this.headerCoreTopEndData.isHeadingsOnlyMode="headingsonly"===t.selectedFeedDisplaySetting))}),this.hideQuickLinks=this.config?.autoHideQuickLinksInAlways&&"always"===this.layoutState?.selectedFeedDisplaySetting,this.hideQuickLinks&&window.addEventListener("wheel",this.quickLinksToggle),window.addEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler),window.addEventListener("trigger-user-journey-coachmark",this.handleSocialBarReaction),await s.getResultAsync(),!(0,se.S)()||window.ssrAdData?.length||window.isSSREnabled||u.Rb.IsPrerender||(0,pe.I)(v.L,this.layoutState,this.isWaterfallFeed((0,w.kP)())),Q.YT.addOrUpdateTmplProperty("csrLayout",this.layoutState?.selectedFeedDisplaySetting),Q.YT.addOrUpdateTmplProperty("ssrLayout",window.ssrLayoutState?.selectedFeedDisplaySetting);const c=(0,ot.c9)(this.layoutState.configData?.enabledFeatures||[]);let h;this.msNtpExpBitmask=(0,ot.Eb)(c),c.length&&Q.YT.addOrUpdateTmplProperty("edgExpMask",c.join("-")),(0,ot.hb)().then(t=>{void 0===t?.enabled?Q.YT.addOrUpdateTmplProperty("rubyexp","-1"):Q.YT.addOrUpdateTmplProperty("rubyexp",t.enabled.includes("msRubyFlightingAllowed")?"1":"0")}),(0,de.vQ)(o.OJ,t=>{this.topSitesLayoutState=t,this.updateHeaderGrid(),this.refreshHeaderHeight(),(0,xt.P)().then(()=>{this.calculateStickyBreakpoints(),this.shouldAutoScroll&&(0,se.S)()&&this.scrollDownOnLoad(),!this.shouldAutoScroll&&this.invisibleTopSites&&(0,se.S)()&&(this.invisibleTopSites=!1)})}),window.isSSREnabled&&(h=await lt.Q.getPreferenceSetting("tscollapsed"));const{anaheimLayoutPromotion:f,anaheimContentSelection:g}=await(0,en.d1)(),m=await(0,en.aC)(),b=await(0,ot.KQ)(),S=await(0,ot.nX)(),C=await(0,ot.Rx)(),k=await(0,ot.e7)(),P=(0,ot.sY)();this.enableWidgetsFeedManager&&(this.headerHeroTelemetryObject=(0,on.u)("WaterfallViewFeed",{type:J.MJ.Module}));const _=t=>!d.T3.IsHeroNTP&&((0,w.kP)()===z||"headingsonly"===t.selectedFeedDisplaySetting||"off"===t.selectedFeedDisplaySetting);if((0,se.S)()&&!this.displayWidgetsRegion&&this.config.useTreatmentsFromFeedResponse&&_(this.layoutState)&&!we.V_.isOptimizationDataReceived()&&Promise.all([(0,Zt.Qc)(),(0,zt.GP)()]).then(()=>{_(this.layoutState)&&this.fetchAndStoreWpoTreatments(h,f,g,C,k,P,m,b,S)}),this.config.enableEarlyMainFeedRequest&&(0,en.Rk)()){const t=void 0;this.fetchAndStoreMainFeed({anaheimLayoutPromotion:f,anaheimContentSelection:g,inEdgeFeatures:C,revertTimes:k,adminDisabled:P,backgroundImageIsSet:m,newProfFreTime:b,newDevFreTime:S,feedYOffset:this.headerHeight?this.headerHeight+50:void 0,isAdb:window.edgeNTPHeader?.isAdb||u.Rb.EdgeNTPHeader?.isAdb},t),t&&await t.getResultAsync(),await(0,rt.j9)(u.Rb.CurrentFlightSet)}if((0,se.S)()&&(this.displayWidgetsRegion||this.showHeroAboveNav)&&this.initFeedDependencies("myFeed",!0),(0,se.S)()&&(this.config.prerenderFeedRefresh&&(0,zt.EZ)()&&(this.feedRefreshId=window.setInterval(()=>{this.handleFeedRefreshForPrerender()},6e4*this.config.feedRefreshIntervalTimeMin)),window.addEventListener("resize",this.saveViewportInPref),window.addEventListener("beforeunload",this.savePrefsBeforeUnload),this.attachListenerForKeyDownScrollOnFocus(),(0,l.Lg)().setItem("LastKnownPV",(new Date).getTime().toString()),Promise.all([(0,Zt.Qc)(),(0,zt.GP)()]).then(async()=>{(0,jt.aG)()&&(0,qt.L2)(),(0,l.Lg)().setItem("LastVisuallyReadyMarker",(new Date).getTime().toString());const t=await(document?.hasStorageAccess?.());if(window.navigator.serviceWorker&&void 0!==window.navigator.serviceWorker.controller&&window.navigator.cookieEnabled&&t)ft();else{const e={sw:window.navigator.serviceWorker&&void 0!==window.navigator.serviceWorker.controller,canUseCookies:window.navigator.cookieEnabled&&t};(0,l.Lg)().setObject("FallbackNavigationResult",e)}})),(0,se.S)())(0,de.vQ)(o.ne,t=>{void 0!==t.isUserSignedIn&&(this.renderSignInControls=!t.isUserSignedIn,this.updateHeaderCoreData())});else{const t=(0,le.zP)(o.bn);this.renderSignInControls=1===t?.getCurrentState()?.signedIn}!(0,se.S)()||!this.childRefs.backgroundGallery||this.config.disableBackgroundGallery||d.T3.IsFrePage&&this.config.disableGalleryFREAndLowEnd||(this.backgroundGalleryEligibility=!0,this.backgroundDataConnector=(0,le.zP)(o.lm),this.backgroundDataConnector&&await fe.K.initState(he.Y.backgroundDataStateLoaded.getActionSender(this.backgroundDataConnector),this.config),(0,de.vQ)(o.lm,t=>{this.renderBackgroundGallery=t.backgroundGalleryDisplayed})),this.generateTelemetryTagsForBgRightClickMenu(),(0,Y.dT)().then(()=>{this.saveViewportForBgRightClickMenu(),window.addEventListener("resize",this.saveViewportForBgRightClickMenu),document.addEventListener("click",this.handleHideRightClickMenu)}),this.isNewTabPageContentManagedByPolicy=this.layoutState.isContentFeedManagedByPolicy,this.isAppLauncherAllowedByPolicy=!1!==this.layoutState.isAppLauncherEnabledByPolicy;let E=this.layoutState&&this.layoutState.configData;const F=(0,le.zP)(o.h$);if(F){const t=await F.getConfigDataAsync();if(void 0===E&&(E=await F.getConfigDataAsync()),(0,se.S)()){const e=t?.enabledFeatures?.includes("msUndersideAutoOpenForMsnTopQuestion");if(e?((0,l.Lg)().setItem("enableUndersideAutoOpenFromEdge","true"),Q.YT.addOrUpdateTmplProperty("enableUndersideAutoOpenFromEdge","1")):(0,l.Lg)().setItem("enableUndersideAutoOpenFromEdge","false"),this.config.enableUserTopics){const t=(await(0,$.$Z)()).toString();(0,l.Lg)().setItem("userTopics",t),at.f.savePreferenceSetting("userTopics",t)}}const e=t?.enabledFeatures?.includes("msNtpExp1"),n=t?.enabledFeatures?.includes("msNtpExp2");e?(Q.YT.addOrUpdateTmplProperty("TopSitesDedupeFeatureActive","1"),Q.YT.addOrUpdateTmplProperty("TopSitesDedupeTreatmentActive","1")):n&&(Q.YT.addOrUpdateTmplProperty("TopSitesDedupeFeatureActive","1"),Q.YT.addOrUpdateTmplProperty("TopSitesDedupeControlActive","1")),Q.YT.addOrUpdateTmplProperty("headingsOnlyNoBackground",String("headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType))}if(this.config.enableSignInControl&&(0,se.S)()&&this.checkSignInStatusAndSetup(E),!this.config.widgetsControl&&(0,se.S)()&&(0,l.Lg)().removeItem("elwidprom"),(0,Y.dT)().then(async()=>{(0,se.S)()&&(this.nurturingCleanUp=await Ne({config:this.config,isSignedOutPromise:this.checkIsSignedOut(),isFromWidgetLockScreen:d.T3.IsHeroNTP,onScrollPromise:this.onScrollSettablePromise.getResultAsync(),onSocialPromise:this.onSocialBarReactedSettablePromise.getResultAsync(),layoutState:this.layoutState,pageSettingsDataConnector:this.pageSettingsDataConnector}))}),this.focusRedirectEnabled=E&&E.inPageSearchBoxType===x.I4.redirect,A.U.updateConfigDataChanged.registerObserver(t=>{const e=t&&t.params;if(!e||e.length<1)return;e[0]===x.I4.redirect!==this.focusRedirectEnabled&&(0,M.J)()}),window._sugi?((0,Nt.uC)(this.childRefs.backgroundImage),(0,Nt.uC)(this.childRefs.welcomeGreeting)):(0,Nt.uC)(this.childRefs.weatherOneLiner),T.G.updateLayout.registerObserver(async t=>{const e=t&&t.params;e&&e.length<1||this.updateFeedLayoutTelemetry()}),window.addEventListener("feedDropdownChange",this.updateFeedLayoutFromDropdown),this.config.enableWidgetsRegion&&(window.addEventListener("turnOffWidgetsRegion",this.turnOffWidgetsRegion),window.addEventListener("noWidgetsData",this.updateWidgetsRegion),window.addEventListener("manageWidgetsRegion",this.manageWidgetsRegion),window.addEventListener("widgetsRefresh",this.widgetsRefresh)),this.config.enableHolidayBg&&window.addEventListener("holidayBgChanged",this.updateDarkIconValue),this.childRefs.recommendedSites&&window.addEventListener("recommendedSitesSelection",this.recommendedSitesSelection),this.config.showPulseOffPartially&&window.addEventListener("hoverPulse",this.updatePulseOnHover),this.config.enableOverrideRightClick&&window.addEventListener("contentCardRightClick",this.handleContentCardRightClick),(0,se.S)()&&this.config.sendOutOfFocusContentView&&(0,Gt.e1)().then(()=>{this.contentViewHelper=new pn,this.contentViewHelper.initialize()}),this.pageSettingsDataConnector&&this.pageSettingsDataConnector.getLayoutStateAsync().then(t=>this.isAlwaysMode="always"===t.selectedFeedDisplaySetting),this.checkAndUpdateLanguageToggle(),(0,se.S)()||(await this.initSSRContentConfigInfo(),await this.tryLoadFeedModuleBundle()),this.updateHeaderCoreData(),(0,se.S)()&&this.config.compressionDictionaryEnabled&&document.createElement("link").relList.supports("compression-dictionary")){Q.YT.addOrUpdateTmplProperty("sbr","1");const t=t=>performance.getEntriesByType("resource").find(e=>"script"===e.initiatorType&&e.name?.includes(t)),e=["/common.","/microsoft.","/experience.","/vendors."].map(e=>t(e)).map(t=>t?.encodedBodySize||"-1").join(",");e&&Q.YT.addOrUpdateTmplProperty("sbrc",e),Promise.all([(0,zt.GP)(),(0,Y.dT)()]).then(()=>(0,ot.JO)()).then(t=>t&&Q.YT.sendLoadTimeEvent({markers:{size:t.headers.get("content-length"),url:t.url}}))}if(this.config.enableKidsModeTmpl&&Q.YT.addOrUpdateTmplProperty("kidsModeConfigsActive","true"),Q.YT.addOrUpdateTmplProperty("audienceMode",u.Rb?.ClientSettings?.audienceMode?u.Rb.ClientSettings.audienceMode:"undefined"),void 0!==this.config.feedPushDownForNonDAU){const t=(0,l.Lg)().getItem("featuxaffected");null!==t&&Q.YT.addOrUpdateTmplProperty("featuxaffected",t)}(0,se.S)()&&this.childRefs?.channelStore&&window.addEventListener(D,this.openChannelStore),Q.YT.addOrUpdateTmplProperty("vp-h",`${window?.innerHeight}`),window.addEventListener("backgroundImageWCCloseSpotlight",this.onCloseSpotlight),this.childRefs.recommendedSites&&"off"===this.layoutState.selectedFeedDisplaySetting&&(Q.YT.addOrUpdateTmplProperty("headerGrid",this.gridRows),Q.YT.addOrUpdateTmplProperty("headerGridRowId",["logoRow","searchRow","topSitesRow","weatherOneLinerRow","scrollDownBtnRow","recommendedSitesRow","widgetsRegionRow"].map(t=>this[t]).join("|")),(this.recommendedSitesRow==this.weatherOneLinerRow||null==this.recommendedSitesRow&&0!==this.recommendedSitesHeight||this.weatherOnelinerConditionCheck&&null==this.weatherOneLinerRow)&&(0,X.vV)(K.F9C,"RecommendedSitesPositionError",void 0,{...K.F9C.pb,customMessage:`recommendedSitesRow:${this.recommendedSitesRow},\n                        weatherOneLinerRow: ${this.weatherOneLinerRow},\n                        weatherOnelinerConditionCheck: ${this.weatherOnelinerConditionCheck},\n                        showWeatherInFeedOff: ${this.showWeatherInFeedOff},\n                        greetingEnabled: ${this.layoutState.greetingEnabled},\n                        feedHasLoaded: ${this.feedHasLoaded},\n                        displayWidgetsRegion: ${this.displayWidgetsRegion},\n                        showWidgetsUpsellButton: ${this.showWidgetsUpsellButton},\n                        showWeatherOneLiner: ${this.showWeatherOneLiner}`})),this.ntpTypeToSearch=this.config.ntpTypeToSearch??!1,this.copilotApiSupported=await(0,un.P)(),this.saveCopilotSupportedInPref(this.copilotApiSupported),(0,ot.iB)(!1)}getShowWidgets(){return this.isWidgetsVpTest()?(this.hideWidgets=!1,!0):(0,nn.FD)(this.config,this.layoutState,this.hideWidgetsBasedOnPolicy)}disconnectedCallback(){(0,se.S)()&&!this.isConnected||(super.disconnectedCallback(),(0,p.Cq)(this.onFlyoutEvent),(0,R.TU)().unsubscribe(this.handleColumnArrangementChange),this.pivotManager&&(this.pivotManager.removeSwitchListener(Yt.j.onPivotSwitch),this.pivotManager.removeSwitchListener(this.switchListenerCallback)),removeEventListener("scroll",this.areNavTopSitesOverlapping),removeEventListener("resize",this.onResize),removeEventListener("scroll",this.onScroll),window.removeEventListener("wheel",this.quickLinksToggle),window.removeEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler),removeEventListener("recommendedSitesSelection",this.recommendedSitesSelection),window.removeEventListener(ke.b3,this.scrollToShowFeed),window.removeEventListener("resize",this.saveViewportInPref),window.removeEventListener("beforeunload",this.savePrefsBeforeUnload),window.removeEventListener("keyup",this.focusControlOnScrollKeyUp),window.removeEventListener("wheel",this.focusControlOnWheel),window.removeEventListener("trigger-user-journey-coachmark",this.handleSocialBarReaction),window.removeEventListener(D,this.openChannelStore),window.removeEventListener("showFeedOffDialog",this.changeRenderFODStatus),this.onScrollSettablePromise.set(),this.headerSpaceHolder&&this.headerSpaceHolder.removeEventListener("transitionend",this.onHeaderSpaceHolderTransitionEnd),window.removeEventListener("click",this.onClickForTrigChannelStoreCoachmark),window.removeEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.removeEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor),window.removeEventListener("launchChannelStore",this.channelStoreOpened),window.removeEventListener("launchChannelStoreCoachmark",this.registerChannelStoreCoachmarkCallback),this.enableMouseMoveListener&&window.removeEventListener("mousemove",this.onMouseMove),this.contentViewHelper&&this.contentViewHelper.dispose(),this.nurturingCleanUp?.(),window.removeEventListener("feedDropdownChange",this.updateFeedLayoutFromDropdown),this.config?.enableLoaderFlight&&this.skeletonObserver&&this.skeletonObserver.disconnect(),this.config?.enableWidgetsRegion&&(window.removeEventListener("turnOffWidgetsRegion",this.turnOffWidgetsRegion),window.removeEventListener("noWidgetsData",this.updateWidgetsRegion),window.removeEventListener("manageWidgetsRegion",this.manageWidgetsRegion),window.removeEventListener("widgetsRefresh",this.widgetsRefresh)),this.config?.enableHolidayBg&&window.removeEventListener("holidayBgChanged",this.updateDarkIconValue),document.removeEventListener("click",this.handleHideRightClickMenu),window.removeEventListener("resize",this.saveViewportForBgRightClickMenu),window.removeEventListener("visibilitychange",this.handleFeedRefreshWhenPageHiddenVisibilityChange),this.darkModeMediaQuery&&this.darkModeMediaQuery.removeEventListener("change",this.refreshTranslucentMode),this.config.showPulseOffPartially&&window.removeEventListener("hoverPulse",this.updatePulseOnHover),this.config.enableOverrideRightClick&&window.removeEventListener("contentCardRightClick",this.handleContentCardRightClick),window.removeEventListener("backgroundImageWCCloseSpotlight",this.onCloseSpotlight),this.config?.enableTcfConsentExpireBanner&&"us"===u.Rb?.ClientSettings?.geo_country?.toLocaleLowerCase()&&"california"!==u.Rb?.ClientSettings?.geo_subdivision?.toLocaleLowerCase()&&"connecticut"!==u.Rb?.ClientSettings?.geo_subdivision?.toLocaleLowerCase()&&(Q.YT.removeTmplProperty("TCFRevokeBannerShowed"),Q.YT.removeTmplProperty("TCFRevokeBannerDismissed"),Q.YT.removeTmplProperty("TCFRevokeBannerPrivacyClicked")),this.closeGalleryTimeout&&window.clearTimeout(this.closeGalleryTimeout),(this.config?.enableSearchSuggestionPrompts||this.config?.searchSuggestionPromptsTmpl)&&document.removeEventListener("searchSuggestionPrompts",this.handleSearchSuggestionPrompts))}async beforeHydration(){switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":break;default:{const{viewFeedConfig:t,selectedPivot:e}=this.getViewFeedConfigAndPivot(),n=e===mn?{gamingPivotSwitched:!0}:void 0;await this.startContentLoad(t,n,!0,e)}}}async afterHydration(){switch(this.config.enableWidgetsRegion&&!this.config.useDedicatedWidgetsManager&&this.updateWidgetsDisplayAfterHydration(),this.isFeedAlways&&(this.updateHeaderGridRowsForFeedAlways(),this.headerGrid.style&&(this.headerGrid.style.gridTemplateRows=this.gridRows)),this.refreshHeaderHeight(),this.headerGrid.style&&(this.headerGrid.style.height=this.headerHeight+"px",this.headerGrid.style["grid-template-rows"]=this.gridRows),this.headerSpaceHolder.style&&(this.headerSpaceHolder.style.height=this.headerHeight+"px"),this.topSitesHolder.style&&(this.topSitesHolder.style["grid-row"]=this.topSitesRow),this.recommendedSitesHolder&&(this.recommendedSitesHolder.style["grid-row"]=this.recommendedSitesRow),this.heroInNavHolder&&(this.heroInNavHolder.style["grid-row"]=this.widgetsRegionRow),this.weatherOneLinerHolder&&(this.weatherOneLinerHolder.style["grid-row"]=this.weatherOneLinerRow),this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":{const{viewFeedConfig:t,selectedPivot:e}=this.getViewFeedConfigAndPivot();await this.startContentLoad(t,void 0,!0,e);break}}if(void 0!==window?.ssrSizes&&!window.isResized){const t=this.columnArrangement+"",e=new m.bb,n=(0,m.KP)(e.data.innerWidth,"innerWidth"),i=(0,m.KP)(e.data.innerHeight,"innerHeight");window.ssrSizes.ssrCol!==t&&(0,X.vV)(K.DeH,"SSR - Column count mismatch after hydration.",void 0,{...K.DeH.pb,customMessage:`ssrSizes: {ssrCol: ${window.ssrSizes.ssrCol}, ssrWidth: ${window.ssrSizes.ssrWidth} px, ssrHeight: ${window.ssrSizes.ssrHeight} px},csrSizes: {csrCol: ${t}, csrWidth: ${n} px, csrHeight: ${i} px},breakpoints: ${JSON.stringify((0,R.TU)().breakpoints)}`})}this.updateHeaderGrid(),this.refreshHeaderHeight()}processExperienceInitializeError(){super.processExperienceInitializeError();const t="Fatal web component experience exception encountered in EdgeChromiumPageWC.",e=new Error(t);(0,Se.J)(K.n0j.id),(0,X.c_)(e,K.n0j,t)}isFeedContentDisplayed(){const t=(0,Rt.pr)(Mt.u.gridViewFeed)||document?.body?.querySelector?.("edge-chromium-page")?.shadowRoot?.querySelector?.("grid-view-feed"),e=(0,Rt.pr)(Mt.u.waterfallViewFeed)||document?.body?.querySelector?.("edge-chromium-page")?.shadowRoot?.querySelector?.("waterfall-view-feed");return!!(t?.shadowRoot?.querySelector?.("cs-super-container")?.shadowRoot?.querySelector?.("cs-personalized-feed")||t?.shadowRoot?.querySelector?.(".heading-group-error")||e?.shadowRoot?.querySelector?.("cs-super-container")||e?.shadowRoot?.querySelector?.(".heading-group-error"))}async initSSRContentConfigInfo(){switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":return void await this.ensureWidgetsManagerLoaded()}await this.handleWidgetsLoad();const{viewFeedConfig:t,selectedPivot:e}=this.getViewFeedConfigAndPivot();this.initFeedDependencies(e),await Promise.all([this.getFeedDependencyPromise,this.widgetsRegionDependencyPromise]),this.contentConfigInfo=t,this.context={},await(0,Nt.uC)(t)}async handleWidgetsLoad(){if(!this.enableWidgetsFeedManager||this.config?.enableWidgetsRegion&&!this.displayWidgetsRegion&&!this.showHeroAboveNav)return;this.initFeedDependencies("myFeed",!0);const t=this.getExperienceConfigInfo("WidgetsRegion");await(0,Nt.uC)(t)}async ensureWidgetsManagerLoaded(){this.widgetsFeedManager||(await this.handleWidgetsLoad(),await this.widgetsRegionDependencyPromise)}isWaterfallFeed(t){return!this.config.enableGridViewFeed&&(0,ot.xe)(t)}getViewFeedConfigAndPivot(){const t=(0,w.kP)(),e=this.isWaterfallFeed(t);this.config.enableGridViewFeed||(Q.YT.addOrUpdateTmplProperty("page_selectedPivot",JSON.stringify(t)),Q.YT.addOrUpdateTmplProperty("page_shouldUseWaterfallFeed",JSON.stringify(e)));const n=t===mn,i=this.getExperienceConfigInfo("GamingGridViewFeed","GridViewFeed","index_GamingGridViewFeed"),r=e?this.getExperienceConfigInfo("WaterfallViewFeed"):this.getExperienceConfigInfo("GridViewFeed");let o;return o=n?i:r,{viewFeedConfig:o,selectedPivot:t}}getWidgetsRegionQSP(){const t=this.pageSettingsDataConnector?.getCurrentState();let e=!!t?.enableWidgetsRegion;return e||(e=!!this.pageSettingsDataConnector?.shouldOverrideWidgetsQSP()),e}async fetchAndStoreWpoTreatments(t,e,n,i,r,o,s,a,c){(0,Z.ZF)()[we.y0.Request]=Math.round(performance.now());const u=Q.YT.getPageMetadata()?.contract?.page?.name===mn,l=this.isWaterfallFeed((0,w.kP)());let h={isXFeed:!1,ocid:"anaheim-ntp-feeds",timeoutMs:1e3,feedName:u?mn:"default",pageScenario:"ntp",pageConfiguration:(0,$.UU)(this.layoutState,!1),requestId:Q.YT.getRequestId(),disableContent:!0,shouldUseNewWpoEndpoint:!0,wpoSchema:"byregion",column:this.columnArrangement,anaheimLayoutPromotion:e,anaheimContentSelection:n,inEdgeFeatures:i,revertTimes:r,adminDisabled:o,backgroundImageIsSet:s,useWebLayoutEndpoint:!!l,newProfFreTime:a,newDevFreTime:c};if(this.displayWidgetsRegion&&!d.T3.IsHeroNTP&&(h.widgetsOn=this.getWidgetsRegionQSP()),this.copilotApiSupported&&(h.copilotApiSupported=!0),this.isWaterfallFeed((0,w.kP)())){const t={c1:Te._4.C1,c2:Te._4.C2,c3:Te._4.C3,c4:Te._4.C4,c5:Te._4.C5},e=this.config.enableOneColumn||this.columnArrangement!==_.j1.c1?this.columnArrangement:_.j1.c2,n=(0,ge.cP)(t[e],void 0,void 0,this.config);h={...h,...n}}new ye.Oq({...(0,dn.w)(this.config),initialRequest:{timeoutMs:1e3}},!1).fetchFromWpoService(h,!0).then(e=>{e&&((0,Z.ZF)()[we.y0.Response]=Math.round(performance.now()),we.V_.addWpoOptimizationDataToLocalStorage(e.pageContext,d.T3.AppType,d.T3.CurrentRequestTargetScope,!1,this.config.enbWpoPromotionFromPSL,t,this.config.enbWpoPromForWidgets,this.config.enableWpoPromotNewSave,!0),me.Z.storeWpoNotificationPreviewData(e),(0,Ot.au)(),this.pulseData=e.pulseData,(0,se.S)()&&yt.gR.update1sCohort(e,this.config))})}isFeedDisabled(){const t=this.layoutState?.selectedFeedDisplaySetting;return"headingsonly"===t||"off"===t}verifySSRHeaderHeight(){const t=ae.vv.get(en.mk);t!==this.headerHeight&&(0,X.vV)(K.b9w,"SSR header height mismatch",void 0,{headerHeightUsedInFeedCall:t,currentHeaderHeight:this.headerHeight,selectedFeedDisplaySetting:this.layoutState.selectedFeedDisplaySetting})}async fetchAndStoreMainFeed(t,e,n){const i=()=>{e&&e.set()};if(!n)return;const r=(0,w.kP)();if([mn,z].includes(r))return this.isOnM365Page=r===z,this.isOnPersonalizeOrM365Page=this.isOnM365Page,void i();if((0,Ft.V)())return Q.YT.addOrUpdateTmplString("DisablePrerenderFeed:1"),void i();if(this.config.useDedicatedWidgetsManager&&this.displayWidgetsRegion);else if(this.isFeedDisabled())return void i();this.copilotApiSupported=await(0,un.P)();const o=await(0,en.FA)(t,this.config,this.displayWidgetsRegion,this.copilotApiSupported);let s;we.V_.enableEarlyMainFeedRequest=!0;const a=(0,ye.km)();if(a)s=a,ae.vv.set("__isSSRWpoFeedConsumed__",!0);else{const t=new ye.Oq({...(0,dn.w)(this.config),initialRequest:{timeoutMs:o.timeoutInMs}},!1);await ye.Oq.ensureLock();try{s=await t.fetchFromWpoService(o,!0,null,!1,e)}catch(t){if(t instanceof ye.fb&&(Q.YT.addOrUpdateTmplProperty("wpofetchabort",t.silentExit?"silentexit":"continue"),t.silentExit))return;throw t}finally{ye.Oq.releaseLock()}s&&(s.responseStatus=t.getResponseStatus(),d.T3.IsHeroNTP&&(s.isStatic=t.getIsStatic()))}(0,se.S)()&&yt.gR.update1sCohort(s,this.config),we.V_.storeEarlyWpoFeedData(s),s&&s.pulseData&&(this.pulseData=s.pulseData),this.isWaterfallFeed(r)&&(0,ge.aI)(o,s),(0,se.S)()||we.V_.setSSRInitialFeedResponse(s)}async refreshWidgetsAndFeed(){this.config.useDedicatedWidgetsManager&&(ye.Oq.clearRenderedSegments(),await this.fetchAndStoreMainFeed({},void 0,!0),this.widgetsFeedManager?.waitForInited().then(()=>{this.widgetsFeedManager?.callRefreshRegionsData()}),this.feedManager?.waitForInited().then(()=>{this.feedManager?.callRefreshRegionsData()}))}async checkSignInStatusAndSetup(t){const e=await(this.pageSettingsDataConnector?.getPrimaryAccountInfoAsync(!0));this.isSignedInMSAUser="MSA"===e?.accountType;const n=e&&""===e.accountId,i="UNSUPPORTED_SOVEREIGNTY"!==e?.accountType,r=void 0!==t.isEdgeSignInAllowed&&t.isEdgeSignInAllowed;let o;o=void 0===t.isEdgeSignInAllowed?"-1":!1===t.isEdgeSignInAllowed?"0":"1",Q.YT.addOrUpdateTmplProperty("signInPolicy",o);return i&&n&&this.pageSettingsDataConnector?.checkAuthApiIsAvailable()&&r?(this.renderSignInControls=!0,this.updateHeaderGrid(),this.refreshHeaderHeight()):this.renderSignInControls=!1,this.updateHeaderCoreData(),n}async checkIsSignedOut(){const t=await this.getPrimaryAccountInfo();return t&&""===t.accountId}async getPrimaryAccountInfo(){return this.pageSettingsDataConnector?.getPrimaryAccountInfoAsync(!1)}get shouldShowNotificationMiniCard(){return!(this.config.notificationHeadingsOnly&&!this.isFeedDisabled())&&(!1!==this.layoutState.showQuickBrief&&this.config.childRefs.notificationMiniCard&&this.wpoNotificationPreviewData&&(this.columnArrangement===_.j1.c4||this.columnArrangement===_.j1.c5)&&"onerow"===this.quickLinksDisplaySetting&&!me.Z.notificationMiniCardDismissed)}get showWeatherInFeedOff(){return!this.config.childRefs.notificationMiniCard||"c1"===this.columnArrangement||"c2"===this.columnArrangement||"c3"===this.columnArrangement}shadowDomPopulated(){if(!(0,se.S)())return;this.config.childRefs.notificationMiniCard&&(this.config.notificationAnimation&&(u.Rb.IsPrerender?(0,zt.GP)().then(()=>{this.enableNotificationAnimation=!0}):this.enableNotificationAnimation=!0),me.Z.subscribe(t=>{this.wpoNotificationPreviewData=t,this.updateHeaderGrid(),this.refreshHeaderHeight()})),this.markVisuallyReadyRaf(),(0,Rt.KO)(Mt.u.headerSpaceHolder,this.shadowRoot?.getElementById?.("headerSpaceHolder"));const t=window._sugi?document.querySelector("cs-ntp")?.shadowRoot?.querySelector?.("background-image"):null;if(this.backgroundOuterHolder=window._sugi?t:this.shadowRoot?.getElementById?.("bgOuterHolder"),(0,Rt.KO)(Mt.u.backgroundOuterHolder,this.backgroundOuterHolder),(0,Rt.KO)(Mt.u.backgroundInnerHolder,window._sugi?t:this.shadowRoot?.getElementById?.("bgInnerHolder")),(0,Rt.KO)(Mt.u.navBar,this.shadowRoot?.getElementById?.("g_nav")),(0,Rt.KO)(Mt.u.headerGrid,this.shadowRoot?.getElementById?.("headerGrid")),this.topSitesHolder=this.shadowRoot?.getElementById?.("topSitesHolder"),this.heroInNavHolder=this.shadowRoot?.getElementById?.("heroInHeader"),this.recommendedSitesHolder=this.shadowRoot?.getElementById?.("recommendedSites"),this.weatherOneLinerHolder=this.shadowRoot?.getElementById?.("weatherOneLinerHolder"),this.config.enableContentAreaRegistration&&window.dispatchEvent(new CustomEvent("telemetryregistercontentcontainer",{detail:{element:this.shadowRoot?.getElementById?.("feed-content")}})),this.topSitesHolder&&"off"===this.layoutState.selectedQuickLinksDisplaySetting&&(this.topSitesHolder.style.visibility="hidden"),this.enableOneColumn&&(this.conditionalBanner=this.shadowRoot?.querySelector?.(".conditionalBannerHolder"),this.conditionalBanner)){new IntersectionObserver(t=>{const e=t[t.length-1];this.conditionalBannerShown=e.intersectionRatio>.5},{root:null,rootMargin:"-10px 0px 0px 0px",threshold:.5}).observe(this.conditionalBanner)}if(this.calculateStickyBreakpoints(),this.showSearchBoxForHero&&this.config.showSearchBoxForHero?.hideTopSites||this.setupTopSitesIntersectionObserver(),this.headerGrid=this.shadowRoot?.getElementById?.("headerGrid"),this.headerGrid){const t=this.shadowRoot?.getElementById?.("translucentFeedSentinel"),e={root:null,rootMargin:-1*this.stickyHeaderHeight+"px 0px 0px",threshold:[.1,1]};new IntersectionObserver(e=>{if(!t||"off"===this.layoutState.selectedFeedDisplaySetting)return;1===e[e.length-1].intersectionRatio||window.innerHeight<this.headerHeight?(this.headerGrid.style.zIndex="1",this.headerGrid.classList.add("headerGrid_visible"),this.headerGrid.classList.remove("headerGrid_hidden"),(0,h.Nf)("headerGrid","displayed"),window.setTimeout(()=>{this.headerGrid.style.zIndex=null},200),this.headerGridHidden=!1):(this.headerGrid.classList.remove("headerGrid_visible"),this.headerGrid.classList.add("headerGrid_hidden"),(0,h.Nf)("headerGrid","hidden"),this.headerGridHidden=!0,this.ntpTypeToSearch&&this.blur())},e).observe(t)}if(this.nav=this.shadowRoot?.getElementById?.("g_nav"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResize),window.addEventListener("visibilitychange",this.handleFeedRefreshWhenPageHiddenVisibilityChange),window.matchMedia&&(this.darkModeMediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.darkModeMediaQuery?.addEventListener("change",this.refreshTranslucentMode)),this.enableMouseMoveListener&&window.addEventListener("mousemove",this.onMouseMove),d.T3.IsHeroNTP&&window.addEventListener("telemetryviewportupdated",this.observeRiverVisibility),this.config.childRefs?.channelStore&&(Promise.all([(0,Zt.Qc)(),(0,Y.dT)(),(0,zt.GP)()]).then(()=>{window.addEventListener("launchChannelStore",this.channelStoreOpened);const t=(0,ot.r2)();t&&t>7&&window.addEventListener("launchChannelStoreCoachmark",this.registerChannelStoreCoachmarkCallback)}),this.scrollCanTrigChannelStoreCoachmark=!0,window.addEventListener("click",this.onClickForTrigChannelStoreCoachmark),window.addEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.addEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor)),this.headerSpaceHolder?.addEventListener("transitionend",this.onHeaderSpaceHolderTransitionEnd),this.initializePivotManager(),(0,Rt.KO)(Mt.u.complianceHyperlink,this.shadowRoot?.querySelector?.("#complianceHyperlink")),this.complianceHyperlink=(0,Rt.pr)(Mt.u.complianceHyperlink),this.isRecommendedSitesEnabled&&(this.recommendedSites=this.shadowRoot?.querySelector?.("#recommendedSites"),this.recommendedSites)){(0,Rt.KO)(Mt.u.recommendedSites,this.recommendedSites);const t={root:null,rootMargin:-1*this.stickyHeaderHeight+"px 0px 0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,.95,.99,1]};new IntersectionObserver(t=>{t[t.length-1].intersectionRatio>.99?(this.invisibleRecommendedSites=!1,this.updateNavFeedBorderRadius()):(this.invisibleRecommendedSites=!0,this.updateNavFeedBorderRadius())},t).observe(this.recommendedSites)}(0,Zt.Qc)().then(()=>window.requestAnimationFrame(()=>window.setTimeout(()=>{this.updateTopSitesQuickLinkEndMarginUsedPadding(),(0,Rt.KO)(Mt.u.personalizeButton,this.shadowRoot?.getElementById?.("g_nav")?.querySelector?.("super-nav")?.shadowRoot?.querySelector?.("#myInterests"))},10))),this.showSearchBoxForHero&&this.config.showSearchBoxForHero?.hideTopSites||(0,zt.GP)().then(()=>{this.areNavTopSitesOverlapping(),window.addEventListener("scroll",this.areNavTopSitesOverlapping)}),(0,Zt.Qc)().then(()=>{const t=this.config?.serviceWorker?.cacheSSRBasePageResponse;t&&async function(){const t=await(0,vt.O)({type:"SW_ERROR_DATA"});if(t&&t.length){for(const e of t){const t=bt[e.id];if(!t)continue;const n={...t,message:e.message};e.data&&(n.pb={...n.pb,...e.data}),Q.YT.sendAppErrorEvent(n)}Q.YT.addOrUpdateTmplProperty("swerr",t.length.toString())}}();const e=!!(0,l.Lg)().getItem(N);t&&!e&&(0,l.Lg)().setItem(N,"true"),!t&&e&&(0,ot.rn)("edgenext-base-V1").then(t=>{if(!t)return!1;(0,l.Lg)().removeItem(N),(0,l.Lg)().removeItem("lastUsedActivityId"),(0,l.Lg)().removeItem("hasSSRBasePageFeatureBeenCleanedUp")})}),this.config.enableScrollPerfMetrics&&(0,se.S)()&&Promise.all([(0,Y.dT)(),(0,Y.uR)(),(0,zt.GP)()]).then(()=>Q.YT.initScrollPerformanceTrackers({enableScrollInputTracking:this.config.enableScrollInputTracking&&(Q.YT.getRequestId()?.startsWith("1")||(0,oe.iA)()?.includes("scrolltest=1")),enableMissedScrollTracking:this.config.enableMissedScrollTracking}));(window&&window.navigator).getBattery().then(t=>{Q.YT.addOrUpdateTmplProperty("userOnBatteryPower:",String(!t.charging))}),(0,Y.dT)().then(()=>this.overlapStateChange()),this.checkFeedContainerWidth();const e=parseInt(u.Rb?.ClientSettings?.browser?.version||"",10);!d.T3.BrowserOptOut&&this.config.enableAdInterestGroupTmpl&&e>=130&&Promise.all([(0,zt.GP)(),(0,Y.dT)()]).then(()=>{(0,j.Cl)()?(this.oneTrustConsentHandler=()=>{this.joinAdInterestGroup(),window.removeEventListener(sn.M,this.oneTrustConsentHandler)},window.addEventListener(sn.M,this.oneTrustConsentHandler)):window.requestAnimationFrame(()=>{this.joinAdInterestGroup()})})}checkAndLogRectsOverlapping(t,e){if(0===t.height||0===t.width||0===e.height||0===e.width)return;!(t.top>e.bottom||t.right<e.left||t.bottom<e.top||t.left>e.right)&&((0,X.vV)(K.Mwi,"Nav and top sites are overlapping",void 0,{...K.Mwi.pb,customMessage:`{"nav": ${JSON.stringify(t)}, "top sites": ${JSON.stringify(e)}, "selectedQuickLinksDisplaySetting": ${this.layoutState.selectedQuickLinksDisplaySetting}}`}),removeEventListener("scroll",this.areNavTopSitesOverlapping))}initializePivotManager(){this.pivotManager=(0,Ct.w)(null),this.pivotManager&&(Q.YT.addOrUpdateTmplProperty("fl","0"),this.pivotManager.addSwitchListener(Yt.j.onPivotSwitch,kt.M.Telemetry),this.pivotManager.addSwitchListener(this.switchListenerCallback)),window.addEventListener(ke.b3,this.scrollToShowFeed)}observeRiverVisibility(){const t=document.querySelector?.("edge-chromium-page")?.shadowRoot?.querySelector?.(".navAndContent");if(!t)return;new IntersectionObserver((e,n)=>{window.shouldResetDwellTimer&&e&&"hidden"!==document.visibilityState&&e.map(e=>{if(e.intersectionRatio>=.01)return Q.YT.resetDwellTime(),Q.YT.startDwellTime(),t.focus(),(0,Z.ZF)().HeroRiverVisible=Math.round(performance.now()),(0,Z.ZF)().DocumentFocused=document.hasFocus()?1:0,window.shouldResetDwellTimer=!1,void window.setTimeout(()=>{n.unobserve(t),window.removeEventListener("telemetryviewportupdated",this.observeRiverVisibility)},0)})},{root:null,rootMargin:"0px",threshold:.01}).observe(t)}filterFeedExperiencesToSkip(t){return"devTools"!==t&&"channelStore"!==t}async startContentLoad(t,e,n,i){Q.YT.addOrUpdateTmplProperty("fl","3");const r=this.isWaterfallFeed(i)?this.getExperienceConfigInfo("WaterfallViewFeed"):t;if(!(0,Pt.A)(this.lastPivotSelection,{configInfo:r,context:e})){switch(this.lastPivotSelection={configInfo:r,context:e},this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":this.pageLoadedWithContentDisabled=!0,await(0,Zt.Oq)()}n||(Q.YT.addOrUpdateTmplProperty("fl","4"),(0,Nt.uC)(r)),this.initFeedDependencies(i),this.config.enableLazyLoadBreakingNews&&(this.showBreakingNews=!0,Q.YT.addOrUpdateTmplProperty("lazyLoadBreakingNews","1")),this.contentConfigInfo=r,this.context=e,this.isFeedRendered=!0,this.feedHasLoaded=!0,(0,zt.GP)().then(()=>{(0,ot.Qm)("FEED_VISIBLE"),this.feedRefreshId&&clearInterval(this.feedRefreshId)})}}setSharedFeedManager(t){this.sharedFeedManager=t}shouldUseSharedFeedManager(t){return this.shouldShareFeedManager(t)&&this.sharedFeedManager}shouldShareFeedManager(t){return!this.config.useDedicatedWidgetsManager&&(this.isPageLoadedWithWidgets||this.showHeroAboveNav)&&"myFeed"===t&&!this.hasChangedFeed&&!this.pageLoadedWithContentDisabled}fireLayoutAnimationComplete(){window.setTimeout(()=>{Jt.W.layoutAnimationComplete.getActionSender(this.pageSettingsDataConnector).send({height:100})},0)}async reportPerfMarkers(){const t=(0,le.zP)(o.TE);if((0,Y.dT)().then(t=>{const e=t.find(t=>"TTVR"===t[0])?.[1],n=(0,Zt.Kl)();e&&te.m.updatePageComplete.getActionSender(n).send(e),window.dispatchEvent(new CustomEvent("EdgeChromiumTTVR"))}),await(0,Wt.K)({incompleteVisualDependencyCallback:t&&t.getIncompleteVisualDependencies||null,contentViewTimeoutOverride:2e3,timeoutOverride:35e3,onBeforeNotifyCallback:()=>{(0,et.m)([["TTVR.BingImage",["TTVR.BackgroundImageWC"]],["TTVR.QuickLinks",["TTVR.TopSitesEdgeNextWC"]]]);const t=(0,Z.ZF)();u.Rb.IsPrerender||((0,Z.I)("reload")?t["TTVR.E2E"]=t.TTVR:t.tabStartToNavigationStart&&(t["TTVR.E2E"]=t.TTVR+t.tabStartToNavigationStart)),t.timeToSendPrimaryPerfMarkers=performance.now()},maxValidTTVR:24e3}),u.Rb.IsPrerender){let t=!1;(0,Gt.e1)().then(()=>{window.setTimeout(()=>{t||(0,X.vV)(K.doX,"Prerender Reveal not completed before timeout")},3e3)}),await(0,zt.GP)(),t=!0}this.addE2ETtvrToSecondaryPageTimings();(0,Vt.g)({incompleteVisualDependencyCallback:t&&t.getIncompleteVisualDependencies||null,timeoutOverride:35e3}).then(()=>{let t=(0,Z.zq)()["TTVR.NativeAd"];t&&(u.Rb.IsPrerender&&(t+=(0,Y.W4)(tt.xF)),(0,dt.B)(64,u.Rb.IsPrerender,t))})}addE2ETtvrToSecondaryPageTimings(){const t=(0,Z.ZF)(),e=(0,Z.zq)();if(!t||!e)return;const n=t[tt.xA],i=t[`${tt.xA}.SearchBox`],r=t[tt.q],o=`${tt.xA}.${tt.ZY}`,s=`${tt.xA}.SearchBox.${tt.ZY}`,a=`${tt.q}.${tt.ZY}`,c=(n,i,r,o)=>{t[n]=e[n]=i,(0,nt.Ww)({name:n,startTime:r,endTime:o})},d=(n,i)=>{t[n]=e[n]=i,(0,nt.Dl)({name:n,duration:i})};if((0,Z.I)("reload"))return c(o,n,0,n),c(s,i,0,i),void c(a,r,0,r);if(!window?.chrome?.embeddedSearch?.newTabPage?.getTabTimings)return void(0,X.vV)(K.K8O,"window.chrome.embeddedSearch.newTabPage.getTabTimings does not exist.");const l=e=>{u.Rb.IsPrerender&&(e+=t[tt.aW]),n&&d(o,e+n),i&&d(s,e+i),r&&d(a,e+r)},h=t.tabStartToNavigationStart;if(h)l(h);else{const t=Math.round(performance.now());window.chrome.embeddedSearch.newTabPage.getTabTimings((e,n)=>{if(!e)return void(0,X.vV)(K.n9w,"chrome.embeddedSearch.newTabPage.getTabTimings returned false.");if(!n||!n.tabStartToNavigationStart)return void(0,X.vV)(K.KwS,"chrome.embeddedSearch.newTabPage.getTabTimings returned invalid timing object.");l(n.tabStartToNavigationStart);const i=Math.round(performance.now()),r=i-t;c(tt.GO,r,t,i)})}}getExperienceType(){return a.KTI}updateHeaderGridForNonAlways(){const{selectedFeedDisplaySetting:t,selectedQuickLinksDisplaySetting:e}=this.layoutState,n=this.layoutState.imageOfTheDayEnabled,i=(this.config.topSiteMargin??16)+(this.shouldRenderSuggestionPrompts?this.suggestionPromptsHeight:0),r=this.recommendedSitesHeight,o=this.childRefs.recommendedSites?`${r}px`:"",s="off"===e?"0":"auto",a=this.isTopsitesNeedPadding(e)?"8px":"0px";if(this.gridRowsMap=new Map,!this.hideTopSectionSSRHero)if(n){let t=""+(this.enableOneColumn&&!this.isWorkFeed?"minmax(32px, 15%)":"minmax(78px, 15%)");if(this.config.ntpSearchBoxPosition){t={1:"1fr",2:"0.5fr",3:"1.5fr"}[this.config.ntpSearchBoxPosition]??t}this.gridRowsMap.set("searchBoxPosition",t)}else this.gridRowsMap.set("header","1fr"),this.gridRowsMap.set("logoRow",""+(this.enableOneColumn?"minmax(0px, auto)":"auto")),this.gridRowsMap.set("SearchTopMargin","72px");if(this.gridRowsMap.set("searchRow","46px"),this.gridRowsMap.set("SearchBottomMargin",`${i}px`),n){if(this.hideTopSectionSSRHero||(this.gridRowsMap.set("topSitesRow","auto"),this.gridRowsMap.set("topSitesBottom","1fr")),this.displayWidgetsRegion&&(this.gridRowsMap.set("widgetsRegionRow","146px"),this.gridRowsMap.set("widgetsRegionBottom","peek"===t||this.isWorkFeed?"12px":"40px")),this.childRefs.recommendedSites&&!this.hideTopSectionSSRHero&&(this.gridRowsMap.set("gapBetweenTsAndRs",`${a}`),this.weatherOnelinerConditionCheck?this.gridRowsMap.set("weatherOneLinerRow","64px"):this.showWidgetsUpsellButton?this.gridRowsMap.set("widgetsUpsellButtonRow","64px"):this.gridRowsMap.set("weatherOneLinerRow","0px"),this.gridRowsMap.set("recommendedSitesRow",`${o}`),!this.showNavAndContentTemplate)){const t="0px"!==o&&""!==o?"18px":"";this.gridRowsMap.set("recommendedSitesBottom",`${t}`)}this.isHero&&this.showHeroAboveNav&&!this.invisibleHero&&(!this.isRecommendedSitesEnabled&&this.isTopSitesDisabled||this.gridRowsMap.set("widgetsRegionTop","24px"),this.gridRowsMap.set("widgetsRegionRow","344px"),this.gridRowsMap.set("widgetsRegionBottom",`${Ue(this.layoutState)}px`)),this.weatherOnelinerConditionCheck&&!this.childRefs.recommendedSites?this.gridRowsMap.set("weatherOneLinerRow","64px"):this.showWidgetsUpsellButton&&this.gridRowsMap.set("widgetsUpsellButtonRow","64px")}else this.hideTopSectionSSRHero||("off"!==this.layoutState.selectedQuickLinksDisplaySetting?(this.gridRowsMap.set("topSitesRow","auto"),this.childRefs.recommendedSites&&(this.gridRowsMap.set("gapBetweenTsAndRs",`${a}`),this.gridRowsMap.set("recommendedSitesRow",`${o}`))):this.childRefs.recommendedSites&&(this.gridRowsMap.set("topSitesRow",`${s}`),this.gridRowsMap.set("recommendedSitesRow",`${o}`)),this.gridRowsMap.set("topSitesBottom","1fr")),this.displayWidgetsRegion&&(this.gridRowsMap.set("widgetsRegionRow","146px"),this.gridRowsMap.set("widgetsRegionBottom","peek"===t||this.isWorkFeed?"12px":"40px")),!this.isHero||!this.showHeroAboveNav&&this.invisibleHero||(!this.isRecommendedSitesEnabled&&this.isTopSitesDisabled||this.gridRowsMap.set("widgetsRegionTop","24px"),this.gridRowsMap.set("widgetsRegionRow","344px"),this.gridRowsMap.set("widgetsRegionBottom",`${this.showHeroAboveNav?Ue(this.layoutState):0}px`)),this.weatherOnelinerConditionCheck?this.gridRowsMap.set("weatherOneLinerRow","64px"):this.showWidgetsUpsellButton&&this.gridRowsMap.set("widgetsUpsellButtonRow","64px");const c=Array.from(this.gridRowsMap.keys()).reduce((t,e,n)=>(t[e]=n+1,t),{});["logoRow","searchRow","topSitesRow","weatherOneLinerRow","scrollDownBtnRow","recommendedSitesRow","widgetsRegionRow","widgetsUpsellButtonRow"].forEach(t=>{this[t]=c[t]}),this.gridRows=Array.from(this.gridRowsMap.values()).join(" "),this.getReservedHeaderHeights()}updateHeaderGrid(){return this.isFeedAlways?void this.updateHeaderGridRowsForFeedAlways():void this.updateHeaderGridForNonAlways()}updateHeaderGridRowsForFeedAlways(){const{rows:t,rowIndexes:e}=(t=>{const e={logoRow:0},n=new Array;n.push({height:qe(t)}),n.push({height:t.config.enableLargeBorderSearchBox?54:46,setCallback:t=>{e.searchRow=t}}),n.push({height:je(t)}),t.shouldRenderSuggestionPrompts&&n.push({height:52}),t.isTopSitesDisabled||t.showHeroAboveNav&&!(0,se.S)()||(n.push({height:Ge(t)}),n.push({height:Je(t),setCallback:t=>{e.topSitesRow=t}})),t.displayWidgetsRegion&&(n.push({height:6}),n.push({height:146,setCallback:t=>{e.widgetsRegionRow=t}}));const i=t.isFeedAlways&&t.showSearchSuggestionPrompts;t.isRecommendedSitesEnabled&&!i&&(n.push({height:t.isTopSitesDisabled?12:8}),n.push({height:t.recommendedSitesHeight,setCallback:t=>{e.recommendedSitesRow=t}})),t.showHeroAboveNav?(!t.isRecommendedSitesEnabled&&t.isTopSitesDisabled||n.push({height:24}),n.push({height:We(),setCallback:t=>{e.widgetsRegionRow=t}}),n.push({height:Ue(t.layoutState)})):n.push({height:Qe(t)}),t.config.feedPushDownForNonDAU&&(0,Ot.Y0)()&&(0,se.S)()&&!window.isSSRCompleted&&(Q.YT.addOrUpdateTmplProperty("featuxaffecting",`${t.config.feedPushDownForNonDAU}`),(0,l.Lg)().setItem("featuxaffected",`${t.config.feedPushDownForNonDAU}`),n.push({height:t.config.feedPushDownForNonDAU}));const r=n.map(t=>t.height);return n.forEach((t,e)=>{t.setCallback&&t.setCallback(e+1)}),{rows:r,rowIndexes:e}})(this);this.gridRowHeights=t,this.gridRows=t.map(t=>`${t}px`).join(" "),this.searchRow=e.searchRow,this.topSitesRow=e.topSitesRow,this.recommendedSitesRow=e.recommendedSitesRow,this.logoRow=e.logoRow,this.widgetsRegionRow=e.widgetsRegionRow}refreshHeaderHeight(){if(!(0,se.S)()&&this.shouldAutoScroll&&this.shouldShrinkHeader)return void(this.headerHeight=78+Ve(this.showHeroAboveNav,this.layoutState));if(!this.topSitesLayoutState||!this.layoutState)return;if(this.contentOffHeaderHeight=void 0,this.config.disableFeed)return void(this.headerHeight=window.innerHeight);const t=this.invisibleHero;let e,n=!1;switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":if(e=window.innerHeight-S.$L-this.headingsOnlyHeightReduction,window.innerHeight<=600){const t=function(t){let e=0;t.layoutState.imageOfTheDayEnabled?(t.hideTopSectionSSRHero||(e+=78),e+=46,t.shouldRenderSuggestionPrompts&&(e+=12,e+=t.suggestionPromptsHeight,e+=12),t.hideTopSectionSSRHero||(e+=an(t.layoutState,t.columnArrangement,t.isWorkFeed),t.childRefs.recommendedSites&&"off"!==t.recommendedSitesDisplaySetting&&("off"!==t.layoutState.selectedQuickLinksDisplaySetting&&(e+=16),e+=t.recommendedSitesHeight))):(t.hideTopSectionSSRHero||(e+=48,e+=72),e+=46,t.shouldRenderSuggestionPrompts&&(e+=12,e+=t.suggestionPromptsHeight,e+=12),t.hideTopSectionSSRHero||(e+=an(t.layoutState,t.columnArrangement,t.isWorkFeed),t.childRefs.recommendedSites&&"off"!==t.recommendedSitesDisplaySetting&&("off"!==t.layoutState.selectedQuickLinksDisplaySetting&&(e+=16),e+=t.recommendedSitesHeight))),t.displayWidgetsRegion&&(e+=146,e+=16),t.showHeroAboveNav?(!t.isRecommendedSitesEnabled&&t.isTopSitesDisabled||(e+=24),e+=Ve(t.showHeroAboveNav,t.layoutState)+Ue(t.layoutState)):e+=40;return e}(this);e=Math.max(e,t)}this.showHeroAboveNav&&(n=e<this.headerHeightNeeded+(t?(t=>{let e=Ve(t.showHeroAboveNav,t.layoutState);return!t.isRecommendedSitesEnabled&&t.isTopSitesDisabled||(e+=24),e})(this):0));break;case"peek":e=cn(this);break;case"onscroll":e=window.innerHeight;break;case"off":e=window.innerHeight,this.contentOffHeaderHeight="100vh";break;default:e=this.isWorkFeed?cn(this):this.getHeaderHeightForFeedAlways()}this.invisibleHero=n,t!==this.invisibleHero&&this.updateHeaderGrid(),this.headerHeight=e}get boxShadowStyles(){return this.config.translucentFeed?.enableBlur&&["always","peek","headingsonly"].includes(this.layoutState?.selectedFeedDisplaySetting)&&this.navIsSticky||!this.config.translucentFeed?.feedBoxShadow||this.showHeroAboveNav?"":`box-shadow: ${this.config.translucentFeed?.feedBoxShadow};`}handleTopSitesVisibleChange(t,e){if(this.topSitesHolder){if("always"===e.selectedFeedDisplaySetting&&!t)return this.topSitesHolder.style.opacity="0",void(this.topSitesHolder.style.visibility="hidden");t?(this.topSitesHolder.style.visibility="",this.topSitesHolder.style.opacity="1"):this.topSitesHolder.style.opacity="0",window.setTimeout(()=>{t||(this.topSitesHolder.style.visibility="hidden"),this.topSitesHolder.style.transition=null},300)}}getHeaderHeightForFeedAlways(){return this.gridRowHeights?.length||this.updateHeaderGridRowsForFeedAlways(),this.gridRowHeights.reduce((t,e)=>t+e,0)}getTopBreakpointForFeedAlways(){this.gridRowHeights?.length||this.updateHeaderGridRowsForFeedAlways();return this.gridRowHeights.reduce((t,e)=>t+e,0)}isTopsitesNeedPadding(t){return"off"!==t&&this.recommendedSitesHeight>0}checkMarketToggleOverlap(t,e,n){const i=t.getBoundingClientRect();let r=!1;if(i){const t=!(i.right<e.left||i.left>e.right),o=n?i.bottom>e.top:i.top<e.bottom;r=t&&o}return r}checkMarketToggleFitOnPage(){if(!this.shadowRoot)return!0;let t=this.shadowRoot?.querySelector?.("market-language-toggle");const e=this.shadowRoot?.querySelector?.("cs-header-core");if(!t){if(!e)return!0;t=e.shadowRoot?.querySelector?.("market-language-toggle")}if(!t||!t.shadowRoot||!t.shadowRoot?.children)return!0;const n=t.shadowRoot?.children[0];if(!n)return!0;t.classList?.remove("overflow");const i=n.getBoundingClientRect(),r=this.headerCoreRef?.search;if(r&&this.checkMarketToggleOverlap(r,i,!1))return t.classList?.add("overflow"),!1;const o=this.shadowRoot?.querySelector?.("background-image");if(o){const e=o.shadowRoot?.querySelector?.(".museumCard");if(e&&this.checkMarketToggleOverlap(e,i,!1))return t.classList?.add("overflow"),!1}const s=this.shadowRoot?.querySelector?.("top-sites-edgenext");return!s||!this.checkMarketToggleOverlap(s,i,!1)||(t.classList?.add("overflow"),!1)}triggerChannelStoreCoachmark(t){window.dispatchEvent(new CustomEvent("launchChannelStoreCoachmark",{detail:t})),this.scrollCanTrigChannelStoreCoachmark=!1,window.removeEventListener("click",this.onClickForTrigChannelStoreCoachmark),window.removeEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.removeEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor)}focusFeedBorderScrollFade(){const t=this.shadowRoot?.querySelector?.(".navAndContent_feed");t&&(0!=window.scrollY?t.classList.add("navAndContent_noshadow"):0==window.scrollY&&t.classList.remove("navAndContent_noshadow"))}checkGalleryPageFitAndDisplayToast(){window.requestAnimationFrame(()=>{innerWidth<be.et&&(this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!1),this.renderGalleryMinimumWidthToast())})}renderGalleryMinimumWidthToast(){this.displayGalleryMinimumWidthToast=!0,window.setTimeout(()=>{this.displayGalleryMinimumWidthToast=!1},5e3)}calculateStickyBreakpoints(){0===window.scrollY&&this.calculateSearchStickyBreakpoint(),this.calculateTopAndBackgroundStickyBreakpoints()}calculateSearchStickyBreakpoint(){const t=this.headerCoreRef;if(!t)return;let e=10;e+=this.topBannerOffsetHeight;const n=t.offsetTop;this.searchStickyBreakpoint=n-e+(this.enableOneColumn?this.stickyHeaderHeight:0),(0,At.y6)("search",this.searchStickyBreakpoint)}calculateTopAndBackgroundStickyBreakpoints(){const{selectedFeedDisplaySetting:t}=this.layoutState;let e;switch(t){case"always":e=this.getTopBreakpointForFeedAlways()-this.stickyHeaderHeight-this.topBannerOffsetHeight;break;case"peek":e=cn(this,!0)-this.stickyHeaderHeight-this.topBannerOffsetHeight;break;case"headingsonly":e=window.innerHeight-this.stickyHeaderHeight-S.$L-this.topBannerOffsetHeight-this.headingsOnlyHeightReduction;break;default:e=window.innerHeight-this.stickyHeaderHeight-this.topBannerOffsetHeight}const n=e,i=e;(0,At.y6)(E,-1),(0,At.y6)("top",n+this.stickyHeaderHeight),(0,S.Ax)(n+this.stickyHeaderHeight),"off"!==this.layoutState.currentBackgroundImageType?(0,At.y6)(F,i):(0,At.y6)(F,-1),this.navIsSticky=window.scrollY>n,this.updateHeaderCoreOffset()}scrollDownOnLoad(){if(this.shouldShrinkHeader){let t=this.headerHeight-78-Ve(this.showHeroAboveNav,this.layoutState);this.enableOneColumn&&this.fixedSearchBox&&(t-=46),window.scroll(0,t)}}updateNavFeedBorderRadius(){this.navAndContentFeedRef?.style&&(this.config.translucentFeed?.feedBorderRadius&&(!this.childRefs?.recommendedSites||this.invisibleRecommendedSites||this.showHeroAboveNav)?this.navAndContentFeedRef.style.borderRadius=this.config.translucentFeed?.feedBorderRadius:this.navAndContentFeedRef.style.borderRadius="0px")}getCompanyLogo(){const t=this.layoutState.currentLayout;this.showBackplate="focused"===t||"custom"===t&&!this.layoutState.imageOfTheDayEnabled||"informational"===t&&this.isLowEndDevice,this.showCompanyLogo=!("c1"===this.columnArrangement||"c2"===this.columnArrangement),this.companyLogoImage=this.getCompanyLogoFromLocalStorage(),this.updateHeaderCoreData()}updateTopSitesQuickLinkEndMarginUsedPadding(){const t=this.shadowRoot?.querySelector?.("background-image")?.shadowRoot?.querySelector?.(".museumCard");t&&window.setTimeout(()=>{"off"===this.layoutState.selectedQuickLinksDisplaySetting&&(t&&t.clientWidth&&(this.topSitesQuickLinkEndMarginUsedPadding+=t.clientWidth),this.pageSettingsDataConnector&&this.pageSettingsDataConnector.updateTopSitesQuickLinkEndMarginUsedPadding(this.topSitesQuickLinkEndMarginUsedPadding))},300)}async initializeDevTools(){this.config.childRefs.devTools&&Promise.all([(0,Y.dT)(),(0,Y.uR)(),(0,zt.GP)()]).then(()=>(0,y.jh)(2e3)).then(()=>{const t=u.Rb.ClientSettings,e=t?.detection?.isMsft||t?.detection?.isCorpNet||d.T3.IsDebug||"int"===t.env;e&&(0,Nt.uC)(this.config.childRefs.devTools),this.enableDevTools=e})}updateFeedLayoutTelemetry(){Q.YT.updatePageMetadata({feed:{layout:"multicol"}})}async tryLoadFeedModuleBundle(){this.feedModuleImportPromise||(this.feedModuleImportPromise=(0,ce.c)(this.config),await this.feedModuleImportPromise)}async updateHeaderCoreData(){const t=this.layoutState.greetingEnabled&&this.childRefs.welcomeGreeting&&!this.isNewTabPageContentManagedByPolicy&&"weather"!==this.heroSegmentType&&!this.disableWeatherInHeader&&!this.displayWidgetsRegion,e=this.isAppLauncherAllowedByPolicy,n=this.renderSignInControls,i=this.layoutState.isCompanyLogoEnabledByPolicy&&this.showCompanyLogo&&this.config.companyLogo&&!!this.companyLogoImage;this.headerCoreTopStartData={waffleRef:e?this.childRefs.waffle:null,backgroundImageOn:this.layoutState.imageOfTheDayEnabled,enableCompanyLogo:i,companyLogoImage:this.companyLogoImage,showcompanyLogoBackplate:this.showBackplate,companyLogoBackplateColor:this.layoutState.companyLogoBackplateColor,enableClickableCompanyLogo:i&&this.config.enableClickableCompanyLogo};const{settingsButtonText:r,signInButtonText:o,signInButtonTitle:s,closeButtonText:a}=this.strings,c=this.strings.regionAndLanguageTitle??"Region and language",u="off"===this.layoutState?.selectedFeedDisplaySetting,l="headingsonly"===this.layoutState?.selectedFeedDisplaySetting,h=this.config.enableRubyToggleFeedDisplay&&(u||l),f=(0,St.eY)((0,d.rA)().CurrentMarket,!0);this.enableCopilotDiscoverHeaderSetting=await this.checkRubyToggleEligibility(this.config.enableRubyToggleClassic||h,f),Q.YT.addOrUpdateTmplProperty("rubyToggleFeedDisplaySetting",h?"1":"0"),this.headerCoreTopEndData={signInControlRef:n?this.childRefs.signInControl:null,welcomeGreetingRef:t?this.childRefs.welcomeGreeting:null,settingsRef:this.childRefs.settings,marketLanguageToggleRef:this.renderMarketLanguageToggle?this.childRefs.marketLanguageToggleWC:null,localeMarket:this.localeMarket,onMarketValueChange:this.onMarketValueChange,languageToggleHorizontalAlignment:!0,showWGPlaceHolder:!(0,se.S)(),strings:{settingsButtonText:r,signInButtonText:o,signInButtonTitle:s,regionAndLanguageTitle:c,closeButtonText:a},showRubyToggleClassic:this.enableCopilotDiscoverHeaderSetting,showRubyToggleFeedDisplaySetting:h&&f,isFeedOffMode:u,isHeadingsOnlyMode:l,rubyToggleStrings:this.getRubyToggleStrings(),classicCoachmarkStrings:this.getClassicCoachmarkStrings(),enableRubyDiscoverFeedStrings:this.config.enableRubyDiscoverFeedStrings},this.enableHiddenWelcomeGreeting=t&&this.headerCoreTopEndData.showWGPlaceHolder}async checkRubyToggleEligibility(t,e){const n=await yt.gR.getIsRubyEligible()&&(e??(0,St.eY)((0,d.rA)().CurrentMarket,!0)),i=yt.gR.isClassicToggleFlightEligible,r=Boolean(this.config.enableRubyToggleUnrestricted),o=n&&(i||r);return Q.YT.addOrUpdateTmplProperty("classicToggleEligible",o?"1":"0"),o&&Boolean(t)}updateHeaderCoreSearchData(){this.headerCoreSearchData={searchConfigRef:this.childRefs.search,showCodexBingIcon:this.config?.showCodexBingIcon,enableCodexBingStyles:this.config?.showCodexBingIcon&&(this.isAlwaysMode||0!=window?.scrollY),suggestionConfigRef:this.shouldRenderSuggestionPrompts?this.childRefs.copilotSuggestionPrompts:void 0}}targetLanguageOnMismatch(t){const e=u.Rb.ClientSettings&&u.Rb.ClientSettings.market&&u.Rb.ClientSettings.market.requestInput,n=d.T3.CurrentMarket.split("-"),i={language:(e.language??"").toLowerCase(),market:(e.region??"").toLowerCase()};if(e&&i){const e={language:i.language,market:n[n.length-1]},r=c.N7.find(t=>t.id==(0,ve.Ah)(e));if(r)return r;const o=i.market&&c.N7.find(t=>t.id==(0,ve.Ah)(i));if(o)return o;{const e=t.get(i.language);if(e)return c.N7.find(t=>t.id==e[0])}}}async onConditionalBannerDisplayChange(t){this.displayConditionalBanner=t,this.updateStickyHeaderHeight(),this.updateHeaderCoreOffset(),this.updateHeaderGrid(),this.refreshHeaderHeight(),await(0,xt.P)().then(()=>this.calculateStickyBreakpoints())}updateStickyHeaderHeight(){this.stickyHeaderHeight=S.e4,this.enableOneColumn||(this.stickyHeaderHeight+=this.topBannerOffsetHeight)}updateHeaderCoreOffset(){this.headerCoreOffset=0,this.enableOneColumn||(this.headerCoreOffset+=this.topBannerOffsetHeight)}attachListenerForKeyDownScrollOnFocus(){window.addEventListener("keyup",this.scrollOnKeyUp,{once:!0}),window.addEventListener("keyup",this.focusControlOnScrollKeyUp),window.addEventListener("wheel",this.focusControlOnWheel)}scrollOnKeyUp(t){if("PageDown"==t.key||"ArrowDown"==t.key){const e=document?.activeElement;if(!e||"EDGE-CHROMIUM-PAGE"===e.tagName)return;window.setTimeout(()=>{if(0==window.scrollY){const e="PageDown"==t.key?window.innerHeight:window.innerHeight/5;window.scrollBy({top:e,behavior:"smooth"})}},1)}}blurGridViewWhenActive(t){t&&t.shadowRoot&&t.shadowRoot?.activeElement&&"gridViewFeed"==t.shadowRoot?.activeElement.elementKey&&t.shadowRoot?.activeElement.blur()}joinAdInterestGroup(){Q.YT.addOrUpdateTmplProperty("jaig","1"),(navigator?.cookieDeprecationLabel||"cookieDeprecationLabel"in navigator)&&navigator.cookieDeprecationLabel?.getValue?.().then(t=>{if(Q.YT.addOrUpdateTmplProperty("ckdp-label",t||"none"),t?.includes("treatment")&&(Q.YT.addOrUpdateTmplProperty("ckdp-t-jaig","1"),this.config.enableJoinAdInterestGroup)){const t={owner:"https://bat.bing.com",name:"NTPGroup",lifetimeMs:2592e6,priority:1e3,biddingLogicUrl:"https://bat.bing.com/pa/ps/x/cdn/bidding/bidding-current.js",executionMode:"compatibility",trustedBiddingSignalsUrl:"https://ib.adnxs.com/ps/ib/pa/kv",trustedBiddingSignalsKeys:["ms_u_m_"+(0,q.Ri)("MUID"),"ms_u_a_"+(0,q.Ri)("APP_ANON")?.substring(2)]};navigator?.joinAdInterestGroup&&"function"==typeof navigator.joinAdInterestGroup&&navigator.joinAdInterestGroup(t,2592e6)}})}isVpTest(){return"1"===b._3.getQueryParameterByName("vptest",(0,oe.iA)())}isWidgetsVpTest(){return!(!this.isVpTest()||!this.config?.enableWidgetsRegion||d.T3.IsHeroNTP)&&"1"===b._3.getQueryParameterByName("ntpwidgets",(0,oe.iA)())}generateTelemetryTagsForBgRightClickMenu(){this.telemetryObject&&(this.telemetryTags.viewBackgroundImage=(0,rn.l)(B,{headline:"bg right click menu view background image"},J.MS.More,J.EG.Click).getMetadataTag?.(),this.telemetryTags.editBackgroundImage=(0,rn.l)(L,{headline:"bg right click menu edit background image"},J.MS.More,J.EG.Click).getMetadataTag?.(),this.telemetryTags.refreshPage=(0,rn.l)(U,{headline:"bg right click menu edit background image"},J.MS.Refresh,J.EG.Click).getMetadataTag?.(),this.telemetryTags.contextMenu=(0,rn.l)(W,{headline:"bg right click menu"},J.MS.More,J.EG.RightClick).getMetadataTag?.())}testSSRCrashOnVPtest(){const t="1"===b._3.getQueryParameterByName("ssrCrashVptest",location.href);if(!(0,se.S)()&&t)throw new Error("Test SSR crash on VP test case")}updatePivotsNavigatedAndStampTmpl(t,e){if(!t)return;const n=e?"w":t.charAt(0);this.pivotsNavigated.push(n),Q.YT.addOrUpdateTmplProperty("pivotsNav",this.pivotsNavigated.toString())}async prerenderRefreshCritical(){const t=this.getShowWidgets();if(this.config.useDedicatedWidgetsManager&&ye.Oq.isPrerenderDsiabled){if(this.noWidgetsData=!1,!t)return;await this.fetchAndStoreMainFeed({},void 0,!0),await this.ensureWidgetsManagerLoaded(),this.widgetsFeedManager.skipInitialRender=!0,this.updateWidgetsDisplayAndStampTmpl(t),await this.widgetsFeedManager.waitForInited(),this.widgetsFeedManager.callRefreshRegionsData(),this.updateHeaderGrid(),this.refreshHeaderHeight()}}checkFeedContainerWidth(){if(this.feedContainerRef){const t=this.feedContainerRef.clientWidth-this.feedContainerRef.getBoundingClientRect().width;this.requiresExtraWidth=t>0,this.requiresExtraWidth&&this.style.setProperty("--extra-feed-width",`${u.Rb.CurrentFlightSet.has("ntp-resp-width")?"0.02":t}px`)}}debouncedFeedWidthCheck(){this.requiresExtraWidth=!1,this.feedWidthCheckHandler&&this.feedWidthCheckHandler.cancel(),this.feedWidthCheckHandler=(0,It.A)(this.checkFeedContainerWidth,100),this.feedWidthCheckHandler()}}(0,r.Cg)([ue.sH],kn.prototype,"isLowEndDevice",void 0),(0,r.Cg)([ue.sH],kn.prototype,"layoutState",void 0),(0,r.Cg)([ue.sH],kn.prototype,"columnArrangement",void 0),(0,r.Cg)([ue.sH],kn.prototype,"quickLinksDisplaySetting",void 0),(0,r.Cg)([ue.sH],kn.prototype,"headerHeight",void 0),(0,r.Cg)([ue.sH],kn.prototype,"contentOffHeaderHeight",void 0),(0,r.Cg)([ue.sH],kn.prototype,"gridRows",void 0),(0,r.Cg)([ue.sH],kn.prototype,"headerHeightNeeded",void 0),(0,r.Cg)([ue.sH],kn.prototype,"enableOneColumn",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showPivotRefreshButton",void 0),(0,r.Cg)([ue.sH],kn.prototype,"closeRefreshAnimation",void 0),(0,r.Cg)([ue.sH],kn.prototype,"logoRow",void 0),(0,r.Cg)([ue.sH],kn.prototype,"searchRow",void 0),(0,r.Cg)([ue.sH],kn.prototype,"topSitesRow",void 0),(0,r.Cg)([ue.sH],kn.prototype,"widgetsRegionRow",void 0),(0,r.Cg)([ue.sH],kn.prototype,"recommendedSitesRow",void 0),(0,r.Cg)([ue.sH],kn.prototype,"weatherOneLinerRow",void 0),(0,r.Cg)([ue.sH],kn.prototype,"widgetsUpsellButtonRow",void 0),(0,r.Cg)([ue.sH],kn.prototype,"scrollDownBtnRow",void 0),(0,r.Cg)([ue.sH],kn.prototype,"isWeatherOneLinerMapped",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showWeatherOneLiner",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showFeedTranslucent",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showDarkIcon",void 0),(0,r.Cg)([ue.sH],kn.prototype,"needDarkThemeIcons",void 0),(0,r.Cg)([ue.sH],kn.prototype,"feedOverrideStyles",void 0),(0,r.Cg)([ue.sH],kn.prototype,"recommendedSitesOverrideStyles",void 0),(0,r.Cg)([ue.sH],kn.prototype,"enableHiddenRecommendedSitesStyles",void 0),(0,r.Cg)([ue.sH],kn.prototype,"recommendedSitesDisplaySetting",void 0),(0,r.Cg)([ue.sH],kn.prototype,"navIsSticky",void 0),(0,r.Cg)([ue.sH],kn.prototype,"isTtvrFiredAndCanUseDom",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showBreakingNews",void 0),(0,r.Cg)([ue.sH],kn.prototype,"enableSpotlightButton",void 0),(0,r.Cg)([ue.sH],kn.prototype,"widgetsRegionRequiresTtvrCallback",void 0),(0,r.Cg)([ue.sH],kn.prototype,"isSignedInMSAUser",void 0),(0,r.Cg)([ue.sH],kn.prototype,"pivotManager",void 0),(0,r.Cg)([ue.sH],kn.prototype,"conditionalBannerShown",void 0),(0,r.Cg)([ue.sH],kn.prototype,"isAlwaysMode",void 0),(0,r.Cg)([ue.sH],kn.prototype,"bottomRightCornerClassName",void 0),(0,r.Cg)([ue.sH],kn.prototype,"className",void 0),(0,r.Cg)([ue.sH],kn.prototype,"canaryFlightEnabled",void 0),(0,r.Cg)([ue.sH],kn.prototype,"displayConditionalBanner",void 0),(0,r.Cg)([ue.sH],kn.prototype,"displayNetworkErrorBanner",void 0),(0,r.Cg)([ue.sH],kn.prototype,"isOnPersonalizeOrM365Page",void 0),(0,r.Cg)([ue.sH],kn.prototype,"isOnM365Page",void 0),(0,r.Cg)([ue.sH],kn.prototype,"nowPivotId",void 0),(0,r.Cg)([ue.sH],kn.prototype,"isNewTabPageContentManagedByPolicy",void 0),(0,r.Cg)([ue.sH],kn.prototype,"contentConfigInfo",void 0),(0,r.Cg)([ue.sH],kn.prototype,"context",void 0),(0,r.Cg)([ue.sH],kn.prototype,"getFeedDependencyPromise",void 0),(0,r.Cg)([ue.sH],kn.prototype,"widgetsRegionDependencyPromise",void 0),(0,r.Cg)([ue.sH],kn.prototype,"hideWidgets",void 0),(0,r.Cg)([ue.sH],kn.prototype,"pulseData",void 0),(0,r.Cg)([ue.sH],kn.prototype,"pulseOnHover",void 0),(0,r.Cg)([ue.sH],kn.prototype,"renderBackgroundGallery",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showSpotlightBackgroundGalleryCard",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showSpotlightButton",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showSpotlightHoverMask",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showSpotlightButtonByHover",void 0),(0,r.Cg)([ue.sH],kn.prototype,"displayGalleryMinimumWidthToast",void 0),(0,r.Cg)([ue.sH],kn.prototype,"headerCoreTopStartData",void 0),(0,r.Cg)([ue.sH],kn.prototype,"headerCoreTopEndData",void 0),(0,r.Cg)([ue.sH],kn.prototype,"headerCoreSearchData",void 0),(0,r.Cg)([ue.sH],kn.prototype,"headerCoreOffset",void 0),(0,r.Cg)([ue.sH],kn.prototype,"stickyHeaderHeight",void 0),(0,r.Cg)([ue.sH],kn.prototype,"wpoNotificationPreviewData",void 0),(0,r.Cg)([ue.sH],kn.prototype,"enableNotificationAnimation",void 0),(0,r.Cg)([ue.sH],kn.prototype,"notSupportLayout",void 0),(0,r.Cg)([ue.sH],kn.prototype,"gameContainerRef",void 0),(0,r.Cg)([ue.sH],kn.prototype,"requiresExtraWidth",void 0),(0,r.Cg)([ue.sH],kn.prototype,"enableHiddenWelcomeGreeting",void 0),(0,r.Cg)([ue.sH],kn.prototype,"displayNetworkErrorWhenFeedDependenciesFailed",void 0),(0,r.Cg)([ue.Jg],kn.prototype,"topBannerOffsetHeight",null),(0,r.Cg)([ue.Jg],kn.prototype,"responsiveSupported",null),(0,r.Cg)([ue.Jg],kn.prototype,"shouldRenderSkeleton",null),(0,r.Cg)([ue.Jg],kn.prototype,"shouldRenderSuggestionPrompts",null),(0,r.Cg)([ue.sH],kn.prototype,"enableDevTools",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showSkeleton",void 0),(0,r.Cg)([ue.sH],kn.prototype,"userScrolled",void 0),(0,r.Cg)([ue.sH],kn.prototype,"invisibleTopSites",void 0),(0,r.Cg)([ue.sH],kn.prototype,"invisibleSearchBox",void 0),(0,r.Cg)([ue.sH],kn.prototype,"invisibleRecommendedSites",void 0),(0,r.Cg)([ue.sH],kn.prototype,"invisibleHero",void 0),(0,r.Cg)([ue.sH],kn.prototype,"overriddenFeedConfig",void 0),(0,r.Cg)([ue.sH],kn.prototype,"overlapState",void 0),(0,r.Cg)([ue.sH],kn.prototype,"feedHasLoaded",void 0),(0,r.Cg)([ue.sH],kn.prototype,"shouldRenderToastWC",void 0),(0,r.Cg)([ue.sH],kn.prototype,"telemetryTags",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showRightClickMenu",void 0),(0,r.Cg)([ue.sH],kn.prototype,"personalizedTelemetryObject",void 0),(0,r.Cg)([ue.sH],kn.prototype,"headerHeroTelemetryObject",void 0),(0,r.Cg)([ue.sH],kn.prototype,"renderChannelStoreEvent",void 0),(0,r.Cg)([ue.sH],kn.prototype,"updatedFeedDisplaySetting",void 0),(0,r.Cg)([ue.sH],kn.prototype,"ntpTypeToSearch",void 0),(0,r.Cg)([ue.sH],kn.prototype,"isHero",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showHeroAboveNav",void 0),(0,r.Cg)([ue.sH],kn.prototype,"showWidgetsUpsellButton",void 0),(0,r.Cg)([ue.sH],kn.prototype,"flyoutOpen",void 0),(0,r.Cg)([ue.sH],kn.prototype,"displayWidgetsRegion",void 0),(0,r.Cg)([ue.sH],kn.prototype,"animationIconVisibile",void 0),(0,r.Cg)([ue.Jg],kn.prototype,"hideTopSectionSSRHero",null),(0,r.Cg)([ue.Jg],kn.prototype,"showNavAndContentTemplate",null),(0,r.Cg)([ue.Jg],kn.prototype,"weatherOnelinerConditionCheck",null),(0,r.Cg)([ue.Jg],kn.prototype,"fixedSearchBox",null),(0,r.Cg)([ue.sH],kn.prototype,"hideSearchSuggestionPrompts",void 0),(0,r.Cg)([ue.Jg],kn.prototype,"showSearchSuggestionPrompts",null),(0,r.Cg)([ue.Jg],kn.prototype,"shouldShowNotificationMiniCard",null),(0,r.Cg)([ue.Jg],kn.prototype,"showWeatherInFeedOff",null);var Tn=n(10160),xn=n(94425),An=n(56046);var $n=n(11622);var In=n(39957),Pn=n(60402),Rn=n(91640),Mn=n(43227),_n=n.n(Mn),En=n(15125),Fn=n.n(En),Dn=n(13047),On=n(33973),Nn=n(9707),Ln=n(68619),Bn=n(61204);Dn.G,Ln.a,On.x,Nn.w;const Un=(0,An.C)("TTSR.TopSitesTag",!0),Wn=(0,An.C)("TTSR.HeaderTag",!0),Vn=(0,An.C)(`${Y.wL}Complete`),Hn=(0,An.C)(`${Y.wL}SearchBox`,!0),zn=(g.P.Nav+2).toString(),jn=t=>`--sticky-height:${t.stickyHeaderHeight||108}px;--search-sticky-extra-height:${t.topBannerOffsetHeight}px`,qn=Oe.qy`<div class="refreshPage ${t=>t.closeRefreshAnimation?"hide":""}"><fluent-progress-ring></fluent-progress-ring></div>`,Gn=(Oe.qy`<div class="doubleWideRiverCard"></div>`,Oe.qy`<div class="singleWideRiverCard"></div>`,Oe.qy`<div class="fixed-size-card"><div class="card-img skeleton"></div><div class="card-label skeleton"></div><div class="card-text skeleton"></div><div class="card-text skeleton"></div><div class="card-text skeleton" style="width: 70%;"></div></div>`),Jn=Oe.qy`<div class="skeleton-container ${t=>t.responsiveSupported?"skeleton-responsive":""}" id="skeleton-loader"><div class="skeleton-feed fixed-size-feed ${t=>t.config.enableShimmerForSkeleton?"shimmer":""}">${(0,In.ux)(t=>new Array(39),Gn)}</div></div>`,Qn=t=>t.config.translucentFeed?.feedSidePadding?.split("px")?.[0],Kn=t=>`${t.feedOverrideStyles}; --nav-height:${S.$L||50}px; ${jn(t)}`,Xn=t=>{if("cegrowth"===t.heroSegmentType)return(0,P.ud)()?`${d.T3.StaticsUrl}latest/moment-in-time/icons/HeaderIconDark.svg`:`${d.T3.StaticsUrl}latest/moment-in-time/icons/HeaderIconLight.svg`},Yn=Oe.qy`<div id="heroInHeader" class="navAndContent ${t=>t.showFeedTranslucent?"navAndContent_tb":""} navAndContent_nb" style="${t=>`grid-row: ${t.widgetsRegionRow};min-height: auto;z-index: 1;border-radius: ${t.config.translucentFeed?.feedBorderRadius};box-shadow:${t.boxShadowStyles};position:relative;display:${t.invisibleHero?"none":""}`}">${t=>(0,$n.yN)(t.childRefs.widgetsRegion,{properties:{getFeedDependencyPromise:t.widgetsRegionDependencyPromise,styles:`${Kn(t)}; box-shadow: unset;`,showHero:t.showHeroAboveNav,headerTitle:"cegrowth"===t.heroSegmentType&&t.strings.todaysmoment,headerIcon:Xn(t)},ttvrMarkerAggregate:"Header",telemetryObject:t.headerHeroTelemetryObject})}</div>`,Zn=Oe.qy`<div style="${t=>(t=>t.config.enableFixedImageGutter?`--nav-image-gutter-margin:${t.config.bufferSizeOverride}px;`:"")(t)}" class="navAndContent ${t=>t.showFeedTranslucent?"navAndContent_tb":""} navAndContent_nb ${t=>t.config.enableNoWorkFeed&&t.isOnM365Page?"navAndContent_noWFeed":""} ${t=>t.config.enableResponsiveFeed?"nav-content-responsive":""}"><div id="feed-content" class="navAndContent_feed ${t=>"play"===t.nowPivotId?"navAndContent_feed_fullpage":""} ${t=>t.buildFocusBorderStyleClasses()}" style="${t=>Kn(t)}" ${(0,Pn.K)("navAndContentFeedRef")}><div class="g_nav_container"><div id="g_nav" style="${t=>t.isOnM365Page?`position:relative;${t.config.enableNoWorkFeed?"":"--m365-column-width:fit-content;"}justify-content:flex-start`:""}" class="nav ${t=>t.className} ${t=>t.config.enableOneColumn?"navStickyOneColumn":""} ${t=>t.conditionalBannerShown?"conditionalBannerShown":""} ${(0,At.mK)({stickyClassName:"nav_sticky",breakpointName:"pivot"})}><div class="navSized ${t=>t.isOnM365Page?"contentSized":""} ${t=>t.config.enableOneColumn&&!t.responsiveSupported?"contentSizedOneColumn":""} ">${t=>(0,$n.yN)(t.childRefs.superNav,{attributes:{showFullPageBlur:t.isFullPageBlur(),isSignedInMSAUser:t.isSignedInMSAUser,enableRubyToggleSuperNav:t.enableCopilotDiscoverSuperNavSetting},ttvrMarkerAggregate:"Header"})}</div></div></div>${(0,Rn.z)(t=>t.showPivotRefreshButton,qn)}<div style="${t=>t.isOnM365Page?"margin-top:0;":""} ${t=>t.shouldRenderSkeleton&&t.responsiveSupported?"position:relative;":""}" class="contentBelowNav ${t=>t.isOnM365Page?"":"contentSized"} ${t=>!t.isOnM365Page&&t.config.enableOneColumn?"contentSizedOneColumn":""} ${t=>"play"===t.nowPivotId?"contentSizedFullScreen":""} ${t=>t.config.enableNoWorkFeed&&t.isOnM365Page?"noWorkFeedContent":"contentPlaceHolder"} ${t=>t.requiresExtraWidth?"increased-width":""} " ${(0,Pn.K)("feedContainerRef")}>${(0,Rn.z)(t=>t.shouldRenderSkeleton,Jn)} ${(0,Rn.z)(t=>!t.isOnPersonalizeOrM365Page&&t.config.childRefs.superBreakingNews&&(!t.config.enableLazyLoadBreakingNews||t.showBreakingNews),Oe.qy`${t=>(0,$n.yN)(t.childRefs.superBreakingNews,{attributes:{style:"display: grid; justify-items: center;"},ttvrMarkerAggregate:"Header"})}`)} ${(0,Rn.z)(t=>t.contentConfigInfo,Oe.qy` ${(0,Rn.z)(()=>window.isSSREnabled,Oe.qy`${()=>Oe.qy`${Oe.qy.partial((0,it.H_)())}`}`)} ${(0,Rn.z)(t=>window.isSSREnabled,t=>{return(e=t.contentConfigInfo)?Oe.qy`<script nonce="${()=>window.NONCE_ID}">window.ssrLoadedExperience.publish(${Oe.qy.partial(JSON.stringify(e))})</script>`:Oe.qy``;var e})} ${t=>(0,$n.yN)(t.contentConfigInfo,{includeTelemetryTag:!1,properties:{gamingPivotSwitched:t.context?.gamingPivotSwitched,context:t.context,getFeedDependencyPromise:t.getFeedDependencyPromise,feedPadding:Qn(t),isHeroShownOnHeader:t.showHeroAboveNav,seenContentHandler:t.seenContentHandler},memoize:!1})} `)} ${(0,Rn.z)(t=>t.displayNetworkErrorWhenFeedDependenciesFailed,Oe.qy`<div class="network-error-message">${t=>t.strings.networkErrorMessage}</div>`)}</div></div></div>`,ti=Oe.qy`<msn-toast class="backgroundGalleryMinimumWidthToast">${t=>t.strings.backgroundGalleryBelowMinimumWidthToastText}</msn-toast>`,ei=Oe.qy`<cs-header-core :startSection=${t=>t.headerCoreTopStartData} :endSection=${t=>t.headerCoreTopEndData} :searchSection=${t=>t.headerCoreSearchData} :chromiumPageSettingsState=${t=>t.layoutState} :headerCoreTTVRTemplate=${Hn} :showFullPageBlur=${t=>t.isFullPageBlur()} :needDarkThemeIcons=${t=>t.needDarkThemeIcons} :isOnM365Page=${t=>t.isOnM365Page} class="translucent ${t=>t.headerCoreSearchData?.enableCodexBingStyles?"bing-chat":""} ${t=>t.fixedSearchBox?"fixed-search":""} " style="grid-row:${t=>t.searchRow};${t=>(t=>`--header-offset:${t.invisibleTopSites?0:t.headerCoreOffset||0}px;--header-top-margin:10px;`)(t)}" ${(0,Pn.K)("headerCoreRef")}></cs-header-core>`,ni=Oe.qy` ${(0,Rn.z)(t=>t.topSitesLayoutState&&t.childRefs.topSites&&"off"!==t.quickLinksDisplaySetting,t=>(0,$n.yN)(t.childRefs.topSites,{attributes:{selectedQuickLinksDisplaySetting:t.quickLinksDisplaySetting,quickLinksToggleSpacingForBanner:!!t.displayConditionalBanner,showFullPageBlur:t.isFullPageBlur(),needDarkThemeIcons:t.needDarkThemeIcons,quickBriefVisible:!!t.shouldShowNotificationMiniCard},ttvrMarkerAggregate:"Header"}))} ${Un}
`,ii=Oe.qy`<div id="widgets" class="${t=>t.hideWidgets&&"widgets_hidden"} widgetsRegion" style=${t=>`grid-row: ${t.widgetsRegionRow}; z-index: ${t.flyoutOpen?1:zn};`}>${t=>(0,$n.yN)(t.childRefs.widgetsRegion,{properties:{getFeedDependencyPromise:t.widgetsRegionDependencyPromise,limitHeight:"off"===t.layoutState.selectedFeedDisplaySetting||"headingsonly"===t.layoutState.selectedFeedDisplaySetting,needsExperienceTtvrCallback:t.widgetsRegionRequiresTtvrCallback},ttvrMarkerAggregate:"Header"})}</div>`,ri=Oe.qy`${Oe.qy.partial('<svg viewBox="0 0 226 48" height="48" width="225"><path key="MicrosoftLogo1" id="microsoft" d="M93.6 9.6v28.8h-5V15.8h-.1l-8.9 22.6h-3.3l-9.1-22.6h-.1v22.6h-4.6V9.6h7.2L78 30.9h.1l8.7-21.3h6.8zm4.1 2.2c0-.8.3-1.5.9-2 .6-.5 1.3-.8 2.1-.8.9 0 1.6.3 2.1.9.5.5.9 1.2.9 2s-.3 1.5-.9 2c-.6.5-1.3.8-2.1.8-.9 0-1.5-.3-2.1-.8-.5-.7-.9-1.4-.9-2.1zm5.4 5.9v20.7h-4.9V17.7h4.9zm14.8 17.2a9.2 9.2 0 0 0 4.8-1.8v4.5c-.8.5-1.7.8-2.7 1-1 .2-2.1.3-3.3.3-3.1 0-5.5-.9-7.4-2.9-1.9-1.9-2.9-4.4-2.9-7.3 0-3.3 1-6.1 2.9-8.2 1.9-2.1 4.7-3.2 8.3-3.2.9 0 1.8.1 2.7.3.9.3 1.7.5 2.2.8v4.7c-.7-.5-1.5-1-2.3-1.3-.8-.3-1.6-.5-2.4-.5-1.9 0-3.5.6-4.7 1.9-1.2 1.3-1.8 2.9-1.8 5.1 0 2.1.5 3.7 1.7 4.9 1.4 1.1 2.9 1.7 4.9 1.7zm18.6-17.5c.4 0 .7 0 1.1.1.3.1.6.1.8.2v4.9c-.3-.2-.6-.3-1.1-.5-.5-.2-1.1-.3-1.8-.3-1.2 0-2.2.5-3 1.5-.8 1-1.3 2.5-1.3 4.7v10.4h-4.9V17.7h4.9V21h.1c.5-1.1 1.1-2 2-2.7.8-.6 1.9-.9 3.2-.9zm2.1 11c0-3.4.9-6.1 2.9-8.1 1.9-2 4.6-3 8.1-3 3.2 0 5.7.9 7.5 2.9 1.8 1.9 2.7 4.5 2.7 7.8s-.9 6-2.9 8c-1.9 2-4.5 3-7.9 3-3.2 0-5.7-.9-7.6-2.8-1.9-2-2.8-4.6-2.8-7.8zm5.1-.2c0 2.1.5 3.8 1.5 4.9 1 1.1 2.4 1.7 4.2 1.7 1.8 0 3.1-.6 4.1-1.7.9-1.1 1.4-2.8 1.4-5.1 0-2.2-.5-3.9-1.5-5-.9-1.1-2.3-1.7-4-1.7-1.8 0-3.1.6-4.1 1.8-1.2 1.2-1.6 2.9-1.6 5.1zm23.3-5c0 .7.2 1.3.7 1.7.5.4 1.4.9 2.9 1.5 1.9.8 3.3 1.7 4.1 2.6.8 1 1.2 2.1 1.2 3.5 0 1.9-.7 3.5-2.3 4.7-1.5 1.2-3.5 1.8-6.1 1.8-.9 0-1.8-.1-2.9-.3-1.1-.2-1.9-.5-2.7-.8V33c.9.6 1.9 1.1 2.9 1.5 1 .3 1.9.5 2.8.5 1.1 0 1.9-.1 2.4-.5.5-.3.8-.8.8-1.5s-.3-1.3-.8-1.7c-.5-.5-1.6-1-3.1-1.6-1.8-.7-3.1-1.6-3.8-2.5s-1.1-2.1-1.1-3.6c0-1.9.7-3.4 2.2-4.6 1.5-1.2 3.4-1.8 5.7-1.8.7 0 1.5.1 2.4.3.9.1 1.7.4 2.3.6v4.6c-.7-.4-1.4-.8-2.3-1.1-.9-.3-1.7-.5-2.5-.5-.9 0-1.7.2-2.1.5-.4.5-.7.9-.7 1.6zm10.9 5.2c0-3.4.9-6.1 2.9-8.1s4.6-3 8.1-3c3.2 0 5.7.9 7.5 2.9 1.8 1.9 2.7 4.5 2.7 7.8s-.9 6-2.9 8c-1.9 2-4.5 3-7.9 3-3.2 0-5.7-.9-7.6-2.8-1.8-2-2.8-4.6-2.8-7.8zm5.1-.2c0 2.1.5 3.8 1.5 4.9 1 1.1 2.4 1.7 4.2 1.7 1.8 0 3.1-.6 4.1-1.7.9-1.1 1.4-2.8 1.4-5.1 0-2.2-.5-3.9-1.5-5-.9-1.1-2.3-1.7-4-1.7-1.8 0-3.1.6-4.1 1.8-1.1 1.2-1.6 2.9-1.6 5.1zm32.3-6.5H208v16.7h-4.9V21.7h-3.5v-4h3.5v-2.9c0-2.2.7-3.9 2.1-5.3 1.4-1.4 3.2-2.1 5.4-2.1.6 0 1.1 0 1.6.1s.9.1 1.2.3V12c-.1-.1-.5-.2-.9-.3-.4-.1-.9-.2-1.4-.2-1 0-1.8.3-2.3.9-.5.7-.8 1.6-.8 2.8v2.5h7.3V13l4.9-1.5v6.1h4.9v4h-4.9v9.7c0 1.3.2 2.2.7 2.7.5.5 1.2.8 2.2.8.3 0 .6-.1 1-.2s.7-.3 1.1-.5v4c-.3.2-.8.3-1.5.5-.7.1-1.4.2-2.1.2-2.1 0-3.6-.5-4.6-1.7-1-1.1-1.5-2.7-1.5-4.9V21.7h-.2z"/><path key="MicrosoftLogo2" id="blue" d="M22.8 25.2H0V48h22.8V25.2z" fill="#00A4EF"/><path key="MicrosoftLogo3" id="yellow" d="M48 25.2H25.2V48H48V25.2z" fill="#FFB900"/><path key="MicrosoftLogo4" id="green" d="M48 0H25.2v22.8H48V0z" fill="#7FBA00"/><path key="MicrosoftLogo5" id="red" d="M22.8 0H0v22.8h22.8V0z" fill="#F25022"/></svg>')}`,oi=Oe.qy`<div id="notificationMiniCardWrapper">${(0,Rn.z)(t=>t.shouldShowNotificationMiniCard,t=>(0,$n.yN)(t.childRefs.notificationMiniCard,{properties:{data:t.wpoNotificationPreviewData,onDismiss:t.dismissNotificationMiniCard,showNotificationSettingsOption:"off"!==t.layoutState.selectedFeedDisplaySetting,theme:t.getTheme()}}))}</div>`,si=Oe.qy` ${(0,Rn.z)(t=>!t.config.notificationOnRight,oi)} ${ni} ${(0,Rn.z)(t=>t.config.notificationOnRight,oi)}
`,ai=Oe.qy`<div class="rightClickMenu" style="left:-1000px" data-t="${t=>t.telemetryTags?.contextMenu}" ${(0,Pn.K)("ref_rightClickMenu")}><div role="button" class="rightClickMenuItem" data-t="${t=>t.telemetryTags?.editBackgroundImage}" @click=${t=>t.handleEditImage()}><span class="rightClickMenuItemIcon">${Oe.qy.partial((ci="20",`<svg xmlns="http://www.w3.org/2000/svg" width=${ci} height=${ci} viewBox="0 0 21 20"><path d="M14.5 7.5C14.5 8.32843 13.8284 9 13 9C12.1716 9 11.5 8.32843 11.5 7.5C11.5 6.67157 12.1716 6 13 6C13.8284 6 14.5 6.67157 14.5 7.5ZM13.5 7.5C13.5 7.22386 13.2761 7 13 7C12.7239 7 12.5 7.22386 12.5 7.5C12.5 7.77614 12.7239 8 13 8C13.2761 8 13.5 7.77614 13.5 7.5ZM3.5 6C3.5 4.34315 4.84315 3 6.5 3H14.5C16.1569 3 17.5 4.34315 17.5 6V14C17.5 15.6569 16.1569 17 14.5 17H6.5C4.84315 17 3.5 15.6569 3.5 14V6ZM6.5 4C5.39543 4 4.5 4.89543 4.5 6V14C4.5 14.3726 4.60191 14.7215 4.77937 15.0201L9.44868 10.432C10.0323 9.85859 10.9677 9.85859 11.5513 10.432L16.2206 15.0201C16.3981 14.7215 16.5 14.3726 16.5 14V6C16.5 4.89543 15.6046 4 14.5 4H6.5ZM6.5 16H14.5C14.8692 16 15.2149 15.9 15.5118 15.7256L10.8504 11.1453C10.6559 10.9542 10.3441 10.9542 10.1496 11.1453L5.48824 15.7256C5.78505 15.9 6.13085 16 6.5 16Z"/></svg>`))}</span><span class="rightClickMenuItemContent">${t=>t.strings?.rightClickMenu?.editBackground}</span></div><div role="button" class="rightClickMenuItem" data-t="${t=>t.telemetryTags?.viewBackgroundImage}" @click=${t=>t.handleViewImage()}><span class="rightClickMenuItemIcon">${Oe.qy.partial((t=>`<svg xmlns="http://www.w3.org/2000/svg" width=${t} height=${t} viewBox="0 0 13 12"><path d="M7.00765 0.462646L12.1514 0.46412L12.2241 0.476068L12.2776 0.493188L12.3423 0.525025L12.3892 0.557679L12.4406 0.606395L12.465 0.636671L12.5009 0.695879L12.5265 0.763162L12.5389 0.829715L12.5406 0.866717V5.71556C12.5406 5.93872 12.3501 6.11963 12.115 6.11963C11.9061 6.11963 11.7323 5.97669 11.6963 5.78819L11.6894 5.71556V1.84133L2.07561 10.9685H6.15641C6.36536 10.9685 6.53913 11.1114 6.57517 11.2999L6.58203 11.3725C6.58203 11.5709 6.43147 11.7359 6.23292 11.7701L6.15641 11.7766L1.0317 11.7763L0.97344 11.7702L0.886412 11.7461L0.821741 11.7142L0.77481 11.6816L0.723497 11.6329L0.699039 11.6026L0.663203 11.5434L0.637553 11.4761L0.63285 11.4574C0.626669 11.4302 0.623413 11.4017 0.623413 11.3725L0.628062 11.4323L0.624965 11.4071L0.623413 6.5237C0.623413 6.30054 0.813968 6.11963 1.04903 6.11963C1.25797 6.11963 1.43175 6.26257 1.46779 6.45107L1.47464 6.5237V10.3963L11.0867 1.27079H7.00765C6.7987 1.27079 6.62492 1.12785 6.58889 0.939349L6.58203 0.866717C6.58203 0.643555 6.77258 0.462646 7.00765 0.462646Z"/></svg>`)("13"))}</span><span class="rightClickMenuItemContent">${t=>t.strings?.rightClickMenu?.viewBackground}</span></div><fluent-divider class="menu-item-divider" role="separator" aria-orientation="horizontal" orientation="horizontal"></fluent-divider><div role="button" class="rightClickMenuItem" data-t="${t=>t.telemetryTags?.refreshPage}" @click=${t=>t.handleRefreshPage()}><span class="rightClickMenuItemIcon">${Oe.qy.partial((t=>`<svg width="${t}" height="${t}" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.59962 0.222652C8.24805 0.398433 8.8418 0.672847 9.38086 1.0459C9.91992 1.41894 10.3838 1.86035 10.7725 2.37011C11.1611 2.87988 11.4629 3.44433 11.6777 4.06347C11.8926 4.68261 12 5.32812 12 6C12 6.55078 11.9287 7.08203 11.7861 7.59375C11.6436 8.10547 11.4424 8.58398 11.1826 9.02929C10.9229 9.4746 10.6104 9.87988 10.2451 10.2451C9.87988 10.6103 9.47461 10.9228 9.0293 11.1826C8.58399 11.4424 8.10547 11.6435 7.59375 11.7861C7.08203 11.9287 6.55078 12 6 12C5.44922 12 4.91797 11.9287 4.40625 11.7861C3.89453 11.6435 3.41601 11.4424 2.9707 11.1826C2.52539 10.9228 2.12012 10.6103 1.75488 10.2451C1.38965 9.87988 1.07715 9.4746 0.817383 9.02929C0.557617 8.58398 0.356447 8.10644 0.213867 7.59668C0.0712892 7.08691 0 6.55469 0 6C0 5.45312 0.0722656 4.92188 0.216797 4.40625C0.361328 3.89063 0.567383 3.40527 0.83496 2.95019C1.10254 2.49512 1.42773 2.08105 1.81054 1.70801C2.19336 1.33496 2.625 1.01562 3.10546 0.75H1.5V0H4.49999V3H3.74999V1.25976C3.29296 1.47851 2.87988 1.75293 2.51074 2.08301C2.1416 2.41308 1.82617 2.78418 1.56445 3.19629C1.30273 3.60839 1.10156 4.05273 0.960936 4.52929C0.820311 5.00586 0.749999 5.49609 0.749999 6C0.749999 6.48046 0.812499 6.94433 0.937499 7.39159C1.0625 7.83886 1.23926 8.25683 1.46777 8.6455C1.69629 9.03417 1.9707 9.38867 2.29101 9.70898C2.61133 10.0293 2.96582 10.3037 3.35449 10.5322C3.74316 10.7607 4.16015 10.9375 4.60546 11.0625C5.05078 11.1875 5.51562 11.25 6 11.25C6.48046 11.25 6.94433 11.1875 7.39159 11.0625C7.83886 10.9375 8.25683 10.7607 8.6455 10.5322C9.03417 10.3037 9.38867 10.0293 9.70898 9.70898C10.0293 9.38867 10.3037 9.03417 10.5322 8.6455C10.7607 8.25683 10.9375 7.83984 11.0625 7.39453C11.1875 6.94922 11.25 6.48437 11.25 6C11.25 5.41406 11.1553 4.8496 10.9658 4.30664C10.7764 3.76367 10.5117 3.26953 10.1719 2.82422C9.83203 2.37891 9.42675 1.99316 8.95605 1.66699C8.48535 1.34082 7.96679 1.09961 7.40039 0.943359L7.59962 0.222652Z"/></svg>`)("13"))}</span><span class="rightClickMenuItemContent">${t=>t.strings?.rightClickMenu?.refreshPage}</span></div></div>`;var ci;const ui=Oe.qy`<fluent-button id="widgets-upsell-button" aria-label="${t=>t.strings?.widgetsUpsellButtonText}" class="${t=>"off"!==t.layoutState.currentBackgroundImageType?"widgets-upsell-background-on":"widgets-upsell-background-off"}" @click=${t=>t.widgetsUpsellButtonClicked()} data-t=${t=>t.telemetryTags?.widgetsUpsellButton||""}><span slot="start" class="svg-container">${Oe.qy.partial(_n())}</span><span class="text-container">${t=>t.strings?.widgetsUpsellButtonText}</span></fluent-button>`,di=Oe.qy`<div class="netErrClose"><fluent-button class="toast-close-button" @click="${t=>t.displayNetworkErrorBanner=!1}" data-t=${t=>t.networkErrorBannerCloseTelemetry.getMetadataTag()}>${Oe.qy.partial(Fn())}</fluent-button></div>`,li=Oe.qy`<div class="netErrBanner"><div class="netErrInner">${t=>t.strings.networkStatusUnstable}</div><div class="nettErrClose">${di}</div></div>`,hi=Oe.qy`<div @contextmenu=${(t,e)=>t.toggleBgRightClickMenu({detail:{event:e.event}})}>${(0,Rn.z)(t=>t.childRefs.conditionalBanner,Oe.qy`<div class="conditionalBannerHolder">${t=>(0,$n.yN)(t.childRefs.conditionalBanner,{properties:{onDisplayChange:t.onConditionalBannerDisplayChange.bind(t)}})} ${(0,Rn.z)(t=>t.displayNetworkErrorBanner,li)}</div>`)}
${(0,Rn.z)(t=>t.childRefs.superCoachMark,Oe.qy`<div class="superCoachMarkHolder">${t=>(0,$n.yN)(t.childRefs.superCoachMark)}</div>`)}
${(0,Rn.z)(t=>t.childRefs.nurturingCoachMark&&t.isTtvrFiredAndCanUseDom,Oe.qy`<div>${t=>(0,$n.yN)(t.childRefs.nurturingCoachMark,{includeTelemetryTag:!1})}</div>`)}
${(0,Rn.z)(t=>t.childRefs.officeCoachmark,Oe.qy`<div class="officeCoachmarkHolder">${t=>(0,$n.yN)(t.childRefs.officeCoachmark)}</div>`)}
${(0,Rn.z)(t=>t.displayGalleryMinimumWidthToast,ti)}<div id="headerGrid" style="${t=>`grid-template-rows: ${t.gridRows}; height:${t.contentOffHeaderHeight??t.headerHeight+"px"};`}" role="${t=>"off"===t.layoutState.selectedFeedDisplaySetting?"main":"banner"}"><div class="companyLogoHolder_aboveSearch" style="${t=>t.logoRow?`grid-row: ${t.logoRow};`:""}" ${(0,$t.WS)()}>${(0,Rn.z)(t=>"always"!==t.layoutState.selectedFeedDisplaySetting&&!t.layoutState.imageOfTheDayEnabled,ri)}</div>${ei} ${Wn}<div id="topSitesHolder" class="${t=>t.isTopSitesDisabled?"hide":""} ${t=>t.childRefs.notificationMiniCard?"enable-notification":""} ${t=>t.enableNotificationAnimation?"notification-anime":""} ${t=>t.config.notificationOnRight?"notification-right":"notification-left"}" style="grid-row: ${t=>t.topSitesRow}; ${t=>(t=>`--top-banner-offset-height:${t.topBannerOffsetHeight||0}px;`)(t)}; ${t=>(t=>t.invisibleTopSites?"visibility:hidden":"")(t)}" ${(0,$t.WS)()} data-clarity-mask="true">${(0,Rn.z)(t=>t.childRefs.notificationMiniCard,si,ni)}</div>${(0,Rn.z)(t=>t.displayWidgetsRegion,Oe.qy`${ii}`)} ${(0,Rn.z)(t=>t.weatherOnelinerConditionCheck,Oe.qy`<div id="weatherOneLinerHolder" style="grid-row: ${t=>t.weatherOneLinerRow};" class="oneline-weather-holder-margin ${t=>"off"===t.layoutState.selectedFeedDisplaySetting&&"oneline-weather-holder-content-off"} ${t=>"off"===t.layoutState.selectedFeedDisplaySetting&&"off"!==t.layoutState.currentBackgroundImageType&&"oneline-weather-holder-content-off-bg"}">${t=>(0,$n.yN)(t.childRefs.weatherOneLiner,{properties:{setShowWeatherOneLiner:t.setShowWeatherOneLiner,needDarkThemeIcons:t.needDarkThemeIcons}})}</div>`)} ${(0,Rn.z)(t=>t.showWidgetsUpsellButton,Oe.qy`<div id="widgetsUpsellButtonHolder" class="oneline-weather-holder-margin" style="grid-row: ${t=>t.widgetsUpsellButtonRow};">${ui}</div>`)} ${(0,Rn.z)(t=>t.childRefs.pulseEdgenext&&(t.layoutState.pulseEnabled&&t.pulseData.length>0||t.isVpTest())&&t.config.showPulseOffPartially&&("off"===t.layoutState.selectedFeedDisplaySetting||"headingsonly"===t.layoutState.selectedFeedDisplaySetting||"peek"===t.layoutState.selectedFeedDisplaySetting),Oe.qy`<div id="pulse" style="grid-row: ${t=>t.weatherOneLinerRow};" class="${t=>t.pulseOnHover&&"off"!==t.layoutState.currentBackgroundImageType?"pulseHoverHolder":"pulseHolder"}">${t=>(0,$n.yN)(t.childRefs.pulseEdgenext,{properties:{pulseData:t.pulseData}})}</div>`)} ${(0,Rn.z)(t=>t.isRecommendedSitesEnabled,Oe.qy`<div id="recommendedSites" class="${t=>"off"===t.recommendedSitesDisplaySetting||t.layoutState.isRecommendedSitesManagedByPolicy?"hide":""} unified" style="grid-row: ${t=>t.recommendedSitesRow};${t=>(t=>t.invisibleRecommendedSites?"visibility:hidden":"")(t)}" ${(0,$t.WS)()}>${(0,Rn.z)(t=>!t.enableHiddenRecommendedSitesStyles,Oe.qy` ${t=>(0,$n.yN)(t.childRefs.recommendedSites,{properties:{narrowed:!t.layoutState.imageOfTheDayEnabled&&["peek","headingsonly","off"].includes(t.layoutState.selectedFeedDisplaySetting),isOnBackgroundImage:!!t.layoutState.imageOfTheDayEnabled,showFullPageBlur:t.isFullPageBlur(),needDarkThemeIcons:t.needDarkThemeIcons,recommendedSitesWidthAdded:(t.showNavAndContentTemplate||["always","peek"].includes(t.layoutState?.selectedFeedDisplaySetting))&&"off"!==t.layoutState?.currentBackgroundImageType},ttvrMarkerAggregate:"Header"})} `)}</div>`)} ${(0,Rn.z)(t=>t.showHeroAboveNav,Yn)} ${t=>{0}} ${(0,Rn.z)(t=>t.config.complianceHyperlink,Oe.qy`<a href=${t=>(0,xn.bI)(t.config.complianceHyperlink.url)} id="complianceHyperlink" class="${t=>t.layoutState.imageOfTheDayEnabled?"complianceHyperlink_imageEnabled":null}" ${(0,$t.WS)()}>${t=>t.config.complianceHyperlink.text}</a>`)} ${(0,Rn.z)(t=>t.childRefs.backgroundGallery&&t.renderBackgroundGallery&&!t.showSpotlightBackgroundGalleryCard,Oe.qy`<div id="backgroundGalleryContainer" class="forceShowGallery">${t=>(0,$n.yN)(t.childRefs.backgroundGallery,{memoize:!1,ttvrMarkerAggregate:"Header"})}</div>`)} ${(0,Rn.z)(t=>t.showSpotlightHoverMask,Oe.qy`<div ${(0,Pn.K)("bgMask")} class="bgMask" @mouseenter=${(t,e)=>t.onMouseenter_backgroundMask(e.event)} @mouseleave=${(t,e)=>t.onMouseout_backgroundMask(e.event)}></div>`)} ${(0,Rn.z)(t=>t.showSpotlightButton||t.showSpotlightButtonByHover,Oe.qy`<div class="bgContainer">${(0,Rn.z)(t=>t.childRefs.backgroundGallery&&t.renderBackgroundGallery&&t.showSpotlightBackgroundGalleryCard,Oe.qy`<div id="backgroundGalleryContainer" class="forceShowGallery" style="padding-right:18px;" @mouseenter=${(t,e)=>t.onMouseenter_backgroundButton(e.event)} @mouseleave=${(t,e)=>t.onMouseout_backgroundButton(e.event)}>${t=>(0,$n.yN)(t.childRefs.backgroundGallery,{memoize:!1,ttvrMarkerAggregate:"Header",properties:{cardMode:!0}})}</div>`)}<div class="bgButton" @mouseenter=${(t,e)=>t.onMouseenter_backgroundButton(e.event)} @mouseleave=${(t,e)=>t.onMouseout_backgroundButton(e.event)}><span></span></div></div>`)}</div><div ${(0,Pn.K)("headerSpaceHolder")} id="headerSpaceHolder" style="height:${t=>t.contentOffHeaderHeight??t.headerHeight+"px"};${t=>jn(t)}"><div id="bgOuterHolder" class="bgOuterHolder" ${(0,At.mK)({stickyClassName:"bgOuterHolder_sticky",breakpointName:E})}><div id="bgInnerHolder" style="height: 100vh;">${t=>(0,$n.yN)(t.childRefs.backgroundImage,{properties:{backgroundGalleryRef:t.childRefs.backgroundGallery,enableBackgroundGalleryCard:t.config.enableBackgroundGalleryCard},attributes:{spaceHolderHeight:t.headerHeight,showFullPageBlur:t.isFullPageBlur(),bgBlurSize:t.config.translucentFeed?.bgBlurSize?t.config.translucentFeed?.bgBlurSize:"0px"},ttvrMarkerAggregate:t.deferBGIfOffFlightEnabled&&"off"===t.layoutState.currentBackgroundImageType?void 0:"Header"})}</div></div></div>${ai}
${(0,Rn.z)(t=>t.config.enableOverrideRightClick,Oe.qy`<div id="ContentCardActionMenuAnchor" ${(0,Pn.K)("ref_contentCardActionMenuAnchor")}></div>`)}<div id="translucentFeedSentinel"></div>${(0,Rn.z)(t=>t.showNavAndContentTemplate,Zn)}
${(0,Rn.z)(t=>t.childRefs.welcomeGreeting&&t.enableHiddenWelcomeGreeting,Oe.qy`<div id="WelcomeGreetingHidden" style="visibility:hidden">${t=>(0,$n.yN)(t.childRefs.welcomeGreeting,{properties:{rootMaxWidth:0,showFullPageBlur:t.isFullPageBlur(),needDarkThemeIcons:t.needDarkThemeIcons},ttvrMarkerAggregate:"Header"})}</div>${(0,An.C)("TTSR.WelcomeGreetingLight",!0)}`)}
${(0,Rn.z)(t=>t.childRefs.topSites,Oe.qy`${t=>(0,$n.yN)(t.childRefs.edgeShopping)}`)}
${(0,Rn.z)(t=>t.enableDevTools,Oe.qy`${t=>(0,$n.yN)(t.childRefs.devTools)}`)}
${t=>(0,$n.yN)(t.childRefs.sharedLinks,{ttvrMarkerAggregate:"Header"})}
${t=>(0,$n.yN)(t.childRefs.topSitesBookmarks,{ttvrMarkerAggregate:"Header"})}
${t=>(0,$n.yN)(t.childRefs.floatButtonGroupWC,{properties:{overlapState:t.overlapState},attributes:{class:"floatButtonGroup",needDarkThemeIcons:t.needDarkThemeIcons}})}
${(0,Rn.z)(t=>t.childRefs.dailyBrief,t=>(0,$n.yN)(t.childRefs.dailyBrief))}
${(0,Rn.z)(t=>t.childRefs.feedback,Oe.qy`${t=>(0,$n.yN)(t.childRefs.feedback,{properties:{overlapState:t.overlapState,isAutoHide:!t.isAlwaysMode,openBackgroundGallery:t.openBackgroundGallery,updateQuickLinksDisplayOption:t.updateQuickLinksDisplayOption,updateCloudMarketAndClient:Bn.lK,getPivotManager:Ct.w,enableProactiveFeedbackAssist:!0,shouldShowSignInFaq:t.renderSignInControls,enableFOD:null!=t.childRefs.feedOffDialog},attributes:{showFullPageBlur:t.isFullPageBlur(),minWindowWidthForGallery:be.et,expectedWidgetsCardsLocalStorageKey:Tn.W}})}`)}
${t=>t.renderChannelStoreEvent&&t.childRefs.channelStore&&(0,$n.yN)(t.childRefs.channelStore,{properties:{showOverlay:!1,renderChannelStoreEvent:t.renderChannelStoreEvent}})}
${(0,Rn.z)(t=>Boolean(t.updatedFeedDisplaySetting?.length)&&t.childRefs.feedOffDialog,t=>(0,$n.yN)(t.childRefs.feedOffDialog,{properties:{updatedFeedDisplaySetting:t.updatedFeedDisplaySetting}}))}
${(0,Rn.z)(t=>t.childRefs.toastWC&&t.shouldRenderToastWC,t=>(0,$n.yN)(t.childRefs.toastWC))}</div>`,fi=Oe.qy` ${(0,Rn.z)(t=>t.childRefs.settings,Oe.qy`<div>${t=>(0,$n.yN)(t.childRefs.settings,{ttvrMarkerAggregate:"Header"})}</div>`)} ${(0,Rn.z)(t=>t.childRefs.backgroundGallery&&t.renderBackgroundGallery,Oe.qy`<div id="backgroundGalleryContainer" class="sugiGalleryContainer">${t=>(0,$n.yN)(t.childRefs.backgroundGallery,{memoize:!1,ttvrMarkerAggregate:"Header"})}</div>`)}
`,pi=Oe.qy` ${(0,Rn.z)(window._sugi,fi,hi)} ${Vn} ${t=>{}}
`;var gi=n(11177),mi=n(74849),wi=n(22131),yi=n(4126),vi=n(64003),bi=n(46203);const Si=(g.P.Over+2).toString(),Ci=(g.P.Over+3).toString(),ki=(g.P.Nav+2).toString(),Ti=(g.P.Nav+3).toString(),xi=`${(0,d.rA)().StaticsUrl}pr-5336706/background-gallery/BackgroundGalleryWhite.svg`,Ai=mi.A`
cs-header-core{z-index:${Ti}}`,$i=mi.A`
.companyLogoHolder_aboveSearch > svg{fill:white}.translucentSticky{background:#242424}.navAndContent_wb{background:rgba(0,0,0,.5) !important}.doubleWideRiverCard,.singleWideRiverCard{background:#656565}.skeleton{background:#4a4a4a}.copilotRequestAnything{border:1px solid #69A1FA}.copilotRequestAnything span{color:#69A1FA}.copilotCoachMark{border:1px solid #69A1FA}.copilotCoachMark span{color:#69A1FA}.rightClickMenu{background-color:rgb(74,74,74,0.95)}.rightClickMenuItem:hover{background-color:#575757}.menu-item-divider{border-color:rgb(173 173 173)}.rightClickMenuItem .rightClickMenuItemIcon svg{fill:white}.text-container{color:#ffffff}#widgets-upsell-button{background:transparent;border:1px solid rgba(255,255,255,0.2)}#widgets-upsell-button.widgets-upsell-background-on:hover{background:transparent;backdrop-filter:blur(var(--acrylic-blur,300px));border:1px solid rgba(255,255,255,0.2)}#widgets-upsell-button.widgets-upsell-background-off{background:rgba(0,0,0,0)}#widgets-upsell-button.widgets-upsell-background-off:hover{background:rgb(51,51,51);border:1px solid rgba(255,255,255,0.2)}`,Ii=mi.A`
${(0,_._D)(null,_.j1.c2)}{.contentSized{width:${gi.sx.toString()}px}.nav-content-responsive .navAndContent_feed{--card-number:2;max-width:${gi.eR.toString()}px;min-width:${gi.CM.toString()}px}.increased-width{width:calc(${gi.sx.toString()}px + var(--extra-feed-width,0px))}#topSitesHolder{height:100%}.skeleton-container{width:${gi.sx.toString()}px}msn-actions-menu::part(menu){max-width:254px}}${(0,_.H5)(_.j1.c3)}{.contentSized{width:${gi.zN.toString()}px}.nav-content-responsive .navAndContent_feed{--card-number:3;max-width:${gi.Rq.toString()}px;min-width:${gi.JX.toString()}px}.increased-width{width:calc(${gi.zN.toString()}px + var(--extra-feed-width,0px))}.skeleton-container{width:${gi.zN.toString()}px}msn-actions-menu::part(menu){max-width:254px}}${(0,_.H5)(_.j1.c4)}{.contentSized{width:${gi.YK.toString()}px}.nav-content-responsive .navAndContent_feed{--card-number:4;max-width:${gi.Yn.toString()}px;min-width:${gi.cU.toString()}px}.increased-width{width:calc(${gi.YK.toString()}px + var(--extra-feed-width,0px))}.skeleton-container{width:${gi.YK.toString()}px}msn-actions-menu::part(menu){max-width:295px}}${(0,_._D)(_.j1.c5,null)}{.contentSized{width:var(--m365-column-width,${gi.t9.toString()}px)}.nav-content-responsive .navAndContent_feed{--card-number:5;max-width:${gi.jg.toString()}px;min-width:${gi.Tx.toString()}px}.increased-width{width:calc(${gi.t9.toString()}px + var(--extra-feed-width,0px))}.skeleton-container{width:${gi.t9.toString()}px}msn-actions-menu::part(menu){max-width:295px}}${(0,_._D)(null,_.j1.c1)}{.contentSizedOneColumn{width:${gi.rY.toString()}px}.nav-content-responsive .navAndContent_feed{--card-number:1;max-width:${gi.$w.toString()}px;min-width:${gi.vb.toString()}px !important}.nav.navStickyOneColumn{top:0}.navStickyOneColumn.conditionalBannerShown{top:30px}.skeleton-container{width:${gi.rY.toString()}px}msn-actions-menu::part(menu){max-width:254px}}`,Pi=mi.A` .headerGrid_hidden cs-header-core::part(core){display:grid}.headerGrid_hidden cs-header-core::part(header-search){visibility:visible}`,Ri=mi.A`
:host(){--breaking-news-height-offset:0}#backgroundGalleryContainer{position:relative;z-index:${g.P.Flyout.toString()}}#backgroundGalleryContainer.forceShowGallery{visibility:visible}.bgMask{position:absolute;z-index:${Si};height:300px;width:300px;top:calc(35% - 134px);right:calc(15% - 134px)}.bgContainer{position:absolute;z-index:${ki};top:35%;right:15%;display:flex;justify-content:flex-end}.bgButton{width:32px;height:32px;border:1px solid rgba(209,209,209,0.3);background:rgba(26,26,26,0.3);box-sizing:border-box;display:flex;align-items:center;justify-content:center;border-radius:4px}.bgButton:hover{background:#2A2A2A}.bgButton span{width:19px;height:19px;margin-top:1px;margin-right:1px;background:url(${xi})}.gameTemplateContainer{position:relative;z-index:${g.P.Nav.toString()};margin:14px auto}.exploreMoreBtn{width:100vw;display:flex;justify-content:center}.sugiGalleryContainer{display:flex;justify-content:center;align-items:center;height:45vh}.backgroundGalleryMinimumWidthToast{bottom:25px;left:50%;position:fixed;transform:translateX(-50%);width:fit-content;z-index:${g.P.Overlay.toString()}}.bgOuterHolder{height:100%;overflow:hidden;position:fixed;width:100%}.bgOuterHolder_sticky{background:#F7F7F7;height:calc(var(--sticky-height,108px) + var(--search-sticky-extra-height,0px));z-index:${g.P.Over.toString()}}#bgInnerHolder{height:100%;opacity:1;overflow:hidden;top:0px;transform:scale(1);width:100%}.coachMarkHolder{left:initial;position:fixed;z-index:${g.P.Flyout.toString()}}.companionIframe{display:none}.companyLogoHolder_aboveSearch{align-self:end;height:48px;opacity:1;width:225px}.companyLogoHolder_aboveSearch > svg{fill:#737373}#complianceHyperlink{bottom:8px;color:${vi.c};font-size:10px;justify-self:self-start;padding:0 8px;opacity:1;position:absolute;text-decoration:none;transition:opacity 0.2s;z-index:${Si}}#complianceHyperlink.complianceHyperlink_imageEnabled,#complianceHyperlink.translucentFeed{color:white;opacity:0.64}#complianceHyperlink.onScroll{transform:translate(-50%,-60px)}.complianceHyperlink_hide{opacity:0 !important}.doubleWideRiverCard,.singleWideRiverCard{background:#dadada;border-radius:8px;height:304px}.doubleWideRiverCard{width:612px}.singleWideRiverCard{width:300px}.blankRiverContainer{display:flex;gap:12px}.blankRiverContainer.fadeOut{opacity:0;transition:opacity 0.5s}.location-marker{bottom:5px;color:white;justify-self:self-start;padding:0 8px;opacity:1;position:absolute;left:36px;text-decoration:none;transition:opacity 0.2s;z-index:${g.P.Nav.toString()}}.conditionalBannerHolder{max-height:200px;position:fixed;top:0;width:100%;z-index:${g.P.Overlay.toString()}}#headerGrid{display:grid;justify-items:center;width:100%}.headerGrid_hidden,.headerIcon_hidden cs-header-core::part(header-start),.headerIcon_hidden cs-header-core::part(header-end){visibility:hidden}.headerGrid_visible{opacity:1}.headerSpaceHolder{transition:height .3s ease-out,visibility 0.3s}#headerSpaceHolder{position:absolute;top:0}.nav{display:flex;height:var(--nav-height);justify-content:center;z-index:${g.P.Nav.toString()}}.navAndContent{align-items:center;background:#F7F7F7;display:flex;flex-direction:column;min-height:100vh;overflow-x:clip;position:relative;transition:background-color 0.4s ease-in-out}.navAndContent.navAndContent_noWFeed{min-height:452px}.navAndContent.navAndContent_tb{background:#00000051}.navAndContent.navAndContent_nb{background:#00000000}.navAndContent_wb{background:rgba(255,255,255,.5) !important;backdrop-filter:blur(10px);transition:unset !important}.navAndContent.navAndContent_nwb{transition:unset}#recommendedSites{align-items:center;display:flex;flex-direction:column}#recommendedSites.hide{display:none}#recommendedSites.unified{z-index:${Si}}.navAndContent_feed{align-items:center;display:flex;flex-direction:column;transition:background-color 0.4s ease-in-out,opacity 0.4s ease-in-out}.navAndContent_feed_fullpage{width:100%}.navAndContent_border_shadow{border-radius:12px;padding-left:20px;padding-right:20px;box-shadow:rgba(0,0,0,0.35) 0px 0px 15px;transition:1s box-shadow ease}.navAndContent_border_shadow.navAndContent_noshadow{box-shadow:rgb(0 0 0 / 0%) 0px 0px 0px 0px}@media ((min-width:632px) and (max-width:675px)){.navAndContent_border_shadow{width:93%}}@media ((min-width:944px) and (max-width:990px)){.navAndContent_border_shadow{width:95%}}@media ((min-width:1256px) and (max-width:1300px)){.navAndContent_border_shadow{width:96.5%}}@media ((min-width:1568px) and (max-width:1613px)){.navAndContent_border_shadow{width:97%}}.g_nav_container{position:relative;display:flex;justify-content:center;width:100%}.navAndContent_feed > .contentBelowNav{margin-top:var(--nav-height)}.navAndContent_feed_hidden_rs{background:#00000051}.nav{position:absolute;top:0px;width :100%}.nav.nav_sticky{background:#F7F7F7;position:fixed;top:calc(var(--sticky-height,108px) + var(--search-sticky-extra-height,0px));width:100%}.navSized{align-items:center;display:flex;gap:5px;min-width:100%;width:100%}.network-error-message{margin-block:24px;font-size:16px;text-align:center}.translucentSticky{background:#F7F7F7;height:108px;position:fixed;top:0px;width:100%;z-index:${g.P.Over.toString()}}#weatherOneLinerHolder,#widgetsUpsellButtonHolder{min-width:0;z-index:302;opacity:1}.oneline-weather-holder-margin{margin-top:auto;margin-bottom:15px}.oneline-weather-holder-content-off{margin-bottom:40px}.oneline-weather-holder-content-off-bg{margin-bottom:20px}#pulse{z-index:302}.pulseHoverHolder{margin-bottom:50px}.pulseHolder{margin-top:auto;margin-bottom:15px}#topSitesHolder{--notification-mini-card-width:208px;--notification-mini-card-height:58px;--notification-mini-card-vertical-gap:0;--notification-mini-card-gap:30px;height:100%;min-width:0;z-index:${Ci};opacity:1}#topSitesHolder.hide{visibility:hidden;opacity:0}#topSitesHolder.enable-notification{display:flex;justify-content:center}#topSitesHolder.enable-notification top-sites-edgenext{max-width:fit-content}#notificationMiniCardWrapper{width:0;margin-top:var(--notification-mini-card-vertical-gap)}#topSitesHolder.notification-anime #notificationMiniCardWrapper{transition:all 0.3s ease-in}#topSitesHolder.notification-left #notificationMiniCardWrapper:has(notification-mini-card:defined){width:var(--notification-mini-card-width);margin-inline-end:var(--notification-mini-card-gap)}#topSitesHolder.notification-left #notificationMiniCardWrapper notification-mini-card{float:right}#topSitesHolder.notification-right #notificationMiniCardWrapper:has(notification-mini-card:defined){width:var(--notification-mini-card-width);margin-inline-start:var(--notification-mini-card-gap)}#topSitesHolder.notification-right #notificationMiniCardWrapper notification-mini-card{float:left}.topSitesZoomHidden{visibility:hidden}.headerGrid_hidden cs-header-core::part(core){top:calc(-1 * var(--header-height));display:none}cs-header-core{z-index:${ki}}cs-header-core.fixed-search::part(header-search){position:fixed}@media (max-width:1097px){#topSitesHolder{height:100%}}.contentSizedFullScreen{width:100%!important}.refreshPage{height:50px;width:50px;margin-top:50px;margin-bottom:-50px}.refreshPage.hide{animation:hideRefreshBtn ease-in both 1s}@keyframes hideRefreshBtn{from{height:50px;opacity:1}to{height:0px;opacity:0}}.refreshPage fluent-progress-ring{margin:8px auto}.weather-current-precipitation-glyph{margin-inline-start:auto;margin-inline-end:4px;fill:currentcolor;filter:invert(var(--iconInvert))}.nocolor-img-aqi,.nocolor-img-nm-aqi{filter:invert(var(--iconInvert))}.nocolor-img-aqi{width:20px !important;height:20px !important}.noWorkFeedContent{min-height:400px}msn-actions-menu::part(menu){width:fit-content;max-width:300px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;position:absolute;right:0px;top:-27px}${Ii} .contentPlaceHolder{min-height:100vh}.nav-content-responsive{padding:0 var(--nav-image-gutter-margin,80px)}.nav-content-responsive .navAndContent_feed{width:calc(100% - 40px)}.nav-content-responsive .contentSized{width:100%}.skeleton-container{background:${bi.le};height:100%;position:absolute;top:43px;z-index:9}.skeleton-responsive{top:-1px;width:100.1%}.skeleton-responsive .skeleton-feed{grid-template-columns:repeat(var(--card-number),auto)}.skeleton-responsive .fixed-size-card{aspect-ratio:300 / 304;height:auto}.skeleton-responsive .fixed-size-card:first-of-type{aspect-ratio:153 / 76}.skeleton-channel{display:flex;position:relative;padding:20px 20px;box-sizing:border-box;overflow:hidden}.skeleton-feed{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:12px;position:relative;padding-top:8px;box-sizing:border-box;overflow:hidden}.skeleton-header{padding:12px 20px 0}.skeleton-header .card-label{height:15px;width:95px;border-radius:5px}.fixed-size-card{display:flex;flex-direction:column;height:304px;border-radius:5px}.fixed-size-card .card-img{width:100%;height:157px;border-radius:5px}.fixed-size-card .card-label{margin:10px 16px 8px 16px;height:16px;width:100px;border-radius:5px}.fixed-size-card .card-text{margin:5px 16px 0 16px;height:20px;border-radius:5px}.fixed-size-card:first-of-type{grid-column:span 2}.fixed-size-card:first-of-type .card-img{height:100%}.fixed-size-card:first-of-type .card-label,.fixed-size-card:first-of-type .card-text{display:none}.skeleton{display:block;background:#e0e0e0;position:relative;overflow:hidden}.shimmer .skeleton:before{content:"";display:block;position:absolute;top:0;left:-80px;height:100%;width:80px;opacity:0.3;background-image:linear-gradient(to right,transparent,#f5f5f5,transparent);animation:shine 1s infinite}@keyframes shine{to{left:calc(100% + 80px)}}.fixed-size-feed{margin:0 auto}.floatButtonGroup{position:relative}.widgetsRegion{height:146px}.widgets_hidden{opacity:0}.rightClickMenu{position:fixed;background:rgba(255,255,255,0.95);font-size:14px;padding:4px;border-radius:5px;line-height:20px;z-index:999}.rightClickMenuItem{display:grid;grid-template-columns:minmax(32px,auto) 1fr minmax(32px,auto);background:none;padding:6px 0px;cursor:pointer}.rightClickMenuItem .rightClickMenuItemIcon{display:flex;align-items:center;justify-content:center}.rightClickMenuItem .rightClickMenuItemIcon svg{fill:black}.rightClickMenuItem:hover{background:#efeded}#ContentCardActionMenuAnchor{position:absolute;width:1px;height:1px}.svg-container{display:inline-block;margin-inline-end:8px;transform:translateY(2px)}.text-container{color:rgba(0,0,0,0.859);font-size:16px;font-weight:600}#widgets-upsell-button{background:rgba(255,255,255,0.7);border:1px solid lightgray;border-radius:4px}#widgets-upsell-button:hover{border:1px solid rgba(0,0,0,0.22)}.widgets-upsell-background-on{backdrop-filter:blur(var(--acrylic-blur,40px))}#widgets-upsell-button.widgets-upsell-background-on:hover{background:rgba(230,230,230,0.7)}#widgets-upsell-button.widgets-upsell-background-off{background:white}#widgets-upsell-button.widgets-upsell-background-off:hover{background:rgb(245,245,245)}.netErrBanner{display:flex;text-align:center;align-items:center;justify-content:space-between;padding:6px;background:var(--fill-color);border-bottom:1px solid var(--focus-stroke-outer)}.netErrInner{font-size:12px;font-weight:400;line-height:16px;margin-right:16px}.netErrClose{display:inline-flex;align-items:center;justify-content:center}.toast-close-button{padding:4px 8px;background:transparent}.toast-close-button:hover{opacity:0.7}`.withBehaviors((0,wi.G2)($i),new yi.o("ntpTypeToSearch",!0,Pi),new yi.o("enableSpotlightButton",!0,Ai)),Mi=Ri,_i={experienceConfigSchema:undefined};(0,i.m)()},67536:function(t,e,n){n.d(e,{Dl:function(){return r},wV:function(){return o}});var i=n(33918);function r(t,e=i.EW){const n=e.length,r=[];return t&&t.length&&(t.forEach(t=>{const i=t&&t.trim();i&&i.length>=n&&i.substring(0,n).toLowerCase()===e&&r.push(i.toLowerCase())}),r.sort()),r}function o(t,e=!1,n=""){let r=i.EW;return e?r=i.OY:n.toLocaleLowerCase()==="windowsShell".toLocaleLowerCase()||n.toLocaleLowerCase()==="windowsShellV2".toLocaleLowerCase()?r=i.h0:n.toLocaleLowerCase()!=="winWidgets".toLocaleLowerCase()||window?.location?.search?.includes("reqsrc=vp")||window?.location?.search?.includes("vptest")||(r=i.J4),r}},67629:function(t,e,n){n.d(e,{LD:function(){return i},Pe:function(){return r}});const i=["at-bing","elt","eupubconsent-v2","lt","AL","ALS","MSNRPSSecAuth","OSAT"],r=[";",","," "]},67878:function(t,e,n){n.d(e,{h:function(){return i}});const i={prod:"//img-s-msn-com.akamaized.net/tenant/amp/entityid/"}},67931:function(t,e,n){n.d(e,{KS:function(){return c},go:function(){return s},kJ:function(){return o},py:function(){return a},z4:function(){return u}});var i=n(7040),r=n(55609);const o="#000000",s="#FFFFFF",a=(0,i.pq)(()=>o)(r.Ay),c=(0,i.Tk)(()=>o)(r.Ay),u=(0,i.k6)(()=>s)(r.Ay)},68275:function(t,e,n){n.d(e,{a:function(){return o}});var i=n(50130);const r={DisplayAdsWC:(0,i.Nr)("display-ads"),ViewsNativeAd:(0,i.Nr)("views-native-ad")};function o(t,e){if(void 0!==e){return{DisplayAdsWC:(0,i.Nr)("display-ads",e),ViewsNativeAd:(0,i.Nr)("views-native-ad",e)}[t]}return r[t]}},68399:function(t,e,n){n.d(e,{Dl:function(){return h},Pp:function(){return u},Qn:function(){return l},Ww:function(){return d},kf:function(){return p},up:function(){return f},vx:function(){return g}});var i=n(53788),r=n(98763),o=n(30817);const s=(0,r.Xe)(),a=(0,r.Xe)(),c=(0,r.Xe)();function u(t){a.set([]),c.set([]),s.set(t)}function d(t){s.get()?.startMeasure(t.name,void 0,{entityMeasure:!0,startTime:m(t.startTime,-1)}).endMeasure({endTime:m(t.endTime,-1)})}function l(t){const e=s.get();return e?(0,i.X1)(e.getMeasureValues({entityMeasures:!0}),t,"from",!1):[]}function h(t){let e;const n=a.get();n&&null!=(e=w(t.duration))&&n.push({time:(0,o.gU)(),name:t.name,duration:e})}function f(t){let e;const n=c.get();n&&null!=(e=w(t.time))&&n.push({name:t.name,time:e})}function p(t){const e=a.get();return e?(0,i.X1)(e,t,"time",!0):[]}function g(t){const e=c.get();return e?(0,i.X1)(e,t,"time",!1):[]}function m(t,e){return null!=t?t:e}function w(t){if("number"==typeof t&&t>=0)return t}},68480:function(t,e,n){n.d(e,{P:function(){return f}});var i=n(37805);function r(t,e,n,i){let r;return t&&(r=t.parentNamespace?t.parentNamespace+"."+t.namespace:t.namespace),{key:r,experienceInstanceId:i,type:e,params:n}}function o(t,e){return t?t.store.dispatch(e):i.V.getInstance().store.dispatch(e)}var s=n(99382);class a{get send(){return this.dispatchAction()}constructor(t,e,n){this.type=t,this.observers=e,this.connector=n}dispatchAction(){return function(...t){const e=this.tryGetPerfTimeline(),n=e&&e.startMeasure("action",this.type).endMeasure,{payload:i,result:a}=this.getDispatchResult(t);return this.observers.forEach(t=>{try{t.filterConnector&&this.connector!==t.filterConnector||t.observer(i)}catch(e){console.log(`Error calling observer: ${JSON.stringify(t.observer)}, with error: ${e}`)}if(t.dispatchConnector){const e=r(t.dispatchConnector,s.j.renderAction,[],void 0);o(t.dispatchConnector,e)}}),n&&n(),a}}}class c extends a{constructor(t,e,n){super(t,e,n)}getDispatchResult(t){const e=r(this.connector,this.type,t,void 0);return{payload:e,result:o(this.connector,e)}}tryGetPerfTimeline(){return this.connector.perfTimeline}}var u=n(33107);class d extends a{constructor(t,e,n){super(t,e,null),this.experienceInstanceId=n}getDispatchResult(t){const e=r(void 0,this.type,t,this.experienceInstanceId);return{payload:e,result:o(void 0,e)}}tryGetPerfTimeline(){return(0,u.S9)("GlobalActionSender",this.experienceInstanceId||"unknown")}}var l=n(17720);let h=1;class f{get observers(){return l.vv.get(this.observerKey,()=>[])}set observers(t){l.vv.set(this.observerKey,t)}constructor(t){this.type=t,this.observerKey=`__ActionMap_${t}_${h++}`}getActionSender(t){let e;if(e="string"==typeof t?i.V.getInstance().rootReducer.connector(t):t,e)return new c(this.type,this.observers,e)}getGlobalActionSender(t){return new d(this.type,this.observers,t)}registerObserver(t,e){const{dispatchConnector:n,filterConnector:i}=e||{};this.observers.push({observer:t,dispatchConnector:n,filterConnector:i})}unregisterObserver(t){const e=this.observers.findIndex(e=>e.observer===t);e>-1&&this.observers.splice(e,1)}unregisterObservers(){this.observers=[]}}},69004:function(t,e,n){n.d(e,{G:function(){return r}});var i=n(37805);class r{constructor(t,e){this.namespace=t,this.config=e,this.store=null,this.parentNamespace=null,this.reducer=null,this.isGlobal=!1,this.requestContext=null,this.onApplicationStart=()=>{},this.configHref=null,this.fullNamespace=t,i.V.getInstance().rootReducer.addConnectorToCollection(this)}getCurrentState(){throw new Error("Not implemented")}}r.isWCConnector=!0},69023:function(t,e,n){var i;n.d(e,{y:function(){return i},PublisherServiceClient:function(){return m}}),function(t){t.More="More",t.Mute="Mute",t.Read="Read"}(i||(i={}));var r=n(85889),o=n(12870),s=n(6092),a=n(74326),c=n(19993),u=n(57759),d=n(56639),l=n(28868),h=n(64405),f=n(57863),p=n(29252),g=n(86948);class m{constructor(t,e=!0){this.fetchImpl=t,this.addPageInfoToOcid=e,this.followedPublishersEndpoint="v1/News/Users/Me/PreferredProviders",this.followedSourcesEndpoint="msn/sources",this.publishersServiceEndpoint="Msn/Providers",this.actionsServiceEndpoint="Graph/Actions",this.followActionSourceEndpoint="community/follows",this.ocid="feeds"}getOcid(){return this.ocid}async getUserMutedPublishers(){const t=await this.getUserActions(i.Mute);if(!t||!t.value)return null;if(!t.value.length)return[];const e=t.value.reduce((t,e)=>(t[e.targetId]=e,t),{}),n=await this.getPublisherDetails(Object.keys(e));if(!n||!n.value||!n.value.length)return null;return n.value.map(t=>{const n={createdDateTime:e[t.id].createdDateTime};return{...t,...n}})}async getUserFollowedPublishers(t=100){const e=await this.getRequestInit(),n=[...await this.getCommonParams(),{key:"$top",value:`${t}`}],i=(0,a.nI)(this.followedPublishersEndpoint);this.appendQs(n,i),(0,r.Iv)()||(0,p.P7)(i);const o=await this.sendRequest(decodeURIComponent(i.href),e,"getFollowedPublishers");return o?.value}async getUserFollowedSources(t=100){const e=await this.getRequestInit(),n=[...await this.getCommonParams(),{key:"$top",value:`${t}`},{key:"queryType",value:"MyFeed"}],i=(0,a.nI)(this.followedSourcesEndpoint);let o;this.appendQs(n,i),(0,r.Iv)()||(0,p.P7)(i);try{o=await this.sendRequest(decodeURIComponent(i.href),e,"getFollowedSources")}catch(t){throw new Error(`{url: ${i.href}}`)}return o?.value?.length>0?o?.value[0]?.subCards.map(t=>{const e=t.intAttributes&&1==t.intAttributes.disableProfile;return{...t,profileId:e?null:t.profileId,displayName:t.name,logos:[{imageLink:{href:t.image?.url}}]}}):[]}async publisherUserAction(t,e,n){if(!t||!e)return null;const i=await this.getRequestInit();i.method=n;let r=await this.getCommonParams();"POST"===n?i.body=JSON.stringify({actionType:e,targetId:t,targetType:"SourceProvider"}):"DELETE"===n&&(r=[...r,{key:"$filter",value:`actionType eq '${e}' and targetId eq '${t}'`}]);const o=(0,a.nI)(this.actionsServiceEndpoint);this.appendQs(r,o);const s=await this.sendRequest(decodeURIComponent(o.href),i,`deleteUserAction ${e}`,!0,!0);if(s.status>=400){const n=`OneService returned error response. Status: ${s.status} for actionType: ${e}, targetId: ${t}`;throw new Error(n)}return s}async updateSourceFollowState(t,e,n){if(!t)return null;const i=await this.getRequestInit();let r=await this.getCommonParams();r=[...r],e?(i.method="POST",i.body=JSON.stringify({targetId:t})):(i.method="DELETE",r=[...r,{key:"targetId",value:t}]),n&&o.Rb.CurrentFlightSet.has("prg-followdata-t")&&r.push({key:"communitymetadata",value:`itemid:${n?.contentId||"undefined"},lineage:${n?.actionPosition||`${s.T3.AppType}>PublisherServiceClient>UndefinedLineage`}`});const c=(0,a.nI)(this.followActionSourceEndpoint);this.appendQs(r,c);const u=e?"follow":"unfollow";try{return await this.sendRequest(decodeURIComponent(c.href),i,`updateSourceFollowState ${u}`,!0,!0)}catch(e){throw new Error(`OneService returned error response. Community follow service  for targetId: ${t}, action: ${u}`)}}async updatePublisherReadTime(t,e,n){if(!t)return null;const r=await this.getRequestInit(),o=await this.getCommonParams(),s=i.Read;r.method="POST",r.body=JSON.stringify({actionType:s,targetType:n,targetId:t,updatedDateTime:e});const c=(0,a.nI)(this.actionsServiceEndpoint);this.appendQs(o,c);try{return await this.sendRequest(decodeURIComponent(c.href),r,`updateSourceReadTime ${s}`,!0,!0)}catch(e){throw new Error(`OneService returned error response for actionType: ${s}, targetId: ${t}`)}}async getUserPublishersReadTimes(){try{const t=await this.generatePublisherStatusRequest(void 0,i.Read);return t?.value}catch(t){throw new Error("OneService returned error response for fetching followed sources read times.")}}async getUserPublisherStatus(t,e){const n=await this.generatePublisherStatusRequest(t,e);return!!n.value?.length}async generatePublisherStatusRequest(t,e){const n=await this.getRequestInit();n.method="GET";const i=t?`and targetId eq '${t}'`:"";let o=await this.getCommonParams();o=[...o,{key:"$filter",value:`actionType eq '${e}' ${i} `}];const s=(0,a.nI)(this.actionsServiceEndpoint);return this.appendQs(o,s),(0,r.Iv)()||(0,p.P7)(s),await this.sendRequest(decodeURIComponent(s.href),n,`getUserPublisherStatus ${e}`)}async getUserActions(t,e=100){const n=await this.getRequestInit(),i=[...await this.getCommonParams(),{key:"$filter",value:`actionType eq '${t}' and deleted eq false and targetType eq 'SourceProvider'`},{key:"$top",value:`${e}`}],o=(0,a.nI)(this.actionsServiceEndpoint);return this.appendQs(i,o),(0,r.Iv)()||(0,p.P7)(o),await this.sendRequest(decodeURIComponent(o.href),n,`getUserActions ${t}`)}async getPublisherFromProfileIds(t){const e=await this.getRequestInit(),n=(0,a.nI)(this.followedSourcesEndpoint),i=[...c.WR.getOneServiceParamsWithoutAuth(null,this.ocid,this.addPageInfoToOcid),{key:"ids",value:t.join(",")}];return this.appendQs(i,n),await this.sendRequest(decodeURIComponent(n.href),e,"getSourcesFromProfileIds")}async getPublisherDetails(t){const e=await this.getRequestInit(),n=(0,a.nI)(this.publishersServiceEndpoint),i=[...c.WR.getOneServiceParamsWithoutAuth(null,this.ocid,this.addPageInfoToOcid),{key:"ids",value:t.join(",")}];return this.appendQs(i,n),await this.sendRequest(decodeURIComponent(n.href),e,"getPublisherDetails")}async getCommonParams(){if("winWidgets"===s.T3.AppType&&("startfeed"===s.T3.CurrentRequestTargetScope?.pageType&&"ruby"===s.T3.UxMode?(this.ocid="rubyprong2",this.addPageInfoToOcid=!1):(this.ocid="winp2",this.addPageInfoToOcid=!1)),"windowsShell"===s.T3.AppType&&(this.ocid="windows-windowsshellhp-feeds",this.addPageInfoToOcid=!1),(0,r._v)()&&(this.addPageInfoToOcid=!1,this.ocid="emmx-mmx-feeds"),(0,r.Iv)())return this.getSapphireQueryParams();this.forcedApiKey&&(this.addPageInfoToOcid=!1),(0,r.tl)()&&(this.ocid="swiftkey-umf",this.addPageInfoToOcid=!1),(0,r.V8)()&&(this.ocid="bing-dhp-mobile",this.addPageInfoToOcid=!1),"bingHomepage"===s.T3.AppType&&(this.ocid="bing-widgetfeed-Peregrine",this.addPageInfoToOcid=!1);const t=await this.isUserSignedIn()?c.WR.getOneServiceParamsWithAuth(s.T3.UserId||s.T3.ActivityId,this.ocid,this.addPageInfoToOcid):c.WR.getOneServiceParamsWithoutAuth(s.T3.UserId||s.T3.ActivityId,this.ocid,this.addPageInfoToOcid);if(this.forcedApiKey){t.find(t=>"apikey"==t.key).value=this.forcedApiKey}return t}getSapphireQueryParams(){const t=c.WR.getOneServiceNonDynamicParamsWithoutAuth(this.ocid,this.addPageInfoToOcid,s.T3.UserId||s.T3.ActivityId),e=(0,d.cE)();return e&&(t.push({key:s.T3.OneServiceContentMarketQspKey,value:e.market}),s.T3.ShouldUseFdheadQsp&&t.push({key:"fdhead",value:e.features}),t.push({key:"activityId",value:e.activityId}),e.latitude&&e.longitude&&t.push({key:"location",value:`${e.latitude}|${e.longitude}`})),t}async getRequestInit(t=null){return null==t&&(t={method:"GET"}),t.credentials="include",t.headers=(0,l.RH)()?await(0,h.U)():await c.WR.getOneServiceHeaders(),t}async isUserSignedIn(){const t=(0,o.Th)().UserIsSignedIn;if(void 0!==t)return t;return 2===await(0,g.XK)()}async sendRequest(t,e,n,i,o){return(0,r.Iv)()?await this.sapphireRequest(decodeURIComponent(t),e):await this.networkRequest(decodeURIComponent(t),e,n,i,o)}async sapphireRequest(t,e){const n={url:t,headers:e.headers,body:e.body,refresh:!0,needHeader:!0,needCookie:!0};let i;switch(e.method){case"POST":i=await(0,f.No)(n);break;case"DELETE":i=await(0,f.al)(n);break;default:i=await(0,f.XN)(n)}return JSON.parse(i||"{}")}async networkRequest(t,e,n,i,r){return(0,u.w)(async()=>{const n=await this.fetchImpl(t,e);if(!n.ok)throw Error(n.statusText);return i&&(0,p.r8)(),r?n:n.json()},n)}appendQs(t,e){t.forEach(t=>{t.value&&e.searchParams.set(t.key,t.value)})}setForcedApiKey(t){this.forcedApiKey=t}}},69089:function(t,e,n){var i;n.d(e,{s:function(){return i}}),function(t){t.AiCharacter="aicharacterCardEnabled",t.AutosMarketplaceCard="autosmarketplaceCardEnabled",t.BoostCard="boostCardEnabled",t.HoroscopeCard="horoscopeCardEnabled",t.WeatherCard="weatherCardEnabled",t.SevereWeatherCard="severeWeatherCardEnabled",t.NowcastWeatherCard="nowcastweatherCardEnabled",t.RainTodayWeatherCard="raintodayweatherCardEnabled",t.WeatherRubyCard="weatherRubyCardEnabled",t.SportsCard="sportsCardEnabled",t.MoneyCard="moneyCardEnabled",t.FinanceCard="financeCardEnabled",t.OnThisDayCard="onthisdayCardEnabled",t.LocalEventsCard="localEventsCardEnabled",t.SavingsCard="savingsCardEnabled",t.ShoppingCard="shoppingCardEnabled",t.ShoppingFashionCarousel="shoppingFashionCardEnabled",t.ShoppingEventCard="eventSDCardShoppingEnabled",t.TrafficCard="trafficCardEnabled",t.EsportsCard="esportsCardEnabled",t.ElectionsCard="genericelectionCardEnabled",t.LotteryCard="lotteryCardEnabled",t.QnaCard="qnaCardEnabled",t.RecipesCard="recipeCardEnabled",t.PrismFeedCard="prismFeedCardEnabled",t.PrismCarouselCard="prismFeedCarouselCardEnabled",t.TravelCard="travelCardEnabled",t.HealthCard="healthCardEnabled",t.TopStoriesCard="topstoriesCardEnabled",t.TrendingTopics="TrendingTopicsUpsellEnabled",t.LocalGuideCard="localGuideCardEnabled",t.GroceryCard="groceryCardEnabled",t.RewardsCard="rewardsCardEnabled",t.PersonalizedOffersCard="personalizedoffersCardEnabled",t.PollsCard="pollsCardEnabled",t.MarketPlaceCard="marketplaceCardEnabled",t.QuizCard="quizcardCardEnabled",t.DailyQuizCard="DailyQuizCardEnabled",t.OnThisDaySDCard="OnThisDayCardEnabled",t.CasualGamesCard="esportsCardEnabled",t.CommuteCard="commuteCardEnabled",t.TrendingSearchCard="trendingsearchCardEnabled",t.RealEstateCard="realestateCardEnabled",t.MangaCard="mangaCardEnabled",t.RichCalendarCard="richCalendarCardEnabled",t.DailyGreetingCard="dailyGreetingCardEnabled",t.DonationNpoCard="DonationNpoCardEnabled",t.cegrowthCard="cegrowthCardEnabled",t.CopilotCard="copilotCardEnabled",t.PublisherSpotlightCard="PublisherSpotlightCardEnabled",t.FollowedPublishersCard="FollowedPublishersCardEnabled",t.Crypto="CryptoCard",t.MarketBrief="MarketBriefCard",t.ElectionCard="ElectionCardEnabled",t.EntertainmentPremierCard="entertainmentCardEnabled",t.CommunityCard="CommunityCardEnabled",t.DailyWonderCard="dailywonderCardEnabled",t.DailyBriefCard="DailyBriefCardEnabled",t.TopCommentsCard="TopCommentsCardEnabled"}(i||(i={}))},69118:function(t,e,n){n.d(e,{h:function(){return a}});var i=n(54761),r=n(62586),o=n(6092),s=n(89980);const a=new class{constructor(){this.localStorage=new Map,this.wpoTreatmentTypeMap=new Map,this.isLoaded=new Map}getWpoTreatments(t){const e=(0,r.$)(o.T3.AppType,o.T3.CurrentRequestTargetScope);if(!this.isLoaded.get(e)||t){this.wpoTreatmentTypeMap.set(e,new Map);const t=this.wpoTreatmentTypeMap.get(e);for(const e in i.Ar)if(isNaN(Number(e))){const n=i.Ar[e];t?.set(n,[])}const{treatments:n}=(0,s.Lg)().getObject(e)||{};if(this.localStorage.set(e,n||[]),n)for(let e=0;e<n.length;e++){const i=n[e]?.type;i&&t?.get(i)?.push(n[e])}this.isLoaded.set(e,!0)}return this.localStorage.get(e)}getWpoTreatmentsWithType(t,e){const n=(0,r.$)(o.T3.AppType,o.T3.CurrentRequestTargetScope);return this.isLoaded.get(n)&&!e||this.getWpoTreatments(e),this.wpoTreatmentTypeMap.get(n)?.get(t)}}},69189:function(t,e,n){n.d(e,{D:function(){return c},s:function(){return a}});var i=n(77246);const r="date",o=globalThis?.requestIdleCallback??(t=>globalThis.setTimeout(t))??(t=>t());class s{constructor(t){this.options=t,this.tryReadCache=async(...t)=>{if(await this.tryOpenCache()){const e=this.options.getCacheKey(...t);if(e){const t=await(this.cache?.match(e));if(this.isValid(t))return Object.assign(t,{isFromCache:!0}),t}}},this.writeCache=async(t,...e)=>{if(200===t?.status&&await this.tryOpenCache()){const n=this.options.getCacheKey(...e);if(n){t.headers.get(r)||t.headers.set(r,(new Date).toUTCString());let e=!1;try{await(this.cache?.put(n,t)),e=!0}catch{}o(()=>this.clearCache(e))}}},this.clearCache=async(t=!1)=>(await(this.cache?.keys()))?.forEach(async e=>{let n=!t;if(t){const t=await(this.cache?.match(e));n=t&&!this.isValid(t)}n&&await(this.cache?.delete(e))}),this.tryOpenCache=async()=>{if(this.isEnabled&&!this.cache)try{this.cache=await globalThis.caches.open(this.options.cacheName)}catch{}return!!this.cache},this.isValid=t=>{const e=Date.parse(t?.headers?.get(r)||""),n=e&&!isNaN(e)?e+this.maxAgeInMs:void 0;return!!n&&n>=Date.now()},this.isEnabled=(0,i.S)()&&!!globalThis?.caches,this.maxAgeInMs=t.maxAgeInMs||6e4}}const a=t=>new s(t),c=t=>!!t?.isFromCache},69259:function(t,e,n){n.d(e,{$q:function(){return i},ei:function(){return r}});const i="news",r="feed/personalize/settings"},69583:function(t,e,n){n.d(e,{sn:function(){return H},g6:function(){return U},k3:function(){return V}});var i=n(15098),r=n(8646);class o{get surfaceModel(){return(0,i.L)(()=>{const t=this._surfaceTemplateMapper(this._platformData);return t.interactionEvent.addEventListener(this.interactionEvent.dispatchEvent.bind(this.interactionEvent)),t})()}get contentModel(){return(0,i.L)(()=>{const t=this._contentTemplateMapper(this._platformData);return t.interactionEvent.addEventListener(this.interactionEvent.dispatchEvent.bind(this.interactionEvent)),t})()}get IsValid(){return!!this.id&&this.surfaceModel.IsValid&&this.contentModel.IsValid}constructor(t,e,n){if(this._platformData=t,this._surfaceTemplateMapper=e,this._contentTemplateMapper=n,this.interactionEvent=new r.f,!t)throw new Error("Platform data is required for PlacementModel")}getPlacementRules(){return[]}}class s extends o{getPlacementRules(){return[...super.getPlacementRules(),...this._platformData.placementRules??[]]}get id(){return this._platformData.id}get placementSource(){return"Internal"}get group(){return this._platformData.group}}var a=n(16813);class c{}class u extends c{constructor(){super(...arguments),this._placementsQueue=[]}providePlacement(t){this._callback?this._callback(t):this._placementsQueue.push(t)}subscribeForPlacementStream(t){this._callback||(this._callback=t,this._placementsQueue.forEach(e=>t(e)))}}class d{constructor(t){if(this._platformData=t,this.interactionEvent=new r.f,!t)throw new Error("Platform data is required for ContentTemplateModel")}}class l extends d{get contentType(){return a.r.CallToAction}get IsValid(){return!!this.title&&!!this.description}}class h extends l{get IsValid(){return!!this._contentData&&super.IsValid}get _contentData(){return this._platformData.contentModel}get title(){return this._contentData.title}get description(){return this._contentData.description}get contentImage(){return this._contentData.contentImage}get logoImage(){return this._contentData.logoImage}get disclaimerContent(){return this._contentData.disclaimerContent}get engageContentAction(){if(this._contentData.engageContentAction)return{...this._contentData.engageContentAction,actionDelegate:async()=>{this.interactionEvent.dispatchEvent({type:"Engaged",ts:Date.now(),followUpPlacementPromise:this._contentData.engageContentAction?.actionDelegate?.()})}}}get dismissContentAction(){if(this._contentData.dismissContentAction||this._contentData.engageContentAction)return{label:this._platformData.defaultDismissLabel,ariaLabel:this._platformData.defaultDismissAriaLabel,...this._contentData.dismissContentAction,actionDelegate:async()=>{this.interactionEvent.dispatchEvent({type:"Dismissed",ts:Date.now(),followUpPlacementPromise:this._contentData.dismissContentAction?.actionDelegate?.()})}}}}class f extends d{get contentType(){return a.r.CallToChoice}get IsValid(){return!!this.title&&!!this.description}}class p extends f{get IsValid(){return!!this._contentData&&super.IsValid&&this.validateOptionValues()}get _contentData(){return this._platformData.contentModel}get title(){return this._contentData.title}get description(){return this._contentData.description}get contentImage(){return this._contentData.contentImage}get logoImage(){return this._contentData.logoImage}get currentValue(){return this._contentData.currentValue}get choiceOptions(){return this._contentData.choiceOptions||[]}get dismissContentAction(){if(this._contentData.dismissContentAction)return{label:this._platformData.defaultDismissLabel,ariaLabel:this._platformData.defaultDismissAriaLabel,...this._contentData.dismissContentAction,actionDelegate:async()=>{this.interactionEvent.dispatchEvent({type:"Dismissed",ts:Date.now(),followUpPlacementPromise:this._contentData.dismissContentAction?.actionDelegate?.()})}}}get engageContentAction(){if(this._contentData.engageContentAction)return{...this._contentData.engageContentAction,actionDelegate:async t=>{this.interactionEvent.dispatchEvent({type:"Engaged",ts:Date.now(),followUpPlacementPromise:this._contentData.engageContentAction?.actionDelegate?.(t)})}}}validateOptionValues(){const t=new Set;for(const e of this.choiceOptions){if(!e.value)return!1;if(t.has(e.value))return!1;t.add(e.value)}return!0}}var g=n(46534);class m extends g.Hl{get IsValid(){return!!this._surfaceData&&super.IsValid}get _surfaceData(){return this._platformData.surfaceModel}get position(){return this._surfaceData.position}get size(){return this._surfaceData.size}get enableGradientBorderBottom(){return this._surfaceData.enableGradientBorderBottom}get dismissAfterResolve(){const t=this._surfaceData.dismissAfterSeconds||120,e=new Promise(e=>setTimeout(()=>e("Ignored"),1e3*t));return this._surfaceData.dismissAfterResolve?Promise.race([e,this._surfaceData.dismissAfterResolve]):e}get displaySurfaceAction(){return{actionDelegate:()=>{super.displaySurfaceAction.actionDelegate?.(),this._surfaceData.displaySurfaceAction?.actionDelegate?.()}}}get hideSurfaceAction(){return{actionDelegate:()=>{super.hideSurfaceAction?.actionDelegate?.(),this._surfaceData.hideSurfaceAction?.actionDelegate?.()}}}get closeSurfaceAction(){return{ariaLabel:this._platformData?.defaultCloseAriaLabel,...this._surfaceData.closeSurfaceAction,actionDelegate:()=>{super.closeSurfaceAction?.actionDelegate?.(),this._surfaceData.closeSurfaceAction?.actionDelegate?.()}}}}var w=n(40735);class y extends w.u{get surfaceType(){return"ContextualFeedbackCardLevel"}}class v extends y{get IsValid(){return!!this._surfaceData}get _surfaceData(){return this._platformData.surfaceModel}get dismissAfterResolve(){const t=new Promise(t=>setTimeout(()=>t("Ignored"),12e4));return this._surfaceData.dismissAfterResolve?Promise.race([t,this._surfaceData.dismissAfterResolve]):t}get displaySurfaceAction(){return{actionDelegate:()=>{super.displaySurfaceAction.actionDelegate?.(),this._surfaceData.displaySurfaceAction?.actionDelegate?.()}}}get hideSurfaceAction(){return{actionDelegate:()=>{super.hideSurfaceAction?.actionDelegate?.(),this._surfaceData.hideSurfaceAction?.actionDelegate?.()}}}}class b extends w.u{get surfaceType(){return"ContextualFeedback"}}class S extends b{get IsValid(){return!!this._surfaceData}get _surfaceData(){return this._platformData.surfaceModel}get dismissAfterResolve(){return this._surfaceData.dismissAfterResolve}get displaySurfaceAction(){return{actionDelegate:()=>{super.displaySurfaceAction.actionDelegate?.(),this._surfaceData.displaySurfaceAction?.actionDelegate?.()}}}get hideSurfaceAction(){return{actionDelegate:()=>{super.hideSurfaceAction?.actionDelegate?.(),this._surfaceData.hideSurfaceAction?.actionDelegate?.()}}}}var C,k,T;!function(t){t.Promotional="Promotional",t.LegalCompliance="LegalCompliance"}(C||(C={})),function(t){t.SlideUp="SlideUp",t.FadeIn="FadeIn",t.SlideRight="SlideRight"}(k||(k={})),function(t){t.Top="Top",t.Bottom="Bottom"}(T||(T={}));class x extends w.u{get IsValid(){return!!this.position}get surfaceType(){return"HorizontalBanner"}}class A extends x{get IsValid(){return!!this._surfaceData&&super.IsValid}get _surfaceData(){return this._platformData.surfaceModel}get transitionEffect(){return this._surfaceData.transitionEffect}get position(){return this._surfaceData.position}get dismissAfterResolve(){const t=this._platformData.dismissAfterSeconds||120,e=new Promise(e=>setTimeout(()=>e("Ignored"),1e3*t));return this._surfaceData.dismissAfterResolve?Promise.race([e,this._surfaceData.dismissAfterResolve]):e}get bannerType(){return this._surfaceData.bannerType}get displaySurfaceAction(){return{actionDelegate:()=>{super.displaySurfaceAction.actionDelegate?.(),this._surfaceData.displaySurfaceAction?.actionDelegate?.()}}}get hideSurfaceAction(){return{actionDelegate:()=>{super.hideSurfaceAction?.actionDelegate?.(),this._surfaceData.hideSurfaceAction?.actionDelegate?.()}}}get closeSurfaceAction(){return{...this._surfaceData.closeSurfaceAction,actionDelegate:()=>{super.closeSurfaceAction?.actionDelegate?.(),this._surfaceData.closeSurfaceAction?.actionDelegate?.()}}}}var $,I=n(79426),P=n(19548);function R(){const t=(e="nurturingMockPlacement",n=window.location.search,P._3.getQueryParameterByName(e,n)||P._3.getQueryParameterByName(e.toLowerCase(),n));var e,n;return t?t.split(",").map(t=>t.trim()):[]}!function(t){t.InternalCoachmark="internal-coachmark",t.InternalHorizontalBanner="internal-horizontal-banner",t.InternalContextualFeedback="internal-contextual-feedback",t.WalktroughCoachmark="walktrough-coachmark",t.FloatingCoachmark="floating-coachmark",t.FloatingTopCenter="floating-top-center",t.FloatingBottomCenter="floating-bottom-center"}($||($={}));var M=n(70487),_=n(6092);function E(){return{id:"feedFreCoachmark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:g.fB.Large,position:{coachmarkAnchor:M.u.myFeed,anchoringPosition:g.M7.Above,hasPointer:!0,pointerPosition:g.X1.Opposite}},contentModel:{contentType:a.r.CallToAction,title:"Discover your Feed Experience",description:"Get more out of your feed experience through this walk-thru.",contentImage:{url:`${(0,_.rA)().StaticsUrl}latest/nurturing/rewards/signin-upsell-signin.png`,altText:"Feed Image"},engageContentAction:{label:"Get Started"},dismissContentAction:{label:"Maybe Later"}}}}function F(t=g.L$.BottomEnd){return{id:"floatingCoachMark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:g.fB.Medium,position:t},contentModel:{contentType:a.r.CallToAction,title:"Discover your Feed Experience",description:"Get more out of your feed experience through this walk-thru.",contentImage:{url:`${(0,_.rA)().StaticsUrl}latest/nurturing/rewards/signin-upsell-signin.png`,altText:"Feed Image"},engageContentAction:{label:"Get Started"},dismissContentAction:{label:"Maybe Later"}}}}const D={[$.InternalCoachmark]:E,[$.InternalHorizontalBanner]:()=>({id:"nurturingPlacementManagerTestKey",placementSource:"Internal",group:"Functional",surfaceModel:{surfaceType:"HorizontalBanner",position:"Top",displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}}},contentModel:{title:"Take Action",description:"Learn about promotion trough descriptions.",contentType:a.r.CallToAction,contentImage:{url:"https://www.bing.com/th?id=OADD2.10239253524416_1IRFPKC9YUHNF27KA&pid=21.2&c=16&roil=0&roit=0&roir=1&roib=1&w=300&h=225&dynsize=1",altText:"Image Alt Text"},engageContentAction:{label:"Engage",actionDelegate:()=>{}},dismissContentAction:{label:"Not Now",actionDelegate:()=>{}},disclaimerContent:{text:"Disclaimer text should be defined here and need to be informative.",links:[{linkText:"Term",linkUrl:"https://microsoft.com"},{linkText:"Privacy",linkUrl:"https://microsoft.com"}]}}}),[$.InternalContextualFeedback]:()=>({id:"nurturingPlacementManagerTestKey",placementSource:"Internal",group:"Functional",surfaceModel:{surfaceType:"ContextualFeedback",displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}}},contentModel:{title:"Do you like this feed?",description:"Description should be defined here and need to be informative.",contentType:a.r.CallToChoice,contentImage:{url:"https://www.bing.com/th?id=OADD2.10239253524416_1IRFPKC9YUHNF27KA&pid=21.2&c=16&roil=0&roit=0&roir=1&roib=1&w=300&h=225&dynsize=1",altText:"Image Alt Text"},choiceOptions:[{label:"Yes",actionDelegate:()=>{}},{label:"No",actionDelegate:()=>{}},{label:"Not sure",actionDelegate:()=>{}}],engageContentAction:{label:"Engage",actionDelegate:()=>{}},dismissContentAction:{label:"Not Now",actionDelegate:()=>{}},disclaimerContent:{text:"Disclaimer text should be defined here and need to be informative.",links:[{linkText:"Term",linkUrl:"https://google.com"},{linkText:"Privacy",linkUrl:"https://google.com"}]}}}),[$.WalktroughCoachmark]:()=>{const t=E(),e={id:"personalizeFreCoachmark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:g.fB.Large,position:{coachmarkAnchor:M.u.myInterests,anchoringPosition:g.M7.Above,hasPointer:!0,pointerPosition:g.X1.Opposite}},contentModel:{contentType:a.r.CallToAction,title:"Personalize your feed",description:"This is personalization settings, where you can personalize your feed.",contentImage:{url:`${(0,_.rA)().StaticsUrl}nurturing/rewards/signin-upsell-signin.png`,altText:"Personalization Image"},engageContentAction:{label:"Next"}}},n=new I.e,i=t=>{if("ArrowUp"===t.key)n.set("Ignored"),document.removeEventListener("keydown",i)};document.addEventListener("keydown",i);const r={...e,contentModel:{...e.contentModel,engageContentAction:{...e.contentModel.engageContentAction}}};return{...t,surfaceModel:{...t.surfaceModel,dismissAfterResolve:n.getResultAsync()},contentModel:{...t.contentModel,engageContentAction:{...t.contentModel.engageContentAction,actionDelegate:async()=>(await new Promise(function(t){setTimeout(t,1e4)}),r)}}}},[$.FloatingCoachmark]:F,[$.FloatingTopCenter]:()=>F(g.L$.TopCenter),[$.FloatingBottomCenter]:()=>F(g.L$.BottomCenter)};var O=n(93468),N=n(65022);const L={Coachmark:t=>new m(t),HorizontalBanner:t=>new A(t),ContextualFeedback:t=>new S(t),ContextualFeedbackCardLevel:t=>new v(t)},B={[a.r.CallToAction]:t=>new h(t),[a.r.CallToChoice]:t=>new p(t)};class U extends u{constructor(t={}){super(),this._providerStaticContext=t,this.showMockPlacements()}createPlacement(t){const e=L[t.surfaceModel.surfaceType],n=B[t.contentModel.contentType];if(!e||!n)return;let i;const r={...this._providerStaticContext.localizedStrings};try{i=new s({...t,...r},e,n)}catch(e){return void(0,O.vV)(N.wHQ,"Internal data is not valid or missing.",void 0,t)}return i.interactionEvent.dispatchDecorator=t=>{const e=t.followUpPlacementPromise?t.followUpPlacementPromise?.then(t=>{if(t)return this.createPlacement(t)}):void 0;return{...t,followUpPlacementPromise:e}},i}sendInternalPlacement(t,e=[]){const n=this.createPlacement({...t,placementRules:e});n&&this.providePlacement(n)}showMockPlacements(){R().forEach(t=>{const e=D[t];e&&this.sendInternalPlacement(e())})}}const W=new I.e,V=t=>W.set(t),H=async()=>W.getResultAsync()},69816:function(t,e,n){var i,r,o;n.d(e,{EY:function(){return i},Py:function(){return r}}),function(t){t[t.InvalidRequest=0]="InvalidRequest",t[t.Success=1]="Success",t[t.NoContent=2]="NoContent",t[t.Failed=3]="Failed"}(i||(i={})),function(t){t[t.FromSSR=0]="FromSSR",t[t.FromCache=1]="FromCache",t[t.FromWW=2]="FromWW",t[t.FromEarlyResponse=3]="FromEarlyResponse",t[t.FromServer=4]="FromServer"}(r||(r={})),function(t){t.river="river",t.rightRail="rightrail",t.Rail="Rail"}(o||(o={}))},69913:function(t,e,n){n.d(e,{G:function(){return r}});var i=n(68480);class r{}r.updateLayout=new i.P("updateLayout"),r.initialize=new i.P("initialize")},70056:function(t,e,n){n.d(e,{HY:function(){return c},_Y:function(){return i},_p:function(){return s},ac:function(){return r},lP:function(){return a}});var i,r,o=n(83003);function s(t){switch(t){case o.pL.Article:return 13;case o.pL.Slideshow:return 14;case o.pL.Video:return 15;default:return null}}function a(t,e){return e?t.find(t=>e.includes(t.type)):null}function c(t,e){return e?t.find(n=>{if(!e.includes(n.type))return!1;if(n.type===r.EXPLORE){const e=new Set([r.EXPLICITLIKE,r.FOLLOWEDTOPIC,r.FOLLOWEDPUBLISHER]);return t.every(t=>!e.has(t.type))}return!0}):null}!function(t){t.TRENDING="trending",t.HOT="hot",t.VIEWS="views",t.OPINION="opinion",t.LOCAL="local",t.EXPLICITLIKE="explicitLike",t.FOLLOWEDTREATMENT="followed",t.FOLLOWEDTREATMENTTOPIC="followedTopic",t.FOLLOWEDTREATMENTPUBLISHER="followedPublisher"}(i||(i={})),function(t){t.FOLLOWEDTOPIC="followTopic",t.FOLLOWEDPUBLISHER="followPublisher",t.TRENDING="trending",t.LOCAL="local",t.EXPLICITLIKE="explicitLike",t.EXPLORE="explore"}(r||(r={}))},70177:function(t,e,n){n.d(e,{B1:function(){return g},G4:function(){return u},J8:function(){return v},Kh:function(){return T},Pj:function(){return d},Um:function(){return b},XS:function(){return w},Y4:function(){return y},_Z:function(){return p},d1:function(){return $},gn:function(){return l},mb:function(){return f}});var i=n(30817),r=n(89151),o=n(79426),s=n(77246),a=n(17720);const c="defer-hydration",u="needs-hydration",d=window.location.search.includes("ssrhydrateperf"),l=new Map,h=t=>e=>{if(!e.hasAttribute(t))return Promise.resolve();const n=new o.e;return new MutationObserver((i,r)=>{e.hasAttribute(t)||(n.set(),r.disconnect())}).observe(e,{attributeFilter:[t]}),n.getResultAsync()},f=h(c),p=h(u),g=(t,e=!1)=>{if(!(0,s.S)())return{start:()=>{},markEnd:()=>{}};const n=`${t}.start`;return{start:()=>performance?.mark(n),markEnd:(r="end",o=e)=>{const s=`${t}.${r}`;performance?.mark(s),performance?.measure(`${t}.${r}:duration`,n,s),o&&((0,i.ZF)()[`${t}.${r}:duration`]=performance?.getEntriesByName(`${t}.${r}:duration`)[0].duration)}}};let m=new Set;const w=t=>m=new Set(t.map(t=>t.toLocaleLowerCase())),y=t=>{l.clear(),t.forEach(t=>{l.set(t.toLocaleLowerCase(),{selfHydrationComplete:new o.e,topDownHydrateComplete:new o.e})})},v=t=>{t.forEach(t=>{const e=t.toLocaleLowerCase();l.get(e)?.selfHydrationComplete.set(),l.get(e)?.topDownHydrateComplete.set()})};var b;!function(t){t[t.Immediate=0]="Immediate",t[t.Never=1]="Never",t[t.IdleAfterTtvr=2]="IdleAfterTtvr",t[t.OnInteraction=3]="OnInteraction",t[t.OnHover=4]="OnHover",t[t.OnPageResize=5]="OnPageResize"}(b||(b={}));const S=["click","keydown"],C=["mouseenter","focusin"],k=Symbol("topDownHydratingComponents"),T=()=>a.vv.get(k,()=>new Map),x=t=>{const e=T(),n=(e.get(t)??0)+1;e.set(t,n)},A=t=>{const e=T(),n=(e.get(t)??0)-1;n>0?e.set(t,n):e.delete(t)};async function $(t,e,n={}){const i=t.hasAttribute("needs-recreation");i&&t.removeAttribute(u);const o=t.hasAttribute(c);if(o){e?.start(),t.removeAttribute(c);const i=t.tagName.toLocaleLowerCase();x(i),await p(t).then(()=>{n.onHydrationCallback?.(t),e?.markEnd("selfHydrationComplete")}),l.get(i)?.selfHydrationComplete.set()}let s;s=i?[]:Array.from(t.shadowRoot?.children??[]).concat(Array.from(t.children));return Promise.all(s.map((e,i)=>{let o;const s=e.tagName.toLocaleLowerCase(),a=new AbortController,c=()=>{if(!a.signal.aborted)return a.abort(),m.has(s)?o=g(`${s}:hydration`,!0):d&&(o=g(`${t.tagName.toLocaleLowerCase()}>${s}[${i}]`,!1)),$(e,o,n)},u={once:!0,passive:!0,capture:!0,signal:a.signal},l=n.hydrationModes?.[s];if(1!==l?.mode){if(!Array.isArray(l?.mode))return c();l?.markTtvr?.(e);for(const t of l.mode)switch(t){case 2:(0,r.dT)().then(()=>requestIdleCallback(c));break;case 3:S.forEach(t=>{e.addEventListener(t,c,u)});break;case 4:C.forEach(t=>{e.addEventListener(t,c,u)});break;case 5:window.addEventListener("resize",c,u)}}else l?.markTtvr?.(e)})).then(()=>{if(o){e?.markEnd("topDownHydrateComplete");const n=t.tagName.toLocaleLowerCase();A(n),l.get(n)?.topDownHydrateComplete.set()}})}},70487:function(t,e,n){n.d(e,{u:function(){return i}});const i={backgroundInnerHolder:"backgroundInnerHolder",backgroundOuterHolder:"backgroundOuterHolder",cardAction:"cardAction",complianceHyperlink:"complianceHyperlink",dailyStreaks:"dailyStreaks",feedToggle:"feedToggle",financeGreeting:"financeGreeting",myInterests:"myInterests",gaming:"gaming",gridViewFeed:"gridViewFeed",headerSpaceHolder:"headerSpaceHolder",locationGreeting:"locationGreeting",marketSelector:"marketSelector",myFeed:"myFeed",msnFeed:"msnFeed",navBar:"navBar",notificationBell:"notificationBell",nurturingCoachMark:"nurturingCoachMark",office365:"office365",overlayArticleReader:"overlayArticleReader",personalizeButton:"personalizeButton",pillWC:"pillWC",recommendedSites:"recommendedSites",rewardsIcon:"rewardsIcon",rewardsButton:"rewardsButton",rightRailSectionKey:"rightRailSectionKey",scrollableContainer:"scrollableContainer",searchBox:"search-box-edgenext",searchBoxInput:"searchBoxInput",searchBoxVoiceButton:"searchBoxVoiceButton",searchHistory:"searchHistoryEdgeNext",settingsButton:"SettingsButton",settingsCloseButton:"settingsCloseButton",settingsInformationalButton:"settingsInformationalButton",shoppingNav:"shoppingNav",signInButton:"signInButton",singleColumnFeedRoot:"singleColumnFeedRoot",superCoachMark:"superCoachMark",topSites:"topSites",unifiedMobileFeed:"unifiedMobileFeed",weatherNav:"weatherNav",waffle:"waffle",watchNav:"watchNav",waterfallViewFeed:"waterfallViewFeed",welcomeGreeting:"welcomeGreeting",navigationPage:"navigationPage",videoPlayButton:"videoPlayButton",imageEditButton:"imageEditButton",headerGrid:"headerGrid",floatButtonGroupWC:"floatButtonGroupWC",weatherHeroExperience:"weatherHeroExperience",pr2RefreshReminder:"pr2RefreshReminder",widgetsRegion:"widgetsRegion",rubyPage:"rubyPage",rubyContentConsumption:"rubyContentConsumption",casualGamesLandingV2:"casualGamesLandingV2",casualGamesLandingMainComponent:"casualGamesLandingMainComponent",rubyToggle:"rubyToggle"}},71266:function(t,e,n){n.d(e,{p:function(){return o}});var i=n(87346),r=n(77246);class o{constructor(){(0,r.S)()?(this.isDebugEnabled=((0,i.K)(window.location.href,"debug")||"").toLowerCase()in{1:1,true:1}||"vp"===((0,i.K)(window.location.href,"reqsrc")||"").toLowerCase(),this.isDebugEnabled&&!n.g.TEST_ENV&&(window.webpackRequire=n)):this.isDebugEnabled=!1}getLoggingService(){return null}isDebug(){return this.isDebugEnabled}setDebug(t){this.isDebugEnabled=t}setTags(t){}log(t,e){this.isDebug()&&console.info(t)}logError(t){console.error(t)}logCallback(t){this.isDebug()&&console.info(t())}logObjects(...t){this.isDebug()&&console.log(...t)}logSingleObject(t,e){this.isDebug()&&console.log(t)}}},71470:function(t,e,n){n.d(e,{W:function(){return r}});var i=n(68480);class r{}r.layoutAnimationStart=new i.P("layoutAnimationStart"),r.layoutAnimationComplete=new i.P("layoutAnimationComplete"),r.headerTransitionEnd=new i.P("headerTransitionEnd")},71507:function(t,e,n){n.d(e,{x:function(){return a}});var i=n(12870),r=n(65022),o=n(93468);class s{constructor(){this.dedupeIdsAdLevel=[],this.cacheSize=0}get size(){return this.cacheSize}setCacheSize(t,e){for(this.cacheSize=t,this.excludedRegions=e;this.dedupeIdsAdLevel.length>t;)this.dedupeIdsAdLevel.shift()}clear(){this.dedupeIdsAdLevel=[]}addToAdLevelCache(t){const e=this.dedupeIdsAdLevel.findIndex(e=>e.length===t.length&&e.every((e,n)=>e===t[n]));e>-1?(this.dedupeIdsAdLevel.splice(e,1),this.dedupeIdsAdLevel.push(t)):(this.dedupeIdsAdLevel.length===this.cacheSize&&this.dedupeIdsAdLevel.shift(),this.dedupeIdsAdLevel.push(t))}addDedupeIds(t,e){!this.cacheSize||!t||0==t.length||e&&this?.excludedRegions?.includes(e)||this.addToAdLevelCache(t)}getDedupeIds(t){if(t&&this.excludedRegions?.includes(t))return[];if(i.Rb?.CurrentFlightSet?.has("prg-ads-dupe-hit")){const t=this.dedupeIdsAdLevel.flat();return Array.from(new Set(t))}return this.dedupeIdsAdLevel.flat()}}const a=new class{constructor(){this.prefixOverride=[],this.overrideCaches=new Map,this.defaultCache=new s}initializeCache(t,e,n){this.defaultCache.setCacheSize(t,e),this.prefixOverride=n??[],this.overrideCaches.clear();for(const t of this.prefixOverride){const e=new s;e.setCacheSize(t.dedupeCacheSize,t.excludedRegions),this.overrideCaches.set(t.prefix,e)}}get isInitialized(){return this.defaultCache.size>0||this.overrideCaches.size>0}clearCache(){this.defaultCache.clear();for(const t of this.overrideCaches.values())t.clear();this.overrideCaches.clear(),this.prefixOverride=[]}addDedupeIds(t,e){if(!t||0===t.length)return;if(0===this.prefixOverride.length)return void this.defaultCache.addDedupeIds(t,e);const n=new Map;for(const e of t){const t=e.split("_");if(!t||t.length<2){(0,o.vV)(r.Y_s,"Unexpected dedupe crid prefix","Invalid dedupe crid entry format (too short)",e);continue}t.length>2&&(0,o.vV)(r.Y_s,"Unexpected dedupe crid prefix","Suspicious dedupe crid entry format (too long)",e);const i=t[0];let s=n.get(i);s||(s=[],n.set(i,s)),s.push(e)}for(const[t,i]of n.entries()){const n=this.overrideCaches.get(t);n&&n.addDedupeIds(i,e)}}getDedupeIds(t,e){if(0===this.prefixOverride.length)return i.Rb?.CurrentFlightSet?.has("prg-ads-dupe-ck")&&(0,o.vV)(r.M6N,"Unexpected dedupe old path been used","Dedupe cache prefix override is empty",{region:t,pageType:e}),this.defaultCache.getDedupeIds(t);const n=[];for(const e of this.overrideCaches.values())n.push(...e.getDedupeIds(t));return n}}},71656:function(t,e,n){n.d(e,{y:function(){return o}});var i=n(65022),r=n(77246);function o(t){if((0,r.S)()){const e="storageTest";try{return window.sessionStorage.setItem(e,e),window.sessionStorage.removeItem(e),!0}catch(e){(t||"function"==typeof t)&&t({...i.E45,message:`Session Storage is not defined: ${e}`})}}return!1}},71776:function(t,e,n){n.d(e,{L2:function(){return S},Wy:function(){return g},ZX:function(){return b},kn:function(){return v},nt:function(){return m}});var i=n(65022),r=n(93468),o=n(89151),s=n(79426),a=n(82238),c=n(15003),u=n(13053),d=n(34713);let l=[],h=[],f=new Set,p=new s.e;async function g(t,e,n){const i=(0,a.Kl)().getCurrentState().aboveTheFoldVisuallyReady.endTime,r=new Set;for(const t of l){const{experienceType:n,isRequiredForInitialRendering:i}=t;i&&!e.includes(n)&&e.push(n),e.includes(n)&&f.add(n)}0==f.size&&p.set();for(const e of l){const{experienceType:s}=e,a=(0,c.C8)(s),u=0===e.thresholdMinutes||null!=e.thresholdMinutes&&t-i>6e4*e.thresholdMinutes;n||a||u?(w(e),h.push(e.delayCallback)):(e.isRequiredForInitialRendering&&await w(e),(0,o.iJ)(s),y(s)),r.add(s)}for(const t of e)r.has(t)||(0,o.iJ)(t);return p.getResultAsync()}function m(){for(const t of h)t()}async function w(t){try{await t.criticalCallback(),(0,u.D)(()=>{(0,o.iJ)(t.experienceType),y(t.experienceType)})}catch(e){(0,r.c_)(e,i.uVD,"Exception when running stale revalidate callback","Experience: "+t.experienceType)}}function y(t){f.delete(t)&&0==f.size&&p.set()}function v(t){l.push(t)}function b(){for(const t of l)w(t)}function S(){((0,d.C6)()||window.isCSRFallback||"true"===window._clientSettings.static_page)&&fetch(location.href,{cache:"reload"})}},71967:function(t,e,n){n.d(e,{P:function(){return a}});var i=n(90905),r=n(12870);const o=r.Rb.CurrentFlightSet?.has("prg-scrolldbc"),s=50;function a(t,e=s,n=!0){return o?n?(0,i.A)(t,e):(0,i.A)(t,e,{leading:!0,trailing:!1}):t}},73267:function(t,e,n){var i;n.d(e,{Q:function(){return r},Z:function(){return i}}),function(t){t.basicFeed="BasicFeed",t.desktopFeedStart="DesktopFeedStart",t.discoverCarouselSection="FinanceDiscoverSection_carouselCard",t.discoverFirstSection="FinanceDiscoverSection_first",t.discoverFollowedSection="FinanceDiscoverSection_followedCard",t.discoverSecondSection="FinanceDiscoverSection_second",t.feed="Feed",t.feedBasicRender="FeedBasicRender",t.feedRequest="FeedRequest",t.feedRequestFG="FeedRequest.FG",t.feedSDRender="FeedSDRender",t.isPrerenderedAd="isPrerenderedAd",t.firstSectionRenderStart="FirstSectionRenderStart",t.firstSectionRenderEnd="FirstSectionRenderEnd",t.riverFirstSection="RiverFirstSection",t.sdCards="SDCards",t.searchBox="SearchBox",t.searchBoxToFeed="SearchBoxToFeed",t.secondSectionRenderEnd="SecondSectionRenderEnd",t.secondSectionRenderStart="SecondSectionRenderStart",t.TTPR="TTPR",t.viewCards="ViewCards",t.wpoCallStart="WpoCallStart",t.wpoResponseBack="WpoResponseBack",t.feedCallStart="FeedCallStart",t.feedResponseBack="FeedResponseBack",t.feedParse="FeedParse",t.configEndToFeedStart="ConfigEndToFeedStart",t.feedResponseTo1SSectionProcessed="FeedResponseTo1SSectionProcessed",t.isSSREnabled="isSSREnabled",t.isSSRCompleted="isSSRCompleted",t.isSSRAborted="isSSRAborted",t.complete="Complete",t.sectionRenderStart="sectionRenderStart",t.ssrCpuCost="ssrCpuCost",t.ssrRenderDuration="ssrRenderDuration"}(i||(i={}));const r="WidgetsConfigsEnd"},73691:function(t,e,n){n.d(e,{As:function(){return d},EA:function(){return a},Yk:function(){return o},a$:function(){return s},xS:function(){return l}});var i=n(77246);const r=(0,n(98763).Xe)(),o=r.get;function s(t){r.set(t)}const a="service",c=f().fetch;let u=c;function d(t){Object.defineProperty(f(),"fetch",{value:t?(...t)=>l()(...t):c})}function l(t={}){const{perfTimeline:e=o()}=t,n=t.fetchImpl||u;return e?h.bind(h,e,n):n}async function h(t,e,n,i){const r=(n.url||n).toString(),s={url:r};if(i){s.requestName=i.requestName,s.perfCritical=i.perfCritical,delete i.requestName,delete i.perfCritical;const{urlMapper:t}=i;t&&(s.mappedUrl=t(r),delete i.urlMapper)}const c=t===o()?r:a,u=t&&t.startMeasure(c).endMeasure;let d;try{const t=await e(n,i);return d=!t||!t.ok,t}catch(t){throw d=!0,t}finally{d&&(s.error=!0),u&&u({customData:s})}}function f(){return(0,i.S)()?window:globalThis}},73920:function(t,e,n){n.d(e,{FD:function(){return c},I0:function(){return d},Uk:function(){return u}});var i=n(41820),r=n(48172),o=n(7965),s=n(6092),a=n(90441);function c(t,e,n=!1){const i="kids"===s.T3?.CurrentRequestTargetScope?.audienceMode;return t?.enableWidgetsRegion&&e?.enableWidgetsRegion&&!n&&!s.T3.IsHeroNTP&&!i}async function u(t){if(!await r.f.isApiAvailableToUse())return!1;if(await(0,a.Ac)()===o.U6.user)return!1;if(!t)return!0;const e=(await r.f.getPreferenceSetting(i.bJ.widgetsUpsell))?.value||{};return(e?.seen||0)<t}async function d(){const t=(await r.f.getPreferenceSetting(i.bJ.widgetsUpsell))?.value,e={seen:(t?.seen||0)+1};await r.f.savePreferenceSetting(i.bJ.widgetsUpsell,e)}},74166:function(t,e,n){n.d(e,{Ux:function(){return o},XJ:function(){return s}});var i=n(97643);let r;function o(t,e){if(!t)return null;if(e)return s(t);if(!r){const t="undefined"!=typeof document&&document.cookie.split("; ");r={};const e=t&&t.length;for(let n=0;n<e;n++){const e=t[n].indexOf("=");r[t[n].slice(0,e).toLocaleLowerCase()]=(0,i.RC)(t[n].slice(e+1))}}const n=t.toLocaleLowerCase();return r[n]||null}function s(t){const e=document.cookie?.match(`\\b${t}=([^;]*)`);return e?(0,i.RC)(e[1]):null}},74180:function(t,e,n){n.d(e,{f:function(){return r}});var i=n(20205);class r{constructor(){this.config={},this.strings={},this.initialized=!1}async initConfig(t){this.initialized||(this.config=await this.getConfigFromRef(t)||{},this.strings=this.config?.localizedStrings||{},this.initialized=!!this.config&&!!this.config?.localizedStrings)}getConfig(){return this.config}getLocStrings(){return this.strings}async getConfigFromRef(t){try{const e=t?.configRef||this.configRef,n=await i.L.getConfig(e);return n?.properties}catch(t){return{}}}}},74195:function(t,e,n){n.d(e,{H$:function(){return m},Q6:function(){return w},TE:function(){return d},WD:function(){return u},pN:function(){return y},wJ:function(){return g}});var i=n(65022),r=n(7258),o=n(88294),s=n(33107),a=n(77246),c=n(6092);let u,d;const l=new Map;let h;const f=(0,s.S9)("WebWorkerUtility","WebWorkerUtility",!0),p=new Map,g=t=>{if(!t)return;const e=p.get(t);return e?(p.delete(t),e):void 0};function m(t,e,n=!0,r=!0){const s={id:t&&t.id||"",fetched:!1,payload:null};if(!t||!t.id)return Promise.resolve(s);if(!u&&(!d||d&&"appanoncookie"!==t.id))return Promise.resolve(s);const a=f&&f.startMeasure(t.id).endMeasure,c=p.get(t.id);if(c)return r&&p.delete(t.id),a&&a({customSuffix:"standbymessage"}),Promise.resolve(c);let g,m;e&&(m=new Promise(r=>{g=setTimeout(()=>{l.delete(t.id);const c=`Web worker request timed out after ${e}ms for request id: [${t.id}]`;n&&(h?h({...i.Xf,message:"Web worker request timed out",pb:{...i.Xf.pb,customMessage:c}}):o.v.logError(c)),a&&a({customSuffix:"timeout"}),r({...s,timeout:!0})},e)}));const w=new Promise(e=>{l.set(t.id,{type:t.type||"data",callback:t=>{g&&clearTimeout(g),a&&a(),e(t)}})});return window.webWorker.postMessage({id:t.id,type:t.type||"data",payload:t.payload}),e?Promise.race([w,m]):w}function w(t){u&&t&&t.id&&window.webWorker.postMessage({id:t.id,type:t.type||"command",payload:t.payload||null})}function y(t){if(!u||!t||"function"!=typeof t)return;h=function(e){try{t(e)}catch(t){o.v.logError(`Failed to log web worker AppError. Error: ${(0,r.M5)(t)}`)}},window.webWorker.onerror=v;var e,n;e={id:"WebWorkerError",type:"subscription"},n=t=>{if(t.payload&&"object"==typeof t.payload){const e=t.payload;e.pb={...e.pb,...(0,i.Ukt)()},h(e)}else h({...i.fo8,message:"Web worker error",pb:{...i.fo8.pb,customMessage:JSON.stringify(t.payload||"")}})},u&&e&&"subscription"===e.type&&n&&(l.set(e.id,{type:"subscription",callback:n}),window.webWorker.postMessage(e)),setTimeout(()=>{window.webWorkerErrors&&Array.isArray(window.webWorkerErrors)&&(window.webWorkerErrors.forEach(t=>{v(t)}),delete window.webWorkerErrors)})}function v(t){if(!t.filename)return u=!1,window._isWebWorkerPresent=u,window.webWorker.terminate(),void h({...i.uDq,message:"Web worker script not found",pb:{...i.uDq.pb,customMessage:JSON.stringify(b(t))}});h({...i.HxO,message:"Web worker runtime error",pb:{...i.HxO.pb,customMessage:JSON.stringify(b(t))}})}function b(t){return JSON.stringify({filename:t.filename,message:t.message,lineno:t.lineno})}var S;u=!1,d=!1,(0,a.S)()&&(u=void 0!==S?S:!!window.webWorker,window._isWebWorkerPresent=u,d=u),"edgeChromium"===c.T3.AppType&&(u=!1,c.T3.StaticDomain&&c.T3.StaticDomain.endsWith("cn")&&(d=!1)),(u||d)&&(window.webWorker.onmessage=t=>{const{data:e}=t,n=l.get(e.id);if(!n)return void p.set(e.id,e);"data"===n.type&&l.delete(e.id);const i=n.callback;i&&i(e)},setTimeout(()=>{window.webWorkerMessages&&Array.isArray(window.webWorkerMessages)&&(window.webWorkerMessages.forEach(t=>{t.id&&p.set(t.id,t)}),delete window.webWorkerMessages)}))},74326:function(t,e,n){n.d(e,{J7:function(){return h},OD:function(){return c},nI:function(){return l},pN:function(){return u}});var i=n(6092),r=n(12870),o=n(88294);let s,a;const c=new URL("","https://api.msn.com/");function u(){const t=(0,i.rA)();var e;return s||(e=t.ServiceUrlBase,s=new URL("",e),f(s)),s}function d(){const t=(0,i.rA)();var e;return a||(e=t.FeedServiceUrlBase,a=new URL("",e),f(a)),a}function l(t,e=u()){return new URL(t+e?.search,e)}function h(t,e=d()){return new URL(t+e?.search,e)}function f(t){let e=!1;"dev"!==t.searchParams.get("env.service")&&(0,r.Th)().UserIsSignedIn&&(e=!0),o.v.log("u-si: "+(0,i.rA)().UserId),o.v.log("a-si: "+e),o.v.log("ss-si: "+(0,r.Th)().UserIsSignedIn)}},74688:function(t,e,n){var i;n.d(e,{P:function(){return i}}),function(t){t.High="High",t.Medium="Medium",t.Low="Low"}(i||(i={}))},75096:function(t,e,n){n.d(e,{X:function(){return a}});var i=n(56911),r=n(60815),o=n(65022),s=n(44449);class a{constructor(t,e){this.props=t,this.cb=e}connectedCallback(t){const{source:e}=t;this.props.forEach(t=>{r.cP.getNotifier(e).subscribe(this,t)}),this.handleChange(e)}disconnectedCallback(t){const{source:e}=t;this.props.forEach(t=>{r.cP.getNotifier(e).unsubscribe(this,t)}),e.$fastController.removeStyles(this.styles)}handleChange(t){this.styles=this.cb(t),t.$fastController.addStyles(this.styles)}}(0,i.Cg)([(0,s.sx)(o.SuG,"CssInjectionBehavior.Bind")],a.prototype,"connectedCallback",null),(0,i.Cg)([(0,s.sx)(o.SuG,"CssInjectionBehavior.Unbind")],a.prototype,"disconnectedCallback",null),(0,i.Cg)([(0,s.sx)(o.SuG,"CssInjectionBehaviorHandleChange")],a.prototype,"handleChange",null)},75322:function(t,e,n){n.d(e,{EE:function(){return r},U9:function(){return o},aU:function(){return i},g4:function(){return s},uk:function(){return a},vd:function(){return c}});const i="2px",r="4px",o="6px",s="8px",a="10000px",c="2px"},75344:function(t,e,n){n.d(e,{MD:function(){return s}});const i={neutralForegroundRestColor:"--neutral-foreground-rest",neutralFillHoverColor:"--neutral-fill-hover",neutralFillActiveColor:"--neutral-fill-active",adBackgroundColor:"--ad-background-color",gradientMidColor:"--gradient-mid-color",gradientEndColor:"--gradient-end-color"},r={"font-weight":"","z-index":"",flex:"","flex-grow":"","flex-shrink":"",order:""},o=t=>null!=r[t]?r[t]:"px";function s(t,e){return null==e||"undefined"===e?"":(t=null!=i[n=t]?i[n]:n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`),isNaN(Number(e))?`${t}:${e}`:`${t}:${e}${o(t)}`);var n}},75391:function(t,e,n){n.d(e,{Ks:function(){return m},fL:function(){return g},qx:function(){return w}});var i,r=n(65022),o=n(7258),s=n(93468),a=n(33107),c=n(6092),u=n(67387),d=n(49084),l=n(4865),h=n(8597),f=n(63418),p=n(23572);function g(t,e=!0){return(0,a.m0)(()=>y("Acquire",t,e),"tryAcquire1SWorkIdCookies",(0,p.aK)())}function m(){return(0,a.m0)(()=>y("Delete"),"tryDelete1SWorkIdCookies",(0,p.aK)())}async function w(){return(0,a.m0)(()=>y("Reset"),"tryReset1SWidCookies",(0,p.aK)())}async function y(t,e,n=!0){const i="Reset"===t,a="Acquire"===t||i,p=a?"GET":"DELETE",g=(0,l.p)(),m=`https://api.msn.${c.T3.IsChinaCompliance?"cn":"com"}/auth/cookie/${i?"wid":"AAD"}`;let w=null,y=null;try{const r=new URL(m);r.searchParams.append("apikey",c.T3.OneServiceApiKey),r.searchParams.append("ocid",h.Mq),r.searchParams.append("activityId",c.T3.ActivityId),r.searchParams.append("it",g),i&&r.searchParams.append("reset","true");const o={method:p,credentials:"include",headers:(0,d.LK)(e)||void 0};w=await fetch(r.toString(),o);const s=g===l.j.Web?u.E1:u.j$;if(n){const e=!!(0,f.Ri)(s);(a&&!e||!a&&e)&&(y=new Error(`${a?"Expected":"Unexpected"} cookie ${s} is ${a?"missing":"still present"} after ${t} 1S call to ${m} with status ${w.status}`))}}catch(t){y=t}return!y&&w&&w.ok?200===w.status:((0,s.vV)(r.HpO,`Error in ${t} mode for API call ${m}. ${y?.message||""}`,y?(0,o.M5)(y):void 0),!1)}!function(t){t.Acquire="Acquire",t.Delete="Delete",t.Reset="Reset"}(i||(i={}))},75538:function(t,e,n){n.d(e,{Au:function(){return A},CH:function(){return b},Fn:function(){return $},MD:function(){return S},Pn:function(){return k},Sx:function(){return d},au:function(){return I},eE:function(){return T},g1:function(){return y},ib:function(){return C},lc:function(){return g},mQ:function(){return x},nY:function(){return p},qv:function(){return v},uM:function(){return m}});var i=n(30817),r=n(9192),o=n(89151),s=n(96851),a=n(83003),c=n(63456),u=n(12870);const d=1,l=["river","resriver","river_cms","rightrail"],h=t=>e=>{const n={...e,adLabelText:t.adLabelText,isGreyAdsLabelEnabled:t.isGreyAdsLabelEnabled,isWhiteSlug:t.isWhiteSlug,isTransparentSlug:t.isTransparentSlug,isNarrowTitleFooterGap:t.isNarrowTitleFooterGap,isTransparentAdSlugWithBorder:t.isTransparentAdSlugWithBorder,enableAdsColorBleed:t.enableAdsColorBleed,isAdSlugV4NonDr:t.isAdSlugV4NonDr};return"rightrail"===e.region&&t.rightrail?.useTransparentAdCard&&(n.shouldUseWhiteGradient=!0),l.includes(e.region)?(n.isProviderInFooter=t.isProviderInFooter,n.isProviderInHeader=t.isProviderInHeader,((t,e)=>{if(e.items?.length){if(t.useArticleCardTemplate){const n=Number(e.items[0].imageWidth)||(0,c.A)(t.adTemplateConfig,"imageSizeConfig.river.w"),i=Number(e.items[0].imageHeight)||(0,c.A)(t.adTemplateConfig,"imageSizeConfig.river.h");return e.items[0].imageWidth=(225*n/i).toFixed().toString(),e.items[0].imageHeight="225",e.imageWidth=e.items[0].imageWidth,void(e.imageHeight=e.items[0].imageHeight)}e.items[0].imageWidth="300",e.items[0].imageHeight="156"}})(t,n),n):n},f=(t,e)=>{const n=t[e.region]??[];return{...t,[e.region]:n.concat(e)}},p=(t,e)=>e.map(h(t)).reduce(f,{}),g=t=>t.reduce((t,{region:e,index:n})=>{const i=t.get(e)||[];return i.push(n),t.set(e,i),t},new Map),m=(t,e)=>t.reduce((t,n)=>(e(n)?t[0].push(n):t[1].push(n),t),[[],[]]),w=()=>{const t=(0,i.ZF)()[o.wL+"Complete"];(0,r.cE)("NativeAd.RenderReady",t),(0,r.cE)("NAdRender",1),(0,r.cE)("TTVR.NativeAd",t),(0,o.tD)("TTVR.NativeAd",t)},y=(t=!1)=>{const e=(0,i.ZF)().isSSRCompleted&&window.ssrAdData?.length;e&&w(),window.requestAnimationFrame(()=>{setTimeout(()=>{const n=(0,r.tZ)(u.Rb.IsPrerender&&!t),a=(0,o.yE)("NativeAd.RenderReady");a>-1&&a&&(0,o.tD)("NAdRender",n-a);const c=(0,o.yE)("TTNativeAd.Response");c>-1&&(0,o.IJ)("NAdProcess",c,n);const d=(0,o.yE)(t?"TTNativeAd.Background.Serve":"TTNativeAd.Serve");d>-1&&(0,o.tD)("NAdRespToCallback",d-c),t?(0,s.GP)().then(()=>{const t=(0,i.ZF)();(0,o.IJ)("TTVR.NativeAd",0,t.TTPR),(0,o.IJ)("TTNativeAd.Request",0,1)}):e||(0,o.IJ)("TTVR.NativeAd",0,n)},0)});const n=(0,r.tZ)(u.Rb.IsPrerender&&!t);(0,o.tD)("NativeAd.RenderReady",n);const a=(0,o.yE)(t?"TTNativeAd.Background.Serve":"TTNativeAd.Serve");a>-1&&(0,o.tD)("NAdCallbackProcess",n-a)};const v=()=>{if((0,i.ZF)().isSSRCompleted&&window.ssrAdData?.length)w();else{const t=(0,r.tZ)(u.Rb.IsPrerender);(0,o.IJ)("TTVR.NativeAd",0,t)}},b=t=>0===t.placement?.items?.length,S=t=>!(t.type!==a.pL.Infopane||!t),C=t=>!(t.type!==a.pL.TabbedInfopaneCard||!t),k=t=>t.type===a.pL.ChannelCarousel||t.type===a.pL.ChannelFilterCard||t.type===a.pL.DynamicFilteredChannel,T=t=>t.type===a.pL.NativeAd||t.type===a.pL.NativeTopAd||t.type===a.pL.FirstPartyAd,x=t=>t.type===a.pL.CmsAd,A=t=>t.type===a.pL.Dense,$=t=>t.type===a.pL.TabbedInfopaneCardTab||t.type===a.pL.TopicFeed,I=t=>t.type===a.pL.BuyDirectAd},75575:function(t,e,n){n.d(e,{S:function(){return r},p:function(){return o}});let i=!1;const r={purgeCacheAsync:async function(t){if(this.isServiceWorkerActive()){const e=(await caches.keys()).filter(e=>e.includes(t));await Promise.all(e.map(t=>caches.delete(t)))}},purgeEntryInCache:async function(t,e,n){if(this.isServiceWorkerActive()){const i=await caches.open(t),r=(await i.keys()).filter(t=>t.url.startsWith(e)&&t.method===n);await Promise.all(r.map(t=>i.delete(t)))}},isServiceWorkerActive:function(){const{navigator:t}=window,e=t&&t.serviceWorker&&t.serviceWorker.controller;return e&&"activated"===e.state},getIsServiceWorkerEnabled:function(){return i},setIsServiceWorkerEnabled:function(t){i=t}};var o;!function(t){t.base="base",t.followedTopics="followedTopics",t.publishersProfile="publishersProfile",t.river="river",t.subscribedPublishers="subscribedPublishers",t.financeGraphAction="financeGraphAction"}(o||(o={}))},75776:function(t,e,n){n.d(e,{MI:function(){return c},iB:function(){return u}});var i=n(28828),r=n(97643),o=n(77246),s=n(67387),a=n(10160);function c(){return(0,o.S)()?(window._clientSettings=window._clientSettings||(0,i.B)(document.head.dataset.clientSettings||document.getElementsByClassName(a.V3)[0]?.getAttribute(s.Ah)),window._clientSettings):null}function u(t){if(!(0,o.S)()||!t)return;window._clientSettings=t;const e=(0,r.PD)(t);e&&document.head.setAttribute(s.Ah,e)}},75921:function(t,e,n){n.r(e),n.d(e,{ExperienceTrackerEdgeNextDataConnector:function(){return I},ExperienceTrackerEdgeNextDataReducer:function(){return P.n},ToolingInfo:function(){return R}});var i=n(28006),r=n(84855),o=n(8092),s=n(82238),a=n(23768),c=n(7483),u=n(56227),d=n(1732),l=n(11367),h=n(36090),f=n(6092),p=n(53384),g=n(12870),m=n(28067),w=n(96851),y=n(35849),v=n(58559),b=n(27261),S=n(77246),C=n(98216);const k={eventType:o.R$.aboveTheFoldVisuallyReady},T={eventType:o.R$.pageVisuallyReady},x={eventType:o.R$.belowTheFoldTransitionStart},A="prg-gamingfeed",$=[h.DX.ENUS,h.DX.ENGB,h.DX.ENAU,h.DX.ENCA,h.DX.ENIN];class I extends c.W{constructor(t,e,n,i,r,o,s){super(t,e,n,i,r,o,s),this.initializePromise=this.initialize()}waitForInitialize(){return this.initializePromise}async initialize(){const t=await(0,y.SV)(i.h$),e=await t.getLayoutStateAsync();this.milestoneDataConnector=(0,s.Kl)();const n=[],c=[],h=["TTF"],I=f.T3.IsUCBased?void 0:["SearchBox"];let{renderCacheConfig:P,feedContentSourceMap:R,enableGridViewFeed:M}=this.config||{};P=P||{};const _=(0,p.kP)(),E=!M&&(0,d.xe)(_);M||C.YT.addOrUpdateTmplProperty("tracker_selectedPivot",JSON.stringify(_));const F=this.getFeedExperienceType(E),D=e.customBackgroundImageInfo?.hasImage||!1,O=e.imageOfTheDayEnabled&&"custom"!==e.currentBackgroundImageType||"custom"===e.currentBackgroundImageType&&D,N={eventType:o.R$.visuallyReady,experienceType:r.UlU};l.gR.isRuby?c.push(r.xye):c.push(r.KTI),f.T3.IsUCBased||c.push(r.UlU),"off"===e.selectedQuickLinksDisplaySetting||f.T3.IsUCBased||c.push(r.v$w),!O||l.gR.isRuby||f.T3.IsUCBased||c.push(r.F0b);const L=e.enableWidgetsRegion&&"kids"!==f.T3?.CurrentRequestTargetScope?.audienceMode&&!f.T3.IsHeroNTP&&!f.T3.IsUCBased,B=f.T3.IsHeroNTP&&(this.isFlightActive("prg-hero-abnav")||(0,b.iA)()?.toLowerCase()?.includes("ocid=wind_spot_2")),U=this.isFlightActive("prg-ntp-nads")&&!l.gR.isRuby;(L||B)&&n.push((0,s.it)(N,r.dXe));const W=this.isFlightActive("ntp-bgdsbl-dfr")&&!O&&!f.T3.IsUCBased;f.T3.IsUCBased||(n.push((0,s.it)(N,r.v$w)),W||n.push((0,s.it)(N,r.F0b)));const V="kids"===g.Rb?.ClientSettings?.audienceMode,H=("always"===e.selectedFeedDisplaySetting||"peek"===e.selectedFeedDisplaySetting)&&!V,z=R&&1===(0,m.X)(R),j=f.T3&&f.T3.CurrentRequestTargetScope&&f.T3.CurrentRequestTargetScope.os===v.N.Xbox,q=2===(0,m.X)({gaming:2}),G=3===(0,m.X)({play:3});if(H&&!V){const t=await f.T3.unsupportedEnterpriseCloud;if(l.gR.isRuby||!z||t)if(j&&q)this.isFlightActive(A)||$.includes(f.T3.CurrentMarket)?c.push(r.jCw):c.push(r.xiF);else if(G);else{(!l.gR.isRuby||!g.Rb.IsPrerender||this.config.enableRubyPrerenderFeed)&&F&&c.push(F),this.registerFeedPerfMarker(F);(0,S.S)()&&window.ssrAdData?.length||U||(h.push("TTNativeAd.Request"),h.push("TTNativeAd.Serve"),h.push("NativeAd.ApiDuration"),h.push("NativeAd.RenderReady"),h.push("TTVR.NativeAd"))}else c.push(r.jz6),c.push(r.gvE),c.push(r.MIc),c.push(r.enh),(this.isFlightActive("prg-m365news-t")||this.isFlightActive("prg-3snews-t"))&&c.push(r.Oso),this.isFlightActive("prg-ntp-cpcw")||this.isFlightActive("prg-ntp-cpcwas")?c.push(r.PMX):c.push(r.iIw),f.T3.IsUCBased||n.push((0,s.it)(N,r.jz6))}const J={eventType:o.R$.visuallyReady,experienceType:F},Q={eventType:o.R$.visuallyReady,experienceType:r.xiF},K={eventType:o.R$.visuallyReady,experienceType:r.JOJ};let X,Y,Z;switch(X=j&&q&&!this.isFlightActive(A)?Q:G?K:J,e.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":n.push((0,s.it)(k,r.SNY)),n.push((0,s.it)(k,r.$mD)),B||l.gR.isRuby||n.push((0,s.it)(x,r.eYr));break;default:n.push((0,s.it)(k,r.SNY)),n.push((0,s.it)(k,r.$mD)),B||l.gR.isRuby||n.push((0,s.it)(T,r.eYr))}H?(Y=N,Z=z?k:X):(Y=k,Z=k);const tt=H?k:x;n.push((0,s.it)(tt,r.S6v));const et=[r.WG6,r.ymm,r.HTg,r.ojW,r.G2r,r.cpF,r.hEo,r.skx,r.s7z,r.pt1,r.oMs,r.IWO,r.Vzq,r.Ir6,r.ahW,r.B34,r.JxY,r.AOC,r.Qb0,r.ArF,r.Lz8,r._Jh,r.yXx,r.P83,r.KJl,r.NjZ,r.FC5,r.eyY,r.IUg,r.WNH,r.znl,r.dnH,r.tKm,r.UoA,r._1i,r.DZv],nt=new Set([r.ahW,r.FC5,r._1i]);for(const t of et)e.enableWidgetsRegion&&nt.has(t)||n.push((0,s.it)(Y,t));const it=[r.Ouq,r.SAb,r.s4M,r.O_p,r.Ffl,r.VLS,r.QtQ,r.jRe,r.bNy,r.PyZ,r.j$N,r.c$z,r.y55,r.rWZ,r.swS,r.M8j,r.xYf];l.gR.isRuby||this.isFlightActive("ntp-plch-hdr")||(it.push(r.k29),it.push(r.RVI));for(const t of it)n.push((0,s.it)(Z,t));n.push((0,s.it)(k,r.dnU)),n.push((0,s.it)(k,r.s1n)),n.push((0,s.it)(k,r.mK7)),n.push((0,s.it)(T,r.DSN)),n.push((0,s.it)(T,r.PIH));const rt=[r.U72,r.pqd,r.PvQ,r.R6D,r.P4y,r.UET,r.wTj,r.FEr,r.An8,r.eVF,r.b8g];!l.gR.isRuby&&!this.isFlightActive("ntp-plch-hdr")||f.T3.IsUCBased||(rt.push(r.k29),rt.push(r.RVI)),W&&rt.push(r.F0b);for(const t of rt)n.push((0,s.it)(T,t));this.addVisuallyReadyDependencies(c),(0,S.S)()&&window._pageTimings&&(window._pageTimings.visualDependenciesConfigs=c);const ot=f.T3&&f.T3.CurrentRequestTargetScope&&"dhp"==f.T3.CurrentRequestTargetScope.pageType?this.config.entireRiverStaleMinutes:this.config.dhpEntireRiverStaleMinutes;let st=(0,u.a)();if((0,S.S)()&&window._pageTimings&&(window._pageTimings.visualDependenciesConnector=st,E&&(st=c)),(0,w._W)(st,this.config.prerenderForceRefresh,ot,this.config.sdCardStaleMinutes,F),this.registerSecondaryPerfMarkers(h),(0,S.S)()){const t=window?.isSSREnabled||f.T3.IsUCBased?n.filter(t=>t.deferralInfo!==k&&t.deferralInfo!==N&&t.deferralInfo!==X):n;a.m.updateExperienceLoadDeferralState.getActionSender(this.milestoneDataConnector).send(t)}this.registerVisuallyReadyObserver();const at=f.T3.IsUCBased?[]:["SearchBox"];this.registerMarkersIfNecessary(at,I,g.Rb.IsPrerender)}isFlightActive(...t){return t.some(t=>g.Rb?.CurrentFlightSet?.has(t))}getFeedExperienceType(t){return l.gR.isRuby?r.chB:t?r.HPc:r.jCw}}var P=n(78927);const R={experienceConfigSchema:{}}},76014:function(t,e,n){var i;n.d(e,{f:function(){return i}}),function(t){t.AccountInfoUnavailable="accountInfoUnavailable",t.UnsupportedSovereignty="unsupportedSovereignty",t.CnDomain="cnDomainUnsupported",t.OtherValidationError="otherValidationError"}(i||(i={}))},76166:function(t,e,n){n.d(e,{hv:function(){return h},GC:function(){return p},MV:function(){return f}});var i=n(37423);function r(t){const e=(0,i.cn)();return function(n,i){if(i||(i={}),!o(i,"Referer")){const t="string"==typeof n?n:n.url;!function(t,e,n,i){const r=(a[i]||a[s])(t,e);if(delete n.referrerPolicy,!r)return;n.headers=n.headers||{},n.headers.Referer=r}(e.url,t,i,i.referrerPolicy)}return o(i,"User-Agent")||function(t,e){t.headers=t.headers||{},t.headers["User-Agent"]=`${e} (via node-fetch)`}(i,e.userAgent),t(n,i)}}function o(t,e){return t.headers&&void 0!==t.headers[e]}const s="strict-origin-when-cross-origin",a={"no-referrer":(t,e)=>{},"no-referrer-when-downgrade":(t,e)=>c(t,e)?void 0:t.href,origin:(t,e)=>t.origin+"/","origin-when-cross-origin":(t,e)=>u(t,e)?t.href:t.origin+"/","same-origin":(t,e)=>u(t,e)?t.href:void 0,"strict-origin":(t,e)=>c(t,e)?void 0:t.origin+"/","strict-origin-when-cross-origin":(t,e)=>u(t,e)?t.href:a["strict-origin"](t,e),"unsafe-url":(t,e)=>t.href};function c(t,e){return"https:"===t.protocol&&e.startsWith("http:")}function u(t,e){return e.startsWith(t.origin+"/")}n(72494);let d;class l{constructor(){"undefined"!=typeof AbortController&&(this.controller=new AbortController)}abort(){return!!this.controller&&(this.controller.abort(),!0)}setAbortSignal(t){this.controller&&(t.signal=this.controller.signal)}}async function h(t,e,n,i,r,o,s=!1){r||(r=fetch);const a=()=>async function(t,e,n,i,r,o){r||(r=fetch),i||(i=new l),o=!1;let s=null,a=null;void 0===e?e=d:d>0&&(e=Math.min(e,d)),e>0&&(s=1e4,s=setTimeout(()=>{a=setTimeout(()=>{if(!i.abort())throw new Error(`Fetch for ${t} aborted due to timeout of ${e} ms. AbortController is not supported.`)},0)},e)),n||(n={method:"GET"}),n.signal||i.setAbortSignal(n),performance.now();let c,u=0;const h={};let f;const p=()=>{s&&clearTimeout(s),a&&clearTimeout(a)};return r(t,n).then(t=>(u=t.status,f=t.headers?.get("onewebservicelatency"),o&&(h.cluster=t.headers.get("x-fabric-cluster")||t.headers.get("ddd-debugid")?.split("|")?.[3],h.afd=t.headers.get("x-msedge-ref"),h.dddDebugId=t.headers.get("ddd-debugid"),h.wpoId=t.headers.get("x-wpo-activityid")),t)).catch(n=>{if(c=n,"AbortError"===n.name)throw new Error(`Fetch for ${t} aborted due to timeout of ${e} ms.`);throw new Error(n)}).then(t=>(p(),t),t=>{throw p(),t})}(t,e,n,i,r,o,s);return a()}function f(){return{abortToken:null,timeoutMs:900,fetchImpl:r(fetch)}}async function p(t,e,n){return n||(n=f()),h(t,n.timeoutMs,e,n.abortToken,n.fetchImpl,n.trackApiClusterInServer)}},76920:function(t,e,n){n.d(e,{Kv:function(){return m},Ld:function(){return g}});var i=n(65022),r=n(93468),o=n(89151),s=n(6092),a=n(67387),c=n(49084),u=n(85766),d=n(63418),l=n(86948),h=n(38796),f=n(5518),p=n(75391);function g(t){s.T3.AuthCookieName=function(t){let e=s.T3.AuthCookieName;if(t&&!(0,c.wQ)())e=t.isAAD?"al_app_anon":"app_anon";else if((0,c.FS)()||(0,c.wQ)())e="AAD"===(0,l.NP)()||t?.isAAD?"al_anon":"anon";else if((0,c.lp)()){e="AAD"===(0,u.eM)().accountType?"al_app_anon":"app_anon"}else e="anon";return e}(t),(0,h.eC)(s.T3.AuthCookieName),!(0,c.wQ)()&&(0,c.lp)()&&"AAD"===(0,u.eM)().accountType&&m()}async function m(t,e=!0,n=!0,s=!0){const c=s?(0,d.Ri)(a.j$):void 0,u=n?1e4:0;let l;if(!c||!e)return Promise.race([(0,o.dT)(),(0,f.Y_)(u).then(()=>l=!0)]).then(async e=>{l&&u>0&&(0,r.vV)(i.QlG,"Work Id call was made before TTVR marker was set"),(0,p.fL)(t,s)})}},76980:function(t,e,n){n.d(e,{HN:function(){return S},U8:function(){return g},Is:function(){return w},sd:function(){return y},Dl:function(){return v},g1:function(){return b},tW:function(){return C},BL:function(){return p},We:function(){return m}});var i=n(59983),r=n(6092),o=n(49084),s=n(74166),a=n(28828);const c=()=>{const t=(0,s.Ux)("lh",!0),e=t&&(0,a.B)(t),{login_hint:n}=e||{};return n&&e};var u=n(67387),d=n(31653),l=n(92261),h=n(18287),f=n(63418);function p(t){const e=encodeURIComponent(JSON.stringify(t||{}));(0,f.Ub)(i.qM,e,i.o8,r.T3.HostPage.topDomain,"/",!1,l.a.Strict),(0,o.g_)()}function g(t){if(t)return function(t){return t&&t.tenantId===d.nt}(t)?"MSA":"AAD"}async function m(t){let e;if(t){e=(await w()).find(e=>e.username===t)}else{const t=v();if(t){e=(await w()).find(e=>y(e)===t)}}return e}async function w(){const t=await(0,h.B3)();return await t.handleRedirectPromise(),t.getAllAccounts()}function y(t){return t&&t.idTokenClaims&&t.idTokenClaims[d.uP]}function v(){const t=(0,i.Dm)();return t&&t.login_hint}function b(){const t=c();return t&&t.login_hint}function S(){(0,f.Ub)(u.Zc,null,-1,r.T3.HostPage.topDomain,"/")}function C(t,e=1e3){let n=0;for(let e=0,i=t&&t.length;e<i;e++){n=(n<<5)-n+t.charCodeAt(e),n&=n}return n<0&&(n+=2147483647),n%e}},76991:function(t,e,n){var i;n.d(e,{e:function(){return i}}),function(t){t[t.domComplete=0]="domComplete",t[t.error=1]="error",t[t.initialized=2]="initialized",t[t.rendered=3]="rendered",t[t.visuallyReady=5]="visuallyReady",t[t.startLoading=6]="startLoading",t[t.mediaContentReady=7]="mediaContentReady"}(i||(i={}))},77120:function(t,e,n){n.d(e,{V_:function(){return R},y0:function(){return A}});var i=n(65022),r=n(93468),o=n(30817),s=n(34299),a=n(48309),c=n(77246),u=n(16091),d=n(17720),l=n(38467),h=n(89980),f=n(6092),p=n(12870),g=n(54761),m=n(41820),w=n(98793),y=n(48172),v=n(28006),b=n(7965),S=n(98216),C=n(62586),k=n(35849),T=n(90441),x=n(96851);const A={Request:"Wpo.Treatments.Request",Response:"Wpo.Treatments.Response",StoreInit:"Wpo.Treatments.StoreInit",Parsed:"Wpo.Treatments.Parsed",Stored:"Wpo.Treatments.Stored"},$="ssr-feed-data",I=Symbol();class P{constructor(){this.wpoOptimizationsReady=new Promise(t=>this.wpoOptimizationsResolver=t),this.wpoFeedDataCache=new l.E("WpoFeedDataCache"),this.enableEarlyMainFeedRequest=!1,this.savedPartResponses={feed:null,widgets:null,hero:null}}static getInstance(){return d.vv.get("__WpoServiceClient__",()=>new P)}onWPOFeedReady(t){this.wpoFeedDataCache.subscribe($,t)}setSSRInitialFeedResponse(t){this.wpoFeedDataCache.set($,t)}setSSRFirstSectionAdRequest(t){this.wpoFeedDataCache.set(I,t)}getSSRFirstSectionAdRequest(){return this.wpoFeedDataCache.get(I)}saveSSRPartResponse(t,e){this.savedPartResponses[e]=t;const n=this.savedPartResponses.widgets?.sections??this.savedPartResponses.hero?.sections??[],i=this.savedPartResponses.feed?.sections??[],r={...this.savedPartResponses.feed??this.savedPartResponses.widgets??this.savedPartResponses.hero,sections:[...n,...i]};this.setSSRInitialFeedResponse(r)}resetFeedDataCache(){this.wpoFeedDataCache.clear()}addWpoOptimizationDataToLocalStorage(t,e,n,r=!1,u=!1,d,l=!1,$,I){const P=(0,C.$)(e,n);if(this.optimizationDataReceived)return;if(setTimeout(()=>{window.dispatchEvent(new CustomEvent("wpoOptimizationAdded"))},0),!t||!t.optimizationItems)return S.YT.addOrUpdateTmplProperty("nopct","1"),void(d&&"wpo"===d.source&&this.removeWPOUserChoiceFromPSL());if(!t.optimizationItems.length)return this.logAppError(i.qcK,"WPO Optimization data is empty in feed response ",`isFocusedMode:${r}`),(0,h.Lg)().removeItem(P),void(d&&"wpo"===d.source&&this.removeWPOUserChoiceFromPSL());const R=(0,o.ZF)();R[A.StoreInit]=Math.round(performance.now());try{const e=this.parseOptimizationItems(t.optimizationItems),n={treatments:e};R[A.Parsed]=Math.round(performance.now()),(0,h.Lg)().setObject(P,n);const i=e.filter(t=>t?.type===g.Ar.eventGleam);S.YT.addOrUpdateTmplProperty("recEvt",i?.length?"1":"0"),R[A.Stored]=Math.round(performance.now()),this.optimizationDataReceived=!0;const r=e.filter(t=>(t?.type===g.Ar.topSites||t?.type===g.Ar.topsitesCollapse)&&t?.properties?.topSitesCollapsibleControlConfig);if(window.isSSREnabled&&null==d&&window.chrome.ntpSettingsPrivate.getPref(b.JW.layout,t=>{const e=r[0]?.properties?.topSitesCollapsibleControlConfig?.collapsibleControlIsDefaultCollapsed,n=r[0]?.properties?.topSitesCollapsibleControlConfig?.collapseForDefaultInformational,i=void 0===n||n&&2===t?.value;if(r?.length&&e&&i){const t={setting:m.K5.tscollapsed,source:"wpo",timestamp:(new Date).getTime(),value:m.Wl.WPO_BEFORE_CLOSE};w.Q.savePreferenceSetting(m.K5.tscollapsed,t),S.YT.addOrUpdateTmplProperty(m.K5.tscollapsed,`${t.value}|${t.source}|${t.timestamp}`)}}),"wpo"===d?.source&&0==r?.length&&this.removeWPOUserChoiceFromPSL(),window.isSSREnabled&&d?.value===m.Wl.WPO_CLOSED&&r?.[0]?.properties?.topSitesCollapsibleControlConfig?.expandForAllLayout){const t={setting:m.K5.tscollapsed,source:"addWpoOptimizationDataToLocalStorage",timestamp:(new Date).getTime(),value:m.Wl.WPO_BEFORE_OPEN};w.Q.savePreferenceSetting(m.K5.tscollapsed,t),S.YT.addOrUpdateTmplProperty(m.K5.tscollapsed,`${t.value}|${t.source}|${t.timestamp}`),window.addEventListener("beforeunload",()=>{(0,k.zP)(v.h$).onlyUpdateQuickLinksDisplaySetting(1)},{once:!0})}if(u){const t=e.filter(t=>t?.type===g.Ar.layoutPromotion&&"PageContentLayout"===t?.properties?.layoutType);if(t?.length&&t[0]?.properties){if(S.YT.addOrUpdateTmplProperty("layoutpromoreceived",t[0].properties.knobIdx??"0"),t[0].properties.coachMarkId==a.EM){const t=(0,k.zP)(v.h$);s.U.updateWPOLayoutPromotion.getActionSender(t).send(!0,"demotion"),S.YT.addOrUpdateTmplProperty("lydemotionCM","1")}if(t[0].properties.coachMarkId!==a.EM)if($){(0,k.zP)(v.h$).saveLayoutPromotionData(t)}else y.f.savePreferenceSetting(m.bJ.layoutPromotion,{...t[0].properties,clientReceivedTimestamp:(new Date).getTime(),usermuidWhenReceived:f.T3.UserId??"",requestIdWhenReceived:S.YT?.getRequestId?.()??"",isPrerenderWhenReceived:p.Rb?.IsPrerender??!1})}else y.f.savePreferenceSetting(m.bJ.layoutPromotion,null)}const o=e.filter(t=>t?.type===g.Ar.widget);o?.length&&o[0]?.properties&&(S.YT.addOrUpdateTmplProperty("widgetPromotionReceived",o[0]?.properties?.showWidgets),l&&(0,T.qj)(o[0]?.properties?.showWidgets));let C=0;try{const t=p.Rb?.ClientSettings?.browser?.version||"",e=parseInt(t,10);C=isNaN(e)?0:e}catch(t){C=0}let M;const _=C>=140;if(_){const t=e.filter(t=>t?.type===g.Ar.edgeSignal);t&&t.length&&t[0]?.properties&&t[0]?.properties?.nrtntpEngagementMostRecentTimestamp&&(M=t[0].properties.nrtntpEngagementMostRecentTimestamp)}const E=e.filter(t=>t?.type===g.Ar.wpoSignal),F=E?.length&&E[0]?.properties?.feedsEngagement;if(F&&S.YT.addOrUpdateTmplProperty(E[0]?.properties?.feedsEngagement?.tmpl),I&&((0,c.S)()||!window.isSSREnabled)&&window?.chrome?.ntpSettingsPrivate?.recordFeedEngagement){const t=F?E[0]?.properties?.feedsEngagement?.withEngagement30d??!1:null;null===t&&M&&S.YT.addOrUpdateTmplProperty("nowposig-engage-time",M.toString()),null!==t&&(0,x.GP)().then(()=>{_?window.chrome.ntpSettingsPrivate.recordFeedEngagement(t,M):window.chrome.ntpSettingsPrivate.recordFeedEngagement(t)})}}catch(e){const n=`Failed to store wpo response to LS.Error:${e}`,r=`WpoServiceResponse: ${JSON.stringify(t)}. key: ${P}`;this.logAppError(i.DdZ,n,r)}}storeEarlyWpoFeedData(t){this.wpoFeedDataCache.set("feed-ready",t)}getEarlyWpoFeedData(t){return new Promise(e=>{let n;const r=t=>{n&&clearTimeout(n),this.wpoFeedDataCache.unsubscribe("feed-ready",r),this.wpoFeedDataCache.delete("feed-ready"),e(t)};t&&(n=setTimeout(()=>{this.wpoFeedDataCache.unsubscribe("feed-ready",r),this.wpoFeedDataCache.delete("feed-ready");const n=`Getting early main feed timeout in ${t}ms`;this.logAppError(i.b5B,n),e(void 0)},t)),this.wpoFeedDataCache.subscribe("feed-ready",r)})}storeWpoOptimizationData(t){if(t)if(this.wpoOptimizations&&this.wpoOptimizations.length>0)this.wpoOptimizationsResolver();else{try{this.wpoOptimizations=this.parseOptimizationItems(t.pageContext&&t.pageContext.optimizationItems)}catch(e){const n=`Failed to store wpo response to Memory.Error:${e}`,r=`WpoServiceResponse: ${JSON.stringify(t)}.`;this.logAppError(i.KVr,n,r)}this.wpoOptimizationsResolver()}}getWpoOptimizationData(t){if(t){let e;const n=new Promise(n=>{e=setTimeout(()=>{S.YT.addOrUpdateTmplProperty("wpoPromoTimeout",t.toString()),n()},t)});return Promise.race([n,this.wpoOptimizationsReady]).then(()=>(clearTimeout(e),this.wpoOptimizations))}return this.wpoOptimizationsReady.then(()=>this.wpoOptimizations)}tryToGetWpoOptimizationData(){return this.wpoOptimizations}logAppError(t,e,n=""){S.YT.sendAppErrorEvent({...t,message:e,pb:{...t.pb,customMessage:n}})}parseOptimizationItems(t){if(!t||!t.length)return[];return t.map((t,e)=>{if(t.type&&t.type.trim().length)if(Object.values(g.Ar).includes(t.type)||this.logAppError(i.Yhr,`Unknown Type in WPO optimization items. Type: ${t.type}, Index: ${e}`),t.data){if(t.type&&t.data){let n;try{if(n=JSON.parse(t.data),"number"!=typeof n&&!Object.entries(n).length)return void this.logAppError(i.wzS,`Parsed WPO Optimization item but it is empty. Type: ${t.type}, Index: ${e}`)}catch(n){return void(0,r.c_)(n,i.q_v,`${n}. Type: ${t.type}, Index: ${e}`)}if(n)return{type:t.type,properties:n}}}else this.logAppError(i.vLE,`Unable to find data in WPO optimization item. Type: ${t.type}, Index: ${e}`);else this.logAppError(i._$C,`Type not found in WPO optimization items. Index: ${e}`)}).filter(Boolean)}isOptimizationDataReceived(){return this.optimizationDataReceived}removeWPOUserChoiceFromPSL(){w.Q.deleteKeyValueFromPSL(m.K5.tscollapsed)}}const R=(0,u.G)(P)},77195:function(t,e,n){n.d(e,{X4:function(){return s},ie:function(){return o},u5:function(){return a}});var i=n(17720),r=n(19330);const o=(0,i.$U)({[r.W.Publisher]:"pub",[r.W.Language]:"lang",[r.W.Market]:"market",[r.W.PageType]:"sales_page_type",[r.W.DeviceType]:"device_type",[r.W.ContentCategory]:"cat",[r.W.ContentSubcategory]:"subcat",[r.W.ContentTopic]:"cont_topic",[r.W.ProviderId]:"sales_provider_id",[r.W.GameTitle]:"game_title",[r.W.GameGenre]:"game_genre"});var s;!function(t){t.PlacementRegion="PlacementRegion",t.PlacementPosition="PlacementPosition"}(s||(s={}));const a=(0,i.$U)({[s.PlacementRegion]:"plcmnt_region",[s.PlacementPosition]:"sales_pos"})},77216:function(t,e,n){n.d(e,{X:function(){return i},x:function(){return o}});var i,r=n(88294);function o(t){try{const e=new URL(t).searchParams,n=e.get("expPerf"),r=e.get("expPerfSkip");if("all"==r)return{enablePerfTimeline:!1};if(!r&&!n)return{};const o={enablePerfTimeline:!0,uploadTrace:!1,sampleRate:1,uploadCriteria:{minimumTTVR:0}};if("all"===n)o.trackAllExp=!0,o.experiencesExcludedForPerf={};else if(n){const t=o.experiencesForPerf={};n.split(",").forEach(e=>t[e]=!0)}if(r){const t=o.experiencesExcludedForPerf={};r.split(",").forEach(e=>t[e]=!0)}"true"===e.get("expPerfMarks")&&(o.addPerformanceMarks=!0),"true"===e.get("expPerfTimings")&&(o.addPageTimings=!0);const s=parseInt(e.get("expPerfLevel"));return o.traceLevel=null!=i[s]?s:i.default,o}catch(t){return r.v.logError("Error parsing URL for detecting experience diagnostic switches: "+t),{}}}!function(t){t[t.default=0]="default",t[t.medium=1]="medium",t[t.high=2]="high"}(i||(i={}))},77246:function(t,e,n){function i(){return!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv)}n.d(e,{S:function(){return i}})},77255:function(t,e,n){n.d(e,{J:function(){return r}});var i=n(6727);class r{createPageViewPayload(t){if(!t)return;let e=t&&t.page&&t.page.url;try{const n=new URL(e),i=t&&t.page&&t.page.config;(8&i||2048&i)&&(n.searchParams.set("content","1"),e=n.href),t.locale&&t.locale.mkt&&(n.searchParams.set("mkt",t.locale.mkt),e=n.href)}catch{}return{rn:(0,i.Ln)(),c1:2,c2:3000001,cs_ucfr:1,c7:e,c8:t&&t.page&&t.page.content&&t.page.content.title,c9:t&&t.page&&t.page.referral,cs_fpid:t&&t.browser&&t.browser.muid,cs_fpit:"o",cs_fpdm:"*null",cs_fpdt:"*null"}}}},77328:function(t,e,n){n.d(e,{$Q:function(){return j}});var i=n(6092),r=n(5044),o=n(93468),s=n(65022),a=n(28006),c=n(83003),u=n(96592),d=n(67387),l=n(12870),h=n(19548),f=n(74326),p=n(57759),g=n(19993),m=n(14586),w=n(29252),y=n(98216),v=n(27261),b=n(86948),S=n(87432),C=n(77246);async function k(t,e){let n;_=performance.now();try{n=new Promise(async(n,i)=>{await T(t,e,0,n,i)})}catch(t){throw new Error(t)}return n}async function T(t,e,n,i,r){try{let n=null;if(n=await async function(t,e,n){return new Promise(async(i,r)=>{const o=setTimeout(()=>r(new Error(`WinShell Service Request Timed out after ${t} milliseconds!`)),t);try{i(await fetch(e,n)),clearTimeout(o)}catch(t){r(t),clearTimeout(o)}})}(A,t,e),!n.ok){if(!n.status)throw new Error("Falsy repsonse with no status code");const t=n.blob&&await n.blob();let e=`Response status code: ${n.status}`;throw t&&t.size&&(e+=`, response size: ${t.size}`),new Error(e)}i(n)}catch(a){if((0,C.S)()&&n<x){const o=3,s=parseFloat((Math.random()*(R-M)+M).toFixed(o)),a=.5,c=Math.random()<a?-1:1,u=Math.min($*Math.pow(P,n),I)+s*c,d=n+1;let l;l=n>0?t.replace(`&retryAttempt=${n}`,`&retryAttempt=${d}`):t+=`&retryAttempt=${d}`,setTimeout(()=>T(l,e,d,i,r),u)}else E=performance.now(),(0,o.vV)(s.$hk,"All retry attempts failed","Retry attempts failed for WinShellBackoffRetry.fetch",{url:t,retryAttempts:n,maxRetries:x,errorDetails:a.message,totalRetryLatency:E-_}),r(a)}}const x=3,A=1e4,$=100,I=2e3,P=2,R=1,M=25;let _=0,E=0;class F{constructor(t){this.treatmentQueryStringParam="Treatment",this.wpoitemsStringParam="wpoitems",this.cardContext=t}async fetch(t={}){const e=await this.getRequestInit(),{ocid:n,flightData:r,treatment:a,apiVersion:c="v1",scenario:p,feedCluster:g,pivotId:y,templateId:b,nextPageUrl:S,isConsumptionFeed:C,contentId:k}=t||{},T=(0,w.x5)(),x=t&&"shellv2"===t.contextSource,A=t&&"shell"===t.contextSource||x,$=A&&t.isXfeed;let I=`${c}/news/feed/windows/${b}`;I=A?this.buildShellRequest(t,I):this.buildWinWidgetsRequest(t,I),I=C?"v1/news/feed/pages/contextfeed":I;const P=new URLSearchParams((0,v.iA)()).get(m.OJ)?new URL(I,m.ki):(0,f.J7)(I),R=y&&"following"===y.toLowerCase();if(S){const e=new u.m(new URL(S).search);T>0&&e.set(w.ei,T.toString()),i.T3.SendFeedCallActivityIdInHeader||!i.T3.ActivityId||A||e.set("activityId",i.T3.ActivityId),A&&!e.get("scn")&&e.set("scn",d.CR),R&&t.feedId&&e.get("query")&&(0,o.vV)(s.kjK,"Windows Card Provider's following xfeed next page url has query QSP",void 0,{...s.kjK.pb,customMessage:`{ "nextPageUrl": "${S}", "feedID": "${t.feedId}" }`}),P.search=e.toString()}else{const t=[...await this.getCommonParams(n,r)];T>0&&t.push({key:w.ei,value:T.toString()}),t.forEach(t=>t.value&&P.searchParams.set(t.key,t.value)),a&&P.searchParams.set(this.treatmentQueryStringParam,a)}if(A){P.searchParams.set("caller","peregrine");const{column:e,wpoNote:n,requestContractVer:i,prong1Version:r}=t||{};R&&P.searchParams.set("wposchema","byregion"),e&&P.searchParams.set("column",e),n&&P.searchParams.set("wpoNote",n);const o=location.search||"",s="wpoitems";if(new RegExp(`[?&]${s}=`).test(o)){const t=new URLSearchParams(o),e=t&&t.get(s);e&&P.searchParams.set(s,e)}x&&P.searchParams.set("wv2","1"),[1,2,3,31,32].includes(i)&&P.searchParams.set("cv",`${i}`),[1,2].includes(r)&&P.searchParams.set("p1v",`${r}`)}if(C&&P.searchParams.set("ContentId",k),(t&&"winWidgets"===t.contextSource||$)&&t.feedId){const e=R&&!t.feedId.startsWith("Y_")?"ProviderId":"InterestIds";P.searchParams.set(e,t.feedId)}R&&(l.Rb.CurrentFlightSet.has("prg-idfc")?P.searchParams.set("idfc","true"):P.searchParams.set("iff","true"),t.feedId&&(P.searchParams.delete("query"),l.Rb.CurrentFlightSet.has("prg-pr2fol-time")&&(P.searchParams.set("ocid",m.tZ),P.searchParams.set("apikey",m.LI)))),g&&(P.searchParams.set("query","UserFre"),P.searchParams.set("entityids",g),P.searchParams.set("DisableTypeSerialization","true"),P.searchParams.set("wrapodata","false")),t&&t.count&&P.searchParams.set("$top",`${t.count}`);const M=P.searchParams.get(i.T3.OneServiceContentMarketQspKey);M&&P.searchParams.set("osLocale",M),i.T3.SendFeedCallActivityIdInHeader&&P.searchParams.delete("activityId");const _=h._3.getParamsWithItems(location.search);if(_){const e=_.find(t=>"idxExperienceTypeOverride"===t.key),n=_.find(t=>"idxContentTypeOverride"===t.key),i=_.find(t=>"idxTreatmentOverride"===t.key),r=_.find(t=>"idxWpoKnobidsOverride"===t.key),o=_.find(t=>"idxWpoEventRuleOverride"===t.key);if(e&&P.searchParams.set("Experience",e.value),n){const e=t.contentType?t.contentType:"article,video,slideshow",i=[...new Set(`${e},${n.value}`.split(","))];P.searchParams.set("contentType",i.join(","))}i&&P.searchParams.set(this.treatmentQueryStringParam,i.value),r&&P.searchParams.set(this.wpoitemsStringParam,`knobids:${r.value}`),o&&P.searchParams.set(this.wpoitemsStringParam,`byPassEventRule:${o.value}`)}p&&P.searchParams.set("scenario",p),P.searchParams.sort();const E={feedCluster:g,isFollowingPivot:R,isShellXfeed:$,isShell:A,nextPageUrl:S,request:t,requestParams:e,url:P};let F;if(A){const t=(i.T3.CurrentRequestTargetScope&&i.T3.CurrentRequestTargetScope.pageExperiments||[]).includes("prg-1sw-prg1retry"),n=decodeURIComponent(P.href),r=P.href;try{F=await this.get1SFeed(t,n,e,"WindowsCardProvider.fetch")}catch(n){let a;if(window.ShellFeedsApp){const t=window.ShellFeedsApp,e=await t.getQueryHeadersAsync();if(e){const t=e.MUID;if(t)try{const e=i.T3.StaticDomain.replace("assets.msn.","int.msn."),n=await fetch(`https://${e}/cdnhealth?user=${t}`);a={healthStatus:n.status,akamaiRequestID:n.headers["Akamai-Request-ID"]}}catch(t){a=t?t.toString():"Failed CDN health check"}}}(0,o.c_)(n,s.p_N,"Error while fetching OneService response","Initial call to assets failed",{winShellErrorDetails:a,responseStatus:F&&F.status});const c=r.replace("assets.msn.","api.msn.").replace("/service/v1/","/v1/"),u=decodeURIComponent(c);try{F=await this.get1SFeed(t,u,e,"WindowsCardProvider.apimsn.fetch")}catch(n){(0,o.c_)(n,s.p_N,"Error while fetching OneService response","Retry call to api.msn failed");const i=r.replace("assets.msn.","windows.msn."),a=decodeURIComponent(i);try{if(F=await this.get1SFeed(t,a,e,"WindowsCardProvider.windowsmsn.fetch"),!F||!F.ok)throw new Error("windows.msn call failed")}catch(n){(0,o.c_)(n,s.p_N,"Error while fetching OneService response","Retry call to windows.msn failed",{status:F.status,statusText:F.statusText||"",headers:F&&F.headers});const i=r.replace("assets.msn.","assets2.msn."),a=decodeURIComponent(i);try{F=await this.get1SFeed(t,a,e,"WindowsCardProvider.assets2.fetch")}catch(n){(0,o.c_)(n,s.p_N,"Error while fetching OneService response","Call to assets2 failed");const i=r.concat("&forcestatic=true"),a=decodeURIComponent(i);try{if(F=await this.get1SFeed(t,a,e,"WindowsCardProvider.forceFallback.fetch"),!F||!F.ok)throw new Error("Force fallback call failed")}catch(t){(0,o.c_)(t,s.p_N,"Error while fetching OneService response","Forced static call failed",{status:F.status,statusText:F.statusText||""})}}}}}}return await this.processResponse(E,F)}async processResponse(t,e){const{feedCluster:r,isFollowingPivot:o,isShellXfeed:a,isShell:c,nextPageUrl:u,request:l,requestParams:h,url:f}=t;let g;try{e?g=e:c||(g=await(0,p.w)(async()=>await fetch(decodeURIComponent(f.href),h),"WindowsCardProvider.fetch"));const{status:t,statusText:v}=g||{},b=o&&204===t&&!f.searchParams.has("skip");if(!(g&&g.ok||o))return void y.YT.sendAppErrorEvent({...s.$GJ,message:g?"OneService returned error response":"OneService response was null",pb:{...s.$GJ.pb,fetchNetworkResponse:{statusCode:t,statusText:v,activityId:i.T3.ActivityId,requestUrl:f.href,requestHeaders:JSON.stringify(h&&h.headers),xfeed:a?`feedID: ${l.feedId} is not valid with respect to locale and market`:"not XFeed"},responseHeaders:this.getResponseHeaders(g)}});if(204===g.status&&(c&&y.YT.sendAppErrorEvent({...s.KuI,message:"OneService returned empty content 204 response",pb:{...s.KuI.pb,fetchNetworkResponse:{statusCode:g.status,statusText:g.statusText,activityId:i.T3.ActivityId,requestUrl:f.href,requestHeaders:JSON.stringify(h&&h.headers)},responseHeaders:this.getResponseHeaders(g)}}),!b))return{cards:[],netStatus:204};let S,C,k;if(g.headers){if(C=g.headers.get("X-Statics-Fallback"),C){(0,w.uw)(C);const t={...s.QY0.pb,activityId:i.T3.ActivityId,debugId:g.serviceContext&&g.serviceContext.debugId||"missing",responseHeaders:this.getResponseHeaders(g),requestUrl:f.href};a&&(t.isXFeed=1),y.YT.sendAppErrorEvent({...s.QY0,pb:t,message:"Static fallback content received"})}const t=g.headers.get(d.pc.traceId);S=y.YT.addOrUpdateIdxId(t,!u)}const T=g&&(!g.ok||204===t||404===t);if(o&&(!g||T))if(c){k=await n.e("SignInData").then(n.t.bind(n,16761,19));f.pathname.includes(m.Se)&&window.dispatchEvent(new CustomEvent("showFallbackFeed"))}else k=await n.e("manga-carousel").then(n.t.bind(n,24330,19));else k=await g.json();if(r&&k){return{layoutTemplate:l&&l.count&&24===l.count?"ShellTwoColumn-14HalfCard-HalfTopstory":"ShellTwoColumn-Four1U",cards:k.subCards}}return"winWidgets"!==l.contextSource&&!a||!k.sections||l.useRawJson?{...k,traceIdIndex:S,isStatic:C}:k.sections[0]}catch(t){const e=(0,S.A)(h,"headers.Authorization");let n="";if(c)try{n=`Status code: ${(await fetch(`https://${i.T3.StaticDomain}/bundles/v1/windowsShell/latest/manifest.json`)).status}`}catch(t){n=t.toString()}y.YT.sendAppErrorEvent({...s.p_N,message:"Error while fetching OneService response",pb:{...s.p_N.pb,customMessage:`Error: ${t}`,fetchNetworkResponse:{activityId:i.T3.ActivityId,requestUrl:f.href,requestHeaders:JSON.stringify(e&&e.headers),statusCode:g&&g.status,statusText:g&&g.statusText},winShellErrorDetails:n}})}}async get1SFeed(t,e,n,i){return t?await k(e,n):await(0,p.w)(async()=>await fetch(e,n),i)}async getRequestInit(t={method:"GET"}){return t.credentials="include",t.headers=await g.WR.getOneServiceFeedCallHeaders(),t}async getCommonParams(t,e){return 2===await(0,b.XK)()?g.WR.getOneServiceParamsWithAuth(i.T3.UserId,t,!1,e):g.WR.getOneServiceParamsWithoutAuth(i.T3.UserId,t,!1,e)}getResponseHeaders(t){return t&&t.headers?JSON.stringify({"Akamai-Request-ID":t.headers.get("Akamai-Request-ID"),"Akamai-Server-IP":t.headers.get("Akamai-Server-IP"),"X-MSEdge-Ref":t.headers.get("X-MSEdge-Ref"),"X-StaticFallback-Reason":t.headers.get("X-StaticFallback-Reason")}):null}buildShellRequest(t,e){const{pivotId:n,isXfeed:i}=t||{};let{nextPageUrl:r}=t||{};if(i)if("following"===n){const n=t.feedId?m.Se:m.Yf;e=`${m.nm}${n}`,r&&r.includes(m.nF)&&(r="")}else t.feedId&&(e=`${m.nm}${m.nF}`);return e}buildWinWidgetsRequest(t,e){const{feedCluster:n,pivotId:i,isXfeed:r}=t||{};let{nextPageUrl:o}=t||{};if(r)if("Following"===i)if(t.feedId)e=`${m.nm}${m.Y9}`,y.YT.addOrUpdateTmplProperty("filtered-feed","1"),o&&(o.includes(m.$m)||o.includes(m.Xd)||!o.includes(t.feedId))&&(o="");else{const n="filteredChannels"===t.feedName||t.feedName===c.pL.DynamicFilteredChannel?m.Xd:m.$m;e=`${m.nm}${n}`,o?.includes(m.Y9)&&(o="")}else t.feedId&&(e=n?"news/feed":`${m.nm}${m.nF}`);return e}}var D=n(44383),O=n(69023),N=n(35849),L=n(17720),B=n(16091);const U="femFollowingUpdated",W="femRecommendedUpdated",V="showFallbackFeed",H="hideFallbackFeed";class z{constructor(){this.currentFeedId="",this.overrideFeedConfig=null,this.feedManager=null,this.channels=[],this.onChannelChange=null,this.prevChannelStoreFollows=[],this.isProng2=()=>i.T3.isWindowsDashboard,this.isWinHP=()=>"windows"===i.T3.AppType,this.isNTP=()=>"edgeChromium"===i.T3.AppType,this.isCanvasSupported=()=>this.isProng2()||this.isWinHP()||this.isNTP(),this.transformResponse=(t,e)=>{if(t){const n=t.regions?.filter(t=>"river"===t.region),i=n&&n.length&&n[0]&&n[0].sections,{type:r}=i?.[0]?.cards?.[0]||{};if(r===c.pL.ChannelFilterCard||r===c.pL.DynamicFilteredChannel||e&&r===c.pL.ChannelCarousel)return n?.[0]?.sections?.shift(),!0}return!1},this.fetchChannelFilter=async(t,e)=>{const n=!e?.fcl,i=await(this.isProng2()?this.fetchFromWindowsCardProvider(e):this.fetchFromWpoCardProvider(e,n));if(!i){const e=L.vv.get("OneServiceResponseDebugId");throw(0,o.vV)(s.A2U,`Failed to load filtered channels for ${t}.`,void 0,{...s.A2U.pb,debugId:e}),new Error}const r=this.getCardsFromResponse(i)[0];if(!r||r.type===c.pL.ChannelFilterCard||r.type===c.pL.DynamicFilteredChannel)return y.YT.addOrUpdateTmplProperty("numberOfFollowedChannels",r?.subCards?.length.toString()||"0"),r||{};r.type!==c.pL.ChannelCarousel&&(0,o.vV)(s.GNn,"The first card of filtered following channels response is not Channel Filter or Channel Carousel",`{ debugID: ${i.debugId}, nextPageUrl: ${i.nextPageUrl}, sections: ${JSON.stringify(i.sections)} }`)},this.fetchPublishers=async()=>{try{const t=await(this.publisherServiceClient?.getUserFollowedSources());if(t?.length)return t}catch(t){(0,o.vV)(s.yV,"Failed to fetch publisher metadata",`{${t}}`)}},this.fetchChannel=async({id:t})=>{const e={feedId:t};return this.isProng2()?this.fetchFromWindowsCardProvider(e):this.fetchFromWpoCardProvider(e)},this.mapChannel=(t,e)=>{const n=["InterestChannel","InterestFeed"].includes(t.type);return{id:n?t?.feed?.id:t?.provider?.id,imgSrc:t.images?.[0]?.url||"",title:n?t?.feed?.feedName:t?.provider?.name,isFollowing:!0,isTopic:n,index:e,providerProfileId:!n&&t.provider&&t.provider.profileId}},this.getCardsFromResponse=t=>{if(!t)return[];const e=t.sections?.filter(t=>"river"===t.region),n=e&&e.length?e:t.sections,{cards:i=[],subSections:r}=n&&n.length&&n[0]||{};return(r?r[0]?.cards:i)||[]},this.fetchFromWindowsCardProvider=(t={})=>{const e={contextSource:"winWidgets",count:12,feedId:"",isXfeed:!0,ocid:"winp2",useRawJson:!0,pivotId:"Following",...t};return(new F).fetch(e)},this.fetchFromWpoCardProvider=(t={},e=!0)=>{let n=(0,r.En)();i.T3.IsHeroNTP&&(n="msedgntp");const o={ocid:n,timeoutMs:2e3,feedName:"following",requestId:y.YT.getRequestId(),shouldUseNewWpoEndpoint:!0,wpoSchema:"byregion",...t};return new D.Oq({initialRequest:{timeoutMs:2e3}},!1).fetchFromWpoService(o,e)},this.resetChannelFeedId=()=>{this.currentFeedId=""},this.setChannelFeed=async t=>{if(t!==this.currentFeedId&&(t||this.currentFeedId))if(this.currentFeedId=t,this.overrideFeedConfig)this.overrideFeedConfig(e=>(e.riverSectionCardProviderConfig?.initialRequest&&(e.riverSectionCardProviderConfig.initialRequest.feedName="following",e.riverSectionCardProviderConfig.initialRequest.feedId=t,e.riverSectionCardProviderConfig.initialRequest.isXFeed=!0,e.riverSectionCardProviderConfig.initialRequest.timeoutMs=3e3),e));else if(this.feedManager){const e=this.isProng2()?"Following":"following",n=this.isProng2()?"winWidgets":"",i={isXFeed:!0,feedId:t,pivotId:e,contextSource:n};await this.feedManager.callRefreshRegionsData(i)}else this.onChannelChange&&this.onChannelChange(t)},this.setFeedConfigOverrider=t=>{this.overrideFeedConfig=t},this.setFeedManager=t=>{this.feedManager=t},this.setChannelCallback=t=>{this.onChannelChange=t},this.setChannels=t=>{this.channels=t,window.dispatchEvent(new CustomEvent(U))},this.setChannelsRecommendations=t=>{this.channels=t,window.dispatchEvent(new CustomEvent(W))},this.isProviderChannel=t=>this.channels.some(({id:e,isTopic:n})=>t===e&&!n),this.showFallbackFeed=()=>{window.dispatchEvent(new CustomEvent(V))},this.hideFallbackFeed=()=>{window.dispatchEvent(new CustomEvent(H))},this.isFeedFetching=()=>this.feedManager&&this.feedManager.isFeedFetching()}static getInstance(){return L.vv.get("__FollowingExperienceManager__",()=>new z)}initializeServiceClients(){this.topicsDataConnector||(this.topicsDataConnector=(0,N.zP)(a.YL)),this.publisherServiceClient||(this.publisherServiceClient=new O.PublisherServiceClient(window.fetch.bind(window),!1)),this.topicsDataConnector||(0,o.vV)(s.KH4,"Topic Data Connector is not defined in ChannelFilter experience.")}}const j=(0,B.G)(z)},77454:function(t,e,n){n.d(e,{BS:function(){return f},oW:function(){return p}});var i=n(46117),r=n(77246),o=n(65022),s=n(93468),a=n(63418),c=n(89980);const u="OptanonConsent",d="OptanonAlertBoxClosed",l="TcfConsentCheckResult";function h(t){const e=function(t){try{const e=t.split(".")[0];let n;if("function"==typeof atob){const t=e.replace(/_/g,"/").replace(/-/g,"+");n=atob(t)}else{if("function"!=typeof Buffer)return null;n=Buffer.from(e,"base64").toString("binary")}let i="";for(let t=0;t<n.length;t++){const e=n.charCodeAt(t).toString(2);i+="00000000".slice(0,8-e.length)+e}return i}catch(t){return null}}(t);if(!e)return null;if(2!==parseInt(e.slice(0,6),2))return null;if(e.length<176)return null;return"1111111111"===e.slice(152,162)}function f(){if(!(0,r.S)())return;const t=(0,c.Lg)(),e=t.getItem(l);if(e){return JSON.parse(e)}const n=(0,a.Ti)();if(n)try{if(!h(n)){const e=new Date(0).toUTCString();document.cookie=`${i.Ii}=;Domain=.msn.com;Path=/;Secure=true;SameSite=None;Expires=${e}`;(0,a.Ri)(u)&&(document.cookie=`${u}=;Domain=.msn.com;Path=/;Secure=true;SameSite=None;Expires=${e}`);(0,a.Ri)(d)&&(document.cookie=`${d}=;Domain=.msn.com;Path=/;Secure=true;SameSite=None;Expires=${e}`);const n={wasCleared:!0,shouldShowBanner:!0,cleanDate:Date.now()};return t.setItem(l,JSON.stringify(n)),n}return}catch(t){return void(0,s.vV)(o.AnY,"Failed to check and clear OneTrust cookie",t.message)}}function p(){if(!(0,r.S)())return;const t=(0,a.Ti)();if(!t)return;const e="ConsentCookieExpInUSLocaleFix",n=(0,c.Lg)();if(!(n.getItem(e)===t))try{const r=function(){const t=(0,a.Ti)();if(!t)return null;let e;try{const n=t.split(".")[0];if("function"==typeof atob){const t=n.replace(/_/g,"/").replace(/-/g,"+");e=atob(t)}else{if("function"!=typeof Buffer)return null;e=Buffer.from(n,"base64").toString("binary")}}catch(t){return null}let n="";for(let t=0;t<e.length;t++){const i=e.charCodeAt(t).toString(2);n+="00000000".slice(0,8-i.length)+i}if(2!==parseInt(n.slice(0,6),2))return null;const i=n.slice(6,42),r=100*parseInt(i,2);return new Date(r)}();if(r){const o=r.getTime(),s=new Date("2025-07-10T21:09:00-07:00").getTime(),c=new Date("2025-07-15T13:33:00-07:00").getTime();if(o>=s&&o<=c){const r=Math.floor(5*Math.random())+1,o=new Date(Date.now()+60*(24+r)*60*1e3);document.cookie=`${i.Ii}=${t};Domain=.msn.com;Path=/;Secure=true;SameSite=None;Expires=${o.toUTCString()}`;const s=(0,a.Ri)(u),c=(0,a.Ri)(d);s&&(document.cookie=`${u}=${s};Domain=.msn.com;Path=/;Secure=true;SameSite=None;Expires=${o.toUTCString()}`),c&&(document.cookie=`${d}=${c};Domain=.msn.com;Path=/;Secure=true;SameSite=None;Expires=${o.toUTCString()}`),n.setItem(e,t)}}}catch(t){(0,s.vV)(o.AnY,"Failed to fix TCF string in US locale",t.message)}}},77479:function(t,e,n){n.d(e,{p:function(){return r}});var i=n(68480);class r{}r.signedInStatus=new i.P("SignedInStatus"),r.signedInStatusConfirmed=new i.P("SignedInStatusConfirmed"),r.useEnterpriseCompliance=new i.P("UseEnterpriseCompliance"),r.updateLocation=new i.P("UpdateLocation")},78481:function(t,e,n){n.d(e,{lB:function(){return u},mK:function(){return a},y6:function(){return c}});var i=n(29194);const r={},o={};class s extends i.Yi{constructor(t){super(t),this.options=t,this.stickyClassApplied=!1,this.refreshSticky=()=>{const t=r[this.options.breakpointName];if(t<0)return;const e=scrollY>t;if(e!==this.stickyClassApplied){const t=this.options.stickyClassName;e?this.target.classList.add(t):this.target.classList.remove(t),this.stickyClassApplied=e}}}bind(t){this.target=t.targets[this.targetNodeId],this.refreshSticky();const{breakpointName:e}=this.options;let n=o[e];n||(n=new Set,o[e]=n),n.add(this),addEventListener("scroll",this.refreshSticky)}unbind(t){o[this.options.breakpointName].delete(this),removeEventListener("scroll",this.refreshSticky)}}function a(t){return new s(t)}function c(t,e){r[t]=e;const n=o[t];if(n)for(const t of n)t.refreshSticky()}function u(t){return r[t]}i.dg.define(s)},78606:function(t,e,n){n.d(e,{f:function(){return i}});const i=[0,656,980,1304]},78629:function(t,e,n){var i;n.d(e,{C1:function(){return s},IW:function(){return o},L2:function(){return r},Wb:function(){return a},rK:function(){return i}}),function(t){t.GLOBAL="GLOBAL",t.GCC_MODERATE="GCC_MODERATE"}(i||(i={}));const r="d7b530a4-7680-4c23-a8bf-c52c121d2e87",o="https://enterprisenews.microsoft.com",s="EnterpriseOneService",a=87},78927:function(t,e,n){n.d(e,{n:function(){return s}});var i=n(24678),r=n(65444),o=n(96851);class s{reduce(t,e){if(!t)return{visuallyReadyDependencies:new Map};if(!e)return t;let n=!1;const s={...t};return n=n||i.n.handleAction(e,r.y.addVisuallyReadyDependencies,t=>{t&&t.forEach(t=>{t&&!s.visuallyReadyDependencies.has(t)&&s.visuallyReadyDependencies.set(t,{experienceType:t,visuallyReady:!1})})}),n=n||i.n.handleAction(e,r.y.markVisuallyReadyComplete,(t,e)=>{if(t){const e=s.visuallyReadyDependencies.get(t);e&&(e.visuallyReady=!0,"GridViewFeed"!==t&&"WaterfallViewFeed"!==t||(0,o.OM)())}}),n?s:t}}},78981:function(t,e,n){n.d(e,{P:function(){return r}});var i=n(23429);function r(){return new Promise(t=>i.L.enqueue(()=>t()))}},79426:function(t,e,n){n.d(e,{e:function(){return i}});class i{constructor(t){this.promise=new Promise((t,e)=>{this.resolver=t,this.reject=e}),t&&setTimeout(()=>this.set(void 0),t)}set(t){this.resolver(t),this.valueSet=!0}setError(t){this.reject(t)}wasSet(){return this.valueSet}getResultAsync(){return this.promise}}},79742:function(t,e,n){var i;n.d(e,{z:function(){return i}}),function(t){t[t.Unknown=0]="Unknown",t[t.Required=1]="Required",t[t.NotRequired=2]="NotRequired"}(i||(i={}))},79765:function(t,e,n){var i;n.d(e,{j:function(){return i}}),function(t){t.image="image",t.provider="provider",t.socialBar="socialBar"}(i||(i={}))},79805:function(t,e,n){n.d(e,{$q:function(){return T},E5:function(){return b},Qn:function(){return S},qm:function(){return k}});var i=n(63418),r=n(74688),o=n(92261),s=n(98216);const a="ntp.user_nurturing",c="user_muid",u=6,d=0,l=new Date("2010-01-01Z"),h=192,f=16383,p=240,g=192,m=63,w="MUID";let y=!1,v=[];function b(){const t=l,e=new Date;let n=-1;return(e.getDay()!=t.getDay()||e.getMonth()!=t.getMonth()||e.getFullYear()!=t.getFullYear())&&(n=Math.floor(Math.abs(e.getTime()-t.getTime())/864e5),n>f)?0:n}function S(t){let e=!0;if(32!=t?.length)return{isMuidValid:!1};const n=new Uint8Array(function(t){const e=[],n=[6,4,2,0,10,8,14,12,16,18,20,22,24,26,28,30];for(const i of n){const n=t.slice(i,i+2);e.push(parseInt(n,16))}return new Uint8Array(e)}(t));if(n.forEach(t=>{isNaN(t)&&(e=!1)}),!e)return{isMuidValid:!1};if(function(t){[t[0],t[3]]=[t[3],t[0]],[t[1],t[2]]=[t[2],t[1]],[t[4],t[5]]=[t[5],t[4]],[t[6],t[7]]=[t[7],t[6]]}(n),0!=(n[0]&h))return{isMuidValid:!1};if((n[6]&p)!=u<<4)return{isMuidValid:!1};if((n[8]&g)!=d<<6)return{isMuidValid:!1};const i=new Uint8Array(n);!function(t){!function(t){const e=t.length>>1;for(let n=0;n<e;n++)t[n+e]^=t[n]}(t)}(i);const r=function(t){const e=new Uint8Array([0]);for(let n=0;n<t.length-1;n++)e[0]+=t[n];return e[0]}(i);if(r!=i[15])return{isMuidValid:!1};let o=0;o|=(i[10]&m)<<8,o|=i[11];b();return o>b()+1?{isMuidValid:!1}:{dateCreated:o,isMuidValid:e}}function C(t,e){const n=new Date;n.setTime(n.getTime()+31536e6);return`MUID=${t};expires=${n.toUTCString()};domain=${e};path=/;SameSite=${o.a.None};Secure;priority=${r.P.High};`}async function k(t="",e=A,n=x,r=w){const o=Date.now();window.muidActionRecord={isMuidReverted:!1,muidRevertedFrom:"",signInPerfCost:0,perfCost:0,isRefreshMuidError:!1};try{window.muidActionRecord.signInPerfCost=Date.now()-o;const n=(0,i.ab)()||"",a=await e(r,t=>t&&S(t)?.isMuidValid,t);a&&n&&a!==n&&s.YT.addOrUpdateTmplProperty("muidch",`${a}:${n}`),n&&a!==n&&x(r,n),window.muidActionRecord.perfCost=Date.now()-o}catch(t){window.muidActionRecord.isRefreshMuidError=!0}}async function T(t="",e=A,n=x,r=w){const o=Date.now();window.muidActionRecord={isMuidReverted:!1,muidRevertedFrom:"",signInPerfCost:0,perfCost:0,isRefreshMuidError:!1};try{if("psl"===t&&await Promise.race([new Promise(t=>{window?.chrome?.authPrivate?.getPrimaryAccountInfo?window.chrome.authPrivate.getPrimaryAccountInfo(e=>{t(!e||""===e.account_id)}):t(!0)}),new Promise(t=>{setTimeout(()=>{t(!0)},50)})]))return;window.muidActionRecord.signInPerfCost=Date.now()-o;const s=(0,i.ab)()||"",a=await e(r,t=>t&&S(t)?.isMuidValid,t);a!==s&&function(t,e,n,i){if(t){const r=window.location.hostname.toLowerCase().endsWith(".cn")?".msn.cn":".msn.com",{isMuidValid:o,dateCreated:s}=S(t),{isMuidValid:a,dateCreated:c}=S(e);if(!o&&a)return void n(i,e);if(o&&!a)return window.document.cookie=C(t,r),window.muidActionRecord.isMuidReverted=!0,void(window.muidActionRecord.muidRevertedFrom=e);if(void 0!==s&&void 0!==c)s<=c?(window.document.cookie=C(t,r),window.muidActionRecord.isMuidReverted=!0,window.muidActionRecord.muidRevertedFrom=e):n(i,e)}else n(i,e)}(a,s,n,r),window.muidActionRecord.perfCost=Date.now()-o}catch(t){window.muidActionRecord.isRefreshMuidError=!0}}const x=(t,e)=>{window.localStorage.setItem(t,e),y&&function(t,e,n){const i=t.findIndex(t=>t?.key===e);if(i>-1)t[i]={...t[i],value:n};else{const i={key:e,value:n};t.push(i)}window.chrome.ntpSettingsPrivate.setPref(a,t)}(v,c,e)},A=async(t,e,n)=>{y=!!window.chrome?.ntpSettingsPrivate?.getPref&&"psl"===n;let i=window.localStorage.getItem(t)||"";if(!i&&y){v=await function(t){return new Promise((e,n)=>{window.chrome.ntpSettingsPrivate.getPref(t,function(t){t&&t.value?e(t.value):e([])})})}(a);const t=(v||[]).find(t=>t.key===c);i=t?.value||""}return i}},80004:function(t,e,n){n.d(e,{IZ:function(){return c},Sv:function(){return i},V1:function(){return a},mt:function(){return s}});var i,r,o=n(6092);function s(t){return t?[{isDarkMode:!0,hexColor:r.imgDark},{isDarkMode:!1,hexColor:r.imgLight}]:[{isDarkMode:!0,hexColor:r.noImgDark},{isDarkMode:!1,hexColor:r.noImgLight}]}function a(t){return t.enableAnimatedShowMoreBtn?"animated":t.enableFilledIconOnHover?"fillediconhover":t.noBackPlateOnRest?"nobackplate":"default"}function c(t){return`https://www.msn.com/${o.T3.CurrentMarket}/community/channel/${t}`}!function(t){t.default="default",t.condensed="condensed",t.infoPane="infoPane",t.infoPane1x3y="infoPane1x3y",t.infoPaneSplitVertical="infoPaneSplitVertical",t.infoPaneSplitHorizontal="infoPaneSplitHorizontal"}(i||(i={})),function(t){t.imgLight="#F5F5F5",t.imgDark="#2E2E2E",t.noImgLight="#DEDEDE",t.noImgDark="#222"}(r||(r={}))},80247:function(t,e,n){n.d(e,{HB:function(){return A},Kz:function(){return x},kP:function(){return T},U1:function(){return I},i8:function(){return P}});var i=n(15098),r=n(51673),o=n(98763),s=n(77246),a=n(14012);const c=/^winp(\d)/i;function u(t){if(!(0,s.S)())return;const{referrer:e}=document;if(e){if(e===location.href)return"self";const t=function(t){try{return new URL(t)}catch{return}}(e);if(t){const{host:e,pathname:n}=t,{host:i,pathname:r}=window.location;let o,s;if(s=e.match(/^([a-z]+)\.msn\.(com|cn)$/)){const[,t]=s;if("ntp"===t)return"edge-hp";if("www"===t){let t;if(!n||"/"===n)return"msn-hp";if(t=n.match(/^\/[a-z]{2}-[a-z]{2}(\/feed)?\/?$/i))return t[1]?"win-hp":"msn-hp";if(n.match(/\/(ar|ss|vi)-[A-Za-z0-9]+$/))return"msn-views"}return e===i&&d(n)===d(r)?"same-seg1-seg2":"msn-other"}if(o=e.match(/\.(bing|google|yahoo)\.com$/))return"search-engine"}}else{const{ocid:e}=t;let n;if(e&&(n=e.match(c)))return`prong-${n[1]}`}return"unknown"}function d(t){const e=t&&t.match(/^\/([^/]+(\/[^/]+)?)?/);return e&&e[0]}var l=n(63608),h=n(65022),f=n(30817),p=n(93468),g=n(51518);const m=(0,o.MV)(),w=(0,o.MV)(),y=(0,o.MV)(),v=(0,o.QW)(),b=null,S=(0,o.Xe)(),C=(0,o.bP)(),k=(0,o.pV)(()=>new Promise(t=>C.set(t)));function T(t,e,n){const{pivots:o,manualPivots:s}=t||{},d={pivotsFinalized:k.get()};if(!(t&&(o&&o.length||s&&s.length)&&e&&n))return d;const l=(0,f.Tm)()||{},h=function(t){if(t){const{cpu:e}=t;if(e>=1&&e<=4)return"1-4";if(e>=6&&e<=8)return"6-8";if(e>=10)return"10+"}}(l),p=(0,i.L)(()=>u(n)),m=(0,i.L)(()=>function(t){const{ocid:e}=t;return e&&("windirect"===e||e.match(c))?"winfeed":"default"}(n)),w=(0,i.L)(()=>function(){let t,e=0,n=0;const i=/\/(vendors|microsoft|experience|common)\./,r=performance.getEntriesByType("resource");for(const o of r)if("script"===o.initiatorType&&(t=o.name.match(i))&&((0,a.Lx)(o)?e++:n++,e+n>=4))break;return 4===e?"warm":4===n?"cold":n+e===4?"partial":void 0}());D("audienceMode",t=>(0,r.eG)({audienceMode:t},n)),D("browser",t=>(0,r.Bu)({browser:t},n)),D("deviceFormFactor",t=>(0,r.xW)({deviceFormFactor:t},n)),D("displayLocale",t=>(0,r.vk)({locale:t},n,!0)),D("domain",t=>(0,r.Hy)({domain:t},n)),D("experimentId",t=>(0,r.SN)({experimentId:t},n)),D("locale",t=>(0,r.vk)({locale:t},n,!1)),D("ocid",t=>(0,r.Ui)({ocid:t},n)),D("os",t=>(0,r.HB)({os:t},n)),D("platform",t=>(0,r.QQ)({platform:t},n)),D("referrer",t=>t===p()),D("ocidGroup",t=>t===m()),D("network",t=>t===l.networkSpeed),D("cpu",t=>t===l.cpu),D("cpuGroup",t=>t===h),D("memory",t=>t===l.memory),D("coreJSCache",t=>t===w());const{pcsInfo:y,bundleInfo:v}=e.ClientSettings;return D("env",t=>(0,r.c$)(t,y&&y.env)),D("buildAlias",t=>(0,r.c$)(t,v&&v.alias)),F("pageType",(t,e)=>(0,r._P)({pageType:e},{pageType:t})),F("pageProduct",r.c$),F("pageName",r.c$),P("preRender",!!e.IsPrerender),S.set(function(t){const e=[],n=[],{pivots:i,manualPivots:r,_sampleRate:o}=t,s=(t,e)=>{t&&t.forEach(t=>{t&&(0,g.E)(t._sampleRate||o)&&e(t)})},a=t=>{for(const{key:e,matcher:n}of _(t))n||O(e)};return s(i,t=>{a(t);const n={config:t},i=$(n);(i||i===b)&&e.push(n)}),s(r,t=>{a(t),n.push(t)}),{defaultPivots:e,manualPivotConfigs:n}}(t)),M(),d}function x(){return!!S.get()?.defaultPivots.some(t=>t.success||t.success===b)}function A(){const t=S.get();if(!t)return[];const e=[];for(const n of t.defaultPivots)$(n)&&e.push(E(n.config));return v.size&&(0,p.vV)(h.Bgb,"Missing pivot field values",[...v.getObj()].toString()),e}function $(t){let{success:e}=t;if(null!=e)return e;e=!0;for(const{key:n,value:i,matcher:r}of _(t.config)){const t=r&&r.matchFn(i);if(t===b)e=b,v.add(n);else if(!t){e=!1;break}}return t.success=e}function I(t,e){y.set(t,e),R(t)}function P(t,e){null!=e&&(w.set(t,e),R(t))}function R(t){S.get()&&v.delete(t)&&M()}function M(){const t=S.get();if(t&&v.size<=0){for(const e of t.defaultPivots)$(e);C.call()}}function*_(t){for(const e in t)if((0,l.Y)(e)){const n=m.get(e);yield{key:e,value:t[e],matcher:n}}}function E(t){const e=(0,l.y)(t);return{key:e,key64:btoa(e)}}function F(t,e){D(t,n=>{const i=y.get(t);return i==b?b:e(i,n)})}function D(t,e){N(t,()=>e)}function O(t){N(t,()=>function(t){return e=>{const n=w.get(t);return n==b?b:n===e}}(t))}function N(t,e){m.get(t)||m.set(t,{matchFn:e()})}},80607:function(t,e,n){n.d(e,{K:function(){return i}});const i=["prg-wpo-ss","prg-dr-infopanec","prg-title-2","prg-trending","prg-trendingc","prg-ad-ctav2","prg-ad-sh-v1","prg-ad-sh-v1-c","prg-ad-sh-v3","prg-ad-sh-v4","prg-ad-sh-v3v4-c","prg-ad-hover","prg-ad-hover-c","prg-ad-combo","prg-ad-combo2","prg-ad-combo-c","prg-ad-shortg","prg-ad-shortgc"]},80924:function(t,e,n){n.d(e,{$L:function(){return r},Ax:function(){return c},e4:function(){return i},gH:function(){return o},kJ:function(){return a}});const i=78,r=50;let o;const s=[];function a(t){s.push(t)}function c(t){if(t!==o){o=t;for(const e of s)e(t)}}},81349:function(t,e,n){n.d(e,{VE:function(){return i}});function i(){return!0===window.__peregrine_litePVSent}(new Date).getTime()},81618:function(t,e,n){n.d(e,{K:function(){return f},b:function(){return h}});var i=n(30071),r=n(65022),o=n(93468),s=n(89151),a=n(84080),c=n(98216),u=n(29231),d=n(79426),l=n(77246);function h(t,e){let n,i=e,r=(0,a.C)(performance.now());const o=()=>{const e=(0,a.C)(performance.now());i-=e-r,i<=0?t():(r=e,requestAnimationFrame(()=>{n=window.setTimeout(o,i)}))};return requestAnimationFrame(()=>{n=window.setTimeout(o,i)}),()=>{clearTimeout(n)}}async function f(t){if(!(0,l.S)())return;const e=new d.e;t=t||{};let n=!1;async function a(n){h?.(),t.skipContentViewInit||(c.YT.config.autoCaptureContentView=!0,c.YT.observeElementTree(document));const s=!!t.pageLoadEventsAvailableCallback&&!t.pageLoadEventsAvailableCallback();s||t.skipContentViewInit||c.YT.scheduleContentViewEvent(u.ym.Load);const{contentViewTimeoutOverride:a,onBeforeNotifyCallback:d,reportEntityMetrics:l,maxValidTTVR:f}=t;a&&c.YT.setContentViewTimeout(a);const p=window.performance?.getEntriesByType("visibility-state").find(t=>"hidden"===t.name);if(f&&!p){const t=n.find(t=>"TTVR"===t[0]),e=t?.[1];null!=e&&("number"!=typeof e||isNaN(e)||e<0||e>f)&&(t[1]=void 0,(0,o.vV)(r.m6M,`Invalid TTVR: ${e}. Expected a number between 0 and ${f}.`,void 0,{ttvr:e}))}(0,i.nX)(n,{onAfterPageTimingsUpdated:d&&(()=>{d(n)}),disableLoadTimeEvent:s,reportEntityMetrics:l}),e.set()}let h;const f=window.setTimeout(()=>{n=!0,(0,i.je)(t=>a(t),s.Ci.Primary,t.incompleteVisualDependencyCallback)},t.timeoutOverride||2e4);return h=()=>window.clearTimeout(f),(0,s.kJ)().then(t=>{n||a(t)}),await e.getResultAsync()}},81760:function(t,e,n){n.d(e,{t:function(){return s}});var i=n(16091),r=n(17720);class o{constructor(){this.metadataStore={}}static getInstance(){return r.vv.get("__AdPageMetadataHubInstance__",()=>new o)}setMetadata(t,e){this.metadataStore[t]=e}setMetadatas(t){for(const e in t)this.metadataStore[e]=t[e]}getMetadata(t){return this.metadataStore[t]}setRulesOverride(t){this.rulesOverride=t}getRulesOverride(){return this.rulesOverride}}const s=(0,i.G)(o)},82238:function(t,e,n){n.d(e,{it:function(){return C},bO:function(){return k},ez:function(){return T},Uk:function(){return w},WO:function(){return f},yg:function(){return m},Kl:function(){return l},Qc:function(){return p},Oq:function(){return g}});var i=n(8092),r=n(85623),o=n(23768),s=n(16414),a=n(28006),c=n(37805),u=n(41917);const d={filter:(t,e)=>t.filter(t=>e in t)};function l(){return c.V.getInstance().rootReducer.connector(a.BO)}function h(t){const e=l();if(!e)return;const n=e.getCurrentState().perExperienceMilestones,i=n&&n.get(t);let r;return i&&(r=i.perInstanceMilestones.get(s.D)),r}function f(t){const e=h(t);if(!e||function(t){let e;switch(t.loadAfter.eventType){case i.R$.pageVisuallyReady:e=function(){const t=l();if(!t)return!1;const{pageCompleteTiming:e}=t.getCurrentState();return Boolean(e&&e.endTime!==s.o)}();break;case i.R$.aboveTheFoldVisuallyReady:e=y();break;case i.R$.belowTheFoldTransitionStart:e=v();break;case i.R$.hydrationComplete:e=S();break;default:e=(0,u.E)(t.loadAfter.experienceType,t.loadAfter.eventType)}return e}(e))return null;if(e.shouldLoad&&e.loadAfter){return{deferralType:b(e.loadAfter),shouldResolve:e.shouldLoad}}return null}function p(){return l()?y()?Promise.resolve():new Promise(t=>{o.m.updateAboveTheFoldVisuallyReady.registerObserver(e=>{t()})}):Promise.resolve()}function g(){return l()?v()?Promise.resolve():new Promise(t=>{o.m.updateBelowTheFoldTransitionStart.registerObserver(e=>{t()})}):Promise.resolve()}function m(t){const e=h(t);if(!e||function(t){let e;switch(t.renderAfter.eventType){case i.R$.aboveTheFoldVisuallyReady:e=y();break;case i.R$.belowTheFoldTransitionStart:e=v();break;case i.R$.hydrationComplete:e=S();break;default:e=(0,u.E)(t.loadAfter.experienceType,t.renderAfter.eventType)}return e}(e))return null;if(e.shouldRender&&e.renderAfter){return{deferralType:b(e.renderAfter),shouldResolve:e.shouldRender}}return null}async function w(t){const e=l();if(!e)return;const n=e.getCurrentState().plugins;if(!n||0===n.length)return;const i=d.filter(n,t);for(const e of i)void 0!==e[t]&&await e[t].call(e)}function y(){const t=l();if(!t)return!1;const{aboveTheFoldVisuallyReady:e}=t.getCurrentState();return Boolean(e&&e.endTime!==s.o)}function v(){const t=l();return!!t&&t.getCurrentState().belowTheFoldTransitionStart}function b(t){return t.eventType in i.Qr?r.y.CustomEventBasedDeferral:r.y.StandardEventBasedDeferral}function S(){const t=l();return!!t&&t.getCurrentState().hydrationComplete}function C(t,e,n,i){return{deferralInfo:t,experienceType:e,experienceGroup:n,experienceInstance:i}}function k(t,e,n,i){return{experienceType:t,currentState:e,experienceGroup:n,experienceInstance:i}}function T(t,e,n,i,r){return{experienceType:t,experienceGroup:e,experienceInstance:n,startTime:i,endTime:r}}},82286:function(t,e,n){n.d(e,{A:function(){return d}});const i=["/ads-prebid.js","/istripper.js","/javascript/fropo.js","/nb/f_ls.js","/prebid-add.js","/prebid-ads/adsensebase.js","/prebid-article-ad-ad-300x250.js","/reclama/ads.js","/safu/safu.js","/wp-content/plugins/wp-banners/js/wp-banners.js","/zlk/zlk.js"],r=["/adex.js","/adgpt.js","/ados.js","/ads/stickyLb.js","/ane-popup-banner/ane-popup-banner.js","/ane-preroll/preroll.js","/arcads.js","/awe2.js","/clever_ads.js","/cnads.js","/dfp/dc.js","/doublepimp2.js","/eureka/eureka.js","/exopopunderdesktop.js","/expop.js","/fload.js","/fro_lo.js","/frontend_loader.js","/gpt.min.js","/invoke-2.js","/js/m/i-def.js","/js/youmuffpu.js","/js3caf.js","/kampyle.js","/keyade.js","/lib/ad.js","/markpop.js","/moatsdk.min.js","/nugg.min.js","/nwm-fcn.min.js","/nwm-pw2.min.js","/p8network.js","/popu.js","/popup2.js","/popup3.js","/punder.js","/pustrck.js","/scripts/chatur.js","/soralink.js","/suv4.js","/taboola_ads.js","/tardisrocinante/austin.js","/utep_ad.js","/weborama.js","/wp-content/plugins/bhcb/lock.js","/xpopup.js","/_adverts.js","/_rebid.js","/cmbdv2.js","/push-skin/skin.min.js","/pop2.js","/banger.js","/detroitchicago/anaheim.js","/detroitchicago/boise.js","/detroitchicago/houston.js","/detroitchicago/memphis.js","/detroitchicago/minneapolis.js","/detroitchicago/raleigh.js","/detroitchicago/rochester.js","/detroitchicago/tampa.js","/_js/prbd_6.19.0.js","/prebid14.js","/prebid_ver.js","/pubfig.js","/pubfig.min.js","/_prebid.js","/~Prebid.js","/datomata.widget.js","/abtest_ab.js","/adb.min.js","/adblock-relief.js","/blockblock/blockblock.jquery.js","/fuckadb.js"],o=["/ane-popup-banner/ane-popup-banner.js","/arcads.js","/fro_lo.js","/nwm-pw2.min.js","/popup2.js","/popup3.js","/tardisrocinante/austin.js","/push-skin/skin.min.js","/detroitchicago/anaheim.js","/detroitchicago/boise.js","/detroitchicago/houston.js","/detroitchicago/memphis.js","/detroitchicago/minneapolis.js","/detroitchicago/raleigh.js","/detroitchicago/rochester.js","/detroitchicago/tampa.js","/_prebid.js","/blockblock/blockblock.jquery.js"];var s=n(94831),a=n(6092),c=n(12870);class u{Impacts(){const t=this.GetConfig();return new Promise(function(e,n){const i=[this.CheckLoadStatus(t.EasyList),this.CheckLoadStatus(t.UboSpecial),this.CheckLoadStatus(t.Param)];Promise.all(i).then(t=>{e(t[0]||t[1]||t[2])}).catch(t=>{n(t)})}.bind(this))}CheckLoadStatus(t){const e=document.createElement("script");e.src=t.urls,document.body.appendChild(e);return(async(t,e)=>{const n=new Promise((e,n)=>{setTimeout(e,t,!1)});return Promise.race([e,n])})(500,new Promise(function(n,i){e.onload=function(){document.getElementById(t.id)?n(!1):n(!0)},e.onerror=function(){n(!0)}}))}GetConfig(){const t=`${(0,a.rA)().StaticsUrl}latest/adboxes`,e=c.Rb.CurrentFlightSet.has("prg-ad-dispadb-t")?this.Sample(o):this.Sample(r),n=this.Sample(i),s=this.Sample(r);return{UboSpecial:{urls:t+"/ubo"+n,id:btoa(n)},EasyList:{urls:t+"/egb"+e,id:btoa(e)},Param:{urls:t+"/general.js?"+s,id:btoa(s)}}}Sample(t){return t[Math.floor(Math.random()*t.length)]}}var d=new class{constructor(){this.adbTime=0,this.getAdbStatus=()=>(this.hasAdbStatus||(this.adbStatus=this.checkAdbStatus(),this.hasAdbStatus=!0),this.adbStatus),this.getAdbLoggedTime=()=>{const t=s.A.get("AlgoRes");return t&&"ABD=V=0"!=t&&(this.adbTime=Number(t.split("=")[2])),this.adbTime},this.executeDetector=async()=>{const t=new u,e=await t.Impacts();this.setCookie(e)},this.appendAdbStatusToUrl=t=>{if(!t||0===t.length||!this.getAdbStatus())return t;const e=new URL(t),n=e.searchParams.get("rlink");if(!n)return t;const i=decodeURIComponent(n);if(!(i.includes("www.bing.com/aclick?ld=")||i.includes("www.bing.com/ac?ld=")||i.includes("www.bing.com/ck?ld=")||i.includes("www.bing.com/ack?ld=")||i.includes("www.bing.com/clk?ld=")||i.includes("www.bing.com/aclk?ld=")||i.includes("www.bing.com/click?ld=")))return t;const r=n.concat("&adb=1");return e.searchParams.set("rlink",r),e.toString()},this.checkAdbStatus=()=>{const t=s.A.get("AlgoRes");return!(!t||"ABD=V=0"===t)},this.setCookie=t=>{if(t){const t=(new Date).getTime();s.A.set("AlgoRes",`ABD=V=${t}`,{expires:30})}else s.A.set("AlgoRes","ABD=V=0",{expires:30})}}}},82609:function(t,e,n){n.r(e),n.d(e,{AdLabelType:function(){return _.UM},BlockedDomainAndTitles:function(){return _.jw},BlockedHosts:function(){return _.MC},CurrentTopSitesEdgeNextWCTemplate:function(){return Ee},DragDropType:function(){return _.oy},GroupPolicySettings:function(){return _.pV},TileSource:function(){return _.U9},ToolingInfo:function(){return On},TopSitesClassNameConstants:function(){return _.mk},TopSitesDataHelper:function(){return Be},TopSitesEdgeNextWC:function(){return Ze},TopSitesEdgeNextWCInlineStyles:function(){return Fn},TopSitesEdgeNextWCStyles:function(){return Dn},TopSitesEdgeNextWCTemplate:function(){return Fe},TopSitesEdgeNextWCWithCarouselStyles:function(){return En},TopSitesEdgeNextWCWithJSDependencyStyles:function(){return Pn},TopSitesElementConstants:function(){return _.JC},TopSitesNextStyles:function(){return In},TopSitesResponsiveStyles:function(){return $n},addDialogHeight:function(){return _.j6},addDialogWithSubSectionHeight:function(){return _.wA},blockedDomainsPair:function(){return _.QH},carouselColsPerSlideMap:function(){return _.A},carouselTilesxColxRowsMap:function(){return _.Ho},carouselTopSiteListTemplate:function(){return Me},closeButtonSvg:function(){return xe},contextMenuWidth:function(){return _.bL},defaultMaxTileForFirstRow:function(){return _.tU},defaultMaxTileForSixteenTopSites:function(){return _.Mb},defaultMaxTileForThreeRowsTopSites:function(){return _.LF},defaultMaxTileForTwentyTopSites:function(){return _.rq},defaultMaxTiles:function(){return _.j5},defaultOverrideIconsList:function(){return _.sT},defaultTopSiteIcon:function(){return _.Jx},dialogWidth:function(){return _.p$},displayPinIconTopSitesBindingSource:function(){return Pe},edgeExpTopSites:function(){return _.OF},editDialogHeight:function(){return _.uR},feeds3T1SearchBoxWidthTilesxColxRowsMap:function(){return _.Li},feeds3T1SearchBoxWidthWithNotificationMiniCardTilesxColxRowsMap:function(){return _.lu},googleExpTopSites:function(){return _.$v},m365CopilotIcon:function(){return _.Tj},mockedVPTestTopSites:function(){return _.$1},normalTopSiteListTemplate:function(){return _e},notificationToastDefaultDisplayMs:function(){return _.QV},pinToastDefaultDisplayMs:function(){return _._B},pinToastTemplate:function(){return $e},privacyUrl:function(){return _.Gi},ruby2RowsTilesxColxRowsMap:function(){return _.YC},rubyTilesxColxRowsMap:function(){return _.Bq},tileDialogMargin:function(){return _.Fp},titleOverrides:function(){return _.W3},topSiteAddDialogTemplate:function(){return ke},topSiteEditDialogTemplate:function(){return Te},topSiteShell:function(){return _.Np},topSiteTileHeight:function(){return _.g9},topSiteTileWidth:function(){return _.nZ},topSitesBindingSource:function(){return Ie},topSitesCollapsedStorageKey:function(){return _.x4},topSitesDragDropStorageKey:function(){return _.fe},topSitesDragDropUnpinStorageKey:function(){return _.ve},topSitesUndoToastMessageMargin:function(){return _.gy},topSitesUnpinnedStorageKey:function(){return _.Ze},undoToastTemplate:function(){return Ae},validQueryParameterPrefix:function(){return _.IQ}});var i=n(9848),r=n(37180);var o=n(28996),s=n(17469),a=n(56911),c=n(85593),u=n(7965),d=n(71967),l=n(28611),h=n(6092),f=n(36090),p=n(89980),g=n(12870),m=n(56018),w=n(9120),y=n(19548),v=n(88296),b=n(27942),S=n(79426),C=n(18750),k=n(28006),T=n(84855);const x=t=>`<img src="${(0,h.rA)().StaticsUrl}latest/fluent-icons/${t}.svg" aria-hidden="true" />`,A=x("delete_20_regular"),$=x("edit_20_regular"),I=x("eye_off_16_regular"),P=x("pin_16_regular"),R=x("pin_16_filled"),M=x("tray_item_add_20_regular");var _=n(50091),E=n(11367),F=n(56085),D=n(7469),O=n(65022),N=n(30817),L=n(89151),B=n(93468),U=n(11372),W=n(87518);const V="curated_topsite",H="user_topsite",z="frequent_topsite",j="promotedcurated_topsite",q="promotedcurated_topsite_sponsored",G="wpopromoted_topsite",J="curatedleadgen_topsite",Q="autoappend_topsite",K="tile",X="url",Y="context_menu",Z="topsite_remove_toast",tt="remove",et="undoremove",nt="close",it="cancel",rt="rename",ot="save",st="suggestedlink",at="edit_dialog",ct="add_dialog",ut="topsiteaddtile",dt="topsite",lt="turnonpreview",ht="turnoffpreview",ft="topsitePinToTaskBar",pt="unpin",gt="pin",mt="action_menu",wt="carousel",yt="nextflipperclick",vt="preflipperclick",bt="name_input",St="url_input";var Ct;!function(t){t.tsn="tsn",t.moreOption="More Options",t.remove="Remove",t.undoRemove="Undo Remove",t.close="Close",t.rename="Rename",t.save="Save",t.cancel="Cancel",t.addSite="Add a site",t.add="Add",t.show="Show",t.suggestedLink="Add a suggested link",t.turnOnPreview="Turn On Preview",t.turnOffPreview="Turn Off Preview",t.container="Container",t.unpin="Unpin",t.pin="Pin",t.topsiteTaskbarpin="TopSite Pin to TaskBar",t.ActionMenu="Action Menu",t.Impression="Impression",t.carouselClick="Carousel click",t.inputName="Click name input",t.inputUrl="Click URL input"}(Ct||(Ct={}));const kt="tsu";const Tt=t=>{let e,n=!1;switch(t.tileSource){case 4:case 3:e=H;break;case-5:e=V,n=!0;break;case-6:e=j,n=!0;break;case-7:e=q,n=!0;break;case-4:e=G,n=!0;break;case-8:e=J,n=!0;break;case 2:e=Q,n=!0;break;default:e=z}return{tileSourcePrefix:e,isCuratedOrPromoted:n}};var xt=n(60815),At=n(38493),$t=n(11566),It=n(87405),Pt=n(70487),Rt=n(16611),Mt=n(15003),_t=n(27597),Et=n(31157),Ft=n(31086),Dt=n(98216),Ot=n(40956),Nt=n(85490),Lt=n(96950),Bt=n(91640),Ut=n(60402),Wt=n(39957),Vt=n(63563),Ht=n.n(Vt),zt=n(97269),jt=n(33973),qt=n(63746),Gt=n(68619),Jt=n(52205),Qt=n(52374),Kt=n.n(Qt),Xt=n(1542);zt.S,jt.x,Gt.a,Xt.s,qt.MZ;const Yt=Lt.qy`<span class="badge">${t=>t.badge.children}</span>`,Zt=Lt.qy`<fluent-button class="end-button" appearance="stealth" title="${t=>t.contextMenuLabel}" aria-label="${t=>t.contextMenuLabel}" aria-expanded="${(t,e)=>e.parent.isActionMenuOpen}" role="button" @click=${(t,e)=>e.parent.toggleActionMenu&&e.parent.toggleActionMenu(t,e.event)} data-t="${t=>t.toggleActionMenuButtonTelemetryTag}" icon-only>${Lt.qy.partial(Ht())}</fluent-button>`,te=Lt.qy`<div class="image-container"><img src="${t=>t.faviconUrl}" /></div>`,ee=(Lt.qy`<div class="top-site-title"><span class="top-site-title-text">${t=>t.title}</span>${(0,Bt.z)(t=>t.badge,Yt)}</div>`,Lt.qy`<a class="control topsite-ruby-link" aria-label="${t=>t.title}" title="${t=>t.title}" href="${(t,e)=>e.parent.getTopSiteTemplateUrl(t)}" data-t="${t=>t.anchorTelemetryTag}" target="${(t,e)=>e.parent.config.enableOpenInNewTab?e.parent.linkTarget:void 0}" @focus="${(t,e)=>e.parent.handleTopSiteLinkFocus()}">${te}</a>`),ne=Lt.qy`<a class="control topsite-ruby-link" aria-label="${t=>t.title}" title="${t=>t.title}" href="${(t,e)=>e.parent.getTopSiteTemplateUrl(t)}" data-t="${t=>t.anchorTelemetryTag}" @click=${(t,e)=>e.parent.preventClickOnTopSite(e.event)} @focus="${(t,e)=>e.parent.handleTopSiteLinkFocus()}">${te}</a>`,ie=Lt.qy`<div class="top-site-ruby" aria-label="${t=>t.title}" title="${t=>t.title}" data-t="${t=>t.contentViewTelemetryTag}" @mouseenter="${(t,e)=>e.parent.handleTopSiteMouseEnter()}" @click="${(t,e)=>e.parent.logTileActivatedClick(t)}" @auxclick="${(t,e)=>e.parent.logTileActivatedClick(t)}">${(0,Bt.z)(t=>t.disableHref,ne,ee)}<div class="site-name ${(t,e)=>e.parent.config.enableSiteTitleLargerFont?"larger-font":""}"><span>${t=>t.title}</span></div>${(0,Bt.z)((t,e)=>e.parent.canLoadHoverElements&&e.parent.renderTopSiteStartAndEnd,Lt.qy`<span class="end"><div class="top-site-next-g">${Zt}</div></span>`)}</div>`,re=Lt.qy`<div class="top-site-ruby add-placeholder drag-locked"><div class="image-container"><a class="control" href="#" @click=${(t,e)=>t.onAddTopSiteClick(e.event)} data-t="${t=>t.addTopSiteButtonTelemetryTag}" aria-label="${(t,e)=>e.parent.strings.ariaLabel_addTile}" title="${(t,e)=>e.parent.strings.ariaLabel_addTile}"><svg width="24" height="24" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M12 5.625V6.375H6.375V12H5.625V6.375H0V5.625H5.625V0H6.375V5.625H12Z" /></svg></a></div></div>`,oe=Lt.qy`<ruby-topsites-dialog mode="add" id="topSiteAddDialog" class="ruby-top-sites-dialog" ${(0,Ut.K)("topSitesAddDialogRef")} cancelText="${t=>t.topSiteAddDialog.cancelText}" headerTitle="${t=>t.topSiteAddDialog.headerTitle}" saveText="${t=>t.topSiteAddDialog.saveText}" closeText="${t=>t.topSiteAddDialog.closeText}" :nameInputData="${t=>t.topSiteAddDialog.nameInputBox}" :urlInputData="${t=>t.topSiteAddDialog.urlInputBox}" :validator = "${t=>t.topSiteAddDialog.validator}" :newOrUpdatedTopSite="${t=>t.topSiteAddDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${t=>t.topSiteAddDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${t=>t.topSiteAddDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${t=>t.topSiteAddDialog.closeButtonTelemetryTag}" :nameInputTelemetryTag="${t=>t.topSiteAddDialog.nameInputTelemetryTag}" :urlInputTelemetryTag="${t=>t.topSiteAddDialog.urlInputTelemetryTag}" @focus="${(t,e)=>t.topSiteAddDialog.addInputListener(e.event)}" @close="${(t,e)=>t.topSiteAddDialog.onClose(e.event)}" @save="${(t,e)=>t.topSiteAddDialog.saveHandler(e.event)}" style="${t=>t.topSiteAddDialogContainerPosition}"></ruby-topsites-dialog>`,se=Lt.qy`<ruby-topsites-dialog mode="edit" id="topSiteEditDialog" class="ruby-top-sites-dialog" ${(0,Ut.K)("topSitesEditDialogRef")} cancelText="${t=>t.topSiteEditDialog.cancelText}" headerTitle="${t=>t.topSiteEditDialog.headerTitle}" saveText="${t=>t.topSiteEditDialog.saveText}" closeText="${t=>t.topSiteEditDialog.closeText}" :nameInputData="${t=>t.topSiteEditDialog.nameInputBox}" :newOrUpdatedTopSite="${t=>t.topSiteEditDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${t=>t.topSiteEditDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${t=>t.topSiteEditDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${t=>t.topSiteEditDialog.closeButtonTelemetryTag}" :nameInputTelemetryTag="${t=>t.topSiteEditDialog.nameInputTelemetryTag}" :urlInputTelemetryTag="${t=>t.topSiteEditDialog.urlInputTelemetryTag}" @focus="${(t,e)=>t.topSiteEditDialog.addInputListener(e.event)}" @close="${(t,e)=>t.topSiteEditDialog.onClose(e.event)}" @save="${(t,e)=>t.topSiteEditDialog.saveHandler(e.event)}" style="${t=>t.topSiteEditDialogContainerPosition}"></ruby-topsites-dialog>`,ae=Lt.qy`<svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M6.84961 6L12 11.1504L11.1504 12L6 6.84961L0.849609 12L0 11.1504L5.15039 6L0 0.849609L0.849609 0L6 5.15039L11.1504 0L12 0.849609L6.84961 6Z"/></svg>`,ce=Lt.qy`<msn-toast id="undo-toast">${(0,Wt.ux)(t=>t.undoToast.removedText,Lt.qy`<span>${t=>t}</span>`)}<fluent-button ${(0,Ut.K)("undoButton")} appearance="lightweight" slot="actions" class="toast-navigation-button" title=${t=>t.undoToast.undoButtonLabel} @click=${(t,e)=>t.undoToast.undoTopSiteHandler(e.event)} data-t="${t=>t.undoToast.undoButtonTelemetryTag}">${t=>t.undoToast.undoButtonLabel}</fluent-button><fluent-button apperance="stealth" slot="close-button" class="toast-close-button" title=${t=>t.undoToast.closeButtonLabel} @click=${(t,e)=>t.undoToast.closeHandler(e.event)} data-t="${t=>t.undoToast.closeButtonTelemetryTag}">${ae}</fluent-button></msn-toast>`,ue=Lt.qy`<div class="top-sites ${t=>t.twoRowSitesClassName}" role="status"><div id=${_.JC.topSitesId} class="sites ${t=>t.sitesClassName} ${t=>t.topSitesClassName}" data-t="${t=>t.topSiteCommonTelemetryTag}" ${(0,Ut.K)("topSitesContainer")}>${Lt.qy`${(0,Wt.ux)(t=>t.topSites,ie)}`} ${Lt.qy`${(0,Wt.ux)(t=>t.topSitesPlaceHolders,re)}`}</div></div>`,de=Lt.qy`<div class="root ruby-top-sites ${t=>t.extraAddedSitesClassName} ${t=>t.className}  ${t=>t.moveUpward?"move-upward":""}" id="${_.JC.topSitesClassSelector}" ${(0,Ut.K)("topSitesRoot")}>${ue}</div><div ${(0,Ut.K)("dialogRoot")}>${(0,Bt.z)(t=>t.isAddDialogOpen,oe)} ${(0,Bt.z)(t=>t.topSiteAddedSuccessfully,Lt.qy`<div class="top-site-add-success" aria-live="polite">${t=>t.lastAddedTopSite} added successfully</div>`)} ${(0,Bt.z)(t=>t.isEditDialogOpen,se)} ${(0,Bt.z)(t=>t.isActionMenuOpen,Lt.qy`<div data-t=${t=>t.topsiteItemContainerTelemetry()}><msn-actions-menu id="actions-menu" :referrerButton=${t=>t.activeContextMenuButtonElement} class="ruby-long-width-menu" :menuItems=${t=>t.actionsMenuProps?.menuItems} ${(0,Ut.K)("topSiteActionsMenu")} @dismiss-menu=${t=>t.isActionMenuOpen=!1} :isGlyphUrlsPicture=${!0} data-t=${t=>t.actionsMenuTelemetry()}></msn-actions-menu></div>`)}<div ${(0,Ut.K)("toastContainer")} class="toast-root">${(0,Bt.z)(t=>"undo"===t.currentToastTag,ce)}</div></div>`;var le=n(45089),he=n.n(le);zt.S,jt.x,Gt.a,Jt.N,qt.MZ;const fe=Lt.qy`<span class="badge">${t=>t.badge.children}</span>`,pe=Lt.qy` ${t=>"topSiteAdLabelSmall"!==t.adLabelType?Lt.qy`<span class="dot-separator">  </span>`:null}<msn-native-ad-ad-label class="${t=>"topSiteAdLabelSmall"===t.adLabelType?"ad-link-label top-site-ad-label":"ad-link-label"}" type="${t=>t.adLabelType}" tel-metadata="${t=>t.anchorTelemetryTag}" privacy-url=${t=>_.Gi}></msn-native-ad-ad-label>`,ge=(t,e)=>{const n=[];return n.push("top-site-f3v1b"),n.push("top-site-s2ts"),n.join(" ")},me=Lt.qy`<fluent-button class="start-button" appearance="stealth" aria-lable="${t=>t.pinLabel}" role="button" data-t="${t=>t.pinActionButtonTelemetryTag}" icon-only>${Lt.qy` ${(0,Bt.z)(t=>1===t.dragDropType,Lt.qy`${Lt.qy.partial(Kt())}`)} `}</fluent-button>`,we=Lt.qy`<fluent-button class="end-button" appearance="stealth" title="${t=>t.contextMenuLabel}" aria-label="${t=>t.contextMenuLabel}" role="button" @click=${(t,e)=>e.parent.toggleActionMenu&&e.parent.toggleActionMenu(t,e.event)} data-t="${t=>t.toggleActionMenuButtonTelemetryTag}" icon-only>${Lt.qy.partial(Ht())}</fluent-button>`,ye=Lt.qy`<div class="top-site-title"><span class="top-site-title-text">${t=>t.title}</span>${(0,Bt.z)(t=>t.adLabelType&&t.isSponsored&&2!==t.tileSource,pe)} ${(0,Bt.z)(t=>t.badge,fe)}</div>`,ve=Lt.qy`<a class="control" href="${(t,e)=>e.parent.getTopSiteTemplateUrl(t)}" data-t="${t=>t.anchorTelemetryTag}" target="${(t,e)=>e.parent.config.enableOpenInNewTab?e.parent.linkTarget:void 0}" @focus="${(t,e)=>e.parent.handleTopSiteLinkFocus()}">${ye}</a>`,be=Lt.qy`<a class="control" href="${(t,e)=>e.parent.getTopSiteTemplateUrl(t)}" data-t="${t=>t.anchorTelemetryTag}" @click=${(t,e)=>e.parent.preventClickOnTopSite(e.event)} @focus="${(t,e)=>e.parent.handleTopSiteLinkFocus()}">${ye}</a>`,Se=Lt.qy`<div title="${t=>t.title}" aria-label="${t=>t.title}" class="top-site-next small-top-sites pill-top-site pinned-top-site ${(t,e)=>e.parent.config.backgroundOpacity?`tstb-${e.parent.config.backgroundOpacity}`:""} ${(t,e)=>e.parent.config.enableCircleShadeIcon?"tscsi":""} ${ge} ${(t,e)=>e.parent.topSitesClassName}" href="${(t,e)=>e.parent.getTopSiteTemplateUrl(t)}" data-t="${t=>t.contentViewTelemetryTag}" @mouseenter="${(t,e)=>e.parent.handleTopSiteMouseEnter(e.event.currentTarget,t.url)}">${(0,Bt.z)((t,e)=>e.parent.canLoadHoverElements&&(e.parent.renderTopSiteStartAndEnd&&1===t.dragDropType||t.promote),Lt.qy`<span class="start"><div class="top-site-next-g">${me}</div></span>`)}<div class="content-container ${(t,e)=>e.parent.topSitesClassName}" @click="${(t,e)=>e.parent.logTileActivatedClick(t)}" @auxclick="${(t,e)=>e.parent.logTileActivatedClick(t)}"><div class="image-container"><div class="image"><img src="${t=>t.faviconUrl}" /></div></div><div class="title-container">${(0,Bt.z)(t=>t.disableHref,be,ve)}</div></div>${(0,Bt.z)((t,e)=>e.parent.canLoadHoverElements&&e.parent.renderTopSiteStartAndEnd,Lt.qy`<span class="end"><div class="top-site-next-g">${we}</div></span>`)}</div>`,Ce=Lt.qy`<div class="top-site-next small-top-sites pill-top-site drag-locked add-placeholder ${(t,e)=>e.parent.config.backgroundOpacity?`tstb-${e.parent.config.backgroundOpacity}`:""} ${(t,e)=>e.parent.config.enableCircleShadeIcon?"tscsi":""} ${ge} ${(t,e)=>e.parent.topSitesClassName}"><div class="content-container ${(t,e)=>e.parent.topSitesClassName}"><div class="image-container"><div class="image new-add-image"><svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M12 5.625V6.375H6.375V12H5.625V6.375H0V5.625H5.625V0H6.375V5.625H12Z" /></svg></div></div><div class="title-container"><a class="control" href="#" @click=${(t,e)=>t.onAddTopSiteClick(e.event)} data-t="${t=>t.addTopSiteButtonTelemetryTag}" aria-label="${(t,e)=>e.parent.strings.ariaLabel_addTile}" title="${(t,e)=>e.parent.strings.ariaLabel_addTile}"><div class="top-site-title"><span class="top-site-title-text">${(t,e)=>e.parent.getAddShortcutTitle()}</span></div></a></div></div></div>`,ke=Lt.qy`<msn-top-site-dialog id="topSiteAddDialog" ${(0,Ut.K)("topSitesAddDialogRef")} cancelText="${t=>t.topSiteAddDialog.cancelText}" headerTitle="${t=>t.topSiteAddDialog.headerTitle}" saveText="${t=>t.topSiteAddDialog.saveText}" closeText="${t=>t.topSiteAddDialog.closeText}" :nameInputData="${t=>t.topSiteAddDialog.nameInputBox}" :urlInputData="${t=>t.topSiteAddDialog.urlInputBox}" :newOrUpdatedTopSite="${t=>t.topSiteAddDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${t=>t.topSiteAddDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${t=>t.topSiteAddDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${t=>t.topSiteAddDialog.closeButtonTelemetryTag}" :nameInputTelemetryTag="${t=>t.topSiteAddDialog.nameInputTelemetryTag}" :urlInputTelemetryTag="${t=>t.topSiteAddDialog.urlInputTelemetryTag}" @focus="${(t,e)=>t.topSiteAddDialog.addInputListener(e.event)}" @close="${(t,e)=>t.topSiteAddDialog.onClose(e.event)}" @save="${(t,e)=>t.topSiteAddDialog.saveHandler(e.event)}" style="${t=>t.topSiteAddDialogContainerPosition}">${(0,Bt.z)(t=>t.config.suggestedTopSiteList&&t.config.suggestedTopSiteList.length>0,Lt.qy`<div slot="subSection"><h3 class="suggestion-title">${t=>t.strings.addDialogSubHeading}</h3><div class="suggestion-body">${(0,Wt.ux)(t=>t.config.suggestedTopSiteList,Lt.qy`<div tabIndex="0" class="suggested-top-site"><div class="top-site-next" href="${t=>t.url}" title="${t=>t.title}" aria-label="${t=>t.title}" tabIndex="-1" @click=${(t,e)=>e.parent.topSiteAddDialog.saveHandler&&e.parent.topSiteAddDialog.saveHandler(e.event,t)} @keydown=${(t,e)=>e.parent.topSiteAddDialog.saveHandler&&e.parent.topSiteAddDialog.saveHandler(e.event,t)}><div class="content-container"><div class="image"><img src="${t=>(0,c.VG)(t.faviconId)}" alt="${t=>t.title}" /></div><div class="title-container"><div class="control" data-t="${t=>t.suggestedLinkTelemetryTag}"><div class="top-site-title"><span class="top-site-title-text">${t=>t.title}</span>${(0,Bt.z)(t=>t.adLabelType&&t.isSponsored,pe)} ${(0,Bt.z)(t=>t.badge,fe)}</div></div></div></div></div></div>`)}</div></div>`)}</msn-top-site-dialog>`,Te=Lt.qy`<msn-top-site-dialog id="topSiteEditDialog" ${(0,Ut.K)("topSitesEditDialogRef")} cancelText="${t=>t.topSiteEditDialog.cancelText}" headerTitle="${t=>t.topSiteEditDialog.headerTitle}" saveText="${t=>t.topSiteEditDialog.saveText}" closeText="${t=>t.topSiteEditDialog.closeText}" :nameInputData="${t=>t.topSiteEditDialog.nameInputBox}" :newOrUpdatedTopSite="${t=>t.topSiteEditDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${t=>t.topSiteEditDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${t=>t.topSiteEditDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${t=>t.topSiteEditDialog.closeButtonTelemetryTag}" :nameInputTelemetryTag="${t=>t.topSiteEditDialog.nameInputTelemetryTag}" :urlInputTelemetryTag="${t=>t.topSiteEditDialog.urlInputTelemetryTag}" @focus="${(t,e)=>t.topSiteEditDialog.addInputListener(e.event)}" @close="${(t,e)=>t.topSiteEditDialog.onClose(e.event)}" @save="${(t,e)=>t.topSiteEditDialog.saveHandler(e.event)}" style="${t=>t.topSiteEditDialogContainerPosition}"></msn-top-site-dialog>`,xe=Lt.qy`<svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M6.84961 6L12 11.1504L11.1504 12L6 6.84961L0.849609 12L0 11.1504L5.15039 6L0 0.849609L0.849609 0L6 5.15039L11.1504 0L12 0.849609L6.84961 6Z"/></svg>`,Ae=Lt.qy`<msn-toast id="undo-toast">${(0,Wt.ux)(t=>t.undoToast.removedText,Lt.qy`<span>${t=>t}</span>`)}<fluent-button ${(0,Ut.K)("undoButton")} appearance="stealth" slot="actions" class="toast-navigation-button" title=${t=>t.undoToast.undoButtonLabel} @click=${(t,e)=>t.undoToast.undoTopSiteHandler(e.event)} data-t="${t=>t.undoToast.undoButtonTelemetryTag}">${t=>t.undoToast.undoButtonLabel}</fluent-button><fluent-button appearance="stealth" slot="close-button" class="toast-close-button" title=${t=>t.undoToast.closeButtonLabel} @click=${(t,e)=>t.undoToast.closeHandler(e.event)} data-t="${t=>t.undoToast.closeButtonTelemetryTag}">${xe}</fluent-button></msn-toast>`,$e=Lt.qy`<msn-toast id="pin-toast">${(0,Wt.ux)(t=>t.pinToast.pinText,Lt.qy`<span>${t=>t}</span>`)}<fluent-button appearance="stealth" slot="close-button" class="toast-close-button" title=${t=>t.pinToast.closeButtonLabel} @click=${(t,e)=>t.pinToast.closeHandler(e.event)} data-t="${t=>t.pinToast.closeButtonTelemetryTag}">${xe}</fluent-button></msn-toast>`,Ie=t=>t.topSites,Pe=t=>t.topSites.map(t=>({...t,displayPinIcon:!0})),Re=Lt.qy`<div class="fliper">${Lt.qy.partial(he())}</div>`;const Me=Lt.qy`<msft-stripe speed="3600" part="msft-stripe" ${(0,Ut.K)("ref_stripe")} class="${t=>`${t.enableQuickBrief?"strip-with-quick-brief":""}${t.config.enableShowFlipperOpacity?"strip-with-opacity-flipper":""}`}"><div slot="previous-flipper">${Lt.qy`<div class="pre-fliper" role="button" @click="${t=>t.onFlipperClick(!1)}" aria-label=${t=>t.carouselProps?.preFlipperText} title=${t=>t.carouselProps?.preFlipperText} data-t="${t=>t.carouselProps?.clickCarouselPreButtonTag}">${Re}</div>`}</div><div slot="next-flipper">${Lt.qy`<div class="next-fliper" role="button" @click="${t=>t.onFlipperClick(!0)}" aria-label=${t=>t.carouselProps?.nextFlipperText} title=${t=>t.carouselProps?.nextFlipperText} data-t="${t=>t.carouselProps?.clickCarouselNextButtonTag}">${Re}</div>`}</div><div class="top-sites ${t=>t.twoRowSitesClassName}" role="status"><div id=${_.JC.topSitesId} class="sites ${t=>t.sitesClassName} ${t=>t.topSitesClassName}" data-t="${t=>t.topSiteCommonTelemetryTag}" ${(0,Ut.K)("topSitesContainer")}>${Lt.qy`${(0,Wt.ux)(Ie,Se)}`}</div></div></msft-stripe><div class="top-sites ${t=>t.twoRowSitesClassName}"><div class="sites">${Lt.qy`${(0,Wt.ux)(t=>t.topSitesPlaceHolders,Ce)}`}</div></div>`,_e=Lt.qy`<div class="top-sites ${t=>t.twoRowSitesClassName}" role="status"><div id=${_.JC.topSitesId} class="sites ${t=>t.sitesClassName} ${t=>t.topSitesClassName}" data-t="${t=>t.topSiteCommonTelemetryTag}" ${(0,Ut.K)("topSitesContainer")}>${Lt.qy`${(0,Wt.ux)(Ie,Se)}`} ${Lt.qy`${(0,Wt.ux)(t=>t.topSitesPlaceHolders,Ce)}`}</div></div>`,Ee=Lt.qy`<div class="root ${t=>t.extraAddedSitesClassName} ${t=>t.className}  ${t=>t.moveUpward?"move-upward":""}" id="${_.JC.topSitesClassSelector}" ${(0,Ut.K)("topSitesRoot")}>${(0,Bt.z)(t=>t.config.enableCarouselTopSite,Me)} ${(0,Bt.z)(t=>!t.config.enableCarouselTopSite,_e)}</div><div ${(0,Ut.K)("dialogRoot")}>${(0,Bt.z)(t=>t.isAddDialogOpen,ke)} ${(0,Bt.z)(t=>t.topSiteAddedSuccessfully,Lt.qy`<div class="top-site-add-success" aria-live="polite">${t=>t.lastAddedTopSite} added successfully</div>`)} ${(0,Bt.z)(t=>t.isEditDialogOpen,Te)} ${(0,Bt.z)(t=>t.isActionMenuOpen,Lt.qy`<div data-t=${t=>t.topsiteItemContainerTelemetry()}><msn-actions-menu id="actions-menu" :referrerButton=${t=>t.activeContextMenuButtonElement} class="long-width-menu" :menuItems=${t=>t.actionsMenuProps?.menuItems} ${(0,Ut.K)("topSiteActionsMenu")} @dismiss-menu=${t=>t.isActionMenuOpen=!1} :isGlyphUrlsPicture=${!0} data-t=${t=>t.actionsMenuTelemetry()}></msn-actions-menu></div>`)}<div ${(0,Ut.K)("toastContainer")} class="toast-root">${(0,Bt.z)(t=>"undo"===t.currentToastTag,Ae)} ${(0,Bt.z)(t=>"pin"===t.currentToastTag,$e)}</div></div>`,Fe=Lt.qy` ${(0,Bt.z)(t=>t.isRuby,de,Ee)}
`;class De{constructor(t,e){this.onTouchStart=()=>{this.sortableService&&this.sortableService.destroy(),this.sortableService=null,document.addEventListener("mousemove",this.onMouseMove)},this.onMouseMove=()=>{this.initializeService(),document.removeEventListener("mousemove",this.onMouseMove)},this.onUnloadPage=()=>{this.clearTopsiteByUnpinnedSites(),this.clearUnpinStorage()},this.component=t,this.container=e.container,this.disableDragDrop=e.disableDragDrop,this.webStorage=(0,p.Lg)(),this.bindEvents()}bindEvents(){window.addEventListener("beforeunload",this.onUnloadPage),document.addEventListener("touchstart",this.onTouchStart),document.addEventListener("mousemove",this.onMouseMove)}unBindEvents(){window.removeEventListener("beforeunload",this.onUnloadPage),document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("mousemove",this.onMouseMove)}getDataFromStorage(t){try{const e=this.webStorage.getItem(t);if(e){return JSON.parse(e)}}catch(t){Dt.YT.sendAppErrorEvent({...O.eFv,message:"Cannot read/write storage for topsite drag drop service",pb:{...O.eFv.pb,customMessage:`Cannot get drag drop service data, msg: ${t.message||JSON.stringify(t)}`}})}}saveDataToStorage(t,e){try{this.webStorage.setItem(t,JSON.stringify(e))}catch(t){Dt.YT.sendAppErrorEvent({...O.eFv,message:"Cannot read/write storage for topsite drag drop service",pb:{...O.eFv.pb,customMessage:`Cannot save data to topsites, msg: ${t.message||JSON.stringify(t)}`}})}}reorderItems(t,e,n){Array.isArray(t)&&t.splice(e,0,t.splice(n,1)[0])}getValidTopSitesFromStorageData(){const t=this.getDataFromStorage(_.fe)||{},e=(t.data??[]).filter(t=>t.slot>=0).sort((t,e)=>t.slot-e.slot).reduce((t,e)=>"rid"in e||"url"in e||"faviconUrl"in e?((0===t.length||t[t.length-1].slot!==e.slot)&&t.push(e),t):t,[]);return{...t,data:e}}getFixedTopSites(){const{data:t}=this.getValidTopSitesFromStorageData();return t||[]}getTopSites(t,e){let n=t;const{data:i}=this.getValidTopSitesFromStorageData();if(!i)return t;const r=i.filter(t=>t.slot<e),o=(0,Ot.A)(t,r,"url");return n=[...(0,Ft.q)(o,r)],n=n.filter(t=>t).slice(0,e),n}removeTopSiteFromStorage(t,e){const n=this.getDataFromStorage(t)||{},i=n.data;i&&(n.data=i.filter(t=>t.rid!==e.rid),this.saveDataToStorage(t,n))}clearUnpinStorage(){this.saveDataToStorage(_.ve,{})}clearTopsiteByUnpinnedSites(){const t=(this.getDataFromStorage(_.ve)||{}).data;t&&t.forEach(t=>{this.removeTopSite(t)})}addTopSite(t,e){let n=this.getValidTopSitesFromStorageData(),i=n.data;if(i||(i=[],n={data:i}),e){i.filter(e=>e.rid!==t.rid&&e.slot>=Math.min(t.fromIndex,t.toIndex)&&e.slot<=Math.max(t.fromIndex,t.toIndex)).forEach(e=>t.fromIndex>t.toIndex?e.slot++:e.slot--)}const r=i.find(e=>e.rid===t.rid);r?Object.assign(r,t):i.push(t),n.data=(0,Nt.A)(i,"rid"),this.saveDataToStorage(_.fe,n),this.removeUnpinnedTopSite(t)}removeTopSite(t){this.removeTopSiteFromStorage(_.fe,t)}addUnpinnedTopSite(t){let e=this.getDataFromStorage(_.ve)||{},n=e.data;n||(n=[],e={data:n}),n.push(t),this.saveDataToStorage(_.ve,e)}removeUnpinnedTopSite(t){this.removeTopSiteFromStorage(_.ve,t)}updateTopSites(t){const e=this.getValidTopSitesFromStorageData(),n=e.data;if(!n)return;const i=n.find(e=>e.rid===t.rid);i&&Object.assign(i,t),this.saveDataToStorage(_.fe,e)}async initializeService(){if(this.sortableService||this.disableDragDrop)return;let t;if(t=this.container instanceof Promise?await this.container:this.container,!t)return;const{Sortable:e}=await n.e("node_modules_sortablejs_modular_sortable_esm_js").then(n.bind(n,26732)),i=new Image;i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",this.sortableService=e.create(t,{animation:150,chosenClass:"drag-chosen",dragClass:"drag-dragged",delay:100,touchStartThreshold:5,delayOnTouchOnly:!0,filter:".drag-locked",setData:t=>{t.setDragImage(i,0,0)},onMove:t=>{if(t.related||t.dragged)return!t.related.classList.contains("drag-locked")&&!t.dragged.classList.contains("drag-locked")&&(t.related.classList.add("drag-chosen__no-hover"),!0)},onEnd:e=>{const{oldIndex:n,newIndex:i}=e;Array.from(t.children)?.forEach(t=>{t.classList?.remove("drag-chosen__no-hover")});const r=this.component.topSites;if(r&&0!==r.length&&-1!==n&&-1!==i&&n!==i){Dt.YT.addOrUpdateTmplProperty("tpsdrag","1");if(!this.component.getUserSelectedSetting())return;const t={...r[n],slot:i,fromIndex:n,toIndex:i,dragDropType:1};this.addTopSite(t,!0);const o=this.component.$fastController.subscribers?.topSites;if(o){const t=[...this.component.topSites];this.reorderItems(t,i,n);let r=[];if(o.spillover)r=o.spillover;else{const{sub1:t,sub2:e}=o;r=[t,e].filter(t=>t)}const s=r.filter(t=>t.subject===Ie)[0];if(s){const t=s.sub1.views,r=t[n].firstChild.parentNode;if(i<n)r.insertBefore(t[i].firstChild,e.item.nextSibling),r.insertBefore(t[n].firstChild,e.item),r.insertBefore(t[n].lastChild,e.item.nextSibling);else{const o=t[i+1];o&&r.insertBefore(o.firstChild,e.item.nextSibling),r.insertBefore(t[n].firstChild,e.item),r.insertBefore(t[n].lastChild,e.item.nextSibling)}this.reorderItems(t,i,n),this.component.getOrUpdateTopSites()}}Dt.YT.sendActionEvent(e.item)}},onChange:t=>{this.component.setActiveTopSiteElement(t.item)}})}destroy(){this.sortableService&&this.sortableService.destroy(),this.sortableService=null,this.unBindEvents()}}var Oe=n(52088),Ne=n(26560);const Le="TSNP1.topsites";class Be{constructor(){try{this.storage=window.localStorage}catch(t){}}write(t,e){if(this.storage)try{this.storage[t]=e}catch(t){}}writeJsonKey(t,e){return this.write(t,JSON.stringify(e))}readJsonKey(t,e=void 0){const n=this.storage?.[t];try{return n?JSON.parse(n):e}catch(t){return(0,B.c_)(t,O.FeD,"Unable to parse local JSON top sites data"),e}}getTopSites(){return Ue(this.readJsonKey(Le)||[],!0)}writeTopSites(t){this.writeJsonKey(Le,t)}}function Ue(t,e=!1){const n=[],i=t.filter((t,e)=>!!t?.url||(n.push({i:e,reason:t?"Missing URL":"Empty site"}),!1));return n.length&&(0,B.vV)(O.JN4,"Skipped some invalid top site data"+(e?" from local storage":""),void 0,{skippedSites:n}),i}var We,Ve,He;function ze(t,e){window.chrome?.ntpSettingsPrivate?.initiatePreload(t,e)}function je(t){return window.chrome?.ntpSettingsPrivate?.initiatePreload&&t?t.includes("msNewTabPageTriggerForPrerender2")?"prerender":t.includes("msNewTabPageTriggerForPrefetch")?"prefetch":null:null}!function(t){t.PrerenderAndPreconnect="msNewTabPageTriggerForPrerender2",t.Prefetch="msNewTabPageTriggerForPrefetch"}(We||(We={})),function(t){t.Idle="idle",t.HoverWaiting="hover_waiting",t.Preconnected="preconnected",t.Prefetched="prefetched",t.Prerendering="prerendering"}(Ve||(Ve={})),function(t){t.Prerender="prerender",t.Prefetch="prefetch"}(He||(He={}));class qe{constructor(t,e,n,i,r,o,s){this.state="idle",this.hoverTimer=null,this.boundMouseLeave=this.handleMouseLeave.bind(this),this.boundMouseDown=this.handleMouseDown.bind(this),this.boundMouseUp=this.handleMouseUp.bind(this),this.element=t,this.url=e,this.mode=n,this.prefetchEnabled=i,this.preconnectDelayMs=r,this.prefetchDelayMs=o,this.onDestroy=s}reset(){this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=null),this.state="idle"}handleMouseEnter(){this.reset(),this.state="hover_waiting",this.element.addEventListener("mouseleave",this.boundMouseLeave),this.element.addEventListener("mousedown",this.boundMouseDown),this.element.addEventListener("mouseup",this.boundMouseUp),"prerender"===this.mode?this.hoverTimer=window.setTimeout(()=>{"hover_waiting"===this.state&&(this.state="preconnected",ze("PRECONNECT",this.url))},this.preconnectDelayMs):this.hoverTimer=window.setTimeout(()=>{"hover_waiting"===this.state&&(this.state="prefetched",ze("PREFETCH",this.url))},this.prefetchDelayMs)}handleMouseLeave(){"prerendering"===this.state&&window.chrome?.ntpSettingsPrivate?.cancelPrerender(),this.cleanup()}handleMouseDown(){"prerender"===this.mode&&(this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=null),this.state="prerendering",this.prefetchEnabled&&ze("PREFETCH",this.url),ze("PRERENDER",this.url))}handleMouseUp(){this.cleanup()}cleanup(){this.element.removeEventListener("mouseleave",this.boundMouseLeave),this.element.removeEventListener("mousedown",this.boundMouseDown),this.element.removeEventListener("mouseup",this.boundMouseUp),this.reset(),this.onDestroy()}destroy(){this.cleanup()}}class Ge{static isEnabled(t){return null!==je(t)}constructor(t,e=100,n=300){this.elementStates=new Map;const i=je(t);i&&(this.mode=i,this.prefetchEnabled=!!t?.includes("msNewTabPageTriggerForPrefetch"),this.preconnectDelayMs=e,this.prefetchDelayMs=n)}getOrCreateState(t,e){let n=this.elementStates.get(t);return n?n.url!==e&&(n.url=e,n.reset()):(n=new qe(t,e,this.mode,this.prefetchEnabled,this.preconnectDelayMs,this.prefetchDelayMs,()=>this.elementStates.delete(t)),this.elementStates.set(t,n)),n}startTrackingElementForPreload(t,e){t&&e&&this.getOrCreateState(t,e).handleMouseEnter()}reset(){this.elementStates.forEach(t=>t.destroy()),this.elementStates.clear()}}var Je=n(22011),Qe=n(77246),Ke=n(27261),Xe=n(35849),Ye=n(50759);class Ze extends Je.U{constructor(){super(...arguments),this.dataHelper=new Be,this.hoverTelemtryTimer=null,this.linkTarget="_self",this.enableQuickBrief=!1,this.widthPerPage=92,this.carouselPageIndex=0,this.carouselColsPerSlide=0,this.scrollDirection=window.document.dir===Et.O.rtl?-1:1,this.darkModeQuery=window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)"),this.isDarkMode=this.darkModeQuery.matches,this.isRuby=E.gR.isRuby,this.canShowCodexBingUpsellByPolicy=!1,this.initCopilotInTopSitesTelemetry=()=>{const t=this.copilotTopSiteIndex??0,e=`copilotTopSiteIndex${t}`;Dt.YT?.addOrUpdateTmplProperty(e,"1");const n=`M365CopilotAppInTopSites_${t}`;this.copilotInTopSitesTelemetryTag=(0,W.g)(n,{type:U.b5.TopSites},U.MS.Open,U.MJ.ActionButton,n,{destinationUrl:this.copilotTopSiteUrl}).getMetadataTag()},this.extraAddedSitesClassName="",this.topSitesEndMarginUsedPadding=0,this.actionMenuOpenTime=void 0,this.isActionMenuOpen=!1,this.isEditDialogOpen=!1,this.isUndoToastOpen=!1,this.isPinToastOpen=!1,this.preloadManager=null,this.topSiteMapper=new Map,this.topSites=[],this.currentToastTag=void 0,this.toastExpirationTimerHost={currentToastTimerHandle:null},this.moveUpward=!1,this.topSiteAddedSuccessfully=!1,this.addTopSiteDialogListener=!1,this.editTopSiteDialogListener=!1,this.numberPromotedSites=0,this.disablePromoteTopSites=!1,this.isMinVisitAffiliateSitesFeatureActive=!1,this.appendGoogleSitesOnNTP=!1,this.blockGoogleTopSitesExp=!1,this.isDisableDefaultInProgress=!1,this.getUserSelectedSetting=()=>this.userSelectedSetting,this.setActiveTopSiteElement=t=>{this.activeTopSiteElement=t},this.renderTopSiteStartAndEnd=!1,this.canLoadHoverElements=!1,this.closeFlyouts=(0,d.P)(()=>{this.isActionMenuOpen&&this.toggleActionMenu(null),this.isAddDialogOpen&&this.toggleAddDialog(),this.isEditDialogOpen&&this.toggleEditDialog()},400),this.closeToast=(t=!1)=>{this.currentToastTag=null,t&&(0,l.YJ)(l.xV.toast,!1),this.isAddDialogOpen&&this.toggleAddDialog(),this.isEditDialogOpen&&this.toggleEditDialog(),this.activeContextMenuButtonElement?.focus(),this.toastContainer?.removeEventListener("focus",this.handleToastFocus,!0),this.toastContainer?.removeEventListener("blur",this.handleToastBlur,!0)},this.generateActionsMenuProps=async()=>({menuItems:await this.getActionMenuItem(),onDismiss:this.toggleActionMenu}),this.getActionMenuItem=async()=>{const t=this.activeTopSiteItem?.url===this.copilotTopSiteUrl,e=this.activeTopSiteItem&&!t&&[-5,-6].includes(this.activeTopSiteItem.tileSource),i=this.activeTopSiteItem&&!t&&(-8===this.activeTopSiteItem.tileSource||-7===this.activeTopSiteItem.tileSource),r=h.T3.CurrentMarket===f.DX.ENUS,{checkTopsitesTail:o,findActiveSiteIndex:s,pinAction:a,pinToTaskBarHandler:c,togglePinToast:u}=await n.e("poweredby-legend-wc").then(n.bind(n,19649)),d={id:"Remove",title:this.strings.removeLabelText,glyph:A,onClick:t=>{o(s(this.activeTopSiteItem,this.topSites),this.dragDropService,this.topSites),"https://www.office.com"==this.activeTopSiteItem.url&&(this.deletedUrlLookup[this.activeTopSiteItem.url]=!0,this.webStorage.setObject("removedTopSiteUrls",this.deletedUrlLookup)),-6!=this.activeTopSiteItem.tileSource&&-7!=this.activeTopSiteItem.tileSource||(this.numberPromotedSites--,(0,p.Lg)().setItem(_.Ze,this.numberPromotedSites.toString())),this.dragDropService&&"slot"in this.activeTopSiteItem&&this.dragDropService.removeTopSite(this.activeTopSiteItem),(0,$t.$G)(t,this.getOrUpdateTopSites,this.activeTopSiteItem,this.ntpApiHandle,this.toggleUndoToast.bind(this,!0),!0),this.onMostVisitedHandler()},telemetryTag:this.topSiteActionTelemetryContext?.removeTopSite?.getMetadataTag()},l={id:"Rename",title:this.strings.renameLabelText,glyph:$,onClick:t=>{this.toggleEditDialog(t)},telemetryTag:this.topSiteActionTelemetryContext?.editDialog?.getMetadataTag()},g=[l,d];if(e){const t={id:"Hide",title:r?this.strings.hidePromotedCuratedLabelText:this.strings.hideCuratedLabelText,glyph:I,onClick:t=>{this.disableCurated()},telemetryTag:this.topSiteActionTelemetryContext?.removeCurated?.getMetadataTag()};g.push(t)}if(i){const t={id:"Hide",title:r?this.strings.hideSponsoredCuratedLabelText:this.strings.hideCuratedLabelText,glyph:I,onClick:t=>{this.disableCurated()},telemetryTag:this.topSiteActionTelemetryContext?.removeCurated?.getMetadataTag()};g.push(t)}const m={id:"Pin",title:1===this.activeTopSiteItem?.dragDropType?this.strings.unpinSite:this.strings.pinSite,glyph:1===this.activeTopSiteItem?.dragDropType?R:P,onClick:t=>{a(this.dragDropService,this)},telemetryTag:this.topSiteActionTelemetryContext?.pinningTopSiteInQuickLinks?.getMetadataTag()};if(g.push(m),this.isRuby)return[l,d];if(this.config.enablePinningTopSite){const t={id:"PinToTaskBar",title:this.strings.pinToTaskBar,glyph:M,onClick:t=>{c(this.activeTopSiteItem),u(this)},telemetryTag:this.topSiteActionTelemetryContext?.pinningTopSite?.getMetadataTag()};g.push(t)}return g},this.getOrUpdateTopSites=()=>{this.topSites=this.getTopSites(),this.currentTilesNumber=this.topSites?.length??0,this.topSitesPlaceHolders=this.getTopSitesPlaceHolders()},this.handleClick=t=>{this.isActionMenuOpen&&(!this.topSiteActionsMenu||this.topSiteActionsMenu.contains(t.target)||this.activeContextMenuButtonElement.contains(t.target)||!t.composedPath()||t.composedPath().includes(this.activeContextMenuButtonElement)||this.toggleActionMenu(this.activeTopSiteItem,t)),this.topSites&&this.topSites.length>0&&this.ShowPinningWizardCampaign()},this.lowEndDeviceHandler=t=>{this.isLowEndDevice=t?.detail?.isLowEndDevice??!1},this.onMostVisitedHandler=()=>{this.getOrUpdateTopSites()},this.toggleActionMenu=async(t,e)=>{this.activeTopSiteElement=!this.isActionMenuOpen&&e?e.currentTarget.parentElement.parentElement:this.activeTopSiteElement,this.activeTopSiteItem=t,this.isActionMenuOpen?(window.removeEventListener("scroll",this.closeFlyouts),this.actionsMenuProps=void 0):(this.actionMenuOpenTime=performance?.now(),window.addEventListener("scroll",this.closeFlyouts),e&&e.currentTarget&&Oe.W.addElement(e.currentTarget),this.topSiteActionTelemetryContext&&this.activeTopSiteItem&&(this.topSiteActionTelemetryContext=((t,e,n)=>{const{tileSourcePrefix:i,isCuratedOrPromoted:r}=Tt(e),{removeTopSite:o,editDialog:s,closeEditDialog:a,saveEdit:c,cancelEdit:u,turnOffPreview:d,turnOnPreview:l,pinningTopSiteInQuickLinks:h,undoRemoveTopSite:f,closeRemoveToast:p,pinningTopSite:g}=t;o.contract.name=`${i}_${tt}`,f.contract.name=`${i}_${et}`,p.contract.name=`${i}_${Z}`,s.contract.name=`${i}_${rt}`,a.contract.name=`${i}_${at}_${nt}`,c.contract.name=`${i}_${at}_${ot}`,u.contract.name=`${i}_${at}_${it}`,d.contract.name=`${i}_${ht}`,l.contract.name=`${i}_${lt}`,g.contract.name=`${i}_${gt}`,h.contract.name=`${i}_${ft}`;const m=!e.pinActionButtonTelemetryTag;return n&&(h.contract.name=m?`${i}_${gt}`:h.contract.name=`${i}_${pt}`),r&&(o.contract.content.headline=`${Ct.remove}_${e.title}`,f.contract.content.headline=`${Ct.undoRemove}_${e.title}`,p.contract.content.headline=`${Ct.close}_${e.title}`,s.contract.content.headline=`${Ct.rename}_${e.title}`,a.contract.content.headline=`${Ct.close}_${e.title}`,c.contract.content.headline=`${Ct.save}_${e.title}`,u.contract.content.headline=`${Ct.cancel}_${e.title}`,d.contract.content.headline=`${Ct.turnOffPreview}_${e.title}`,l.contract.content.headline=`${Ct.turnOnPreview}_${e.title}`,g.contract.content.headline=`${Ct.topsiteTaskbarpin}_${e.title}`,h.contract.content.headline=`${Ct.pin}_${e.title}`,n&&(h.contract.content.headline=m?`${Ct.pin}_${e.title}`:`${Ct.unpin}_${e.title}`),o.contract.destinationUrl=`${e.url}`,f.contract.destinationUrl=`${e.url}`,p.contract.destinationUrl=`${e.url}`,s.contract.destinationUrl=`${e.url}`,a.contract.destinationUrl=`${e.url}`,c.contract.destinationUrl=`${e.url}`,u.contract.destinationUrl=`${e.url}`,d.contract.destinationUrl=`${e.url}`,l.contract.destinationUrl=`${e.url}`,g.contract.destinationUrl=`${e.url}`,h.contract.destinationUrl=`${e.url}`),t})(this.topSiteActionTelemetryContext,this.activeTopSiteItem,this.isRuby)),this.activeContextMenuButtonElement=e.currentTarget,this.generateActionsMenuProps().then(t=>{this.actionsMenuProps=t})),this.isActionMenuOpen=!this.isActionMenuOpen,(0,l.YJ)(l.xV.actionMenuOpen,this.isActionMenuOpen)},this.toggleAddDialog=t=>{const e=!this.isAddDialogOpen&&t?t.currentTarget.parentElement.parentElement:null;if(this.isAddDialogOpen)window.removeEventListener("scroll",this.closeFlyouts);else{window.addEventListener("scroll",this.closeFlyouts),t&&t.currentTarget&&Oe.W.addElement(t.currentTarget);const n=document.dir===Et.O.ltr,i=this.config.suggestedTopSiteList&&this.config.suggestedTopSiteList.length>0?_.wA:_.j6,r=(0,$t.Rm)(e,this.topSitesRoot,i,document.documentElement.clientWidth,document.documentElement.clientHeight,n);this.topSiteAddDialogContainerPosition=r,this.addTopSiteButtonRef=t?.currentTarget}this.isAddDialogOpen=!this.isAddDialogOpen,this.isAddDialogOpen||(this.isEditDialogOpen&&this.toggleEditDialog(),"undo"===this.currentToastTag&&this.toggleUndoToast(),this.addTopSiteButtonRef&&window.setTimeout(()=>this.addTopSiteButtonRef.focus(),0)),(0,l.YJ)(l.xV.addTopSite,this.isAddDialogOpen),this.topSiteAddDialog.newOrUpdatedTopSite={name:"",url:""}},this.toggleEditDialog=t=>{if(this.isEditDialogOpen)window.removeEventListener("scroll",this.closeFlyouts);else{window.addEventListener("scroll",this.closeFlyouts),t&&t.currentTarget&&Oe.W.addElement(t.currentTarget),this.topSiteEditDialog.newOrUpdatedTopSite={name:this.activeTopSiteItem.title,url:this.activeTopSiteItem.url},this.topSiteEditDialog.nameInputBox.value=this.activeTopSiteItem.title;const e=document.dir===Et.O.ltr,n=(0,$t.Rm)(this.activeTopSiteElement,this.topSitesRoot,_.uR,document.documentElement.clientWidth,document.documentElement.clientHeight,e);this.topSiteEditDialogContainerPosition=n}this.isEditDialogOpen=!this.isEditDialogOpen,this.isEditDialogOpen||(this.isAddDialogOpen&&this.toggleAddDialog(),"undo"===this.currentToastTag&&this.toggleUndoToast()),(0,l.YJ)(l.xV.editTopSite,this.isEditDialogOpen)},this.updateToastContainer=()=>{const t=this.topSitesRoot;if(!t)return!1;const e=t.getBoundingClientRect(),n=`top: ${Math.ceil(e.bottom)+window.scrollY+_.gy}px`;return this.toastContainer.setAttribute("style",n),this.toastContainer.addEventListener("focus",this.handleToastFocus,!0),this.toastContainer.addEventListener("blur",this.handleToastBlur,!0),!0},this.handleToastFocus=t=>{this.toastContainer.contains(t.target)&&((0,$t.Cd)(this.toastExpirationTimerHost),window.addEventListener("keydown",this.handleToastKeyDown,!0))},this.handleToastBlur=t=>{this.toastContainer.contains(t.relatedTarget)||((0,$t.Br)(this.toastExpirationTimerHost),window.removeEventListener("keydown",this.handleToastKeyDown,!0))},this.handleToastKeyDown=t=>{this.toastContainer&&"Escape"===t.key&&this.closeToast()},this.toggleUndoToast=t=>{(t||"undo"!==this.currentToastTag)&&this.toastContainer&&this.updateToastContainer()?(this.isActionMenuOpen=!1,this.undoToast=this.generateUndoToastProps(),Oe.W.addElement(this.toastContainer),this.currentToastTag="undo",(0,$t.Jh)(this.toastExpirationTimerHost,this.undoToast.notificationDurationMs,this.closeToast),window.setTimeout(()=>{this.undoButton.focus()},100)):this.closeToast(),(0,l.YJ)(l.xV.toast,"undo"===this.currentToastTag)},this.saveTopSitesTP1Data=()=>{this.dataHelper.writeTopSites(this.topSites)},this.onBreakpointCallback=t=>{this.columnArrangement=t,this.carouselColsPerSlide=_.A[t],this.carouselPageIndex=0,this.scrollToPosition(),this.reRenderTopsite()},this.getCurrentLayoutConfig=()=>{const t=this.chromiumPageSettingState?.selectedFeedDisplaySetting,e=this.userSelectedSetting&&"off"!==this.userSelectedSetting?this.userSelectedSetting:"onerow",n=this.tilesxColxRowsMap[e];if(!n)return Dt.YT.sendAppErrorEvent({...O.b04,message:"Can't find layout config for topsites",pb:{...O.b04.pb,userSelectedSetting:this.userSelectedSetting,chromiumPageSettingStatePresent:!!this.chromiumPageSettingState,selectedQuickLinksDisplaySetting:this.chromiumPageSettingState?.selectedQuickLinksDisplaySetting}}),null;const i=n[this.columnArrangement];return i[t]??i.default},this.onResize=()=>{this.closeFlyouts()},this.themeChanged=t=>{this.isDarkMode=!!t?.matches}}get displayCopilotInTopSites(){return this.canShowCodexBingUpsellByPolicy&&void 0!==this.copilotTopSiteIndex&&!!this.copilotTopSiteUrl}async experienceConnected(){(0,N.ZF)().TopSitesConnected=performance?.now();const t=!g.Rb.IsPrerender;if(this.wpoConfig=(0,Ye.ZC)(),this.isRuby&&this.config.curatedSitesRuby&&(this.config.curatedSites=this.config.curatedSitesRuby),this.wpoConfig){const t=this.wpoConfig.recommendedSites?.filter(t=>!t.isSponsored)??[];if(this.config={...this.config,...this.wpoConfig,recommendedSites:t},Dt.YT.addOrUpdateTmplProperty("wpoRecEn",this.wpoConfig.enableRecommendedSites?"1":"0"),Dt.YT.addOrUpdateTmplProperty("wpoRecTtls",t?.map(t=>t.title)?.toString()||"X"),this.wpoConfig.recommendedSites?.length>0){const t=(0,$t.Jo)(this.wpoConfig.recommendedSites,this.config.curatedSites);this.config={...this.config,curatedSites:t}}}t&&(this.topSites=this.dataHelper.getTopSites()),this.isTP1DataUsed=t&&this.topSites.length>0,this.isTP1DataUsed?(await this.waitForSelectedQuickLinksReady(),this.chromiumPageSettingState=(0,Xe.zP)(k.h$).getCurrentState(),this.userSelectedSetting=this.chromiumPageSettingState.selectedQuickLinksDisplaySetting||this.selectedQuickLinksDisplaySetting,(0,N.ZF)().TopSitesConnectedFirstGetTopSites=performance?.now(),(0,Qe.S)()&&(0,Rt.e1)().then(()=>(0,F.B)(11,g.Rb.IsPrerender))):await this.subscribeToChromiumPageState(),this.columnArrangement=(0,v.TU)().currentColumnArrangement,this.numberPromotedSites=this.config.promoteCurated;const e=(0,p.Lg)().getItem(_.Ze),n=Number(null==e?void 0:e);if(this.disablePromoteTopSites=!isNaN(n)&&0===n,!this.disablePromoteTopSites&&this.numberPromotedSites>n&&(this.numberPromotedSites=n),this.enableSixteenTopSites?(this.maxTiles=_.Mb,this.extraAddedSitesClassName="tworows"===this.userSelectedSetting&&this.columnArrangement>="c4"?null:_.mk.tenSites):(this.maxTiles=_.j5,this.extraAddedSitesClassName=_.mk.eightSites),this.config.enableOneColumn&&this.columnArrangement===b.j1.c1&&(this.extraAddedSitesClassName=_.mk.sixSites),this.topSitesLayoutDataConnector=(0,Xe.zP)(k.OJ),(0,_t.vQ)(k.OJ,t=>{this.topSitesLayoutState=t}),this.topSitesLayoutDataConnector?.updateMaxTiles?.(this.maxTiles),this.pageSettingsConnector=(0,Xe.zP)(k.h$),this.copilotTopSiteIndex=this.config.copilotTopSiteIndex??void 0,this.copilotTopSiteUrl=this.config.copilotTopSiteUrl??void 0,void 0!==this.copilotTopSiteIndex&&!this.isRuby){const t=this.pageSettingsConnector?.getCurrentState();this.canShowCodexBingUpsellByPolicy=!(0,h.rA)().isAadAccountUser||(t?.isCodexBingUpsellEnabledByPolicy??!1)}if(this.displayCopilotInTopSites&&this.initCopilotInTopSitesTelemetry(),this.isTP1DataUsed){const t=this.getCurrentLayoutConfig();t&&(this.maxTiles=t.tile,this.extraAddedSitesClassName=t.class),this.topSites.length>=this.maxTiles&&(this.topSites=this.topSites.slice(0,this.maxActualTile))}const i=window;if(i.chrome&&i.chrome.embeddedSearch&&(this.ntpApiHandle=i.chrome.embeddedSearch.newTabPage),i.chrome&&i.chrome.ntpSettingsPrivate&&(this.ntpSettingsPrivateApiHandle=i.chrome.ntpSettingsPrivate),this.ntpApiHandle&&(this.ntpApiHandle.onmostvisitedchange=this.onMostVisitedHandler),this.minimumTopSites=_.j5-1,!(0,Qe.S)()){this.setAttribute("needs-recreation","");const t=this.getCurrentLayoutConfig();return this.maxTiles=t?.tile,this.extraAddedSitesClassName=t.class,void this.getOrUpdateTopSites()}this.isTP1DataUsed?(this.currentTilesNumber=this.topSites?.length??0,this.topSitesPlaceHolders=this.getTopSitesPlaceHolders()):(this.getOrUpdateTopSites(),(0,N.ZF)().TopSitesConnectedFirstGetTopSites=performance?.now(),(0,Qe.S)()&&(0,Rt.e1)().then(()=>(0,F.B)(11,g.Rb.IsPrerender))),this.topSiteAddedSuccessfully=!1,(0,It.KO)(Pt.u.topSites,this),this.processMinimumVisitAffiliateFeatureState(),this.isMinVisitAffiliateSitesFeatureActive&&this.persistMinVisitAffiliateInfo(),this.initCanLoadHoverElements(),this.isDarkMode=!!this.darkModeQuery?.matches,this.darkModeQuery.addEventListener("change",this.themeChanged),this.checkTopSitesIcon()}beforeHydration(){this.$fastController.needsHydration=!1,Dt.YT?.addOrUpdateTmplProperty("ts_try_hydration","1")}async subscribeToChromiumPageState(){const t=new S.e;(0,_t.vQ)(k.h$,e=>{if(!e.isLoadCompleted)return;t.set(),this.chromiumPageSettingState=e;const n=this.config.enableOpenInNewTab&&e.openInNewTab;if(!this.preloadManager&&this.config.enableEdgePreloadExperiment&&!n&&e.configData?.enabledFeatures&&Ge.isEnabled(e.configData.enabledFeatures)&&(this.preloadManager=new Ge(e.configData.enabledFeatures)),e&&e.configData){if(e.configData.enabledFeatures&&(this.blockGoogleTopSitesExp=e.configData.enabledFeatures.includes("msNtpExpBlockTopSitesPromotions"),e.configData.enabledFeatures.includes("msNtpUseGoogleTopSites")))if(this.appendGoogleSitesOnNTP=!0,this.wpoConfig?.recommendedSites?.length>0&&this.config.curatedSitesEdgeExp){const t=(0,$t.Jo)(this.wpoConfig.recommendedSites,this.config.curatedSitesEdgeExp);this.config.curatedSites=t}else this.config.curatedSites=this.config.curatedSitesEdgeExp??this.config.curatedSites;this.ntpApiVersion=e.configData.apiVersion}const i=e&&e.selectedQuickLinksDisplaySetting;this.enableSixteenTopSites&&this.userSelectedSetting!==i&&(this.userSelectedSetting&&(this.userSelectedSetting=i,"tworows"===this.userSelectedSetting&&(this.maxTiles=_.Mb),this.getOrUpdateTopSites()),this.userSelectedSetting=i),this.chromiumPageSettingLayoutState&&this.chromiumPageSettingLayoutState!=e&&this.reRenderTopsite(),this.chromiumPageSettingLayoutState=e,this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding&&this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding!=this.topSitesEndMarginUsedPadding&&(this.topSitesEndMarginUsedPadding=this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding),Dt.YT.addOrUpdateTmplProperty("tsHideDefault",""+(e.hideDefaultTopSites?1:0)),this.config.enableOpenInNewTab&&(this.linkTarget=e.openInNewTab?"_blank":"_self"),this.isRuby&&(this.isDarkMode=(0,C.ud)())}),window.isSSREnabled&&await t.getResultAsync()}disconnectedCallback(){super.disconnectedCallback(),this.dragDropService?.destroy(),this.dragDropService=null,window.removeEventListener("resize",this.onResize),window.removeEventListener("mouseup",this.handleClick,!1),window.removeEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler),this.darkModeQuery.removeEventListener("change",this.themeChanged)}async prerenderRefreshCritical(){return this.initializeTopSitesState()}getApproxTTVRValue(t){const e=(0,N.ZF)();if(e.isSSRCompleted)return e[L.wL+(t||this.getExperienceType())]||e[L.wL+"Complete"]}async shadowDomPopulated(){if(!(0,Qe.S)())return;window.addEventListener("resize",this.onResize),window.addEventListener("mouseup",this.handleClick,!1),window.addEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler),n.e("experiences_top-sites-edgenext-wc_dist_TopSitesEdgeNextWC_addDialog_js-experiences_top-sites--c06b42").then(n.bind(n,4673)).then(({generateTopSiteAddDialogProps:t})=>{this.topSiteAddDialog=t(this.activeTopSiteElement,this)}),n.e("experiences_top-sites-edgenext-wc_dist_TopSitesEdgeNextWC_addDialog_js-experiences_top-sites--c06b42").then(n.bind(n,13232)).then(({generateTopSiteEditDialogProps:t})=>{this.topSiteEditDialog=t(this.activeTopSiteElement,this)}),this.config.enableCarouselTopSite&&(this.carouselProps=this.generateCarouselProps()),(0,v.TU)().subscribe(this.onBreakpointCallback),this.topSitesContainerPromise=new Promise(t=>this.topSitesContainerPromiseResolver=t),this.dragDropService||this.initializeDragDropService();const t=this.getOverrideIconList();if(t&&t.length>0&&t.forEach(t=>{t.identifierHosts.forEach(e=>{this.topSiteMapper.set(e,t.faviconUrl??c.VG(t.faviconId))})}),this.config.suggestedTopSiteList&&this.config.suggestedTopSiteList.length>0&&(this.config.suggestedTopSiteList=((t,e)=>{if(!t)return e;for(const t of e){const e=(0,W.l)(`${dt}_${ct}_${st}`,{headline:Ct.suggestedLink,type:U.b5.TopSites},U.MS.Save,U.MJ.ActionButton,kt);t.suggestedLinkTelemetryTag=e.getMetadataTag()}return e})(this.telemetryObject,this.config.suggestedTopSiteList)),this.initializeTopSitesState(),this.isTP1DataUsed?window.requestAnimationFrame(()=>{this.markVisuallyReady(),Dt.YT.observeSingleElement(this.topSitesRoot)}):window.requestAnimationFrame(()=>{window.setTimeout(()=>{this.markVisuallyReady(),Dt.YT.observeSingleElement(this.topSitesRoot)})}),this.columnArrangement=(0,v.TU)().currentColumnArrangement,this.renderTopSiteStartAndEnd=!0,this.carouselColsPerSlide=_.A[this.columnArrangement],this.isTP1DataUsed){const t=this.topSites?.length??0;(0,m.E)(()=>{this.subscribeToChromiumPageState(),this.getOrUpdateTopSites();(this.topSites?.length??0)-t>1&&(0,B.vV)(O.N1,"TopSites don't get enough data from TP1",void 0,{...O.N1.pb,tp1DataLength:this.topSites.length,maxTiles:this.maxTiles,columnArrangement:this.columnArrangement,shouldSampleErrorsForTreatement1:!0})})}else this.reRenderTopsite();this.registerElements(),window.addEventListener("beforeunload",this.saveTopSitesTP1Data,{once:!0})}registerElements(){if((0,h.rA)().ClarityEnabled){const t=this.shadowRoot?.getElementById?.(_.JC.topSitesId);t&&t.setAttribute("data-clarity-mask","true")}this.topSitesContainerPromiseResolver(this.topSitesContainer)}quickBriefVisibleChanged(){this.enableQuickBrief=this.quickBriefVisible,this.$fastController.isConnected&&this.reRenderTopsite(!0)}get shouldHidePlaceholders(){return this.config?.qbHideAdd&&this.quickBriefVisible}get maxActualTile(){return this.shouldHidePlaceholders?this.maxTiles:this.maxTiles-1}get tilesxColxRowsMap(){return this.isRuby?this.config.enable2RowsInRuby?_.YC:_.Bq:this.config.enableCarouselTopSite?_.Ho:this.quickBriefVisible?_.lu:_.Li}getExperienceType(){return T.v$w}get className(){return this.isLowEndDevice&&"informational"==this.chromiumPageSettingState?.currentLayout?this.isDarkMode?_.mk.topSitesDark:_.mk.topSitesLight:this.needDarkThemeIcons?_.mk.topSitesLight:!this.chromiumPageSettingState?.imageOfTheDayEnabled&&!this.chromiumPageSettingState?.displayBackgroundImageType||this.showFullPageBlur?this.isDarkMode?_.mk.topSitesDark:_.mk.topSitesLight:this.isDarkMode?_.mk.topSitesDarkOnBackgroundImage:_.mk.topSitesLightOnBackgroundImage}get enableSixteenTopSites(){return!!this.chromiumPageSettingState?.ntpPrefOptionApiAvailability}get twoRowSitesClassName(){return this.selectedQuickLinksDisplaySetting&&"tworows"==this.selectedQuickLinksDisplaySetting?this.topSites?.length<=this.minimumTopSites?"":_.mk.twoRowSites:""}get topSitesClassName(){return this.isInformationalLayout?"information-layout":""}get isInformationalLayout(){return!("always"!=this.chromiumPageSettingState?.selectedFeedDisplaySetting)}generateUndoTopSiteHandler(){return this.isDisableDefaultInProgress?(this.disableCurated(),void(this.isDisableDefaultInProgress=!1)):this.dragDropService&&"slot"in this.activeTopSiteItem?(this.dragDropService.addTopSite(this.activeTopSiteItem),this.toggleUndoToast(),void this.getOrUpdateTopSites()):(-6!=this.activeTopSiteItem.tileSource&&-7!=this.activeTopSiteItem.tileSource||(this.numberPromotedSites++,(0,p.Lg)().setItem(_.Ze,this.numberPromotedSites.toString())),(0,$t.fc)(this.getOrUpdateTopSites,this.ntpApiHandle,this.activeTopSiteItem.rid,this.activeTopSiteItem.tileSource,this.activeTopSiteItem.url),void this.toggleUndoToast())}generateUndoToastProps(){const t=this.activeTopSiteItem.title,e=t.length>20?`${t.substring(0,20)}`:t,n=this.strings.undoRemovedFormat;let i=(0,w.A)(n,e);return this.isDisableDefaultInProgress&&(i=[this.strings.undoDisableDefault]),{closeButtonLabel:this.strings.closeButtonText,closeButtonTelemetryTag:this.topSiteActionTelemetryContext?.closeRemoveToast?.getMetadataTag(),closeHandler:()=>{this.closeToast()},notificationDurationMs:_.QV,removedText:i,undoButtonLabel:this.strings.undoLabelText,undoButtonTelemetryTag:this.topSiteActionTelemetryContext?.undoRemoveTopSite?.getMetadataTag(),undoTopSiteHandler:()=>{this.generateUndoTopSiteHandler()}}}generateCarouselProps(){return{preFlipperText:this.strings?.preFlipper||"Previous sites",nextFlipperText:this.strings?.nextFlipper||"Next sites",clickCarouselNextButtonTag:this.topSitesTelemetryContext?.clickCarouselNextButton?.getMetadataTag(),clickCarouselPreButtonTag:this.topSitesTelemetryContext?.clickCarouselPreButton?.getMetadataTag()}}mockTopSites(){return"1"===y._3.getQueryParameterByName("mockTopSites",(0,Ke.iA)())}getOrderedTopSites(){let t=[];if(this.mockTopSites())return _.$1;if(!(0,Qe.S)())return Array(this.maxActualTile).fill(_.Np).map((t,e)=>({...t,rid:e+1}));if(t=(0,$t.g0)(this.ntpApiHandle),(this.appendGoogleSitesOnNTP||!this.blockGoogleTopSitesExp&&this.config?.appendGoogleSites)&&(t=t.filter(t=>"www.office.com"!==t.domain)),(this.config?.appendGoogleSites||this.config?.isGoogleTopSitesCtrl)&&!this.blockGoogleTopSitesExp){0===t.filter(t=>"www.office.com"!==t.domain).length&&(Dt.YT.addOrUpdateTmplProperty("no_mv_sites","1"),(0,p.Lg)().setItem("tsAlternate","1"))}if(!this.blockGoogleTopSitesExp&&this.config?.appendGoogleSites)if(this.wpoConfig?.recommendedSites?.length>0&&this.config.curatedSitesCSExp){const t=(0,$t.Jo)(this.wpoConfig.recommendedSites,this.config.curatedSitesCSExp);this.config.curatedSites=t}else this.config.curatedSites=this.config.curatedSitesCSExp??this.config.curatedSites;!this.isRuby&&this.config.noAds&&(this.config.curatedSites=this.config.curatedSites.filter(t=>!t.isSponsored)),t=this.removeBlockedSites(t);let e=1;const n=new Map,i=new Set,r=this.numberPromotedSites;let o=r>0&&!this.disablePromoteTopSites;const s=[];this.updateAffiliateAutoAppendTileSource(t);const a=this.getCurrentLayoutConfig(),u=this.shouldHidePlaceholders?a.tile:a.tile-1,d=this.chromiumPageSettingState?.hideDefaultTopSites;let l=t.length>=u,h=!1;if(!d&&t&&this.config&&(t.length<u||o)&&this.config.curatedSites){c.rS(this.config,t),t.length+r<u&&o&&(o=!1,l=!1,h=!0);const a=t.length;a>0&&(e=t[a-1].rid+1e3);const d=c.pD();if(d.forEach(t=>{t.isSponsored&&i.add(t.url)}),!o){const i=this.dedupeCuratedSitesByTitle(d,t).slice(0,this.maxActualTile-t.length).map(t=>(n.set(e,t),this.mapCuratedSiteToTopsites(e++,t,!1)));t.push(...i)}const f=this.dedupeCuratedSitesByTitle(d,t);f.sort((t,e)=>(t.isSponsored=t.isSponsored??!1,e.isSponsored=e.isSponsored??!1,Number(e.isSponsored)-Number(t.isSponsored)));const p=f.slice(0,r).map(t=>(n.set(e,t),this.mapCuratedSiteToTopsites(e++,t,!0)));s.push(...p)}this.config.enableRecommendedSites&&!d&&(t=(0,$t.cn)(this.config,this.maxTiles,t,n,s));const f=new Set([0,7,8,2,-5,-8,-4]),g=new Set([4,3]);let m=a.tile;const w=(0,Qe.S)()?this.dragDropService?.getFixedTopSites?.()??[]:[];w.forEach(t=>{-8!=t.tileSource&&!t.isSponsored||i.has(t.url)||(t.isSponsored=!1,t.tileSource=-5)});let y=w.filter(t=>t.slot<m),v=(0,Ot.A)(t,y,"url"),S=v.filter(t=>g.has(t.tileSource));S.length+w.filter(t=>t.slot<a.tile).length<a.tile&&!this.shouldHidePlaceholders&&(m=a.tile-1,y=w.filter(t=>t.slot<m),v=(0,Ot.A)(t,y,"url"),S=v.filter(t=>g.has(t.tileSource)));const C=y.length,k=Math.min(m-C,S.length),T=m-C-k;let x=0,A=0,$=v.reduce((t,e)=>(f.has(e.tileSource)&&A<T&&(e.title=(0,$t.em)(e.title,e.domain??e.url),t.push(e),A+=1),g.has(e.tileSource)&&x<k&&(t.push(e),x+=1),t),[]);if(h){0==$.filter(t=>-5==t.tileSource).length&&(o=!0,l=!0)}const I=new Map;if(o&&s.length>0)for(let t=r,e=0;t>0&&e<s.length;t--,e++)I.set(u-t,s[e]);"onerow"===this.userSelectedSetting&&k>0&&(this.columnArrangement===b.j1.c1||this.columnArrangement===b.j1.c2)&&($=this.getOneColOrTwoColTopSites(v,k,T,m,o?s:[])),t=[...(0,Ft.q)($,y)];let P=0===k;if(P=T>=r,P&&I.size>0&&I.forEach((e,n)=>{3!=t[n]?.tileSource&&4!=t[n]?.tileSource||(P=!1)}),o&&P&&I.size>0&&I.forEach((e,n)=>{t.splice(n,0,e),t.pop()}),l&&P&&Dt.YT.addOrUpdateTmplString("promotedTopSites"),this.config.enableCarouselTopSite&&o&&P&&I.size>0){const e=[-6,-7],n=t.length;for(let i=this.numberPromotedSites;i>=1;i--)e.includes(t[n-i].tileSource)&&([t[this.carouselColsPerSlide-i],t[n-i]]=[t[n-i],t[this.carouselColsPerSlide-i]])}return t}mapCuratedSiteToTopsites(t,e,n){return{rid:t,dataGenerationTime:void 0,faviconUrl:e.faviconUrl??c.VG(e.faviconId),domain:void 0,title:e.title,tileSource:this.getTileSource(n,e.isSponsored),tileTitleSource:void 0,url:e.url,direction:e.direction,enforcement:void 0,isSponsored:e.isSponsored}}getRubyOrderedTopSites(){let t=[];if(!(0,Qe.S)())return Array(this.maxActualTile).fill(_.Np).map((t,e)=>({...t,rid:e+1}));t=(0,$t.g0)(this.ntpApiHandle),t=this.removeBlockedSites(t);let e=1;const n=new Map;let i=this.maxTiles?this.maxTiles-1:_.j5-1;const r=this.getCurrentLayoutConfig();i=this.shouldHidePlaceholders?r.tile:r.tile-1;const o=this.chromiumPageSettingState?.hideDefaultTopSites;if(!o&&t&&this.config&&t.length<i&&this.config.curatedSites){c.rS(this.config,t);const i=t.length;i>0&&(e=t[i-1].rid+1e3);const r=c.pD().map(t=>(n.set(e,t),{rid:e++,dataGenerationTime:void 0,faviconUrl:t.faviconUrl??c.VG(t.faviconId),domain:void 0,title:t.title,tileSource:this.getTileSource(!1,t.isSponsored),tileTitleSource:void 0,url:t.url,direction:t.direction,enforcement:void 0,isSponsored:t.isSponsored}));t.push(...r)}const s=new Set([0,7,8,2,-5,-8,-4]),a=new Set([4,3]);let u=r.tile;const d=(0,Qe.S)()?this.dragDropService?.getFixedTopSites?.()??[]:[];d.forEach(t=>{(-8==t.tileSource||t.isSponsored)&&(t.isSponsored=!1,t.tileSource=-5)});let l=d.filter(t=>t.slot<u),h=(0,Ot.A)(t,l,"url"),f=h.filter(t=>a.has(t.tileSource));f.length+d.filter(t=>t.slot<r.tile).length<r.tile&&!this.shouldHidePlaceholders&&(u=r.tile-1,l=d.filter(t=>t.slot<u),h=(0,Ot.A)(t,l,"url"),f=h.filter(t=>a.has(t.tileSource)));const p=l.length,g=Math.min(u-p,f.length),m=u-p-g;let w=0,y=0,v=h.reduce((t,e)=>(s.has(e.tileSource)&&y<m&&(e.title=(0,$t.em)(e.title,e.domain??e.url),t.push(e),y+=1),a.has(e.tileSource)&&w<g&&(t.push(e),w+=1),t),[]);return"onerow"===this.userSelectedSetting&&g>0&&(this.columnArrangement===b.j1.c1||this.columnArrangement===b.j1.c2)&&(v=this.getOneColOrTwoColTopSites(h,g,m,u,[])),t=[...(0,Ft.q)(v,l)],t}getOneColOrTwoColTopSites(t,e,n,i,r){const o=new Set([-5,-4,0,7,8,2]),s=new Set([-8,-7]),a=new Set([4,3]);let c=[];const u=[],d=[];let l=[],h=0;for(const n of t)s.has(n.tileSource)?l.push(n):o.has(n.tileSource)?u.push(n):a.has(n.tileSource)&&h<e&&(d.push(n),h+=1);this.columnArrangement===b.j1.c1&&l.length<1?l=r.slice(0,1):this.columnArrangement===b.j1.c2&&l.length<2&&(l=r.length>l.length?r.slice(0,2):l);const f=l.length+u.length-n;f>0&&u.splice(0,f);const p=u.slice(0,i-(d.length+l.length));return c=[...d,...l,...p],c}getTopSites(){const t=Ue(this.isRuby?this.getRubyOrderedTopSites():this.getOrderedTopSites());if(!this.isRuby&&this.displayCopilotInTopSites){const e=this.copilotTopSiteUrl.replace(/\/$/,""),n=t.findIndex(t=>(t.url||"").replace(/\/$/,"")===e),i=-1!==n,r=!!(c.N9?.()||{})[e],o=t.some(t=>(t.url||"").replace(/\/$/,"").includes("https://m365.cloud.microsoft/chat")&&1===t.dragDropType),s=this.activeTopSiteItem&&(this.activeTopSiteItem.url||"").replace(/\/$/,"")===e&&-1===this.activeTopSiteItem.dragDropType;let a=!1;try{const t=(0,p.Lg)().getItem(_.ve);if(t){const n=JSON.parse(t),i=n?.data;Array.isArray(i)&&(a=i.some(t=>(t?.url||"").replace(/\/$/,"")===e))}}catch(t){(0,B.c_)(t,O.gQ_,"TopSitesEdgeNextWC: Error parsing unpinned topsites from local storage")}const u=Math.min(this.copilotTopSiteIndex,t.length),d=new Set([-7,-8,2]),l=t[u],h=l&&d.has(l.tileSource);if(i||h||r||o){if(i&&!r){const e=t[n];e&&(e.dragDropType=a||s?-1:1)}}else{const e={rid:-1e3,dataGenerationTime:void 0,faviconUrl:_.Tj,domain:void 0,title:this.strings.m365CopilotAppName??"M365 Copilot",tileSource:-5,tileTitleSource:void 0,url:this.copilotTopSiteUrl,direction:document?.dir,enforcement:void 0,isSponsored:!1,dragDropType:a||s?-1:1,slot:u};t.splice(u,0,e);try{if(this.dragDropService){const t=this.dragDropService.getFixedTopSites?.().some(t=>t.rid===e.rid);t||this.dragDropService.addTopSite({...e,dragDropType:e.dragDropType})}}catch(t){(0,B.c_)(t,O.gQ_,"TopSitesEdgeNextWC: Error adding copilot site to dragDropService")}}}if(!t?.length)return this.userSelectedSetting&&"off"==this.userSelectedSetting||this.zeroTopSitesErrorHandler(),[];const e=[],n=this.maxActualTile;return t.forEach((t,i)=>{if(n<i)return;if(this.config.overrideIconsList?.length>0&&this.topSiteMapper.size>0)if(this.topSiteMapper.get(t.url))t.faviconUrl=this.topSiteMapper.get(t.url);else{const e=(0,$t.yM)(t.url);this.topSiteMapper.get(e)&&(t.faviconUrl=this.topSiteMapper.get(e))}_.sT&&_.sT[t.url]&&(t.faviconUrl=c.VG(_.sT[t.url])),_.W3&&_.W3[t.url]&&(t.title=_.W3[t.url]);const r=new Ne.u(t.url),{topSitesAffiliates:o,affiliateLinkOverrides:s}=this.config;o&&o[r.domainPathAndQuery]&&"/"!==o[r.domainPathAndQuery]&&2===t.tileSource&&_.IQ.test(o[r.domainPathAndQuery])&&(t.url=t.url.replace(/\/$/,"")+o[r.domainPathAndQuery]),s&&this.handleAffiliateOverrides(r,t);const a={...t,adLabelType:this.config.adLabelType},u=this.userSelectedSetting?this.tilesxColxRowsMap[this.userSelectedSetting]?.[this.columnArrangement]?.default?.maxRowTileCount:null,d=((t,e,n,i)=>{if(!t)return;const{tileSourcePrefix:r,isCuratedOrPromoted:o}=Tt(e),s=U.b5.TopSites;let a=Ct.tsn,c=kt;o&&(a=e.title,c=e.url);const u=i?Math.floor(n/i)+1:null,d=i?n%i+1:null;return{topSiteTile:(0,W.g)(`${r}_${K}`,{headline:a,type:s},U.MS.View,U.EG.View,{overrideDestinationUrl:c,ext:{hl:a,row:u,col:d}}),destination:(0,W.g)(`${r}_${X}${"https://www.bing.com/work"===e.url?">top-sites-bookmarks-tile-click":""}`,{headline:a,type:s},U.MS.Navigate,U.EG.Click,{overrideDestinationUrl:c}),moreOption:(0,W.g)(`${r}_${Y}`,{headline:`${Ct.moreOption}_${a}`,type:s},U.MS.More,{overrideDestinationUrl:c}),unpin:(0,W.g)(`${r}_${pt}`,{headline:`${Ct.unpin}_${a}`,type:s},U.MS.Unpin,{overrideDestinationUrl:c}),pin:(0,W.g)(`${r}_${gt}`,{headline:`${Ct.pin}_${a}`,type:s},U.MS.Pin,{overrideDestinationUrl:c})}})(this.telemetryObject,a,i,u);let l=(-6===a.tileSource||-7===a.tileSource)&&d&&d.unpin&&d.unpin.getMetadataTag();1===a.dragDropType&&(l=d&&d.pin&&d.pin.getMetadataTag()),e.push({...a,contextMenuLabel:this.strings.contextMenuLabel,contentViewTelemetryTag:d&&d.topSiteTile&&d.topSiteTile.getMetadataTag(),anchorTelemetryTag:d&&d.destination&&d.destination.getMetadataTag(),toggleActionMenuButtonTelemetryTag:d&&d.moreOption&&d.moreOption.getMetadataTag(),promote:1===a.dragDropType,pinLabel:1===a.dragDropType?this.strings.unpinSite:this.strings.pinSite,pinActionButtonTelemetryTag:l})}),e}handleAffiliateOverrides(t,e){const n=this.config.affiliateLinkOverrides;0===e.tileSource&&n[t.domainAndPath]&&"/"!==n[t.domainAndPath]&&this.config.enableAffiliateOverride&&!t.hasQuery&&(e.url=n[t.domain],e.tileSource=2,e.isSponsored=!0,Dt.YT.addOrUpdateTmplProperty("tsaffov","4"))}getTopSitesPlaceHolders(){const t=[];if(this.currentTilesNumber<this.maxTiles&&(t.push({addTileSupported:!0,onAddTopSiteClick:this.toggleAddDialog,addTileLabel:this.strings.addTileLabel,ariaLabel:this.strings.ariaLabel_addTile,addTopSiteButtonTelemetryTag:this.topSitesTelemetryContext?.topSitePlaceHolderAddSite?.getMetadataTag()}),this.currentTilesNumber++),this.topSitesLayoutDataConnector){let t=0;if("onerow"==this.selectedQuickLinksDisplaySetting||"tworows"==this.selectedQuickLinksDisplaySetting){const e=this.tilesxColxRowsMap[this.selectedQuickLinksDisplaySetting][this.columnArrangement]?.default?.maxRowTileCount;e&&(t=this.currentTilesNumber>e?2:1)}else"off"==this.selectedQuickLinksDisplaySetting&&(t=0);t!==this.topSitesLayoutState.actualRowCount&&this.topSitesLayoutDataConnector?.updateActualRowCount(t)}return t}disableCurated(){this.isDisableDefaultInProgress=!0;const t=this.chromiumPageSettingState,e={hideDefaultTopSites:!t.hideDefaultTopSites,currentBackgroundImageType:t.currentBackgroundImageType,originalLayout:t.currentLayout,currentLayout:"custom",greetingEnabled:t.greetingEnabled,imageOfTheDayEnabled:t.imageOfTheDayEnabled,selectedQuickLinksDisplaySetting:t.selectedQuickLinksDisplaySetting,selectedFeedDisplaySetting:t.selectedFeedDisplaySetting};this.pageSettingsConnector&&(this.pageSettingsConnector.updateLayout(e),this.getOrUpdateTopSites(),this.toggleUndoToast(),this.isDisableDefaultInProgress=!1,(0,Mt.i6)(T.v$w))}getAddShortcutTitle(){return this.isRuby?this.strings?.rubyAddText??"New":this.strings?.addShortcutTitle?this.strings.addShortcutTitle:"Add shortcut"}async waitForSelectedQuickLinksReady(){const t=new S.e,e=n=>{n.isLoadCompleted&&n.selectedQuickLinksDisplaySetting&&((0,_t.aD)(k.h$,e),t.set())};(0,_t.vQ)(k.h$,e),await t.getResultAsync()}initializeTopSitesState(){this.sitesClassName="expanded-sites",this.topSitesTelemetryContext=(t=>{if(!t)return;const e=U.b5.TopSites;return{topSitePlaceHolderAddSite:(0,W.g)(ut,{headline:Ct.addSite,type:e},U.MS.Add,{overrideDestinationUrl:kt}),topSiteCommon:(0,W.g)(`${dt}`,{headline:Ct.container,type:e},U.MS.View,{overrideDestinationUrl:kt}),saveAdd:(0,W.g)(`${dt}_${ct}_${ot}`,{headline:Ct.add,type:e},U.MS.Save,{overrideDestinationUrl:kt}),cancelAdd:(0,W.g)(`${dt}_${ct}_${it}`,{headline:Ct.cancel,type:e},U.MS.Cancel,{overrideDestinationUrl:kt}),closeAddDialog:(0,W.g)(`${dt}_${ct}_${nt}`,{headline:Ct.close,type:e},U.MS.Close,{overrideDestinationUrl:kt}),clickCarouselNextButton:(0,W.g)(`${dt}_${wt}_${yt}`,{headline:Ct.carouselClick,type:e},U.MS.Click,{overrideDestinationUrl:kt}),clickCarouselPreButton:(0,W.g)(`${dt}_${wt}_${vt}`,{headline:Ct.carouselClick,type:e},U.MS.Click,{overrideDestinationUrl:kt}),clickAddNameInput:(0,W.g)(`${dt}_${ct}_${bt}`,{headline:Ct.inputName,type:e},U.MS.Click,{overrideDestinationUrl:kt}),clickAddUrlInput:(0,W.g)(`${dt}_${ct}_${St}`,{headline:Ct.inputUrl,type:e},U.MS.Click,{overrideDestinationUrl:kt})}})(this.telemetryObject),this.topSiteActionTelemetryContext=(t=>{if(!t)return;const e=U.b5.TopSites;return{removeTopSite:(0,W.g)(`${tt}`,{headline:`${Ct.remove} ${Ct.tsn}`,type:e},U.MS.Remove,{overrideDestinationUrl:kt}),undoRemoveTopSite:(0,W.g)(`${Z}_${et}`,{headline:`${Ct.undoRemove} ${Ct.tsn}`,type:e},U.MS.UndoRemove,{overrideDestinationUrl:kt}),closeRemoveToast:(0,W.g)(`${Z}_${nt}`,{headline:Ct.close,type:e},U.MS.Close,{overrideDestinationUrl:kt}),editDialog:(0,W.g)(`${dt}_${rt}`,{headline:`${Ct.rename} ${Ct.tsn}`,type:e},U.MS.Rename,{overrideDestinationUrl:kt}),closeEditDialog:(0,W.g)(`${dt}_${at}_${nt}`,{headline:Ct.close,type:e},U.MS.Close,{overrideDestinationUrl:kt}),saveEdit:(0,W.g)(`${dt}_${at}_${ot}`,{headline:Ct.save,type:e},U.MS.Save,{overrideDestinationUrl:kt}),cancelEdit:(0,W.g)(`${dt}_${at}_${it}`,{headline:Ct.cancel,type:e},U.MS.Cancel,{overrideDestinationUrl:kt}),turnOnPreview:(0,W.g)(`${dt}_${lt}`,{headline:Ct.turnOnPreview,type:e},U.MS.TurnOn,{overrideDestinationUrl:kt}),turnOffPreview:(0,W.g)(`${dt}_${ht}`,{headline:Ct.turnOffPreview,type:e},U.MS.TurnOff,{overrideDestinationUrl:kt}),pinningTopSite:(0,W.g)(`${dt}_${ft}`,{headline:Ct.topsiteTaskbarpin,type:e},U.MS.Pin,{overrideDestinationUrl:kt}),pinningTopSiteInQuickLinks:(0,W.g)(`${dt}_${gt}`,{headline:Ct.pin,type:e},U.MS.Pin,{overrideDestinationUrl:kt}),clickEditNameInput:(0,W.g)(`${dt}_${bt}`,{headline:Ct.inputName,type:e},U.MS.Click,U.EG.Click,{overrideDestinationUrl:kt})}})(this.telemetryObject),this.topSiteCommonTelemetryTag=this.topSitesTelemetryContext?.topSiteCommon?.getMetadataTag()}ShowPinningWizardCampaign(){D.uq.notifyTriggerEvent(D.SX.NTP_TOP_SITES_CLICK).then(t=>{t&&!t.success&&(0,B.vV)(O.P1Y,"TopSitesEdgeNextWC: "+t.Message)}).catch(t=>{(0,B.c_)(t,O.P1Y,"TopSitesEdgeNextWC: Failed to call window.chrome.edgeNurturingPrivate.NotifyTriggerEvent chromium API")})}reRenderTopsite(t=!1){const e=this.getCurrentLayoutConfig();this.maxTiles=e.tile,this.extraAddedSitesClassName=e.class,t?this.getOrUpdateTopSites():this.renderTopsite()}renderTopsite(){window.requestAnimationFrame(()=>{window.setTimeout(()=>{this.getOrUpdateTopSites()},0)})}zeroTopSitesErrorHandler(){(0,B.vV)(O.TUW,"Zero top sites returned",void 0,{shouldSampleErrorsForTreatement1:!0})}initializeDragDropService(){this.dragDropService=new De(this,{container:this.topSitesContainerPromise,disableDragDrop:!this.config.draggable}),this.dragDropService.initializeService()}shouldDropTopSite(t){const e=0==t.url.indexOf("http://")?t.url.replace("http://","https://"):t.url,n=this.config.blockedDomains||_.QH;if(n)for(let t=0;t<n.length;t++){const i=n[t];if(e.startsWith(i.url)&&(!i.exc||!i.exc.find(t=>e.includes(t))))return!0}return!1}removeBlockedSites(t){return t?t.filter(t=>{if(0==t.tileSource){if(this.shouldDropTopSite(t))return Dt.YT.addOrUpdateTmplProperty("RemSE","1"),!1;if(this.config.enableAffiliateOverride&&this.config.affiliateLinkOverrides)return!Object.values(this.config.affiliateLinkOverrides).includes(t.url)}return!0}):null}getTileSource(t,e){return t?e?-7:-6:e?-8:-5}updateAffiliateAutoAppendTileSource(t){const{topSitesAffiliates:e}=this.config;t.forEach(t=>{const n=new Ne.u(t.url);e[n.domain]&&"/"!==e[n.domain]&&0==t.tileSource&&(t.tileSource=2,t.isSponsored=!0)})}getOverrideIconList(){const t=[];for(const e of this.config?.overrideIconsList)t.push(e);return(this.config?.curatedSites?.filter(t=>t.isSponsored).map(t=>({faviconUrl:t.faviconUrl,faviconId:t.faviconId,identifierHosts:[t.url]}))??[]).concat(t)}focusedAndNotAlways(){const{selectedFeedDisplaySetting:t,currentBackgroundImageType:e}=this.chromiumPageSettingState;return["peek","headingsonly","off"].includes(t)&&"off"===e}topsiteItemContainerTelemetry(){if(this.isActionMenuOpen&&this.activeTopSiteItem)return this.activeTopSiteItem.anchorTelemetryTag}actionsMenuTelemetry(){if(this.isActionMenuOpen&&this.activeTopSiteItem){const t=this.topSites.findIndex(t=>t.url===this.activeTopSiteItem.url);if(t>=0)return function(t,e){return(0,W.g)(`${mt}_${e}`,{headline:Ct.ActionMenu,type:U.b5.TopSites},U.MS.Show,{overrideDestinationUrl:kt})}(this.telemetryObject,t+1).getMetadataTag()}}preventClickOnTopSite(t){t?.preventDefault()}getTopSiteTemplateUrl(t){return t.url}processMinimumVisitAffiliateFeatureState(){if(!this.pageSettingsConnector||!this.chromiumPageSettingState)return;const t=this.pageSettingsConnector.isMinimumVisitAffiliateSitesPreferenceAvailable(),e=this.chromiumPageSettingState.configData?.enabledFeatures?.includes("msAffiliateSitesMinVisitCountReduction");this.isMinVisitAffiliateSitesFeatureActive=t&&e}persistMinVisitAffiliateInfo(){const t=[];let e=!1;this.config?.topSitesAffiliates&&(e=!0,this.parseAffiliateSites(t,"autoAppend")),this.config?.enableAffiliateOverride&&this.config?.affiliateLinkOverrides&&(e=!0,this.parseAffiliateSites(t,"override")),e&&this.ntpSettingsPrivateApiHandle?.setPref&&this.ntpSettingsPrivateApiHandle.setPref(u.JW.minVisitAffiliateSites,t)}parseAffiliateSites(t,e){const{affiliateLinkOverrides:n,topSitesAffiliates:i}=this.config,r="override"===e?n:i;Object.entries(r).forEach(n=>{if(!n[0]||!n[1]||"/"===n[1])return;const i={domainAndMaybePath:"https://"+n[0]+"/",url:"override"===e?n[1]:"https://"+n[0]+n[1]};t.push(i)})}scrollToPosition(){this.ref_stripe?.scrollToPosition(this.scrollDirection*this.widthPerPage*this.carouselPageIndex)}onFlipperClick(t){const e=this.carouselPageIndex+(t?this.carouselColsPerSlide:-this.carouselColsPerSlide);this.carouselPageIndex=Math.max(0,e),this.scrollToPosition()}initCanLoadHoverElements(){this.config.enableElementsLazyLoad||(this.canLoadHoverElements=!0)}handleTopSiteMouseEnter(t,e){this.canLoadHoverElements||(this.canLoadHoverElements=!0),t&&e&&this.preloadManager?.startTrackingElementForPreload(t,e)}handleTopSiteLinkFocus(){this.canLoadHoverElements||(this.canLoadHoverElements=!0)}logTileActivatedClick(t){const e=window?.chrome?.ntpSettingsPrivate?.logTopSitesTileActivated,n=window?.chrome?.ntpSettingsPrivate?.TopSitesTileSource;if(e&&n){let i=n.OTHER;0===t.tileSource||2===t.tileSource?i=n.MOST_VISITED:3===t.tileSource?i=n.CUSTOM_LINK:7===t.tileSource&&n.NEXT_SITES?i=n.NEXT_SITES:8===t.tileSource&&n.PROMOTED_MEDIA_SITES&&(i=n.PROMOTED_MEDIA_SITES);const r=this.topSites.indexOf(t);if(-1!==r)if(isNaN(this.ntpApiVersion)||this.ntpApiVersion<1)e(i,r);else{e(i,r,this.topSites.filter(e=>e.tileSource===t.tileSource).indexOf(t),t.url)}}return!0}dedupeCuratedSitesByTitle(t,e){const n=e.map(t=>t.title?.toLocaleLowerCase()),i=t.filter(t=>!n.includes(t.title?.toLocaleLowerCase()));return Dt.YT.addOrUpdateTmplProperty("tsDedupeCount",String(t.length-i.length)),i}checkTopSitesIcon(){window.setTimeout(()=>{const t=this.isRuby?this.shadowRoot?.querySelectorAll?.(".top-site-ruby"):this.shadowRoot?.querySelectorAll?.(".top-site-next"),e=Array.from(t).map((t,e)=>{const n=this.isRuby?t.getAttribute("aria-label"):t.getAttribute("title"),i=t.querySelector(".image-container img");return{title:n,src:i?i.getAttribute("src"):"",index:e}}).filter(t=>!!t.title).map(({title:t,src:e,index:n})=>{const i=this.topSites.find(e=>e.title===t);if(i)return i.faviconUrl===e?null:{...i,index:n}}).filter(t=>!!t);if(e.length){const t=e.reduce((t,e)=>`${t}|${e.rid}_${e.index}`,`count_${e.length}`);Dt.YT.addOrUpdateTmplProperty("tsIconMismatch",t)}},3e3)}}(0,a.Cg)([xt.sH],Ze.prototype,"isLowEndDevice",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"linkTarget",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"ref_stripe",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"enableQuickBrief",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"carouselProps",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"isDarkMode",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"isRuby",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"copilotInTopSitesTelemetryTag",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"canShowCodexBingUpsellByPolicy",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"copilotTopSiteIndex",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"copilotTopSiteUrl",void 0),(0,a.Cg)([xt.Jg],Ze.prototype,"displayCopilotInTopSites",null),(0,a.Cg)([(0,At.CF)({mode:"boolean"})],Ze.prototype,"quickBriefVisible",void 0),(0,a.Cg)([xt.Jg],Ze.prototype,"shouldHidePlaceholders",null),(0,a.Cg)([xt.sH],Ze.prototype,"actionsMenuProps",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"activeTopSiteItem",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"activeTopSiteElement",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"activeContextMenuButtonElement",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"maxTiles",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"chromiumPageSettingState",void 0),(0,a.Cg)([(0,At.CF)({mode:"boolean"})],Ze.prototype,"needDarkThemeIcons",void 0),(0,a.Cg)([xt.Jg],Ze.prototype,"className",null),(0,a.Cg)([xt.sH],Ze.prototype,"extraAddedSitesClassName",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"currentTilesNumber",void 0),(0,a.Cg)([(0,At.CF)({mode:"boolean"})],Ze.prototype,"showFullPageBlur",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"userSelectedSetting",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"isAddDialogOpen",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"isActionMenuOpen",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"isEditDialogOpen",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"isUndoToastOpen",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"isPinToastOpen",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"isLtr",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"ntpApiHandle",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"sitesClassName",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"topSiteAddDialog",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"topSiteEditDialog",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"topSiteMapper",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"topSites",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"topSitesPlaceHolders",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"currentToastTag",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"undoToast",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"pinToast",void 0),(0,a.Cg)([At.CF],Ze.prototype,"selectedQuickLinksDisplaySetting",void 0),(0,a.Cg)([(0,At.CF)({mode:"boolean"})],Ze.prototype,"quickLinksToggleSpacingForBanner",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"moveUpward",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"topSiteAddedSuccessfully",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"lastAddedTopSite",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"topSiteAddDialogContainerPosition",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"topSiteEditDialogContainerPosition",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"topSiteCommonTelemetryTag",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"renderTopSiteStartAndEnd",void 0),(0,a.Cg)([xt.sH],Ze.prototype,"canLoadHoverElements",void 0),(0,a.Cg)([xt.Jg],Ze.prototype,"topSitesClassName",null),(0,a.Cg)([xt.Jg],Ze.prototype,"isInformationalLayout",null);var tn=n(67931),en=n(22870),nn=n(87122),rn=n(7040),on=n(55609),sn=n(26920),an=n(37302),cn=n(14996),un=n(48751),dn=n(10735),ln=n(86856),hn=n(45476),fn=n(41123),pn=n(95239),gn=n(92393),mn=n(43103),wn=n(74849),yn=n(32257),vn=n(39677),bn=n(63069),Sn=n(50882),Cn=n(59721);const kn="40px",Tn=wn.A` .ruby-top-sites{.top-site-ruby{border-radius:20px;background:rgba(242,236,232,0.6);border-color:rgba(255,255,255,1)}}@media (prefers-color-scheme:dark){.ruby-top-sites{.top-site-ruby{background:rgba(29,33,47,0.6);border-color:rgba(69,81,114,0.25)}}}`,xn=wn.A` .ruby-top-sites{&.${_.mk.rubyTenSites}{.top-sites{.sites{display:flex;flex-wrap:wrap;justify-content:center}}.top-site-ruby{.site-name{max-width:76px;font-weight:450}}}margin-bottom:${kn};.top-sites{--top-site-column-gap:40px;--top-site-pill-width:50px;.sites{row-gap:32px}}.top-site-ruby{display:block;cursor:pointer;width:var(--top-site-pill-width,48px);height:var(--top-site-pill-width,48px);padding:${yn.ACF};border-radius:${yn.g6L};border:${yn.KUh} solid ${yn.v45};background:${yn.JMF};display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;box-sizing:border-box;.image-container{display:flex;align-items:center;justify-content:center;width:24px;height:24px;img{width:100%}svg path{fill:${yn.C6c}}}.control{color:${yn.C6c};box-sizing:content-box;font-family:inherit;font-size:12px;font-weight:400;line-height:16px;white-space:nowrap;overflow:hidden;padding:0;text-overflow:ellipsis;text-decoration:none;height:24px;width:24px;border-radius:${vn.cbN}}.start{position:absolute;top:2px;right:10px;width:15px;height:15px;opacity:0}.end{position:absolute;top:-10px;right:-11px;width:13px;height:13px;opacity:0}& .control:after{bottom:0;content:"";height:calc(100% + 24px);left:0;position:absolute;right:0;top:0;width:100%;z-index:2}.site-name{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:64px;width:auto;background-color:transparent;color:${yn.C6c};text-align:center;border-radius:6px;padding:0px 6px;position:absolute;z-index:1;bottom:calc(-14px - ${yn.TMy});left:50%;transform:translateX(-50%);white-space:nowrap;font-weight:${yn.fNx};font-size:${yn.CuR};line-height:${yn.$LU}}.site-name.larger-font{font-size:14px}}.top-site-ruby .top-site-title span{display:inline-block;max-width:64px;overflow:hidden;text-overflow:ellipsis}.top-site-ruby:active .start,.top-site-ruby:active .end,.top-site-ruby:focus .start,.top-site-ruby:focus .end,.top-site-ruby:hover .start,.top-site-ruby:hover .end,.top-site-ruby:hover fluent-button,.top-site-ruby .start:active,.top-site-ruby .end:active,.top-site-ruby .start:focus-within,.top-site-ruby .end:focus-within{background:transparent;opacity:1;outline:none}.start-button svg path,.end-button svg path{fill:${yn.C6c}}}.ruby-top-sites-dialog{--top-site-dialog-width:357px;--top-site-dialog-button-width:65px;--top-site-dialog-margin-top:-${kn};--control-corner-radius:12;--neutral-fill-rest:rgba(246,249,252,1);--neutral-foreground-rest:#262626;--neutral-layer-floating:#ffffff;position:absolute;z-index:${Cn.P.Dialog.toString()}}fluent-button.toast-navigation-button::part(control):focus-visible{box-shadow:none}fluent-button.toast-navigation-button::part(content):focus-visible::before{height:0}#topSiteEditDialog.ruby-top-sites-dialog{--top-site-dialog-height:192px}#topSiteAddDialog.ruby-top-sites-dialog{--top-site-black-plate-width:40px;--top-site-black-plate-height:40px}@media (prefers-color-scheme:dark){.ruby-top-sites-dialog{--neutral-fill-rest:#363636;--neutral-foreground-rest:#f5f5f5;--neutral-layer-floating:#242424}}@media (forced-colors:active){fluent-button.toast-navigation-button::part(control),fluent-button.toast-close-button::part(control){border-width:1px;box-shadow:none}fluent-button.toast-close-button::part(control):focus-visible,fluent-button.toast-close-button::part(control):active,fluent-button.toast-close-button::part(control):hover,fluent-button.toast-navigation-button::part(control):focus-visible,fluent-button.toast-navigation-button::part(control):active,fluent-button.toast-navigation-button::part(control):hover{forced-color-adjust:none;background-color:${Sn.A.Highlight};border-color:${Sn.A.ButtonText};color:${Sn.A.HighlightText}}}`.withBehaviors(new bn.y(Tn)),An=t=>{const{r:e,g:n,b:i}=(0,en.H0)((0,C.ud)()?tn.KS:tn.go);return new nn.M(e,n,i,t).toStringWebRGBA()},$n=wn.A` .top-sites-responsive-pin-icon{flex-shrink:0;display:none;margin:0 5px}.top-sites .top-sites-responsive-pin-icon{line-height:26px}.top-sites .top-sites-responsive-pin-icon svg{width:14px;height:14px}`,In=wn.A` .top-site-next{background-color:transparent;border-radius:4px;box-shadow:none;display:flex;height:var(--top-site-height,84px);justify-content:center;width:var(--top-site-width,108px);position:relative;border:calc(${sn.XA} * 1px) solid transparent}.top-site-next:hover{background:var(--top-site-fill-hover,${an.Xt})}.top-site-next.top-site-f3v1b:hover{background:unset}.top-site-next:has(.control:focus){outline:none;border-color:${cn.WN}}.top-site-next .control:focus{outline:none;border:none}.top-site-next .start,.top-site-next .end{position:absolute;top:var(--top-site-margin,9px);z-index:${(Cn.P.Default+2).toString()};opacity:0}.top-site-next.small-top-sites.top-site-f3v1b .start{top:var(--top-site-action-top-position);left:var(--top-site-action-border-position)}.top-site-next.small-top-sites.top-site-f3v1b .end{top:var(--top-site-action-top-position);right:var(--top-site-action-border-position)}.top-site-next .pinned-top-site .start{pointer-events:none}.top-site-next:active .start,.top-site-next:active .end,.top-site-next:focus .start,.top-site-next:focus .end,.top-site-next:hover .start,.top-site-next:hover .end,.top-site-next:hover fluent-button,.top-site-next .start:active,.top-site-next .end:active,.top-site-next .start:focus-within,.top-site-next .end:focus-within{background:transparent;opacity:1;outline:none}.top-site-next .content-container{transition:all 0.2s ease-in-out;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;width:100%;height:100%;padding:10px 12px;border-radius:4px}.top-site-next .content-container.information-layout{padding:8px 10px;justify-content:center}.top-site-next .image{align-items:center;box-sizing:border-box;width:var(--top-site-black-plate-width,44px);height:var(--top-site-black-plate-height,44px);justify-content:center;display:flex}.top-site-next .image img{margin:0 auto;max-width:24px;height:24px}.top-site-next .title-container{display:flex;justify-content:center;margin:2px 0 0 0;width:100%}.top-site-next .control{box-sizing:content-box;color:var(--top-site-color,${un.l});font-family:inherit;font-size:12px;font-weight:400;line-height:16px;max-height:16px;max-width:100%;white-space:nowrap;overflow:hidden;padding:0;text-overflow:ellipsis;text-decoration:none}.top-site-next .control:after{bottom:0;content:"";height:100%;left:0;position:absolute;right:0;top:0;width:100%;z-index:1}.top-site-next .top-site-next-g{display:grid;gap:5px;align-items:center;grid-auto-flow:column}.top-site-next .pinned-container{display:flex;width:0;margin-inline-end:2px;flex-direction:row-reverse}.top-site-next .pinned-indicator{height:12px;width:12px;align-self:center;display:flex}.top-site-next .pinned-indicator-svg svg{width:12px;height:12px}.ad-link-label{z-index:2}.top-site-next.tstb-80{.image,.image.new-add-image{background:${An(.8)}}&:hover{.image,.image.new-add-image{background:${dn.T}}}}.top-site-next.tstb-60{.image,.image.new-add-image{background:${An(.6)}}&:hover{.image,.image.new-add-image{background:${dn.T}}}}.top-site-next.tstb-40{.image,.image.new-add-image{background:${An(.4)}}&:hover{.image,.image.new-add-image{background:${dn.T}}}}.top-site-next.tscsi{.image{border-radius:50%}}`,Pn=wn.A`
${(0,b._D)(b.j1.c3,null)}{.move-upward.six-sites{--top-sites-grid-template-column:6}}${(0,b._D)(b.j1.c3,null)}{.move-upward.nine-sites{--top-sites-grid-template-column:9}}.${_.mk.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:4}${(0,b._D)(b.j1.c2,null)}{.${_.mk.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:6}}${(0,b._D)(b.j1.c3,null)}{.${_.mk.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:7}}${(0,b._D)(b.j1.c4,null)}{.${_.mk.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:10}}.${_.mk.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:4}${(0,b._D)(b.j1.c2,null)}{.${_.mk.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:5}}${(0,b._D)(b.j1.c3,null)}{.${_.mk.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:3}}${(0,b._D)(b.j1.c4,null)}{.${_.mk.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:6}}.${_.mk.rubySites}{--top-sites-grid-template-column:4}${(0,b._D)(b.j1.c2,null)}{.${_.mk.rubySites}{--top-sites-grid-template-column:5}}${(0,b._D)(b.j1.c3,null)}{.${_.mk.rubySites}{--top-sites-grid-template-column:6}}${(0,b._D)(b.j1.c4,null)}{.${_.mk.rubySites}{--top-sites-grid-template-column:8}}.${_.mk.rubyTenSites}{--top-sites-grid-template-column:5}${(0,b._D)(b.j1.c2,null)}{.${_.mk.rubyTenSites}{--top-sites-grid-template-column:7}}${(0,b._D)(b.j1.c3,null)}{.${_.mk.rubyTenSites}{--top-sites-grid-template-column:10}}${(0,b._D)(b.j1.c4,null)}{.${_.mk.rubyTenSites}{--top-sites-grid-template-column:10}}`,Rn=wn.A``,Mn=wn.A`
msft-stripe .pre-fliper{position:absolute;left:-12px;top:calc(50% - 54px/2 - 1.5px);transform:rotate(0deg)}msft-stripe .next-fliper{position:absolute;right:80px;top:calc(50% - 54px/2 - 1.5px);transform:rotate(180deg)}`,_n=wn.A` msft-stripe .fliper{background:#3b3b3b;fill:#fff}msft-stripe .fliper:hover{background:#383838}`,En=wn.A` .all-one-line-sites{padding:0 24px}.all-one-line-sites .top-sites{--top-site-column-gap:13px}msft-stripe{margin-right:11px;--scroll-fade-next:none;--scroll-fade-previous:none}msft-stripe.strip-with-quick-brief{padding-right:15px}msft-stripe .fliper{display:flex;align-items:center;justify-content:center;background-color:white;width:24px;height:40px;border-radius:4px;cursor:pointer;box-shadow:0px 0px 2px 0px rgba(0,0,0,0.12),0px 2px 4px 0px rgba(0,0,0,0.14)}msft-stripe .fliper svg{width:20px;height:20px}msft-stripe .pre-fliper{position:absolute;left:-33px;padding-left:16px;top:calc(50% - 54px/2 - 1.5px);transform:rotate(180deg);opacity:0;transition:all .5s}.all-one-line-sites:hover msft-stripe .pre-fliper{opacity:1}msft-stripe .next-fliper{position:absolute;right:-125px;padding-left:16px;top:calc(50% - 54px/2 - 1.5px);opacity:0;transition:all .5s}.all-one-line-sites:hover msft-stripe .next-fliper{display:block;opacity:1}msft-stripe.strip-with-opacity-flipper .pre-fliper,msft-stripe.strip-with-opacity-flipper .next-fliper{display:block;opacity:0.5}msft-stripe::part(scroll-prev),msft-stripe::part(scroll-next){z-index:99}msft-stripe::part(heading-container){margin:0}msft-stripe::part(scroll-view){max-width:181px}${(0,b.H5)(b.j1.c1)}{msft-stripe::part(scroll-view){max-width:181px}}${(0,b.H5)(b.j1.c2)}{msft-stripe::part(scroll-view){max-width:271px}}${(0,b.H5)(b.j1.c3)}{msft-stripe::part(scroll-view){max-width:365px}}${(0,b.H5)(b.j1.c4)}{msft-stripe::part(scroll-view){max-width:641px}}${(0,b.H5)(b.j1.c5)}{msft-stripe::part(scroll-view){max-width:641px}}.${_.mk.carouselSites}{--top-sites-grid-template-column:20}${(0,b._D)(b.j1.c1,null)}{.${_.mk.carouselSites}{--top-sites-grid-template-column:20}}${(0,b._D)(b.j1.c2,null)}{.${_.mk.carouselSites}{--top-sites-grid-template-column:20}}${(0,b._D)(b.j1.c3,null)}{.${_.mk.carouselSites}{--top-sites-grid-template-column:20}}${(0,b._D)(b.j1.c4,null)}{.${_.mk.carouselSites}{--top-sites-grid-template-column:20}}`.withBehaviors(new ln.t(Rn,Mn),new mn.N(null,_n)),Fn=wn.A` :host{width:100%;--menu-max-width:210px;--menu-min-width:160px;--top-site-dialog-z-index:900}.long-width-menu{--menu-max-width:360px}.ruby-long-width-menu{--menu-max-width:360px;--menu-min-width:246px;--control-corner-radius:12}.ruby-long-width-menu::part(menu){--fill-color:#ffffff}msn-actions-menu::part(menu-region){z-index:700}.root{display:flex;background-color:transparent;flex-direction:row;justify-content:center;position:relative;transition:transform .3s ease-out;z-index:301;--top-site-margin:4px;--outline-width:2}.expanded-sites{opacity:1;visibility:inherit}.expanded-sites-large{opacity:1;visibility:inherit}.dot-separator{margin-left:2px;margin-right:2px;font-size:9px}msft-top-site-placeholder fluent-button::part(content){height:16px}.add-button{width:100%;height:100%}.add-button svg{width:16px;height:16px;pointer-events:none}.add-button span{display:none}.add-dialog-show{display:block}.add-dialog-hide{display:none}.sites{display:grid;grid-template-columns:repeat(var(--top-sites-grid-template-column,8),auto);transition:opacity 0.3s ease-out;row-gap:8px;overflow:hidden}.top-sites > .sites{row-gap:10px;column-gap:var(--top-site-column-gap);overflow:visible;transition:none}.sites .start-button,.sites .end-button{width:24px;height:24px;min-width:24px;display:flex;justify-content:center}.sites .end-button-medium{width:24px;height:24px;min-width:24px;display:flex;justify-content:center;margin-right:7px}.sites .end-button-large{width:24px;height:24px;min-width:24px;display:flex;justify-content:center;margin-right:7px;--top-site-color:${(0,C.ud)()?"#FFFFFF":"#000000"}}.sites .start-button:hover,.sites .end-button:hover{background:var(--top-site-action-icon-hover,${hn.oO})}.sites .option-icon{width:14px;height:14px}.sites path{fill:var(--top-site-color,${un.l})}@media screen and (-ms-high-contrast:active){.sites path{fill:currentColor}}.sites fluent-button{background:transparent}.suggestion-title{font-weight:600;font-size:${fn.K};line-height:20px}.suggestion-body{margin-top:16px;display:flex}.suggestion-body msft-top-site,.suggestion-body .top-site-next{transition:all 0.2s ease-in-out;border-radius:4px;background:${dn.T};box-shadow:0px 1.6px 3.6px rgb(0 0 0 / 13%),0px 0px 2.9px rgb(0 0 0 / 11%);cursor:default;width:104px}.suggestion-body .suggested-top-site{margin-inline-end:12px}.suggestion-body .suggested-top-site:last-child{margin-inline-end:0px}.suggestion-body msft-top-site:hover,.suggestion-body .top-site-next:hover{background:${dn.T};box-shadow:0px 3.2px 7.2px rgb(0 0 0 / 13%),0px 0px 3.8px rgb(0 0 0 / 11%)}.suggestion-body .top-site-next .control{display:inline}.toast-root{position:absolute;left:50%;transform:translate(-50%,0);width:fit-content;max-width:95%;z-index:700;--fill-color:${(()=>{const t=(0,rn.k6)(()=>tn.kJ)(on.Ay);return(0,C.ud)()?tn.z4:t})()};--neutral-foreground-rest:${(()=>{const t=(0,rn.k6)(()=>tn.kJ)(on.Ay);return(0,C.ud)()?t:tn.z4})()};--accent-foreground-rest:${(0,C.ud)()?"#006CBE":"#63ADE5"};--toast-message-max-width:287px}msn-toast::part(toast-root){color:${un.l};background:${pn.p};outline:1px solid rgba(0,0,0,0.1)}.toast-close-button{background:transparent}fluent-button.toast-navigation-button::part(control){border:2px solid transparent}fluent-button.toast-navigation-button::part(control):focus-visible{border:2px solid var(--focus-stroke-outer);box-shadow:0 0 0 2px var(--focus-stroke-outer)}fluent-button.toast-navigation-button::part(content)::before{height:0}.toast-navigation-button{margin-inline-start:4px;background:transparent;color:${gn.W_}}.toast-navigation-button-accent{margin-inline-start:4px;--design-unit:3.2;--control-corner-radius:4}.top-sites{position:relative;--top-site-backplate-color:rgba(255,255,255,0.8);--top-site-backplate-border-color:rgba(0,0,0,0.05);--top-site-pill-width:77px;--top-site-pill-height:58px;--top-site-column-gap:6px;--top-site-border-width:1px}.top-sites.top-site-s2tss{--top-site-pill-width:81px;--top-site-pill-height:62px}.top-sites > .sites{--top-site-pill-calculated-width:calc(var(--top-site-pill-width) + var(--top-site-border-width) * 2);max-width:calc(var(--top-site-pill-calculated-width) * var(--top-sites-grid-template-column) + var(--top-site-column-gap) * (var(--top-sites-grid-template-column) - 1));grid-template-columns:repeat(auto-fit,var(--top-site-pill-calculated-width))}@media (prefers-color-scheme:dark){.top-sites{--top-site-backplate-color:rgba(0,0,0,0.4)}.ruby-long-width-menu::part(menu){--fill-color:#242424}msn-actions-menu::part(icon){filter:invert(1)}}.topSitesLightOnBackgroundImage{--top-site-fill-hover:rgba(229,229,229,0.3);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(234,234,234,0.42);--top-site-placeholder-backplate-fill:rgba(229,229,229,0.7);--neutral-foreground-hint:rgba(255,255,255,0.54)}.topSitesDarkOnBackgroundImage{--top-site-fill-hover:rgba(66,66,66,0.4);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(36,36,36,0.42);--neutral-foreground-hint:rgba(255,255,255,0.54)}.topSitesDark{--top-site-fill-hover:rgba(0,0,0,0.3);--top-site-color:#FFFFFF;--top-site-placeholder-backplate-fill:transparent}.topSitesLight{--top-site-fill-hover:rgba(229,229,229,0.3);--top-site-color:rgba(0,0,0,0.83);--top-site-placeholder-backplate-fill:transparent}.with-back-plate path{fill:${un.l}}.top-site-next.drag-chosen:not(.top-site-f3v1b){background:var(--top-site-fill-hover,var(--neutral-fill-hover))}.top-site-next.drag-chosen__no-hover{background:transparent !important}.top-site-next.drag-dragged{background:transparent}.top-site-next.small-top-sites{height:80px;width:104px}.top-site-next.small-top-sites.information-layout{height:75px;width:99px}msft-top-site::part(image),.top-site-next .image{background:${dn.T};border-radius:4px}msft-top-site::part(image),.add-placeholder.top-site-f3v1b .image{background:transparent}msft-top-site::part(image),.add-placeholder.top-site-f3v1b .image.new-add-image{background:${dn.T}}msft-top-site::part(imageMSB){background:#0078D4;border-radius:4px}.top-site-next.pill-top-site .image{box-shadow:0px 2px 4px rgb(0 0 0 / 10%);border-radius:12px}.top-site-next.pill-top-site fluent-button{border-radius:4px}.top-site-next.pill-top-site{border-radius:6px}.top-site-next.pinned-top-site .start{pointer-events:none}.top-site-next .control{padding:0;margin:0}.top-site-next .top-site-title{display:flex;justify-content:center;align-items:center}.top-site-next .top-site-title-large-tile{display:flex;justify-content:center;align-items:center;color:${(0,C.ud)()?"white":"black"};--top-site-color:${(0,C.ud)()?"white":"black"}}.top-site-next .top-site-title span{overflow:hidden;text-overflow:ellipsis}.top-site-next .top-site-title-large-tile a{overflow:hidden;text-overflow:ellipsis}.top-site-next .badge{padding:1px 5px;border-radius:12px;flex:none;min-width:16px;background-color:#EDEDED;color:#0078D4;margin-inline-start:4px;font-size:10px;line-height:13px;height:16px;font-weight:400;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box;max-width:215px;transition:all 0.2s ease-in-out}msft-top-site-placeholder{height:88px}msft-top-site-placeholder.small-top-sites{height:84px}msft-top-site-placeholder.small-top-sites.information-layout{height:75px;width:99px}.top-site-next.small-top-sites.top-site-f3v1b{--top-site-black-plate-height:36px;--top-site-black-plate-width:36px;--top-site-hover-backplate-width:90px;--top-site-hover-backplate-height:78px;--top-site-action-icon-hover:rgba(0,0,0,0.05);--top-site-action-top-position:-5px;--top-site-action-border-position:-4px;--top-site-anchor-left-fix:-10px;--top-site-fill-hover:transparent;width:var(--top-site-pill-width);height:var(--top-site-pill-height)}.top-site-next.small-top-sites.top-site-f3v1b.top-site-s2ts{--top-site-black-plate-height:40px;--top-site-black-plate-width:40px;--top-site-action-border-position:-6px}.top-site-next.small-top-sites.top-site-f3v1b .image svg{--top-site-color:#FFFFFF}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{--top-site-color:#242424}@media (prefers-color-scheme:light){.top-site-next.small-top-sites.top-site-f3v1b .image svg{--top-site-fill-hover:#FFFFFF}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{--top-site-color:#242424}}@media (prefers-color-scheme:dark){.top-site-next.small-top-sites.top-site-f3v1b .image svg{--top-site-color:#FFFFFF}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{--top-site-color:#ADADAD}.top-site-next.small-top-sites.top-site-f3v1b{--top-site-action-icon-hover:rgba(255,255,255,0.05)}}.top-site-next.small-top-sites.top-site-f3v1b::before{transition:all 0.5s ease-in-out}.top-site-next.small-top-sites.top-site-f3v1b .content-container{padding:0}.top-site-next.small-top-sites.top-site-f3v1b .content-container{justify-content:center}.top-site-next.small-top-sites.top-site-f3v1b .image img{max-width:24px;height:24px}.top-site-next.small-top-sites.top-site-f3v1b .image svg{width:20px;height:20px}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{width:15px;height:15px}@media (max-width:1097px){:host{--top-sites-grid-template-column:4}.ten-sites{--top-sites-grid-template-column:5}.eight-sites{--top-sites-grid-template-column:8}.six-sites{--top-sites-grid-template-column:3}}@media (min-width:1098px){:host{--top-sites-grid-template-column:8}.ten-sites{--top-sites-grid-template-column:10}.expanded-sites{min-height:90px}.expanded-sites.information-layout{min-height:75px}.expanded-sites-large{min-height:72.9px}}.top-sites > .expanded-sites{min-height:unset}.top-site-add-success{position:absolute;top:40px;left:-10000px}.pinned-indicator{width:12px;height:12px}#dismissButtonId{margin-top:1px}.topsite-info{float:inline-end}.top-site-next .start{inset-inline-start:var(--top-site-margin,9px)}.top-site-next .end{inset-inline-end:var(--top-site-margin,9px)}msn-actions-menu::part(icon-img){width:20px}${Pn} ${$n} ${In} ${En} ${xn}
`,Dn=Fn,On={experienceConfigSchema:undefined};i.m.define(r.c.registry),o.KF.define(s.i.registry)},83003:function(t,e,n){n.d(e,{N5:function(){return c},Qf:function(){return i},hs:function(){return s},pL:function(){return r},y9:function(){return a}});var i,r,o=n(11372);function s(t){switch(t){case"ArticlePreview":case"article":return o.b5.Article;case"SlideshowPreview":case"slideshow":return o.b5.Gallery;case"video":case"VideoPreview":return o.b5.Video;case"WebContentPreview":return o.b5.WebContent;case"WebContentExternal":return o.b5.ExternalLink;default:return null}}!function(t){t.DGGTypePrefix="News_DGG",t.NicheTopicTypePrefix="News_NicheTopic"}(i||(i={})),function(t){t.PublisherSpotlightCard="PublisherSpotlightSDCard",t.FollowedPublishersCard="FollowedPublishersSDCard",t.DailyMomentsCard="DailyMomentsSDCard",t.NewsDailyWonderCard="News_DailyWonder",t.DailyWonderCard="DailyWonder",t.DailyWonderCopilotCard="DailyWonderHeroPrompts",t.DailyWonderHeroVideo="DailyWonderHeroVideo",t.DailyWonderQuoteCard="DailyWonderHeroQuote",t.DailyWonderVideoListCard="DailyWonderHeroRecommended",t.DailyQuizSdCard="DailyQuizSdCard",t.ShoppingBannerSdCard="ShoppingBannerSdCard",t.DailyBriefCard="DailyBrief",t.MobileTrendingSearchCard="mobile-trending-search-card",t.WidgetsNotificationsCard="widgetsNotificationsCard",t.DonationNpoCard="DonationNpoCard",t.EntertainmentPremierCard="premier-sd-card",t.EventSDCardOscarsPrm="EventSDCardOscarsPrm",t.BingDailyQuizCard="bing-daily-quiz-card",t.RichCalendarCard="RichCalendarSD",t.DailyGreetingCard="DailyGreeting",t.EventSDCardElectionMIT1="EventSDCardElectionMIT1",t.EventSDCardElectionMIT2="EventSDCardElectionMIT2",t.EventSDCardElectionMIT3="EventSDCardElectionMIT3",t.EventContentCardENIN1="eventcontentcardenin1",t.CommunityCard="CommunityInfo",t.HotListCard="hotlist",t.TabbedInfopaneCard="tabbedinfopane",t.TabbedInfopaneCardTab="tabbed-infopane-tab",t.MangaCard="MangaCard",t.MangaCarousel="MangaCarousel",t.MangaParentPageCarousel="MangaParentPageCarousel",t.MangaReadMoreCarousel="MangaReadMoreCarousel",t.MangaTrendingCarousel="MangaTrendingCarousel",t.MobileVideoSdCard="MobileVideoSdCard",t.VideoShoppingCarouselCard="VideoShoppingCarousel",t.RealEstateCard="real-estate-card",t.RealEstateCarousel="RealEstateCarousel",t.RealEstateCardReact="RealEstateCardReact",t.PrismCarouselCard="PrismFeedCarousel",t.TrendingSearchCard="TrendingSearchCard",t.CommuteCard="CommuteMetadata",t.DigestCard="digest-card",t.Article="article",t.Slideshow="slideshow",t.Video="video",t.Spotlight="content360",t.Infopane="infopane",t.TabbedInfopane="tabbedInfopane",t.GemCard="GemCard",t.GemRiverCard="GemRiverCard",t.GemGreeting="GemGreeting",t.GemInsight="GemInsight",t.GemPrompts="GemPrompts",t.GemShopping="GemShopping",t.GemArticle="GemArticle",t.Gem_Article_RelatedArticles="Gem_Article_RelatedArticles",t.Gem_Finance_GetCharts="Gem_Finance_GetCharts",t.Gem_GenAIContent_InsightSummary="Gem_GenAIContent_InsightSummary",t.Gem_LargeSummary="GemLargeSummary",t.Gem_Media_Image="Gem_Media_Image",t.Gem_Prompts="Gem_Prompts",t.HeroGem="HeroGem",t.RiverGem="RiverGem",t.TopSectionNews="TopSectionNews",t.HalfPane="HalfPane",t.HeadToHead="HeadToHead",t.Mosaic="Mosaic",t.Triptych="Triptych",t.TabbedInfopaneTab="tabbedInfopaneTab",t.WebContent="webcontent",t.ExternalLink="link",t.ChannelCarousel="followCarousel",t.ChannelFilterCard="filteredChannels",t.DynamicFilteredChannel="dynamicfilteredchannels",t.InterestManagementCard="InterestManager",t.GamingInterestGroup="GamingInterestGroup",t.DenseList="DenseList",t.BackFillContent="BackfillContent",t.MyBriefRiverCard="toppicks",t.panoCard="panocard",t.NativeAd="nativead",t.NativeTopAd="nativetopad",t.CmsAd="cmsad",t.BuyDirectAd="directbuyad",t.AmplifyAd="amplifyad",t.BoostAd="BoostAd",t.EventSDCardAmplifyAds="EventSDCardAmplifyAds",t.FirstPartyAd="firstpartyad",t.IntraNativeAd="intra-nativead",t.ShoppingCard="ShoppingCard",t.ShoppingBWMCard="BuyWithMicrosoftCard",t.ShoppingBWMCarousel="BuyWithMicrosoftCarousel",t.EdgeShoppingCard="EdgeShoppingCard",t.ShoppingCarousel="ShoppingCarousel",t.ShoppingCarousel2="ShoppingCarousel2",t.ShoppingRiver="ShoppingRiver",t.ShoppingRiver1="ShoppingRiver1",t.ShoppingRiver2="ShoppingRiver2",t.ShoppingRiver3="ShoppingRiver3",t.EventSDCardShopping="EventSDCardShopping",t.EventInfopaneShoppingAI="EventInfopaneShoppingAI",t.ShoppingInfopaneAd1="ShoppingInfopane1",t.ShoppingInfopaneAd2="ShoppingInfopane2",t.ShoppingInfopaneAd3="ShoppingInfopane3",t.ShoppingInfopaneAd4="ShoppingInfopane4",t.Shopping1688Carousel="Shopping1688Carousel",t.ShoppingTopSectionCard="ShoppingTopSectionCard",t.ComicsCarousel="ComicsCarousel",t.EditorsPickCarousel="EditorsPickCarousel",t.SelectCarousel="SelectCarousel",t.DailyFixGamesCarousel="DailyFixGamesCarousel",t.SubscriptionCarousel="SubscriptionCarousel",t.BeaconProviderUpsell="BeaconProviderUpsell",t.MoneyTopicStripe="MoneyTopicStripe",t.SportsTopicStripe="SportsTopicStripe",t.LinkedInCard="linkedInNewsCard",t.SectionHeader="GreetingsUpsell",t.TopStories="topStories",t.TopStoriesV2="cgtopStories",t.TopStoriesRuby="TopStories",t.NewsTopStories="News_TopStories",t.TrendingNowRuby="TrendingNow",t.NewsTrendingNow="News_TrendingNow",t.LittleKnownFactsCard="LittleKnownFacts",t.NewsLittleKnownFactsCard="News_LittleKnownFacts",t.NewsGroups="newsGroups",t.NewsAnswerModule="NewsAnswerModule",t.TrendingNowCarousel="TrendingNowCarousel",t.TopStoriesCarousel="TopStoriesCarousel",t.WorkHeadlines="workNews",t.Trending="trendingnow",t.TrendingTopics="TrendingTopicsUpsellAnaheim",t.LocalNews="XfeedUpsell",t.LocalNewsFeed="LocalNewsFeed",t.SageGroupedFeed="SageGroupedFeed",t.TrendingInTenMinutes="trendingInTenMinutes",t.Horoscope="Horoscope",t.Elections="EventSDCardElection",t.OnThisDay="OnThisDay",t.OnThisDaySDCard="OnThisDaySDCard",t.LocalEventsSDCard="LocalEventsSDCard",t.PartnerUpsell="PartnerUpsell",t.Qna="qnacard",t.quizcard="quizcard",t.Recipes="recipecard",t.Inspiration="PrismFeedCard",t.Rewards="rewardscard",t.TravelDestinationCard="TravelDestinationCard",t.TravelDestinationCarouselCard="TravelDestinationCarouselCard",t.TravelInspirationCard="TravelInspirationCard",t.BingHealthCovid19StatsCard="Covid19Stats",t.BingHealthFitnessCard="healthcard",t.HealthTipCard="healthtipcard",t.HealthRiverCard="healthrivercard",t.PollsCard="pollscard",t.PlaceholderCard="placeholder",t.WinAppAds="WinAppAds",t.CashbackAds="CashbackAds",t.Promotion="Promotion",t.PromotedAd="PromotedAd",t.BingVideo="BingVideo",t.BingVideoCarousel="BingVideoCarousel",t.BreakingNewsNotification="BreakingNewsNotification",t.CasualGamesCarousel="CasualGamesCarousel",t.CasualGamesCarouselSubItem="CasualGamesCarouselSubItem",t.CasualGamesGroup="CasualGamesGroup",t.CasualGamesGroupSubItem="CasualGamesGroupSubItem",t.CasualGamesProng2Carousel="CasualGamesProng2Carousel",t.CasualGamesStripeCarousel="CasualGamesStripeCarousel",t.EsportsCasualGames="esportsCasualGames",t.EsportsCasualGamesMiniWidget="EsportsCasualGamesMiniWidget",t.EsportsHighlight="esportsHighlight",t.EsportsLiveStream="esportsLiveStream",t.EsportsMatch="esportsMatch",t.EsportsTournament="esportsTournament",t.EventSDCardWorldCup="EventSDCardWorldCup",t.EventSDCardWorldCup2="EventSDCardWorldCup2",t.ShoppingFeedCard="ShoppingFeedCard",t.WeatherHero="WeatherHero",t.WeatherCurrent="WeatherCurrent",t.WeatherForecast="WeatherForecast",t.WeatherMap="WeatherMap",t.WeatherSummary="WeatherSummary",t.WeatherSummaryMiniWidget="WeatherSummaryMiniWidget",t.WeatherSummary_spotlight="WeatherSummary_spotlight",t.SavedContent="SavedContent",t.StockQuote="StockQuote",t.StockQuote_spotlight="StockQuote_spotlight",t.MoneyInfo="MoneyInfo",t.MoneyInfoMiniWidget="MoneyInfoMiniWidget",t.MoneyPreWL="MoneyPreWL",t.MoneyCrypto="CryptoCard",t.MoneyMarketBrief="MarketBrief",t.MoneyMoreForYouCard="MoneyMoreForYouCard",t.FinanceSpotlightHeroPrice="FinanceSpotlightHeroPrice",t.FinanceSpotlightHeroMarket="FinanceSpotlightHeroMarket",t.FinanceSpotlightHeroRadarGraph="FinanceSpotlightHeroRadarGraph",t.FinanceHeroMarket="FinanceHeroMarket",t.FinanceHeroMarketChart="FinanceHeroMarketChart",t.FinanceHeroNews="FinanceHeroNews",t.FinanceHeroMovers="FinanceHeroMovers",t.FinanceHerowlsummary="FinanceHerowlsummary",t.FinanceHeroSuggested="FinanceHeroSuggested",t.FinanceHeroWatchlistIdeas="FinanceHeroWatchlistIdeas",t.FinanceHeroUpcomingEarnings="FinanceHeroUpcomingEarnings",t.FinanceHeroCurrencies="FinanceHeroCurrencies",t.FinanceHeroCrypto="FinanceHeroCrypto",t.ForYouNotification="ForYouNotification",t.SportsMatch="SportsMatch",t.SportsMatchMiniWidget="SportsMatchMiniWidget",t.SportsOlympics="SportsOlympics",t.SportsHeroFre="SportsHeroFre",t.SportsHeroMatchCard="SportsHeroMatchCard",t.SportsHeroLeagueTodaysEvents="SportsHeroLeagueTodaysEvents",t.SportsHeroMatch1SeasonStats="SportsHeroMatch1SeasonStats",t.SportsHeroMatch1Stats="SportsHeroMatch1Stats",t.SportsHeroMatch2SeasonStats="SportsHeroMatch2SeasonStats",t.SportsHeroMatch2Stats="SportsHeroMatch2Stats",t.SportsHeroMatch3SeasonStats="SportsHeroMatch3SeasonStats",t.SportsHeroMatch3Stats="SportsHeroMatch3Stats",t.SportsHeroMatchStatistics="SportsHeroMatchStatistics",t.SportsSpotlight2Match1="SportsSpotlight2Match1",t.SportsSpotlight2Match2="SportsSpotlight2Match2",t.SportsHeroNews="SportsHeroNews",t.SportsHeroOneVsManyEventResult="SportsHeroOneVsManyEventResult",t.SportsHeroOneVsOneEventResult="SportsHeroOneVsOneEventResult",t.SportsHeroSeasonStatistics="SportsHeroSeasonStatistics",t.SportsHeroStandingsRankings="SportsHeroStandingsRankings",t.SportsHeroTeamStandings="SportsHeroTeamStandings",t.SportsHeroTeamStandingWithEvents="SportsHeroTeamStandingWithEvents",t.SportsHeroTeamStandingWithMedals="SportsHeroTeamStandingWithMedals",t.SportsHeroTeamVsTeam="SportsHeroTeamVsTeam",t.SportsHeroTeamVsTeamEventResult="SportsHeroTeamVsTeamEventResult",t.SportsHeroVideo="SportsHeroVideo",t.SportsStackCard="SportsStackCard",t.SpotlightStackCard="SpotlightStackCard",t.PersonalFinanceStackCard="PersonalFinanceStackCard",t.TrafficDelays="TrafficDelays",t.TrafficInfo="TrafficInfo",t.Transit="Transit",t.TrafficIncidents="TrafficIncidents",t.TrafficCameras="TrafficCameras",t.TrafficCamerasWithSummary="TrafficCamerasWithSummary",t.TravelTimes="TravelTimes",t.TravelTimesWithSummary="TravelTimesWithSummary",t.TrafficMap="TrafficMap",t.TrafficNews="TrafficNews",t.TrafficTransit="TrafficTransit",t.TrafficSummary="TrafficSummary",t.ShoppingProng2c="ShoppingProng2c",t.ShoppingProngCardResponse="ShoppingProngCardResponse",t.ShoppingOfferCardResponse="ShoppingOfferCardResponse",t.ShoppingProngCarousel="ShoppingProngCarousel",t.ShoppingProngTracking="ShoppingProngTracking",t.ShoppingMerchantCategoryDeals="ShoppingMerchantCategoryDeals",t.ShoppingVideoCarousel="ShoppingVideoCarousel",t.WatchVideoCard="WatchVideoCard",t.Group="group",t.Upsell="FreUpsell",t.Dense="densetab",t.LocalGuide="localdaycard",t.Marketplace="MarketPlace",t.MarketplaceEvent="EventSDCardMarketplace",t.MoreFromProvider="morefromprovider",t.MoreForYou="MoreForYou",t.MiniWidgets="MiniWidgets",t.GamingNews="gaming",t.GamingRecentlyPlayed="GamingRecentlyPlayed",t.RecommendedInterests="RecommendedInterests",t.WindowsShellRecommendedInterests="WindowsShellRecommendedInterests",t.AutosEntityList="AutosEntityList",t.AutosCarousel="AutosCarousel",t.ContainerizedHalfu="containerizedHalfu",t.ComboCard="Combo",t.TopicFeed="TopicFeed",t.RelatedNewsCard="RelatedNewsCard",t.TopicFeedLearnSomethingNew="learnsomethingnew",t.TopicFeedDiversity="diversitycard",t.TopicFeedWeekends="eventcontentcardweekend",t.TopicFeedMomentInTime1="eventcontentcardmit1",t.TopicFeedSports="eventcontentcardsports",t.TopicFeedTrendingNow="trending now",t.TopicFeedTopStories="topstories",t.TopicFeedShopping="eventcontentcardshopping",t.TopicFeedWeather="eventdynamiccontentcardweather",t.Calendar="Calendar",t.Entertainment="Entertainment",t.Family="Family",t.M365="M365",t.Photos="Photos",t.ThirdPartyWidget="3pwidget",t.Tips="Tips",t.ToDo="ToDo",t.XboxGamePass="xboxgamepass",t.Tombstone="tombstone",t.GroupedContent="GroupedContentFeed",t.UserInterestTopic="UserInterestTopic",t.UserInterestNTPProvider="UserInterestNTPProvider",t.SuggestedInterest="SuggestedInterest",t.TopicSuggestionforConsumptionPage="TopicSuggestionforConsumptionPage",t.ProviderSuggestionForConsumptionPage="ProviderSuggestionForConsumptionPage",t.InterestFeed="InterestFeed",t.ProviderFeed="ProviderFeed",t.InterestChannel="InterestChannel",t.ProviderChannel="ProviderChannel",t.UserInterestTopicAndProvider="UserInterestTopicAndProvider",t.NewsFlipper="NewsFlipper",t.ColdStartArticleFreCard="ArticleFre",t.NewsPromotionCard="PromotionFre",t.WindowsShellTopicsCard="WindowsShellTopicsCard",t.WindowsShellNotificationBanner="genericbadge",t.RewardsDailySet="RewardsDailySet",t.BoostAdsBanner="BoostAdsBanner",t.BoostAdsCoachmark="BoostAdsCoachmark",t.EventSDCardSportsMIT1="EventSDCardSportsMIT1",t.EventSDCardSportsMIT2="EventSDCardSportsMIT2",t.EventSDCardSportsMIT3="EventSDCardSportsMIT3",t.UserInterestProvider="UserInterestProvider",t.WindowsShellMorningDigest="NewsDigest",t.TopicsAndProviders="TopicsAndProviders",t.NotificationCard="NotificationCard",t.NTPMorningDigest="MorningDigest",t.MiTHeroSpotlight="MiTHeroSpotlight",t.MiTHeroContent="MiTHeroContent",t.MiTHeroAction="MiTHeroAction",t.MiTHeroFollow="MiTHeroFollow",t.DailyMomentsCard1="DailyMomentsCard1",t.DailyMomentsCard2="DailyMomentsCard2",t.DailyMomentsCard3="DailyMomentsCard3",t.DisplayAdBanner="DisplayAdBanner",t.DisplayAdCard="DisplayAdCard",t.DisplayAd="displayad",t.CatchUpStack="CatchUpStack",t.SimilarRiver="SimilarRiver",t.GemRail="GemRail",t.TopCommentsCard="topcomments",t.CopilotCard="CopilotCard",t.CreatorSpotlight="CreatorSpotlight",t.NewsCreatorSpotlight="News_CreatorSpotlight",t.EntertainmentTakeover="EntertainmentTakeover",t.WatchGoldShorts="News_WatchGoldShorts",t.NewsWatchShorts="News_WatchShorts",t.WatchNewsShorts="News_WatchNewsShorts",t.NewsWatchVideo="News_WatchVideo",t.WatchVideoHeavy="News_WatchVideoHeavy",t.DigestCardRuby="DigestCard",t.News_DigestDaily="News_DigestDaily",t.News_DigestGem="News_DigestGem",t.News_DigestInfopane="News_DigestInfopane",t.News_DigestTopics="News_DigestTopics",t.News_DigestTopics_InfoPane="News_DigestTopics_InfoPane",t.News_DigestTopStories="News_DigestTopStories",t.News_DigestTopics_TrendingNow="News_DigestTopics_TrendingNow",t.DigestGem="DigestGem",t.DigestNews="DigestNews"}(r||(r={}));const a=Object.freeze([r.MoneyInfo,r.MoneyInfoMiniWidget,r.SportsStackCard,r.PersonalFinanceStackCard,r.CopilotCard,r.DailyBriefCard,r.DailyWonderCard,r.NewsDailyWonderCard,r.News_DigestDaily,r.News_DigestGem,r.News_DigestInfopane,r.News_DigestTopics,r.News_DigestTopStories,r.News_DigestTopics_TrendingNow,r.DailyMomentsCard,r.DigestCardRuby,r.GemCard,r.GemArticle,r.LittleKnownFactsCard,r.NewsLittleKnownFactsCard,r.SportsMatch,r.SportsMatchMiniWidget,r.SpotlightStackCard,r.EsportsCasualGames,r.EsportsCasualGamesMiniWidget,r.WeatherSummary,r.WeatherSummaryMiniWidget,r.CatchUpStack,r.TopicFeed,r.TopStoriesRuby,r.NewsTopStories,r.TrendingNowRuby,r.NewsTrendingNow,r.UserInterestNTPProvider,r.ShoppingTopSectionCard,r.ShoppingCard,r.BreakingNewsNotification,r.TopSectionNews,r.SavedContent,r.ForYouNotification,r.CreatorSpotlight,r.NewsCreatorSpotlight]),c=[r.NativeAd,r.CmsAd,r.AmplifyAd,r.EventSDCardAmplifyAds,r.BoostAd,r.BoostAdsBanner,r.BoostAdsCoachmark,r.BuyDirectAd,r.NativeTopAd,r.FirstPartyAd,r.ShoppingInfopaneAd1,r.ShoppingInfopaneAd2,r.ShoppingInfopaneAd3,r.ShoppingInfopaneAd4,r.IntraNativeAd]},83078:function(t,e,n){n.d(e,{M:function(){return s}});var i=n(88294);const r="-start";class o{constructor(){this.endMarkSuffix="-end","undefined"!=typeof window&&this.initialize(window.performance)}static getInstance(){return o.instance||(o.instance=new o),o.instance}initialize(t){this.performance=t}startMark(t){this.singleMark(t+r)}endMark(t){this.singleMark(t+this.endMarkSuffix),this.measureStartEnd(t)}singleMark(t){const e=this.performance;e&&e.mark&&(e.mark(t),i.v.log(`[PerfMarker] ${t}`))}clearMark(t){const e=this.performance;e&&e.clearMarks&&e.clearMarks(t)}clearMeasures(t){const e=this.performance;e&&e.clearMeasures&&e.clearMeasures(t)}async measurePromise(t,e){this.startMark(t);const n=await e();return this.endMark(t),n}measurePerfMarker(t){if(!this.performance)return;const e={},n=this.performance.getEntriesByType("mark");if(!n)return e;for(let i=0;i<n.length;i++){let r=n[i].name;if(!r||null==n[i].startTime)continue;if(r=r.replace(/-(end|start)$/i,""),!r.startsWith(t))continue;const o=e[r]||new a(r);o.processPerfEntry(n[i]),o.isValid&&(e[r]=o)}return e}measureStartEnd(t){const e=this.performance;if(e&&e.measure)try{e.measure(t,t+r,t+this.endMarkSuffix)}catch(e){i.v.logError(`Error while attempting to measure start/end of '${t}'. Error: ${e}`)}}}const s=o.getInstance();class a{constructor(t){this.duration=0,this.markerName=t}get isValid(){return null!=this.startTime}processPerfEntry(t){t.name.endsWith(r)?(this.firstStartTime||(this.firstStartTime=t.startTime),this.startTime=t.startTime):null!=this.startTime&&(this.duration+=t.startTime-this.startTime,this.startTime=null)}}},83542:function(t,e,n){n.d(e,{i:function(){return d}});var i=n(99382),r=n(27597),o=n(73691),s=n(33107),a=n(47475),c=n(80164),u=n(35849);(0,r.C1)(u.zP);class d{get store(){return this._subspace}get fullNamespace(){return this._fullNamespace}get configHref(){return this._configHref}set configHref(t){this._configHref=t}constructor(t,e,n,i,r,s,c,u=!1){this.namespace=t,this.parentNamespace=e,this.rootReducer=n,this.reducer=i,this.config=s,this.requestContext=c,this.isGlobal=u,this._fullNamespace=void 0!==e&&""!==e?e+"."+t:t,this.selectState=this.selectState.bind(this),this._subspace=(0,a.Vi)(this.selectState,this.namespace)(r);const d=this.perfTimeline=this.tryGetPerfTimeline(t);this.fetch=(0,o.xS)({perfTimeline:d}),n.addSubReducerForConnector(this)}getCurrentState(){const t=this.store.getState()[i.j.connectorStateKey];if(!this.isGlobal){const e=this.rootReducer.globalConnectors();0!==e.length&&e.forEach(e=>{(0,c.A)(t,e.namespace,e.getCurrentState())})}return t}onApplicationStart(){}selectState(t){return t[this.namespace]}tryGetPerfTimeline(t){const e=t.split("_"),[n]=e,i=e[e.length-1];return(0,s.S9)(n,i)}}},84080:function(t,e,n){function i(t){const e=performance.getEntriesByType("visibility-state").filter(e=>e.startTime<t);if(0===e.length)return t;let n=0;for(let i=0;i<e.length;i++){const r=e[i];"visible"===r.name&&(n+=(e[i+1]?.startTime??t)-r.startTime)}return n}n.d(e,{C:function(){return i}})},84392:function(t,e,n){n.r(e),n.d(e,{CommonSearchBoxEdgeNext:function(){return O},CommonSearchBoxEdgeNextStyles:function(){return Q},CommonSearchBoxEdgeNextTemplate:function(){return z},ToolingInfo:function(){return K}});var i=n(45841);var r=n(65614),o=n(56911),s=n(48309),a=n(28006),c=n(84855),u=n(11372),d=n(98216),l=n(55593),h=n(6092),f=n(36090),p=n(12870),g=n(87405),m=n(70487),w=n(30817),y=n(13053),v=n(89151),b=n(9192),S=n(88294),C=n(22011),k=n(77246),T=n(60815),x=n(27597),A=n(35849),$=n(11367),I=n(1732),P=n(82238),R=n(96851),M=n(16611),_=n(56085),E=n(54030),F=n(6727);const D=["pc","pcmpc","ucpdpc","adppc"];class O extends C.U{constructor(){super(...arguments),this.enableSearchAutoSuggestion=!1,this.enableWarmBingUrl=!1,this.options=null,this.commonSearchBoxRef=null,this.inputElementHasInput=!1,this.currentInputValue="",this.searchVisible=!0,this.placeholderText="",this.searchIconTreatment=0,this.showBingLogo=!1,this.canShowCodexBingUpsellByPolicy=!1,this.canShowCodexBingButton=!1,this.outsideCodexButtonStyle=!1,this.outsideCodexBtnFullPageLayout=!1,this.isFeedDisabled=!1,this.isRuby=$.gR.isRuby,this.isVisionIconEnabled=!1,this.isDefaultSearchBing="0"!==(0,l.a)().get("dsp"),this.codexBingChatTelemetryTags="",this.visionIconTelemetryTags="",this.enableCodexBingIconStyles=!1,this.enableContextualSuggest=!1,this.enableSearchBtnOpenInNewTab=!1,this.enableTrendingSearchAPICall=!1,this.handleFocusEvent=()=>{this.fakeFocused=!0,this.searchboxApiHandle&&this.searchboxApiHandle.startCapturingKeyStrokes()},this.handleMouseDownEvent=t=>{this.commonSearchBoxRef&&this.commonSearchBoxRef!==t.target&&this.fakeFocused&&(this.fakeFocused=!1,this.searchboxApiHandle&&this.searchboxApiHandle.stopCapturingKeyStrokes())},this.onInputStart=()=>{this.fakeFocused&&(this.fakeFocused=!1,this.searchVisible=!1)},this.onInputCancel=()=>{this.searchVisible=!0},this.onKeyCaptureChange=()=>{this.searchboxApiHandle&&(this.fakeFocused=this.searchboxApiHandle.isKeyCaptureEnabled)},this.handInputEvent=t=>{const e=t.target.value;this.inputElementHasInput=!!e,this.currentInputValue=e},this.clickVisionIcon=()=>{"function"==typeof window.chrome?.edgeCopilotPrivate?.launchVision&&window.chrome?.edgeCopilotPrivate?.launchVision("NTPVIS")}}placeholderTextChanged(t,e){e!==t&&(this.options=this.options&&{...this.options,localizedStrings:{...this.options.localizedStrings,placeholderText:this.placeholderText}})}experienceConnected(){const t=(0,A.zP)(a.h$)?.getCurrentState();this.enableFocusRedirect=t?.configData?.inPageSearchBoxType===s.I4.redirect,this.isProjectEqual=t?.configData?.isEnrolledInProjectEqual,this.enableCodexBingIconStyles=!!this.config.showCodexBingIcon&&t&&"always"===t.selectedFeedDisplaySetting,this.enableContextualSuggest=!!this.config.enableContextualSuggest,this.config.enableOpenInNewTab&&(this.searchTarget=t?.openInNewTab?"_blank":"_self"),this.config.searchIconTreatment&&!this.isRuby&&(this.searchIconTreatment=this.config.searchIconTreatment),this.enableSearchBtnOpenInNewTab=!!this.config.searchBtnOpenInNewTab&&!!t?.openInNewTab,this.canShowCodexBingUpsellByPolicy=!(0,h.rA)().isAadAccountUser||(t?.isCodexBingUpsellEnabledByPolicy??!1),this.canShowCodexBingButton=!!this.config.childExperienceReferencesWC?.CodexBingChat&&this.canShowCodexBingUpsellByPolicy;const e=window;if(e.chrome&&e.chrome.embeddedSearch&&(this.ntpApiHandle=e.chrome.embeddedSearch.newTabPage,this.searchboxApiHandle=e.chrome.embeddedSearch.searchBox),this.showBingLogo=!this.isDefaultSearchBing&&!this.enableFocusRedirect&&!this.config?.childExperienceReferencesWC?.CodexBingChat,this.isDefaultSearchBing||(0,h.rA)().CurrentMarket!==f.DX.ZHCN||(this.showBingLogo=!1),this.config.enableContextualSuggest&&this.config.trendingSearchConfig&&(this.config.trendingSearchOnlyInAlways?this.enableTrendingSearchAPICall="always"===t.selectedFeedDisplaySetting:this.enableTrendingSearchAPICall=["always","peek"].includes(t.selectedFeedDisplaySetting||"")),this.canShowCodexBingButton&&(this.codexBingChatTelemetryTags=(0,E.N)("headersearch").getMetadataTag()),this.populateCommonSearchBoxOptions(),this.setTelemetryPersonalizationParam(),this.detectLockscreenAndUpdateFormId(),(0,k.S)()&&window.searchFormSubmitListener&&window.requestAnimationFrame(()=>{this.commonSearchBoxRef?.formElement&&this.commonSearchBoxRef.formElement.removeEventListener("submit",window.searchFormSubmitListener)}),this.config.enableOpenInNewTab&&(0,x.vQ)(a.h$,t=>{const e=t.openInNewTab?"_blank":"_self";this.searchTarget!==e&&(this.searchTarget=e,this.options=this.options&&{...this.options,target:this.searchTarget})}),this.config.searchBtnOpenInNewTab&&(0,x.vQ)(a.h$,t=>{const e=t.openInNewTab;null!=e&&e!=this.enableSearchBtnOpenInNewTab&&(this.enableSearchBtnOpenInNewTab=e,this.options=this.options&&{...this.options,searchBtnOpenInNewTab:this.enableSearchBtnOpenInNewTab})}),this.config.outsideCodexButtonStyle&&this.canShowCodexBingButton&&!this.isRuby){const e=t=>{this.outsideCodexButtonStyle=!t||!!this.config.outsideCodexBtnFullPageLayout,this.outsideCodexBtnFullPageLayout=t&&this.config.outsideCodexBtnFullPageLayout};e("always"==t?.selectedFeedDisplaySetting),(0,x.vQ)(a.h$,t=>{e("always"==t?.selectedFeedDisplaySetting)})}this.config.visionIconInSearchBoxExp&&!this.isRuby&&(0,R.GP)().then(()=>this.isAPIEnabled().then(t=>{this.isVisionIconEnabled=!!this.config.enableVisionIconInSearchBox&&t,this.isVisionIconEnabled&&(this.visionIconTelemetryTags=(0,E.N)("headervisionsearch",u.MS.Launch,u.EG.Click).getMetadataTag())}))}shadowDomPopulated(){if((0,k.S)()){const t=(0,w.ZF)();(0,y.D)(()=>{const e=t[v.wL+"SearchBox"],n=e&&void 0===t.isSSRAborted;this.markVisuallyReady(n?e:void 0,!n)}),(0,M.e1)().then(()=>(0,_.B)(63,p.Rb.IsPrerender))}else(0,b.cE)("SSR.SearchBoxRendered",(0,w.gU)());!this.config.enableClarity&&(0,h.rA)().ClarityEnabled&&(this.options=this.options&&{...this.options,enableClarity:!0}),this.setPlaceholderText(),(0,g.KO)(m.u.searchBox,this);const t=this.commonSearchBoxRef&&this.commonSearchBoxRef.shadowRoot&&this.commonSearchBoxRef.shadowRoot.querySelector?.("#q");t&&(this.inputElement=t,this.canShowCodexBingButton&&this.inputElement.addEventListener("input",this.handInputEvent),(0,g.KO)(m.u.searchBoxInput,this.inputElement)),this.enableFocusRedirect?this.registerFocusRedirectHandler():this.config.enableDelayASAfterReveal?(0,R.GP)().then(()=>{this.enableSearchAutoSuggestion=!0}):this.enableSearchAutoSuggestion=!0,Promise.all([(0,P.Qc)(),(0,R.GP)()]).then(()=>{this.enableWarmBingUrl=!0}).catch(()=>{S.v.logError("Failed to wait for ATF visually ready and reveal")})}getExperienceType(){return c.UlU}isAPIEnabled(){return new Promise(t=>{"function"==typeof window.chrome?.edgeCopilotPrivate?.isVisionEnabledForUser?window.chrome?.edgeCopilotPrivate?.isVisionEnabledForUser(e=>{d.YT.addOrUpdateTmplProperty("visionIconEligible"+(this.isRuby?"Ruby":""),e.toString()),t(e)}):(d.YT.addOrUpdateTmplProperty("visionIconEligible"+(this.isRuby?"Ruby":""),"undefined"),t(!1))})}setPlaceholderText(){if(!this.config.localizedStrings)return;const{placeholderText:t,copilotPlaceholderText:e,placeholderTextMSNntp:n,placeholderTextMSNntpv2:i,placeholderTextT1:r,placeholderTextT2:o,tenantMissingEnterprisePlaceholderText:s}=this.config.localizedStrings,c=this.config?.enableCopilotCarryTerm,u=!(!0===this.config?.disableCCGhostText)&&this.canShowCodexBingUpsellByPolicy&&c;if(!(0,h.rA)().isAadAccountUser||this.config.removeAADPlaceholder)return this.placeholderText=t,this.config&&u&&!this.isRuby&&(this.placeholderText=e),this.config&&!0===this.config.enableWebAPISuggetion&&this.config.enableMSNSuggestions&&(1===this.config.enableMSNSuggestions&&n?this.placeholderText=n:2===this.config.enableMSNSuggestions&&i&&(this.placeholderText=i)),void(1===this.config.placeholderTextTreatment&&r?this.placeholderText=r:2===this.config.placeholderTextTreatment&&o?this.placeholderText=o:3===this.config.placeholderTextTreatment&&(this.placeholderText=""));let d=!1;const l=(0,A.zP)(a.ql)?.getCurrentState();l&&(d=!0,this.setEnterprisePlaceholderTextWithAdminSettings(l)),(0,x.vQ)(a.ql,t=>{d=!0,this.setEnterprisePlaceholderTextWithAdminSettings(t)}),d||(this.placeholderText=s)}setEnterprisePlaceholderTextWithAdminSettings(t){if(!this.config.localizedStrings)return;const{tenantMissingEnterprisePlaceholderText:e,tenantAvailableEnterprisePlaceholderText:n}=this.config.localizedStrings;if(this.placeholderText)return;if(!t.settingsDataRecieved)return;const{company:i,isMsbEnabled:r}=t.settings||{};this.placeholderText=r&&i?n.replace(/\{0\}/g,i):e}getFormParameters(){const t={...this.config.additionalFormParamMap};t.refig=d.YT.getRequestId();const{formCodes:e}=this.config;t.form=this.isDefaultSearchBing?e?.bingSearchEngine:e?.nonBingSearchEngine,D.forEach(e=>{const n=(0,l.a)().get(e.toUpperCase())||(0,l.a)().get(e)||"";n&&(t[e]=n)});const n=(0,I.HD)(),i=n?.enabled?.find(t=>"msEdgePartnerCodeActive_AnyDesk"===t||"msEdgePartnerCodeActive_ExpTester"===t)?.replace("msEdgePartnerCodeActive_","");return i&&(t.EPC=i),t}detectLockscreenAndUpdateFormId(){if((0,h.rA)().IsHeroNTP){const t=(0,F.nN)()?this.config?.formCodes?.lockscreenWin11:this.config?.formCodes?.lockscreenWin10;t&&this.options?.additionalFormParamMap&&(this.options.additionalFormParamMap.form=t)}}populateCommonSearchBoxOptions(){this.options={...this.config,target:this.searchTarget,enableCodexBingIconStyles:this.enableCodexBingIconStyles,enableContextualSuggest:this.enableContextualSuggest,trendingSearchConfig:this.enableTrendingSearchAPICall?this.config.trendingSearchConfig:void 0,searchBtnOpenInNewTab:this.enableSearchBtnOpenInNewTab,localizedStrings:{...this.strings,placeholderText:this.placeholderText,inputTitle:this.strings?.inputTitle},additionalFormParamMap:this.getFormParameters(),childExperienceReferencesWC:this.config.childExperienceReferencesWC}}registerFocusRedirectHandler(){this.ntpApiHandle&&(this.ntpApiHandle.oninputstart=this.onInputStart,this.ntpApiHandle.oninputcancel=this.onInputCancel,this.ntpApiHandle.isInputInProgress&&this.onInputStart()),this.searchboxApiHandle&&(this.searchboxApiHandle.onkeycapturechange=this.onKeyCaptureChange,this.fakeFocused=this.searchboxApiHandle.isKeyCaptureEnabled,this.searchboxApiHandle.isKeyCaptureEnabled&&this.searchboxApiHandle.startCapturingKeyStrokes()),this.commonSearchBoxRef&&this.commonSearchBoxRef.addEventListener("focus",this.handleFocusEvent),document.body.addEventListener("mousedown",this.handleMouseDownEvent)}setTelemetryPersonalizationParam(){const t={page:{has3PSearch:!this.isDefaultSearchBing,isSearchAB:this.enableFocusRedirect}};d.YT.updatePageMetadata(t)}clickBingIcon(){this.commonSearchBoxRef&&this.commonSearchBoxRef.onSubmit()}disconnectedCallback(){super.disconnectedCallback(),this.canShowCodexBingButton&&this.inputElement?.removeEventListener("input",this.handInputEvent),this.enableFocusRedirect&&(this.commonSearchBoxRef&&this.commonSearchBoxRef.removeEventListener("focus",this.handleFocusEvent),document.body.removeEventListener("mousedown",this.handleMouseDownEvent))}}(0,o.Cg)([T.sH],O.prototype,"enableSearchAutoSuggestion",void 0),(0,o.Cg)([T.sH],O.prototype,"enableWarmBingUrl",void 0),(0,o.Cg)([T.sH],O.prototype,"options",void 0),(0,o.Cg)([T.sH],O.prototype,"inputElementHasInput",void 0),(0,o.Cg)([T.sH],O.prototype,"currentInputValue",void 0),(0,o.Cg)([T.sH],O.prototype,"fakeFocused",void 0),(0,o.Cg)([T.sH],O.prototype,"searchVisible",void 0),(0,o.Cg)([T.sH],O.prototype,"placeholderText",void 0),(0,o.Cg)([T.sH],O.prototype,"searchIconTreatment",void 0),(0,o.Cg)([T.sH],O.prototype,"showBingLogo",void 0),(0,o.Cg)([T.sH],O.prototype,"canShowCodexBingUpsellByPolicy",void 0),(0,o.Cg)([T.sH],O.prototype,"canShowCodexBingButton",void 0),(0,o.Cg)([T.sH],O.prototype,"outsideCodexButtonStyle",void 0),(0,o.Cg)([T.sH],O.prototype,"outsideCodexBtnFullPageLayout",void 0),(0,o.Cg)([T.sH],O.prototype,"isFeedDisabled",void 0),(0,o.Cg)([T.sH],O.prototype,"isRuby",void 0),(0,o.Cg)([T.sH],O.prototype,"isVisionIconEnabled",void 0);var N=n(96950),L=n(60402),B=n(91640),U=n(11622);const W=N.qy`<div slot=${t=>t.config.searchButtonOnRight?"search-options-left":"search-options"} class="bing-logo-container"><fluent-button class="bing-logo-btn bing-logo-o" ${t=>t.config.searchButtonOnRight?"bing-logo-left":""}" part="button" title=${t=>t.strings&&t.strings.bingIconText} aria-label=${t=>t.strings&&t.strings.bingIconText} appearance="stealth" @click="${t=>t.clickBingIcon()}" @keypress="${t=>t.clickBingIcon()}" data-t="${t=>t.commonSearchBoxRef?.buttonTelemetryTag}" data-customhandled="true"><img src=${()=>`${(0,h.rA)().StaticsUrl}/latest/icons/BingLogo.svg`}></fluent-button></div>`,V=N.qy`<div slot="${t=>!t.outsideCodexButtonStyle&&t.config?.showCodexButtonInBox?"search-options":"codex-bing-chat"}" data-t="${t=>t.codexBingChatTelemetryTags}" class="${t=>t.isRuby?"search-bing-chat-ruby":""}">${t=>t.options&&t.options.childExperienceReferencesWC?.CodexBingChat&&(0,U.yN)(t.options.childExperienceReferencesWC.CodexBingChat,{properties:{showCodexButtonInBox:!t.outsideCodexButtonStyle&&t.config?.showCodexButtonInBox,outsideCodexButtonStyle:t.outsideCodexButtonStyle,outsideCodexBtnFullPageLayout:t.outsideCodexBtnFullPageLayout,target:t.searchTarget,isSearchBoxRuby:t.isRuby,searchValue:t.currentInputValue}})}</div>`,H=N.qy`<div slot="search-options" class="vision-icon-container"><button class="vision-search-icon ${t=>t.isRuby?"ruby":""}" data-t="${t=>t.visionIconTelemetryTags}" aria-label=${t=>t.config.localizedStrings?.visionIconAltText} title=${t=>t.config.localizedStrings?.visionIconAltText} @click=${t=>t.clickVisionIcon()}></button></div>`,z=N.qy`<cs-common-search-box ${(0,L.K)("commonSearchBoxRef")} :isRuby=${t=>t.isRuby} :options=${t=>t.options} :enableAutoSuggestion=${t=>t.enableSearchAutoSuggestion} :enableWarmBingUrl=${t=>t.enableWarmBingUrl} :fakeFocused=${t=>t.fakeFocused} :disableSubmit=${t=>t.enableFocusRedirect} :isFeedDisabled=${t=>t.isFeedDisabled} :searchVisible=${t=>t.searchVisible} :placeholderColor=${t=>t.config.placeholderColor} :hoverFocusOutlineStyle=${t=>t.config.hoverFocusOutlineStyle} :hoverFocusDeeperShadowStyle=${t=>t.config.hoverFocusDeeperShadowStyle} :searchIconTreatment=${t=>t.searchIconTreatment} :searchIconColor=${t=>t.config.searchIconColor} :enableDimMask=${t=>t.enableSearchAutoSuggestion&&t.config.enableDimMask} :dimMaskOpacity=${t=>t.config.dimMaskOpacity} :enableConditionalSchBtn=${t=>t.config.enableConditionalSchBtn} :fixSpyGlassNewTabBehavior=${t=>t.config.fixSpyGlassNewTabBehavior} exportparts="root, searchcore" :usePageBreakpoints=${t=>!!t.config.usePageBreakpoints} :outsideCodexBtnFullPageLayout=${t=>t.outsideCodexBtnFullPageLayout} :enableAltBorder=${t=>t.config.enableAltBorder} :enableAltSearchBox=${t=>t.config.enableAltSearchBox} :enableAltSearchboxShadow=${t=>t.config.enableAltSearchboxShadow}>${(0,B.z)(t=>t.isVisionIconEnabled,H)} ${(0,B.z)(t=>t.canShowCodexBingButton&&(!t.inputElementHasInput||t.config.enableCopilotCarryTerm&&t.inputElementHasInput),V)} ${(0,B.z)(t=>t.showBingLogo,W)}</cs-common-search-box>`;var j=n(74849),q=n(86856);const G=j.A`
.bing-logo-btn{border-radius:0 var(--search-box-radius) var(--search-box-radius) 0}`,J=j.A`
.bing-logo-btn{border-radius:var(--search-box-radius) 0 0 var(--search-box-radius)}`,Q=j.A` :host{--mic-vision-icon:url(${`${(0,h.rA)().StaticsUrl}latest/icons/MicIconLight.svg`})}.bing-logo-btn{height:46px;background:transparent;padding:0;border:none}.bing-logo-o::part(control){padding-inline-end:11px}.bing-logo-left::part(control){padding-inline-end:0px}.bing-logo-btn > img{margin:12px 2px;height:22px;width:22px;vertical-align:bottom}.search-bing-chat-ruby codex-bing-chat::part(cbb-container){height:48px;border:unset !important;background:unset !important}.search-bing-chat-ruby codex-bing-chat::part(cbb-icon){width:28px;height:28px}.vision-icon-container{height:100%;display:grid;align-items:center;margin-inline-end:8px}.vision-search-icon{cursor:pointer;width:36px;height:36px;border:none;outline:none;background:transparent;border-radius:9px;display:grid;justify-content:center;align-items:center}.vision-search-icon::after{content:"";background-size:contain;background-image:var(--mic-vision-icon);width:24px;height:24px}.vision-search-icon:hover{background:rgba(0,0,0,0.04)}.vision-search-icon:active{background:rgba(0,0,0,0.12)}@media (prefers-color-scheme:dark){.vision-search-icon.ruby::after{background-image:url(${`${(0,h.rA)().StaticsUrl}latest/icons/MicIconDark.svg`})}}`.withBehaviors(new q.t(G,J)),K={experienceConfigSchema:undefined};i.fy.define(r.G.registry)},84397:function(t,e,n){n.d(e,{B3:function(){return a},Dn:function(){return w},F3:function(){return d},GD:function(){return c},J8:function(){return f},LQ:function(){return p},QR:function(){return i},TR:function(){return h},XD:function(){return m},Y$:function(){return y},_D:function(){return o},cR:function(){return g},hO:function(){return l},oi:function(){return r},wf:function(){return u}});const i={PrivacyUrl:"https://go.microsoft.com/fwlink/?LinkID=286759",SamDomain:"https://srtb.msn.com/",SamEndpoint:"auction",SamOpenRtbEndpoint:"auctionopenrtb",LeadgenEndpoint:"leadgenads",AppId:"msnappid",PublisherId:"msn",Ecasession:"init",RiverRegion:"river",RiverDoubleWide:"river-dbl",RiverHalfTextOnly:"river-half-textonly",RiverHalf:"river-half",ReservedRiver:"resriver",UserOptOut:"userOptOut",UserOptOutOptions:"userOptOutOptions",DefaultPartnerCookieSyncTimeout:500,BulkCookieSyncTimeout:1e3,WaitForAdResponseAfterWPOResponseTimeout:1500,DefaultContentServiceBaseUrl:"https://assets.msn.com/content/",SamOpenRTBMinTimeout:800,LeadgenAdServiceTimeout:3e3},r={river:"oneriver.main",infopane:"oneriver.spartan.infopane","infopane-tab":"oneriver.spartan.tabinfopane",rivert:"oneriver.maint"},o={BeaconFormatDecoded:"decoded",BeaconFormatEncoded:"encoded",BeaconTypeAdServed:"adserved",BeaconTypeClick:"click",BeaconTypeJsTracker:"jsTracker",BeaconTypeVisibility:"visibility",BeaconTypeVideoProgress:"videoProgress",StartEvent:"start",FirstQuartileEvent:"firstquartile",ThirdQuartileEvent:"thirdquartile",MidPointEvent:"midpoint",CompleteEvent:"complete",ProgressEvent:"progress",UserActionEvent:"userAction"};var s;!function(t){t.Click="click",t.Ready="ready",t.Play="play",t.Pause="pause",t.Ended="ended",t.Telemetry="telemetry",t.VolumeChange="volumechange",t.TimeUpdate="timeupdate",t.Error="error",t.CanPlay="canplay",t.CanPlayThrough="canplaythrough"}(s||(s={}));const a={CMSListServiceUrl:"v1/cms/api/amp/Document/",CMSContentServiceURl:"view/v1/Preview/",DefaultProviderName:"Microsoft"},c={ContentType:"application/json",Method:"POST",CacheControl:"no-cache",Skipsessioncall:"false",ContentTypeKey:"Content-Type",FlightIdKey:"x-ms-flightId",CacheControlKey:"Cache-Control",ClientIdKey:"X-MSEdge-ClientID",MarketKey:"X-MSEdge-Market",AuthCookieNameKey:"x-ms-authCookieName",Timeout:3e3,BCPCookieKey:"BCP",UserAgent:"User-Agent",AdsNumberLineKey:"X-ms-numberline"},u={MSAOptOut:"msaoptout",BrowserOptOut:"TOptOut",AppAnonCookieExist:"aace",TaboolaSessionCookieName:"ecasession",CookieDomain:"msn.com",AnonCookieName:"ANON",LiverampEnvelopeId:"adslrid"},d={"de-de":"BBGgbuP","en-gb":"BBI4NMr","en-us":"BBI4MeJ","it-it":"BBH0fea","de-at":"BBIbKRf","de-ch":"BBH6mkD","pl-pl":"BBGgsgw","tr-tr":"BBH3vBx","es-es":"BBGdmuQ","en-au":"BBGfT6j","es-ar":"BBH69zf","es-cl":"BBH6qTU","es-co":"BBH3TQV","es-pe":"BBIbVzn","es-mx":"BBGg7xs","pt-br":"BBI4jJ6","en-ca":"BBI4FN9","he-il":"BBIbHNd","fr-ch":"BBIfDNl","nl-be":"BBH6zcN","fr-be":"BBIclrE","fr-fr":"BBI4XBF","nl-nl":"BBGgoUg","pt-pt":"BBH3qlj","zh-cn":"BBPRWnl","ja-jp":"AAvs5xw","ko-kr":"AAvrTXp","en-xl":"AAxzSQi","es-us":"AAuAfA8","fr-ca":"BBH6Awm","es-xl":"BBIfH5i","cs-cz":"BBPwecC","da-dk":"BBGKGmb","el-gr":"BBIc8WA","fi-fi":"BBH6Cse","hu-hu":"BBPw6XX","nb-no":"BBI4EVt","ru-ru":"BBH3gvW","sv-se":"BBH3vHp","ar-ae":"BBIf1cG","ar-eg":"BBIcggw","ar-sa":"BBIc6wN","en-ae":"BBIbBRO","en-ie":"BBIclgh","en-za":"BBIc5NR","en-in":"BBGeThK","en-sg":"BBIfqX9","en-nz":"BBIc483","zh-hk":"BBIbPBb","hi-in":"BBH85g2","mr-in":"BBU7J93","te-in":"BBU7JcP","bn-in":"BBU7Qw4","id-id":"BBIc9Ls","th-th":"BBIbPH4","vi-vn":"BBIcbQS","es-ve":"BBIcaTp","fr-xl":"AAD4nFo","en-my":"BBIclH7","en-ph":"BBIcbaP","zh-tw":"BBH3qpv"},l={"de-de":"Gesponsert","en-gb":"Sponsored","en-us":"Sponsored","it-it":"Sponsorizzato","de-at":"Gesponsert","de-ch":"Gesponsert","pl-pl":"Sponsorowane","tr-tr":"Sponsorlu","es-es":"Patrocinado","en-au":"Sponsored","es-ar":"Patrocinado","es-cl":"Patrocinado","es-co":"Patrocinado","es-pe":"Patrocinado","es-mx":"Patrocinado","pt-br":"Patrocinado","en-ca":"Sponsored","he-il":"","fr-ch":"Sponsoroitu","nl-be":"Gesponsord","fr-be":"Sponsoroitu","fr-fr":"Sponsoroitu","nl-nl":"Gesponsord","pt-pt":"Patrocinado","zh-cn":"","ja-jp":"","ko-kr":"","en-xl":"Sponsored","es-us":"Patrocinado","fr-ca":"Sponsoroitu","es-xl":"Patrocinado","cs-cz":"Sponzorovno","da-dk":"Sponsoreret","el-gr":" ","fi-fi":"Sponsoroitu","hu-hu":"Hirdets","nb-no":"Sponset","ru-ru":" ","sv-se":"Sponsrad","ar-ae":"","ar-eg":"","ar-sa":"","en-ae":"Sponsored","en-ie":"Sponsored","en-za":"Sponsored","en-in":"Sponsored","en-sg":"Sponsored","en-nz":"Sponsored","zh-hk":"","hi-in":" ","mr-in":" ","te-in":"","bn-in":" ","id-id":"Disponsori","th-th":"","vi-vn":"c tai tr","es-ve":"Patrocinado","fr-xl":"Sponsoroitu","en-my":"Sponsored","en-ph":"Sponsored","zh-tw":""},h={"de-de":"Anzeige","en-gb":"Ad","en-us":"Ad","it-it":"Ann.","de-at":"Anzeige","de-ch":"Anzeige","pl-pl":"Reklama","tr-tr":"R","es-es":"Publicidad","en-au":"Ad","es-ar":"Patrocinado","es-cl":"Patrocinado","es-co":"Patrocinado","es-pe":"Patrocinado","es-mx":"Patrocinado","pt-br":"Publicidade","en-ca":"Ad","he-il":"","fr-ch":"Sponsoris","nl-be":"Advertentie","fr-be":"Sponsoris","fr-fr":"Sponsoris","nl-nl":"Advertentie","pt-pt":"Pub","zh-cn":"","ja-jp":"PR","ko-kr":"AD","en-xl":"Ad","es-us":"Patrocinado","fr-ca":"Pub","es-xl":"Patrocinado","cs-cz":"Reklama","da-dk":"Annonce","el-gr":"Ad","fi-fi":"Mainos","hu-hu":"Hird.","nb-no":"Annonse","ru-ru":"","sv-se":"Annons","ar-ae":"","ar-eg":"","ar-sa":"","en-ae":"Ad","en-ie":"Ad","en-za":"Ad","en-in":"Ad","en-sg":"Ad","en-nz":"Ad","zh-hk":"","hi-in":"","mr-in":"","te-in":"","bn-in":"","id-id":"Ad","th-th":"Ad","vi-vn":"Ad","es-ve":"Patrocinado","fr-xl":"Sponsoris","en-my":"Ad","en-ph":"Ad","zh-tw":""},f=["ja-jp","ko-kr","zh-cn"],p={MyFeedPivotId:"oneriver.myfeed",StripeMyFeedPivotId:"stripe.myfeed",EditInterestPivotId:"oneriver.editinterests"};var g;!function(t){t[t.AdBuffering=1]="AdBuffering",t[t.ContentBuffering=2]="ContentBuffering",t[t.AdError=10]="AdError",t[t.AdPlayStarted=11]="AdPlayStarted",t[t.AdPlayCompleted=13]="AdPlayCompleted",t[t.AdSkipped=15]="AdSkipped",t[t.AdTimeout=16]="AdTimeout",t[t.AdPause=17]="AdPause",t[t.AdResume=18]="AdResume",t[t.ContentError=20]="ContentError",t[t.ContentStart=21]="ContentStart",t[t.ContentContinue=22]="ContentContinue",t[t.ContentComplete=23]="ContentComplete",t[t.CC=30]="CC",t[t.Pause=31]="Pause",t[t.Seek=32]="Seek",t[t.Mute=33]="Mute",t[t.FullScreenEnter=34]="FullScreenEnter",t[t.Info=35]="Info",t[t.VideoQuality=36]="VideoQuality",t[t.Resume=37]="Resume",t[t.FullScreenExit=38]="FullScreenExit",t[t.Replay=39]="Replay",t[t.Unmute=40]="Unmute",t[t.ContentImpression3PP=41]="ContentImpression3PP",t[t.Facebook=51]="Facebook",t[t.Twitter=52]="Twitter",t[t.Email=53]="Email",t[t.CommonPlayerImpression=61]="CommonPlayerImpression",t[t.EndslateVideos=64]="EndslateVideos",t[t.EndslateContinuous=65]="EndslateContinuous",t[t.EndslateCancelCountdown=66]="EndslateCancelCountdown",t[t.EndslateShown=67]="EndslateShown",t[t.PlayerStarting=90]="PlayerStarting",t[t.AdLoading=91]="AdLoading",t[t.AdLoaded=92]="AdLoaded",t[t.VideoLoading=93]="VideoLoading",t[t.ContentOpen=101]="ContentOpen",t[t.Content25Percent=102]="Content25Percent",t[t.Content50Percent=103]="Content50Percent",t[t.Content75Percent=104]="Content75Percent",t[t.Canplay=105]="Canplay",t[t.Canplaythrough=106]="Canplaythrough"}(g||(g={}));const m=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO","CN","GB","BR","CH","TR","CA","QA","OM","SA","JO","NG","KE","ZA"],w=["en-us","es-us"],y=280},84483:function(t,e,n){n.d(e,{n:function(){return o}});var i=n(92011),r=n(19548);function o(){const t="localhost.msn.com"===window.location.hostname,e=!!r._3.getParamsWithItems(decodeURIComponent(window.location.search)).find(t=>"spalink"===t.key&&t.value.toLowerCase().endsWith("/debug"));if(t||e){const t=i.L.prototype.setAttribute;i.L.prototype.setAttribute=function(e,n){if("object"==typeof n||"function"==typeof n||"symbol"==typeof n){const t=`Attribute "${e}" was expected to be string. Received type: ${typeof n}. This is likely a mistake.`;console.warn(t,this);const i=document.createElement("div");i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.right="0",i.style.bottom="0",i.style.backgroundColor="rgba(255, 0, 0, 0.5)",i.style.zIndex="9999",i.style.pointerEvents="none",i.innerText=t,this.shadowRoot?this.shadowRoot.appendChild(i):this.appendChild(i)}return t.call(this,e,n)}}}},84855:function(t,e,n){n.d(e,{$1A:function(){return O},$1s:function(){return ba},$AT:function(){return ju},$B1:function(){return Oo},$K6:function(){return ci},$LH:function(){return Ia},$PL:function(){return Jo},$U7:function(){return _s},$YM:function(){return kt},$cA:function(){return cu},$i6:function(){return gr},$mD:function(){return Na},$mu:function(){return ca},$on:function(){return Ao},$q6:function(){return Kn},$v:function(){return Je},A$l:function(){return ge},ABl:function(){return Rs},AN5:function(){return dt},AOC:function(){return Di},AUK:function(){return qs},AUU:function(){return eo},Acs:function(){return Q},Adx:function(){return Js},Ae$:function(){return tu},AeL:function(){return va},AfX:function(){return E},An8:function(){return Ct},Aqo:function(){return Dt},ArF:function(){return sr},AxF:function(){return is},B$w:function(){return Wt},B34:function(){return bi},B7V:function(){return Su},BCq:function(){return Qr},BDB:function(){return Yo},BJK:function(){return Ut},BKu:function(){return Ws},BPC:function(){return Tu},BV_:function(){return Z},B_E:function(){return Me},Bkj:function(){return Du},BsJ:function(){return Vn},Btw:function(){return za},Bvk:function(){return z},C$X:function(){return $e},C25:function(){return D},C3j:function(){return vs},CAb:function(){return v},CAk:function(){return Ni},CJU:function(){return ce},CKw:function(){return Go},CN:function(){return mc},CNr:function(){return I},CVt:function(){return De},Cbw:function(){return Vt},CfA:function(){return pc},Cfl:function(){return ro},Cfy:function(){return ln},Ch2:function(){return es},Cj7:function(){return Gc},CnP:function(){return Xo},Cvt:function(){return Mo},CzP:function(){return Ae},D$Z:function(){return Au},D19:function(){return Br},D69:function(){return Ve},DKz:function(){return xe},DQH:function(){return Vu},DSN:function(){return ne},DZv:function(){return Ja},DfK:function(){return l},Dj6:function(){return bt},Dl_:function(){return Bu},E2:function(){return Mt},ED:function(){return Ir},EHb:function(){return Yc},EJM:function(){return ls},EUj:function(){return x},Ej:function(){return o},Erl:function(){return tr},Ew1:function(){return hc},F$I:function(){return nc},F0b:function(){return p},F2:function(){return ur},F5C:function(){return qr},F9m:function(){return tc},FC5:function(){return ss},FD:function(){return Uc},FEr:function(){return tt},FM9:function(){return vn},FOf:function(){return Nu},FOs:function(){return Kc},FSw:function(){return Tr},FYv:function(){return He},FcC:function(){return fi},Fep:function(){return ve},Ffl:function(){return $n},FjG:function(){return h},G2r:function(){return xt},G2t:function(){return Se},GFw:function(){return fo},GIn:function(){return Ln},GjX:function(){return po},HOb:function(){return Cr},HPc:function(){return Vc},HTg:function(){return H},HXk:function(){return No},HYZ:function(){return Vi},HfM:function(){return xs},Hwy:function(){return wa},I7z:function(){return Ho},IMn:function(){return nr},IR9:function(){return oc},IRE:function(){return Hc},IUg:function(){return Ma},IUs:function(){return ns},IWO:function(){return un},IbX:function(){return as},Igw:function(){return ae},Iju:function(){return Pa},Ir6:function(){return Pn},Isg:function(){return La},IxT:function(){return ho},J9$:function(){return Ii},JCB:function(){return Tt},JCG:function(){return Lr},JCv:function(){return Cu},JMd:function(){return vo},JOJ:function(){return N},JY9:function(){return _n},JYX:function(){return Hn},JdX:function(){return Ki},Jqf:function(){return Pc},JxY:function(){return Ei},K8q:function(){return s},K9G:function(){return In},KB5:function(){return ra},KHV:function(){return Fe},KJl:function(){return mo},KTI:function(){return ee},KaV:function(){return Nt},Kag:function(){return Qa},KdP:function(){return Ge},KsV:function(){return Vo},Kt8:function(){return li},Kvq:function(){return Nc},LFC:function(){return hu},LGh:function(){return V},LLs:function(){return bo},LSw:function(){return _e},LVx:function(){return vu},LjG:function(){return cs},LkC:function(){return go},Lph:function(){return fs},Lwu:function(){return tn},LxF:function(){return je},Lz8:function(){return ar},M4f:function(){return wt},M8j:function(){return ou},MAn:function(){return di},MFN:function(){return Ra},MIc:function(){return C},Mc6:function(){return Ke},Mf4:function(){return Qe},N0q:function(){return co},N34:function(){return uo},N6u:function(){return X},NE7:function(){return Ps},NJc:function(){return an},Nbo:function(){return _c},Nip:function(){return Lc},NjZ:function(){return wo},NuQ:function(){return ai},O0R:function(){return jc},OBg:function(){return oe},OTF:function(){return q},OVJ:function(){return Lo},O_p:function(){return zt},Oc7:function(){return Ya},Ohn:function(){return no},Op9:function(){return b},Oso:function(){return On},OuL:function(){return Ye},Ouq:function(){return a},P$f:function(){return It},P4y:function(){return $i},P5d:function(){return Rc},P6d:function(){return Yt},P6g:function(){return zn},P83:function(){return Yr},PEi:function(){return ps},PGA:function(){return pr},PIH:function(){return Ui},PMX:function(){return $t},PP4:function(){return Ci},PRP:function(){return Qs},PSy:function(){return An},PbL:function(){return ui},Pfk:function(){return ic},Pju:function(){return Gi},Pq7:function(){return uu},PsK:function(){return fa},PvQ:function(){return gn},PyO:function(){return Po},PyZ:function(){return vi},QCU:function(){return jn},QJZ:function(){return _o},QO_:function(){return Ot},QSA:function(){return fr},QYe:function(){return Bi},Qb0:function(){return zi},QcA:function(){return R},Qj3:function(){return le},QmR:function(){return nt},Qoi:function(){return J},Qs5:function(){return yc},QtQ:function(){return pi},R6D:function(){return Co},R7J:function(){return ru},RFF:function(){return qu},RLX:function(){return zu},RMd:function(){return ct},RSF:function(){return Ks},RVI:function(){return Dc},Rh6:function(){return Mc},Rpm:function(){return to},Ruc:function(){return Pe},S1l:function(){return we},S6:function(){return bc},S6v:function(){return Ri},SAI:function(){return Kt},SAb:function(){return c},SJ2:function(){return Oa},SLF:function(){return Fu},SLN:function(){return _i},SNY:function(){return S},SSD:function(){return gs},SU9:function(){return pa},SWl:function(){return Zn},SbE:function(){return Kr},Sdo:function(){return ir},Sld:function(){return F},Srt:function(){return Ac},Sxv:function(){return Lu},T3B:function(){return ms},T3T:function(){return wu},T7e:function(){return nu},TAx:function(){return ke},TlD:function(){return so},TzA:function(){return Zc},U72:function(){return f},U8S:function(){return qi},UET:function(){return ko},UZs:function(){return sc},Ujv:function(){return Ai},UlU:function(){return ot},UoA:function(){return Jc},Uom:function(){return gc},V9h:function(){return Fr},VLS:function(){return So},VMF:function(){return Mi},VPW:function(){return su},VjU:function(){return Ha},Vzq:function(){return dn},W1Y:function(){return gu},W1i:function(){return ys},W2:function(){return B},W34:function(){return ki},W9P:function(){return uc},WG6:function(){return u},WNH:function(){return ac},WO6:function(){return ue},WgF:function(){return nn},Wi9:function(){return Jt},WlQ:function(){return Ds},X0z:function(){return En},X2D:function(){return ws},XEv:function(){return Dn},XRH:function(){return Li},XSf:function(){return Mr},XTG:function(){return at},XTS:function(){return ka},XvT:function(){return us},Y7O:function(){return y},Y95:function(){return oi},YCb:function(){return la},YFx:function(){return qo},YPW:function(){return ni},YPZ:function(){return js},Y_V:function(){return pe},Yac:function(){return Zr},Yeu:function(){return jr},Yhc:function(){return Wu},Yw8:function(){return Y},Z6M:function(){return Fo},Z9n:function(){return eu},ZC1:function(){return ea},ZPV:function(){return gt},Zgg:function(){return K},Zhi:function(){return on},Zt2:function(){return Ys},ZtX:function(){return na},Zyh:function(){return Is},_07:function(){return Uo},_1F:function(){return Yn},_1i:function(){return zc},_5A:function(){return ft},_C5:function(){return Le},_E8:function(){return hi},_Jh:function(){return $r},_PY:function(){return ma},_bP:function(){return Xc},_ge:function(){return Rr},_iH:function(){return me},_wQ:function(){return fe},a0f:function(){return Gr},a0r:function(){return ye},aAb:function(){return Do},aC:function(){return Xn},aI7:function(){return Rn},aJM:function(){return lu},aJb:function(){return vc},aR4:function(){return Nr},aT3:function(){return ha},aVt:function(){return Un},aYj:function(){return Ta},adn:function(){return dr},ahW:function(){return ti},apg:function(){return $a},asX:function(){return Oe},avx:function(){return _t},b8g:function(){return Te},bBp:function(){return i},bN8:function(){return Xt},bNy:function(){return wi},bQD:function(){return qt},bVF:function(){return Ss},bpE:function(){return Ou},c$z:function(){return xo},c5_:function(){return Mu},c8z:function(){return Ga},c9U:function(){return pn},cEj:function(){return kn},chB:function(){return ii},cif:function(){return aa},cje:function(){return mr},cpF:function(){return Gt},ct7:function(){return w},d3:function(){return bn},dHl:function(){return Eo},dIv:function(){return Hi},dVA:function(){return ks},dXe:function(){return bu},dZV:function(){return Qi},dnH:function(){return kc},dnU:function(){return qa},dxc:function(){return Gn},e19:function(){return si},e1E:function(){return Jr},eGH:function(){return cc},eHh:function(){return Oc},eVF:function(){return G},eYr:function(){return k},ehF:function(){return iu},elO:function(){return ja},em2:function(){return zs},enh:function(){return yi},ep3:function(){return Pu},eww:function(){return rt},exF:function(){return Ic},eyY:function(){return Gs},ezG:function(){return bs},f2c:function(){return pu},fBZ:function(){return Xa},fCz:function(){return ga},fQG:function(){return Fi},fVD:function(){return Hu},fgP:function(){return Xs},g$M:function(){return Zi},g3L:function(){return Ze},g4B:function(){return Bo},g4M:function(){return lc},gIA:function(){return wc},gIT:function(){return Ne},gJ$:function(){return cr},gNr:function(){return $s},gQ$:function(){return Iu},gSf:function(){return Fa},ggT:function(){return Yi},gqj:function(){return Bc},grb:function(){return ts},gvE:function(){return Ee},h1:function(){return Cn},h7w:function(){return Bn},hBV:function(){return oa},hCA:function(){return qc},hEo:function(){return te},hLd:function(){return Ts},hkb:function(){return xn},hqD:function(){return Wa},hwV:function(){return $u},hxV:function(){return U},hzk:function(){return Wi},i:function(){return Sr},i1_:function(){return dc},iEy:function(){return j},iIw:function(){return mi},iNz:function(){return Us},iR_:function(){return Ft},i_T:function(){return r},iej:function(){return m},j$N:function(){return xi},j2b:function(){return ji},j90:function(){return Et},jCw:function(){return Ue},jHn:function(){return qn},jRe:function(){return gi},jeg:function(){return Cs},jh7:function(){return ht},jkJ:function(){return Aa},jz6:function(){return Oi},k29:function(){return st},k2X:function(){return Tn},kW8:function(){return Nn},kXx:function(){return rc},k_X:function(){return yo},ke2:function(){return Va},khk:function(){return As},krc:function(){return Hs},ktl:function(){return Pi},l$J:function(){return Vs},lDi:function(){return hs},lHB:function(){return ao},lJH:function(){return Fn},lQk:function(){return Ru},lr:function(){return Ti},lwF:function(){return Bt},m$j:function(){return mt},mK7:function(){return et},mLJ:function(){return ri},mVK:function(){return ta},mhC:function(){return br},mkF:function(){return Es},mny:function(){return oo},moo:function(){return cn},mrt:function(){return Ji},nDd:function(){return Os},nDg:function(){return kr},nFz:function(){return xu},nQd:function(){return jo},nR3:function(){return ku},nZy:function(){return da},n_I:function(){return _},nau:function(){return Rt},nlv:function(){return L},nnw:function(){return xc},nwD:function(){return ie},o$H:function(){return jt},oC8:function(){return M},oCI:function(){return zo},oHo:function(){return Ua},oJ5:function(){return Ar},oMs:function(){return Be},oOo:function(){return W},oWn:function(){return Zo},oXp:function(){return wr},of8:function(){return Bs},ohD:function(){return Pr},ojW:function(){return vt},ote:function(){return A},owB:function(){return qe},oz5:function(){return rs},ozo:function(){return Xe},pH:function(){return re},pQI:function(){return Wc},pSY:function(){return _a},p_1:function(){return Da},pfG:function(){return ec},pkK:function(){return Ca},pqA:function(){return P},pqd:function(){return Ie},psk:function(){return Er},pt1:function(){return Re},ptP:function(){return Zs},ptQ:function(){return er},puY:function(){return sn},q8z:function(){return Sn},qIz:function(){return Pt},qMv:function(){return wn},qNJ:function(){return yt},qb$:function(){return Ea},qfU:function(){return lo},qgh:function(){return Fc},qkr:function(){return Ns},r3n:function(){return At},r4q:function(){return Dr},r87:function(){return _r},rAl:function(){return Xr},rK_:function(){return en},rWZ:function(){return fu},rh2:function(){return mn},rl5:function(){return _u},rmE:function(){return Lt},s$b:function(){return fc},s$e:function(){return sa},s1n:function(){return xr},s4M:function(){return pt},s7z:function(){return he},sUJ:function(){return ze},sZo:function(){return hn},s_6:function(){return Ec},shR:function(){return Qn},sji:function(){return Hr},skl:function(){return Jn},skx:function(){return se},smC:function(){return Zt},spA:function(){return lt},spT:function(){return Vr},swS:function(){return Mn},sz2:function(){return io},tKm:function(){return Tc},tN3:function(){return au},tX4:function(){return os},ty6:function(){return ut},u1j:function(){return $c},u2C:function(){return or},uBV:function(){return Ko},uGz:function(){return mu},uKL:function(){return Xi},uM1:function(){return T},uWu:function(){return St},uY0:function(){return $o},uby:function(){return it},uy5:function(){return Io},v$w:function(){return Ka},v7O:function(){return be},vAe:function(){return Wn},vAv:function(){return Cc},vOM:function(){return ya},vRr:function(){return Ls},vXx:function(){return Or},ve9:function(){return yn},vjl:function(){return d},vq4:function(){return Ce},vqF:function(){return yr},w0E:function(){return g},wHA:function(){return Ms},wNB:function(){return hr},wTj:function(){return To},wcr:function(){return Si},xQX:function(){return Qt},xYf:function(){return lr},xdy:function(){return Ur},xiF:function(){return Uu},xm:function(){return Za},xmJ:function(){return Ba},xsS:function(){return ds},xye:function(){return vr},y55:function(){return Ro},y7p:function(){return Sa},yFF:function(){return ua},yFt:function(){return zr},ySl:function(){return fn},ySv:function(){return Ht},yT:function(){return du},yVO:function(){return Wo},yXx:function(){return Wr},yl:function(){return ei},ymm:function(){return $},yrn:function(){return Qc},yy7:function(){return We},z3c:function(){return rn},zCf:function(){return xa},zHB:function(){return rr},zOi:function(){return yu},zV7:function(){return de},zXW:function(){return Fs},zhA:function(){return ia},znK:function(){return Eu},znl:function(){return Sc},ztc:function(){return Qo}});const i="ShoppingCategoryPage",r="AboveRiverBlock",o="ActionTray",s="ArticleCloseButton",a="ArticleRelatedStories",c="ArticleTopComment",u="AutosCarousel",d="AutosEntityCardWC",l="AutosEntitySpan",h="BackToTopButton",f="BackgroundGallery",p="BackgroundImageWC",g="BingDailyQuizCard",m="BingHealthCard",w="BingHealthFitnessCard",y="BingHomepageFeed",v="BoostAd",b="BoostAdCard",S="BreakingNewsWC",C="CalendarCard",k="CardActionWC",T="CashbackCarousel",x="CashbackCarouselCard",A="CasualGamesBanner",$="CasualGamesCard",I="CasualGamesCarouselCard",P="CasualGamesEntertainmentTakeover",R="CasualGamesZhCarousel",M="CasualGamesFeed",_="CasualGamesFrame",E="CasualGamesGameCardCarousel",F="CasualGamesGameplay",D="CasualGamesGameplayRightRail",O="CasualGamesHub",N="CasualGamesLandingV2",L="CasualGamesPill",B="CasualGamesProng2CarouselCard",U="CasualGamesStripeCarouselCard",W="CasualGamesUserProfilePreview",V="ChannelEntryPoint",H="ChannelFilterCard",z="ChannelInterestsManager",j="ChannelMobileContent",q="ChannelPage",G="ChannelStore",J="ChromeExtensionPage",Q="TrackerCreate",K="TrackerPage",X="TrackerTopic",Y="CmsBaseExperience",Z="CmsExperience",tt="CodexBingChat",et="ColdStart",nt="ColdStartWC",it="CommonAutoSuggest",rt="CommonHeaderWC",ot="CommonSearchBoxEdgeNext",st="CommonSettingsEdgeNext",at="CommunityCard",ct="CommunityComposeCopilotWC",ut="CommunityInfoCard",dt="CommuteCard",lt="CompanionWidget",ht="ComplexContentPreview",ft="ConditionalBannerHpWC",pt="ConditionalBannerWC",gt="ConsumptionFeedWC",mt="ConsumptionPage",wt="ContentFlexInfoPane",yt="ContentGroup",vt="ContentGroupCard",bt="ContentPreview",St="ContentTts",Ct="ContextualFeedbackWC",kt="CopilotConsumptionLandingPage",Tt="CopilotFeedViewWC",xt="CopilotRubyCard",At="CopilotSuggestionPrompts",$t="CopilotPromptsCardForWork",It="CpcMonetizationDashboard",Pt="CreatorSpotlightCard",Rt="DailyBriefCard",Mt="DailyBriefFullPagePlayer",_t="DailyGreetingCard",Et="DailyGreetingWindowsShell",Ft="DailyMomentsCard",Dt="DailyWonderCard",Ot="DailyWonderCopilotCard",Nt="DashboardFallback",Lt="DashboardSettings",Bt="DebugButton",Ut="DenseCard",Wt="DesktopFeedHubWC",Vt="DesktopFeedViewsWC",Ht="DesktopFeedWC",zt="DevTools",jt="DidYouKnowImageWCExperience",qt="DidYouKnowWCExperience",Gt="DigestCard",Jt="DisplayAdsWC",Qt="DisplayAdsWithContentFallback",Kt="DistributionFeed",Xt="DistributionHeader",Yt="DistributionPage",Zt="DistributionPivotsNav",te="DonationNpoCard",ee="EdgeChromiumPageWC",ne="EdgeShopping",ie="ElectionCard",re="EmmxEntrypoint",oe="EntertainmentCard",se="EntertainmentPremierCard",ae="EntryPointHpMobile",ce="EntryPointHpWC",ue="EntryPointHpRuby",de="EntryPointMobileHub",le="EntryPointViewsWC",he="EsportsCard",fe="EsportsCasualGamesCard",pe="ExamPage",ge="ExampleOfferCard",me="ExperiencePreviewCta",we="ExternalContentPreview",ye="FamilyCard",ve="FeedContainer",be="FeedLevelFeedbackWC",Se="FeedNavigationHp",Ce="FeedbackCard",ke="FeedbackDialogWC",Te="FeedbackLinkWC",xe="FeedOffDialog",Ae="ProactiveFeedbackWC",$e="FinanceCarousel",Ie="FloatButtonGroupWC",Pe="FollowingFreConfirmation",Re="FollowingFreFullWidth",Me="FoodSimilarItems",_e="FreEntrypoint",Ee="FrequentSitesCardWC",Fe="GamingChannel",De="GamingDiscoverStrip",Oe="GamingPage",Ne="GamingRecentlyPlayedCard",Le="GemCardWCE",Be="GeneralElections",Ue="GridViewFeed",We="HeaderWindowsShellWC",Ve="HealthArticlesCardWC",He="HealthAugmentCard",ze="HealthDietPlanScheduleWC",je="HealthFeedbackWC",qe="HealthFitnessCarousel",Ge="HealthFoodHealtheffectsWC",Je="HealthFoodRecipesWC",Qe="HealthHubHealthapp",Ke="HealthInterestsManager",Xe="HealthQnAWCExperience",Ye="HealthRiverWC",Ze="HealthTipReact",tn="HealthTipWC",en="HealthTopSpan",nn="HealthTopicFlyout",rn="HealthTranslationWC",on="HeroContainerWC",sn="HomepageFooter",an="HomepageHeader",cn="HomepagePwaMobile",un="HoroscopeAnswerCardWC",dn="HotListCard",ln="HpFeedSwitch",hn="ImmersiveFullscreen",fn="Infopane",pn="InspirationCard",gn="InterestFreCard",mn="InterestManagementCard",wn="InterestsManager",yn="InterestsWC",vn="IosPwaInstallInstructions",bn="IssueReportingWC",Sn="KaSocialBuzz",Cn="KeyTakeawaysWC",kn="LanguageToggleWC",Tn="LinkedInCard",xn="LocalHubHeader",An="LocalizeStringsTempExperience",$n="LocationMarker",In="MailSignoutBanner",Pn="MangaCard",Rn="MangaCarousel",Mn="MarketLanguageToggleWC",_n="MarketplaceCardWC",En="MeControlWC",Fn="MeStripeWC",Dn="MicrosoftEdgeWidget",On="MicrosoftFeedCard",Nn="MobileAppUpsell",Ln="MobileConsumptionPage",Bn="MobileFeedHub",Un="MobileFeedWC",Wn="MobileFooter",Vn="MobileHeader",Hn="MobileMarketSelector",zn="MobileNotification",jn="MobilePopupWindow",qn="MobileTip",Gn="MobileTrendingSearchCard",Jn="MobileVideoSdCard",Qn="MomentInTimeHero",Kn="MoneyAugmentCard",Xn="MoneyCopilotWC",Yn="MoneyInfo",Zn="MoneyInfoCard",ti="MoneyInfoCardWC",ei="MoneyInfoSpan",ni="MsRewardsWC",ii="MsnFeed",ri="MsnStudio",oi="MyBriefRiverCard",si="NativeAdWC",ai="NativeTopAd",ci="NavigationPageExperience",ui="NewsletterSignup",di="NewsletterSignupPage",li="NotificationBellWC",hi="NotificationMiniCard",fi="NudgeSpotlightCard",pi="NurturingBanner",gi="NurturingCoachMark",mi="OfficeAppsWC",wi="OfficeCoachmark",yi="OfficeDocumentsTableWC",vi="OfficeLeftRail",bi="OnThisDayCardWC",Si="PageRefreshWC",Ci="PanoPage",ki="PersonalFinanceExpenseDistribution",Ti="PersonalFinanceTransactionsCard",xi="PersonalizeNavButton",Ai="PhotoCard",$i="PillWC",Ii="PivotsMobileWC",Pi="PollsCardWC",Ri="PoweredbyLegendWC",Mi="PremiumProfilePromoCard",_i="PrideEventCard",Ei="PrismCarouselCard",Fi="PrismFeed",Di="PrismSdCard",Oi="ProductivityHub",Ni="ProfileArticles",Li="PromotedAdWC",Bi="PublisherList",Ui="PublisherSubscribeFollowButton",Wi="PullToRefresh",Vi="PulseEdgenext",Hi="PulseProng",zi="Qna",ji="QnaFeed404Page",qi="QnaFeedCard",Gi="QnaFeedCardMenu",Ji="QnaFeedCarousel",Qi="QnaFeedCategoriesMenu",Ki="QnaFeedExploreTopics",Xi="QnaFeedList",Yi="QnaFeedMyTopics",Zi="QnaFeedRelatedQuestions",tr="QnaFeedReportCard",er="QnaFeedSuggestedTopics",nr="QnaFeedTopicDetail",ir="QnaFeedTrendingQuestions",rr="QuizCard",or="ReactionBreakdownDialog",sr="RealEstateCard",ar="RecipesSdCard",cr="RecommendedInterests",ur="RecommendedSitesWC",dr="RewardsCardWC",lr="RewardsFlyout",hr="RichCalendarCard",fr="RichCalendarLandingPage",pr="RichCalendarWindowsShell",gr="RightRailProviderCarousel",mr="River",wr="RubyComposer",yr="RubyComposerAutosuggest",vr="RubyPage",br="RubyBoardHomePage",Sr="RubyBoardNotificationsCard",Cr="ScrollDownButton",kr="SdCardMaskWC",Tr="SearchBoxWC",xr="SearchHistoryEdgeNextWC",Ar="SelectCarousel",$r="SharedHeroNewsCard",Ir="SharedLinks",Pr="SharepointNewsCard",Rr="ShoppingAllStoresPage",Mr="ShoppingArticlePage",_r="ShoppingAugmentCard",Er="ShoppingBannerSdCard",Fr="ShoppingBingProductDetails",Dr="ShoppingBlackjackDealPage",Or="ShoppingBlackjackPage",Nr="ShoppingBuyingGuide",Lr="ShoppingBuyingGuidePremiumCard",Br="ShoppingBuyingGuidesCard",Ur="ShoppingCardActions",Wr="ShoppingCardWC",Vr="ShoppingCarousel",Hr="ShoppingCarouselOfferCard",zr="ShoppingCarouselProngWC",jr="ShoppingCarouselWC",qr="ShoppingCheckoutModal",Gr="ShoppingColdStart",Jr="ShoppingCouponsPage",Qr="ShoppingDealsHomePage",Kr="ShoppingDebugPage",Xr="ShoppingEntryBaseExperience",Yr="ShoppingEventsDealCard",Zr="ShoppingFashionCarouselWC",to="ShoppingGemHeroCard",eo="ShoppingGrid",no="ShoppingGroupedCarousel",io="ShoppingGuidesPage",ro="ShoppingHomepage",oo="ShoppingInspiration",so="ShoppingLeaderboard",ao="ShoppingModal",co="ShoppingModelOverlay",uo="ShoppingMomentInTimePage",lo="ShoppingOfferCard",ho="ShoppingPageBase",fo="ShoppingPageContent",po="ShoppingPivotFeed",go="ShoppingProductDetailPage",mo="ShoppingRiverCard",wo="ShoppingSdCard",yo="ShoppingSearch",vo="ShoppingShopTheLookPage",bo="ShoppingTopSpan",So="SignInControlWC",Co="SignInFlyoutWC",ko="SignalOverlay",To="SocialAvatar",xo="SocialBarWC",Ao="SocialCommentBox",$o="SocialCommentWC",Io="SocialEndorsements",Po="SocialEntrypoint",Ro="SocialLeadGenInArticle",Mo="SocialNotification",_o="SocialPostEditorWC",Eo="SocialProfileActionMenu",Fo="SocialProfileAppeal",Do="SocialProfileCard",Oo="SocialProfilePromotion",No="SocialProfileRejectionDetails",Lo="SocialProfileTopics",Bo="SocialRelatedSources",Uo="SocialReportMenu",Wo="SocialRewardsMedal",Vo="SocialRewardsPromotion",Ho="SocialStarRating",zo="SocialSubscriptionBanner",jo="SocialSubscriptionNotification",qo="SocialSubscriptionOverlay",Go="SocialSubscriptionOverlaySummary",Jo="SocialSubscriptionUpsell",Qo="SocialSupportResult",Ko="SocialTipHistory",Xo="SocialTipIntroduction",Yo="SocialTipPromotion",Zo="SocialTipPromotionInArticle",ts="SocialTipSelection",es="SportsAroundTheLeague",ns="SportsAugmentCard",is="SportsBackgroundUx",rs="SportsBrackets",os="SportsCard",ss="SportsCardWC",as="SportsCommentary",cs="SportsCopilotNavigation",us="SportsCountdownTimer",ds="SportsCricketLayoutManager",ls="SportsCricketLeagueStats",hs="SportsCricketMatchRow",fs="SportsCricketPartnerships",ps="SportsCricketRankings",gs="SportsCricketScorecard",ms="SportsCricketScoresAndSchedule",ws="SportsEntityHeader",ys="SportsFeaturedMatchesCard",vs="SportsFeaturedTeamList",bs="SportsFrePanel",Ss="SportsFullStandings",Cs="SportsFullStats",ks="SportsGameInformation",Ts="SportsGameScore",xs="SportsGameSummary",As="SportsGameSummaryFull",$s="SportsGameTimeline",Is="SportsGcPlayerStats",Ps="SportsGcTeamStats",Rs="SportsGenUiPage",Ms="SportsGptAnalysis",_s="SportsHeadlinesHeader",Es="SportsHeadlinesMainStory",Fs="SportsHeadlinesStoryCarousel",Ds="SportsHeadlinesTimelines",Os="SportsInfo",Ns="StackCard",Ls="SportsInfoSpan",Bs="SportsLayoutRenderer",Us="SportsMatchRow",Ws="SportsMatchupCard",Vs="SportsMedalCountList",Hs="SportsMedalSummaryList",zs="SportsMedalTrackerList",js="SportsMobileTabPanel",qs="SportsOlympicCard",Gs="SportsOlympicCardWC",Js="SportsOlympicsHeaderRow",Qs="SportsOlympicsResultFull",Ks="SportsOlympicsScheduleFull",Xs="SportsPersonMatchRow",Ys="SportsPersonalizationStrip",Zs="SportsPickWinner",ta="SportsPlayerBio",ea="SportsPlayerInsights",na="SportsPopularCardWx",ia="SportsPreviousMatchups",ra="SportsPromoCard",oa="SportsRankingsFull",sa="SportsRetentionFull",aa="SportsScoresAndSchedule",ca="SportsScoresAndScheduleFull",ua="SportsScoringSummary",da="SportsSquad",la="SportsStandings",ha="SportsStandingsList",fa="SportsStatLeaders",pa="SportsStats",ga="SportsStoryPlayer",ma="SportsTabLayout",wa="SportsTeamFormation",ya="SportsTeamProbability",va="SportsTennisScoresAndScheduleFull",ba="SportsTennisTournamentInfo",Sa="SportsTournamentInfo",Ca="SportsTournamentLeaderboard",ka="SportsTournamentMatchRow",Ta="SportsTournamentResultsAndSchedule",xa="SportsTournamentSchedule",Aa="SportsTournamentStandings",$a="SportsTrendingCarousel",Ia="SportsUnavailablePlayers",Pa="SportsVideoList",Ra="SpotlightCard",Ma="SpotlightCardWC",_a="StarterKitWC",Ea="StreaksBadgeWC",Fa="StripeView",Da="StripeWC",Oa="SummaryCardWC",Na="SuperBreakingNews",La="SuperNav",Ba="SuperNavCoachMark",Ua="SuperappBannerWC",Wa="SuperappUpsellCardWC",Va="TabbedInfopane",Ha="TabbedInfopaneTabPreview",za="ThemePickerWC",ja="TipsCard",qa="ToastWC",Ga="TodoCardWC",Ja="TopCommentsCard",Qa="TopSitesBookmarks",Ka="TopSitesEdgeNextWC",Xa="TopSitesNewsbar",Ya="TopicTags",Za="TrafficCard",tc="TrafficCardWC",ec="TrafficHero",nc="TranslateTemporary",ic="TravelArticlePageCard",rc="TravelCard",oc="TravelCarousel",sc="TravelCollectionCard",ac="TravelDestination",cc="TravelDestinationBanner",uc="TravelDestinationDetailsBanner",dc="TravelFeed",lc="TravelFlightCarousel",hc="TravelHotelCarousel",fc="TravelInspirationCard",pc="TravelInspirationCardWC",gc="TravelLandingPage",mc="TravelMsnHpCard",wc="TravelSdCarrentalsCard",yc="TravelSdDestinationsCard",vc="TravelSdFlightsCard",bc="TravelSdHotelsCard",Sc="TravelSdThemesCard",Cc="TravelTourActivityCard",kc="TrendingNowWC",Tc="TrendingSearchCard",xc="UgcCreatorHomepage",Ac="UnifiedComposerPersonalization",$c="UnifiedMobileFeed",Ic="VerticalLeftNav",Pc="VideoCardWC",Rc="VideoDetails",Mc="VideoDetailsKit",_c="ViewsCoachmark",Ec="ViewsNativeAd",Fc="ViewsRail",Dc="WaffleWC",Oc="WalletPersonalizedOfferSdCardWC",Nc="WatchFilterChannel",Lc="WatchTakeABreakHeader",Bc="WatchVideoCard",Uc="WatchWC",Wc="WaterTrackerCard",Vc="WaterfallViewFeed",Hc="WeatherCard",zc="WeatherCardWC",jc="WeatherFeedWC",qc="WeatherForecastDayWC",Gc="WeatherForecastPerHourWC",Jc="WeatherHeroExperience",Qc="WeatherHistoricalTemperatureWC",Kc="WeatherHourlyHistogramWC",Xc="WeatherImmersiveForecastWC",Yc="WeatherInfoCard",Zc="WeatherLocationCardWC",tu="WeatherMapGroupSwitcherButtonWC",eu="WeatherMapLegendWC",nu="WeatherMapTimelineWC",iu="WeatherMapWC",ru="WeatherMinimapWC",ou="WeatherOneLiner",su="WeatherOverviewWC",au="WeatherPageWC",cu="WeatherReportIssueDialog",uu="WeatherTodayHistoryWC",du="WeatherTodayMiniWC",lu="WeatherTopSectionCard",hu="WeatherVideoEntryWC",fu="WelcomeGreetingLight",pu="WelcomeGreetingWC",gu="WidgetPickerWC",mu="WidgetsDynamicFeed",wu="WidgetsConsumptionPage",yu="WidgetsHomePage",vu="WidgetsPrivacy",bu="WidgetsRegion",Su="WidgetsNotificationsCard",Cu="WidgetsStartFeed",ku="WinAppWC",Tu="WindowsOfficeFeed",xu="WindowsShellBannersManager",Au="WindowsShellColdStartCard",$u="WindowsShellEntry",Iu="WindowsShellHeader",Pu="WindowsShellHotList",Ru="WindowsShellInfopane",Mu="WindowsShellLocationDialog",_u="WindowsShellMorningDigest",Eu="WindowsShellNewsPromoCard",Fu="WindowsShellNotificationCard",Du="WindowsShellNotificationSettings",Ou="WindowsShellRecommendedInterests",Nu="WindowsShellSettingsMenu",Lu="WindowsShellSoftLanding",Bu="WindowsShellTopicsCard",Uu="XboxFeedWC",Wu="XfeedWC",Vu="ConsumptionLandingPage",Hu="MsnRouter",zu="MsnUxAiStarterKitWCE",ju="UnifiedConsumption",qu="GemConsumptionPage"},84910:function(t,e,n){n.d(e,{U:function(){return r}});var i=n(63418);function r(t,e,n,r){if(!t||0===t.length)return;const o=t.includes(n),s=e?".msn.cn":".msn.com";t.includes(r)?(0,i.Ub)("afdprotocol",void 0,-1,s,"/"):o&&(0,i.Ub)("afdprotocol","h3",14,s,"/")}},84970:function(t,e,n){n.d(e,{P:function(){return s}});var i=n(50115),r=n(77246),o=n(12870);async function s(){return new Promise(async t=>{if(!(0,r.S)()||o.Rb?.IsPrerender){const e=await(0,i.Db)();return void t(e)}"function"==typeof window?.chrome?.edgeMarketingPagePrivate?.isEdgeChatEnabled&&"function"==typeof window?.chrome?.edgeMarketingPagePrivate?.sendCopilotQuery?window.chrome.edgeMarketingPagePrivate.isEdgeChatEnabled(e=>{t(e)}):t(!1)})}},85159:function(t,e,n){n.d(e,{J:function(){return c},d:function(){return a}});var i=n(65022),r=n(77246),o=n(89980),s=n(56018);function a(t){if((0,r.S)()){const e="storageTest";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){(t||"function"==typeof t)&&t({...i.JWS,message:`Local Storage is not defined ${e}`})}}return!1}function c(t,e,n){const i=(0,o.Lg)();return i?.supported?()=>{let r;const o=i.getObject(t,null);let a=null;return o&&o.version===e&&null!==o.value?(a=o.value,r=n):(a=n(),r=()=>a),(0,s.E)(()=>i.setObject(t,{version:e,value:r()})),a}:n}},85503:function(t,e,n){n.d(e,{TV:function(){return y}});var i=n(96592),r=n(19548),o=n(6092),s=n(12870),a=n(77246),c=n(27261);const u="//assets.msn.com",d="//assets.msn.cn",l=t=>"localhost.msn.com"===t.split(":",1)[0];function h(t){if(/^\/[\w.-]+(\/[\w.-]+)*$/.test(t))return!(t.includes("/../")||t.includes("/./")||t.endsWith("/..")||t.endsWith("/."))}function f(t){return t&&!t.startsWith("/")?"/"+t:t}function p(t){return t.endsWith("/")?t:t+"/"}function g(t){return h(f(t))?(e=t).startsWith("/")?e.slice(1):e:null;var e}function m(t){return t?t.split("/")[0]:null}const w=(t,e,n,c)=>{const w=new URLSearchParams(t),y="true"===w.get("renderWidget"),v="true"===w.get("useDeployedBundles");let b=((t,e,n)=>{if(!e){if(n)return u;if(l(t))return`//${t}`}return o.T3.IsChinaCompliance?d:u})(e,y,v);if(c){b=(window.location.protocol||"https:")+b}if(w.has("entry")){const t=f(w.get("entry").split("/").slice(0,-1).join("/"));return b&&h(t)&&(l(e)||t.startsWith("/bundles"))?p(b+t):p(b)}if(b&&l(e)&&!v){if(!(0,a.S)()){return b+__WEBPACK_LOCAL_STATICS_PATH__}if(n)return b+n}else if(b){const e=(t||"").substring(1),o=decodeURIComponent(e);let a;const c=r._3.getParamsWithItems(o).find(t=>"spalink"===t.key),u=c&&c.value,d=s.Rb.ClientSettings||{},l=d.bundleInfo?.alias;if("true"===d.static_page&&l)a=m(l);else if(u)a=m(g(u));else{const t=new i.m(o).get("bundles");t?a=g(t):l&&(a=m(l))}if(n){const t=n.split("/");return t[4]=a||"latest",b+t.join("/")}}return n},y=t=>{n.p=w((0,c.iA)(),(0,c.ou)(),n.p,t)}},85593:function(t,e,n){n.d(e,{MW:function(){return w},N9:function(){return y},TG:function(){return b},VG:function(){return T},aQ:function(){return x},pD:function(){return m},rS:function(){return k},x_:function(){return v}});var i=n(50091),r=n(89980),o=n(6092),s=n(55593),a=n(26560);const c="//img-s-msn-com.akamaized.net/tenant/amp/entityid/",u="//img-s.msn.cn/tenant/amp/entityid/",d="removedTopSiteUrls",l={};let h,f,p,g;function m(){return h}function w(){return f}function y(){return p}function v(t){t&&(p[t]=!0,g.setObject(d,p))}function b(t){t&&(delete p[t],g.setObject(d,p))}g=(0,r.Lg)(),p=g.getObject(d)||{},f={};const S=["aka.ms","bing.com","ww55.affinity.net","sovrn.co","clkde.tradedoubler.com","clk.tradedoubler.com","awin1.com","ad.soicos.com"],C=["bing.com/alink/link"];function k(t,e){if(e&&e.forEach(t=>{const e=l[t.url]??new a.u(t.url);S.includes(e.domain)||(f[e.domain]=!0),p[t.url]=!0,!l[t.url]&&(l[t.url]=e)}),h=[],!t.curatedSites)return;const n={};for(const t in f)A(n,t);for(const t in p){if(!t||n[t])return;const e=l[t]??new a.u(t);!l[t]&&(l[t]=e),C.includes(e.domainAndPath)||A(n,e.domainAndPath),n[t]=!0}h=new Array;const i=!("0"===(0,s.a)().get("dsp"));t.curatedSites.forEach(r=>{const o=r.faviconId||x(r.faviconUrl),s={...r,faviconUrl:o?T(o):r.faviconUrl},c=new a.u(s.url);if(!n[c.domain]&&!n[c.domainAndPath]&&!n[s.url]){if(t.addBingForNonBingSearchEngine&&"Bing"===s.title&&i)return;h.push(s)}s.isSponsored&&e.forEach(t=>{if(t.url===s.url&&0==t.tileSource){const e=s.faviconId||x(s.faviconUrl);t.title=s.title,t.faviconUrl=e?T(e):s.faviconUrl}})})}function T(t){if(t){return null!=o.T3&&o.T3.IsChinaCompliance?`${u}${t}.img`:`${c}${t}.img`}return i.Jx}function x(t){if(t){return(t&&t.match(/cms\/api\/amp\/image\/([a-z0-9]+)$/i)||{})[1]}return null}function A(t,e){e&&!t[e]&&(t[e]=!0)}},85623:function(t,e,n){var i;n.d(e,{y:function(){return i}}),function(t){t[t.StandardEventBasedDeferral=0]="StandardEventBasedDeferral",t[t.CustomEventBasedDeferral=1]="CustomEventBasedDeferral"}(i||(i={}))},85766:function(t,e,n){n.d(e,{dl:function(){return l},eM:function(){return d},wj:function(){return u}});var i=n(74166),r=n(28828);const o=()=>{const t=(()=>{const t=(0,i.Ux)("els",!0),e=t&&(0,r.B)(t);return e&&Object.prototype.hasOwnProperty.call(e,"account_type")&&e})();if(t){if("MSA"===t.account_type)return"MSA";if("AAD"===t.account_type)return"AAD"}};var s=n(48608),a=n(15098),c=n(67387);const u="lt",d=(0,a.L)(()=>{let t,e;return(0,s.Ki)()?(t=2,e=(0,s.ZW)()):(0,i.Ux)("els")?(e=o(),t=e?2:1):(0,i.Ux)(u)||(0,i.Ux)("aace")?(e="MSA",t=2):(0,i.Ux)(c.j$)?(e="AAD",t=2):t=1,{isSignedIn:t,accountType:e}});function l(){d.cache.clear()}},85889:function(t,e,n){n.d(e,{AQ:function(){return V},Iv:function(){return H},J5:function(){return R},JK:function(){return z},LT:function(){return B},NP:function(){return A},R$:function(){return L},RH:function(){return F},V8:function(){return W},_t:function(){return M},_v:function(){return O},aD:function(){return x},cg:function(){return E},l2:function(){return _},m1:function(){return P},mJ:function(){return I},tl:function(){return U},vM:function(){return $},vb:function(){return D},zs:function(){return T}});var i=n(77246),r=n(17720),o=n(15098);const s="OnOOutlookMobile",a="OnOStartApp",c="emmxFre",u="xmweather-",d="launcherntp",l="launcherInterests",h="swiftKey",f="superappdhp",p="cp_msn_cmc",g="oppowx",m="_ocidIsomorphicKey",w=()=>(r.vv.get(m)||r.vv.set(m,j("ocid").toLowerCase()),r.vv.get(m)),y="_platformFlagKey",v="_hostAppNameKey",b="_clientTypeKey",S=()=>(r.vv.get(y)||r.vv.set(y,j("chpltfm")),r.vv.get(y)),C=()=>{if(!r.vv.get(v)){const t=S();r.vv.set(v,t.toLowerCase().split("-")[0])}return r.vv.get(v)},k=()=>{if(!r.vv.get(b)){const t=S();r.vv.set(b,t.toLowerCase().split("-")[1])}return r.vv.get(b)};function T(){if(!(0,i.S)()||U())return!1;const t=window.sapphireWebViewBridge,e=window.webkit,n=t&&t.send,r=e&&e.messageHandlers&&e.messageHandlers.send&&e.messageHandlers.send.postMessage;return!(!n&&!r)}function x(){return!!(0,i.S)()&&w()===p}function A(){return!!(0,i.S)()&&(w()===p&&"true"===j("hasBridge"))}function $(){return window&&!!window._isCopilotBridge||"copilot"===j("MBApp")}function I(){const t=window.location?.hostname;return"localhost.msn.com"===t}function P(){const t=S()&&"outlook"===C()&&["ios","android","ipados"].includes(k()),e=w()===s.toLowerCase();return t||e}function R(){return w()===g}function M(){return P()}function _(){return"true"===j("is2ndWV")}function E(){return w()===c.toLowerCase()}function F(){return!(!(0,i.S)()||U())&&(T()||w()===a.toLowerCase()||w()===f.toLowerCase())}function D(){return"mmx"===w()}function O(){const t=j("edge");return("emmx"===C()||"1"===t)&&F()||D()}function N(){return"3rdp"===C()||w().startsWith(u)||U()}function L(){return"vivo"===w()&&N()}function B(){return[d.toLowerCase(),l.toLowerCase()].includes(w())&&F()}function U(){return w().toLowerCase()===h.toLowerCase()||"swiftkey"==C().toLowerCase()}function W(){if(!(0,i.S)())return!1;if("bingHomepageMobile"===window._clientSettings?.pagetype)return!0;{const t=document.getElementsByClassName("peregrine-widget-settings")[0]?.getAttribute("data-client-settings");if(t){const e=JSON.parse(t);return e&&e.pagetype&&"bingHomepageMobile"===e.pagetype}return!1}}function V(){return-1!==window.location.href.indexOf("metaos=true")}function H(){return F()&&!("emmxinterests"===w())&&!(w()===l.toLowerCase())&&!N()&&!O()}const z=(0,o.L)(()=>T()||P()||F()||w()==="weather-app-win".toLowerCase()||w()==="finance-app-win".toLowerCase()||O()||N()||B()||U()||V()||$()||A());function j(t){try{return new URL(location.href).searchParams.get(t)||""}catch(t){return""}}},86045:function(t,e,n){n.d(e,{UO:function(){return P},qp:function(){return R},b:function(){return B},iy:function(){return L},kp:function(){return V},WK:function(){return M},kf:function(){return $},Y_:function(){return F}});var i=n(50297),r=n(58559),o=n(45181),s=n(98216),a=n(17501),c=n(6092),u=n(12870),d=n(49084),l=n(19548),h=n(75776),f=n(53384),p=n(67387),g=n(11367),m=n(1732),w=n(30817),y=n(80247),v=n(96851),b=n(50802),S=n(79742),C=n(63607),k=n(58533),T=n(974);function x(){window.standbyClickEventsHandler&&(window.removeEventListener("click",window.standbyClickEventsHandler),window.removeEventListener("auxclick",window.standbyClickEventsHandler),window.removeEventListener("contextmenu",window.standbyClickEventsHandler),delete window.standbyClickEventsHandler)}var A=n(88296);function $(t,e,n){const h=c.T3.CurrentRequestTargetScope&&c.T3.CurrentRequestTargetScope.pageExperiments,f=h&&h.includes("prg-telemetry-trace");let p;const m=h&&h.includes("prg-ntp-adden"),w=h&&h.includes("prg-tel-track25"),y=h&&h.includes("prg-tel-trackboth"),v=h&&h.includes("prg-tel-vcard"),b=v||h&&h.includes("prg-tel-advcard"),S=v||h&&h.includes("prg-tel-cnvcard");(w||y)&&(p=w?"TwentyFivePercentOnly":"Both");const $=i.e.getAppTypeTrackingSystemConfig(u.Rb.IsBlendedEnterprise),P=h&&(h.includes("prg-ad-ivq")||h.includes("prg-an-trace")),R="undefined"!=typeof window&&window?.isSSREnabled,M=(0,d.NY)(R)?void 0:{anonCookieName:c.T3.AuthCookieName};(0,k.hq)(),g.gR.isRuby,(0,s.km)(new C.v({...M,trackingSystems:$,autoCaptureContentView:!1,useEventQueue:!0,ignoreClientAnidCookies:!0,inheritPropertyList:["ext"],inheritByTraversingDOM:!0,memoizeInheritedProperties:!1,enableSendClientLogEvent:P,logElementForLineageFailure:!0,hydrationPromise:n,enableTraceGenerator:f,deferContentViewIntersectionCallbacks:u.Rb.IsPrerender,disableLayoutEventManager:h&&h.includes("nolayoutevt"),enableEventsBatching:I(),enableMouseDwellTime:!0,mouseDwellCardTypePrefixs:T.$S,enableViewportOffset:!0,cardsForVPOffset:T.v,enableVPOffsetOnClick:!0,enableNoPartialContentView:!0,startDwellOnPageVisible:c.T3.IsHeroNTP,shouldYieldCVCallback:u.Rb.IsPrerender||h.includes("npcvyield"),cvIntersectionObserverDelay:h.includes("cvintobs100")?100:h.includes("cvintobs50")&&50,telemetryInitOptions:c.T3.TelemetryInitOptions,intersectionObserverMode:p,advCardTracking:b,contentvCardTracking:S,enableAdDensityTracking:m})),function(t){window.standbyClickEventsHandler&&(t&&t instanceof Promise?t.then(()=>{x()}):x())}(n),E=!1,document.addEventListener("trackvaluesupdated",O);const _=function(t,e){const n="1"===l._3.getQueryParameterByName("startpage",t),o=l._3.getQueryParameterByName("firstlaunch",t),a="0"!==l._3.getQueryParameterByName("dsp",t),d=n||"1"===o?"dhp":"ntp",h=g.gR.isRuby,f="enterprise"===c.T3.CurrentRequestTargetScope.audienceMode,p=c.T3.CurrentRequestTargetScope&&c.T3.CurrentRequestTargetScope.pageExperiments;let m="msedgntp";h&&p&&!p.includes("prg-rm-rocid")?m=function(t,e){const n=e?"dhp":"ntp";if(t)return`edgent${n}ruby`;return`edg${n}ruby`}(f,n):f?m="entnewsntp":c.T3.CurrentRequestTargetScope.os===r.N.Xbox?m="xboxntp":n&&(m="msedgdhp");t&&c.T3.IsHeroNTP&&(m=l._3.getQueryParameterByName("ocid",t));const w=window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)");let y=!1;w&&(y=!!w.matches,w.addEventListener("change",t=>{s.YT.updatePageMetadata({page:{theme:t.matches?"dark":"light"}})}));const v={pageCanvas:"Browser",pageConfiguration:null,pageName:("1"===o?"FRE":h&&"ruby")||"default",pageOcid:m,pageProduct:u.Rb.IsBlendedEnterprise?"entnews":"anaheim",pageTheme:y?"dark":"light",pageHas3PSearch:!a,pageContentDomainId:"340",pageContentSubCategory:"antp",pageContentVertical:"homepage"},b={pageType:d,pageUrl:t,pageViewType:(0,A.ne)()},S=i.e.getAppTypeTelemetryContract(v,e,null,b),C={...S,page:{...S.page,isSearchAB:!1}};return C}(t,e);if(i.e.initPage(_),o.n.subscribe(o.Y.Initialized,U),"false"===l._3.getQueryParameterByName("enableTrack",t)&&s.YT.disableTrackingSystem(a.x.All),window.updatedRequestId&&s.YT.updateRequestId(window.updatedRequestId),window.swFeatTmplContents){const{aid:t,newRid:e,responseCached:n}=window.swFeatTmplContents;s.YT.addOrUpdateTmplProperty("sw-rid-log",`${t}|${e}|${n}`)}window.dispatchEvent(new CustomEvent("telemetryInitialized"))}function I(){return u.Rb.IsPrerender?["AppError","ContentView"]:c.T3.BatchedEvents}function P(t){const e=()=>{if("visible"===document.visibilityState)return;if(!("1"===l._3.getQueryParameterByName("startpage",location.href)))return;const e=(0,w.ZF)();e&&(e["DHP.Conversion.Start"]=performance.now());const n=u.Rb.ClientSettings;n.pagetype="ntp",(0,h.iB)(n);const i=new URL(location.href);i.searchParams.delete("startpage"),window.history.replaceState({},document.title,i.toString());const r={page:{url:window.document.URL,type:"ntp"}};L()||(r.page.ocid="msedgntp"),s.YT.updatePageMetadata(r),s.YT.addOrUpdateTmplProperty("ntpconv",t?"1":"0")};t?e():(0,m.M0)(e)}function R(t){const e=()=>{if("visible"===document.visibilityState)return;if("1"===l._3.getQueryParameterByName("startpage",location.href))return;const e=(0,w.ZF)();e&&(e["NTP.Conversion.Start"]=performance.now());const n=new URL(location.href);n.searchParams.append("startpage","1"),window.history.replaceState({},document.title,n.toString());const i=u.Rb.ClientSettings;i.pagetype="dhp",(0,h.iB)(i);const r={page:{url:window.document.URL,type:"dhp"}};L()||(r.page.ocid="msedgdhp"),s.YT.updatePageMetadata(r),s.YT.addOrUpdateTmplProperty("dhpconv",t?"1":"0")};t?e():(0,m.Q4)(e)}function M(){const{name:t,type:e,product:n}=s.YT.getPageMetadata().contract.page;(0,y.U1)("pageType",e),(0,y.U1)("pageName",t),(0,y.U1)("pageProduct",n)}let _,E;function F(t){(0,f.SQ)()==p.Cr.Init&&(0,f.S)(p.Cr.Sticky);s.YT.updatePageMetadata({feed:{layout:"multicol"}},!0);const e=function(t){switch(t){case 1:return"productivityHub";case 5:return`following/${(0,f.SQ)()}`;default:return"myfeed"}}(t);s.YT.updatePageMetadata({feed:{id:e}})}function D(){if("visible"===document.visibilityState){const t=(0,b.n6)(!1);E&&!t&&(s.YT.addEventTypeToForceQueueList("ContentView"),s.YT.flush(!0,void 0,"ContentView")),document.removeEventListener("visibilitychange",D)}}function O(){document.removeEventListener("trackvaluesupdated",O),E=!0,_?N():D()}function N(){s.YT.waitForContentVisibilityObserverInit().then(()=>{s.YT.removeEventTypeFromForceQueueList("ContentView"),s.YT.flush(void 0,"ContentView",void 0)}),s.YT.flush(void 0,void 0,"ContentView")}function L(){return c.T3.CurrentRequestTargetScope&&"enterprise"===c.T3.CurrentRequestTargetScope.audienceMode}function B(){if(L()){const t=c.T3.ResolvedAccountInfo;return t&&t.account_type&&"AAD"===t.account_type}return!1}function U(t){if(t){o.n.get(o.Y.CookieConsentStatus)!==S.z.NotRequired&&s.YT.disableTrackingSystem(a.x.Comscore)}}function W(t){switch(t){case 1:return"entnewshp";case 5:return"following";default:return"default"}}function V(t){let e;"enterprise"===c.T3.CurrentRequestTargetScope.audienceMode?e={msnocid:"entnewsntp",pageName:W(t),pageProduct:"entnews"}:c.T3.CurrentRequestTargetScope.os===r.N.Xbox?e={msnocid:"xboxntp",pageName:W(t),pageProduct:r.N.Xbox}:5===t&&s.YT.updatePageMetadata({page:{name:W(t)}},!0),e&&s.YT.updatePageMetadata({page:{ocid:e.msnocid,name:e.pageName,product:e.pageProduct}},!0)}_=!1,E=!0,u.Rb.IsPrerender&&"visible"!==document.visibilityState?(document.addEventListener("visibilitychange",D),(0,v.GP)().then(()=>{_=!0,E&&(document.removeEventListener("visibilitychange",D),N())})):_=!0},86676:function(t,e,n){n.d(e,{Q:function(){return i}});class i{constructor(t){this.onSubscriptionCallbackError=t,this.eventLookup={}}publish(t,e){let n=this.eventLookup[t];if(void 0!==n){n=n.slice();let i=n.length;for(;i-- >0;)try{n[i](e)}catch(n){this.onSubscriptionCallbackError&&this.onSubscriptionCallbackError(n,t,i,e)}}}subscribe(t,e){void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]);const n=this.eventLookup[t];return n.push(e),{dispose(){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}}subscribeOnce(t,e){const n=this.subscribe(t,function(t){n.dispose(),e(t)});return n}}},86948:function(t,e,n){n.d(e,{_r:function(){return w},NP:function(){return T},rj:function(){return S},XK:function(){return v},Fo:function(){return y},e9:function(){return b}});var i=n(44369),r=n(49084),o=n(12870),s=n(85766),a=n(30158),c=n(28868),u=n(56639);var d=n(23572),l=n(17720),h=n(8353);const f="__SignInStateIsValid__",p="__SignInStatePromiseResolver__",g=()=>{l.vv.set(f,new Promise(t=>{l.vv.set(p,t)}))};g();const m=()=>l.vv.get(f);function w(){const t=l.vv.get(p);t&&t()}function y(){return 2===(0,i.l)().getSignInState()}function v(){return C("getUserSignInState",(0,r.nf)())}function b(){return C("waitForSignInState",!0)}async function S(t=!0){const e={signedInStatus:1,accountType:null};if((0,c.RH)()&&t){await async function(){let t=0;return new Promise((e,n)=>{if((0,u.vk)())e();else{const i=setInterval(async function(){(0,u.vk)()?(clearInterval(i),e()):t>30?(clearInterval(i),n()):t++},50)}})}();const t=(0,u.cE)();t&&(e.signedInStatus=t.isSignedIn?2:1,e.accountType=k(t.accountType))}else if((0,a.$O)()){const t=await(0,a.f7)();e.accountType=k(t.accountType),e.signedInStatus=t.tokenValue?2:1}else e.signedInStatus=await b(),e.accountType=T();return e}async function C(t,e){const n=(0,o.Th)().UserIsSignedIn;if(null!=n)return n?2:1;const r=(0,d.aK)(),s=r&&r.startMeasure(t).endMeasure;let a;e&&(a=(0,d.Kq)("GetSignInStateAsync"),(0,i.l)().initOverrides(),await m());const c=(0,i.l)().getSignInState();return s&&s(),a&&a(),c}function k(t=null){return"MSA"===t?"MSA":"AAD"===t?"AAD":void 0}function T(){if((0,r.lp)()){const t=(0,s.eM)();return 2===t.isSignedIn&&t.accountType}if((0,r.FS)())return(0,h.mL)()}},87032:function(t,e,n){var i;n.d(e,{Wj:function(){return o},bH:function(){return r},ov:function(){return i}}),function(t){t[t.Immediately=0]="Immediately",t[t.OnPageLoad=1]="OnPageLoad",t[t.OnUserInteraction=2]="OnUserInteraction",t[t.OnBusinessSearchResultsReady=3]="OnBusinessSearchResultsReady"}(i||(i={}));const r="Search-AutoSuggest",o="q"},87108:function(t,e,n){var i,r,o,s;n.d(e,{ph:function(){return r}}),function(t){t.TimeToAstSdkScriptRequest="TTAdSdk.ScriptRequest",t.TimeToAstSdkScriptLoaded="TTAdSdk.ScriptLoaded"}(i||(i={})),function(t){t.TimeToRequestAd="TTNativeAd.Request",t.TimeToRequestAdBackground="TTNativeAd.Background.Request",t.TimeToServeAd="TTNativeAd.Serve",t.TimeToServeAdBackground="TTNativeAd.Background.Serve",t.TimeToRenderAd="TTVR.NativeAd",t.TimeToPrerenderAd="TTNativeAd.Prerender",t.TimeToAdResponse="TTNativeAd.Response",t.ApiDuration="NativeAd.ApiDuration",t.RenderReady="NativeAd.RenderReady",t.RequestInitiated="NAdInitiate",t.RequestSent="NAdInitiateToReq",t.AdFetched="NAdFetch",t.AdServerLatency="NAdServerLatency",t.AdProcessed="NAdProcess",t.RespToAdCallback="NAdRespToCallback",t.AdCallbackProcessed="NAdCallbackProcess",t.AdRendered="NAdRender",t.TimeToConsumeAds="TTNativeAd.Consume",t.TimeToConsumeAdsSSR="TTNativeAd.ConsumeSSR"}(r||(r={})),function(t){t.TimeToAdScriptRequest="TTDisplayAd.ScriptRequest",t.TimeToAdScriptLoaded="TTDisplayAd.ScriptLoaded",t.TimeToAdFetchStarted="TTDisplayAd.FetchStarted",t.TimeToAdFetchCompleted="TTDisplayAd.FetchCompleted",t.TimeToAdRenderCompleted="TTDisplayAd.RenderCompleted",t.TimeToAdSlotRenderStart="TTDisplayAd.SlotRenderStart",t.TimeToBatchRequestSent="TimeToBatchRequestSent"}(o||(o={})),function(t){t.TimeToRenderAd="TTVR.MarqueeAd",t.TimeToPrerenderAd="TTPR.MarqueeAd"}(s||(s={}))},87137:function(t,e,n){n.d(e,{Q:function(){return c},_:function(){return u}});var i=n(17720);const r="__propsMap__",o="__currentPropsToken__",s=()=>(i.vv.get(r)||i.vv.set(r,{}),i.vv.get(r)),a=()=>{i.vv.get(o)||i.vv.set(o,1);const t=i.vv.get(o);return i.vv.set(o,t+1),t};function c(t){if(!t)return;const e=s();for(const[n,i]of Object.entries(e))if(i===t)return n;const n=a().toString();return e[n]=t,n}function u(t){const e=s(),n=e[t];return delete e[t],n}i.vv.set(r,{}),i.vv.set(o,1)},87346:function(t,e,n){function i(t,e){const n=e.replace(/[[\]]/g,"\\$&"),i=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(t);if(!i)return null;const r=i[2];return decodeURIComponent(r.replace(/\+/g," "))||""}n.d(e,{K:function(){return i}})},87405:function(t,e,n){n.d(e,{KO:function(){return a},TW:function(){return u},pr:function(){return c}});var i=n(79426),r=n(17720);const o=()=>r.vv.get("__global-element-map_elementMap__",()=>new Map),s=()=>r.vv.get("__global-element-map_waitForElementMap__",()=>new Map);function a(t,e){if(!e)return;o().set(t,e);const n=s().get(t);n&&n.set(e)}function c(t){return t?o().get(t):null}function u(t){if(!t)return Promise.reject(null);const e=c(t);if(c(t))return Promise.resolve(e);const n=s();if(n.has(t))return n.get(t).getResultAsync();const r=new i.e;return n.set(t,r),r.getResultAsync()}},87518:function(t,e,n){n.d(e,{g:function(){return a},l:function(){return s}});var i=n(47149),r=n(61522),o=n(94706);function s(...t){return new i.$((0,o.J)(...t))}function a(...t){if(!t||t.length<3||!(0,r.P5)(t[t.length-1]))throw new Error("Invalid arguments");const e=t.pop(),n=(0,o.J)(...t),s=Object.assign(n,e);return new i.$(s)}},87637:function(t,e,n){n.d(e,{fh:function(){return r},j9:function(){return o}});const i={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function r(t){return t.replace(/[<>/\u2028\u2029]/g,t=>i[t])}async function o(t,e=!1){0}},88034:function(t,e,n){n.d(e,{$y:function(){return Q},BT:function(){return J},Bd:function(){return St},Bv:function(){return I},E9:function(){return Ft},EF:function(){return Ot},ET:function(){return R},GL:function(){return A},HW:function(){return dt},Ii:function(){return Et},Je:function(){return Pt},KH:function(){return wt},Kp:function(){return it},L3:function(){return pt},Mc:function(){return Z},O4:function(){return _t},O_:function(){return At},Oi:function(){return G},R:function(){return $t},SE:function(){return Bt},SG:function(){return Wt},T_:function(){return ut},Ug:function(){return H},Ve:function(){return X},Vr:function(){return Vt},W3:function(){return C},Wf:function(){return ct},Wu:function(){return at},XO:function(){return $},YS:function(){return L},Yc:function(){return E},Yl:function(){return W},Yx:function(){return It},Z_:function(){return j},_g:function(){return Tt},aw:function(){return Rt},b6:function(){return lt},cJ:function(){return B},cz:function(){return Ut},e:function(){return Dt},e2:function(){return Nt},eY:function(){return yt},fQ:function(){return P},f_:function(){return K},go:function(){return xt},hJ:function(){return M},jI:function(){return tt},kG:function(){return st},l3:function(){return rt},l4:function(){return U},ls:function(){return ft},mf:function(){return kt},mv:function(){return O},oF:function(){return _},ov:function(){return x},p8:function(){return z},pE:function(){return nt},rk:function(){return Mt},sg:function(){return ot},uF:function(){return k},v0:function(){return F},vT:function(){return V},zK:function(){return D}});var i=n(89980),r=n(6092),o=n(36090),s=n(12870),a=n(55593),c=n(63150),u=n(43889),d=n(77246),l=n(98216),h=n(41820),f=n(48172),p=n(98793),g=n(1732),m=n(50802),w=n(63418),y=n(65022),v=n(93468);const b=30;var S;!function(t){t[t.UnsupportedEnvironment=1]="UnsupportedEnvironment",t[t.UnsupportedCohortConditions=2]="UnsupportedCohortConditions",t[t.UnsupportedMarket=3]="UnsupportedMarket",t[t.PageForced=4]="PageForced",t[t.ExplicitOptIn=5]="ExplicitOptIn",t[t.UserSelectionOptIn=6]="UserSelectionOptIn",t[t.BlockedByEdgeIsolation=7]="BlockedByEdgeIsolation",t[t.PageSettingsIneligible=8]="PageSettingsIneligible",t[t.InControlFlight=9]="InControlFlight",t[t.UserSelectionOptOut=10]="UserSelectionOptOut",t[t.OneServiceABCohort=11]="OneServiceABCohort",t[t.DogfoodingCohort=12]="DogfoodingCohort",t[t.ExternalOptInCohort=13]="ExternalOptInCohort",t[t.UntargetedCohort=14]="UntargetedCohort",t[t.TrySetCookieFailed=15]="TrySetCookieFailed",t[t.RemovedDueToDogfoodOptOut=16]="RemovedDueToDogfoodOptOut",t[t.RemovedDueToNoValidFlights=17]="RemovedDueToNoValidFlights",t[t.RemovedDueToStaleABState=18]="RemovedDueToStaleABState",t[t.InMsftShipped=19]="InMsftShipped",t[t.OneServiceAACohort=20]="OneServiceAACohort",t[t.ExitFromRubyInLoggingMode=21]="ExitFromRubyInLoggingMode",t[t.RemovedDueToSignInStatusChanged=22]="RemovedDueToSignInStatusChanged",t[t.NonAdultAudienceMode=23]="NonAdultAudienceMode",t[t.NotInCohortFlightNorShipped=24]="NotInCohortFlightNorShipped"}(S||(S={}));const C=Object.freeze(new Set(["en-us"])),k=Object.freeze(new Set(["edgeChromium","msn","msnStudio"])),T=Object.freeze(new Set(["en-us","en-ca","en-au","en-gb","en-in","zh-cn"]));var x,A;!function(t){t[t.Unknown=1]="Unknown",t[t.OptIn=2]="OptIn",t[t.OptOut=3]="OptOut",t[t.ExplicitOptIn=4]="ExplicitOptIn"}(x||(x={})),function(t){t[t.Unknown=1]="Unknown",t[t.In1SCohortForAA=2]="In1SCohortForAA",t[t.Out1SCohortForAA=3]="Out1SCohortForAA",t[t.InDogfoodingCohort=4]="InDogfoodingCohort",t[t.InAlphaDogfoodingCohort=5]="InAlphaDogfoodingCohort",t[t.ExternalOptIn=6]="ExternalOptIn",t[t.In1SCohortForAB=7]="In1SCohortForAB",t[t.Out1SCohortForAB=8]="Out1SCohortForAB",t[t.InUntargetedCohort=9]="InUntargetedCohort",t[t.InMsftShipped=12]="InMsftShipped"}(A||(A={}));const $="__rubyState",I="__rubyUX",P="_",R=60,M=Object.freeze({userSelection:x.Unknown,cohortStatus:A.Unknown}),_=5e3,E=Symbol("rubySwitchManager"),F=()=>{!(0,i.Lg)().getObject("showRubyCoachmark")&&(0,i.Lg)().setObject("showRubyCoachmark","true")},D=()=>{!(0,i.Lg)().getObject("explictOptInCompactMode")&&(0,i.Lg)().setObject("explictOptInCompactMode","true")},O=t=>{if(t&&t.changed&&t.deleted){const e=t,n=t=>t.name===$||t.name===I;if(!e.changed.some(n)&&!e.deleted.some(n))return!0}return!1};function N(t,e){if(!(0,d.S)()||window.location.hostname?.startsWith?.("localhost"))return;e||(e=b);const n=new URL(window.location.href),i=`sr${t}`,r=Number(n.searchParams.get(i))||0;r<e&&(n.searchParams.set(i,String(r+1)),n.searchParams.delete("rubyopt"),window.location.href=n.href)}const L=()=>!(!s.Rb.IsPrerender||!(0,m.BZ)()),B=t=>{const e=String(t);Z("rubyUX",e),et(h.K5.ruby_ux_history,e)},U=t=>{const e=String(t);Z("rubyAwt",e)},W=t=>{const e=String(t);Z("rubyset",e)},V=t=>et(h.K5.ruby_set_history,String(t)),H=({cookieValue:t,newCookieValue:e})=>{const n=Date.now(),i=`${t}->${e}|${n}`;Z("rubyState",i),et(h.K5.ruby_state_history,i,n)},z=t=>{const e=r.T3.CurrentMarket;Z("rubyMktChange",`${e}->${t}`)},j=async t=>{const e=t=>[t,Date.now(),"hidden"===document.visibilityState?1:0].join("|"),n=await p.Q.getPreferenceSetting(h.K5.ruby_cookie_change_history,!0),i=`${n?.value}->${e(t)}`;et(h.K5.ruby_cookie_change_history,e(t)),Z("rubyCookieChangeHistory",i)},q=async()=>{const t=await p.Q.getPreferenceSetting(h.K5.ruby_cookie_change_history,!0);t?.value&&Z("rubyCookieChangeHistory",String(t?.value))},G=(t,e,n="rubyTargetedVersion")=>{const i=`${t}|${l.YT.getRequestId()}|${e}|${Date.now()}`;Z(n,i),f.f.savePreferenceSetting(h.bJ.rubyTargetedVersion,{value:i})},J=(t,e)=>{const n=`${t}|${Array.from(e||[]).filter(t=>null!=t)?.join(",")}`;Z("rubyRsmDbg",n)},Q=(t,e)=>{if(!t?.serviceContext)return;const{rubySeenOrSelectedPrevious:n,rubySampleSelected:i,rubyEverSelected:r,rubyEverSelectedSync:o}=t.serviceContext;r&&Z(e?"rubyUntgtEverSelected":"rubyEverSelected"),o&&Z(e?"rubyUntgtEverSelectedSync":"rubyEverSelectedSync"),Z(e?"rubyUntgtUXSelected":"rubyUXSelected",String(r)),Z(e?"rubyUntgtUXSelectedSync":"rubyUXSelectedSync",String(o)),Z(e?"rubyUntgtUXSeenOrSelectedPrevious":"rubyUXSeenOrSelectedPrevious",String(n)),Z(e?"rubyUntgtUXSampleSelected":"rubyUXSampleSelected",String(i))},K=async()=>{const[t,e,n,i,r]=await Promise.all([p.Q.getPreferenceSetting(h.K5.ruby_ux_history,!0),p.Q.getPreferenceSetting(h.K5.ruby_state_history,!0),f.f.getPreferenceSetting(h.bJ.rubyTargetedVersion,!0),f.f.getPreferenceSetting(h.bJ.rubyFlightHistory,!0),p.Q.getPreferenceSetting(h.K5.ruby_set_history,!0)]),o=t?.value||"",a=e?.value||"",c=n?.value?.value||"",u=i?.value?.value||"",d=r?.value||"";Z("rubyUXHistory",o),Z("rubyStateHistory",a),Z("rubyTargetedVersionHistory",c),function(t){if(s.Rb.ClientSettings?.isStatics)return;const e=Ct();(t||e)&&Z("rubyFlightHistory",`${t}->${e}`),e?f.f.savePreferenceSetting(h.bJ.rubyFlightHistory,{setting:h.bJ.rubyFlightHistory,value:e,timestamp:Date.now(),source:"ntp"}):t&&f.f.deleteKeyValueFromPSL(h.bJ.rubyFlightHistory)}(u),Z("rubySetHistory",d)};function X(){const t=s.Rb.ClientSettings?.rubyAdvRouting;if(t)Z("rubyAdvRouting",t);else{const t=(0,w.Ri)("aace"),e=["child:1","child=1"].some(e=>t?.includes(e));(0,v.vV)(y.jyZ,"Expected rubyAdvRouting was missing. Defaulting to Classic NTP.",void 0,{hasChildCookie:e})}}const Y=t=>{l.YT?t():window.addEventListener("telemetryInitialized",t,{once:!0})},Z=(t,e)=>{Y(()=>{l.YT.addOrUpdateTmplProperty(t,e)})},tt=()=>{(0,d.S)()&&u.sZ?.supported&&Y(()=>{let t=u.sZ.getItem(h.qm.tabInitialRid);t||(t=l.YT.getRequestId(),u.sZ.setItem(h.qm.tabInitialRid,t)),Z("tabInitialRid",t)})},et=(t,e,n=Date.now())=>{it()&&p.Q.savePreferenceSetting(t,{setting:t,value:e,timestamp:n,source:"ntp"})};async function nt(){const t=await async function(){return new Promise(t=>{(0,d.S)()&&window.chrome?.ntpSettingsPrivate?window.chrome.ntpSettingsPrivate.getAllPrefs(e=>{t(e)}):t([])})}(),e=t.find(t=>"ntp.background_image"===t.key),n=t.find(t=>"ntp.news_feed_display"===t.key),i=t.find(t=>"ntp.background_image_type"===t.key);return{backgroundImageProvider:e?.value?.provider,backgroundImageType:i?.value,feedSetting:n?.value}}const it=()=>(0,g.Zx)("setPref");function rt(t,e){(0,d.S)()&&window.chrome?.ntpSettingsPrivate?.onPrefsChanged?.addListener?.(n=>{if(!n||!n.length)return;const i={};n.forEach(e=>{"ntp.background_image"===e.key?e.value?.provider!==t.backgroundImageProvider&&(i.backgroundImageProvider=e.value?.provider):"ntp.background_image_type"===e.key?e.value!==t.backgroundImageType&&(i.backgroundImageType=e.value):"ntp.news_feed_display"===e.key&&e.value!==t.feedSetting&&(i.feedSetting=e.value)}),Object.keys(i).length&&(Object.assign(t,i),e(i))})}function ot(t){return"Theme"===t.backgroundImageProvider&&"theme"===t.backgroundImageType}function st(t){return!ot(t)&&!["Video","BrowserLocal"].includes(t.backgroundImageProvider)&&"off"!==t.feedSetting&&"headingsonly"!==t.feedSetting}const at=(...t)=>t.some(t=>!!s.Rb.CurrentFlightSet?.has?.(t));function ct(t){null!==t?p.Q.savePreferenceSetting(h.K5.is_ruby,{setting:h.K5.is_ruby,value:t,timestamp:Date.now(),source:"ntp"}):p.Q.deleteKeyValueFromPSL(h.K5.is_ruby)}function ut(t,e){const n=(0,w.Ub)(I,t,e);return it()&&ct(t),n}function dt(t){Z("rubyc",t),p.Q.getPreferenceSetting(h.K5.is_ruby).then(t=>{t&&Z("rubyp",String(t.value))}),q()}function lt(t,e,n){void 0===n?N(t,e):window.setTimeout(()=>N(t,e),n)}const ht=async()=>{const t=(await p.Q.getPreferenceSetting(h.bJ.rubyCohortOptOutThreshold))?.value||0;return Z("rbtc",String(t)),"number"!=typeof t||(t>=3?(gt(),!1):(p.Q.savePreferenceSetting(h.bJ.rubyCohortOptOutThreshold,{setting:h.bJ.rubyCohortOptOutThreshold,value:t+1,timestamp:Date.now(),source:"ntp"}),!0))};function ft(){return(0,c.ce)()||(0,c.ns)()}async function pt(t,e){const n=ft()&&At()&&e;if(!ft()&&$t()&&t==A.In1SCohortForAB&&e||n){const t=await ht();Z("rbtr",String(t?0:1))}else gt()}const gt=()=>{p.Q.deleteKeyValueFromPSL(h.bJ.rubyCohortOptOutThreshold)},mt=t=>{const e={};return null!=x[t.userSelection]&&t.userSelection!==x.Unknown&&(e.userSelection=t.userSelection),null!=A[t.cohortStatus]&&t.cohortStatus!==A.Unknown&&(e.cohortStatus=t.cohortStatus),n=e,0===Object.keys(n).length?void 0:e;var n},wt=t=>{if(t){const[e,n]=t.split(P).map(Number);return{...M,...mt({userSelection:e,cohortStatus:n})}}return M},yt=(t,e)=>{t=(t||r.T3.CurrentMarket).toLocaleLowerCase();const n=T.has(t)||at("prg-rn-allmkt")||Lt(),i=r.T3.CurrentRequestTargetScope?.audienceMode;return n&&!r.T3.IsHeroNTP&&"kids"!==i&&(!e||"enterprise"!==i)&&(at("prg-rn-mob")||!r.T3.isMobile&&"tablet"!==s.Rb.ClientSettings?.deviceFormFactor)&&!Wt()},vt={"-1":x.OptOut,0:x.Unknown,1:x.OptIn,2:x.OptIn},bt={1:A.InDogfoodingCohort,2:A.ExternalOptIn},St=()=>{const t=(0,a.a)().get("rubyopt");if(null!=t){const e=vt[t],n=bt[t];return null==n?{userSelection:e}:{userSelection:e,cohortStatus:n}}},Ct=()=>["prg-rubyntp8","prg-ctrl4rubyntp","prg-rubyntp9","prg-ctrl5rubyntp","prg-cdynrbctrl","prg-dynrbchlr","prg-rubyntp-et","prg-ctrlrubyntp-et"].map(t=>at(t)&&t||"").filter(t=>t).join(","),kt=()=>{const t="adult"===r.T3.CurrentRequestTargetScope?.audienceMode&&(At()||$t()),e=Tt();return t||e},Tt=()=>{const t=[o.DX.ENUS,o.DX.ENGB,o.DX.ENAU,o.DX.ENCA,o.DX.ENIN];return"adult"===r.T3.CurrentRequestTargetScope?.audienceMode&&t.includes(r.T3.CurrentMarket)},xt=(t,e)=>!(!_t()||!1!==t)&&!e,At=()=>at("ruby-ntp"),$t=()=>at("ruby-ntp-ctrl2","prg-ctrlrubyntp","prg-ctrl1rubyntp","prg-ctrlrubyntp3"),It=()=>at("ruby-ntp-aa","ruby-ntp-ctrl"),Pt=()=>At()||$t(),Rt=()=>at("prg-rn-codynamic"),Mt=()=>at("prg-rn-untgt"),_t=()=>at("prg-ctrl5rubyntp","prg-rubyntp9"),Et=()=>at("prg-ntp-ruby"),Ft=()=>at("prg-ntprubyalpha"),Dt=()=>at("prg-rsm2","prg-rsmi2")||Mt(),Ot=()=>at("prg-ncrs"),Nt=()=>at("prg-rn-mob"),Lt=()=>at("prg-untgt-ar-t"),Bt=()=>Lt()||at("prg-untgt-ar-c"),Ut=()=>at("prg-rv-p0uxurl"),Wt=()=>at("prg-vb-rn-off");function Vt(t){const e=s.Rb.ClientSettings?.bundleInfo?.variant;if("ruby"===e||!yt()||"adult"!==r.T3.CurrentRequestTargetScope?.audienceMode)return!1;const n=t?.rubyState??wt((0,w.Ri)($)),{userSelection:i,cohortStatus:o}=n;if(o!==A.In1SCohortForAB||i===x.OptOut)return!1;const a=s.Rb.EdgeNTPHeader,c=t?.isEdgeExpIsolationFlagEnabled??a?.enabledFeatures?.includes("msRubyFlightingAllowed")??!1;if(xt(c,!1))return!1;return!!st(t?.pageSettings??{backgroundImageProvider:a?.backgroundImage?.provider,backgroundImageType:a?.currentBackgroundImageType,feedSetting:a?.newsFeedDisplay})&&Tt()}},88206:function(t,e,n){n.d(e,{T:function(){return o}});var i=n(96271),r=n(98216);class o{constructor(){this.getSpanId=(t=!1)=>{if(o.traceCtrxObj&&!t)return o.traceCtrxObj.getSpanId();const e=(0,i.cL)().substring(0,16);return(0,r.RO)().then(()=>{o.setSpanIdFunc(e)},()=>{}),e},this.getTraceId=(t=!1)=>{if(o.traceCtrxObj&&!t)return o.traceCtrxObj.getTraceId();const e=(0,i.cL)();return(0,r.RO)().then(()=>{o.setTraceIdFunc(e)},()=>{}),e}}setTraceObj(t){o.traceCtrxObj=t&&t.getTraceCtx()}}o.getTraceInstance=()=>(o.traceInstance||(o.traceInstance=new o),o.traceInstance),o.setSpanIdFunc=t=>{const e=t||(0,i.cL)().substring(0,16);try{o.traceCtrxObj.setSpanId(e)}catch(t){}},o.setTraceIdFunc=t=>{const e=t||(0,i.cL)();try{o.traceCtrxObj.setTraceId(e)}catch(t){}}},88294:function(t,e,n){function i(t){r=t}n.d(e,{B:function(){return i},v:function(){return r}});let r=new(n(71266).p)},88296:function(t,e,n){n.d(e,{TU:function(){return l},ne:function(){return f}});var i=n(27942),r=n(71804),o=n(75084),s=n(18731),a=n(77246),c=n(17720);const u="__FastBreakpointManager__";class d{get currentColumnArrangement(){return this.indexToStandardConverter(this.breakpointTracker.currentBreakpoint())}constructor(t){this.useRequestIsolatedTracker=!1,this.callbackMap=new Map,this.refreshBreakpoints(t)}refreshBreakpoints(t){const e=[0],n=(0,i.VD)();(0,i.mO)();for(let t=1;t<n.length;t++)e.push(n[t]?.minViewportWidthPx);this.breakpointTracker.breakpoints=e,this.breakpointTracker.defaultBreakpoint=void 0!==t?(0,s.KP)(t.data.breakpoint,"breakpoint"):0}set breakpoints(t){if(this.breakpointTracker.breakpoints=t,o.KL&&Array.isArray(o.KL)){const e=o.KL.length;for(let t=0;t<e;t++)o.KL.pop();t.forEach(t=>o.KL.push(t))}}get breakpoints(){return this.breakpointTracker.breakpoints}updateBreakpointsBasedFromContainerWidth(t){const e=(0,i.VD)();if(t>=e[3].contentSizePx)return;const n=[];for(let i=0;i<this.breakpoints.length;i++)(0===i||t>=e[i].contentSizePx)&&n.push(e[i].contentSizePx);this.breakpoints=n}subscribe(t){const e=e=>{t(this.indexToStandardConverter(e))};this.callbackMap.set(t,e),this.breakpointTracker.subscribe(e)}unsubscribe(t){this.breakpointTracker.unsubscribe(this.callbackMap.get(t)),this.callbackMap.delete(t)}unsubscribeAll(){this.callbackMap.forEach(t=>{this.breakpointTracker.unsubscribe(t)}),this.callbackMap.clear()}indexToStandardConverter(t=0){const e=(0,i.VD)();return e&&t>=e.length&&e[e.length-1]?e[e.length-1].arrangement:e[t].arrangement}get breakpointTracker(){return!(0,a.S)()&&this.useRequestIsolatedTracker?c.vv.get("__FastBreakpointManager_breakpointTracker__",()=>new r.A.constructor):r.A}}const l=(t,e)=>(e&&c.vv.set(u,new d(t)),c.vv.get(u,()=>new d(t)));const h="__FastBreakpointManager_viewType__",f=()=>{let t=null;switch(l().currentColumnArrangement){case i.j1.c1:t="size1column";break;case i.j1.c2:t="size2column";break;case i.j1.c3:t="size3column";break;case i.j1.c4:t="size4column";break;case i.j1.c5:t="size5column";break;default:return c.vv.get(h,()=>null)}return c.vv.set(h,t),t}},88312:function(t,e,n){var i,r,o;n.d(e,{hr:function(){return r},sM:function(){return i}}),function(t){t.like="like",t.love="love",t.surprised="surprised",t.thinking="thinking",t.sad="sad",t.angry="angry",t.share="share"}(i||(i={})),function(t){t.upvote="upvote",t.downvote="downvote"}(r||(r={})),function(t){t.star1="star1",t.star2="star2",t.star3="star3",t.star4="star4",t.star5="star5"}(o||(o={}))},89151:function(t,e,n){n.d(e,{$y:function(){return j},AG:function(){return dt},Ak:function(){return $t},CG:function(){return Pt},Ci:function(){return i},HL:function(){return E},IJ:function(){return Z},Iw:function(){return lt},Sv:function(){return ot},Ux:function(){return It},VK:function(){return rt},W4:function(){return St},XO:function(){return it},Y0:function(){return Q},Yq:function(){return nt},Yy:function(){return ft},bu:function(){return ut},dT:function(){return ct},eD:function(){return Rt},es:function(){return z},iJ:function(){return Y},kJ:function(){return st},m7:function(){return q},oO:function(){return Tt},pE:function(){return X},qG:function(){return J},tD:function(){return tt},tU:function(){return mt},tt:function(){return xt},uR:function(){return at},vj:function(){return At},wI:function(){return pt},wL:function(){return O},xY:function(){return kt},yE:function(){return Ct},yi:function(){return G},z1:function(){return ht}});var i,r=n(53685),o=n(77246),s=n(68399),a=n(30817),c=n(83078),u=n(13053),d=n(84080);let l,h,f,p,g,m,w;!function(t){t.Primary="primary",t.Secondary="secondary"}(i||(i={}));const y=new Map,v=new Map,b=new Map;let S,C,k,T,x,A,$,I,P=new Map,R=new Map,M=[];const _="TTF.",E="TTVR.",F="TTVS.",D="TTPR.",O="TTSR.";let N="",L=!1,B=!1,U="",W=!1;const V={};let H;function z(){H=!1}function j(){return V}function q(t="",e=!1,n){(0,o.S)()&&(n=n||performance.now(),et(_,t,e,W?(0,d.C)(n):n))}function G(t="",e=!1,n,i=!0){if((0,o.S)()){if(n=n||performance.now(),i&&W&&n>0){const i=(0,d.C)(n);return et(E,t,e,i),K(t),i}return et(E,t,e,n),K(t),n}}function J(t){M.push(t)}function Q(t){M=M.filter(e=>e!==t)}function K(t){if(M.length)try{M.map(e=>e(t))}catch(t){}}function X(t="",e=!1,n){(0,u.D)(()=>G(t,e,n))}function Y(t=""){const e=St(r.xF),n=-1===e?-1:performance.now()-e;et(D,t,!1,n)}function Z(t,e,n){tt(t,n-e)&&(0,s.Ww)({name:t,startTime:e,endTime:n})}function tt(t,e){if(R.get(t))return!1;const n=performance.getEntriesByName&&performance.getEntriesByName(t);let i;return Boolean(n&&n.length)?R.has(t)||(R.set(t,Math.round(n[0].startTime)),i=!0):(c.M.singleMark(t),R.set(t,isNaN(e)?-1:Math.round(e)),i=!0),h&&h.delete(t)&&0===h.size&&A&&A(ft()),i}function et(t,e,n,i){if(!e||!e.length)return;if(!t||!t.length)return;const o=t+e;if(o.startsWith(E)&&(!g||!g.has(o))&&m&&m.has(o))return void tt(o,n?-1:i);if(b.has(o)&&b.get(o)(o),P.get(o))return;const s=performance.getEntriesByName&&performance.getEntriesByName(o);Boolean(s&&s.length)?P.set(o,Math.round(s[0].startTime)):(c.M.singleMark(o),n?P.set(o,-1):P.set(o,Math.round(i))),o.startsWith(E)&&(V.marker=o,V.value=P.get(o)),f&&f.delete(o)&&0===f.size&&C&&C(yt()),l&&l.delete(o)&&0===l.size&&T&&T(lt()),t===F&&(tt("TTVS",n?-1:i),I&&I(vt(F,r.m6)))}function nt(t){l=gt(t),f=gt(t,"TTVR"),p=gt(t,"TTPR"),g=new Set(bt(t,"TTVR")),C&&0===f.size&&T(yt()),T&&0===l.size&&T(lt()),L=!0}function it(t){h||(h=new Set,m=new Set,t.forEach(t=>{R.get(t)||h.add(t),t.startsWith(E)&&m.add(t)}),0===h.size&&A&&A(ft()))}function rt(t){w||(w=t)}function ot(t){t&&L&&l&&f&&(t.startsWith(E)||(t=E+t),P.has(t)||(l.add(t),f.add(t)),g.add(t))}function st(){return(0,o.S)()?function(){if(!(0,o.S)())return null;if(k)return k;if(l&&0===l.size)return Promise.resolve(lt());return k=new Promise(t=>{T=t}),k}():null}function at(){return(0,o.S)()?x||(h&&0!==h.size?(x=new Promise(t=>{A=t}),x):Promise.resolve(ft())):null}function ct(){return(0,o.S)()?S||(f&&0===f.size?Promise.resolve(yt()):(S=new Promise(t=>{C=t}),S)):Promise.resolve([])}function ut(){return(0,o.S)()?$||($=new Promise(t=>{I=t}),$):null}function dt(t){return(yt().find(e=>e[0]===t)||[])[1]}function lt(){return[...yt(),...wt()]}function ht(){return[...yt(!1),...wt()]}function ft(){return[...R]}function pt(t){return t===i.Primary?Array.from(l||[]):Array.from(h||[])}function gt(t,e){const n=new Set;for(const i of bt(t,e))P.get(i)||n.add(i);return n}function mt(t){return P.get(D+t)}function wt(){return vt(_)}function yt(t=!0){return t&&!1!==H?vt(E,r.xA,!0):vt(E)}function vt(t,e,n){const i=[];let o=0;if(P.forEach((e,n)=>{if(n.startsWith(t)){i.push([n,e]);const t=n.startsWith("TTVR");e>o&&(!t||g?.has?.(n))&&(o=e,t&&(N=n));const r=y.get(n);r?.name&&(v.get(r.name)<e&&v.set(r.name,e),r.preserve||i.pop())}}),v.forEach((e,n)=>{n.startsWith(t)&&i.push([n,e])}),e&&i.push([e,o]),n&&e===r.xA){const t=(0,a.ZF)().refreshDelay||0;i.push(["TTVR.WithRefreshDelay",o+t])}return i}function bt(t,e){let n=[],i=[],r=[];return!t||!t.TTVR||e&&"TTVR"!==e||(n=t.TTVR.map(t=>E+t)),!t||!t.TTF||e&&"TTF"!==e||(r=t.TTF.map(t=>_+t)),t&&t.TTPR&&"TTPR"===e&&(i=t.TTPR.map(t=>D+t)),[...n,...r,...i]}function St(t){const e=performance.getEntriesByName(t);return e&&e[0]&&e[0].startTime?e[0].startTime:-1}function Ct(t){const e=R.get(t);return null!=e?e:-1}function kt(){return w}function Tt(t="",e=!1,n,i){let r=t;r.startsWith(E)||(r=E+t),L&&(g.has(r)||B)&&""!==t?G(t,e,n,i):K(t)}function xt(t="",e=!1,n){let i=t;i.startsWith(E)||(i=E+t),L&&(g.has(i)||B)&&""!==t?X(t,e,n):K(t)}function At(t="",e="",n=!1,i){let r=t,o=e;L&&""!==t&&""!==e&&(B||e!==U)&&(r.startsWith(E)||(r=E+t),o.startsWith(E)||(o=E+e),l.has(r)||P.has(r)||g.has(r)||(ot(r),y.set(r,{name:o,preserve:n}),v.set(o,-1),i&&b.set(r,i)))}function $t(t=!1,e=""){B=t,U=e}function It(t){W=t}function Pt(){return W}function Rt(){return N}},89284:function(t,e,n){n.d(e,{eE:function(){return g}});var i=n(12870),r=n(63418),o=n(84397),s=n(98216);const a="prg-ad-rv-frmkt-t",c="prg-ad-rv-frmkt-c";var u;function d(){return"fr-fr"===i.Rb.Locale}function l(){return"fr"===i.Rb.ClientSettings?.geo_country?.toLowerCase()}function h(){const t=(0,r.Ti)();if(!t)return!1;try{const e=window.otIabModule?.tcfSdkRef.tcString().decode(t),n=e?.vendorConsents.set_.has(32),i=e?.vendorConsents.set_.has(1126);return!(!n&&!i)}catch(t){return s.YT.sendClientLogEvent({message:`Error parsing consent cookie for targeting vendor, error: ${t}`,type:"warning"}),!1}}function f(){return!(!i.Rb.CurrentFlightSet||!i.Rb.CurrentFlightSet.has(a)&&!i.Rb.CurrentFlightSet.has(c))}function p(){f()&&(s.YT.addOrUpdateTmplProperty("isFrMarket",d()?"1":"0"),s.YT.addOrUpdateTmplProperty("isFrIp",l()?"1":"0"));const t=!(0,r.Ti)()||function(){const t=(0,r.Ri)(o.wf.BrowserOptOut);return!(!t||"1"!==t)}();return!i.Rb.CurrentFlightSet?.has(a)&&d()?t?{shouldMask:!0,reason:"fr-fr market: pre-consent or browser opted out"}:h()?{shouldMask:!1,reason:"fr-fr market: vendor consent accepted"}:{shouldMask:!0,reason:"fr-fr market: vendor consent rejected"}:l()?t?{shouldMask:!0,reason:"French IP: pre-consent or browser opted out"}:window.__tcfapi&&"function"==typeof window.__tcfapi?h()?{shouldMask:!1,reason:"French IP: GDPR market: vendor consent accepted"}:{shouldMask:!0,reason:"French IP: GDPR market: vendor consent rejected"}:{shouldMask:!1,reason:"French IP: Non-GDPR market"}:{shouldMask:!1,reason:"Not subject to French or GDPR consent restrictions"}}!function(t){t.FLIGHT_DISABLED="Current flight set allows passing identifiers",t.FR_MARKET_PRE_CONSENT="fr-fr market: pre-consent or browser opted out",t.FR_MARKET_VENDOR_ACCEPTED="fr-fr market: vendor consent accepted",t.FR_MARKET_VENDOR_REJECTED="fr-fr market: vendor consent rejected",t.FR_IP_PRE_CONSENT="French IP: pre-consent or browser opted out",t.FR_IP_GDPR_VENDOR_ACCEPTED="French IP: GDPR market: vendor consent accepted",t.FR_IP_GDPR_VENDOR_REJECTED="French IP: GDPR market: vendor consent rejected",t.FR_IP_NON_GDPR="French IP: Non-GDPR market",t.NON_RESTRICTED="Not subject to French or GDPR consent restrictions"}(u||(u={}));const g={validateIdentifierUsage:p,maskIdentifiers:function(t){const e=p();if(f()){const t=i.Rb.CurrentFlightSet.has(a)?"1":"0",n=i.Rb.CurrentFlightSet.has(c)?"1":"0",r=e.shouldMask?"1":"0";s.YT.addOrUpdateTmplProperty("maskValue",`${t}_${n}_${r}`)}return e.shouldMask?void 0:t}}},89388:function(t,e,n){n.d(e,{r:function(){return o}});var i=n(94444);let r={};function o(t,e){return null!=e?r[t]=e:r[t]}(0,i.x)(()=>{r={}})},89438:function(t,e,n){n.d(e,{e:function(){return r}});const i="visibilitychange";function r(){return"visible"===document.visibilityState?Promise.resolve():new Promise(t=>{document.addEventListener(i,()=>{"visible"===document.visibilityState&&t()},{once:!0})})}},89710:function(t,e,n){n.d(e,{Mf:function(){return h},N7:function(){return r},P6:function(){return u},dr:function(){return d},qP:function(){return c},wl:function(){return s},xs:function(){return l},zJ:function(){return f}});var i=n(17720);const r=[{id:"ar-ae",value:"ar-ae",displayString:"   ()",direction:"rtl"},{id:"ar-eg",value:"ar-eg",displayString:" ()",direction:"rtl"},{id:"ar-sa",value:"ar-sa",displayString:"   ()",direction:"rtl"},{id:"bn-in",value:"bn-in",displayString:"India ()",direction:"ltr"},{id:"cs-cz",value:"cs-cz",displayString:"esk republika (etina)",direction:"ltr"},{id:"da-dk",value:"da-dk",displayString:"Danmark (Dansk)",direction:"ltr"},{id:"de-at",value:"de-at",displayString:"sterreich (Deutsch)",direction:"ltr"},{id:"de-ch",value:"de-ch",displayString:"Schweiz (Deutsch)",direction:"ltr"},{id:"de-de",value:"de-de",displayString:"Deutschland (Deutsch)",direction:"ltr"},{id:"el-gr",value:"el-gr",displayString:" ()",direction:"ltr"},{id:"en-ae",value:"en-ae",displayString:"United Arab Emirates (English)",direction:"ltr"},{id:"en-au",value:"en-au",displayString:"Australia (English)",direction:"ltr"},{id:"en-ca",value:"en-ca",displayString:"Canada (English)",direction:"ltr"},{id:"en-gb",value:"en-gb",displayString:"United Kingdom (English)",direction:"ltr"},{id:"en-ie",value:"en-ie",displayString:"Ireland (English)",direction:"ltr"},{id:"en-in",value:"en-in",displayString:"India (English)",direction:"ltr"},{id:"en-my",value:"en-my",displayString:"Malaysia (English)",direction:"ltr"},{id:"en-nz",value:"en-nz",displayString:"New Zealand (English)",direction:"ltr"},{id:"en-ph",value:"en-ph",displayString:"Philippines (English)",direction:"ltr"},{id:"en-sg",value:"en-sg",displayString:"Singapore (English)",direction:"ltr"},{id:"en-us",value:"en-us",displayString:"United States (English)",direction:"ltr"},{id:"en-xl",value:"en-xl",displayString:"International Edition (English)",direction:"ltr"},{id:"en-za",value:"en-za",displayString:"South Africa (English)",direction:"ltr"},{id:"es-ar",value:"es-ar",displayString:"Argentina (espaol)",direction:"ltr"},{id:"es-cl",value:"es-cl",displayString:"Chile (espaol)",direction:"ltr"},{id:"es-co",value:"es-co",displayString:"Colombia (espaol)",direction:"ltr"},{id:"es-es",value:"es-es",displayString:"Espaa (espaol)",direction:"ltr"},{id:"es-mx",value:"es-mx",displayString:"Mxico (espaol)",direction:"ltr"},{id:"es-pe",value:"es-pe",displayString:"Per (espaol)",direction:"ltr"},{id:"es-us",value:"es-us",displayString:"United States (espaol)",direction:"ltr"},{id:"es-ve",value:"es-ve",displayString:"Venezuela (espaol)",direction:"ltr"},{id:"es-xl",value:"es-xl",displayString:"Amrica Latina (espaol)",direction:"ltr"},{id:"fi-fi",value:"fi-fi",displayString:"Suomi (suomi)",direction:"ltr"},{id:"fr-be",value:"fr-be",displayString:"Belgique (franais)",direction:"ltr"},{id:"fr-ca",value:"fr-ca",displayString:"Canada (franais)",direction:"ltr"},{id:"fr-ch",value:"fr-ch",displayString:"Suisse (franais)",direction:"ltr"},{id:"fr-fr",value:"fr-fr",displayString:"France (franais)",direction:"ltr"},{id:"fr-xl",value:"fr-xl",displayString:"Afrique francophone (franais)",direction:"ltr"},{id:"he-il",value:"he-il",displayString:" ()",direction:"rtl"},{id:"hi-in",value:"hi-in",displayString:"India ()",direction:"ltr"},{id:"hu-hu",value:"hu-hu",displayString:"Magyarorszg (magyar)",direction:"ltr"},{id:"id-id",value:"id-id",displayString:"Indonesia (Bahasa Indonesia)",direction:"ltr"},{id:"it-it",value:"it-it",displayString:"Italia (italiano)",direction:"ltr"},{id:"ja-jp",value:"ja-jp",displayString:" ()",direction:"ltr"},{id:"ko-kr",value:"ko-kr",displayString:" ()",direction:"ltr"},{id:"mr-in",value:"mr-in",displayString:"India ()",direction:"ltr"},{id:"nb-no",value:"nb-no",displayString:"Norge (norsk, bokml)",direction:"ltr"},{id:"nl-be",value:"nl-be",displayString:"Belgi (Nederlands)",direction:"ltr"},{id:"nl-nl",value:"nl-nl",displayString:"Nederland (Nederlands)",direction:"ltr"},{id:"pl-pl",value:"pl-pl",displayString:"Polska (polski)",direction:"ltr"},{id:"pt-br",value:"pt-br",displayString:"Brasil (portugus)",direction:"ltr"},{id:"pt-pt",value:"pt-pt",displayString:"Portugal (Portugus)",direction:"ltr"},{id:"ru-xl",value:"ru-xl",displayString:"  (P)",direction:"ltr"},{id:"ru-ru",value:"ru-ru",displayString:" (P)",direction:"ltr"},{id:"sv-se",value:"sv-se",displayString:"Sverige (svenska)",direction:"ltr"},{id:"te-in",value:"te-in",displayString:"India ()",direction:"ltr"},{id:"th-th",value:"th-th",displayString:" ()",direction:"ltr"},{id:"tr-tr",value:"tr-tr",displayString:"Trkiye (Trke)",direction:"ltr"},{id:"vi-vn",value:"vi-vn",displayString:"Vit Nam (Ting Vit)",direction:"ltr"},{id:"zh-cn",value:"zh-cn",displayString:" ()",direction:"ltr"},{id:"zh-hk",value:"zh-hk",displayString:" ()",direction:"ltr"},{id:"zh-tw",value:"zh-tw",displayString:" ()",direction:"ltr"}],o=Object.freeze(["en-au","en-ca","en-gb","en-in","en-us","ja-jp","ko-kr","de-de","fr-fr","es-es","it-it","pt-br","zh-cn"]);function s(t){const e=t?.toLowerCase()||"",n=o.find(t=>t===e);return Boolean(n)}const a=["en-au","en-gb","en-us","en-in","en-ca","zh-cn"];function c(){return r.filter(t=>a.includes(t.id))}function u(t){return r.find(e=>e.id===t)}function d(t){const e=`UCMarketSupported_${t}`;let n=i.vv.get(e);return void 0===n&&(n=a.includes(t),i.vv.set(e,n)),n}function l(t){const e=`UCMarketInfo_${t}`;let n=i.vv.get(e);if(n)return n;const o=r.find(e=>e.id===t);return o?(n={displayString:o.displayString,value:o.value,direction:o.direction,supported:a.includes(o.id)},i.vv.set(e,n),n):(n={displayString:t,value:t,direction:"ltr",supported:!1},i.vv.set(e,n),n)}function h(t,e){return t.displayString<e.displayString?-1:t.displayString>e.displayString?1:0}function f(t){if(""!==document.dir)return"rtl"===document.dir;const e=r.find(e=>e.id===t);return e&&"rtl"===e.direction}},89905:function(t,e,n){n.d(e,{a:function(){return c}});var i=n(63456),r=n(80164),o=n(99382);const s=new Map;function a(t){return t+"."+o.j.connectorStateKey}const c={registerInjection:function(t,e){let n=s.get(e);n||(n=new Set,s.set(e,n)),n.add(a(t))},initializeExperience:function(t,e,n){const o=a(e),s=(0,i.A)(t,o,void 0),c=(0,i.A)(t,a(n),void 0),u={...s,[n]:c};(0,r.A)(t,o,u)},reportStateChange:function(t,e,n){const o=s.get(e);if(o)for(const s of o){const o=(0,i.A)(t,s,void 0);o&&(0,r.A)(t,s,{...o,[e]:n})}}}},89980:function(t,e,n){n.d(e,{Lg:function(){return s}});var i=n(19575),r=n(77246);class o extends i.g{constructor(){let t=null;if((0,r.S)())try{t=localStorage}catch(t){}super(t)}}function s(){return a}let a=new o},90206:function(t,e,n){var i;n.d(e,{L:function(){return i}}),function(t){t.CacheMissing="authCacheMissing",t.CacheExpired="authCacheExpired",t.OtherCacheError="authCacheError"}(i||(i={}))},90441:function(t,e,n){n.d(e,{Ac:function(){return h},TE:function(){return a},VN:function(){return f},qj:function(){return l}});var i=n(50115),r=n(7965),o=n(17720),s=n(98216);async function a(t,e,n,o){let a;switch(t){case!0:a="on";break;case!1:a="off";break;case void 0:a=void 0}if(o?.defaultOnInPartialView){const t=await h();if("peek"===n?.selectedFeedDisplaySetting&&t!==r.U6.user){const t="on";a!==t&&(a=t,e&&await e("on"===a),await(0,i.nX)({src:r.U6.default}),s.YT.addOrUpdateTmplProperty("elwidprom","1"))}}else if(o?.enableWidgetsWPOProm){const t=await h(),o=["always","peek"].includes(n?.selectedFeedDisplaySetting);if(t!==r.U6.user&&o){const t=await u();t?a!==t?(a=t,e&&await e("on"===a),await(0,i.nX)({wgt:void 0,src:r.U6.wpo}),s.YT.addOrUpdateTmplProperty("wgt_wpo_promoted","1")):(l(void 0),s.YT.addOrUpdateTmplProperty("wgt_wpo_prom_fail",r.uF.NoNeedToPromote)):s.YT.addOrUpdateTmplProperty("wgt_wpo_prom_fail",r.uF.NoRecommendedData)}else t==r.U6.user?s.YT.addOrUpdateTmplProperty("wgt_wpo_prom_fail",r.uF.UserChoices):o?s.YT.addOrUpdateTmplProperty("wgt_wpo_prom_fail",r.uF.InvalidFeedLayout):s.YT.addOrUpdateTmplProperty("wgt_wpo_prom_fail",r.uF.Unknown)}else if(o?.defaultOff){const t=await h();if(t!==r.U6.user){const n="off";a===n&&t!==r.U6.user_old||(a=n,e&&await e(!1),await(0,i.nX)({src:r.U6.default}),s.YT.addOrUpdateTmplProperty("wgt-off-prom","1"))}}return"on"===a}const c="__recommendedWidgetsRegionState__",u=async()=>{if(!o.vv.has(c)){const t=await d();o.vv.set(c,t)}return o.vv.get(c)},d=async()=>{const t=await(0,i.KD)();return r.MW[t?.wgt]??void 0},l=async t=>{const e={...await(0,i.KD)(),wgt:t};return await(0,i.nX)(e)},h=async()=>{const t=await(0,i.KD)();return t?.src},f=async t=>{const e={...await(0,i.KD)(),src:t};return await(0,i.nX)(e)}},90454:function(t,e,n){n.d(e,{Rl:function(){return o},ZM:function(){return r}});var i=n(28868);function r(t){return new Promise((e,n)=>{!function(t,e){(0,i.lA)("logEvent",t,e)}(t,t=>{e(t)})})}function o(t){return new Promise((e,n)=>{!function(t,e){(0,i.lA)("logError",t,e)}(t,t=>{e(t)})})}},90565:function(t,e,n){var i,r,o,s;n.d(e,{m2:function(){return s}}),function(t){t.Modal="modal",t.CookieBanner="cookieBanner"}(i||(i={})),function(t){t.Personalize="personalize",t.MarketAndLocation="marketAndLocation"}(r||(r={})),function(t){t.OnUCCookieBannerModeEntered="onUCCookieBannerModeEntered",t.OnUCPageDownKeyPress="onUCPageDownKeyPress",t.OnUCPageUpKeyPress="onUCPageUpKeyPress",t.OnUCHeightChanged="onUCHeightChanged",t.OnUCWheel="onUCWheel",t.OnUCTouchMove="onUCTouchMove",t.OnUCUpKeyPress="onUCUpKeyPress",t.OnUCDownKeyPress="onUCDownKeyPress",t.OnUCSpaceKeyPress="onUCSpaceKeyPress",t.OnUCShiftSpaceKeyPress="onUCShiftSpaceKeyPress",t.OnUCImmersiveModeEntered="onUCImmersiveModeEntered",t.OnUCImmersiveModeExited="onUCImmersiveModeExited",t.OnUCImmersiveModeHeightChanged="onUCImmersiveModeHeightChanged",t.OnDialogOpening="onDialogOpening"}(o||(o={})),function(t){t.OnCookieBannerModeEntering="onCookieBannerModeEntering",t.OnCookieBannerModeExited="onCookieBannerModeExited",t.OnImmersiveModeEntering="onImmersiveModeEntering",t.OnImmersiveModeExiting="onImmersiveModeExiting",t.OnImmersiveModeEntered="onImmersiveModeEntered",t.OnImmersiveModeExited="onImmersiveModeExited",t.OnFeedPageScrolled="onFeedPageScrolled",t.OnFeedReadyToDisplay="onFeedReadyToDisplay",t.OnCriticalErrorEncountered="onCriticalErrorEncountered",t.OnTTVRMarked="onTTVRMarked",t.OnContentReload="onContentReload",t.OnFeedHeightChanged="onFeedHeightChanged",t.OnFeedRepositioned="onFeedRepositioned",t.OnFeedListenersReady="onFeedListenersReady",t.OnFeedNavigation="onFeedNavigation",t.OnLocationDataReady="onLocationDataReady"}(s||(s={}))},90831:function(t,e,n){n.d(e,{M:function(){return i},t:function(){return r}});const i="consent.onetrust",r="widgetHost.cookieConsent"},91218:function(t,e,n){var i,r,o,s,a;n.d(e,{y2:function(){return c}}),function(t){t[t.none=0]="none",t[t.consoleValidation=1]="consoleValidation",t[t.wholePageValidation=2]="wholePageValidation",t[t.uxValidation=3]="uxValidation",t[t.uxToolValidation=4]="uxToolValidation"}(i||(i={})),function(t){t.telemetryValidationResults="telemetryValidationResults",t.telemetryValidationInitStatus="telemetryValidationInitStatus"}(r||(r={})),function(t){t.default="default",t.low="low",t.high="high",t.ignore="ignore"}(o||(o={})),function(t){t.NA="NA",t.Common="Common",t.HomepageRanker="HomepageRanker",t.DataTRules="DataTRules"}(s||(s={})),function(t){t.Passed="pass",t.Failed="fail",t.Aborted="aborted"}(a||(a={}));const c={other:{displayKey:"Other Error"},schema:{getDisplayKey:t=>`${t} (Schema)`},markup:{targetName:"markup",displayKey:"Markup"}}},91494:function(t,e,n){n.d(e,{BQ:function(){return u},Co:function(){return p},EV:function(){return g},P9:function(){return l},RX:function(){return s},ZM:function(){return a},_F:function(){return d},aO:function(){return f},mQ:function(){return h},yy:function(){return c}});var i=n(36417);const r=i.A.Alert,o={build:""};function s(t){Object.assign(o,t)}const a={id:22012,severity:r,pb:o},c={id:22014,severity:i.A.Critical,pb:o},u=(i.A.Deprecated,i.A.Deprecated,i.A.Deprecated,i.A.Deprecated,i.A.Deprecated,i.A.Deprecated,{id:22027,severity:i.A.Critical,pb:o}),d=(i.A.Critical,i.A.Critical,{id:22031,severity:r,pb:o}),l={id:22032,severity:r,pb:o},h={id:22033,severity:r,pb:o},f={id:22034,severity:r,pb:o},p={id:22050,severity:r,pb:o},g={id:22051,severity:i.A.Deprecated,pb:o};i.A.Deprecated,i.A.Deprecated,i.A.HighImpact},91532:function(t,e,n){var i;n.d(e,{C:function(){return i}}),function(t){t.TopicFeedCard="topic-feed-card",t.articleFreCard="article-fre-card",t.autosCarouselCard="autos-carousel-card",t.bingDailyQuizCard="bing-daily-quiz-card",t.bingVideoCarousel="bing-video-carousel",t.boostAdCard="boost-ad-card",t.cashbackCarouselCard="cashback-carousel-card",t.casualGamesCard="casual-games-card",t.casualGamesCarouselCard="casual-games-carousel-card",t.casualGamesProng2CarouselCard="casual-games-prong2-carousel-card",t.casualGamesStripeCarouselCard="casual-games-stripe-carousel-card",t.channelFilterCard="channel-filter-card",t.coldStartCard="cold-start-card",t.comicsCarouselCard="comics-carousel-card",t.communityCard="community-card",t.commuteCard="commute-card",t.contentCard="content-card",t.contentCardPreview1x="content-card-preview-1x",t.contentGroup="content-group",t.contentGroupCard="content-group-card",t.creatorSpotlightCard="creator-spotlight-card",t.dailyBriefCard="daily-brief-card",t.dailyFixGamesCarouselCard="daily-fix-games-carousel-card",t.dailyGreetingCard="daily-greeting-card",t.dailyGreetingWindowsShell="daily-greeting-windows-shell",t.dailyMomentsCard="daily-moments-card",t.dailyWonderCard="daily-wonder-card",t.dailyWonderCopilotCard="daily-wonder-copilot-card",t.dailyWonderHeroVideo="daily-wonder-hero-video",t.dailyWonderQuoteCard="daily-wonder-quote-card",t.dailyWonderVideoListCard="daily-wonder-video-list-card",t.denseCard="dense-card",t.digestCard="digest-card",t.displayAdCard="display-ad-card",t.donationNpoCard="donation-npo-card",t.edgeShoppingCard="edge-shopping-card",t.editorsPickCarouselCard="editors-pick-carousel-card",t.electionCard="election-card",t.electionsCard="elections-card",t.entertainmentPremierCard="entertainment-premier-card",t.esportsCard="esports-card",t.flexArticleCard="flex-article-card",t.followingFREInlineCard="following-fre-inline-card",t.gamingRecentlyPlayedCard="gaming-recentlyplayed-card",t.gemGreetingCard="gem-greeting-card",t.healthArticlesCard="health-articles-card",t.healthCard="health-card",t.healthFitnessCard="health-fitness-card",t.healthRiverCard="health-river-card",t.healthTipCard="health-tip-card",t.hideStoryCard="hide-story-card",t.horoscopeAnswerCard="horoscope-card",t.hotListCard="hot-list-card",t.infopaneCard="infopane-card",t.infopaneSlideCard="infopane-slide-card",t.interestManagementCard="interest-management-card",t.linkedInCard="linked-in-card",t.localNewsCarCard="local-news-carousel-card",t.mangaCard="manga-card",t.mangaCarousel="manga-carousel",t.marketplaceCard="marketplace-card",t.mobileTrendingSearchCard="mobile-trending-search-card",t.momentInTimeHero="moment-in-time-hero",t.moneyAddWatchlistCard="money-add-watchlist-card",t.moneyCard="money-card",t.moneyEdgeCard="money-edge-card",t.moneyInfoCardWC="money-info-card",t.moneyTopicStripeCarouselCard="money-topic-stripe-carousel-card",t.nativeAdCard="native-ad-card",t.nativeTopAdCard="native-top-ad-card",t.onThisDayCard="on-this-day-card",t.panoCard="pano-card",t.perspectiveCard="perspective-card",t.placeholderCard="placeholder-card",t.pollsCard="polls-card",t.prismCard="prism-card",t.prismCarouselCard="prism-carousel-card",t.profileCarouselCard="profile-carousel-card",t.promotedAdCard="promoted-ad-card",t.publisherListCard="publisher-list-card",t.qnaCard="qna-card",t.quizCard="quiz-card",t.realEstateCard="real-estate-card",t.recipesCard="recipes-card",t.recommendedInterestsCard="recommended-interests-card",t.relatedNewsCard="related-news-card",t.responsiveAdCard="responsive-ad-card",t.responsiveCard="responsive-card",t.responsiveInfopaneCard="responsive-infopane",t.rewardsCard="rewards-card",t.richCalendarCard="rich-calendar-card",t.richCalendarWindowsShell="rich-calendar-windows-shell",t.sectionHeaderCard="section-header-card",t.selectCarouselCard="select-carousel-card",t.serendipityCard="serendipity-card",t.sharedHeroNewsCard="shared-hero-news-card",t.shoppingBannerSdCard="shopping-banner-sd-card",t.shoppingBuyingGuidePremiumCard="shopping-buying-guide-premium-card",t.shoppingCard="shopping-card",t.shoppingCarouselCard="shopping-carousel-card",t.shoppingCarouselProngWC="shopping-carousel-prong-wc",t.shoppingEventsDealCard="shopping-events-deal-card",t.shoppingFashionCarouselWC="shopping-fashion-carousel-wc",t.shoppingRiverCard="shopping-river-card",t.shoppingSdCard="shopping-sd-card",t.shoppingVideoCarouselCard="shopping-video-carousel-card",t.shoppingTopSectionCard="shopping-gem-hero-card",t.shortsGrouping="shorts-grouping",t.sportsCard="sports-card",t.sportsOlympicCard="sports-olympic-card",t.sportsTopicStripeCarouselCard="sports-topic-stripe-carousel-card",t.spotlightCard="spotlight-card",t.superappUpsellCard="superapp-upsell-card",t.tabbedInfopaneCard="tabbed-infopane-card",t.topCommentsCard="top-comments-card",t.topPicksCard="top-picks-card",t.topSitesCard="top-sites-card",t.topStoriesCard="top-stories-card",t.trafficCard="traffic-card",t.trafficHero="traffic-hero",t.travelDestinationCard="travel-destination-card",t.travelDestinationCarouselCard="travel-destination-carousel-card",t.trendingNowCard="trending-now-card",t.trendingSearchCard="trending-search-card",t.videoCard="video-card",t.videoGrouping="video-grouping",t.weatherCard="weather-card",t.weatherHeroExperience="weather-hero-experience",t.weatherHeroExperienceCarouselCard="weather-hero-experience-carousel-card",t.webContentCard="web-content-card",t.widgetPlaceholderCard="widget-placeholder-card",t.widgetsNotificationsCard="widgets-notifications-card",t.winAppCard="win-app-card"}(i||(i={}))},92248:function(t,e,n){n.d(e,{G:function(){return a}});var i=n(98216),r=n(96851),o=n(53626),s=n(77246);async function a(t,e,a,c,u){if(!(0,s.S)())return;const d=await n.e("diagnostic-web-vitals").then(n.bind(n,67118));(0,r.GP)().then(()=>{const n=a?{timeToPageReveal:t[o.fn],timeToPageVisible:t[o.aW]}:void 0;d.initDiagnosticsWebVitals(t=>{c?c({markers:t}):i.YT.sendLoadTimeEvent({markers:t}),Object.entries(t).forEach(([t,n])=>{e[t]=n})},t&&t[o.$w]||-1,n,u)})}},92261:function(t,e,n){var i;n.d(e,{a:function(){return i}}),function(t){t.Lax="lax",t.Strict="strict",t.None="none"}(i||(i={}))},92528:function(t,e,n){n.d(e,{a:function(){return i}});const i=t=>t&&"string"==typeof t&&t.trim&&!!t.trim()},93342:function(t,e,n){n.d(e,{Q:function(){return a}});var i=n(77246),r=n(17720),o=n(69004),s=n(27597);class a extends o.G{constructor(t,e,n=Object.create(null)){super(t,e),this.namespace=t,this.config=e,this.state=n,this.propChangeSubscriptions=r.vv.get(`${this.namespace}-PropSubs`,()=>new Map),this.notifyStateChange()}subscribe(t,e){this.propChangeSubscriptions.has(t)?this.propChangeSubscriptions.get(t).add(e):this.propChangeSubscriptions.set(t,(new Set).add(e))}unsubscribe(t,e){this.propChangeSubscriptions.has(t)&&this.propChangeSubscriptions.get(t).delete(e)}getCurrentState(){return{...this.state}}reset(){this.state=Object.create(null),this.propChangeSubscriptions.clear()}updateState(t,e){this.state[t]!==e&&(this.state[t]=e,this.notifySubscribers(t,e))}notifySubscribers(t,e){this.notifyStateChange();const n=this.propChangeSubscriptions.get(t);n&&n.size>0&&n.forEach(t=>t(e))}notifyStateChange(){(0,i.S)()&&(0,s.Jl)(this.namespace,this.getCurrentState())}}},93468:function(t,e,n){n.d(e,{$5:function(){return c},c_:function(){return s},vV:function(){return a}});var i=n(98216),r=n(65022),o=n(7258);function s(t,e,n,r,s={},a){const u=c(e,n,r||(0,o.M5)(t),s,a);u.pb.stack=t&&t.stack||void 0,i.YT&&i.YT.sendAppErrorEvent(u)}function a(t,e,n,r={},o=!0,s){i.YT&&i.YT.sendAppErrorEvent(c(t,e,n,r,s),o)}function c(t,e,n,i={},o){const s=(0,r.Ukt)();"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("appError",{detail:{errorId:t.id}}));const a=n?{...s,...t.pb,customMessage:n,...i,w:1}:{...s,...t.pb,...i,w:1};return"number"==typeof o&&o>0&&o<100&&(a.samplePct=o),{...t,message:e||t.message,pb:a}}},93532:function(t,e,n){n.d(e,{m:function(){return r}});var i=n(12870);const r=()=>{const t=i.Rb&&i.Rb.ClientSettings||{},{geo_citycf:e,geo_countrycf:n}=t;return t&&{citycf:e,countrycf:n}}},93914:function(t,e,n){function i(){try{return localStorage}catch(t){return null}}function r(){try{return sessionStorage}catch(t){return null}}n.d(e,{Y:function(){return i},j:function(){return r}})},94020:function(t,e,n){n.d(e,{O:function(){return o}});var i=n(84397),r=n(63418);class o{updateMsaOptOutCookie(t){if(!this.getMsaOptoutCookieData()&&t&&t.optout){const e=!0===t.optout.msaOptOut?"1":"0";this.setMsaOptoutCookie(e)}}getMsaOptoutCookieData(){const t=(0,r.Ri)(i.wf.MSAOptOut);return t&&t.length>0?t:null}setMsaOptoutCookie(t){t&&t.length>0&&(0,r.Ub)(i.wf.MSAOptOut,t,1,null,"/")}getBrowserOptoutStatus(){const t=(0,r.Ri)(i.wf.BrowserOptOut);return!(!t||"1"!==t)}setUserOptOutSettings(){const t=this.getBrowserOptoutStatus(),e=this.getMsaOptoutCookieData(),n=!(!e||"1"!==e),r=(t||n).toString().toLowerCase();let o="";t&&(o="b|"),n&&(o+="m");const s=i.QR.UserOptOut+":"+r+";"+i.QR.UserOptOutOptions+":"+o;if(document.head.attributes["data-info"]){const t=document.head.attributes["data-info"].value.split(";");t.find(t=>t.indexOf(i.QR.UserOptOut)>-1)?t.find(t=>t.indexOf(i.QR.UserOptOut)>-1)!==i.QR.UserOptOut+":"+r&&(document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.QR.UserOptOut+":false",i.QR.UserOptOut+":"+r).replace(i.QR.UserOptOut+":true",i.QR.UserOptOut+":"+r)):document.head.attributes["data-info"].value=document.head.attributes["data-info"].value+";"+i.QR.UserOptOut+":"+r,t.find(t=>t.indexOf(i.QR.UserOptOutOptions)>-1)?t.find(t=>t.indexOf(i.QR.UserOptOutOptions)>-1)!==i.QR.UserOptOutOptions+":"+o&&(t.includes(i.QR.UserOptOutOptions+":")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.QR.UserOptOutOptions+":",i.QR.UserOptOutOptions+":"+o):t.includes(i.QR.UserOptOutOptions+":b|")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.QR.UserOptOutOptions+":b|",i.QR.UserOptOutOptions+":"+o):t.includes(i.QR.UserOptOutOptions+":b|m")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.QR.UserOptOutOptions+":b|m",i.QR.UserOptOutOptions+":"+o):t.includes(i.QR.UserOptOutOptions+":m")&&(document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.QR.UserOptOutOptions+":m",i.QR.UserOptOutOptions+":"+o))):document.head.attributes["data-info"].value=document.head.attributes["data-info"].value+";"+i.QR.UserOptOutOptions+":"+o}else document.head.setAttribute("data-info",s)}}},94061:function(t,e,n){n.d(e,{HA:function(){return g},LW:function(){return f},hB:function(){return p}});var i=n(33107),r=n(77246),o=n(98763),s=n(13053),a=n(77216),c=n(20431),u=n(30817),d=n(29468);const l=(0,o.pV)(()=>({})),h=new WeakMap;function f(){if(!(0,r.S)())return;const{enablePerfTimeline:t,traceLevel:e}=(0,c.wR)();if(!t||"undefined"==typeof customElements||e<a.X.high)return;const n=customElements.define;customElements.define=function(...t){const[e,i]=t,r="connectedCallback",o=i.prototype[r];return"function"!=typeof o||"getExperienceType"in i.prototype||(i.prototype[r]=function(...t){const e=p(this.localName,this.instanceId),n=e&&e.startMeasure("init").endMeasure,i=o.apply(this,t);return n&&n(),g(this,e),(0,u._P)("WC.Count"),i}),n.apply(customElements,t)}}function p(t,e){const n=l.get(),r=1===(n[t]=(n[t]||0)+1)?e:(0,d.A)(e);return(0,i.S9)(t,r)}function g(t,e,n=s.b){if(!t||!t.shadowRoot||!e)return;const i=new m("update",e);i.tryStartMeasure(),n().then(()=>i.tryEndMeasure());const{traceLevel:r}=(0,c.wR)();r&&function(t,e,n){let i=h.get(t);if(i)return;let r=0;i=new MutationObserver(t=>{e.tryStartMeasure();const i=t.reduce((t,e)=>(e.addedNodes.forEach(e=>t.added.push(e.nodeName)),e.removedNodes.forEach(e=>t.removed.push(e.nodeName)),e.attributeName&&t.attrs.push(e.attributeName),t),{added:[],removed:[],attrs:[]}),o={added:i.added.length?i.added.join(","):void 0,removed:i.removed.length?i.removed.join(","):void 0,attrs:i.attrs.length?i.attrs.join(","):void 0};e.addCustomData("mutation"+ ++r,o),n().then(()=>e.tryEndMeasure())}),i.observe(t.shadowRoot,{childList:!0,subtree:!0,attributes:!0}),i.observe(t,{attributes:!0}),h.set(t,i)}(t,i,n||y)}class m{constructor(t,e){this.measureName=t,this.perfTimeline=e,this.customData={}}tryStartMeasure(){if(!this.coreEndMeasure){const t=this.perfTimeline.startMeasure(this.measureName).endMeasure;this.coreEndMeasure=()=>t({customData:this.customData})}}addCustomData(t,e){this.customData[t]=e}tryEndMeasure(){this.coreEndMeasure&&(this.coreEndMeasure(),this.customData={},this.coreEndMeasure=null)}}let w;function y(){return w||(w=new Promise(t=>(0,s.D)(()=>{w=null,t()})))}},94425:function(t,e,n){n.d(e,{HZ:function(){return d},M:function(){return f},Rq:function(){return u},bI:function(){return h},t7:function(){return l}});var i=n(69259),r=n(19548),o=n(6092),s=n(27261);const a="{hostName}",c=/\{localeCode\}|\{0\}/;function u(t,e){const n=r._3.encodeURIComponentForPrime(e).toLowerCase(),{HostPage:i}=o.T3;if(i){const e=new URL(i.originalUrl);return e.origin+"/"+i.verticalKey+"/"+i.categoryKey+"/interests/"+n+"/"+o.T3.CurrentMarket+"/f-"+t+e.search}return"https://www.msn.com"}function d(){return`${o.T3.NavTargetUrlWithLocale}/${i.ei}`}function l(t=i.$q){return`${o.T3.NavTargetUrlWithLocale}/${t}`}function h(t){return t&&(t=t.replace(a,o.T3.NavTargetHostName).replace(c,o.T3.CurrentMarket)),t||""}function f(t){if(!t)return;const{Environment:e,EnvInstanceOverride:n}=o.T3;n===e&&(t.host=(0,s.ou)(),t.searchParams.set("instance",n))}},94444:function(t,e,n){n.d(e,{x:function(){return r}});const i=[];function r(t){i.push(t)}},94569:function(t,e,n){n.d(e,{V:function(){return o}});var i=n(76166),r=n(77246);function o(){return(0,r.S)()?window.fetch.bind(window):i.GC}},94706:function(t,e,n){function i(t,e,n,i,r,o,s,a,c,u){return{...{name:e||"",action:r,behavior:n,content:a,destinationUrl:o,ext:u,overrideDestinationUrl:s,type:i,feed:c},...t||{}}}n.d(e,{J:function(){return s},R:function(){return a}});var r=n(61522);const o=void 0;function s(...t){if(!t||t.length<2||!(0,r.Rx)(t[0])||!(0,r.P5)(t[1]))throw new Error("Invalid arguments");const e=t[0],n=t[1],s=(0,r.pF)(t[2])?t[2]:o,a=(0,r.Rx)(t[3])?t[3]:o,c=(0,r.pF)(t[3])?t[3]:(0,r.pF)(t[4])?t[4]:o,u=(0,r.Rx)(t[4])?t[4]:(0,r.Rx)(t[5])?t[5]:o,d=(0,r.Rx)(t[6])?t[6]:o,l=(0,r.P5)(t[4])?t[4]:(0,r.P5)(t[5])?t[5]:(0,r.P5)(t[6])?t[6]:(0,r.P5)(t[7])?t[7]:o;return i(o,e,s,c,a,d,u,n,o,l)}function a(...t){if(!t||t.length<1||!(0,r.Rx)(t[0]))throw new Error("Invalid arguments");const e=t[0],n=(0,r.pF)(t[1])?t[1]:o,s=(0,r.Rx)(t[2])?t[2]:o,a=(0,r.pF)(t[2])?t[2]:(0,r.pF)(t[3])?t[3]:o,c=(0,r.P5)(t[3])?t[3]:o;return i(o,e,n,a,s,o,o,o,o,c)}},95125:function(t,e,n){n.d(e,{Yg:function(){return a},ft:function(){return s}});var i=n(56911),r=n(44449),o=n(65022);const s={EventType:"uat",Timestamp:"uats",Duration:"uad",Element:"uae",Message:"uam"};class a{fireImpressionLog(t,e,n){t?.id&&!a.impressionNativeAdIdSet.has(t?.id)&&a.impressionLog&&(a.impressionLog(t,e,n),a.impressionNativeAdIdSet.add(t?.id))}fireClickLog(t,e,n){a.clickLog&&a.clickLog(t,e,n)}saveUserActionBeacon(t="",e="{}",n="srtb.msn.com"){const i=JSON.parse(e),r=i&&i.trb;if(t&&r)for(let e=0;e<r.length;e++){if(!r[e].includes(n))continue;const i=new URL(r[e]);i.pathname=i.pathname.replace("served","useraction"),a.userActionBeaconsMap.set(t,i),a.startTimestampMap.set(t,(new Date).getTime())}}getUserActionBeacon(t=""){return a.userActionBeaconsMap.get(t)}populateBeaconUrl(t,e,n,i,r,o){const c=this.getUserActionBeacon(t);if(!c)return"";for(const t of Object.values(s))c.searchParams?.delete(t);if(n){const u=a.startTimestampMap.get(t),d={m:i,f:e};c.searchParams?.set(s.EventType,n),c.searchParams?.set(s.Timestamp,String(u?(new Date).getTime()-u:0)),c.searchParams?.set(s.Duration,r||0),c.searchParams?.set(s.Message,JSON.stringify(d)),c.searchParams?.set(s.Element,o?.tagName?.toLowerCase()||"")}return c}}a.impressionNativeAdIdSet=new Set,a.userActionBeaconsMap=new Map,a.startTimestampMap=new Map,(0,i.Cg)([(0,r.sx)(o.SuG,"UserActionLog.fireImpressionLog")],a.prototype,"fireImpressionLog",null),(0,i.Cg)([(0,r.sx)(o.SuG,"UserActionLog.fireClickLog")],a.prototype,"fireClickLog",null),(0,i.Cg)([(0,r.sx)(o.SuG,"UserActionLog.saveUserActionBeacon")],a.prototype,"saveUserActionBeacon",null),(0,i.Cg)([(0,r.sx)(o.SuG,"UserActionLog.getUserActionBeacon")],a.prototype,"getUserActionBeacon",null),(0,i.Cg)([(0,r.sx)(o.SuG,"UserActionLog.populateBeaconUrl")],a.prototype,"populateBeaconUrl",null)},95688:function(t,e,n){n.d(e,{Nw:function(){return a},q1:function(){return c}});var i=n(65022),r=n(93468),o=n(6092),s=n(12870);function a(t,e){o.T3.EnableFiveColLayout=e,o.T3.TrackInfo={sitePage:{page_product:"anaheim",page_type:t.pagetype}}}function c(){if(s.Rb.CurrentFlightSet?.has("prg-logautoscroll")){const t=(t,e,n)=>(0,r.vV)(i.dEQ,`${t} invoked`,void 0,{args:JSON.stringify(e),stack:(new Error).stack}),e=window.scrollTo;window.scrollTo=function(...n){return t("window.scrollTo",n),e.call(this,...n)};const n=window.scrollBy;window.scrollBy=function(...e){return t("window.scrollBy",e),n.call(this,...e)};const o=Element.prototype.scrollIntoView;Element.prototype.scrollIntoView=function(...t){return(0,r.vV)(i.dEQ,`scrollIntoView invoked on element: ${this.tagName}`,void 0,{element:this.tagName,args:JSON.stringify(t),stack:(new Error).stack}),o.call(this,...t)}}}},95879:function(t,e,n){var i;n.d(e,{M:function(){return i}}),function(t){t.NO_ACCOUNT="NO_ACCOUNT",t.MSA="MSA",t.AAD="AAD",t.UNSUPPORTED_SOVEREIGNTY="UNSUPPORTED_SOVEREIGNTY"}(i||(i={}))},95999:function(t,e,n){n.d(e,{q:function(){return i}});const i={name:"default-infopane-template",children:[{name:"product-image",layout:{position:"absolute",left:"0",top:"0",zIndex:1,width:"100%",height:"304"},imageMaskOn:!0,imageMaskOpacity:"0.1"},{name:"gradient-mask",height:"176",paddingBottom:"0",paddingTop:"0",layout:{position:"absolute",bottom:"0",width:"100%",zIndex:2},useDynamicStyle:!0},{name:"ad-title",lineHeight:"36",titleFontSize:"28",layout:{position:"absolute",bottom:"53",width:"100%",zIndex:2}},n(38870).o]}},96048:function(t,e,n){n.d(e,{g:function(){return s},m:function(){return a}});var i=n(86676),r=n(16091),o=n(17720);const s=(0,r.G)({getInstance:()=>o.vv.get("__feed-card-provider__serviceRequestAuthSubscription__",()=>new i.Q)}),a={userIsSignedIn:"userIsSignedIn"}},96241:function(t,e,n){n.d(e,{$:function(){return r}});var i=n(68480);class r{}r.pageVisibilityChange=new i.P("PageVisibilityChange"),r.timeForPageReveal=new i.P("TimeForPageReveal"),r.forcePageReload=new i.P("ForcePageReload"),r.updateCurrentPageRefreshState=new i.P("UpdateCurrentPageRefreshState"),r.updateDidRenderStartInBackgroundRenderFlag=new i.P("UpdateDidRenderStartInBackgroundRenderFlag")},96592:function(t,e,n){n.d(e,{m:function(){return i}});class i{constructor(t){this.searchParams=Object.create(null),this.parseQueryString(t)}set(t,e){return null!=e&&(this.searchParams[t]=e),this}get(t){return this.searchParams[t]}getAllSearchParams(){return this.searchParams}delete(t){delete this.searchParams[t]}toString(){const t=Object.keys(this.searchParams);return t.length?t.sort().map(t=>`${t}=${this.searchParams[t]}`).join("&"):""}parseQueryString(t){if(!t)return;const e=t.indexOf("?");e>-1&&(t=t.substring(e+1)),t.split("&").forEach(t=>{const e=t.split("="),n=e[0];this.get(n)||(this.searchParams[n]=e[1])})}}},96640:function(t,e,n){n.d(e,{J:function(){return c}});var i=n(37180),r=n(2958),o=n(8649),s=n(99433),a=n(17469);function c(){r.m.define(i.c.registry),o.hZ.define(a.i.registry),s.RE.define(a.i.registry)}},96643:function(t,e,n){n.d(e,{Ko:function(){return r}});var i=n(34713);const r=()=>{if((0,i.cH)())return!0;const[t]=performance.getEntriesByType("navigation");return!!t?.serverTiming?.find(t=>"cache"===t?.name)}},96851:function(t,e,n){n.d(e,{_W:function(){return H},EZ:function(){return Q},TR:function(){return q},OM:function(){return G},G8:function(){return J},GP:function(){return j}});var i=n(30817),r=n(89151),o=n(93468),s=n(65022),a=n(53685),c=n(88294),u=n(13053),d=n(56098),l=n(90565),h=n(89980),f=n(6092),p=n(15003),g=n(84855),m=n(53626);const w="TTVR.",y="PrerenderRefresh.",v="OverlayRemoval",b="TTVR.BackgroundExecution.";let S=0;function C(){return S}var k=n(50802),T=n(71776),x=n(16611),A=n(79426),$=n(98216),I=n(77246),P=n(12870),R=n(89710),M=n(82238),_=n(34713);let E,F,D,O,N,L=!1;const B=new A.e,U=new A.e,W=(new A.e,new A.e),V=new A.e;function H(t,e,n,a,u){if((0,_.C6)())(0,M.Qc)().then(()=>{(0,T.ZX)()});else{if(!P.Rb.IsPrerender)return(0,I.S)()&&((0,i.ZF)()[m.le]=0),void(0,k.bH)();if("visible"===document.visibilityState)return B.set(),void(L=!0);(0,h.Lg)().setItem("prc",(parseInt((0,h.Lg)().getItem("prc")||"0")+1).toString()),$.YT.addOrUpdateTmplProperty("isprerender","1"),Math.random()<.2&&function(){if("hidden"!==document.visibilityState)return;const t=Date.now();let e=0;const n=[1e4,3e4,6e4,3e5],i=Math.floor(Math.random()*n.length),r=n[i];setTimeout(()=>{"hidden"===document.visibilityState&&(e=Date.now()-t,$.YT.addOrUpdateTmplProperty("prstdelay",`${r}-${e}`))},r)}(),D=t,O=e,N=u,(0,x.v5)(),(0,k.WV)(),X()?(0,r.tD)("PrerenderStart",performance.now()):function(){E=document.createElement("div");const t=document.body,e=E.style;e.background="transparent",e.position="fixed",e.bottom=e.left=e.right=e.top="0",e.zIndex="2147483647",t?(t.appendChild(E),c.v.logObjects("pageRevealDelegate:addOverlay: Added overlay")):c.v.logObjects("pageRevealDelegate:addOverlay: Document body is not available, failed to add overlay.");(0,r.tD)("PrerenderStart",performance.now())}(),document.addEventListener("visibilitychange",z),function(t,e){t&&window.setTimeout(()=>{"visible"!==document.visibilityState&&(0,o.vV)(s.kvG,"",void 0,{...s.kvG.pb,customMessage:"Prerender content staled"})},6e4*t);e&&window.setTimeout(()=>{"visible"!==document.visibilityState&&(0,o.vV)(s.kKm,"",void 0,{...s.kKm.pb,customMessage:"Prerender sd staled"})},6e4*e)}(n,a)}}async function z(){document.removeEventListener("visibilitychange",z);let t=!1;const e=function(){if(!P.Rb||!P.Rb.CurrentFlightSet)return-1;if(P.Rb.CurrentFlightSet.has("prg-prerend12h"))return 43200;if(P.Rb.CurrentFlightSet.has("prg-prerend6h"))return 21600;if(P.Rb.CurrentFlightSet.has("prg-prerend3h"))return 10800;if(P.Rb.CurrentFlightSet.has("prg-prerend1h"))return 3600;if(P.Rb.CurrentFlightSet.has("prg-prerend30m"))return 1800;if(P.Rb.CurrentFlightSet.has("prg-prerend10m"))return 600;if(P.Rb.CurrentFlightSet.has("prg-prerend18h"))return 64800;if(P.Rb.CurrentFlightSet.has("prg-prerend1d"))return 86400;if(P.Rb.CurrentFlightSet.has("prg-prerend2d"))return 172800;return-1}();if(e>0){Math.round((0,p.Op)()-performance.timeOrigin)/1e3>e&&((0,p.TI)(11),t=!0)}if(P.Rb.CurrentFlightSet.has("preinvttvr")&&function(){const t=(0,i.ZF)();if(t.TTVR)return!1;const e=t.IncompleteMarkers;return e&&(e.includes("TTVR.GridViewFeed")||e.includes("TTVR.WaterfallViewFeed"))&&!t.FirstSectionRenderStart}()&&(0,p.TI)(13),(0,k.n6)())return f.T3.IsUCBased&&d.c.getInstance()?.notify(l.m2.OnContentReload),$.YT.addOrUpdateTmplProperty("ReloadPrerenderPage","1"),e>0&&(document.body.style.display="none"),void(0,k.sv)((0,p.Op)(),t);!function(){if(!window?.chrome?.embeddedSearch?.newTabPage?.getTabTimings)return;const t=(0,i.ZF)();window.chrome.embeddedSearch.newTabPage.getTabTimings((e,n)=>{e&&n&&void 0!==n.tabStartToNavigationStart&&(t.tabStartToNavigationStart=Math.round(n.tabStartToNavigationStart))})}(),performance.mark(a.xF);const n=performance.now();(0,i.ZF)()[a.xF]=Math.round(n),$.YT.addOrUpdateTmplProperty("prgroup",String(Math.floor(n/36e5))),await(0,M.Qc)(),L=!0;const c=X();if(c||(F=setTimeout(()=>{K()},1e3)),function(t){$.YT.addOrUpdateTmplProperty("isbackgroundpreload","1"),$.YT.addOrUpdateCustomProperty(m.jK,Math.round(t-performance.timeOrigin).toString()),(0,r.tD)("PrerenderRevealed",t);const e=(0,r.yE)("PrerenderStart");(0,r.tD)("PrerenderAge",t-e)}((0,p.Op)()),await(0,T.Wy)(n,D,O),E&&!c&&(K(),await U.getResultAsync()),c&&(0,r.iJ)(v),function(){const t=window._pageTimings;if(!t)return;const e=performance.getEntriesByType("visibility-state").find(t=>"visible"===t.name);t[m.aW]=e&&Math.round(e.startTime)||Math.round(performance.now())}(),function(t,e){const n=window._pageTimings;if(!n)return;const a=e&&"1"==n[`${y}${e}`],c=(0,r.tU)(v);n[m.le]=1,n[m.x8]=1;let u=c,d=v,l=-1;t.forEach(t=>{const e=n[w+t];let i=(0,r.tU)(t);a||(i=Math.max(i,c)),n[b+t]=e,n[w+t]=i||-1,t===g.UlU&&(l=i),i>u&&(u=i,d=t)});const h=n[m.$w];let p=!1;if(isNaN(h)||null===h){let e=n.IncompleteMarkers;if(!e){const t=(0,r.wI)(r.Ci.Primary);e=t?.join(",")}const a=[];if(e.split(",").forEach(t=>{(!n[t]||n[t]<=0)&&a.push(t)}),a.length>0){e=a.join(",");const c=(0,r.$y)(),u=c.marker||"None",d=c.value||"None",l=n[w+"WaterfallViewFeed"]||0;let h="";l&&(h=`TTVR.Waterfall: ${l}.`);let f="";const p=n.visualDependenciesConfigs||[];p.length&&(f=`DependenciesConfigs: ${p.join("|")}.`),(0,o.vV)(s.u1d,"TTVR missing during prerender.",void 0,{...s.u1d.pb,customMessage:`Incomplete markers: ${e}. visuallyReadyDependencies: ${t.join("|")}. Last Marked: ${u} ${d}. ${f} ${h}`,pageTimings:(0,i.ZF)()})}p=!0}if((isNaN(u)||null===u)&&((0,o.vV)(s.UDQ,"TTPR missing during prerender."),p=!0),p)return;const C=n["TTVR.MsnFeed"]&&t.includes("MsnFeed")?u:Math.min(u,h);if(n[m.fn]=n[m.$w]=C,S=performance.now(),n[m.SM]=d,n[m.l]=h,n.tabStartToNavigationStart&&n[m.aW]){const t=n.tabStartToNavigationStart+n[m.aW];n[m.rQ]=n[m.$w]+t}const k=n[m.Sg],T=n[m.RD],x=n[`${m.fn}.SearchBox`]=Math.min(l,k);f.T3.IsUCBased||(isNaN(k)||null===k?(0,o.vV)(s.lwg,"TTVR.SearchBox missing during prerender."):n[m.Sg]=Math.min(x,k),isNaN(T)||null===T?(0,o.vV)(s.v_x,"TTF.SearchBox missing during prerender."):n[m.RD]=Math.min(x,T))}(D,N),f.T3.IsUCBased){const t=C();d.c.getInstance()?.notify(l.m2.OnTTVRMarked,{timestamp:t,timeOrigin:performance.timeOrigin})}performance.mark(a.CV),performance.measure("StaleRevalidation",a.xF,a.CV),function(){if("undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("paint")){if(performance.getEntriesByType("paint").find(({name:t})=>"first-contentful-paint"===t))B.set(),(0,x.kN)();else if(f.T3.IsUCBased&&!(0,R.dr)(f.T3.CurrentMarket))B.set(),(0,x.kN)();else{const t=new PerformanceObserver(e=>{for(const n of e.getEntries())"first-contentful-paint"===n.name&&(B.set(),(0,x.kN)(),t.disconnect())});t.observe({entryTypes:["paint"]})}}else B.set(),(0,x.kN)()}(),(0,T.nt)(),$.YT.runContentVisibilityCallbacks(),$.YT.addOrUpdateTmplProperty("prv",(0,h.Lg)().removeItem("prc"))}function j(){return P.Rb.IsPrerender?B.getResultAsync():Promise.resolve()}function q(){W.set()}function G(){V.set()}function J(){return P.Rb.IsPrerender?V.getResultAsync():Promise.resolve()}function Q(){const t=P.Rb?.IsPrerender;return t&&!L}function K(){try{F&&clearTimeout(F),document.body.removeChild(E),c.v.logObjects("pageRevealDelegate:removeOverlay: Removed overlay"),(0,u.D)(()=>{(0,r.iJ)(v),U.set()})}catch(t){}E=null}function X(){return!!P.Rb.CurrentFlightSet?.has("prg-no-overlay")}},97364:function(t,e,n){n.d(e,{TZ:function(){return c},YV:function(){return u},vi:function(){return a}});var i,r=n(6092);!function(t){t.MatchMedia="MatchMedia",t.BaseLayerLuminance="BaseLayerLuminance",t.External="External",t.Defalut="MatchMedia"}(i||(i={}));const o="DefaultConfig",s=Object.freeze(new Map([["bingHomepage",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["windows",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["edgeChromium",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["winWidgets",{notifyThemeSwitch:!0,themeSwitchNotifier:"External"}],["superApp",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["homePage",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["distribution",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["channelmobile",{notifyThemeSwitch:!0,themeSwitchNotifier:"External"}],[o,{notifyThemeSwitch:!0,themeSwitchNotifier:"MatchMedia"}]]));function a(){return!!s.has(r.T3.AppType)}function c(){const t=r.T3.AppType,e=s.get(t)||s.get(o);return e?.notifyThemeSwitch??!0}function u(){const t=r.T3.AppType,e=s.get(t)||s.get(o);return e?.themeSwitchNotifier??"MatchMedia"}},97406:function(t,e,n){n.d(e,{g:function(){return h}});var i=n(88294),r=n(89980),o=n(15098),s=n(28828),a=n(9701),c=n(39509),u=n(66600),d=n(7565);const l="authRecordTrail";class h{constructor(){this._localStorage=(0,r.Lg)(),this.getCompressedRecords=(0,o.L)(()=>(this.authRecordList||(this.authRecordList=this.getAuthRecordFromDisk()),this.getCompressedRecordsFromAuthTrail(this.authRecordList)))}async addAuthRecord(t,e){try{const n={time:(new Date).toISOString(),action:t,result:e,state:await this.getState()};i.v.log(`authRecord entry - ${t}: ${e}`),this.record(n)}catch(n){i.v.log(`addAuthRecord error - ${t}: ${e}`)}}record(t){if(!t)return void i.v.logError("dual-auth: authRecord is null or undefined");this.authRecordList||(this.authRecordList=this.getAuthRecordFromDisk()),this.authRecordList.push(t),this.getCompressedRecords.cache.clear();const e=this.authRecordList.slice(-10);this._localStorage.setItem(l,JSON.stringify(e))}getRecordsTail(){return this.getRecords().slice(-10)}getCompressedRecordsFromAuthTrail(t){let e={};return t?(e={a:"",r:"",s:[],t:[]},t.forEach((n,i)=>{e.a+=n.action+";",e.r+=this.getCompressedResult(n.result)+";",e.t.push(this.getTimeDiff(n.time,i>0?t[i-1].time:n.time)),e.s.push(this.getObjectDiff(n.state,i>0?t[i-1].state:n.state))}),e):e}getObjectDiff(t,e){if(!t)return{};if(t===e)return t;const n=(0,a.A)((0,c.A)(t),(0,c.A)(e),u.A);return(0,d.A)(n)}getTimeDiff(t,e){if(!t)return;if(t===e)return t;const n=new Date(t),i=n&&n.getTime(),r=e&&new Date(e),o=r&&r.getTime();return i&&o?(i-o).toString():void 0}getRecords(){return this.authRecordList||(this.authRecordList=this.getAuthRecordFromDisk()),this.authRecordList}getAuthRecordFromDisk(){if(!this._localStorage.supported)return void i.v.log("dual-auth: Local storage access is not supported");const t=this._localStorage.getItem(l);return(0,s.B)(t)||[]}}},97643:function(t,e,n){function i(t,e){const n=parseInt(t);return isNaN(n)?e:n}function r(t){try{return JSON.stringify(t)}catch{return null}}function o(t){try{return decodeURIComponent(t)}catch(t){}}n.d(e,{AY:function(){return i},PD:function(){return r},RC:function(){return o}})},97852:function(t,e,n){var i,r;n.d(e,{Jr:function(){return s},cs:function(){return c},hs:function(){return u},py:function(){return o},vj:function(){return a}}),function(t){t.Weather="Weather",t.Weather_Nowcast="Weather_Nowcast",t.Weather_TeaserRain="Weather_TeaserRain",t.Sports="Sports",t.Finance="Finance",t.CasualGame="CasualGame",t.Shopping="Shopping",t.DailyBrief="DailyBrief",t.DailyMoment="DailyMoment",t.CreatorSpotlight="CreatorSpotlight"}(i||(i={})),function(t){t.Weather_SevereWeather="Weather_SevereWeather",t.News_CatchUpStack="News_CatchUpStack",t.News_TopStories="News_TopStories",t.News_TrendingNow="News_TrendingNow",t.News_SaveForLater="News_SaveForLater",t.News_CopilotDaily="News_CopilotDaily",t.News_BreakingNews="News_BreakingNews",t.News_ForYouNews="News_ForYouNews",t.Finance_PriceMovement="Finance_PriceMovement",t.Sports_SportsMatch="Sports_ScoreUpdates",t.MomentInTime="MomentInTime",t.News_CreatorSpotlight="News_CreatorSpotlight",t.News_DailyWonder="News_DailyWonder",t.News_WatchGoldShorts="News_WatchGoldShorts",t.News_WatchVideoHeavy="News_WatchVideoHeavy"}(r||(r={}));const o=["msnruby","edgntpruby","edgdhpruby","edgentntpruby","edgentdhpruby","ma13x3","cp_msn_cmc"],s=Object.freeze([{id:"watch",localizationKey:"watchText",href:"https://www.msn.com/video"},{id:"weather",localizationKey:"weatherText",href:"https://www.msn.com/weather"},{id:"money",localizationKey:"moneyText",href:"https://www.msn.com/money"},{id:"games",localizationKey:"gamesText",href:"https://www.msn.com/play"}]),a="gemSnapshotKey",c="uxmode",u="layout:l4xapfallback"},98165:function(t,e,n){n.d(e,{T:function(){return r}});var i=n(19548);function r(){return"vp"===i._3.getQueryParameterByName("reqsrc",location.href)||"1"===i._3.getQueryParameterByName("vptest",location.href)}},98216:function(t,e,n){let i;n.d(e,{GI:function(){return c},RO:function(){return o},YT:function(){return s},km:function(){return a}});const r=new Promise(t=>{i=t});let o=()=>r,s=null;function a(t,e=i){s=t,e()}const c="uxmode"},98288:function(t,e,n){n.d(e,{G:function(){return i}});const i=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},98719:function(t,e,n){n.d(e,{MR:function(){return f},WS:function(){return h}});var i=n(29194),r=n(78981),o=n(82238),s=n(90905);let a=!1;function c(){u()}const u=(0,s.A)(()=>f(!1),300),d=new Set;class l extends i.Yi{constructor(t){super(t),this.options=t}bind(t){this.target=t.targets[this.targetNodeId],a||(addEventListener("resize",c),a=!0),this.initialCalc(),d.add(this)}unbind(){d.delete(this)}async initialCalc(){await(0,o.Qc)(),this.recalculate(!1)}async recalculate(t){await(0,r.P)();const e=this.target;if("fixed"!==e.style.position&&e.offsetWidth>0&&e.offsetHeight>0){const n={top:e.offsetTop,left:e.offsetLeft};if(t&&this.lastPosition){const t=this.lastPosition.left-n.left,i=this.lastPosition.top-n.top;if(t||i){const n=`translate(${t}px, ${i}px)`;e.style.transform=n,requestAnimationFrame(()=>{const t="transform .3s ease-out",n=e.style.transition;e.style.transition=n?n+", "+t:t,e.style.transform="translate(0, 0)",setTimeout(()=>{e.style.transition=n,e.style.transform=null},300)})}}this.lastPosition=n}}}function h(){return new l({})}function f(t){for(const e of d.values())e.recalculate(t)}i.dg.define(l)},98763:function(t,e,n){n.d(e,{MV:function(){return h},QW:function(){return f},Xe:function(){return u},bP:function(){return l},pV:function(){return d}});var i=n(17720);let r=0;function o(){return r>1e8&&(r=0),"__mlv-"+r++}const{get:s,set:a,delete:c}=i.vv,u=()=>w(p()),d=t=>w(g(t));function l(){const t=p();return w(t,{call:(...e)=>t.get()?.(...e)})}function h(){const t=g(()=>new Map);return w(m(t),{getObj:()=>t.get(),set:(e,n)=>t.get().set(e,n),get:e=>t.get().get(e)})}function f(){const t=g(()=>new Set);return w(m(t),{getObj:()=>t.get(),add:e=>t.get().add(e)})}function p(){const t=o();return{get:()=>s(t),set:e=>(a(t,e),e),unset:()=>{c(t)}}}function g(t){const e=o();return{get:()=>s(e,t),unset:()=>{c(e)}}}function m(t){const e=()=>t.get();return{has:t=>e().has(t),get size(){return e().size},delete:t=>e().delete(t),unset:()=>t.unset()}}function w(t,e){return Object.freeze(e?Object.assign(t,e):t)}},98793:function(t,e,n){n.d(e,{Q:function(){return c}});var i=n(16091),r=n(17720),o=n(15507),s=n(65022);class a extends o.M{constructor(){super("ntp.record_user_choices","setting","value",{setting:"default",source:"default layout",timestamp:0,value:-1})}static getInstance(){return r.vv.get("__RecordUserChoicesManager__",()=>new a)}async deleteKeyValueFromPSL(t){return this.deleteEntriesFromPSL([t])}async deleteEntriesFromPSL(t){try{if(!t?.length)return;const e=(await this.getPreferenceSettingValueArray()||[]).filter(e=>e&&!t.includes(e[this.searchForKeyName]));return this.setAndSavePreferenceSetting(e)}catch(e){const n="Failed to delete user preference setting";return this.logAppError(s.NVY,n,`Key:${t.join(",")}.Error:${e}`),!1}}}const c=(0,i.G)(a)},99096:function(t,e,n){n.d(e,{h:function(){return $}});var i=n(20431),r=n(94061),o=n(68399),s=n(16418),a=n(73691),c=n(33107);var u=n(77216),d=n(13053),l=n(47554),h=n(77246),f=n(91218),p=n(88294),g=n(7258),m=n(79426),w=n(42140),y=n(45933),v=n(18284);const b=new m.e;let S;const C=async t=>await T({args:t}),k=(0,v.A)(async()=>await T({uxValidationOptions:{wholePageValidation:!0}}));async function T(t){let e,n;const i=performance.now();return await async function(t,e){const n=performance.now();try{const e=await b.getResultAsync();await t(e)}catch(t){const i=(0,g.h5)(t);e({status:"aborted",groupKey:f.y2.other.displayKey,error:i,errorString:(0,g.M5)(i),timeTaken:x(n)},x(n))}}(async i=>{!t.args&&t.uxValidationOptions&&await i.enableUXValidation(t.uxValidationOptions),({results:e,next:n}=i.getValidationResultsSync(t.args))},t=>e=[t]),{results:e,next:n,timeTaken:x(i)+(t.args?0:S)}}function x(t){return Math.round(10*(performance.now()-t))/10}async function A(t){t&&await b.getResultAsync(),window._telemetryValidationEnabled=t,window.dispatchEvent(new CustomEvent("telemetryValidationInitStatus"))}function $(t,e,f,g,m){(0,i.Cp)(t,e),(0,r.LW)(),function(t,e,n,i,r){n?.CurrentFlightSet?.has("disableepm")||((0,s.ZQ)(t,n,e,i,r),(0,a.a$)((0,c.S9)("fetch","fetch",!0)),(0,o.Pp)((0,c.S9)("custom-em","custom-em",!0)))}(m,g,f,()=>(0,i.$y)(!0),()=>(0,i.$y)(!1)),(0,i.wR)().traceLevel>=u.X.high&&(I("RAF",requestAnimationFrame),I("RAFTimer",d.D)),(0,h.S)()&&(!async function(){const t=(0,y.P)();if(0===t)return void await A(!1);let e,i;const r=performance.now();try{const{telemetryValidationPackage:t}=await n.e("telemetry-validation").then(n.bind(n,57639)),r={telemetryPayloadListener:w.U},o=await t.initializePackage(r);({error:e,manager:i}=o)}catch(t){e=t}finally{S=x(r)}if(i){if(b.set(i),t>=3){const e=4===t;await i.enableUXValidation({loadToolsUX:e})}}else{const t=e?.message||"No error was provided.";b.setError(e=new Error(`TelemetryValidationManager initialization error: ${t}`))}e&&p.v.logError(e.message),A(!!i)}(),window._getAppPerfTrace=l.C)}function I(t,e){const n=(0,c.S9)(t,t);n&&function t(){const{endMeasure:i}=n.startMeasure("frame");e(()=>{i(),t()})}()}(0,h.S)()&&(window._getValidationResults=C,window._getWholePageValidationResults=k)},99124:function(t,e,n){function i(t){return{auctionRidOverride:t.auctionRidOverride,enableWidgetsRegion:t.enableWidgetsRegion,rubyConsumptionOnCohort:r(t),enableWpoAdRank:!0}}function r(t){return t.addUxModeToConsumptionCohort?t.allowedRubyTargetedVersions:void 0}n.d(e,{S:function(){return r},w:function(){return i}})},99271:function(t,e,n){n.d(e,{I:function(){return gn}});var i=n(56911),r=n(45084),o=n(65431),s=n(65022),a=n(93468),c=n(63456),u=n(62966),d=n(29307),l=n(60544),h=n(693),f=n(78285),p=n(26555),g=n(6383),m=n(39972),w=n(5283),y=n(4891);const v={configType:"prg-d-rating-n-y",region:[y.Tp.river],template:(t,e)=>"msn-default-rating-nondr-yellow-static",requiredAssetsAll:[r.eO.rating],supportedAssets:[r.eO.rating]},b={configType:"prg-h-rating-n-r",region:[y.Tp.river],template:(t,e)=>"msn-highlight-rating-nondr-red",requiredAssetsAll:[r.eO.rating],supportedAssets:[r.eO.rating]},S={configType:"prg-h-rating-n-y",region:[y.Tp.river],template:(t,e)=>"msn-highlight-rating-nondr-yellow",requiredAssetsAll:[r.eO.rating],supportedAssets:[r.eO.rating]},C={configType:"prg-h-rating-nys",region:[y.Tp.river],template:(t,e)=>"msn-highlight-rating-nondr-yellow-static",requiredAssetsAll:[r.eO.rating],supportedAssets:[r.eO.rating]},k={configType:"prg-promo-ndr",region:[...y.mL],template:(t,e)=>"msn-special-offer-nondr",requiredAssetsAll:[r.eO.specialOffer],supportedAssets:[r.eO.specialOffer]},T={configType:"prg-promo-ndr2",region:[...y.mL],template:(t,e)=>"msn-special-offer-nondr-with-exp",requiredAssetsAll:[r.eO.specialOffer],supportedAssets:[r.eO.specialOffer]},x={configType:"prg-ad-condition",region:[y.Tp.river],template:"msn-condition-nondr",requiredAssetsAll:[r.eO.condition]},A={configType:"prg-ad-return",region:[y.Tp.river],template:"msn-return-policy-nondr",requiredAssetsAll:[r.eO.returnPolicy]},$={configType:"prg-ad-sold",region:[y.Tp.river],template:"msn-sold-nondr",requiredAssetsAll:[r.eO.sold]},I={configType:"prg-fship-in-b-n",region:[y.Tp.river],template:"msn-freeshipping-inline-nondr",requiredAssetsAll:[r.eO.freeShipping],supportedAssets:[r.eO.freeShipping]},P={configType:"prg-fship-in-t-n",region:[y.Tp.river],template:"msn-freeshipping-plain-text-nondr",requiredAssetsAll:[r.eO.freeShipping],supportedAssets:[r.eO.freeShipping]},R={configType:"prg-fship-tl-n",region:[y.Tp.river],template:"msn-freeshipping-top-left-nondr",requiredAssetsAll:[r.eO.freeShipping],supportedAssets:[r.eO.freeShipping]},M={configType:"prg-fship-tr-n",region:[y.Tp.river],template:"msn-freeshipping-top-right-nondr",requiredAssetsAll:[r.eO.freeShipping],supportedAssets:[r.eO.freeShipping]};var _=n(20048);const E={name:"gamification-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[..._._,{name:"gradient-mask",paddingTop:"120",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2}},{name:"gamification",layout:{mode:"pixel",bottom:"35",width:"300",zIndex:4}}]}]},F=(t,e,n)=>({modifier:(t,e)=>{e.template.useClickInGamify=n},configType:t,region:[y.Tp.river],template:"msn-gamification",discountThreshold:e,requiredAssetsAll:[r.eO.price,r.eO.salePrice],supportedAssets:[r.eO.price,r.eO.salePrice,r.eO.discount],dynamicRenderingConfig:()=>E}),D=F("prg-wpo-gamify-c",y.vz.gamification,!0),O=F("prg-wpo-gamify-h",y.vz.gamification,!1),N={name:"hotspot-single-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[..._._,{layout:{mode:"pixel",bottom:"0",zIndex:2},children:[{name:"gradient-mask",paddingTop:"30",children:[{name:"div-wrapper",marginBottom:"10",children:[{name:"animation-decorator",animationType:"scale-up",animationConfig:{scaleFrom:0,scaleTo:1,durationString:".3s",delayTimeMs:0},children:[{name:"hotspot-single"}]}]},{name:"ad-title"}]}]}]}]},L=(t,e)=>({configType:t,region:[y.Tp.river],requiredAssetsAll:[r.eO.price,r.eO.salePrice],template:"msn-hotspot-single",supportedAssets:[r.eO.price,r.eO.salePrice,r.eO.discount],discountThreshold:e,dynamicRenderingConfig:()=>N}),B=L("prg-wpo-hs",y.vz.default),U=L("prg-wpo-hs10",y.vz.hotspotSingle10),W={configType:"prg-ad-ctav3",region:[...y.IT,...y.mL],maxAdCount:3,template:(t,e)=>"msn-call-to-action-v3"},V={configType:"prg-ad-cta-pa",region:[...y.mL],requiredAssetsAll:[r.eO.price],maxAdCount:3,template:(t,e)=>"msn-call-to-action-v3-pa"};var H=n(38870),z=n(64281);const j={name:"feedv2-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"302",height:"157",zIndex:1}},{name:"color-mask",alwaysPresent:!0,feedV2:!0,layout:{mode:"pixel",left:"0",top:"157",width:"300",height:"147",zIndex:1}},{name:"ad-title",isFeedV2:!0,titleFontSize:18,layout:{mode:"pixel",top:"169",zIndex:1}},{name:"see-more",isFeedV2:!0,layout:{mode:"pixel",top:"8",height:"31",left:"260",zIndex:5}},(0,z.zo)((0,z.Gy)(H.o,"end-action-part",2,[],1),["ad-label","provider-name","ad-choice"],[{isFeedV2:!0},{isFeedV2:!0},{isFeedV2:!0,layout:{zIndex:5,marginInlineEnd:10}}])]}]},q={configType:"prg-scards",region:[...y.mL],template:"feedv2-template",dynamicRenderingConfig:()=>j},G=(0,z.BA)(j,"ad-title",{name:"ad-title",isFeedV2:!0,titleFontSize:18,customStyleHovered:"text-decoration:underline;",layout:{mode:"pixel",top:"169",zIndex:1}}),J={configType:"prg-scardsul",region:[...y.mL],template:"feedv2-template",dynamicRenderingConfig:()=>G},Q=(0,z.BA)(j,"ad-title",{name:"ad-title",isFeedV2:!0,titleFontSize:20,customStyleHovered:"text-decoration:underline;",layout:{mode:"pixel",top:"169",zIndex:1}}),K={configType:"prg-scardshov",region:[...y.mL],template:"feedv2-template",dynamicRenderingConfig:()=>Q};var X,Y,Z,tt,et,nt;!function(t){t.ROW="row",t.ROW_REVERSE="row-reverse",t.COLUMN="column",t.COLUMN_REVERSE="column-reverse"}(X||(X={})),function(t){t.FLEX="flex",t.INLINE_FLEX="inline-flex"}(Y||(Y={})),function(t){t.FLEX_START="flex-start",t.FLEX_END="flex-end",t.CENTER="center",t.SPACE_BETWEEN="space-between",t.SPACE_AROUND="space-around",t.SPACE_EVENLY="space-evenly"}(Z||(Z={})),function(t){t.FLEX_START="flex-start",t.FLEX_END="flex-end",t.CENTER="center",t.STRETCH="stretch",t.BASELINE="baseline"}(tt||(tt={})),function(t){t.NOWRAP="nowrap",t.WRAP="wrap",t.WRAP_REVERSE="wrap-reverse"}(et||(et={})),function(t){t.AUTO="auto",t.STRETCH="stretch",t.CENTER="center",t.FLEX_START="flex-start",t.FLEX_END="flex-end",t.BASELINE="baseline",t.INITIAL="initial",t.INHERIT="inherit"}(nt||(nt={}));const it={name:"ad-slug-v3-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-label",layout:{mode:"pixel",top:"270",height:"31",zIndex:5,marginInlineStart:"16",marginInlineEnd:"8"}},{name:"ad-choice",layout:{mode:"pixel",top:"267",height:"31",zIndex:5,marginInlineStart:"231",marginInlineEnd:"8"}},{name:"see-more",layout:{mode:"pixel",top:"262",height:"31",zIndex:5,marginInlineStart:"256"}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"background-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:0}},{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"div-wrapper",marginBottom:"6",marginLeft:"16",marginRight:"16",width:"260",children:[{name:"favicon-provider-name",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:tt.CENTER},children:[{name:"ad-favicon",layout:{mode:"flex"}},{name:"provider-name",layout:{mode:"flex",flex:1,marginInline:"6",minWidth:"0"},customStyleClass:"white-12-flex-layout",keepOpacity:!0}]}]},{name:"ad-title",twoLine:!0}]}]}]},rt={configType:"prg-wpo-ad-slug3",region:[y.Tp.river,y.Tp.rivercms,y.Tp.resriver],template:"msn-ad-slug-v3",dynamicRenderingConfig:()=>it},ot={configType:"prg-wpo-ad-slug4",region:[y.Tp.river,y.Tp.resriver,y.Tp.rivercms],template:"msn-ad-slug-v4",dynamicRenderingConfig:()=>it};var st=n(95999),at=n(2692);const ct={maxAdCount:3,template:(t,e)=>y.IT.includes(e.region)?"msn-info-pane-dynamic-rendering":"msn-decoration-dynamic",region:[...y.Ph],dynamicRenderingConfig:t=>y.IT.includes(t.region)?st.q:at.w},ut=[{...ct,configType:"prg-ads-deco",supportedAssets:[r.eO.rating,r.eO.freeShipping,r.eO.review]},{...ct,configType:"prg-ads-no-deco"}],dt={name:"default-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"div-text",inlineStyle:"font-size:14px;line-height:16px;letter-spacing:0.7px",text:"nativeAdBingRewardsText",layout:{mode:"pixel",left:"16",top:"16",zIndex:2}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]},{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"footer-wrapper",layout:{mode:"pixel",top:"264",height:"31",width:"100%",zIndex:5},children:[{name:"footer",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,alignItems:tt.CENTER,height:"31"},children:[{name:"start-action-part",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:tt.CENTER},children:[{name:"join-now",layout:{mode:"pixel",left:"16",zIndex:2}}]},{name:"end-action-part",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW_REVERSE,alignItems:tt.CENTER},children:[{name:"ad-choice",layout:{mode:"flex",paddingRight:"6"}},{name:"div-text",inlineStyle:"font-size:12px;color:rgba(255,255,255,0.7);padding-right:11px",text:"nativeAdPromotedByText",layout:{mode:"flex"}}]}]}]}]}]},lt={configType:"prg-amplify",region:[y.Tp.riverAmplify,y.Tp.rightRailAmplify],template:"msn-amplify",dynamicRenderingConfig:()=>dt},ht=t=>({name:"animation-decorator",animationType:"scale-up",animationConfig:{scaleFrom:1.5,scaleTo:1,durationString:"1s",duration:1500,delayTimeMs:500},intersectionRootMargin:"0px 0px 0px 0px",children:[t]}),ft=t=>(0,z.aU)(t,z.kw.byName("product-image"),ht),pt=ft(at.w),gt=ft(st.q);var mt,wt,yt,vt,bt,St,Ct;!function(t){t[t["Segoe UI"]=1]="Segoe UI",t[t.Tenorite=2]="Tenorite",t[t.Lora=3]="Lora"}(mt||(mt={})),function(t){t[t["scale-up"]=1]="scale-up",t[t["scale-down"]=2]="scale-down",t[t["scale-up-down"]=3]="scale-up-down"}(wt||(wt={})),function(t){t[t["#036AC4"]=1]="#036AC4",t[t["#B26200"]=2]="#B26200",t[t["#508128"]=3]="#508128",t[t["#158389"]=4]="#158389",t[t["#C84C56"]=5]="#C84C56",t[t["#12875E"]=6]="#12875E",t[t["#666666"]=7]="#666666"}(yt||(yt={})),function(t){t[t.cube=2]="cube",t[t.box=3]="box",t[t.truck=4]="truck"}(vt||(vt={})),function(t){t[t.normal=1]="normal",t[t.small=2]="small",t[t.large=3]="large"}(bt||(bt={})),function(t){t[t.default=1]="default",t[t["5-star-with-button"]=2]="5-star-with-button",t[t["1-star-with-button"]=3]="1-star-with-button",t[t["1-star-with-shadow"]=4]="1-star-with-shadow"}(St||(St={})),function(t){t.normal="265",t.small="270",t.large="255"}(Ct||(Ct={}));var kt=n(44449);const Tt=(0,kt.sx)(s._0l,"personalizedV2Override")(t=>{(0,h.A)(t.items?.[0]?.ext?.adCreativeV2)||(t.items[0].ext.adCreative=JSON.parse(t.items[0].ext.adCreativeV2))}),xt=(0,kt.sx)(s._0l,"isPersonalizedAvailable")((t,e)=>t.items?.[0]?.ext?.adCreative?.templateId===e&&!!t.items?.[0]?.ext?.adCreative?.templateConfig),At=(0,kt.sx)(s._0l,"isShippingConfig")(t=>!!t.items[0]?.assets?.freeShipping&&!!t.items?.[0]?.ext?.adCreative?.templateConfig?.shipping&&!t.items?.[0]?.ext?.adCreative?.templateConfig?.shipping?.suppress),$t=(0,kt.sx)(s._0l,"isRatingConfig")(t=>!!t.items[0]?.assets?.rating&&!!t.items?.[0]?.ext?.adCreative?.templateConfig?.ratings&&!t.items?.[0]?.ext?.adCreative?.templateConfig?.ratings?.suppress),It=(0,kt.sx)(s._0l,"getPersonalizedConfig")((t,e)=>{if(xt(t,e)){const[e]=t.items;return e.ext.adCreative.templateConfig}return null});var Pt;!function(t){const e=(0,kt.sx)(s._0l,"processDecorations");t.processDecorations=e((t,e)=>(0,z.Wh)(e,"ad-decoration",{fontSizes:{price:t.price?.fontSize,salePrice:t.saleprice?.fontSize},fontFamily:mt[t.font]}));const n=(0,kt.sx)(s._0l,"getAnimationDuration")(t=>t?{duration:t,durationString:t/1e3+"s"}:{}),i=(0,kt.sx)(s._0l,"getAnimationScale")((t,e)=>t&&e?{scaleFrom:t,scaleTo:t-e}:{}),r=(0,kt.sx)(s._0l,"getLocationAlignRight")(t=>{if(2==t)return{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,justifyContent:Z.FLEX_END}}),o=(0,kt.sx)(s._0l,"getLocation")((t,e)=>3==t?{mode:"pixel",bottom:Ct[e||"normal"]}:4==t?{mode:"pixel",bottom:Ct[e||"normal"],right:"16"}:void 0),a=(0,kt.sx)(s._0l,"getDelayTime")(t=>t?{delayTimeMs:t}:{}),c=(0,kt.sx)(s._0l,"processAnimationImage");t.processAnimationImage=c((t,e)=>{if(!t.image)return e;return(0,z.aU)(e,z.kw.byName("animation-decorator"),e=>{if(t.image.suppress)return{};const{animation:r}=t.image,o={...e,animationType:wt[r?.type]||e.animationType,animationConfig:{...e.animationConfig,...i(r?.scaleFrom,r?.scaleBy),...n(r?.duration),...a(r?.delayTimeMS)}};if(!r?.scaleFrom&&"scale-down"===o.animationType){const t=e.animationConfig.scaleFrom;e.animationConfig.scaleFrom=e.animationConfig.scaleTo,e.animationConfig.scaleTo=t}return o})});const u=(0,kt.sx)(s._0l,"processFreeShipping");t.processFreeShipping=u((t,e)=>{if(!t.shipping||t.shipping.suppress)return e;const{color:n,location:i}=t.shipping,s=vt[t.shipping.icon],a=(0,z.Wh)(e,"div-wrapper",{layout:{...r(i)}});return(0,z.Wh)(a,"free-shipping",{fontFamily:mt[t.font],color:yt[n||"1"],icon:s,layout:{...o(i)}})});const d=(0,kt.sx)(s._0l,"processRating");t.processRating=d((t,e)=>{if(!t.ratings||t.ratings.suppress)return e;const{color:n,elementStyle:i,elementSize:s,location:a,displayReviewCount:c}=t.ratings,u=bt[s],d=(0,z.Wh)(e,"div-wrapper",{layout:{...r(a)}});return(0,z.Wh)(d,"rating",{fontFamily:mt[t.font],color:yt[n||"1"],elementStyle:St[i],elementSize:u,displayReviewCount:c,layout:{...o(a,u)}})});const l=(0,kt.sx)(s._0l,"processTitle");t.processTitle=l((t,e)=>(0,z.Wh)(e,"ad-title",{fontFamily:mt[t.font]}))}(Pt||(Pt={}));const Rt=[Pt.processDecorations,Pt.processTitle],Mt=(0,kt.sx)(s._0l,"processPersonalizedConfig")((t,e,n,i=Rt)=>{const r=It(t,e);return r?(0,g.A)(i,(t,e)=>e(r,t),n):n}),_t=(0,kt.sx)(s._0l,"removeAssets")(t=>{for(const e of t.items){if(!t.enableNativeAdWC&&!t?.template?.enableVA){delete e.assets?.price,delete e.assets?.salePrice;continue}const n=e.ext?.adCreative?.templateConfig;if(n){const{price:t,saleprice:i}=n;t?.suppress&&delete e.assets?.price,i?.suppress&&delete e.assets.salePrice}}return t}),Et=(0,kt.sx)(s._0l,"processConfig")((t,e,n)=>Mt(t,e,n,[Pt.processTitle,Pt.processAnimationImage,Pt.processDecorations,Pt.processFreeShipping,Pt.processRating])),Ft={configType:"prg-ani-img",qualifier:(t,e)=>xt(e,"animatedimageryinf")||xt(e,"animatedimageryriver"),region:[y.Tp.river,y.Tp.resriver,y.Tp.infopane,y.Tp.resinfopane],template:"msn-animated-imagery",supportedAssets:[r.eO.price,r.eO.salePrice],dynamicRenderingConfig:t=>"infopane"===t.region||"resinfopane"===t.region?Et(t,"animatedimageryinf",gt):Et(t,"animatedimageryriver",pt),modifier:(t,e)=>{_t(e)}},Dt=(0,z.BA)(at.w,"gradient-mask",{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"div",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:tt.CENTER},children:[{name:"ad-title",lineHeight:"28",titleFontSize:"20",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:tt.CENTER,bottom:"52",zIndex:2}},{name:"call-to-action",layout:{mode:"flex",display:Y.FLEX,paddingRight:"16"}}]}]}),Ot={configType:"prg-ad-cta",region:[...y.mL],requiredAssetsAll:[r.eO.price],template:"msn-ad-cta",supportedAssets:[r.eO.price,r.eO.salePrice],dynamicRenderingConfig:()=>Dt},Nt=(0,z.BA)(at.w,"gradient-mask",{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:4},children:[{name:"div",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:tt.CENTER},children:[{name:"ad-title",lineHeight:"28",titleFontSize:"20",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:tt.CENTER,bottom:"52",zIndex:2}},{name:"ad-title-mask"},{name:"call-to-action",ctaMode:"arrow",backgroundColor:"#C6C0BA",color:"#000000;",layout:{mode:"flex",display:Y.FLEX,paddingRight:"16"}}]}]}),Lt={configType:"prg-ad-cta-ic",region:[...y.mL],requiredAssetsAll:[r.eO.price],template:"msn-ad-cta-icon",dynamicRenderingConfig:()=>Nt},Bt={configType:"prg-ad-cta-lm",region:[...y.mL],requiredAssetsAll:[r.eO.price],template:"msn-ad-cta-learn-more",dynamicRenderingConfig:()=>Dt},Ut=(0,z.BA)(Dt,"call-to-action",{name:"call-to-action",backgroundColor:"#C6C0BA",color:"#000000;",layout:{mode:"flex",display:Y.FLEX,paddingRight:"16"}}),Wt={configType:"prg-ad-cta-lmd",region:[...y.mL],requiredAssetsAll:[r.eO.price],template:"msn-ad-cta-learn-more-dark-mode",dynamicRenderingConfig:()=>Ut},Vt=(0,z.cs)(Dt,["call-to-action","product-image"],[{name:"call-to-action",ctaMode:"mask"},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!1}]),Ht={configType:"prg-ad-cta-m",region:[...y.mL],requiredAssetsAll:[r.eO.price],template:"msn-ad-cta-mask-mode",supportedAssets:[r.eO.price,r.eO.salePrice],dynamicRenderingConfig:()=>Vt},zt={configType:"prg-ad-cta-st",region:[...y.mL],requiredAssetsAll:[r.eO.price,r.eO.shortTitle],template:"msn-ad-cta-short-title",dynamicRenderingConfig:()=>Ut},jt={configType:"prg-ad-ctav2",region:[...y.mL],template:"msn-call-to-action-v2",dynamicRenderingConfig:()=>Nt},qt=[{configType:"prg-ad-logo-c",template:"msn-logo-c",region:[...y.mL],qualifier:(t,e)=>!!e.items?.[0]?.assets?.logo?.url,requiredAssetsAll:[r.eO.logo]},{configType:"prg-ad-z-c",template:"msn-z-index-c",region:[y.Tp.river],qualifier:(t,e)=>(0,y.h8)(e),requiredAssetsAll:[r.eO.transparentImage]},{configType:"prg-promo-ndr-c",template:"msn-special-offer-c",region:[...y.mL],requiredAssetsAll:[r.eO.specialOffer]},{configType:"prg-fship-c",template:"msn-freeshipping-c",region:[y.Tp.river],requiredAssetsAll:[r.eO.freeShipping]},{configType:"prg-rating-c",template:"msn-rating-c",region:[y.Tp.river],requiredAssetsAll:[r.eO.rating]},{configType:"prg-trendingc",template:"msn-trending-c",region:[...y.mL],requiredAssetsAll:[r.eO.viewed]},{configType:"prg-ad-sh-v1-c",template:"msn-sale-highlight-v1-c",region:[...y.mL,...y.IT],requiredAssetsAll:[r.eO.price,r.eO.salePrice,r.eO.discount],discountThreshold:y.vz.saleHighlight15,maxAdCount:1},{configType:"prg-ad-sh-v3v4-c",template:"msn-sale-highlight-v3v4-c",region:[...y.mL],qualifier:(t,e)=>(0,y.h8)(e),requiredAssetsAll:[r.eO.price,r.eO.salePrice,r.eO.discount,r.eO.transparentImage],discountThreshold:y.vz.saleHighlight15,maxAdCount:1},{configType:"prg-ad-combo-c",region:[...y.mL],template:(t,e)=>(0,y.n5)(e),requiredAssetsAny:[r.eO.rating,r.eO.specialOffer,r.eO.freeShipping]},{configType:"prg-ad-condition-c",region:[y.Tp.river],template:"msn-condition-nondr-c",requiredAssetsAll:[r.eO.condition]},{configType:"prg-ad-return-c",region:[y.Tp.river],template:"msn-return-policy-nondr-c",requiredAssetsAll:[r.eO.returnPolicy]},{configType:"prg-ad-sold-c",region:[y.Tp.river],template:"msn-sold-nondr-c",requiredAssetsAll:[r.eO.sold]},{configType:"prg-ad-combo-t-c",region:[...y.mL],template:(t,e)=>(0,y.wu)(e),requiredAssetsAny:[r.eO.sold,r.eO.returnPolicy,r.eO.condition]},{configType:"prg-ad-ris1-c",region:y.mL,supportedAssets:[r.eO.price],modifier:(t,e)=>{(0,y.vq)(e,!0)}},{configType:"prg-ad-desc-c",region:y.mL,template:(t,e)=>(0,y.q0)(e)},{configType:"prg-ad-align-rf",region:y.mL,template:(t,e)=>"msn-native-ad-align-rf"},{configType:"prg-ad-ai-imgs-c",region:[...y.mL,...y.IT],template:"msn-native-ad-ai-img",requiredAssetsAll:[r.eO.transparentImage]},{configType:"prg-ad-ai-imgf-c",region:[...y.mL,...y.IT],template:"msn-native-ad-ai-img",requiredAssetsAll:[r.eO.transparentImage]}],Gt={configType:"default",region:[y.Tp.infopane,y.Tp.resinfopane],maxAdCount:2,template:(t,e)=>e.enableNativeAdWC?"msn-animated-imagery":"msft-content-card",supportedAssets:[],dynamicRenderingConfig:t=>{if(t.enableNativeAdWC)return Et(t,"animatedimageryinf",gt)},modifier:(t,e)=>{_t(e)}},Jt={configType:"default",region:[y.Tp.river,y.Tp.resriver],template:"msft-content-card"},Qt={configType:"prg-dr-combined",region:y.Ph,template:(t,e)=>y.IT.includes(e.region)?"msn-info-pane-dynamic-rendering":"msn-decoration-dynamic",dynamicRenderingConfig:t=>y.IT.includes(t.region)?st.q:at.w,modifier:(t,e)=>{e.enableNativeAdWC=!0}},Kt={configType:"prg-ad-combo",region:[y.Tp.river],template:(t,e)=>(0,y.JH)(e),requiredAssetsAny:[r.eO.freeShipping,r.eO.rating,r.eO.specialOffer],dynamicRenderingConfig:t=>(0,y.zg)(t),modifier:(t,e)=>(0,y.I$)(e,!0)},Xt={configType:"prg-dr-infopane",region:[y.Tp.infopane,y.Tp.resinfopane],maxAdCount:3,template:"msn-info-pane-dynamic-rendering",supportedAssets:[r.eO.rating,r.eO.freeShipping,r.eO.review],dynamicRenderingConfig:()=>st.q},Yt=[{configType:"prg-ads-tel-i",region:y.IT,template:"msn-ad-dr-perf",dynamicRenderingConfig:()=>st.q},{configType:"prg-ads-tel-r",region:y.mL,template:"msn-ad-dr-perf",dynamicRenderingConfig:()=>at.w}],Zt={configType:"prg-ad-eb",region:[...y.mL,...y.IT],template:"msn-elite-badge",requiredAssetsAll:[r.eO.eliteBadge],supportedAssets:[r.eO.eliteBadge],maxAdCount:3,dynamicRenderingConfig:t=>y.IT.includes(t.region)?st.q:at.w},te=(0,z.Gy)(at.w,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"free-shipping",color:"#036ac4",layout:{mode:"pixel",bottom:"265"}}]}]),ee={configType:"prg-dr-fship",qualifier:(t,e)=>xt(e,"shippingriver"),region:[y.Tp.river],template:"msn-freeshipping-dr",requiredAssetsAll:[r.eO.freeShipping],dynamicRenderingConfig:t=>Et(t,"shippingriver",te)},ne={name:"highlight-rating-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[..._._,{layout:{mode:"pixel",bottom:"0",zIndex:2},children:[{name:"gradient-mask",paddingTop:"30",children:[{name:"div-wrapper",marginBottom:"10",children:[{name:"highlight-rating"}]},{name:"ad-title",oneLineTitle:!0}]}]}]}]},ie={configType:"prg-wpo-h-rating",region:[y.Tp.river],requiredAssetsAll:[r.eO.rating],template:"msn-highlight-rating-card",supportedAssets:[r.eO.rating],dynamicRenderingConfig:()=>ne},re=(0,z.zo)(st.q,["hover-mask","product-image"],[{layout:{mode:"pixel",filter:"contrast(115%)",left:"0",top:"0",width:"100%",height:"100%"}},{imageMaskOn:!1}]),oe=(0,z.zo)(at.w,["hover-mask","product-image"],[{layout:{mode:"pixel",filter:"contrast(115%)",left:"0",top:"0",width:"100%",height:"100%"}},{imageMaskOn:!1}]),se={configType:"prg-ad-hover",region:[...y.Ph],template:"msft-content-card",dynamicRenderingConfig:t=>y.IT.includes(t?.region)?re:oe},ae={name:"default-infopane-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:4}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",zIndex:1,width:"100%",height:"304"},imageMaskOn:!0,imageMaskOpacity:"0.1",trimBottom:!0},{name:"gradient-mask",paddingTop:"90",layout:{mode:"pixel",bottom:"0",width:"100%",zIndex:2},children:[{name:"ad-title",lineHeight:"36",titleFontSize:"28",oneLineTitle:!0}]},H.o]}]},ce={configType:"prg-infopaneDoubleCard19",region:y.IT,maxAdCount:3,template:"msn-card-19-by-10",dynamicRenderingConfig:()=>ae},ue=(0,z.zo)(ae,["footer","ad-title"],[{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"17",height:"31",width:"100%"}},{lineHeight:"44"}]),de={configType:"prg-infopane-db",region:[y.Tp.riverdb],maxAdCount:3,template:"msn-card-19-by-10",dynamicRenderingConfig:()=>ue,modifier:(t,e)=>{e.enableNativeAdWC=!0}},le=(0,z.L5)(at.w,"end-action-part",0,[{name:"like-button",layout:{zIndex:5}}]),he={configType:"prg-ad-like",region:[y.Tp.river,y.Tp.resriver],template:"msn-like-button",dynamicRenderingConfig:()=>le},fe={name:"logo-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[..._._,{name:"gradient-mask",paddingTop:"120",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2}},{name:"logo",width:"42",height:"42",layout:{mode:"pixel",left:"16",bottom:"49",zIndex:2}},{name:"logo-title-wrapper",layout:{mode:"pixel",left:"54",bottom:"54",zIndex:2},children:[{name:"logo-title-flex-wrapper",layout:{mode:"flex",height:"42",display:Y.FLEX,flexDirection:X.ROW,flex:1,alignItems:tt.CENTER},children:[{name:"ad-title",titleFontSize:"20",twoLine:!0}]}]}]}]},pe={qualifier:(t,e)=>!!e.items?.[0]?.assets?.logo?.url,configType:"prg-ad-logo",region:[...y.mL],template:"msn-native-ad-logo",requiredAssetsAll:[r.eO.logo],dynamicRenderingConfig:()=>fe,modifier:(t,e)=>{e.items&&e.items[0]}},ge=(0,z.BA)(fe,"logo",{name:"logo",width:"42",height:"42",borderRadius:"6",layout:{mode:"pixel",left:"16",bottom:"49",zIndex:2}}),me={qualifier:(t,e)=>!!e.items?.[0]?.assets?.logo?.url,configType:"prg-ad-logo-r",region:[...y.mL],template:"msn-native-ad-logo-radius",requiredAssetsAll:[r.eO.logo],dynamicRenderingConfig:()=>ge},we={configType:"prg-ad-combo2",region:y.mL.concat(y.IT),template:(t,e)=>(0,y.mw)(e),requiredAssetsAny:[r.eO.rating,r.eO.specialOffer,r.eO.freeShipping,r.eO.discount],maxAdCount:1,modifier:(t,e)=>(0,y.I$)(e)},ye=(t,e)=>{const n=(0,z.cs)(at.w,["gradient-mask","provider-name","ad-label"],[{name:"gradient-mask",peSeasonalColorMode:`peSeasonalColorMode${t}`,layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]},{name:"provider-name",layout:{flex:1,minWidth:0,zIndex:5},customStyleClass:"white-12-flex-layout",adLabelTextOpacity:"1",isSeasonal:!0},{name:"ad-label",layout:{marginInlineStart:"16",marginInlineEnd:"6",zIndex:5},adLabelTextOpacity:"1",isSeasonal:!0}]);return(0,z.L5)(n,"default-template",3,[{name:"product-image",patternMode:`patternMode${e}`,useTransparentImage:!0,layout:{position:"absolute",bottom:0,width:"100%",height:121,zIndex:2,pointerEvents:"none"}}])},ve=(ye("1","1"),ye("2","1"),ye("3","1"),ye("4","1"),ye("1","2"),ye("2","2"),ye("3","2"),ye("4","2"),{configType:"prg-ads-seasonal",qualifier:(t,e)=>be(e),region:[...y.mL],template:(t,e)=>"msn-pe-seasonal",dynamicRenderingConfig:t=>{const e=(0,c.A)(t,"items[0].ext.adCreative.templateConfig.seasonal.color"),n=(0,c.A)(t,"items[0].ext.adCreative.templateConfig.seasonal.elementStyle");return ye(e,n)}}),be=(0,kt.sx)(s._0l,"isPersonalizedAvailable")(t=>"seasonal"===(0,c.A)(t,"items[0].ext.adCreative.templateId")&&!!t.items?.[0]?.ext?.adCreative?.templateConfig&&!1===(0,c.A)(t,"items[0].ext.adCreative.templateConfig.seasonal.suppress")),Se={configType:"prg-ads-seav1",region:[...y.mL],template:(t,e)=>"msn-pe-seasonal-v1",dynamicRenderingConfig:t=>ye("3","1")},Ce={configType:"prg-ads-seav1-p",region:y.mL,template:(t,e)=>"msn-pe-seasonal-v1p",qualifier:(t,e)=>e.providerId&&"bing"===e.providerId.toLowerCase(),dynamicRenderingConfig:t=>ye("3","1")},ke=(0,z.L5)(at.w,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"rating"}]}]),Te={name:"default-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[..._._.filter(t=>"product-image"!==t.name),{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]}]},xe=t=>xt(t,"shippingriver"),Ae={configType:"prg-ads-personal",qualifier:(t,e)=>xe(e)||xt(e,"ratingsriver"),region:[y.Tp.river],template:(t,e)=>xe(e)?"msn-freeshipping-dr":"msn-rating-dr",supportedAssets:[r.eO.freeShipping,r.eO.rating,r.eO.review],dynamicRenderingConfig:t=>{const e=At(t)?te:Te,n=$t(t)?ke:Te;return xe(t)?Et(t,"shippingriver",e):Et(t,"ratingsriver",n)}},$e={configType:"prg-wpo-deco-dr",region:[y.Tp.river,y.Tp.infopane,y.Tp.resriver,y.Tp.resinfopane],template:"msn-decoration-dynamic",requiredAssetsAny:[r.eO.rating,r.eO.freeShipping,r.eO.review],dynamicRenderingConfig:()=>at.w},Ie={configType:"prg-dr-rating",qualifier:(t,e)=>xt(e,"ratingsriver"),region:[y.Tp.river],template:"msn-rating-dr",requiredAssetsAll:[r.eO.rating],supportedAssets:[r.eO.rating,r.eO.review],dynamicRenderingConfig:t=>Et(t,"ratingsriver",ke)},Pe=t=>(0,z.L5)(t?st.q:at.w,t?"default-infopane-template":"default-template",0,[{name:"sale-highlight-badge",layout:{mode:"pixel",top:"16",left:"16",zIndex:2}}]),Re=Pe(!1),Me=Pe(!0),_e={configType:"prg-ad-sh-v1",region:[...y.mL,...y.IT],template:"msn-sale-highlight-v1",requiredAssetsAll:[r.eO.price,r.eO.salePrice,r.eO.discount],discountThreshold:y.vz.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:t=>y.IT.includes(t.region)?Me:Re},Ee={name:"sale-highlight-v3-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[..._._.filter(t=>"product-image"!==t.name&&"background-image"!==t.name),{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"sh-content-wrapper",layout:{mode:"pixel",zIndex:1},children:[{name:"sale-highlight-flex-wrapper",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,width:"300",height:"304"},children:[{name:"sale-highlight-title",layout:{mode:"flex",display:Y.FLEX,alignItems:tt.CENTER,width:"126",height:"183",marginInline:"8",marginTop:"10"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:"0",imageMaskTop:"0",layout:{width:"150",height:"183",marginTop:"10"}}]}]},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3},children:[{name:"ad-title"}]}]}]},Fe={name:"sale-highlight-v3-template",children:[..._._.filter(t=>"product-image"!==t.name),{name:"sale-highlight-horizontal-title",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,alignItems:tt.CENTER,justifyContent:Z.CENTER,width:"300",marginInline:"8",marginBottom:"10",zIndex:1,marginTop:19,position:"absolute"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:0,imageMaskTop:0,imageMaskHeight:304,imageMaskWidth:300,layout:{position:"absolute",width:"236",height:"118",left:"32",top:"77",zIndex:1}},{name:"color-mask",layout:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]},De={configType:"prg-ad-sh-v3",region:[...y.mL],template:"msn-sale-highlight-v3",qualifier:(t,e)=>(0,y.h8)(e),requiredAssetsAll:[r.eO.price,r.eO.salePrice,r.eO.discount,r.eO.transparentImage],discountThreshold:y.vz.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:t=>(0,y.A9)(t)?Ee:Fe},Oe={name:"sale-highlight-v4-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"sh-content-wrapper",layout:{mode:"pixel",zIndex:1},children:[{name:"sale-highlight-flex-wrapper",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,width:"300",height:"304"},children:[{name:"sale-highlight-title",layout:{mode:"flex",display:Y.FLEX,alignItems:tt.CENTER,width:"126",height:"183",marginInline:"8",marginTop:"10"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:"0",imageMaskTop:"0",layout:{adBackgroundColor:"#2E2E2E",width:"150",height:"183",marginTop:"10"}}]}]},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.7",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",background:"linear-gradient(var(--gradient-end-color) 0%, var(--gradient-mid-color) 20%, var(--ad-background-color) 30%, var(--ad-background-color) 100%)",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3,neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF",adBackgroundColor:"#2E2E2E",gradientMidColor:"rgba(46, 46, 46, 0.8)",gradientEndColor:"rgba(46, 46, 46, 0)"},children:[{name:"ad-title"}]},(0,z.Wh)(H.o,"footer",{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%",neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF"}})]}]},Ne={name:"sale-highlight-v4-template",children:[..._._.filter(t=>"product-image"!==t.name),{name:"sale-highlight-horizontal-title",layout:{mode:"flex",display:Y.FLEX,flexDirection:X.ROW,alignItems:tt.CENTER,justifyContent:Z.CENTER,width:"300",marginInline:"8",marginBottom:"10",zIndex:1,marginTop:19,position:"absolute"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:0,imageMaskTop:0,imageMaskHeight:304,imageMaskWidth:300,layout:{position:"absolute",width:"236",height:"118",left:"32",top:"77",zIndex:1,adBackgroundColor:"#2E2E2E"}},{name:"color-mask",layout:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",background:"linear-gradient(var(--gradient-end-color) 0%, var(--gradient-mid-color) 20%, var(--ad-background-color) 30%, var(--ad-background-color) 100%)",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3,neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF",adBackgroundColor:"#2E2E2E",gradientMidColor:"rgba(46, 46, 46, 0.8)",gradientEndColor:"rgba(46, 46, 46, 0)"},children:[{name:"ad-title"}]},(0,z.Wh)(H.o,"footer",{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%",neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF"}})]},Le={configType:"prg-ad-sh-v4",region:[...y.mL],template:"msn-sale-highlight-v4",qualifier:(t,e)=>(0,y.h8)(e),requiredAssetsAll:[r.eO.price,r.eO.salePrice,r.eO.discount,r.eO.transparentImage],discountThreshold:y.vz.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:t=>(0,y.A9)(t)?Oe:Ne},Be={configType:"prg-wpo-ss",region:[y.Tp.river],template:"msn-slideshow-card",modifier:(t,e)=>{e.slideshowProps=e.template.slideshowProps={autoScroll:!0,autoScrollIntervalMs:3e3,maxImageCount:5,enableSlideshowMediaControls:!0}},multiImage:!0},Ue={name:"spotlight-image-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[..._._.filter(t=>"product-image"!==t.name),{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:1},imageMaskOn:!0},{name:"spotlight-background",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:0}},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},paddingBottom:"0"}]}]},We={configType:"prg-wpo-sl",region:[y.Tp.river],template:"msn-spotlight-image",supportedAssets:[],supportedImageRatios:["1x1","3x4","4x3"],targetImageRatio:"1x1",dynamicRenderingConfig:()=>Ue},Ve={...at.w,userActionLogger:"PrgTitle2"},He={configType:"prg-title-2",region:y.mL,template:"msn-title-max-line-2",dynamicRenderingConfig:()=>Ve},ze={...at.w,userActionLogger:"PrgTitle2C"},je={configType:"prg-title-2-c",region:y.mL,template:"msn-title-max-line-2-c",dynamicRenderingConfig:()=>ze},qe=(0,z.BA)(at.w,"gradient-mask",{name:"gradient-mask",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"trending",layout:{position:"relative",zIndex:5}},{name:"ad-title"}]}),Ge={configType:"prg-trending",region:[...y.mL],template:"msn-trending",requiredAssetsAll:[r.eO.viewed],dynamicRenderingConfig:()=>qe},Je={name:"zindex-v2-original-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[..._._.filter(t=>"product-image"!==t.name&&"background-image"!==t.name),{name:"product-image",layout:{mode:"pixel",left:"24",top:"20",width:"252",height:"150",zIndex:2},useTransparentImage:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",height:"304",zIndex:1},isFullGradient:!0},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:2},opacity:"0.3"},{name:"div",layout:{mode:"pixel",bottom:"45",width:"300",zIndex:2},children:[{name:"ad-title"}]}]}]},Qe={configType:"prg-ad-zv2-o",region:[y.Tp.river],qualifier:(t,e)=>(0,y.h8)(e),template:"msn-ad-zindex-v2-original",requiredAssetsAll:[r.eO.transparentImage],dynamicRenderingConfig:()=>Je},Ke={name:"zindex-v2-polygon-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[..._._.filter(t=>"product-image"!==t.name&&"background-image"!==t.name),{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:1},opacity:"0.4",alwaysPresent:!0},{name:"product-image",layout:{mode:"pixel",left:"24",top:"20",width:"252",height:"150",zIndex:2},useTransparentImage:!0},{name:"polygon-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:2}},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:2},opacity:"0.3"},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}],isRadialMask:!0}]}]},Xe={configType:"prg-ad-zv2-p",region:[y.Tp.river],qualifier:(t,e)=>(0,y.h8)(e),template:"msn-ad-zindex-v2-polygon",requiredAssetsAll:[r.eO.transparentImage],dynamicRenderingConfig:()=>Ke},Ye={configType:"prg-ad-combo-txt",region:[...y.mL],template:(t,e)=>(0,y.v7)(e),requiredAssetsAny:[r.eO.sold,r.eO.returnPolicy,r.eO.condition],modifier:(t,e)=>(0,y.bR)(e)},Ze={configType:"prg-ad-ris1",region:y.mL,supportedAssets:[r.eO.price],modifier:(t,e)=>{(0,y.vq)(e)}},tn=[{configType:"prg-ad-desc-wide-1",region:y.jo,template:(t,e)=>(0,y.q0)(e)},{configType:"prg-ad-desc-wide-2",region:y.jo,template:(t,e)=>(0,y.q0)(e)}],en=["msn-geometric-ad-waves-1","msn-geometric-ad-waves-3","msn-geometric-ad-waves-4","msn-geometric-ad-nature-3","msn-geometric-ad-sparkles-1","msn-geometric-ad-sparkles-2","msn-geometric-ad-sparkles-3","msn-geometric-ad-sparkles-4","msn-geometric-ad-sparkles-5"],nn=[{configType:"prg-ad-geometric",region:[...y.mL],modifier:(t,e)=>{(0,y.t3)(e,en,"msft-content-card",e.template.seasonalAdTemplateConfig.density)}}],rn={configType:"prg-ad-ai-img",region:[...y.mL,...y.IT],template:"msn-native-ad-ai-img",requiredAssetsAll:[r.eO.transparentImage],modifier:(t,e)=>{(0,y.jO)(e)}},on=[D,O,B,U,Gt,Jt,$e,Ft,Be,He,je,ie,pe,me,Ot,Lt,Bt,Wt,zt,Ht,jt,Xt,ce,de,Qe,Xe,We,J,K,q,rt,ot,lt,...ut,...Yt,k,T,I,P,R,M,b,S,C,v,$,x,A,Qt,ee,Zt,Ie,Ae,he,se,Ge,_e,De,Le,Kt,we,W,V,ve,Se,Ce,Ye,Ze,rn,...nn,...tn,...qt];var sn=n(63988),an=n(27220),cn=n(57957),un=n(27791);class dn{constructor(){this.filterConfigs=(t,e=[])=>(0,an.A)([...on,...e],e=>(0,cn.A)([...sn.MV,e.qualifier],n=>!n||n(e,t))),this.fallbackConfig=t=>y.IT.includes(t.region)?Gt:Jt,this.pickConfigByWeight=t=>{let e=0;(0,p.A)(t,t=>{e=e+t.weight||y.CY});const n=Math.floor(Math.random()*e);let i=0;for(let e=0;e<t.length;++e)if(i+=t[e].weight||y.CY,n<i)return t[e]},this.preProcess=t=>{t?.template?.enableVAPhase2||((0,p.A)(t.items,t=>{t.assets&&(this.calculateDiscount(t.assets),this.filterRatings(t.assets))}),(0,un.cs)(t))},this.postProcess=(t,e)=>{(0,p.A)([...sn.j5,t.modifier],n=>n?.(t,e))},this.calculateDiscount=t=>{const e=t.price,n=t.salePrice;if(e&&n){const i=Number(e.replace(/[^0-9.-]+/g,"")),r=Number(n.replace(/[^0-9.-]+/g,""));t.discount=Math.floor((i-r)/i*100)}},this.filterRatings=t=>{t&&t.rating&&(isNaN(parseInt(t.rating))||parseInt(t.rating)<=6)&&(t.rating=void 0)}}selectTemplate(t,e=[]){this.preProcess(t);const n=this.filterConfigs(t,e),i=n&&n.length>0?this.pickConfigByWeight(n):this.fallbackConfig(t);this.postProcess(i,t)}}var ln=n(19548);class hn{}hn.concat=(t,e)=>`${t}.${e}`,hn.identity=t=>e=>hn.concat(t,e),hn.boolean=t=>e=>e?hn.concat(t,"1"):null;class fn{constructor(){this._availableAssets="",this._displayedAssets=""}get availableAssets(){return this._availableAssets}get displayedAssets(){return this._displayedAssets}setAvailableAssets(t){(t.items?.[0]?.assets||(0,c.A)(t,"items[0].ext.adCreative.templateConfig"))&&(this._availableAssets=this.concatAssets(t))}setDisplayedAssets(t){t.items?.[0]?.assets&&(this._displayedAssets=this.concatAssets(t))}concatAssets(t){let e="";(0,c.A)(t,"items[0].assets")&&(e=(0,u.A)(Object.keys(t.items[0].assets),t=>{const e=r.eO[t].split("-");return"data"==e?.[0]?e[1]:"image"==e?.[0]?`i${e[1]}`:void 0}).join("_"));const n=(0,c.A)(t,"items[0].ext.adCreative.templateConfig");if(!n)return e;let i="";n&&(i=(0,u.A)(Object.keys(n),t=>r.PZ[t]).join("_"));return e+(e&&i?"_":"")+i}}(0,i.Cg)([(0,kt.sx)(s.ys,"setAvailableAssets")],fn.prototype,"setAvailableAssets",null),(0,i.Cg)([(0,kt.sx)(s.ys,"setDisplayedAssets")],fn.prototype,"setDisplayedAssets",null),(0,i.Cg)([(0,kt.sx)(s.ys,"concatAssets")],fn.prototype,"concatAssets",null);const pn={templateType:hn.identity("type"),animatedImage:hn.identity("ani"),flipZIndex:hn.boolean("fz"),landscapeOverlay:hn.boolean("lo")};class gn{constructor(){this.hasAnyInlineDecoration=t=>{if(t.items&&0!==t.items.length){if(t.items[0]&&t.items[0].assets){const e=t.items[0].assets;return!!(e.price||e.salePrice||e.installmentPrice||e.rating||e.review||e.priceDrop||e.viewed||e.freeShipping||e.discount)}return!1}return!1}}updateTemplate(t,e={}){const n=(0,d.A)(t);try{this.updateTemplateInternal(t,e)}catch(e){(0,a.c_)(e,s.ys,"Fail to apply template service on placement"),t=void 0,t=(0,d.A)(n)}}updateTemplateInternal(t,e){if(!t)return;Tt(t),this.decorationBeaconBuilder=new fn,this.decorationBeaconBuilder.setAvailableAssets(t);const n=(0,l.A)({},e,o.Nh);if(n.configType){t.template=n;(new dn).selectTemplate(t)}else t.template=this.processConfig(t,n),this.resetTempateTypeForInfopaneInMultiAds(t),this.filterAssetByFlight(t),this.updatePlacementImageSize(t),this.updateTemplateTypeForPriceDiscount(t);this.updateBeacon(t),t?.template?.templateType&&t.template.templateType.endsWith("-c")&&(t.template.templateType="msft-content-card",this.filterAssetByFlight(t))}processConfig(t,e){const n=e;if(this.updateAllowedAssetsAndTemplateForInfopane(t,n),this.updateTemplateInfoForDRInfopane(t,n),"msn-slideshow-card"!==n.templateType&&"msn-pseudo-video-card"!==n.templateType||this.updateSlideshowTemplateType(t,e,n),"msn-pattern-overlay-card"===n.templateType){"225"===this.getItemImageSize(t).height?n.landscapeOverlay=!1:n.templateType="msft-content-card"}return"msft-content-card"===n.templateType&&t.items&&t.items.length>3&&n.adCarousel&&(n.templateType="msn-ad-carousel"),this.updateTemplateInfoForBrandStory(t,n),n}updatePlacementImageSize(t){if("msn-pattern-overlay-card"===t.template.templateType){const e=this.getItemImageSize(t);t.imageWidth=(0,c.A)(t,"imageWidth",e.width),t.imageHeight=(0,c.A)(t,"imageHeight",e.height)}}updateBeacon(t){const e=e=>{if(e.includes("srtb.msn.com")){const n=new URL(e);return this.addOrUpdateUrlQueryParam(n,"t",this.serializeTemplateConfig(t)),this.decorationBeaconBuilder.setDisplayedAssets(t),this.decorationBeaconBuilder.availableAssets&&this.addOrUpdateUrlQueryParam(n,"dec",this.decorationBeaconBuilder.availableAssets+"-"+this.decorationBeaconBuilder.displayedAssets),n.href}return e};if(!(0,h.A)(t.beaconsJson)){const n=JSON.parse(t.beaconsJson);n&&((0,f.A)(n.trb)&&(n.trb=n.trb.map(t=>e(t))),(0,f.A)(n.tvb)&&(n.tvb=n.tvb.map(t=>e(t))),t.beaconsJson=JSON.stringify(n))}t&&(0,f.A)(t.items)&&(0,p.A)(t.items,t=>{if(!(0,h.A)(t.clickBeacons)){const n=JSON.parse(t.clickBeacons);n&&((0,f.A)(n.tcb)&&(n.tcb=n.tcb.map(t=>e(t))),t.clickBeacons=JSON.stringify(n))}})}serializeTemplateConfig(t){return t.items&&t.items.length>0&&t.items[0].video?t.items[0].verificationParameters?"msn-video-ias":"msn-video":(0,g.A)(pn,(e,n,i)=>{const r=(0,c.A)(t.template,i);if(r){const t=n(r);if(t)return""===e?t:`${e}_${t}`}return e},"")}addOrUpdateUrlQueryParam(t,e,n){return ln._3.getQueryParameterByName(e,t.href)?ln._3.updateSearchParam(t,e,n):ln._3.appendSearchParam(t,e,n)}updateSlideshowTemplateType(t,e,n){t&&t.items&&t.items[0]&&t.items[0].images&&t.items[0].images.length>1?(n.templateType=e.templateType,t.slideshowProps=n.slideshowProps):(n.templateType="msft-content-card",n.slideshowProps=void 0)}getItemImageSize(t){const e=(0,m.A)(t.items);return(0,h.A)(e)?{}:{width:`${(0,c.A)(e,"imageWidth")}`,height:`${(0,c.A)(e,"imageHeight")}`}}calculateDiscount(t){const e=t.price,n=t.salePrice;if(e&&n){const i=Number(e.replace(/[^0-9.-]+/g,"")),r=Number(n.replace(/[^0-9.-]+/g,""));t.discount=Math.floor((i-r)/i*100)}}filterAssetByFlight(t){if(!t.template?.enableVAPhase2&&t&&t.items&&t.items[0]&&t.items[0].assets){this.calculateDiscount(t.items[0].assets);const e=(0,w.A)([...r.rQ,...t.template?.allowedAssets||[],...t.template?.auctionCallAssets||[]]),n=(0,g.A)(t.items[0].assets,(t,n,i)=>(e.includes(r.eO[i])&&(t[i]=n),t),{});t.items[0].assets=n}}resetTempateTypeForInfopaneInMultiAds(t){"infopane"===t.region&&t.items&&t.items.length>1&&"msn-info-pane-dynamic-rendering"!==t.template.templateType&&(t.template.templateType="msft-content-card",t.template.animatedImage="")}isValidProviderNameForBrand(t){if(!(t&&t.items&&t.items[0]&&t.items[0].providerName))return!1;const e=t.items[0].providerName;return-1===e.indexOf("/")&&e.length<20}updateAllowedAssetsAndTemplateForInfopane(t,e){"msn-brand-story"!==e.templateType&&"msn-brand-story-no-deco"!==e.templateType&&"msn-brand-story-no-progressive-display"!==e.templateType&&"msn-hotspot-single"!==e.templateType&&"msn-discount-scribble"!==e.templateType&&"msn-content-reveal"!==e.templateType&&"msn-gamification"!==e.templateType||"infopane"===t.region&&(e.allowedAssets=void 0,e.templateType="msft-content-card")}updateTemplateInfoForBrandStory(t,e){"msn-brand-story"!==e.templateType&&"msn-brand-story-no-deco"!==e.templateType&&"msn-brand-story-no-progressive-display"!==e.templateType||(t.items?.[0]?.description===t.items?.[0]?.providerName&&(t.items[0].description=null),this.isValidProviderNameForBrand(t)||(e.templateType="msft-content-card",e.allowedAssets=void 0))}updateTemplateTypeForPriceDiscount(t){t.items?.[0]?.assets?.discount>=t.template?.discountThreshold||(["msn-hotspot-single","msn-discount-scribble","msn-gamification"].includes(t.template?.templateType)&&(t.template.templateType="msft-content-card",t.template.allowedAssets=void 0,t.items[0].assets={}),"msn-content-reveal"===t.template?.templateType&&(delete t.items?.[0]?.assets?.discount,t.items?.[0]?.description===t.items?.[0]?.providerName&&(t.items[0].description=null),t.items?.[0]?.description||this.hasAnyInlineDecoration(t)||(t.template.templateType="msft-content-card",t.template.allowedAssets=void 0)),"msn-brand-story"===t.template?.templateType&&delete t.items?.[0]?.assets?.discount)}updateTemplateInfoForDRInfopane(t,e){"river"===t.region||"infopane"==t.region&&"msn-info-pane-dynamic-rendering"===e.templateType||(e.templateType="msft-content-card"),"river"===t.region&&"msn-info-pane-dynamic-rendering"===e.templateType&&(e.templateType="msft-content-card")}}(0,i.Cg)([(0,kt.sx)(s.ys,"updateTemplate")],gn.prototype,"updateTemplate",null),(0,i.Cg)([(0,kt.sx)(s.ys,"updateTemplateInternal")],gn.prototype,"updateTemplateInternal",null),(0,i.Cg)([(0,kt.sx)(s.ys,"processConfig")],gn.prototype,"processConfig",null),(0,i.Cg)([(0,kt.sx)(s.ys,"updatePlacementImageSize")],gn.prototype,"updatePlacementImageSize",null),(0,i.Cg)([(0,kt.sx)(s.ys,"updateBeacon")],gn.prototype,"updateBeacon",null),(0,i.Cg)([(0,kt.sx)(s.ys,"serializeTemplateConfig")],gn.prototype,"serializeTemplateConfig",null),(0,i.Cg)([(0,kt.sx)(s.ys,"addOrUpdateQueryParam")],gn.prototype,"addOrUpdateUrlQueryParam",null),(0,i.Cg)([(0,kt.sx)(s.ys,"updateSlideshowTemplateType")],gn.prototype,"updateSlideshowTemplateType",null),(0,i.Cg)([(0,kt.sx)(s.ys,"getItemImageSize")],gn.prototype,"getItemImageSize",null),(0,i.Cg)([(0,kt.sx)(s.ys,"calculateDiscount")],gn.prototype,"calculateDiscount",null),(0,i.Cg)([(0,kt.sx)(s.ys,"filterAssetByFlight")],gn.prototype,"filterAssetByFlight",null),(0,i.Cg)([(0,kt.sx)(s.ys,"resetTempateTypeForInfopaneInMultiAds")],gn.prototype,"resetTempateTypeForInfopaneInMultiAds",null),(0,i.Cg)([(0,kt.sx)(s.ys,"isValidProviderNameForBrand",()=>!1)],gn.prototype,"isValidProviderNameForBrand",null),(0,i.Cg)([(0,kt.sx)(s.ys,"updateAllowedAssetsAndTemplateForInfopane")],gn.prototype,"updateAllowedAssetsAndTemplateForInfopane",null),(0,i.Cg)([(0,kt.sx)(s.ys,"updateTemplateInfoForBrandStory")],gn.prototype,"updateTemplateInfoForBrandStory",null),(0,i.Cg)([(0,kt.sx)(s.ys,"updateTemplateTypeForPriceDiscount")],gn.prototype,"updateTemplateTypeForPriceDiscount",null),(0,i.Cg)([(0,kt.sx)(s.ys,"hasAnyInlineDecoration")],gn.prototype,"hasAnyInlineDecoration",void 0),(0,i.Cg)([(0,kt.sx)(s.ys,"updateTemplateInfoForDRInfopane")],gn.prototype,"updateTemplateInfoForDRInfopane",null)},99382:function(t,e,n){var i;n.d(e,{j:function(){return i}}),function(t){t.connectorStateKey="_@STATE@_",t.renderAction="@@connector-view/RENDER",t.dataConnectorMergeInitAction="@@data-connector/MERGE-INIT"}(i||(i={}))},99700:function(t,e,n){n.d(e,{_:function(){return m}});var i=n(6092),r=n(98216),o=n(76166),s=n(89980),a=n(93468),c=n(65022),u=n(77246);const d="TS_QUERIES";class l{constructor(t){this.config=t}buildURL(){return""}parseResponse(t){return[]}formatData(t){return t&&Array.isArray(t)?t.map(t=>("string"==typeof t&&(t={query:t}),this.config.landingPageBaseUrl&&t.query&&(t.href=this.config.landingPageBaseUrl+encodeURIComponent(t.query)+"&form="+this.config.formCode+"&refig="+r.YT.getRequestId()),t)):[]}async fetchTrendingSearches(t={credentials:"same-origin",method:"GET",mode:"cors"}){let e,n=[];if(!this.config||!this.config.apiEndpoint)return n;const i={};try{r.YT.addOrUpdateTmplProperty("fetchTrendingsearch","1");const s=this.buildURL(),a=this.config.apiTimeout||1e4,c=await(0,o.hv)(decodeURIComponent(s),a,t);if(i.tIdInHeader=c.headers?.has("bingapis-traceid"),i.traceId=c.headers?.get("bingapis-traceid"),!c||!c.ok){if(404===c.status)return r.YT.addOrUpdateTmplProperty("tsResponse","0"),n;throw new Error("Error response: "+c.status)}e=await c.json()}catch(t){return(0,a.vV)(c.pkK,`${t}`,"",i),n}try{if(!e)throw new Error("Invalid format of response.");if(n=this.parseResponse(e),!n||!Array.isArray(n))throw new Error("Invalid format of response.");return 0===n.length&&(r.YT.addOrUpdateTmplProperty("tsResponse","0"),this.config.allowEmptyResponse||(0,a.vV)(c._SJ,"Empty trending search content","",i)),n.slice(0,this.config.cacheCount||5)}catch(t){(0,a.vV)(c.SgR,`${t}`,"",i)}return n}async getTrendingSearches(){r.YT.addOrUpdateTmplProperty("trendingsearch","1");let t=[];if((0,u.S)())try{const t=(0,s.Lg)().getItem(d);if(t){const e=JSON.parse(t),n=(e?.cacheTime||0)+1e3*(this.config.cacheTimeout||60),r=e?.queries,o=e?.mkt;if(o===i.T3.CurrentMarket&&r&&r.length&&n>Date.now())return this.formatData(r)}}catch(t){(0,a.vV)(c.SgR,`${t}`)}if(t=await this.fetchTrendingSearches(),(0,u.S)())if(t&&t.length){const e={cacheTime:Date.now(),mkt:i.T3.CurrentMarket,queries:t};(0,s.Lg)().setItem(d,JSON.stringify(e))}else(0,s.Lg)().removeItem(d);return this.formatData(t)}}class h extends l{buildURL(){return this.config.apiEndpoint+"?qry=&ascv=json&pt="+this.config.partnerEndpoint+"&features="+this.config.features+"&mkt="+i.T3.CurrentMarket+"&cvid="+r.YT.getRequestId()}parseResponse(t){return t.suggestions&&Array.isArray(t.suggestions)?t.suggestions.filter(t=>!!t.q&&"PN"==t.t).map(t=>({query:t.q})):[]}}class f extends l{buildURL(){return this.config.apiEndpoint+"?apikey="+this.config.apikey+"&market="+i.T3.CurrentMarket+"&fdhead="+this.config.features}parseResponse(t){const e=JSON.parse(t[0]?.data);return e?.map(t=>({query:t?.Query,isAds:t?.IsAds}))||[]}}class p extends l{buildURL(){let t=this.config.apiEndpoint+"?appid="+this.config.appId+"&features="+this.config.features+"&mkt="+i.T3.CurrentMarket;return this.config.cc&&(t+="&cc="+this.config.cc),this.config.strictMode&&(t+="&IsStrictMode=1"),t}parseResponse(t){return t.value?.map(t=>({query:t.query?.text}))||[]}}class g extends l{buildURL(){return this.config.apiEndpoint}parseResponse(t){const e=t.suggestedQueries?.sort((t,e)=>parseFloat(e.metadata.similarityScore)-parseFloat(t.metadata.similarityScore));return e?.map(t=>({query:t.query}))||[]}}function m(t){let e;switch(t.apiVersion){case 4:e=new g(t);break;case 3:e=new h(t);break;case 2:e=new p(t);break;default:e=new f(t)}return e}},99863:function(t,e,n){n.d(e,{X3:function(){return r},_z:function(){return a},iO:function(){return s}});var i=n(87405);const r=t=>{const{clientHeight:e,clientWidth:n}=document.documentElement,r=(0,i.pr)(t);if(!r)throw new Error("River element is not defined");const o=r.getBoundingClientRect();return{contentInViewport:{height:e-o.y,width:n},river:o}},o=(t,e,n)=>c(t,e).reduce((t,e,i)=>t+e+(0===i?0:n),0),s=(t,e,n,i,s=12,a=0)=>{const{contentInViewport:c}=r(t),u=((t,e,n,i=12)=>n?n.map(n=>{const r=t[n?.layoutTemplate];return o(r,e,i)}):[])(e,n,i,s);let d=0,l=0;for(let t=0;t<u.length&&!(d>=c.height-a);t++)d+=u[t]+s,l++;return l},a=(t,e,n,i,s=12,a=0)=>{const{contentInViewport:u}=r(t),d=((t,e,n,i=12)=>n?n.map(n=>{if(void 0!==n.templateId){const r=t[n.templateId];return o(r,e,i)}return 0}):[])(e,n,i,s);let l=0,h=0,f=0;for(let t=0;t<d.length;t++){if(l+=d[t]+s,l>=u.height-a){const r=i[t]?.templateId;if(void 0===r)break;const o=e[r],h=c(o,n);l=l-d[t]-s;for(let t=0;t<h.length&&(l+=h[t]+(0==t?0:s),!(l>=u.height-a));t++)f++;break}h++}return{lastSectionIndex:h,lastRowIndex:f}},c=(t,e)=>{if(!t||!t.rowHeightPx)throw new Error("Invalid layout template");const{rowHeightPx:n}=t;return n[e]??[]}},99893:function(t,e,n){var i;n.d(e,{O:function(){return i}}),function(t){t.MSCCBanner="mscc",t.OneTrustBanner="onetrust",t.WidgetHost="widgethost",t.None="none"}(i||(i={}))},99928:function(t,e,n){var i;n.d(e,{MG:function(){return s},rp:function(){return d},vI:function(){return c}}),function(t){t[t.none=0]="none",t[t.default=16]="default",t[t.medium=20]="medium",t[t.large=24]="large"}(i||(i={}));var r,o;!function(t){t[t.xsmall=472]="xsmall",t[t.small=600]="small",t[t.medium=768]="medium",t[t.large=834]="large",t[t.xlarge=1024]="xlarge"}(r||(r={})),function(t){t[t.xsmall=472]="xsmall",t[t.small=600]="small",t[t.medium=643]="medium",t[t.large=834]="large",t[t.xlarge=1024]="xlarge"}(o||(o={}));const s=324;var a;!function(t){t[t.medium=440]="medium",t[t.large=335]="large",t[t.xlarge=384]="xlarge"}(a||(a={}));const c=["FailedToCreate","NotEnoughRiverCards","SuccessfullyCreated","SuccessfullyPartiallyFilled"];var u;!function(t){t.BingHomepageMobile="bingHomepageMobile",t.Launcher="launcher",t.SwiftKey="swiftKey",t.EdgeMobile="mobilefeededge",t.SAAndroid="mobilefeedsaa",t.SAIOS="mobilefeedsai",t.Outlook="outlookfeed",t.Office="officefeed",t.Default="mobilefeed"}(u||(u={}));const d=t=>"infopane-card"===t||"responsive-infopane"===t},99999:function(t,e,n){n.d(e,{y:function(){return r}});var i=n(32633);const r=(t,e=3,n=1e3)=>(e<0&&(e=0),{fetchAuthData:async(r,s)=>{let a={resource:r,error:{status:i.f.OtherError}};s&&(e=0);for(let c=0;c<e+1&&(a=await t.fetchAuthData(r,s),a?.error?.status===i.f.MaySucceedOnRetry);c++)await o(n);return a}}),o=async t=>new Promise(function(e){setTimeout(e,t)})}}]);